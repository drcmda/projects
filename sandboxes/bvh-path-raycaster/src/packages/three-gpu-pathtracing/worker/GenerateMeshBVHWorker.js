import { Box3, BufferAttribute } from 'three'
import { MeshBVH } from 'three-mesh-bvh'

function decodeBase64(base64, enableUnicode) {
  var binaryString = atob(base64)
  if (enableUnicode) {
    var binaryView = new Uint8Array(binaryString.length)
    for (var i = 0, n = binaryString.length; i < n; ++i) {
      binaryView[i] = binaryString.charCodeAt(i)
    }
    return String.fromCharCode.apply(null, new Uint16Array(binaryView.buffer))
  }
  return binaryString
}

function createURL(base64, sourcemapArg, enableUnicodeArg) {
  var sourcemap = sourcemapArg === undefined ? null : sourcemapArg
  var enableUnicode = enableUnicodeArg === undefined ? false : enableUnicodeArg
  var source = decodeBase64(base64, enableUnicode)
  var start = source.indexOf('\n', 10) + 1
  var body = source.substring(start) + (sourcemap ? '//# sourceMappingURL=' + sourcemap : '')
  var blob = new Blob([body], { type: 'application/javascript' })
  return URL.createObjectURL(blob)
}

function createBase64WorkerFactory(base64, sourcemapArg, enableUnicodeArg) {
  var url
  return function WorkerFactory(options) {
    url = url || createURL(base64, sourcemapArg, enableUnicodeArg)
    return new Worker(url, options)
  }
}

var WorkerFactory = createBase64WorkerFactory(
  'Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewoJJ3VzZSBzdHJpY3QnOwoKCS8qKgoJICogQGxpY2Vuc2UKCSAqIENvcHlyaWdodCAyMDEwLTIwMjEgVGhyZWUuanMgQXV0aG9ycwoJICogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IE1JVAoJICovY29uc3QgUkVWSVNJT049JzEzNSc7Y29uc3QgQ3VsbEZhY2VOb25lPTA7Y29uc3QgQ3VsbEZhY2VCYWNrPTE7Y29uc3QgQ3VsbEZhY2VGcm9udD0yO2NvbnN0IFBDRlNoYWRvd01hcD0xO2NvbnN0IFBDRlNvZnRTaGFkb3dNYXA9Mjtjb25zdCBWU01TaGFkb3dNYXA9Mztjb25zdCBGcm9udFNpZGU9MDtjb25zdCBCYWNrU2lkZT0xO2NvbnN0IERvdWJsZVNpZGU9Mjtjb25zdCBGbGF0U2hhZGluZz0xO2NvbnN0IE5vQmxlbmRpbmc9MDtjb25zdCBOb3JtYWxCbGVuZGluZz0xO2NvbnN0IEFkZGl0aXZlQmxlbmRpbmc9Mjtjb25zdCBTdWJ0cmFjdGl2ZUJsZW5kaW5nPTM7Y29uc3QgTXVsdGlwbHlCbGVuZGluZz00O2NvbnN0IEN1c3RvbUJsZW5kaW5nPTU7Y29uc3QgQWRkRXF1YXRpb249MTAwO2NvbnN0IFN1YnRyYWN0RXF1YXRpb249MTAxO2NvbnN0IFJldmVyc2VTdWJ0cmFjdEVxdWF0aW9uPTEwMjtjb25zdCBNaW5FcXVhdGlvbj0xMDM7Y29uc3QgTWF4RXF1YXRpb249MTA0O2NvbnN0IFplcm9GYWN0b3I9MjAwO2NvbnN0IE9uZUZhY3Rvcj0yMDE7Y29uc3QgU3JjQ29sb3JGYWN0b3I9MjAyO2NvbnN0IE9uZU1pbnVzU3JjQ29sb3JGYWN0b3I9MjAzO2NvbnN0IFNyY0FscGhhRmFjdG9yPTIwNDtjb25zdCBPbmVNaW51c1NyY0FscGhhRmFjdG9yPTIwNTtjb25zdCBEc3RBbHBoYUZhY3Rvcj0yMDY7Y29uc3QgT25lTWludXNEc3RBbHBoYUZhY3Rvcj0yMDc7Y29uc3QgRHN0Q29sb3JGYWN0b3I9MjA4O2NvbnN0IE9uZU1pbnVzRHN0Q29sb3JGYWN0b3I9MjA5O2NvbnN0IFNyY0FscGhhU2F0dXJhdGVGYWN0b3I9MjEwO2NvbnN0IE5ldmVyRGVwdGg9MDtjb25zdCBBbHdheXNEZXB0aD0xO2NvbnN0IExlc3NEZXB0aD0yO2NvbnN0IExlc3NFcXVhbERlcHRoPTM7Y29uc3QgRXF1YWxEZXB0aD00O2NvbnN0IEdyZWF0ZXJFcXVhbERlcHRoPTU7Y29uc3QgR3JlYXRlckRlcHRoPTY7Y29uc3QgTm90RXF1YWxEZXB0aD03O2NvbnN0IE11bHRpcGx5T3BlcmF0aW9uPTA7Y29uc3QgTWl4T3BlcmF0aW9uPTE7Y29uc3QgQWRkT3BlcmF0aW9uPTI7Y29uc3QgTm9Ub25lTWFwcGluZz0wO2NvbnN0IExpbmVhclRvbmVNYXBwaW5nPTE7Y29uc3QgUmVpbmhhcmRUb25lTWFwcGluZz0yO2NvbnN0IENpbmVvblRvbmVNYXBwaW5nPTM7Y29uc3QgQUNFU0ZpbG1pY1RvbmVNYXBwaW5nPTQ7Y29uc3QgQ3VzdG9tVG9uZU1hcHBpbmc9NTtjb25zdCBVVk1hcHBpbmc9MzAwO2NvbnN0IEN1YmVSZWZsZWN0aW9uTWFwcGluZz0zMDE7Y29uc3QgQ3ViZVJlZnJhY3Rpb25NYXBwaW5nPTMwMjtjb25zdCBFcXVpcmVjdGFuZ3VsYXJSZWZsZWN0aW9uTWFwcGluZz0zMDM7Y29uc3QgRXF1aXJlY3Rhbmd1bGFyUmVmcmFjdGlvbk1hcHBpbmc9MzA0O2NvbnN0IEN1YmVVVlJlZmxlY3Rpb25NYXBwaW5nPTMwNjtjb25zdCBDdWJlVVZSZWZyYWN0aW9uTWFwcGluZz0zMDc7Y29uc3QgUmVwZWF0V3JhcHBpbmc9MTAwMDtjb25zdCBDbGFtcFRvRWRnZVdyYXBwaW5nPTEwMDE7Y29uc3QgTWlycm9yZWRSZXBlYXRXcmFwcGluZz0xMDAyO2NvbnN0IE5lYXJlc3RGaWx0ZXI9MTAwMztjb25zdCBOZWFyZXN0TWlwbWFwTmVhcmVzdEZpbHRlcj0xMDA0O2NvbnN0IE5lYXJlc3RNaXBtYXBMaW5lYXJGaWx0ZXI9MTAwNTtjb25zdCBMaW5lYXJGaWx0ZXI9MTAwNjtjb25zdCBMaW5lYXJNaXBtYXBOZWFyZXN0RmlsdGVyPTEwMDc7Y29uc3QgTGluZWFyTWlwbWFwTGluZWFyRmlsdGVyPTEwMDg7Y29uc3QgVW5zaWduZWRCeXRlVHlwZT0xMDA5O2NvbnN0IEJ5dGVUeXBlPTEwMTA7Y29uc3QgU2hvcnRUeXBlPTEwMTE7Y29uc3QgVW5zaWduZWRTaG9ydFR5cGU9MTAxMjtjb25zdCBJbnRUeXBlPTEwMTM7Y29uc3QgVW5zaWduZWRJbnRUeXBlPTEwMTQ7Y29uc3QgRmxvYXRUeXBlPTEwMTU7Y29uc3QgSGFsZkZsb2F0VHlwZT0xMDE2O2NvbnN0IFVuc2lnbmVkU2hvcnQ0NDQ0VHlwZT0xMDE3O2NvbnN0IFVuc2lnbmVkU2hvcnQ1NTUxVHlwZT0xMDE4O2NvbnN0IFVuc2lnbmVkU2hvcnQ1NjVUeXBlPTEwMTk7Y29uc3QgVW5zaWduZWRJbnQyNDhUeXBlPTEwMjA7Y29uc3QgQWxwaGFGb3JtYXQ9MTAyMTtjb25zdCBSR0JGb3JtYXQ9MTAyMjtjb25zdCBSR0JBRm9ybWF0PTEwMjM7Y29uc3QgTHVtaW5hbmNlRm9ybWF0PTEwMjQ7Y29uc3QgTHVtaW5hbmNlQWxwaGFGb3JtYXQ9MTAyNTtjb25zdCBSR0JFRm9ybWF0PVJHQkFGb3JtYXQ7Y29uc3QgRGVwdGhGb3JtYXQ9MTAyNjtjb25zdCBEZXB0aFN0ZW5jaWxGb3JtYXQ9MTAyNztjb25zdCBSZWRGb3JtYXQ9MTAyODtjb25zdCBSZWRJbnRlZ2VyRm9ybWF0PTEwMjk7Y29uc3QgUkdGb3JtYXQ9MTAzMDtjb25zdCBSR0ludGVnZXJGb3JtYXQ9MTAzMTtjb25zdCBSR0JJbnRlZ2VyRm9ybWF0PTEwMzI7Y29uc3QgUkdCQUludGVnZXJGb3JtYXQ9MTAzMztjb25zdCBSR0JfUzNUQ19EWFQxX0Zvcm1hdD0zMzc3Njtjb25zdCBSR0JBX1MzVENfRFhUMV9Gb3JtYXQ9MzM3Nzc7Y29uc3QgUkdCQV9TM1RDX0RYVDNfRm9ybWF0PTMzNzc4O2NvbnN0IFJHQkFfUzNUQ19EWFQ1X0Zvcm1hdD0zMzc3OTtjb25zdCBSR0JfUFZSVENfNEJQUFYxX0Zvcm1hdD0zNTg0MDtjb25zdCBSR0JfUFZSVENfMkJQUFYxX0Zvcm1hdD0zNTg0MTtjb25zdCBSR0JBX1BWUlRDXzRCUFBWMV9Gb3JtYXQ9MzU4NDI7Y29uc3QgUkdCQV9QVlJUQ18yQlBQVjFfRm9ybWF0PTM1ODQzO2NvbnN0IFJHQl9FVEMxX0Zvcm1hdD0zNjE5Njtjb25zdCBSR0JfRVRDMl9Gb3JtYXQ9Mzc0OTI7Y29uc3QgUkdCQV9FVEMyX0VBQ19Gb3JtYXQ9Mzc0OTY7Y29uc3QgUkdCQV9BU1RDXzR4NF9Gb3JtYXQ9Mzc4MDg7Y29uc3QgUkdCQV9BU1RDXzV4NF9Gb3JtYXQ9Mzc4MDk7Y29uc3QgUkdCQV9BU1RDXzV4NV9Gb3JtYXQ9Mzc4MTA7Y29uc3QgUkdCQV9BU1RDXzZ4NV9Gb3JtYXQ9Mzc4MTE7Y29uc3QgUkdCQV9BU1RDXzZ4Nl9Gb3JtYXQ9Mzc4MTI7Y29uc3QgUkdCQV9BU1RDXzh4NV9Gb3JtYXQ9Mzc4MTM7Y29uc3QgUkdCQV9BU1RDXzh4Nl9Gb3JtYXQ9Mzc4MTQ7Y29uc3QgUkdCQV9BU1RDXzh4OF9Gb3JtYXQ9Mzc4MTU7Y29uc3QgUkdCQV9BU1RDXzEweDVfRm9ybWF0PTM3ODE2O2NvbnN0IFJHQkFfQVNUQ18xMHg2X0Zvcm1hdD0zNzgxNztjb25zdCBSR0JBX0FTVENfMTB4OF9Gb3JtYXQ9Mzc4MTg7Y29uc3QgUkdCQV9BU1RDXzEweDEwX0Zvcm1hdD0zNzgxOTtjb25zdCBSR0JBX0FTVENfMTJ4MTBfRm9ybWF0PTM3ODIwO2NvbnN0IFJHQkFfQVNUQ18xMngxMl9Gb3JtYXQ9Mzc4MjE7Y29uc3QgUkdCQV9CUFRDX0Zvcm1hdD0zNjQ5Mjtjb25zdCBTUkdCOF9BTFBIQThfQVNUQ180eDRfRm9ybWF0PTM3ODQwO2NvbnN0IFNSR0I4X0FMUEhBOF9BU1RDXzV4NF9Gb3JtYXQ9Mzc4NDE7Y29uc3QgU1JHQjhfQUxQSEE4X0FTVENfNXg1X0Zvcm1hdD0zNzg0Mjtjb25zdCBTUkdCOF9BTFBIQThfQVNUQ182eDVfRm9ybWF0PTM3ODQzO2NvbnN0IFNSR0I4X0FMUEhBOF9BU1RDXzZ4Nl9Gb3JtYXQ9Mzc4NDQ7Y29uc3QgU1JHQjhfQUxQSEE4X0FTVENfOHg1X0Zvcm1hdD0zNzg0NTtjb25zdCBTUkdCOF9BTFBIQThfQVNUQ184eDZfRm9ybWF0PTM3ODQ2O2NvbnN0IFNSR0I4X0FMUEhBOF9BU1RDXzh4OF9Gb3JtYXQ9Mzc4NDc7Y29uc3QgU1JHQjhfQUxQSEE4X0FTVENfMTB4NV9Gb3JtYXQ9Mzc4NDg7Y29uc3QgU1JHQjhfQUxQSEE4X0FTVENfMTB4Nl9Gb3JtYXQ9Mzc4NDk7Y29uc3QgU1JHQjhfQUxQSEE4X0FTVENfMTB4OF9Gb3JtYXQ9Mzc4NTA7Y29uc3QgU1JHQjhfQUxQSEE4X0FTVENfMTB4MTBfRm9ybWF0PTM3ODUxO2NvbnN0IFNSR0I4X0FMUEhBOF9BU1RDXzEyeDEwX0Zvcm1hdD0zNzg1Mjtjb25zdCBTUkdCOF9BTFBIQThfQVNUQ18xMngxMl9Gb3JtYXQ9Mzc4NTM7Y29uc3QgTG9vcE9uY2U9MjIwMDtjb25zdCBMb29wUmVwZWF0PTIyMDE7Y29uc3QgTG9vcFBpbmdQb25nPTIyMDI7Y29uc3QgSW50ZXJwb2xhdGVEaXNjcmV0ZT0yMzAwO2NvbnN0IEludGVycG9sYXRlTGluZWFyPTIzMDE7Y29uc3QgSW50ZXJwb2xhdGVTbW9vdGg9MjMwMjtjb25zdCBaZXJvQ3VydmF0dXJlRW5kaW5nPTI0MDA7Y29uc3QgWmVyb1Nsb3BlRW5kaW5nPTI0MDE7Y29uc3QgV3JhcEFyb3VuZEVuZGluZz0yNDAyO2NvbnN0IE5vcm1hbEFuaW1hdGlvbkJsZW5kTW9kZT0yNTAwO2NvbnN0IEFkZGl0aXZlQW5pbWF0aW9uQmxlbmRNb2RlPTI1MDE7Y29uc3QgVHJpYW5nbGVzRHJhd01vZGU9MDtjb25zdCBMaW5lYXJFbmNvZGluZz0zMDAwO2NvbnN0IHNSR0JFbmNvZGluZz0zMDAxO2NvbnN0IEdhbW1hRW5jb2Rpbmc9MzAwNztjb25zdCBSR0JFRW5jb2Rpbmc9MzAwMjtjb25zdCBSR0JNN0VuY29kaW5nPTMwMDQ7Y29uc3QgUkdCTTE2RW5jb2Rpbmc9MzAwNTtjb25zdCBSR0JERW5jb2Rpbmc9MzAwNjtjb25zdCBCYXNpY0RlcHRoUGFja2luZz0zMjAwO2NvbnN0IFJHQkFEZXB0aFBhY2tpbmc9MzIwMTtjb25zdCBUYW5nZW50U3BhY2VOb3JtYWxNYXA9MDtjb25zdCBPYmplY3RTcGFjZU5vcm1hbE1hcD0xO2NvbnN0IEtlZXBTdGVuY2lsT3A9NzY4MDtjb25zdCBBbHdheXNTdGVuY2lsRnVuYz01MTk7Y29uc3QgU3RhdGljRHJhd1VzYWdlPTM1MDQ0O2NvbnN0IER5bmFtaWNEcmF3VXNhZ2U9MzUwNDg7Y29uc3QgR0xTTDM9JzMwMCBlcyc7LyoqCgkgKiBodHRwczovL2dpdGh1Yi5jb20vbXJkb29iL2V2ZW50ZGlzcGF0Y2hlci5qcy8KCSAqL2NsYXNzIEV2ZW50RGlzcGF0Y2hlcnthZGRFdmVudExpc3RlbmVyKHR5cGUsbGlzdGVuZXIpe2lmKHRoaXMuX2xpc3RlbmVycz09PXVuZGVmaW5lZCl0aGlzLl9saXN0ZW5lcnM9e307Y29uc3QgbGlzdGVuZXJzPXRoaXMuX2xpc3RlbmVycztpZihsaXN0ZW5lcnNbdHlwZV09PT11bmRlZmluZWQpe2xpc3RlbmVyc1t0eXBlXT1bXTt9aWYobGlzdGVuZXJzW3R5cGVdLmluZGV4T2YobGlzdGVuZXIpPT09LTEpe2xpc3RlbmVyc1t0eXBlXS5wdXNoKGxpc3RlbmVyKTt9fWhhc0V2ZW50TGlzdGVuZXIodHlwZSxsaXN0ZW5lcil7aWYodGhpcy5fbGlzdGVuZXJzPT09dW5kZWZpbmVkKXJldHVybiBmYWxzZTtjb25zdCBsaXN0ZW5lcnM9dGhpcy5fbGlzdGVuZXJzO3JldHVybiBsaXN0ZW5lcnNbdHlwZV0hPT11bmRlZmluZWQmJmxpc3RlbmVyc1t0eXBlXS5pbmRleE9mKGxpc3RlbmVyKSE9PS0xO31yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsbGlzdGVuZXIpe2lmKHRoaXMuX2xpc3RlbmVycz09PXVuZGVmaW5lZClyZXR1cm47Y29uc3QgbGlzdGVuZXJzPXRoaXMuX2xpc3RlbmVycztjb25zdCBsaXN0ZW5lckFycmF5PWxpc3RlbmVyc1t0eXBlXTtpZihsaXN0ZW5lckFycmF5IT09dW5kZWZpbmVkKXtjb25zdCBpbmRleD1saXN0ZW5lckFycmF5LmluZGV4T2YobGlzdGVuZXIpO2lmKGluZGV4IT09LTEpe2xpc3RlbmVyQXJyYXkuc3BsaWNlKGluZGV4LDEpO319fWRpc3BhdGNoRXZlbnQoZXZlbnQpe2lmKHRoaXMuX2xpc3RlbmVycz09PXVuZGVmaW5lZClyZXR1cm47Y29uc3QgbGlzdGVuZXJzPXRoaXMuX2xpc3RlbmVycztjb25zdCBsaXN0ZW5lckFycmF5PWxpc3RlbmVyc1tldmVudC50eXBlXTtpZihsaXN0ZW5lckFycmF5IT09dW5kZWZpbmVkKXtldmVudC50YXJnZXQ9dGhpczsvLyBNYWtlIGEgY29weSwgaW4gY2FzZSBsaXN0ZW5lcnMgYXJlIHJlbW92ZWQgd2hpbGUgaXRlcmF0aW5nLgoJY29uc3QgYXJyYXk9bGlzdGVuZXJBcnJheS5zbGljZSgwKTtmb3IobGV0IGk9MCxsPWFycmF5Lmxlbmd0aDtpPGw7aSsrKXthcnJheVtpXS5jYWxsKHRoaXMsZXZlbnQpO31ldmVudC50YXJnZXQ9bnVsbDt9fX1jb25zdCBfbHV0PVtdO2ZvcihsZXQgaT0wO2k8MjU2O2krKyl7X2x1dFtpXT0oaTwxNj8nMCc6JycpK2kudG9TdHJpbmcoMTYpO31jb25zdCBERUcyUkFEPU1hdGguUEkvMTgwO2NvbnN0IFJBRDJERUc9MTgwL01hdGguUEk7Ly8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xMDUwMzQvaG93LXRvLWNyZWF0ZS1hLWd1aWQtdXVpZC1pbi1qYXZhc2NyaXB0LzIxOTYzMTM2IzIxOTYzMTM2CglmdW5jdGlvbiBnZW5lcmF0ZVVVSUQoKXtjb25zdCBkMD1NYXRoLnJhbmRvbSgpKjB4ZmZmZmZmZmZ8MDtjb25zdCBkMT1NYXRoLnJhbmRvbSgpKjB4ZmZmZmZmZmZ8MDtjb25zdCBkMj1NYXRoLnJhbmRvbSgpKjB4ZmZmZmZmZmZ8MDtjb25zdCBkMz1NYXRoLnJhbmRvbSgpKjB4ZmZmZmZmZmZ8MDtjb25zdCB1dWlkPV9sdXRbZDAmMHhmZl0rX2x1dFtkMD4+OCYweGZmXStfbHV0W2QwPj4xNiYweGZmXStfbHV0W2QwPj4yNCYweGZmXSsnLScrX2x1dFtkMSYweGZmXStfbHV0W2QxPj44JjB4ZmZdKyctJytfbHV0W2QxPj4xNiYweDBmfDB4NDBdK19sdXRbZDE+PjI0JjB4ZmZdKyctJytfbHV0W2QyJjB4M2Z8MHg4MF0rX2x1dFtkMj4+OCYweGZmXSsnLScrX2x1dFtkMj4+MTYmMHhmZl0rX2x1dFtkMj4+MjQmMHhmZl0rX2x1dFtkMyYweGZmXStfbHV0W2QzPj44JjB4ZmZdK19sdXRbZDM+PjE2JjB4ZmZdK19sdXRbZDM+PjI0JjB4ZmZdOy8vIC50b1VwcGVyQ2FzZSgpIGhlcmUgZmxhdHRlbnMgY29uY2F0ZW5hdGVkIHN0cmluZ3MgdG8gc2F2ZSBoZWFwIG1lbW9yeSBzcGFjZS4KCXJldHVybiB1dWlkLnRvVXBwZXJDYXNlKCk7fWZ1bmN0aW9uIGNsYW1wKHZhbHVlLG1pbixtYXgpe3JldHVybiBNYXRoLm1heChtaW4sTWF0aC5taW4obWF4LHZhbHVlKSk7fS8vIGNvbXB1dGUgZXVjbGlkaWFuIG1vZHVsbyBvZiBtICUgbgoJLy8gaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvTW9kdWxvX29wZXJhdGlvbgoJZnVuY3Rpb24gZXVjbGlkZWFuTW9kdWxvKG4sbSl7cmV0dXJuIChuJW0rbSklbTt9Ly8gTGluZWFyIG1hcHBpbmcgZnJvbSByYW5nZSA8YTEsIGEyPiB0byByYW5nZSA8YjEsIGIyPgoJZnVuY3Rpb24gbGVycCh4LHksdCl7cmV0dXJuICgxLXQpKngrdCp5O30vLyBodHRwOi8vd3d3LnJvcnlkcmlzY29sbC5jb20vMjAxNi8wMy8wNy9mcmFtZS1yYXRlLWluZGVwZW5kZW50LWRhbXBpbmctdXNpbmctbGVycC8KCWZ1bmN0aW9uIGlzUG93ZXJPZlR3byh2YWx1ZSl7cmV0dXJuICh2YWx1ZSZ2YWx1ZS0xKT09PTAmJnZhbHVlIT09MDt9ZnVuY3Rpb24gZmxvb3JQb3dlck9mVHdvKHZhbHVlKXtyZXR1cm4gTWF0aC5wb3coMixNYXRoLmZsb29yKE1hdGgubG9nKHZhbHVlKS9NYXRoLkxOMikpO31jbGFzcyBWZWN0b3Iye2NvbnN0cnVjdG9yKHgseSl7aWYoeD09PXZvaWQgMCl7eD0wO31pZih5PT09dm9pZCAwKXt5PTA7fXRoaXMueD14O3RoaXMueT15O31nZXQgd2lkdGgoKXtyZXR1cm4gdGhpcy54O31zZXQgd2lkdGgodmFsdWUpe3RoaXMueD12YWx1ZTt9Z2V0IGhlaWdodCgpe3JldHVybiB0aGlzLnk7fXNldCBoZWlnaHQodmFsdWUpe3RoaXMueT12YWx1ZTt9c2V0KHgseSl7dGhpcy54PXg7dGhpcy55PXk7cmV0dXJuIHRoaXM7fXNldFNjYWxhcihzY2FsYXIpe3RoaXMueD1zY2FsYXI7dGhpcy55PXNjYWxhcjtyZXR1cm4gdGhpczt9c2V0WCh4KXt0aGlzLng9eDtyZXR1cm4gdGhpczt9c2V0WSh5KXt0aGlzLnk9eTtyZXR1cm4gdGhpczt9c2V0Q29tcG9uZW50KGluZGV4LHZhbHVlKXtzd2l0Y2goaW5kZXgpe2Nhc2UgMDp0aGlzLng9dmFsdWU7YnJlYWs7Y2FzZSAxOnRoaXMueT12YWx1ZTticmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcignaW5kZXggaXMgb3V0IG9mIHJhbmdlOiAnK2luZGV4KTt9cmV0dXJuIHRoaXM7fWdldENvbXBvbmVudChpbmRleCl7c3dpdGNoKGluZGV4KXtjYXNlIDA6cmV0dXJuIHRoaXMueDtjYXNlIDE6cmV0dXJuIHRoaXMueTtkZWZhdWx0OnRocm93IG5ldyBFcnJvcignaW5kZXggaXMgb3V0IG9mIHJhbmdlOiAnK2luZGV4KTt9fWNsb25lKCl7cmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMueCx0aGlzLnkpO31jb3B5KHYpe3RoaXMueD12Lng7dGhpcy55PXYueTtyZXR1cm4gdGhpczt9YWRkKHYsdyl7aWYodyE9PXVuZGVmaW5lZCl7Y29uc29sZS53YXJuKCdUSFJFRS5WZWN0b3IyOiAuYWRkKCkgbm93IG9ubHkgYWNjZXB0cyBvbmUgYXJndW1lbnQuIFVzZSAuYWRkVmVjdG9ycyggYSwgYiApIGluc3RlYWQuJyk7cmV0dXJuIHRoaXMuYWRkVmVjdG9ycyh2LHcpO310aGlzLngrPXYueDt0aGlzLnkrPXYueTtyZXR1cm4gdGhpczt9YWRkU2NhbGFyKHMpe3RoaXMueCs9czt0aGlzLnkrPXM7cmV0dXJuIHRoaXM7fWFkZFZlY3RvcnMoYSxiKXt0aGlzLng9YS54K2IueDt0aGlzLnk9YS55K2IueTtyZXR1cm4gdGhpczt9YWRkU2NhbGVkVmVjdG9yKHYscyl7dGhpcy54Kz12Lngqczt0aGlzLnkrPXYueSpzO3JldHVybiB0aGlzO31zdWIodix3KXtpZih3IT09dW5kZWZpbmVkKXtjb25zb2xlLndhcm4oJ1RIUkVFLlZlY3RvcjI6IC5zdWIoKSBub3cgb25seSBhY2NlcHRzIG9uZSBhcmd1bWVudC4gVXNlIC5zdWJWZWN0b3JzKCBhLCBiICkgaW5zdGVhZC4nKTtyZXR1cm4gdGhpcy5zdWJWZWN0b3JzKHYsdyk7fXRoaXMueC09di54O3RoaXMueS09di55O3JldHVybiB0aGlzO31zdWJTY2FsYXIocyl7dGhpcy54LT1zO3RoaXMueS09cztyZXR1cm4gdGhpczt9c3ViVmVjdG9ycyhhLGIpe3RoaXMueD1hLngtYi54O3RoaXMueT1hLnktYi55O3JldHVybiB0aGlzO31tdWx0aXBseSh2KXt0aGlzLngqPXYueDt0aGlzLnkqPXYueTtyZXR1cm4gdGhpczt9bXVsdGlwbHlTY2FsYXIoc2NhbGFyKXt0aGlzLngqPXNjYWxhcjt0aGlzLnkqPXNjYWxhcjtyZXR1cm4gdGhpczt9ZGl2aWRlKHYpe3RoaXMueC89di54O3RoaXMueS89di55O3JldHVybiB0aGlzO31kaXZpZGVTY2FsYXIoc2NhbGFyKXtyZXR1cm4gdGhpcy5tdWx0aXBseVNjYWxhcigxL3NjYWxhcik7fWFwcGx5TWF0cml4MyhtKXtjb25zdCB4PXRoaXMueCx5PXRoaXMueTtjb25zdCBlPW0uZWxlbWVudHM7dGhpcy54PWVbMF0qeCtlWzNdKnkrZVs2XTt0aGlzLnk9ZVsxXSp4K2VbNF0qeStlWzddO3JldHVybiB0aGlzO31taW4odil7dGhpcy54PU1hdGgubWluKHRoaXMueCx2LngpO3RoaXMueT1NYXRoLm1pbih0aGlzLnksdi55KTtyZXR1cm4gdGhpczt9bWF4KHYpe3RoaXMueD1NYXRoLm1heCh0aGlzLngsdi54KTt0aGlzLnk9TWF0aC5tYXgodGhpcy55LHYueSk7cmV0dXJuIHRoaXM7fWNsYW1wKG1pbixtYXgpey8vIGFzc3VtZXMgbWluIDwgbWF4LCBjb21wb25lbnR3aXNlCgl0aGlzLng9TWF0aC5tYXgobWluLngsTWF0aC5taW4obWF4LngsdGhpcy54KSk7dGhpcy55PU1hdGgubWF4KG1pbi55LE1hdGgubWluKG1heC55LHRoaXMueSkpO3JldHVybiB0aGlzO31jbGFtcFNjYWxhcihtaW5WYWwsbWF4VmFsKXt0aGlzLng9TWF0aC5tYXgobWluVmFsLE1hdGgubWluKG1heFZhbCx0aGlzLngpKTt0aGlzLnk9TWF0aC5tYXgobWluVmFsLE1hdGgubWluKG1heFZhbCx0aGlzLnkpKTtyZXR1cm4gdGhpczt9Y2xhbXBMZW5ndGgobWluLG1heCl7Y29uc3QgbGVuZ3RoPXRoaXMubGVuZ3RoKCk7cmV0dXJuIHRoaXMuZGl2aWRlU2NhbGFyKGxlbmd0aHx8MSkubXVsdGlwbHlTY2FsYXIoTWF0aC5tYXgobWluLE1hdGgubWluKG1heCxsZW5ndGgpKSk7fWZsb29yKCl7dGhpcy54PU1hdGguZmxvb3IodGhpcy54KTt0aGlzLnk9TWF0aC5mbG9vcih0aGlzLnkpO3JldHVybiB0aGlzO31jZWlsKCl7dGhpcy54PU1hdGguY2VpbCh0aGlzLngpO3RoaXMueT1NYXRoLmNlaWwodGhpcy55KTtyZXR1cm4gdGhpczt9cm91bmQoKXt0aGlzLng9TWF0aC5yb3VuZCh0aGlzLngpO3RoaXMueT1NYXRoLnJvdW5kKHRoaXMueSk7cmV0dXJuIHRoaXM7fXJvdW5kVG9aZXJvKCl7dGhpcy54PXRoaXMueDwwP01hdGguY2VpbCh0aGlzLngpOk1hdGguZmxvb3IodGhpcy54KTt0aGlzLnk9dGhpcy55PDA/TWF0aC5jZWlsKHRoaXMueSk6TWF0aC5mbG9vcih0aGlzLnkpO3JldHVybiB0aGlzO31uZWdhdGUoKXt0aGlzLng9LXRoaXMueDt0aGlzLnk9LXRoaXMueTtyZXR1cm4gdGhpczt9ZG90KHYpe3JldHVybiB0aGlzLngqdi54K3RoaXMueSp2Lnk7fWNyb3NzKHYpe3JldHVybiB0aGlzLngqdi55LXRoaXMueSp2Lng7fWxlbmd0aFNxKCl7cmV0dXJuIHRoaXMueCp0aGlzLngrdGhpcy55KnRoaXMueTt9bGVuZ3RoKCl7cmV0dXJuIE1hdGguc3FydCh0aGlzLngqdGhpcy54K3RoaXMueSp0aGlzLnkpO31tYW5oYXR0YW5MZW5ndGgoKXtyZXR1cm4gTWF0aC5hYnModGhpcy54KStNYXRoLmFicyh0aGlzLnkpO31ub3JtYWxpemUoKXtyZXR1cm4gdGhpcy5kaXZpZGVTY2FsYXIodGhpcy5sZW5ndGgoKXx8MSk7fWFuZ2xlKCl7Ly8gY29tcHV0ZXMgdGhlIGFuZ2xlIGluIHJhZGlhbnMgd2l0aCByZXNwZWN0IHRvIHRoZSBwb3NpdGl2ZSB4LWF4aXMKCWNvbnN0IGFuZ2xlPU1hdGguYXRhbjIoLXRoaXMueSwtdGhpcy54KStNYXRoLlBJO3JldHVybiBhbmdsZTt9ZGlzdGFuY2VUbyh2KXtyZXR1cm4gTWF0aC5zcXJ0KHRoaXMuZGlzdGFuY2VUb1NxdWFyZWQodikpO31kaXN0YW5jZVRvU3F1YXJlZCh2KXtjb25zdCBkeD10aGlzLngtdi54LGR5PXRoaXMueS12Lnk7cmV0dXJuIGR4KmR4K2R5KmR5O31tYW5oYXR0YW5EaXN0YW5jZVRvKHYpe3JldHVybiBNYXRoLmFicyh0aGlzLngtdi54KStNYXRoLmFicyh0aGlzLnktdi55KTt9c2V0TGVuZ3RoKGxlbmd0aCl7cmV0dXJuIHRoaXMubm9ybWFsaXplKCkubXVsdGlwbHlTY2FsYXIobGVuZ3RoKTt9bGVycCh2LGFscGhhKXt0aGlzLngrPSh2LngtdGhpcy54KSphbHBoYTt0aGlzLnkrPSh2LnktdGhpcy55KSphbHBoYTtyZXR1cm4gdGhpczt9bGVycFZlY3RvcnModjEsdjIsYWxwaGEpe3RoaXMueD12MS54Kyh2Mi54LXYxLngpKmFscGhhO3RoaXMueT12MS55Kyh2Mi55LXYxLnkpKmFscGhhO3JldHVybiB0aGlzO31lcXVhbHModil7cmV0dXJuIHYueD09PXRoaXMueCYmdi55PT09dGhpcy55O31mcm9tQXJyYXkoYXJyYXksb2Zmc2V0KXtpZihvZmZzZXQ9PT12b2lkIDApe29mZnNldD0wO310aGlzLng9YXJyYXlbb2Zmc2V0XTt0aGlzLnk9YXJyYXlbb2Zmc2V0KzFdO3JldHVybiB0aGlzO310b0FycmF5KGFycmF5LG9mZnNldCl7aWYoYXJyYXk9PT12b2lkIDApe2FycmF5PVtdO31pZihvZmZzZXQ9PT12b2lkIDApe29mZnNldD0wO31hcnJheVtvZmZzZXRdPXRoaXMueDthcnJheVtvZmZzZXQrMV09dGhpcy55O3JldHVybiBhcnJheTt9ZnJvbUJ1ZmZlckF0dHJpYnV0ZShhdHRyaWJ1dGUsaW5kZXgsb2Zmc2V0KXtpZihvZmZzZXQhPT11bmRlZmluZWQpe2NvbnNvbGUud2FybignVEhSRUUuVmVjdG9yMjogb2Zmc2V0IGhhcyBiZWVuIHJlbW92ZWQgZnJvbSAuZnJvbUJ1ZmZlckF0dHJpYnV0ZSgpLicpO310aGlzLng9YXR0cmlidXRlLmdldFgoaW5kZXgpO3RoaXMueT1hdHRyaWJ1dGUuZ2V0WShpbmRleCk7cmV0dXJuIHRoaXM7fXJvdGF0ZUFyb3VuZChjZW50ZXIsYW5nbGUpe2NvbnN0IGM9TWF0aC5jb3MoYW5nbGUpLHM9TWF0aC5zaW4oYW5nbGUpO2NvbnN0IHg9dGhpcy54LWNlbnRlci54O2NvbnN0IHk9dGhpcy55LWNlbnRlci55O3RoaXMueD14KmMteSpzK2NlbnRlci54O3RoaXMueT14KnMreSpjK2NlbnRlci55O3JldHVybiB0aGlzO31yYW5kb20oKXt0aGlzLng9TWF0aC5yYW5kb20oKTt0aGlzLnk9TWF0aC5yYW5kb20oKTtyZXR1cm4gdGhpczt9KltTeW1ib2wuaXRlcmF0b3JdKCl7eWllbGQgdGhpcy54O3lpZWxkIHRoaXMueTt9fVZlY3RvcjIucHJvdG90eXBlLmlzVmVjdG9yMj10cnVlO2NsYXNzIE1hdHJpeDN7Y29uc3RydWN0b3IoKXt0aGlzLmVsZW1lbnRzPVsxLDAsMCwwLDEsMCwwLDAsMV07aWYoYXJndW1lbnRzLmxlbmd0aD4wKXtjb25zb2xlLmVycm9yKCdUSFJFRS5NYXRyaXgzOiB0aGUgY29uc3RydWN0b3Igbm8gbG9uZ2VyIHJlYWRzIGFyZ3VtZW50cy4gdXNlIC5zZXQoKSBpbnN0ZWFkLicpO319c2V0KG4xMSxuMTIsbjEzLG4yMSxuMjIsbjIzLG4zMSxuMzIsbjMzKXtjb25zdCB0ZT10aGlzLmVsZW1lbnRzO3RlWzBdPW4xMTt0ZVsxXT1uMjE7dGVbMl09bjMxO3RlWzNdPW4xMjt0ZVs0XT1uMjI7dGVbNV09bjMyO3RlWzZdPW4xMzt0ZVs3XT1uMjM7dGVbOF09bjMzO3JldHVybiB0aGlzO31pZGVudGl0eSgpe3RoaXMuc2V0KDEsMCwwLDAsMSwwLDAsMCwxKTtyZXR1cm4gdGhpczt9Y29weShtKXtjb25zdCB0ZT10aGlzLmVsZW1lbnRzO2NvbnN0IG1lPW0uZWxlbWVudHM7dGVbMF09bWVbMF07dGVbMV09bWVbMV07dGVbMl09bWVbMl07dGVbM109bWVbM107dGVbNF09bWVbNF07dGVbNV09bWVbNV07dGVbNl09bWVbNl07dGVbN109bWVbN107dGVbOF09bWVbOF07cmV0dXJuIHRoaXM7fWV4dHJhY3RCYXNpcyh4QXhpcyx5QXhpcyx6QXhpcyl7eEF4aXMuc2V0RnJvbU1hdHJpeDNDb2x1bW4odGhpcywwKTt5QXhpcy5zZXRGcm9tTWF0cml4M0NvbHVtbih0aGlzLDEpO3pBeGlzLnNldEZyb21NYXRyaXgzQ29sdW1uKHRoaXMsMik7cmV0dXJuIHRoaXM7fXNldEZyb21NYXRyaXg0KG0pe2NvbnN0IG1lPW0uZWxlbWVudHM7dGhpcy5zZXQobWVbMF0sbWVbNF0sbWVbOF0sbWVbMV0sbWVbNV0sbWVbOV0sbWVbMl0sbWVbNl0sbWVbMTBdKTtyZXR1cm4gdGhpczt9bXVsdGlwbHkobSl7cmV0dXJuIHRoaXMubXVsdGlwbHlNYXRyaWNlcyh0aGlzLG0pO31wcmVtdWx0aXBseShtKXtyZXR1cm4gdGhpcy5tdWx0aXBseU1hdHJpY2VzKG0sdGhpcyk7fW11bHRpcGx5TWF0cmljZXMoYSxiKXtjb25zdCBhZT1hLmVsZW1lbnRzO2NvbnN0IGJlPWIuZWxlbWVudHM7Y29uc3QgdGU9dGhpcy5lbGVtZW50cztjb25zdCBhMTE9YWVbMF0sYTEyPWFlWzNdLGExMz1hZVs2XTtjb25zdCBhMjE9YWVbMV0sYTIyPWFlWzRdLGEyMz1hZVs3XTtjb25zdCBhMzE9YWVbMl0sYTMyPWFlWzVdLGEzMz1hZVs4XTtjb25zdCBiMTE9YmVbMF0sYjEyPWJlWzNdLGIxMz1iZVs2XTtjb25zdCBiMjE9YmVbMV0sYjIyPWJlWzRdLGIyMz1iZVs3XTtjb25zdCBiMzE9YmVbMl0sYjMyPWJlWzVdLGIzMz1iZVs4XTt0ZVswXT1hMTEqYjExK2ExMipiMjErYTEzKmIzMTt0ZVszXT1hMTEqYjEyK2ExMipiMjIrYTEzKmIzMjt0ZVs2XT1hMTEqYjEzK2ExMipiMjMrYTEzKmIzMzt0ZVsxXT1hMjEqYjExK2EyMipiMjErYTIzKmIzMTt0ZVs0XT1hMjEqYjEyK2EyMipiMjIrYTIzKmIzMjt0ZVs3XT1hMjEqYjEzK2EyMipiMjMrYTIzKmIzMzt0ZVsyXT1hMzEqYjExK2EzMipiMjErYTMzKmIzMTt0ZVs1XT1hMzEqYjEyK2EzMipiMjIrYTMzKmIzMjt0ZVs4XT1hMzEqYjEzK2EzMipiMjMrYTMzKmIzMztyZXR1cm4gdGhpczt9bXVsdGlwbHlTY2FsYXIocyl7Y29uc3QgdGU9dGhpcy5lbGVtZW50czt0ZVswXSo9czt0ZVszXSo9czt0ZVs2XSo9czt0ZVsxXSo9czt0ZVs0XSo9czt0ZVs3XSo9czt0ZVsyXSo9czt0ZVs1XSo9czt0ZVs4XSo9cztyZXR1cm4gdGhpczt9ZGV0ZXJtaW5hbnQoKXtjb25zdCB0ZT10aGlzLmVsZW1lbnRzO2NvbnN0IGE9dGVbMF0sYj10ZVsxXSxjPXRlWzJdLGQ9dGVbM10sZT10ZVs0XSxmPXRlWzVdLGc9dGVbNl0saD10ZVs3XSxpPXRlWzhdO3JldHVybiBhKmUqaS1hKmYqaC1iKmQqaStiKmYqZytjKmQqaC1jKmUqZzt9aW52ZXJ0KCl7Y29uc3QgdGU9dGhpcy5lbGVtZW50cyxuMTE9dGVbMF0sbjIxPXRlWzFdLG4zMT10ZVsyXSxuMTI9dGVbM10sbjIyPXRlWzRdLG4zMj10ZVs1XSxuMTM9dGVbNl0sbjIzPXRlWzddLG4zMz10ZVs4XSx0MTE9bjMzKm4yMi1uMzIqbjIzLHQxMj1uMzIqbjEzLW4zMypuMTIsdDEzPW4yMypuMTItbjIyKm4xMyxkZXQ9bjExKnQxMStuMjEqdDEyK24zMSp0MTM7aWYoZGV0PT09MClyZXR1cm4gdGhpcy5zZXQoMCwwLDAsMCwwLDAsMCwwLDApO2NvbnN0IGRldEludj0xL2RldDt0ZVswXT10MTEqZGV0SW52O3RlWzFdPShuMzEqbjIzLW4zMypuMjEpKmRldEludjt0ZVsyXT0objMyKm4yMS1uMzEqbjIyKSpkZXRJbnY7dGVbM109dDEyKmRldEludjt0ZVs0XT0objMzKm4xMS1uMzEqbjEzKSpkZXRJbnY7dGVbNV09KG4zMSpuMTItbjMyKm4xMSkqZGV0SW52O3RlWzZdPXQxMypkZXRJbnY7dGVbN109KG4yMSpuMTMtbjIzKm4xMSkqZGV0SW52O3RlWzhdPShuMjIqbjExLW4yMSpuMTIpKmRldEludjtyZXR1cm4gdGhpczt9dHJhbnNwb3NlKCl7bGV0IHRtcDtjb25zdCBtPXRoaXMuZWxlbWVudHM7dG1wPW1bMV07bVsxXT1tWzNdO21bM109dG1wO3RtcD1tWzJdO21bMl09bVs2XTttWzZdPXRtcDt0bXA9bVs1XTttWzVdPW1bN107bVs3XT10bXA7cmV0dXJuIHRoaXM7fWdldE5vcm1hbE1hdHJpeChtYXRyaXg0KXtyZXR1cm4gdGhpcy5zZXRGcm9tTWF0cml4NChtYXRyaXg0KS5pbnZlcnQoKS50cmFuc3Bvc2UoKTt9dHJhbnNwb3NlSW50b0FycmF5KHIpe2NvbnN0IG09dGhpcy5lbGVtZW50cztyWzBdPW1bMF07clsxXT1tWzNdO3JbMl09bVs2XTtyWzNdPW1bMV07cls0XT1tWzRdO3JbNV09bVs3XTtyWzZdPW1bMl07cls3XT1tWzVdO3JbOF09bVs4XTtyZXR1cm4gdGhpczt9c2V0VXZUcmFuc2Zvcm0odHgsdHksc3gsc3kscm90YXRpb24sY3gsY3kpe2NvbnN0IGM9TWF0aC5jb3Mocm90YXRpb24pO2NvbnN0IHM9TWF0aC5zaW4ocm90YXRpb24pO3RoaXMuc2V0KHN4KmMsc3gqcywtc3gqKGMqY3grcypjeSkrY3grdHgsLXN5KnMsc3kqYywtc3kqKC1zKmN4K2MqY3kpK2N5K3R5LDAsMCwxKTtyZXR1cm4gdGhpczt9c2NhbGUoc3gsc3kpe2NvbnN0IHRlPXRoaXMuZWxlbWVudHM7dGVbMF0qPXN4O3RlWzNdKj1zeDt0ZVs2XSo9c3g7dGVbMV0qPXN5O3RlWzRdKj1zeTt0ZVs3XSo9c3k7cmV0dXJuIHRoaXM7fXJvdGF0ZSh0aGV0YSl7Y29uc3QgYz1NYXRoLmNvcyh0aGV0YSk7Y29uc3Qgcz1NYXRoLnNpbih0aGV0YSk7Y29uc3QgdGU9dGhpcy5lbGVtZW50cztjb25zdCBhMTE9dGVbMF0sYTEyPXRlWzNdLGExMz10ZVs2XTtjb25zdCBhMjE9dGVbMV0sYTIyPXRlWzRdLGEyMz10ZVs3XTt0ZVswXT1jKmExMStzKmEyMTt0ZVszXT1jKmExMitzKmEyMjt0ZVs2XT1jKmExMytzKmEyMzt0ZVsxXT0tcyphMTErYyphMjE7dGVbNF09LXMqYTEyK2MqYTIyO3RlWzddPS1zKmExMytjKmEyMztyZXR1cm4gdGhpczt9dHJhbnNsYXRlKHR4LHR5KXtjb25zdCB0ZT10aGlzLmVsZW1lbnRzO3RlWzBdKz10eCp0ZVsyXTt0ZVszXSs9dHgqdGVbNV07dGVbNl0rPXR4KnRlWzhdO3RlWzFdKz10eSp0ZVsyXTt0ZVs0XSs9dHkqdGVbNV07dGVbN10rPXR5KnRlWzhdO3JldHVybiB0aGlzO31lcXVhbHMobWF0cml4KXtjb25zdCB0ZT10aGlzLmVsZW1lbnRzO2NvbnN0IG1lPW1hdHJpeC5lbGVtZW50cztmb3IobGV0IGk9MDtpPDk7aSsrKXtpZih0ZVtpXSE9PW1lW2ldKXJldHVybiBmYWxzZTt9cmV0dXJuIHRydWU7fWZyb21BcnJheShhcnJheSxvZmZzZXQpe2lmKG9mZnNldD09PXZvaWQgMCl7b2Zmc2V0PTA7fWZvcihsZXQgaT0wO2k8OTtpKyspe3RoaXMuZWxlbWVudHNbaV09YXJyYXlbaStvZmZzZXRdO31yZXR1cm4gdGhpczt9dG9BcnJheShhcnJheSxvZmZzZXQpe2lmKGFycmF5PT09dm9pZCAwKXthcnJheT1bXTt9aWYob2Zmc2V0PT09dm9pZCAwKXtvZmZzZXQ9MDt9Y29uc3QgdGU9dGhpcy5lbGVtZW50czthcnJheVtvZmZzZXRdPXRlWzBdO2FycmF5W29mZnNldCsxXT10ZVsxXTthcnJheVtvZmZzZXQrMl09dGVbMl07YXJyYXlbb2Zmc2V0KzNdPXRlWzNdO2FycmF5W29mZnNldCs0XT10ZVs0XTthcnJheVtvZmZzZXQrNV09dGVbNV07YXJyYXlbb2Zmc2V0KzZdPXRlWzZdO2FycmF5W29mZnNldCs3XT10ZVs3XTthcnJheVtvZmZzZXQrOF09dGVbOF07cmV0dXJuIGFycmF5O31jbG9uZSgpe3JldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3RvcigpLmZyb21BcnJheSh0aGlzLmVsZW1lbnRzKTt9fU1hdHJpeDMucHJvdG90eXBlLmlzTWF0cml4Mz10cnVlO2Z1bmN0aW9uIGFycmF5TWF4KGFycmF5KXtpZihhcnJheS5sZW5ndGg9PT0wKXJldHVybiAtSW5maW5pdHk7bGV0IG1heD1hcnJheVswXTtmb3IobGV0IGk9MSxsPWFycmF5Lmxlbmd0aDtpPGw7KytpKXtpZihhcnJheVtpXT5tYXgpbWF4PWFycmF5W2ldO31yZXR1cm4gbWF4O31mdW5jdGlvbiBjcmVhdGVFbGVtZW50TlMobmFtZSl7cmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCcsbmFtZSk7fS8qKgoJICAqIGN5cmI1MyBoYXNoIGZvciBzdHJpbmcgZnJvbTogaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzUyMTcxNDgwCgkgICoKCSAgKiBQdWJsaWMgRG9tYWluLCBAYnJ5YyAtIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vdXNlcnMvODE1NjgwL2JyeWMKCSAgKgoJICAqIEl0IGlzIHJvdWdobHkgc2ltaWxhciB0byB0aGUgd2VsbC1rbm93biBNdXJtdXJIYXNoL3h4SGFzaCBhbGdvcml0aG1zLiBJdCB1c2VzIGEgY29tYmluYXRpb24KCSAgKiBvZiBtdWx0aXBsaWNhdGlvbiBhbmQgWG9yc2hpZnQgdG8gZ2VuZXJhdGUgdGhlIGhhc2gsIGJ1dCBub3QgYXMgdGhvcm91Z2guIEFzIGEgcmVzdWx0IGl0J3MKCSAgKiBmYXN0ZXIgdGhhbiBlaXRoZXIgd291bGQgYmUgaW4gSmF2YVNjcmlwdCBhbmQgc2lnbmlmaWNhbnRseSBzaW1wbGVyIHRvIGltcGxlbWVudC4gS2VlcCBpbgoJICAqIG1pbmQgdGhpcyBpcyBub3QgYSBzZWN1cmUgYWxnb3JpdGhtLCBpZiBwcml2YWN5L3NlY3VyaXR5IGlzIGEgY29uY2VybiwgdGhpcyBpcyBub3QgZm9yIHlvdS4KCSAgKgoJICAqIEBwYXJhbSB7c3RyaW5nfSBzdHIKCSAgKiBAcGFyYW0ge251bWJlcn0gc2VlZCwgZGVmYXVsdCAwCgkgICogQHJldHVybnMgbnVtYmVyCgkgICovZnVuY3Rpb24gaGFzaFN0cmluZyhzdHIsc2VlZCl7aWYoc2VlZD09PXZvaWQgMCl7c2VlZD0wO31sZXQgaDE9MHhkZWFkYmVlZl5zZWVkLGgyPTB4NDFjNmNlNTdec2VlZDtmb3IobGV0IGk9MCxjaDtpPHN0ci5sZW5ndGg7aSsrKXtjaD1zdHIuY2hhckNvZGVBdChpKTtoMT1NYXRoLmltdWwoaDFeY2gsMjY1NDQzNTc2MSk7aDI9TWF0aC5pbXVsKGgyXmNoLDE1OTczMzQ2NzcpO31oMT1NYXRoLmltdWwoaDFeaDE+Pj4xNiwyMjQ2ODIyNTA3KV5NYXRoLmltdWwoaDJeaDI+Pj4xMywzMjY2NDg5OTA5KTtoMj1NYXRoLmltdWwoaDJeaDI+Pj4xNiwyMjQ2ODIyNTA3KV5NYXRoLmltdWwoaDFeaDE+Pj4xMywzMjY2NDg5OTA5KTtyZXR1cm4gNDI5NDk2NzI5NiooMjA5NzE1MSZoMikrKGgxPj4+MCk7fWxldCBfY2FudmFzO2NsYXNzIEltYWdlVXRpbHN7c3RhdGljIGdldERhdGFVUkwoaW1hZ2Upe2lmKC9eZGF0YTovaS50ZXN0KGltYWdlLnNyYykpe3JldHVybiBpbWFnZS5zcmM7fWlmKHR5cGVvZiBIVE1MQ2FudmFzRWxlbWVudD09J3VuZGVmaW5lZCcpe3JldHVybiBpbWFnZS5zcmM7fWxldCBjYW52YXM7aWYoaW1hZ2UgaW5zdGFuY2VvZiBIVE1MQ2FudmFzRWxlbWVudCl7Y2FudmFzPWltYWdlO31lbHNlIHtpZihfY2FudmFzPT09dW5kZWZpbmVkKV9jYW52YXM9Y3JlYXRlRWxlbWVudE5TKCdjYW52YXMnKTtfY2FudmFzLndpZHRoPWltYWdlLndpZHRoO19jYW52YXMuaGVpZ2h0PWltYWdlLmhlaWdodDtjb25zdCBjb250ZXh0PV9jYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtpZihpbWFnZSBpbnN0YW5jZW9mIEltYWdlRGF0YSl7Y29udGV4dC5wdXRJbWFnZURhdGEoaW1hZ2UsMCwwKTt9ZWxzZSB7Y29udGV4dC5kcmF3SW1hZ2UoaW1hZ2UsMCwwLGltYWdlLndpZHRoLGltYWdlLmhlaWdodCk7fWNhbnZhcz1fY2FudmFzO31pZihjYW52YXMud2lkdGg+MjA0OHx8Y2FudmFzLmhlaWdodD4yMDQ4KXtjb25zb2xlLndhcm4oJ1RIUkVFLkltYWdlVXRpbHMuZ2V0RGF0YVVSTDogSW1hZ2UgY29udmVydGVkIHRvIGpwZyBmb3IgcGVyZm9ybWFuY2UgcmVhc29ucycsaW1hZ2UpO3JldHVybiBjYW52YXMudG9EYXRhVVJMKCdpbWFnZS9qcGVnJywwLjYpO31lbHNlIHtyZXR1cm4gY2FudmFzLnRvRGF0YVVSTCgnaW1hZ2UvcG5nJyk7fX19bGV0IHRleHR1cmVJZD0wO2NsYXNzIFRleHR1cmUgZXh0ZW5kcyBFdmVudERpc3BhdGNoZXJ7Y29uc3RydWN0b3IoaW1hZ2UsbWFwcGluZyx3cmFwUyx3cmFwVCxtYWdGaWx0ZXIsbWluRmlsdGVyLGZvcm1hdCx0eXBlLGFuaXNvdHJvcHksZW5jb2Rpbmcpe2lmKGltYWdlPT09dm9pZCAwKXtpbWFnZT1UZXh0dXJlLkRFRkFVTFRfSU1BR0U7fWlmKG1hcHBpbmc9PT12b2lkIDApe21hcHBpbmc9VGV4dHVyZS5ERUZBVUxUX01BUFBJTkc7fWlmKHdyYXBTPT09dm9pZCAwKXt3cmFwUz1DbGFtcFRvRWRnZVdyYXBwaW5nO31pZih3cmFwVD09PXZvaWQgMCl7d3JhcFQ9Q2xhbXBUb0VkZ2VXcmFwcGluZzt9aWYobWFnRmlsdGVyPT09dm9pZCAwKXttYWdGaWx0ZXI9TGluZWFyRmlsdGVyO31pZihtaW5GaWx0ZXI9PT12b2lkIDApe21pbkZpbHRlcj1MaW5lYXJNaXBtYXBMaW5lYXJGaWx0ZXI7fWlmKGZvcm1hdD09PXZvaWQgMCl7Zm9ybWF0PVJHQkFGb3JtYXQ7fWlmKHR5cGU9PT12b2lkIDApe3R5cGU9VW5zaWduZWRCeXRlVHlwZTt9aWYoYW5pc290cm9weT09PXZvaWQgMCl7YW5pc290cm9weT0xO31pZihlbmNvZGluZz09PXZvaWQgMCl7ZW5jb2Rpbmc9TGluZWFyRW5jb2Rpbmc7fXN1cGVyKCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsJ2lkJyx7dmFsdWU6dGV4dHVyZUlkKyt9KTt0aGlzLnV1aWQ9Z2VuZXJhdGVVVUlEKCk7dGhpcy5uYW1lPScnO3RoaXMuaW1hZ2U9aW1hZ2U7dGhpcy5taXBtYXBzPVtdO3RoaXMubWFwcGluZz1tYXBwaW5nO3RoaXMud3JhcFM9d3JhcFM7dGhpcy53cmFwVD13cmFwVDt0aGlzLm1hZ0ZpbHRlcj1tYWdGaWx0ZXI7dGhpcy5taW5GaWx0ZXI9bWluRmlsdGVyO3RoaXMuYW5pc290cm9weT1hbmlzb3Ryb3B5O3RoaXMuZm9ybWF0PWZvcm1hdDt0aGlzLmludGVybmFsRm9ybWF0PW51bGw7dGhpcy50eXBlPXR5cGU7dGhpcy5vZmZzZXQ9bmV3IFZlY3RvcjIoMCwwKTt0aGlzLnJlcGVhdD1uZXcgVmVjdG9yMigxLDEpO3RoaXMuY2VudGVyPW5ldyBWZWN0b3IyKDAsMCk7dGhpcy5yb3RhdGlvbj0wO3RoaXMubWF0cml4QXV0b1VwZGF0ZT10cnVlO3RoaXMubWF0cml4PW5ldyBNYXRyaXgzKCk7dGhpcy5nZW5lcmF0ZU1pcG1hcHM9dHJ1ZTt0aGlzLnByZW11bHRpcGx5QWxwaGE9ZmFsc2U7dGhpcy5mbGlwWT10cnVlO3RoaXMudW5wYWNrQWxpZ25tZW50PTQ7Ly8gdmFsaWQgdmFsdWVzOiAxLCAyLCA0LCA4IChzZWUgaHR0cDovL3d3dy5raHJvbm9zLm9yZy9vcGVuZ2xlcy9zZGsvZG9jcy9tYW4veGh0bWwvZ2xQaXhlbFN0b3JlaS54bWwpCgkvLyBWYWx1ZXMgb2YgZW5jb2RpbmcgIT09IFRIUkVFLkxpbmVhckVuY29kaW5nIG9ubHkgc3VwcG9ydGVkIG9uIG1hcCwgZW52TWFwIGFuZCBlbWlzc2l2ZU1hcC4KCS8vCgkvLyBBbHNvIGNoYW5naW5nIHRoZSBlbmNvZGluZyBhZnRlciBhbHJlYWR5IHVzZWQgYnkgYSBNYXRlcmlhbCB3aWxsIG5vdCBhdXRvbWF0aWNhbGx5IG1ha2UgdGhlIE1hdGVyaWFsCgkvLyB1cGRhdGUuIFlvdSBuZWVkIHRvIGV4cGxpY2l0bHkgY2FsbCBNYXRlcmlhbC5uZWVkc1VwZGF0ZSB0byB0cmlnZ2VyIGl0IHRvIHJlY29tcGlsZS4KCXRoaXMuZW5jb2Rpbmc9ZW5jb2Rpbmc7dGhpcy51c2VyRGF0YT17fTt0aGlzLnZlcnNpb249MDt0aGlzLm9uVXBkYXRlPW51bGw7dGhpcy5pc1JlbmRlclRhcmdldFRleHR1cmU9ZmFsc2U7fXVwZGF0ZU1hdHJpeCgpe3RoaXMubWF0cml4LnNldFV2VHJhbnNmb3JtKHRoaXMub2Zmc2V0LngsdGhpcy5vZmZzZXQueSx0aGlzLnJlcGVhdC54LHRoaXMucmVwZWF0LnksdGhpcy5yb3RhdGlvbix0aGlzLmNlbnRlci54LHRoaXMuY2VudGVyLnkpO31jbG9uZSgpe3JldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3RvcigpLmNvcHkodGhpcyk7fWNvcHkoc291cmNlKXt0aGlzLm5hbWU9c291cmNlLm5hbWU7dGhpcy5pbWFnZT1zb3VyY2UuaW1hZ2U7dGhpcy5taXBtYXBzPXNvdXJjZS5taXBtYXBzLnNsaWNlKDApO3RoaXMubWFwcGluZz1zb3VyY2UubWFwcGluZzt0aGlzLndyYXBTPXNvdXJjZS53cmFwUzt0aGlzLndyYXBUPXNvdXJjZS53cmFwVDt0aGlzLm1hZ0ZpbHRlcj1zb3VyY2UubWFnRmlsdGVyO3RoaXMubWluRmlsdGVyPXNvdXJjZS5taW5GaWx0ZXI7dGhpcy5hbmlzb3Ryb3B5PXNvdXJjZS5hbmlzb3Ryb3B5O3RoaXMuZm9ybWF0PXNvdXJjZS5mb3JtYXQ7dGhpcy5pbnRlcm5hbEZvcm1hdD1zb3VyY2UuaW50ZXJuYWxGb3JtYXQ7dGhpcy50eXBlPXNvdXJjZS50eXBlO3RoaXMub2Zmc2V0LmNvcHkoc291cmNlLm9mZnNldCk7dGhpcy5yZXBlYXQuY29weShzb3VyY2UucmVwZWF0KTt0aGlzLmNlbnRlci5jb3B5KHNvdXJjZS5jZW50ZXIpO3RoaXMucm90YXRpb249c291cmNlLnJvdGF0aW9uO3RoaXMubWF0cml4QXV0b1VwZGF0ZT1zb3VyY2UubWF0cml4QXV0b1VwZGF0ZTt0aGlzLm1hdHJpeC5jb3B5KHNvdXJjZS5tYXRyaXgpO3RoaXMuZ2VuZXJhdGVNaXBtYXBzPXNvdXJjZS5nZW5lcmF0ZU1pcG1hcHM7dGhpcy5wcmVtdWx0aXBseUFscGhhPXNvdXJjZS5wcmVtdWx0aXBseUFscGhhO3RoaXMuZmxpcFk9c291cmNlLmZsaXBZO3RoaXMudW5wYWNrQWxpZ25tZW50PXNvdXJjZS51bnBhY2tBbGlnbm1lbnQ7dGhpcy5lbmNvZGluZz1zb3VyY2UuZW5jb2Rpbmc7dGhpcy51c2VyRGF0YT1KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHNvdXJjZS51c2VyRGF0YSkpO3JldHVybiB0aGlzO310b0pTT04obWV0YSl7Y29uc3QgaXNSb290T2JqZWN0PW1ldGE9PT11bmRlZmluZWR8fHR5cGVvZiBtZXRhPT09J3N0cmluZyc7aWYoIWlzUm9vdE9iamVjdCYmbWV0YS50ZXh0dXJlc1t0aGlzLnV1aWRdIT09dW5kZWZpbmVkKXtyZXR1cm4gbWV0YS50ZXh0dXJlc1t0aGlzLnV1aWRdO31jb25zdCBvdXRwdXQ9e21ldGFkYXRhOnt2ZXJzaW9uOjQuNSx0eXBlOidUZXh0dXJlJyxnZW5lcmF0b3I6J1RleHR1cmUudG9KU09OJ30sdXVpZDp0aGlzLnV1aWQsbmFtZTp0aGlzLm5hbWUsbWFwcGluZzp0aGlzLm1hcHBpbmcscmVwZWF0Olt0aGlzLnJlcGVhdC54LHRoaXMucmVwZWF0LnldLG9mZnNldDpbdGhpcy5vZmZzZXQueCx0aGlzLm9mZnNldC55XSxjZW50ZXI6W3RoaXMuY2VudGVyLngsdGhpcy5jZW50ZXIueV0scm90YXRpb246dGhpcy5yb3RhdGlvbix3cmFwOlt0aGlzLndyYXBTLHRoaXMud3JhcFRdLGZvcm1hdDp0aGlzLmZvcm1hdCx0eXBlOnRoaXMudHlwZSxlbmNvZGluZzp0aGlzLmVuY29kaW5nLG1pbkZpbHRlcjp0aGlzLm1pbkZpbHRlcixtYWdGaWx0ZXI6dGhpcy5tYWdGaWx0ZXIsYW5pc290cm9weTp0aGlzLmFuaXNvdHJvcHksZmxpcFk6dGhpcy5mbGlwWSxwcmVtdWx0aXBseUFscGhhOnRoaXMucHJlbXVsdGlwbHlBbHBoYSx1bnBhY2tBbGlnbm1lbnQ6dGhpcy51bnBhY2tBbGlnbm1lbnR9O2lmKHRoaXMuaW1hZ2UhPT11bmRlZmluZWQpey8vIFRPRE86IE1vdmUgdG8gVEhSRUUuSW1hZ2UKCWNvbnN0IGltYWdlPXRoaXMuaW1hZ2U7aWYoaW1hZ2UudXVpZD09PXVuZGVmaW5lZCl7aW1hZ2UudXVpZD1nZW5lcmF0ZVVVSUQoKTsvLyBVR0gKCX1pZighaXNSb290T2JqZWN0JiZtZXRhLmltYWdlc1tpbWFnZS51dWlkXT09PXVuZGVmaW5lZCl7bGV0IHVybDtpZihBcnJheS5pc0FycmF5KGltYWdlKSl7Ly8gcHJvY2VzcyBhcnJheSBvZiBpbWFnZXMgZS5nLiBDdWJlVGV4dHVyZQoJdXJsPVtdO2ZvcihsZXQgaT0wLGw9aW1hZ2UubGVuZ3RoO2k8bDtpKyspey8vIGNoZWNrIGN1YmUgdGV4dHVyZSB3aXRoIGRhdGEgdGV4dHVyZXMKCWlmKGltYWdlW2ldLmlzRGF0YVRleHR1cmUpe3VybC5wdXNoKHNlcmlhbGl6ZUltYWdlKGltYWdlW2ldLmltYWdlKSk7fWVsc2Uge3VybC5wdXNoKHNlcmlhbGl6ZUltYWdlKGltYWdlW2ldKSk7fX19ZWxzZSB7Ly8gcHJvY2VzcyBzaW5nbGUgaW1hZ2UKCXVybD1zZXJpYWxpemVJbWFnZShpbWFnZSk7fW1ldGEuaW1hZ2VzW2ltYWdlLnV1aWRdPXt1dWlkOmltYWdlLnV1aWQsdXJsOnVybH07fW91dHB1dC5pbWFnZT1pbWFnZS51dWlkO31pZihKU09OLnN0cmluZ2lmeSh0aGlzLnVzZXJEYXRhKSE9PSd7fScpb3V0cHV0LnVzZXJEYXRhPXRoaXMudXNlckRhdGE7aWYoIWlzUm9vdE9iamVjdCl7bWV0YS50ZXh0dXJlc1t0aGlzLnV1aWRdPW91dHB1dDt9cmV0dXJuIG91dHB1dDt9ZGlzcG9zZSgpe3RoaXMuZGlzcGF0Y2hFdmVudCh7dHlwZTonZGlzcG9zZSd9KTt9dHJhbnNmb3JtVXYodXYpe2lmKHRoaXMubWFwcGluZyE9PVVWTWFwcGluZylyZXR1cm4gdXY7dXYuYXBwbHlNYXRyaXgzKHRoaXMubWF0cml4KTtpZih1di54PDB8fHV2Lng+MSl7c3dpdGNoKHRoaXMud3JhcFMpe2Nhc2UgUmVwZWF0V3JhcHBpbmc6dXYueD11di54LU1hdGguZmxvb3IodXYueCk7YnJlYWs7Y2FzZSBDbGFtcFRvRWRnZVdyYXBwaW5nOnV2Lng9dXYueDwwPzA6MTticmVhaztjYXNlIE1pcnJvcmVkUmVwZWF0V3JhcHBpbmc6aWYoTWF0aC5hYnMoTWF0aC5mbG9vcih1di54KSUyKT09PTEpe3V2Lng9TWF0aC5jZWlsKHV2LngpLXV2Lng7fWVsc2Uge3V2Lng9dXYueC1NYXRoLmZsb29yKHV2LngpO31icmVhazt9fWlmKHV2Lnk8MHx8dXYueT4xKXtzd2l0Y2godGhpcy53cmFwVCl7Y2FzZSBSZXBlYXRXcmFwcGluZzp1di55PXV2LnktTWF0aC5mbG9vcih1di55KTticmVhaztjYXNlIENsYW1wVG9FZGdlV3JhcHBpbmc6dXYueT11di55PDA/MDoxO2JyZWFrO2Nhc2UgTWlycm9yZWRSZXBlYXRXcmFwcGluZzppZihNYXRoLmFicyhNYXRoLmZsb29yKHV2LnkpJTIpPT09MSl7dXYueT1NYXRoLmNlaWwodXYueSktdXYueTt9ZWxzZSB7dXYueT11di55LU1hdGguZmxvb3IodXYueSk7fWJyZWFrO319aWYodGhpcy5mbGlwWSl7dXYueT0xLXV2Lnk7fXJldHVybiB1djt9c2V0IG5lZWRzVXBkYXRlKHZhbHVlKXtpZih2YWx1ZT09PXRydWUpdGhpcy52ZXJzaW9uKys7fX1UZXh0dXJlLkRFRkFVTFRfSU1BR0U9dW5kZWZpbmVkO1RleHR1cmUuREVGQVVMVF9NQVBQSU5HPVVWTWFwcGluZztUZXh0dXJlLnByb3RvdHlwZS5pc1RleHR1cmU9dHJ1ZTtmdW5jdGlvbiBzZXJpYWxpemVJbWFnZShpbWFnZSl7aWYodHlwZW9mIEhUTUxJbWFnZUVsZW1lbnQhPT0ndW5kZWZpbmVkJyYmaW1hZ2UgaW5zdGFuY2VvZiBIVE1MSW1hZ2VFbGVtZW50fHx0eXBlb2YgSFRNTENhbnZhc0VsZW1lbnQhPT0ndW5kZWZpbmVkJyYmaW1hZ2UgaW5zdGFuY2VvZiBIVE1MQ2FudmFzRWxlbWVudHx8dHlwZW9mIEltYWdlQml0bWFwIT09J3VuZGVmaW5lZCcmJmltYWdlIGluc3RhbmNlb2YgSW1hZ2VCaXRtYXApey8vIGRlZmF1bHQgaW1hZ2VzCglyZXR1cm4gSW1hZ2VVdGlscy5nZXREYXRhVVJMKGltYWdlKTt9ZWxzZSB7aWYoaW1hZ2UuZGF0YSl7Ly8gaW1hZ2VzIG9mIERhdGFUZXh0dXJlCglyZXR1cm4ge2RhdGE6QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoaW1hZ2UuZGF0YSksd2lkdGg6aW1hZ2Uud2lkdGgsaGVpZ2h0OmltYWdlLmhlaWdodCx0eXBlOmltYWdlLmRhdGEuY29uc3RydWN0b3IubmFtZX07fWVsc2Uge2NvbnNvbGUud2FybignVEhSRUUuVGV4dHVyZTogVW5hYmxlIHRvIHNlcmlhbGl6ZSBUZXh0dXJlLicpO3JldHVybiB7fTt9fX1jbGFzcyBWZWN0b3I0e2NvbnN0cnVjdG9yKHgseSx6LHcpe2lmKHg9PT12b2lkIDApe3g9MDt9aWYoeT09PXZvaWQgMCl7eT0wO31pZih6PT09dm9pZCAwKXt6PTA7fWlmKHc9PT12b2lkIDApe3c9MTt9dGhpcy54PXg7dGhpcy55PXk7dGhpcy56PXo7dGhpcy53PXc7fWdldCB3aWR0aCgpe3JldHVybiB0aGlzLno7fXNldCB3aWR0aCh2YWx1ZSl7dGhpcy56PXZhbHVlO31nZXQgaGVpZ2h0KCl7cmV0dXJuIHRoaXMudzt9c2V0IGhlaWdodCh2YWx1ZSl7dGhpcy53PXZhbHVlO31zZXQoeCx5LHosdyl7dGhpcy54PXg7dGhpcy55PXk7dGhpcy56PXo7dGhpcy53PXc7cmV0dXJuIHRoaXM7fXNldFNjYWxhcihzY2FsYXIpe3RoaXMueD1zY2FsYXI7dGhpcy55PXNjYWxhcjt0aGlzLno9c2NhbGFyO3RoaXMudz1zY2FsYXI7cmV0dXJuIHRoaXM7fXNldFgoeCl7dGhpcy54PXg7cmV0dXJuIHRoaXM7fXNldFkoeSl7dGhpcy55PXk7cmV0dXJuIHRoaXM7fXNldFooeil7dGhpcy56PXo7cmV0dXJuIHRoaXM7fXNldFcodyl7dGhpcy53PXc7cmV0dXJuIHRoaXM7fXNldENvbXBvbmVudChpbmRleCx2YWx1ZSl7c3dpdGNoKGluZGV4KXtjYXNlIDA6dGhpcy54PXZhbHVlO2JyZWFrO2Nhc2UgMTp0aGlzLnk9dmFsdWU7YnJlYWs7Y2FzZSAyOnRoaXMuej12YWx1ZTticmVhaztjYXNlIDM6dGhpcy53PXZhbHVlO2JyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKCdpbmRleCBpcyBvdXQgb2YgcmFuZ2U6ICcraW5kZXgpO31yZXR1cm4gdGhpczt9Z2V0Q29tcG9uZW50KGluZGV4KXtzd2l0Y2goaW5kZXgpe2Nhc2UgMDpyZXR1cm4gdGhpcy54O2Nhc2UgMTpyZXR1cm4gdGhpcy55O2Nhc2UgMjpyZXR1cm4gdGhpcy56O2Nhc2UgMzpyZXR1cm4gdGhpcy53O2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKCdpbmRleCBpcyBvdXQgb2YgcmFuZ2U6ICcraW5kZXgpO319Y2xvbmUoKXtyZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy54LHRoaXMueSx0aGlzLnosdGhpcy53KTt9Y29weSh2KXt0aGlzLng9di54O3RoaXMueT12Lnk7dGhpcy56PXYuejt0aGlzLnc9di53IT09dW5kZWZpbmVkP3YudzoxO3JldHVybiB0aGlzO31hZGQodix3KXtpZih3IT09dW5kZWZpbmVkKXtjb25zb2xlLndhcm4oJ1RIUkVFLlZlY3RvcjQ6IC5hZGQoKSBub3cgb25seSBhY2NlcHRzIG9uZSBhcmd1bWVudC4gVXNlIC5hZGRWZWN0b3JzKCBhLCBiICkgaW5zdGVhZC4nKTtyZXR1cm4gdGhpcy5hZGRWZWN0b3JzKHYsdyk7fXRoaXMueCs9di54O3RoaXMueSs9di55O3RoaXMueis9di56O3RoaXMudys9di53O3JldHVybiB0aGlzO31hZGRTY2FsYXIocyl7dGhpcy54Kz1zO3RoaXMueSs9czt0aGlzLnorPXM7dGhpcy53Kz1zO3JldHVybiB0aGlzO31hZGRWZWN0b3JzKGEsYil7dGhpcy54PWEueCtiLng7dGhpcy55PWEueStiLnk7dGhpcy56PWEueitiLno7dGhpcy53PWEudytiLnc7cmV0dXJuIHRoaXM7fWFkZFNjYWxlZFZlY3Rvcih2LHMpe3RoaXMueCs9di54KnM7dGhpcy55Kz12Lnkqczt0aGlzLnorPXYueipzO3RoaXMudys9di53KnM7cmV0dXJuIHRoaXM7fXN1Yih2LHcpe2lmKHchPT11bmRlZmluZWQpe2NvbnNvbGUud2FybignVEhSRUUuVmVjdG9yNDogLnN1YigpIG5vdyBvbmx5IGFjY2VwdHMgb25lIGFyZ3VtZW50LiBVc2UgLnN1YlZlY3RvcnMoIGEsIGIgKSBpbnN0ZWFkLicpO3JldHVybiB0aGlzLnN1YlZlY3RvcnModix3KTt9dGhpcy54LT12Lng7dGhpcy55LT12Lnk7dGhpcy56LT12Lno7dGhpcy53LT12Lnc7cmV0dXJuIHRoaXM7fXN1YlNjYWxhcihzKXt0aGlzLngtPXM7dGhpcy55LT1zO3RoaXMuei09czt0aGlzLnctPXM7cmV0dXJuIHRoaXM7fXN1YlZlY3RvcnMoYSxiKXt0aGlzLng9YS54LWIueDt0aGlzLnk9YS55LWIueTt0aGlzLno9YS56LWIuejt0aGlzLnc9YS53LWIudztyZXR1cm4gdGhpczt9bXVsdGlwbHkodil7dGhpcy54Kj12Lng7dGhpcy55Kj12Lnk7dGhpcy56Kj12Lno7dGhpcy53Kj12Lnc7cmV0dXJuIHRoaXM7fW11bHRpcGx5U2NhbGFyKHNjYWxhcil7dGhpcy54Kj1zY2FsYXI7dGhpcy55Kj1zY2FsYXI7dGhpcy56Kj1zY2FsYXI7dGhpcy53Kj1zY2FsYXI7cmV0dXJuIHRoaXM7fWFwcGx5TWF0cml4NChtKXtjb25zdCB4PXRoaXMueCx5PXRoaXMueSx6PXRoaXMueix3PXRoaXMudztjb25zdCBlPW0uZWxlbWVudHM7dGhpcy54PWVbMF0qeCtlWzRdKnkrZVs4XSp6K2VbMTJdKnc7dGhpcy55PWVbMV0qeCtlWzVdKnkrZVs5XSp6K2VbMTNdKnc7dGhpcy56PWVbMl0qeCtlWzZdKnkrZVsxMF0qeitlWzE0XSp3O3RoaXMudz1lWzNdKngrZVs3XSp5K2VbMTFdKnorZVsxNV0qdztyZXR1cm4gdGhpczt9ZGl2aWRlU2NhbGFyKHNjYWxhcil7cmV0dXJuIHRoaXMubXVsdGlwbHlTY2FsYXIoMS9zY2FsYXIpO31zZXRBeGlzQW5nbGVGcm9tUXVhdGVybmlvbihxKXsvLyBodHRwOi8vd3d3LmV1Y2xpZGVhbnNwYWNlLmNvbS9tYXRocy9nZW9tZXRyeS9yb3RhdGlvbnMvY29udmVyc2lvbnMvcXVhdGVybmlvblRvQW5nbGUvaW5kZXguaHRtCgkvLyBxIGlzIGFzc3VtZWQgdG8gYmUgbm9ybWFsaXplZAoJdGhpcy53PTIqTWF0aC5hY29zKHEudyk7Y29uc3Qgcz1NYXRoLnNxcnQoMS1xLncqcS53KTtpZihzPDAuMDAwMSl7dGhpcy54PTE7dGhpcy55PTA7dGhpcy56PTA7fWVsc2Uge3RoaXMueD1xLngvczt0aGlzLnk9cS55L3M7dGhpcy56PXEuei9zO31yZXR1cm4gdGhpczt9c2V0QXhpc0FuZ2xlRnJvbVJvdGF0aW9uTWF0cml4KG0pey8vIGh0dHA6Ly93d3cuZXVjbGlkZWFuc3BhY2UuY29tL21hdGhzL2dlb21ldHJ5L3JvdGF0aW9ucy9jb252ZXJzaW9ucy9tYXRyaXhUb0FuZ2xlL2luZGV4Lmh0bQoJLy8gYXNzdW1lcyB0aGUgdXBwZXIgM3gzIG9mIG0gaXMgYSBwdXJlIHJvdGF0aW9uIG1hdHJpeCAoaS5lLCB1bnNjYWxlZCkKCWxldCBhbmdsZSx4LHksejsvLyB2YXJpYWJsZXMgZm9yIHJlc3VsdAoJY29uc3QgZXBzaWxvbj0wLjAxLC8vIG1hcmdpbiB0byBhbGxvdyBmb3Igcm91bmRpbmcgZXJyb3JzCgllcHNpbG9uMj0wLjEsLy8gbWFyZ2luIHRvIGRpc3Rpbmd1aXNoIGJldHdlZW4gMCBhbmQgMTgwIGRlZ3JlZXMKCXRlPW0uZWxlbWVudHMsbTExPXRlWzBdLG0xMj10ZVs0XSxtMTM9dGVbOF0sbTIxPXRlWzFdLG0yMj10ZVs1XSxtMjM9dGVbOV0sbTMxPXRlWzJdLG0zMj10ZVs2XSxtMzM9dGVbMTBdO2lmKE1hdGguYWJzKG0xMi1tMjEpPGVwc2lsb24mJk1hdGguYWJzKG0xMy1tMzEpPGVwc2lsb24mJk1hdGguYWJzKG0yMy1tMzIpPGVwc2lsb24pey8vIHNpbmd1bGFyaXR5IGZvdW5kCgkvLyBmaXJzdCBjaGVjayBmb3IgaWRlbnRpdHkgbWF0cml4IHdoaWNoIG11c3QgaGF2ZSArMSBmb3IgYWxsIHRlcm1zCgkvLyBpbiBsZWFkaW5nIGRpYWdvbmFsIGFuZCB6ZXJvIGluIG90aGVyIHRlcm1zCglpZihNYXRoLmFicyhtMTIrbTIxKTxlcHNpbG9uMiYmTWF0aC5hYnMobTEzK20zMSk8ZXBzaWxvbjImJk1hdGguYWJzKG0yMyttMzIpPGVwc2lsb24yJiZNYXRoLmFicyhtMTErbTIyK20zMy0zKTxlcHNpbG9uMil7Ly8gdGhpcyBzaW5ndWxhcml0eSBpcyBpZGVudGl0eSBtYXRyaXggc28gYW5nbGUgPSAwCgl0aGlzLnNldCgxLDAsMCwwKTtyZXR1cm4gdGhpczsvLyB6ZXJvIGFuZ2xlLCBhcmJpdHJhcnkgYXhpcwoJfS8vIG90aGVyd2lzZSB0aGlzIHNpbmd1bGFyaXR5IGlzIGFuZ2xlID0gMTgwCglhbmdsZT1NYXRoLlBJO2NvbnN0IHh4PShtMTErMSkvMjtjb25zdCB5eT0obTIyKzEpLzI7Y29uc3Qgeno9KG0zMysxKS8yO2NvbnN0IHh5PShtMTIrbTIxKS80O2NvbnN0IHh6PShtMTMrbTMxKS80O2NvbnN0IHl6PShtMjMrbTMyKS80O2lmKHh4Pnl5JiZ4eD56eil7Ly8gbTExIGlzIHRoZSBsYXJnZXN0IGRpYWdvbmFsIHRlcm0KCWlmKHh4PGVwc2lsb24pe3g9MDt5PTAuNzA3MTA2NzgxO3o9MC43MDcxMDY3ODE7fWVsc2Uge3g9TWF0aC5zcXJ0KHh4KTt5PXh5L3g7ej14ei94O319ZWxzZSBpZih5eT56eil7Ly8gbTIyIGlzIHRoZSBsYXJnZXN0IGRpYWdvbmFsIHRlcm0KCWlmKHl5PGVwc2lsb24pe3g9MC43MDcxMDY3ODE7eT0wO3o9MC43MDcxMDY3ODE7fWVsc2Uge3k9TWF0aC5zcXJ0KHl5KTt4PXh5L3k7ej15ei95O319ZWxzZSB7Ly8gbTMzIGlzIHRoZSBsYXJnZXN0IGRpYWdvbmFsIHRlcm0gc28gYmFzZSByZXN1bHQgb24gdGhpcwoJaWYoeno8ZXBzaWxvbil7eD0wLjcwNzEwNjc4MTt5PTAuNzA3MTA2NzgxO3o9MDt9ZWxzZSB7ej1NYXRoLnNxcnQoenopO3g9eHovejt5PXl6L3o7fX10aGlzLnNldCh4LHkseixhbmdsZSk7cmV0dXJuIHRoaXM7Ly8gcmV0dXJuIDE4MCBkZWcgcm90YXRpb24KCX0vLyBhcyB3ZSBoYXZlIHJlYWNoZWQgaGVyZSB0aGVyZSBhcmUgbm8gc2luZ3VsYXJpdGllcyBzbyB3ZSBjYW4gaGFuZGxlIG5vcm1hbGx5CglsZXQgcz1NYXRoLnNxcnQoKG0zMi1tMjMpKihtMzItbTIzKSsobTEzLW0zMSkqKG0xMy1tMzEpKyhtMjEtbTEyKSoobTIxLW0xMikpOy8vIHVzZWQgdG8gbm9ybWFsaXplCglpZihNYXRoLmFicyhzKTwwLjAwMSlzPTE7Ly8gcHJldmVudCBkaXZpZGUgYnkgemVybywgc2hvdWxkIG5vdCBoYXBwZW4gaWYgbWF0cml4IGlzIG9ydGhvZ29uYWwgYW5kIHNob3VsZCBiZQoJLy8gY2F1Z2h0IGJ5IHNpbmd1bGFyaXR5IHRlc3QgYWJvdmUsIGJ1dCBJJ3ZlIGxlZnQgaXQgaW4ganVzdCBpbiBjYXNlCgl0aGlzLng9KG0zMi1tMjMpL3M7dGhpcy55PShtMTMtbTMxKS9zO3RoaXMuej0obTIxLW0xMikvczt0aGlzLnc9TWF0aC5hY29zKChtMTErbTIyK20zMy0xKS8yKTtyZXR1cm4gdGhpczt9bWluKHYpe3RoaXMueD1NYXRoLm1pbih0aGlzLngsdi54KTt0aGlzLnk9TWF0aC5taW4odGhpcy55LHYueSk7dGhpcy56PU1hdGgubWluKHRoaXMueix2LnopO3RoaXMudz1NYXRoLm1pbih0aGlzLncsdi53KTtyZXR1cm4gdGhpczt9bWF4KHYpe3RoaXMueD1NYXRoLm1heCh0aGlzLngsdi54KTt0aGlzLnk9TWF0aC5tYXgodGhpcy55LHYueSk7dGhpcy56PU1hdGgubWF4KHRoaXMueix2LnopO3RoaXMudz1NYXRoLm1heCh0aGlzLncsdi53KTtyZXR1cm4gdGhpczt9Y2xhbXAobWluLG1heCl7Ly8gYXNzdW1lcyBtaW4gPCBtYXgsIGNvbXBvbmVudHdpc2UKCXRoaXMueD1NYXRoLm1heChtaW4ueCxNYXRoLm1pbihtYXgueCx0aGlzLngpKTt0aGlzLnk9TWF0aC5tYXgobWluLnksTWF0aC5taW4obWF4LnksdGhpcy55KSk7dGhpcy56PU1hdGgubWF4KG1pbi56LE1hdGgubWluKG1heC56LHRoaXMueikpO3RoaXMudz1NYXRoLm1heChtaW4udyxNYXRoLm1pbihtYXgudyx0aGlzLncpKTtyZXR1cm4gdGhpczt9Y2xhbXBTY2FsYXIobWluVmFsLG1heFZhbCl7dGhpcy54PU1hdGgubWF4KG1pblZhbCxNYXRoLm1pbihtYXhWYWwsdGhpcy54KSk7dGhpcy55PU1hdGgubWF4KG1pblZhbCxNYXRoLm1pbihtYXhWYWwsdGhpcy55KSk7dGhpcy56PU1hdGgubWF4KG1pblZhbCxNYXRoLm1pbihtYXhWYWwsdGhpcy56KSk7dGhpcy53PU1hdGgubWF4KG1pblZhbCxNYXRoLm1pbihtYXhWYWwsdGhpcy53KSk7cmV0dXJuIHRoaXM7fWNsYW1wTGVuZ3RoKG1pbixtYXgpe2NvbnN0IGxlbmd0aD10aGlzLmxlbmd0aCgpO3JldHVybiB0aGlzLmRpdmlkZVNjYWxhcihsZW5ndGh8fDEpLm11bHRpcGx5U2NhbGFyKE1hdGgubWF4KG1pbixNYXRoLm1pbihtYXgsbGVuZ3RoKSkpO31mbG9vcigpe3RoaXMueD1NYXRoLmZsb29yKHRoaXMueCk7dGhpcy55PU1hdGguZmxvb3IodGhpcy55KTt0aGlzLno9TWF0aC5mbG9vcih0aGlzLnopO3RoaXMudz1NYXRoLmZsb29yKHRoaXMudyk7cmV0dXJuIHRoaXM7fWNlaWwoKXt0aGlzLng9TWF0aC5jZWlsKHRoaXMueCk7dGhpcy55PU1hdGguY2VpbCh0aGlzLnkpO3RoaXMuej1NYXRoLmNlaWwodGhpcy56KTt0aGlzLnc9TWF0aC5jZWlsKHRoaXMudyk7cmV0dXJuIHRoaXM7fXJvdW5kKCl7dGhpcy54PU1hdGgucm91bmQodGhpcy54KTt0aGlzLnk9TWF0aC5yb3VuZCh0aGlzLnkpO3RoaXMuej1NYXRoLnJvdW5kKHRoaXMueik7dGhpcy53PU1hdGgucm91bmQodGhpcy53KTtyZXR1cm4gdGhpczt9cm91bmRUb1plcm8oKXt0aGlzLng9dGhpcy54PDA/TWF0aC5jZWlsKHRoaXMueCk6TWF0aC5mbG9vcih0aGlzLngpO3RoaXMueT10aGlzLnk8MD9NYXRoLmNlaWwodGhpcy55KTpNYXRoLmZsb29yKHRoaXMueSk7dGhpcy56PXRoaXMuejwwP01hdGguY2VpbCh0aGlzLnopOk1hdGguZmxvb3IodGhpcy56KTt0aGlzLnc9dGhpcy53PDA/TWF0aC5jZWlsKHRoaXMudyk6TWF0aC5mbG9vcih0aGlzLncpO3JldHVybiB0aGlzO31uZWdhdGUoKXt0aGlzLng9LXRoaXMueDt0aGlzLnk9LXRoaXMueTt0aGlzLno9LXRoaXMuejt0aGlzLnc9LXRoaXMudztyZXR1cm4gdGhpczt9ZG90KHYpe3JldHVybiB0aGlzLngqdi54K3RoaXMueSp2LnkrdGhpcy56KnYueit0aGlzLncqdi53O31sZW5ndGhTcSgpe3JldHVybiB0aGlzLngqdGhpcy54K3RoaXMueSp0aGlzLnkrdGhpcy56KnRoaXMueit0aGlzLncqdGhpcy53O31sZW5ndGgoKXtyZXR1cm4gTWF0aC5zcXJ0KHRoaXMueCp0aGlzLngrdGhpcy55KnRoaXMueSt0aGlzLnoqdGhpcy56K3RoaXMudyp0aGlzLncpO31tYW5oYXR0YW5MZW5ndGgoKXtyZXR1cm4gTWF0aC5hYnModGhpcy54KStNYXRoLmFicyh0aGlzLnkpK01hdGguYWJzKHRoaXMueikrTWF0aC5hYnModGhpcy53KTt9bm9ybWFsaXplKCl7cmV0dXJuIHRoaXMuZGl2aWRlU2NhbGFyKHRoaXMubGVuZ3RoKCl8fDEpO31zZXRMZW5ndGgobGVuZ3RoKXtyZXR1cm4gdGhpcy5ub3JtYWxpemUoKS5tdWx0aXBseVNjYWxhcihsZW5ndGgpO31sZXJwKHYsYWxwaGEpe3RoaXMueCs9KHYueC10aGlzLngpKmFscGhhO3RoaXMueSs9KHYueS10aGlzLnkpKmFscGhhO3RoaXMueis9KHYuei10aGlzLnopKmFscGhhO3RoaXMudys9KHYudy10aGlzLncpKmFscGhhO3JldHVybiB0aGlzO31sZXJwVmVjdG9ycyh2MSx2MixhbHBoYSl7dGhpcy54PXYxLngrKHYyLngtdjEueCkqYWxwaGE7dGhpcy55PXYxLnkrKHYyLnktdjEueSkqYWxwaGE7dGhpcy56PXYxLnorKHYyLnotdjEueikqYWxwaGE7dGhpcy53PXYxLncrKHYyLnctdjEudykqYWxwaGE7cmV0dXJuIHRoaXM7fWVxdWFscyh2KXtyZXR1cm4gdi54PT09dGhpcy54JiZ2Lnk9PT10aGlzLnkmJnYuej09PXRoaXMueiYmdi53PT09dGhpcy53O31mcm9tQXJyYXkoYXJyYXksb2Zmc2V0KXtpZihvZmZzZXQ9PT12b2lkIDApe29mZnNldD0wO310aGlzLng9YXJyYXlbb2Zmc2V0XTt0aGlzLnk9YXJyYXlbb2Zmc2V0KzFdO3RoaXMuej1hcnJheVtvZmZzZXQrMl07dGhpcy53PWFycmF5W29mZnNldCszXTtyZXR1cm4gdGhpczt9dG9BcnJheShhcnJheSxvZmZzZXQpe2lmKGFycmF5PT09dm9pZCAwKXthcnJheT1bXTt9aWYob2Zmc2V0PT09dm9pZCAwKXtvZmZzZXQ9MDt9YXJyYXlbb2Zmc2V0XT10aGlzLng7YXJyYXlbb2Zmc2V0KzFdPXRoaXMueTthcnJheVtvZmZzZXQrMl09dGhpcy56O2FycmF5W29mZnNldCszXT10aGlzLnc7cmV0dXJuIGFycmF5O31mcm9tQnVmZmVyQXR0cmlidXRlKGF0dHJpYnV0ZSxpbmRleCxvZmZzZXQpe2lmKG9mZnNldCE9PXVuZGVmaW5lZCl7Y29uc29sZS53YXJuKCdUSFJFRS5WZWN0b3I0OiBvZmZzZXQgaGFzIGJlZW4gcmVtb3ZlZCBmcm9tIC5mcm9tQnVmZmVyQXR0cmlidXRlKCkuJyk7fXRoaXMueD1hdHRyaWJ1dGUuZ2V0WChpbmRleCk7dGhpcy55PWF0dHJpYnV0ZS5nZXRZKGluZGV4KTt0aGlzLno9YXR0cmlidXRlLmdldFooaW5kZXgpO3RoaXMudz1hdHRyaWJ1dGUuZ2V0VyhpbmRleCk7cmV0dXJuIHRoaXM7fXJhbmRvbSgpe3RoaXMueD1NYXRoLnJhbmRvbSgpO3RoaXMueT1NYXRoLnJhbmRvbSgpO3RoaXMuej1NYXRoLnJhbmRvbSgpO3RoaXMudz1NYXRoLnJhbmRvbSgpO3JldHVybiB0aGlzO30qW1N5bWJvbC5pdGVyYXRvcl0oKXt5aWVsZCB0aGlzLng7eWllbGQgdGhpcy55O3lpZWxkIHRoaXMuejt5aWVsZCB0aGlzLnc7fX1WZWN0b3I0LnByb3RvdHlwZS5pc1ZlY3RvcjQ9dHJ1ZTsvKgoJIEluIG9wdGlvbnMsIHdlIGNhbiBzcGVjaWZ5OgoJICogVGV4dHVyZSBwYXJhbWV0ZXJzIGZvciBhbiBhdXRvLWdlbmVyYXRlZCB0YXJnZXQgdGV4dHVyZQoJICogZGVwdGhCdWZmZXIvc3RlbmNpbEJ1ZmZlcjogQm9vbGVhbnMgdG8gaW5kaWNhdGUgaWYgd2Ugc2hvdWxkIGdlbmVyYXRlIHRoZXNlIGJ1ZmZlcnMKCSovY2xhc3MgV2ViR0xSZW5kZXJUYXJnZXQgZXh0ZW5kcyBFdmVudERpc3BhdGNoZXJ7Y29uc3RydWN0b3Iod2lkdGgsaGVpZ2h0LG9wdGlvbnMpe2lmKG9wdGlvbnM9PT12b2lkIDApe29wdGlvbnM9e307fXN1cGVyKCk7dGhpcy53aWR0aD13aWR0aDt0aGlzLmhlaWdodD1oZWlnaHQ7dGhpcy5kZXB0aD0xO3RoaXMuc2Npc3Nvcj1uZXcgVmVjdG9yNCgwLDAsd2lkdGgsaGVpZ2h0KTt0aGlzLnNjaXNzb3JUZXN0PWZhbHNlO3RoaXMudmlld3BvcnQ9bmV3IFZlY3RvcjQoMCwwLHdpZHRoLGhlaWdodCk7dGhpcy50ZXh0dXJlPW5ldyBUZXh0dXJlKHVuZGVmaW5lZCxvcHRpb25zLm1hcHBpbmcsb3B0aW9ucy53cmFwUyxvcHRpb25zLndyYXBULG9wdGlvbnMubWFnRmlsdGVyLG9wdGlvbnMubWluRmlsdGVyLG9wdGlvbnMuZm9ybWF0LG9wdGlvbnMudHlwZSxvcHRpb25zLmFuaXNvdHJvcHksb3B0aW9ucy5lbmNvZGluZyk7dGhpcy50ZXh0dXJlLmlzUmVuZGVyVGFyZ2V0VGV4dHVyZT10cnVlO3RoaXMudGV4dHVyZS5pbWFnZT17d2lkdGg6d2lkdGgsaGVpZ2h0OmhlaWdodCxkZXB0aDoxfTt0aGlzLnRleHR1cmUuZ2VuZXJhdGVNaXBtYXBzPW9wdGlvbnMuZ2VuZXJhdGVNaXBtYXBzIT09dW5kZWZpbmVkP29wdGlvbnMuZ2VuZXJhdGVNaXBtYXBzOmZhbHNlO3RoaXMudGV4dHVyZS5pbnRlcm5hbEZvcm1hdD1vcHRpb25zLmludGVybmFsRm9ybWF0IT09dW5kZWZpbmVkP29wdGlvbnMuaW50ZXJuYWxGb3JtYXQ6bnVsbDt0aGlzLnRleHR1cmUubWluRmlsdGVyPW9wdGlvbnMubWluRmlsdGVyIT09dW5kZWZpbmVkP29wdGlvbnMubWluRmlsdGVyOkxpbmVhckZpbHRlcjt0aGlzLmRlcHRoQnVmZmVyPW9wdGlvbnMuZGVwdGhCdWZmZXIhPT11bmRlZmluZWQ/b3B0aW9ucy5kZXB0aEJ1ZmZlcjp0cnVlO3RoaXMuc3RlbmNpbEJ1ZmZlcj1vcHRpb25zLnN0ZW5jaWxCdWZmZXIhPT11bmRlZmluZWQ/b3B0aW9ucy5zdGVuY2lsQnVmZmVyOmZhbHNlO3RoaXMuZGVwdGhUZXh0dXJlPW9wdGlvbnMuZGVwdGhUZXh0dXJlIT09dW5kZWZpbmVkP29wdGlvbnMuZGVwdGhUZXh0dXJlOm51bGw7fXNldFRleHR1cmUodGV4dHVyZSl7dGV4dHVyZS5pbWFnZT17d2lkdGg6dGhpcy53aWR0aCxoZWlnaHQ6dGhpcy5oZWlnaHQsZGVwdGg6dGhpcy5kZXB0aH07dGhpcy50ZXh0dXJlPXRleHR1cmU7fXNldFNpemUod2lkdGgsaGVpZ2h0LGRlcHRoKXtpZihkZXB0aD09PXZvaWQgMCl7ZGVwdGg9MTt9aWYodGhpcy53aWR0aCE9PXdpZHRofHx0aGlzLmhlaWdodCE9PWhlaWdodHx8dGhpcy5kZXB0aCE9PWRlcHRoKXt0aGlzLndpZHRoPXdpZHRoO3RoaXMuaGVpZ2h0PWhlaWdodDt0aGlzLmRlcHRoPWRlcHRoO3RoaXMudGV4dHVyZS5pbWFnZS53aWR0aD13aWR0aDt0aGlzLnRleHR1cmUuaW1hZ2UuaGVpZ2h0PWhlaWdodDt0aGlzLnRleHR1cmUuaW1hZ2UuZGVwdGg9ZGVwdGg7dGhpcy5kaXNwb3NlKCk7fXRoaXMudmlld3BvcnQuc2V0KDAsMCx3aWR0aCxoZWlnaHQpO3RoaXMuc2Npc3Nvci5zZXQoMCwwLHdpZHRoLGhlaWdodCk7fWNsb25lKCl7cmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKCkuY29weSh0aGlzKTt9Y29weShzb3VyY2Upe3RoaXMud2lkdGg9c291cmNlLndpZHRoO3RoaXMuaGVpZ2h0PXNvdXJjZS5oZWlnaHQ7dGhpcy5kZXB0aD1zb3VyY2UuZGVwdGg7dGhpcy52aWV3cG9ydC5jb3B5KHNvdXJjZS52aWV3cG9ydCk7dGhpcy50ZXh0dXJlPXNvdXJjZS50ZXh0dXJlLmNsb25lKCk7dGhpcy50ZXh0dXJlLmltYWdlPXsuLi50aGlzLnRleHR1cmUuaW1hZ2V9Oy8vIFNlZSAjMjAzMjguCgl0aGlzLmRlcHRoQnVmZmVyPXNvdXJjZS5kZXB0aEJ1ZmZlcjt0aGlzLnN0ZW5jaWxCdWZmZXI9c291cmNlLnN0ZW5jaWxCdWZmZXI7dGhpcy5kZXB0aFRleHR1cmU9c291cmNlLmRlcHRoVGV4dHVyZTtyZXR1cm4gdGhpczt9ZGlzcG9zZSgpe3RoaXMuZGlzcGF0Y2hFdmVudCh7dHlwZTonZGlzcG9zZSd9KTt9fVdlYkdMUmVuZGVyVGFyZ2V0LnByb3RvdHlwZS5pc1dlYkdMUmVuZGVyVGFyZ2V0PXRydWU7Y2xhc3MgV2ViR0xNdWx0aXBsZVJlbmRlclRhcmdldHMgZXh0ZW5kcyBXZWJHTFJlbmRlclRhcmdldHtjb25zdHJ1Y3Rvcih3aWR0aCxoZWlnaHQsY291bnQpe3N1cGVyKHdpZHRoLGhlaWdodCk7Y29uc3QgdGV4dHVyZT10aGlzLnRleHR1cmU7dGhpcy50ZXh0dXJlPVtdO2ZvcihsZXQgaT0wO2k8Y291bnQ7aSsrKXt0aGlzLnRleHR1cmVbaV09dGV4dHVyZS5jbG9uZSgpO319c2V0U2l6ZSh3aWR0aCxoZWlnaHQsZGVwdGgpe2lmKGRlcHRoPT09dm9pZCAwKXtkZXB0aD0xO31pZih0aGlzLndpZHRoIT09d2lkdGh8fHRoaXMuaGVpZ2h0IT09aGVpZ2h0fHx0aGlzLmRlcHRoIT09ZGVwdGgpe3RoaXMud2lkdGg9d2lkdGg7dGhpcy5oZWlnaHQ9aGVpZ2h0O3RoaXMuZGVwdGg9ZGVwdGg7Zm9yKGxldCBpPTAsaWw9dGhpcy50ZXh0dXJlLmxlbmd0aDtpPGlsO2krKyl7dGhpcy50ZXh0dXJlW2ldLmltYWdlLndpZHRoPXdpZHRoO3RoaXMudGV4dHVyZVtpXS5pbWFnZS5oZWlnaHQ9aGVpZ2h0O3RoaXMudGV4dHVyZVtpXS5pbWFnZS5kZXB0aD1kZXB0aDt9dGhpcy5kaXNwb3NlKCk7fXRoaXMudmlld3BvcnQuc2V0KDAsMCx3aWR0aCxoZWlnaHQpO3RoaXMuc2Npc3Nvci5zZXQoMCwwLHdpZHRoLGhlaWdodCk7cmV0dXJuIHRoaXM7fWNvcHkoc291cmNlKXt0aGlzLmRpc3Bvc2UoKTt0aGlzLndpZHRoPXNvdXJjZS53aWR0aDt0aGlzLmhlaWdodD1zb3VyY2UuaGVpZ2h0O3RoaXMuZGVwdGg9c291cmNlLmRlcHRoO3RoaXMudmlld3BvcnQuc2V0KDAsMCx0aGlzLndpZHRoLHRoaXMuaGVpZ2h0KTt0aGlzLnNjaXNzb3Iuc2V0KDAsMCx0aGlzLndpZHRoLHRoaXMuaGVpZ2h0KTt0aGlzLmRlcHRoQnVmZmVyPXNvdXJjZS5kZXB0aEJ1ZmZlcjt0aGlzLnN0ZW5jaWxCdWZmZXI9c291cmNlLnN0ZW5jaWxCdWZmZXI7dGhpcy5kZXB0aFRleHR1cmU9c291cmNlLmRlcHRoVGV4dHVyZTt0aGlzLnRleHR1cmUubGVuZ3RoPTA7Zm9yKGxldCBpPTAsaWw9c291cmNlLnRleHR1cmUubGVuZ3RoO2k8aWw7aSsrKXt0aGlzLnRleHR1cmVbaV09c291cmNlLnRleHR1cmVbaV0uY2xvbmUoKTt9cmV0dXJuIHRoaXM7fX1XZWJHTE11bHRpcGxlUmVuZGVyVGFyZ2V0cy5wcm90b3R5cGUuaXNXZWJHTE11bHRpcGxlUmVuZGVyVGFyZ2V0cz10cnVlO2NsYXNzIFdlYkdMTXVsdGlzYW1wbGVSZW5kZXJUYXJnZXQgZXh0ZW5kcyBXZWJHTFJlbmRlclRhcmdldHtjb25zdHJ1Y3Rvcih3aWR0aCxoZWlnaHQsb3B0aW9ucyl7aWYob3B0aW9ucz09PXZvaWQgMCl7b3B0aW9ucz17fTt9c3VwZXIod2lkdGgsaGVpZ2h0LG9wdGlvbnMpO3RoaXMuc2FtcGxlcz00O3RoaXMuaWdub3JlRGVwdGhGb3JNdWx0aXNhbXBsZUNvcHk9b3B0aW9ucy5pZ25vcmVEZXB0aCE9PXVuZGVmaW5lZD9vcHRpb25zLmlnbm9yZURlcHRoOnRydWU7dGhpcy51c2VSZW5kZXJUb1RleHR1cmU9b3B0aW9ucy51c2VSZW5kZXJUb1RleHR1cmUhPT11bmRlZmluZWQ/b3B0aW9ucy51c2VSZW5kZXJUb1RleHR1cmU6ZmFsc2U7dGhpcy51c2VSZW5kZXJidWZmZXI9dGhpcy51c2VSZW5kZXJUb1RleHR1cmU9PT1mYWxzZTt9Y29weShzb3VyY2Upe3N1cGVyLmNvcHkuY2FsbCh0aGlzLHNvdXJjZSk7dGhpcy5zYW1wbGVzPXNvdXJjZS5zYW1wbGVzO3RoaXMudXNlUmVuZGVyVG9UZXh0dXJlPXNvdXJjZS51c2VSZW5kZXJUb1RleHR1cmU7dGhpcy51c2VSZW5kZXJidWZmZXI9c291cmNlLnVzZVJlbmRlcmJ1ZmZlcjtyZXR1cm4gdGhpczt9fVdlYkdMTXVsdGlzYW1wbGVSZW5kZXJUYXJnZXQucHJvdG90eXBlLmlzV2ViR0xNdWx0aXNhbXBsZVJlbmRlclRhcmdldD10cnVlO2NsYXNzIFF1YXRlcm5pb257Y29uc3RydWN0b3IoeCx5LHosdyl7aWYoeD09PXZvaWQgMCl7eD0wO31pZih5PT09dm9pZCAwKXt5PTA7fWlmKHo9PT12b2lkIDApe3o9MDt9aWYodz09PXZvaWQgMCl7dz0xO310aGlzLl94PXg7dGhpcy5feT15O3RoaXMuX3o9ejt0aGlzLl93PXc7fXN0YXRpYyBzbGVycChxYSxxYixxbSx0KXtjb25zb2xlLndhcm4oJ1RIUkVFLlF1YXRlcm5pb246IFN0YXRpYyAuc2xlcnAoKSBoYXMgYmVlbiBkZXByZWNhdGVkLiBVc2UgcW0uc2xlcnBRdWF0ZXJuaW9ucyggcWEsIHFiLCB0ICkgaW5zdGVhZC4nKTtyZXR1cm4gcW0uc2xlcnBRdWF0ZXJuaW9ucyhxYSxxYix0KTt9c3RhdGljIHNsZXJwRmxhdChkc3QsZHN0T2Zmc2V0LHNyYzAsc3JjT2Zmc2V0MCxzcmMxLHNyY09mZnNldDEsdCl7Ly8gZnV6ei1mcmVlLCBhcnJheS1iYXNlZCBRdWF0ZXJuaW9uIFNMRVJQIG9wZXJhdGlvbgoJbGV0IHgwPXNyYzBbc3JjT2Zmc2V0MCswXSx5MD1zcmMwW3NyY09mZnNldDArMV0sejA9c3JjMFtzcmNPZmZzZXQwKzJdLHcwPXNyYzBbc3JjT2Zmc2V0MCszXTtjb25zdCB4MT1zcmMxW3NyY09mZnNldDErMF0seTE9c3JjMVtzcmNPZmZzZXQxKzFdLHoxPXNyYzFbc3JjT2Zmc2V0MSsyXSx3MT1zcmMxW3NyY09mZnNldDErM107aWYodD09PTApe2RzdFtkc3RPZmZzZXQrMF09eDA7ZHN0W2RzdE9mZnNldCsxXT15MDtkc3RbZHN0T2Zmc2V0KzJdPXowO2RzdFtkc3RPZmZzZXQrM109dzA7cmV0dXJuO31pZih0PT09MSl7ZHN0W2RzdE9mZnNldCswXT14MTtkc3RbZHN0T2Zmc2V0KzFdPXkxO2RzdFtkc3RPZmZzZXQrMl09ejE7ZHN0W2RzdE9mZnNldCszXT13MTtyZXR1cm47fWlmKHcwIT09dzF8fHgwIT09eDF8fHkwIT09eTF8fHowIT09ejEpe2xldCBzPTEtdDtjb25zdCBjb3M9eDAqeDEreTAqeTErejAqejErdzAqdzEsZGlyPWNvcz49MD8xOi0xLHNxclNpbj0xLWNvcypjb3M7Ly8gU2tpcCB0aGUgU2xlcnAgZm9yIHRpbnkgc3RlcHMgdG8gYXZvaWQgbnVtZXJpYyBwcm9ibGVtczoKCWlmKHNxclNpbj5OdW1iZXIuRVBTSUxPTil7Y29uc3Qgc2luPU1hdGguc3FydChzcXJTaW4pLGxlbj1NYXRoLmF0YW4yKHNpbixjb3MqZGlyKTtzPU1hdGguc2luKHMqbGVuKS9zaW47dD1NYXRoLnNpbih0Kmxlbikvc2luO31jb25zdCB0RGlyPXQqZGlyO3gwPXgwKnMreDEqdERpcjt5MD15MCpzK3kxKnREaXI7ejA9ejAqcyt6MSp0RGlyO3cwPXcwKnMrdzEqdERpcjsvLyBOb3JtYWxpemUgaW4gY2FzZSB3ZSBqdXN0IGRpZCBhIGxlcnA6CglpZihzPT09MS10KXtjb25zdCBmPTEvTWF0aC5zcXJ0KHgwKngwK3kwKnkwK3owKnowK3cwKncwKTt4MCo9Zjt5MCo9Zjt6MCo9Zjt3MCo9Zjt9fWRzdFtkc3RPZmZzZXRdPXgwO2RzdFtkc3RPZmZzZXQrMV09eTA7ZHN0W2RzdE9mZnNldCsyXT16MDtkc3RbZHN0T2Zmc2V0KzNdPXcwO31zdGF0aWMgbXVsdGlwbHlRdWF0ZXJuaW9uc0ZsYXQoZHN0LGRzdE9mZnNldCxzcmMwLHNyY09mZnNldDAsc3JjMSxzcmNPZmZzZXQxKXtjb25zdCB4MD1zcmMwW3NyY09mZnNldDBdO2NvbnN0IHkwPXNyYzBbc3JjT2Zmc2V0MCsxXTtjb25zdCB6MD1zcmMwW3NyY09mZnNldDArMl07Y29uc3QgdzA9c3JjMFtzcmNPZmZzZXQwKzNdO2NvbnN0IHgxPXNyYzFbc3JjT2Zmc2V0MV07Y29uc3QgeTE9c3JjMVtzcmNPZmZzZXQxKzFdO2NvbnN0IHoxPXNyYzFbc3JjT2Zmc2V0MSsyXTtjb25zdCB3MT1zcmMxW3NyY09mZnNldDErM107ZHN0W2RzdE9mZnNldF09eDAqdzErdzAqeDEreTAqejEtejAqeTE7ZHN0W2RzdE9mZnNldCsxXT15MCp3MSt3MCp5MSt6MCp4MS14MCp6MTtkc3RbZHN0T2Zmc2V0KzJdPXowKncxK3cwKnoxK3gwKnkxLXkwKngxO2RzdFtkc3RPZmZzZXQrM109dzAqdzEteDAqeDEteTAqeTEtejAqejE7cmV0dXJuIGRzdDt9Z2V0IHgoKXtyZXR1cm4gdGhpcy5feDt9c2V0IHgodmFsdWUpe3RoaXMuX3g9dmFsdWU7dGhpcy5fb25DaGFuZ2VDYWxsYmFjaygpO31nZXQgeSgpe3JldHVybiB0aGlzLl95O31zZXQgeSh2YWx1ZSl7dGhpcy5feT12YWx1ZTt0aGlzLl9vbkNoYW5nZUNhbGxiYWNrKCk7fWdldCB6KCl7cmV0dXJuIHRoaXMuX3o7fXNldCB6KHZhbHVlKXt0aGlzLl96PXZhbHVlO3RoaXMuX29uQ2hhbmdlQ2FsbGJhY2soKTt9Z2V0IHcoKXtyZXR1cm4gdGhpcy5fdzt9c2V0IHcodmFsdWUpe3RoaXMuX3c9dmFsdWU7dGhpcy5fb25DaGFuZ2VDYWxsYmFjaygpO31zZXQoeCx5LHosdyl7dGhpcy5feD14O3RoaXMuX3k9eTt0aGlzLl96PXo7dGhpcy5fdz13O3RoaXMuX29uQ2hhbmdlQ2FsbGJhY2soKTtyZXR1cm4gdGhpczt9Y2xvbmUoKXtyZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy5feCx0aGlzLl95LHRoaXMuX3osdGhpcy5fdyk7fWNvcHkocXVhdGVybmlvbil7dGhpcy5feD1xdWF0ZXJuaW9uLng7dGhpcy5feT1xdWF0ZXJuaW9uLnk7dGhpcy5fej1xdWF0ZXJuaW9uLno7dGhpcy5fdz1xdWF0ZXJuaW9uLnc7dGhpcy5fb25DaGFuZ2VDYWxsYmFjaygpO3JldHVybiB0aGlzO31zZXRGcm9tRXVsZXIoZXVsZXIsdXBkYXRlKXtpZighKGV1bGVyJiZldWxlci5pc0V1bGVyKSl7dGhyb3cgbmV3IEVycm9yKCdUSFJFRS5RdWF0ZXJuaW9uOiAuc2V0RnJvbUV1bGVyKCkgbm93IGV4cGVjdHMgYW4gRXVsZXIgcm90YXRpb24gcmF0aGVyIHRoYW4gYSBWZWN0b3IzIGFuZCBvcmRlci4nKTt9Y29uc3QgeD1ldWxlci5feCx5PWV1bGVyLl95LHo9ZXVsZXIuX3osb3JkZXI9ZXVsZXIuX29yZGVyOy8vIGh0dHA6Ly93d3cubWF0aHdvcmtzLmNvbS9tYXRsYWJjZW50cmFsL2ZpbGVleGNoYW5nZS8KCS8vIAkyMDY5Ni1mdW5jdGlvbi10by1jb252ZXJ0LWJldHdlZW4tZGNtLWV1bGVyLWFuZ2xlcy1xdWF0ZXJuaW9ucy1hbmQtZXVsZXItdmVjdG9ycy8KCS8vCWNvbnRlbnQvU3BpbkNhbGMubQoJY29uc3QgY29zPU1hdGguY29zO2NvbnN0IHNpbj1NYXRoLnNpbjtjb25zdCBjMT1jb3MoeC8yKTtjb25zdCBjMj1jb3MoeS8yKTtjb25zdCBjMz1jb3Moei8yKTtjb25zdCBzMT1zaW4oeC8yKTtjb25zdCBzMj1zaW4oeS8yKTtjb25zdCBzMz1zaW4oei8yKTtzd2l0Y2gob3JkZXIpe2Nhc2UnWFlaJzp0aGlzLl94PXMxKmMyKmMzK2MxKnMyKnMzO3RoaXMuX3k9YzEqczIqYzMtczEqYzIqczM7dGhpcy5fej1jMSpjMipzMytzMSpzMipjMzt0aGlzLl93PWMxKmMyKmMzLXMxKnMyKnMzO2JyZWFrO2Nhc2UnWVhaJzp0aGlzLl94PXMxKmMyKmMzK2MxKnMyKnMzO3RoaXMuX3k9YzEqczIqYzMtczEqYzIqczM7dGhpcy5fej1jMSpjMipzMy1zMSpzMipjMzt0aGlzLl93PWMxKmMyKmMzK3MxKnMyKnMzO2JyZWFrO2Nhc2UnWlhZJzp0aGlzLl94PXMxKmMyKmMzLWMxKnMyKnMzO3RoaXMuX3k9YzEqczIqYzMrczEqYzIqczM7dGhpcy5fej1jMSpjMipzMytzMSpzMipjMzt0aGlzLl93PWMxKmMyKmMzLXMxKnMyKnMzO2JyZWFrO2Nhc2UnWllYJzp0aGlzLl94PXMxKmMyKmMzLWMxKnMyKnMzO3RoaXMuX3k9YzEqczIqYzMrczEqYzIqczM7dGhpcy5fej1jMSpjMipzMy1zMSpzMipjMzt0aGlzLl93PWMxKmMyKmMzK3MxKnMyKnMzO2JyZWFrO2Nhc2UnWVpYJzp0aGlzLl94PXMxKmMyKmMzK2MxKnMyKnMzO3RoaXMuX3k9YzEqczIqYzMrczEqYzIqczM7dGhpcy5fej1jMSpjMipzMy1zMSpzMipjMzt0aGlzLl93PWMxKmMyKmMzLXMxKnMyKnMzO2JyZWFrO2Nhc2UnWFpZJzp0aGlzLl94PXMxKmMyKmMzLWMxKnMyKnMzO3RoaXMuX3k9YzEqczIqYzMtczEqYzIqczM7dGhpcy5fej1jMSpjMipzMytzMSpzMipjMzt0aGlzLl93PWMxKmMyKmMzK3MxKnMyKnMzO2JyZWFrO2RlZmF1bHQ6Y29uc29sZS53YXJuKCdUSFJFRS5RdWF0ZXJuaW9uOiAuc2V0RnJvbUV1bGVyKCkgZW5jb3VudGVyZWQgYW4gdW5rbm93biBvcmRlcjogJytvcmRlcik7fWlmKHVwZGF0ZSE9PWZhbHNlKXRoaXMuX29uQ2hhbmdlQ2FsbGJhY2soKTtyZXR1cm4gdGhpczt9c2V0RnJvbUF4aXNBbmdsZShheGlzLGFuZ2xlKXsvLyBodHRwOi8vd3d3LmV1Y2xpZGVhbnNwYWNlLmNvbS9tYXRocy9nZW9tZXRyeS9yb3RhdGlvbnMvY29udmVyc2lvbnMvYW5nbGVUb1F1YXRlcm5pb24vaW5kZXguaHRtCgkvLyBhc3N1bWVzIGF4aXMgaXMgbm9ybWFsaXplZAoJY29uc3QgaGFsZkFuZ2xlPWFuZ2xlLzIscz1NYXRoLnNpbihoYWxmQW5nbGUpO3RoaXMuX3g9YXhpcy54KnM7dGhpcy5feT1heGlzLnkqczt0aGlzLl96PWF4aXMueipzO3RoaXMuX3c9TWF0aC5jb3MoaGFsZkFuZ2xlKTt0aGlzLl9vbkNoYW5nZUNhbGxiYWNrKCk7cmV0dXJuIHRoaXM7fXNldEZyb21Sb3RhdGlvbk1hdHJpeChtKXsvLyBodHRwOi8vd3d3LmV1Y2xpZGVhbnNwYWNlLmNvbS9tYXRocy9nZW9tZXRyeS9yb3RhdGlvbnMvY29udmVyc2lvbnMvbWF0cml4VG9RdWF0ZXJuaW9uL2luZGV4Lmh0bQoJLy8gYXNzdW1lcyB0aGUgdXBwZXIgM3gzIG9mIG0gaXMgYSBwdXJlIHJvdGF0aW9uIG1hdHJpeCAoaS5lLCB1bnNjYWxlZCkKCWNvbnN0IHRlPW0uZWxlbWVudHMsbTExPXRlWzBdLG0xMj10ZVs0XSxtMTM9dGVbOF0sbTIxPXRlWzFdLG0yMj10ZVs1XSxtMjM9dGVbOV0sbTMxPXRlWzJdLG0zMj10ZVs2XSxtMzM9dGVbMTBdLHRyYWNlPW0xMSttMjIrbTMzO2lmKHRyYWNlPjApe2NvbnN0IHM9MC41L01hdGguc3FydCh0cmFjZSsxLjApO3RoaXMuX3c9MC4yNS9zO3RoaXMuX3g9KG0zMi1tMjMpKnM7dGhpcy5feT0obTEzLW0zMSkqczt0aGlzLl96PShtMjEtbTEyKSpzO31lbHNlIGlmKG0xMT5tMjImJm0xMT5tMzMpe2NvbnN0IHM9Mi4wKk1hdGguc3FydCgxLjArbTExLW0yMi1tMzMpO3RoaXMuX3c9KG0zMi1tMjMpL3M7dGhpcy5feD0wLjI1KnM7dGhpcy5feT0obTEyK20yMSkvczt0aGlzLl96PShtMTMrbTMxKS9zO31lbHNlIGlmKG0yMj5tMzMpe2NvbnN0IHM9Mi4wKk1hdGguc3FydCgxLjArbTIyLW0xMS1tMzMpO3RoaXMuX3c9KG0xMy1tMzEpL3M7dGhpcy5feD0obTEyK20yMSkvczt0aGlzLl95PTAuMjUqczt0aGlzLl96PShtMjMrbTMyKS9zO31lbHNlIHtjb25zdCBzPTIuMCpNYXRoLnNxcnQoMS4wK20zMy1tMTEtbTIyKTt0aGlzLl93PShtMjEtbTEyKS9zO3RoaXMuX3g9KG0xMyttMzEpL3M7dGhpcy5feT0obTIzK20zMikvczt0aGlzLl96PTAuMjUqczt9dGhpcy5fb25DaGFuZ2VDYWxsYmFjaygpO3JldHVybiB0aGlzO31zZXRGcm9tVW5pdFZlY3RvcnModkZyb20sdlRvKXsvLyBhc3N1bWVzIGRpcmVjdGlvbiB2ZWN0b3JzIHZGcm9tIGFuZCB2VG8gYXJlIG5vcm1hbGl6ZWQKCWxldCByPXZGcm9tLmRvdCh2VG8pKzE7aWYocjxOdW1iZXIuRVBTSUxPTil7Ly8gdkZyb20gYW5kIHZUbyBwb2ludCBpbiBvcHBvc2l0ZSBkaXJlY3Rpb25zCglyPTA7aWYoTWF0aC5hYnModkZyb20ueCk+TWF0aC5hYnModkZyb20ueikpe3RoaXMuX3g9LXZGcm9tLnk7dGhpcy5feT12RnJvbS54O3RoaXMuX3o9MDt0aGlzLl93PXI7fWVsc2Uge3RoaXMuX3g9MDt0aGlzLl95PS12RnJvbS56O3RoaXMuX3o9dkZyb20ueTt0aGlzLl93PXI7fX1lbHNlIHsvLyBjcm9zc1ZlY3RvcnMoIHZGcm9tLCB2VG8gKTsgLy8gaW5saW5lZCB0byBhdm9pZCBjeWNsaWMgZGVwZW5kZW5jeSBvbiBWZWN0b3IzCgl0aGlzLl94PXZGcm9tLnkqdlRvLnotdkZyb20ueip2VG8ueTt0aGlzLl95PXZGcm9tLnoqdlRvLngtdkZyb20ueCp2VG8uejt0aGlzLl96PXZGcm9tLngqdlRvLnktdkZyb20ueSp2VG8ueDt0aGlzLl93PXI7fXJldHVybiB0aGlzLm5vcm1hbGl6ZSgpO31hbmdsZVRvKHEpe3JldHVybiAyKk1hdGguYWNvcyhNYXRoLmFicyhjbGFtcCh0aGlzLmRvdChxKSwtMSwxKSkpO31yb3RhdGVUb3dhcmRzKHEsc3RlcCl7Y29uc3QgYW5nbGU9dGhpcy5hbmdsZVRvKHEpO2lmKGFuZ2xlPT09MClyZXR1cm4gdGhpcztjb25zdCB0PU1hdGgubWluKDEsc3RlcC9hbmdsZSk7dGhpcy5zbGVycChxLHQpO3JldHVybiB0aGlzO31pZGVudGl0eSgpe3JldHVybiB0aGlzLnNldCgwLDAsMCwxKTt9aW52ZXJ0KCl7Ly8gcXVhdGVybmlvbiBpcyBhc3N1bWVkIHRvIGhhdmUgdW5pdCBsZW5ndGgKCXJldHVybiB0aGlzLmNvbmp1Z2F0ZSgpO31jb25qdWdhdGUoKXt0aGlzLl94Kj0tMTt0aGlzLl95Kj0tMTt0aGlzLl96Kj0tMTt0aGlzLl9vbkNoYW5nZUNhbGxiYWNrKCk7cmV0dXJuIHRoaXM7fWRvdCh2KXtyZXR1cm4gdGhpcy5feCp2Ll94K3RoaXMuX3kqdi5feSt0aGlzLl96KnYuX3ordGhpcy5fdyp2Ll93O31sZW5ndGhTcSgpe3JldHVybiB0aGlzLl94KnRoaXMuX3grdGhpcy5feSp0aGlzLl95K3RoaXMuX3oqdGhpcy5feit0aGlzLl93KnRoaXMuX3c7fWxlbmd0aCgpe3JldHVybiBNYXRoLnNxcnQodGhpcy5feCp0aGlzLl94K3RoaXMuX3kqdGhpcy5feSt0aGlzLl96KnRoaXMuX3ordGhpcy5fdyp0aGlzLl93KTt9bm9ybWFsaXplKCl7bGV0IGw9dGhpcy5sZW5ndGgoKTtpZihsPT09MCl7dGhpcy5feD0wO3RoaXMuX3k9MDt0aGlzLl96PTA7dGhpcy5fdz0xO31lbHNlIHtsPTEvbDt0aGlzLl94PXRoaXMuX3gqbDt0aGlzLl95PXRoaXMuX3kqbDt0aGlzLl96PXRoaXMuX3oqbDt0aGlzLl93PXRoaXMuX3cqbDt9dGhpcy5fb25DaGFuZ2VDYWxsYmFjaygpO3JldHVybiB0aGlzO31tdWx0aXBseShxLHApe2lmKHAhPT11bmRlZmluZWQpe2NvbnNvbGUud2FybignVEhSRUUuUXVhdGVybmlvbjogLm11bHRpcGx5KCkgbm93IG9ubHkgYWNjZXB0cyBvbmUgYXJndW1lbnQuIFVzZSAubXVsdGlwbHlRdWF0ZXJuaW9ucyggYSwgYiApIGluc3RlYWQuJyk7cmV0dXJuIHRoaXMubXVsdGlwbHlRdWF0ZXJuaW9ucyhxLHApO31yZXR1cm4gdGhpcy5tdWx0aXBseVF1YXRlcm5pb25zKHRoaXMscSk7fXByZW11bHRpcGx5KHEpe3JldHVybiB0aGlzLm11bHRpcGx5UXVhdGVybmlvbnMocSx0aGlzKTt9bXVsdGlwbHlRdWF0ZXJuaW9ucyhhLGIpey8vIGZyb20gaHR0cDovL3d3dy5ldWNsaWRlYW5zcGFjZS5jb20vbWF0aHMvYWxnZWJyYS9yZWFsTm9ybWVkQWxnZWJyYS9xdWF0ZXJuaW9ucy9jb2RlL2luZGV4Lmh0bQoJY29uc3QgcWF4PWEuX3gscWF5PWEuX3kscWF6PWEuX3oscWF3PWEuX3c7Y29uc3QgcWJ4PWIuX3gscWJ5PWIuX3kscWJ6PWIuX3oscWJ3PWIuX3c7dGhpcy5feD1xYXgqcWJ3K3FhdypxYngrcWF5KnFiei1xYXoqcWJ5O3RoaXMuX3k9cWF5KnFidytxYXcqcWJ5K3FheipxYngtcWF4KnFiejt0aGlzLl96PXFheipxYncrcWF3KnFieitxYXgqcWJ5LXFheSpxYng7dGhpcy5fdz1xYXcqcWJ3LXFheCpxYngtcWF5KnFieS1xYXoqcWJ6O3RoaXMuX29uQ2hhbmdlQ2FsbGJhY2soKTtyZXR1cm4gdGhpczt9c2xlcnAocWIsdCl7aWYodD09PTApcmV0dXJuIHRoaXM7aWYodD09PTEpcmV0dXJuIHRoaXMuY29weShxYik7Y29uc3QgeD10aGlzLl94LHk9dGhpcy5feSx6PXRoaXMuX3osdz10aGlzLl93Oy8vIGh0dHA6Ly93d3cuZXVjbGlkZWFuc3BhY2UuY29tL21hdGhzL2FsZ2VicmEvcmVhbE5vcm1lZEFsZ2VicmEvcXVhdGVybmlvbnMvc2xlcnAvCglsZXQgY29zSGFsZlRoZXRhPXcqcWIuX3creCpxYi5feCt5KnFiLl95K3oqcWIuX3o7aWYoY29zSGFsZlRoZXRhPDApe3RoaXMuX3c9LXFiLl93O3RoaXMuX3g9LXFiLl94O3RoaXMuX3k9LXFiLl95O3RoaXMuX3o9LXFiLl96O2Nvc0hhbGZUaGV0YT0tY29zSGFsZlRoZXRhO31lbHNlIHt0aGlzLmNvcHkocWIpO31pZihjb3NIYWxmVGhldGE+PTEuMCl7dGhpcy5fdz13O3RoaXMuX3g9eDt0aGlzLl95PXk7dGhpcy5fej16O3JldHVybiB0aGlzO31jb25zdCBzcXJTaW5IYWxmVGhldGE9MS4wLWNvc0hhbGZUaGV0YSpjb3NIYWxmVGhldGE7aWYoc3FyU2luSGFsZlRoZXRhPD1OdW1iZXIuRVBTSUxPTil7Y29uc3Qgcz0xLXQ7dGhpcy5fdz1zKncrdCp0aGlzLl93O3RoaXMuX3g9cyp4K3QqdGhpcy5feDt0aGlzLl95PXMqeSt0KnRoaXMuX3k7dGhpcy5fej1zKnordCp0aGlzLl96O3RoaXMubm9ybWFsaXplKCk7dGhpcy5fb25DaGFuZ2VDYWxsYmFjaygpO3JldHVybiB0aGlzO31jb25zdCBzaW5IYWxmVGhldGE9TWF0aC5zcXJ0KHNxclNpbkhhbGZUaGV0YSk7Y29uc3QgaGFsZlRoZXRhPU1hdGguYXRhbjIoc2luSGFsZlRoZXRhLGNvc0hhbGZUaGV0YSk7Y29uc3QgcmF0aW9BPU1hdGguc2luKCgxLXQpKmhhbGZUaGV0YSkvc2luSGFsZlRoZXRhLHJhdGlvQj1NYXRoLnNpbih0KmhhbGZUaGV0YSkvc2luSGFsZlRoZXRhO3RoaXMuX3c9dypyYXRpb0ErdGhpcy5fdypyYXRpb0I7dGhpcy5feD14KnJhdGlvQSt0aGlzLl94KnJhdGlvQjt0aGlzLl95PXkqcmF0aW9BK3RoaXMuX3kqcmF0aW9CO3RoaXMuX3o9eipyYXRpb0ErdGhpcy5feipyYXRpb0I7dGhpcy5fb25DaGFuZ2VDYWxsYmFjaygpO3JldHVybiB0aGlzO31zbGVycFF1YXRlcm5pb25zKHFhLHFiLHQpe3RoaXMuY29weShxYSkuc2xlcnAocWIsdCk7fXJhbmRvbSgpey8vIERlcml2ZWQgZnJvbSBodHRwOi8vcGxhbm5pbmcuY3MudWl1Yy5lZHUvbm9kZTE5OC5odG1sCgkvLyBOb3RlLCB0aGlzIHNvdXJjZSB1c2VzIHcsIHgsIHksIHogb3JkZXJpbmcsCgkvLyBzbyB3ZSBzd2FwIHRoZSBvcmRlciBiZWxvdy4KCWNvbnN0IHUxPU1hdGgucmFuZG9tKCk7Y29uc3Qgc3FydDF1MT1NYXRoLnNxcnQoMS11MSk7Y29uc3Qgc3FydHUxPU1hdGguc3FydCh1MSk7Y29uc3QgdTI9MipNYXRoLlBJKk1hdGgucmFuZG9tKCk7Y29uc3QgdTM9MipNYXRoLlBJKk1hdGgucmFuZG9tKCk7cmV0dXJuIHRoaXMuc2V0KHNxcnQxdTEqTWF0aC5jb3ModTIpLHNxcnR1MSpNYXRoLnNpbih1Myksc3FydHUxKk1hdGguY29zKHUzKSxzcXJ0MXUxKk1hdGguc2luKHUyKSk7fWVxdWFscyhxdWF0ZXJuaW9uKXtyZXR1cm4gcXVhdGVybmlvbi5feD09PXRoaXMuX3gmJnF1YXRlcm5pb24uX3k9PT10aGlzLl95JiZxdWF0ZXJuaW9uLl96PT09dGhpcy5feiYmcXVhdGVybmlvbi5fdz09PXRoaXMuX3c7fWZyb21BcnJheShhcnJheSxvZmZzZXQpe2lmKG9mZnNldD09PXZvaWQgMCl7b2Zmc2V0PTA7fXRoaXMuX3g9YXJyYXlbb2Zmc2V0XTt0aGlzLl95PWFycmF5W29mZnNldCsxXTt0aGlzLl96PWFycmF5W29mZnNldCsyXTt0aGlzLl93PWFycmF5W29mZnNldCszXTt0aGlzLl9vbkNoYW5nZUNhbGxiYWNrKCk7cmV0dXJuIHRoaXM7fXRvQXJyYXkoYXJyYXksb2Zmc2V0KXtpZihhcnJheT09PXZvaWQgMCl7YXJyYXk9W107fWlmKG9mZnNldD09PXZvaWQgMCl7b2Zmc2V0PTA7fWFycmF5W29mZnNldF09dGhpcy5feDthcnJheVtvZmZzZXQrMV09dGhpcy5feTthcnJheVtvZmZzZXQrMl09dGhpcy5fejthcnJheVtvZmZzZXQrM109dGhpcy5fdztyZXR1cm4gYXJyYXk7fWZyb21CdWZmZXJBdHRyaWJ1dGUoYXR0cmlidXRlLGluZGV4KXt0aGlzLl94PWF0dHJpYnV0ZS5nZXRYKGluZGV4KTt0aGlzLl95PWF0dHJpYnV0ZS5nZXRZKGluZGV4KTt0aGlzLl96PWF0dHJpYnV0ZS5nZXRaKGluZGV4KTt0aGlzLl93PWF0dHJpYnV0ZS5nZXRXKGluZGV4KTtyZXR1cm4gdGhpczt9X29uQ2hhbmdlKGNhbGxiYWNrKXt0aGlzLl9vbkNoYW5nZUNhbGxiYWNrPWNhbGxiYWNrO3JldHVybiB0aGlzO31fb25DaGFuZ2VDYWxsYmFjaygpe319UXVhdGVybmlvbi5wcm90b3R5cGUuaXNRdWF0ZXJuaW9uPXRydWU7Y2xhc3MgVmVjdG9yM3tjb25zdHJ1Y3Rvcih4LHkseil7aWYoeD09PXZvaWQgMCl7eD0wO31pZih5PT09dm9pZCAwKXt5PTA7fWlmKHo9PT12b2lkIDApe3o9MDt9dGhpcy54PXg7dGhpcy55PXk7dGhpcy56PXo7fXNldCh4LHkseil7aWYoej09PXVuZGVmaW5lZCl6PXRoaXMuejsvLyBzcHJpdGUuc2NhbGUuc2V0KHgseSkKCXRoaXMueD14O3RoaXMueT15O3RoaXMuej16O3JldHVybiB0aGlzO31zZXRTY2FsYXIoc2NhbGFyKXt0aGlzLng9c2NhbGFyO3RoaXMueT1zY2FsYXI7dGhpcy56PXNjYWxhcjtyZXR1cm4gdGhpczt9c2V0WCh4KXt0aGlzLng9eDtyZXR1cm4gdGhpczt9c2V0WSh5KXt0aGlzLnk9eTtyZXR1cm4gdGhpczt9c2V0Wih6KXt0aGlzLno9ejtyZXR1cm4gdGhpczt9c2V0Q29tcG9uZW50KGluZGV4LHZhbHVlKXtzd2l0Y2goaW5kZXgpe2Nhc2UgMDp0aGlzLng9dmFsdWU7YnJlYWs7Y2FzZSAxOnRoaXMueT12YWx1ZTticmVhaztjYXNlIDI6dGhpcy56PXZhbHVlO2JyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKCdpbmRleCBpcyBvdXQgb2YgcmFuZ2U6ICcraW5kZXgpO31yZXR1cm4gdGhpczt9Z2V0Q29tcG9uZW50KGluZGV4KXtzd2l0Y2goaW5kZXgpe2Nhc2UgMDpyZXR1cm4gdGhpcy54O2Nhc2UgMTpyZXR1cm4gdGhpcy55O2Nhc2UgMjpyZXR1cm4gdGhpcy56O2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKCdpbmRleCBpcyBvdXQgb2YgcmFuZ2U6ICcraW5kZXgpO319Y2xvbmUoKXtyZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy54LHRoaXMueSx0aGlzLnopO31jb3B5KHYpe3RoaXMueD12Lng7dGhpcy55PXYueTt0aGlzLno9di56O3JldHVybiB0aGlzO31hZGQodix3KXtpZih3IT09dW5kZWZpbmVkKXtjb25zb2xlLndhcm4oJ1RIUkVFLlZlY3RvcjM6IC5hZGQoKSBub3cgb25seSBhY2NlcHRzIG9uZSBhcmd1bWVudC4gVXNlIC5hZGRWZWN0b3JzKCBhLCBiICkgaW5zdGVhZC4nKTtyZXR1cm4gdGhpcy5hZGRWZWN0b3JzKHYsdyk7fXRoaXMueCs9di54O3RoaXMueSs9di55O3RoaXMueis9di56O3JldHVybiB0aGlzO31hZGRTY2FsYXIocyl7dGhpcy54Kz1zO3RoaXMueSs9czt0aGlzLnorPXM7cmV0dXJuIHRoaXM7fWFkZFZlY3RvcnMoYSxiKXt0aGlzLng9YS54K2IueDt0aGlzLnk9YS55K2IueTt0aGlzLno9YS56K2IuejtyZXR1cm4gdGhpczt9YWRkU2NhbGVkVmVjdG9yKHYscyl7dGhpcy54Kz12Lngqczt0aGlzLnkrPXYueSpzO3RoaXMueis9di56KnM7cmV0dXJuIHRoaXM7fXN1Yih2LHcpe2lmKHchPT11bmRlZmluZWQpe2NvbnNvbGUud2FybignVEhSRUUuVmVjdG9yMzogLnN1YigpIG5vdyBvbmx5IGFjY2VwdHMgb25lIGFyZ3VtZW50LiBVc2UgLnN1YlZlY3RvcnMoIGEsIGIgKSBpbnN0ZWFkLicpO3JldHVybiB0aGlzLnN1YlZlY3RvcnModix3KTt9dGhpcy54LT12Lng7dGhpcy55LT12Lnk7dGhpcy56LT12Lno7cmV0dXJuIHRoaXM7fXN1YlNjYWxhcihzKXt0aGlzLngtPXM7dGhpcy55LT1zO3RoaXMuei09cztyZXR1cm4gdGhpczt9c3ViVmVjdG9ycyhhLGIpe3RoaXMueD1hLngtYi54O3RoaXMueT1hLnktYi55O3RoaXMuej1hLnotYi56O3JldHVybiB0aGlzO31tdWx0aXBseSh2LHcpe2lmKHchPT11bmRlZmluZWQpe2NvbnNvbGUud2FybignVEhSRUUuVmVjdG9yMzogLm11bHRpcGx5KCkgbm93IG9ubHkgYWNjZXB0cyBvbmUgYXJndW1lbnQuIFVzZSAubXVsdGlwbHlWZWN0b3JzKCBhLCBiICkgaW5zdGVhZC4nKTtyZXR1cm4gdGhpcy5tdWx0aXBseVZlY3RvcnModix3KTt9dGhpcy54Kj12Lng7dGhpcy55Kj12Lnk7dGhpcy56Kj12Lno7cmV0dXJuIHRoaXM7fW11bHRpcGx5U2NhbGFyKHNjYWxhcil7dGhpcy54Kj1zY2FsYXI7dGhpcy55Kj1zY2FsYXI7dGhpcy56Kj1zY2FsYXI7cmV0dXJuIHRoaXM7fW11bHRpcGx5VmVjdG9ycyhhLGIpe3RoaXMueD1hLngqYi54O3RoaXMueT1hLnkqYi55O3RoaXMuej1hLnoqYi56O3JldHVybiB0aGlzO31hcHBseUV1bGVyKGV1bGVyKXtpZighKGV1bGVyJiZldWxlci5pc0V1bGVyKSl7Y29uc29sZS5lcnJvcignVEhSRUUuVmVjdG9yMzogLmFwcGx5RXVsZXIoKSBub3cgZXhwZWN0cyBhbiBFdWxlciByb3RhdGlvbiByYXRoZXIgdGhhbiBhIFZlY3RvcjMgYW5kIG9yZGVyLicpO31yZXR1cm4gdGhpcy5hcHBseVF1YXRlcm5pb24oX3F1YXRlcm5pb24kNC5zZXRGcm9tRXVsZXIoZXVsZXIpKTt9YXBwbHlBeGlzQW5nbGUoYXhpcyxhbmdsZSl7cmV0dXJuIHRoaXMuYXBwbHlRdWF0ZXJuaW9uKF9xdWF0ZXJuaW9uJDQuc2V0RnJvbUF4aXNBbmdsZShheGlzLGFuZ2xlKSk7fWFwcGx5TWF0cml4MyhtKXtjb25zdCB4PXRoaXMueCx5PXRoaXMueSx6PXRoaXMuejtjb25zdCBlPW0uZWxlbWVudHM7dGhpcy54PWVbMF0qeCtlWzNdKnkrZVs2XSp6O3RoaXMueT1lWzFdKngrZVs0XSp5K2VbN10qejt0aGlzLno9ZVsyXSp4K2VbNV0qeStlWzhdKno7cmV0dXJuIHRoaXM7fWFwcGx5Tm9ybWFsTWF0cml4KG0pe3JldHVybiB0aGlzLmFwcGx5TWF0cml4MyhtKS5ub3JtYWxpemUoKTt9YXBwbHlNYXRyaXg0KG0pe2NvbnN0IHg9dGhpcy54LHk9dGhpcy55LHo9dGhpcy56O2NvbnN0IGU9bS5lbGVtZW50cztjb25zdCB3PTEvKGVbM10qeCtlWzddKnkrZVsxMV0qeitlWzE1XSk7dGhpcy54PShlWzBdKngrZVs0XSp5K2VbOF0qeitlWzEyXSkqdzt0aGlzLnk9KGVbMV0qeCtlWzVdKnkrZVs5XSp6K2VbMTNdKSp3O3RoaXMuej0oZVsyXSp4K2VbNl0qeStlWzEwXSp6K2VbMTRdKSp3O3JldHVybiB0aGlzO31hcHBseVF1YXRlcm5pb24ocSl7Y29uc3QgeD10aGlzLngseT10aGlzLnksej10aGlzLno7Y29uc3QgcXg9cS54LHF5PXEueSxxej1xLnoscXc9cS53Oy8vIGNhbGN1bGF0ZSBxdWF0ICogdmVjdG9yCgljb25zdCBpeD1xdyp4K3F5KnotcXoqeTtjb25zdCBpeT1xdyp5K3F6KngtcXgqejtjb25zdCBpej1xdyp6K3F4KnktcXkqeDtjb25zdCBpdz0tcXgqeC1xeSp5LXF6Kno7Ly8gY2FsY3VsYXRlIHJlc3VsdCAqIGludmVyc2UgcXVhdAoJdGhpcy54PWl4KnF3K2l3Ki1xeCtpeSotcXotaXoqLXF5O3RoaXMueT1peSpxdytpdyotcXkraXoqLXF4LWl4Ki1xejt0aGlzLno9aXoqcXcraXcqLXF6K2l4Ki1xeS1peSotcXg7cmV0dXJuIHRoaXM7fXByb2plY3QoY2FtZXJhKXtyZXR1cm4gdGhpcy5hcHBseU1hdHJpeDQoY2FtZXJhLm1hdHJpeFdvcmxkSW52ZXJzZSkuYXBwbHlNYXRyaXg0KGNhbWVyYS5wcm9qZWN0aW9uTWF0cml4KTt9dW5wcm9qZWN0KGNhbWVyYSl7cmV0dXJuIHRoaXMuYXBwbHlNYXRyaXg0KGNhbWVyYS5wcm9qZWN0aW9uTWF0cml4SW52ZXJzZSkuYXBwbHlNYXRyaXg0KGNhbWVyYS5tYXRyaXhXb3JsZCk7fXRyYW5zZm9ybURpcmVjdGlvbihtKXsvLyBpbnB1dDogVEhSRUUuTWF0cml4NCBhZmZpbmUgbWF0cml4CgkvLyB2ZWN0b3IgaW50ZXJwcmV0ZWQgYXMgYSBkaXJlY3Rpb24KCWNvbnN0IHg9dGhpcy54LHk9dGhpcy55LHo9dGhpcy56O2NvbnN0IGU9bS5lbGVtZW50czt0aGlzLng9ZVswXSp4K2VbNF0qeStlWzhdKno7dGhpcy55PWVbMV0qeCtlWzVdKnkrZVs5XSp6O3RoaXMuej1lWzJdKngrZVs2XSp5K2VbMTBdKno7cmV0dXJuIHRoaXMubm9ybWFsaXplKCk7fWRpdmlkZSh2KXt0aGlzLngvPXYueDt0aGlzLnkvPXYueTt0aGlzLnovPXYuejtyZXR1cm4gdGhpczt9ZGl2aWRlU2NhbGFyKHNjYWxhcil7cmV0dXJuIHRoaXMubXVsdGlwbHlTY2FsYXIoMS9zY2FsYXIpO31taW4odil7dGhpcy54PU1hdGgubWluKHRoaXMueCx2LngpO3RoaXMueT1NYXRoLm1pbih0aGlzLnksdi55KTt0aGlzLno9TWF0aC5taW4odGhpcy56LHYueik7cmV0dXJuIHRoaXM7fW1heCh2KXt0aGlzLng9TWF0aC5tYXgodGhpcy54LHYueCk7dGhpcy55PU1hdGgubWF4KHRoaXMueSx2LnkpO3RoaXMuej1NYXRoLm1heCh0aGlzLnosdi56KTtyZXR1cm4gdGhpczt9Y2xhbXAobWluLG1heCl7Ly8gYXNzdW1lcyBtaW4gPCBtYXgsIGNvbXBvbmVudHdpc2UKCXRoaXMueD1NYXRoLm1heChtaW4ueCxNYXRoLm1pbihtYXgueCx0aGlzLngpKTt0aGlzLnk9TWF0aC5tYXgobWluLnksTWF0aC5taW4obWF4LnksdGhpcy55KSk7dGhpcy56PU1hdGgubWF4KG1pbi56LE1hdGgubWluKG1heC56LHRoaXMueikpO3JldHVybiB0aGlzO31jbGFtcFNjYWxhcihtaW5WYWwsbWF4VmFsKXt0aGlzLng9TWF0aC5tYXgobWluVmFsLE1hdGgubWluKG1heFZhbCx0aGlzLngpKTt0aGlzLnk9TWF0aC5tYXgobWluVmFsLE1hdGgubWluKG1heFZhbCx0aGlzLnkpKTt0aGlzLno9TWF0aC5tYXgobWluVmFsLE1hdGgubWluKG1heFZhbCx0aGlzLnopKTtyZXR1cm4gdGhpczt9Y2xhbXBMZW5ndGgobWluLG1heCl7Y29uc3QgbGVuZ3RoPXRoaXMubGVuZ3RoKCk7cmV0dXJuIHRoaXMuZGl2aWRlU2NhbGFyKGxlbmd0aHx8MSkubXVsdGlwbHlTY2FsYXIoTWF0aC5tYXgobWluLE1hdGgubWluKG1heCxsZW5ndGgpKSk7fWZsb29yKCl7dGhpcy54PU1hdGguZmxvb3IodGhpcy54KTt0aGlzLnk9TWF0aC5mbG9vcih0aGlzLnkpO3RoaXMuej1NYXRoLmZsb29yKHRoaXMueik7cmV0dXJuIHRoaXM7fWNlaWwoKXt0aGlzLng9TWF0aC5jZWlsKHRoaXMueCk7dGhpcy55PU1hdGguY2VpbCh0aGlzLnkpO3RoaXMuej1NYXRoLmNlaWwodGhpcy56KTtyZXR1cm4gdGhpczt9cm91bmQoKXt0aGlzLng9TWF0aC5yb3VuZCh0aGlzLngpO3RoaXMueT1NYXRoLnJvdW5kKHRoaXMueSk7dGhpcy56PU1hdGgucm91bmQodGhpcy56KTtyZXR1cm4gdGhpczt9cm91bmRUb1plcm8oKXt0aGlzLng9dGhpcy54PDA/TWF0aC5jZWlsKHRoaXMueCk6TWF0aC5mbG9vcih0aGlzLngpO3RoaXMueT10aGlzLnk8MD9NYXRoLmNlaWwodGhpcy55KTpNYXRoLmZsb29yKHRoaXMueSk7dGhpcy56PXRoaXMuejwwP01hdGguY2VpbCh0aGlzLnopOk1hdGguZmxvb3IodGhpcy56KTtyZXR1cm4gdGhpczt9bmVnYXRlKCl7dGhpcy54PS10aGlzLng7dGhpcy55PS10aGlzLnk7dGhpcy56PS10aGlzLno7cmV0dXJuIHRoaXM7fWRvdCh2KXtyZXR1cm4gdGhpcy54KnYueCt0aGlzLnkqdi55K3RoaXMueip2Lno7fS8vIFRPRE8gbGVuZ3RoU3F1YXJlZD8KCWxlbmd0aFNxKCl7cmV0dXJuIHRoaXMueCp0aGlzLngrdGhpcy55KnRoaXMueSt0aGlzLnoqdGhpcy56O31sZW5ndGgoKXtyZXR1cm4gTWF0aC5zcXJ0KHRoaXMueCp0aGlzLngrdGhpcy55KnRoaXMueSt0aGlzLnoqdGhpcy56KTt9bWFuaGF0dGFuTGVuZ3RoKCl7cmV0dXJuIE1hdGguYWJzKHRoaXMueCkrTWF0aC5hYnModGhpcy55KStNYXRoLmFicyh0aGlzLnopO31ub3JtYWxpemUoKXtyZXR1cm4gdGhpcy5kaXZpZGVTY2FsYXIodGhpcy5sZW5ndGgoKXx8MSk7fXNldExlbmd0aChsZW5ndGgpe3JldHVybiB0aGlzLm5vcm1hbGl6ZSgpLm11bHRpcGx5U2NhbGFyKGxlbmd0aCk7fWxlcnAodixhbHBoYSl7dGhpcy54Kz0odi54LXRoaXMueCkqYWxwaGE7dGhpcy55Kz0odi55LXRoaXMueSkqYWxwaGE7dGhpcy56Kz0odi56LXRoaXMueikqYWxwaGE7cmV0dXJuIHRoaXM7fWxlcnBWZWN0b3JzKHYxLHYyLGFscGhhKXt0aGlzLng9djEueCsodjIueC12MS54KSphbHBoYTt0aGlzLnk9djEueSsodjIueS12MS55KSphbHBoYTt0aGlzLno9djEueisodjIuei12MS56KSphbHBoYTtyZXR1cm4gdGhpczt9Y3Jvc3Modix3KXtpZih3IT09dW5kZWZpbmVkKXtjb25zb2xlLndhcm4oJ1RIUkVFLlZlY3RvcjM6IC5jcm9zcygpIG5vdyBvbmx5IGFjY2VwdHMgb25lIGFyZ3VtZW50LiBVc2UgLmNyb3NzVmVjdG9ycyggYSwgYiApIGluc3RlYWQuJyk7cmV0dXJuIHRoaXMuY3Jvc3NWZWN0b3JzKHYsdyk7fXJldHVybiB0aGlzLmNyb3NzVmVjdG9ycyh0aGlzLHYpO31jcm9zc1ZlY3RvcnMoYSxiKXtjb25zdCBheD1hLngsYXk9YS55LGF6PWEuejtjb25zdCBieD1iLngsYnk9Yi55LGJ6PWIuejt0aGlzLng9YXkqYnotYXoqYnk7dGhpcy55PWF6KmJ4LWF4KmJ6O3RoaXMuej1heCpieS1heSpieDtyZXR1cm4gdGhpczt9cHJvamVjdE9uVmVjdG9yKHYpe2NvbnN0IGRlbm9taW5hdG9yPXYubGVuZ3RoU3EoKTtpZihkZW5vbWluYXRvcj09PTApcmV0dXJuIHRoaXMuc2V0KDAsMCwwKTtjb25zdCBzY2FsYXI9di5kb3QodGhpcykvZGVub21pbmF0b3I7cmV0dXJuIHRoaXMuY29weSh2KS5tdWx0aXBseVNjYWxhcihzY2FsYXIpO31wcm9qZWN0T25QbGFuZShwbGFuZU5vcm1hbCl7X3ZlY3RvciRjLmNvcHkodGhpcykucHJvamVjdE9uVmVjdG9yKHBsYW5lTm9ybWFsKTtyZXR1cm4gdGhpcy5zdWIoX3ZlY3RvciRjKTt9cmVmbGVjdChub3JtYWwpey8vIHJlZmxlY3QgaW5jaWRlbnQgdmVjdG9yIG9mZiBwbGFuZSBvcnRob2dvbmFsIHRvIG5vcm1hbAoJLy8gbm9ybWFsIGlzIGFzc3VtZWQgdG8gaGF2ZSB1bml0IGxlbmd0aAoJcmV0dXJuIHRoaXMuc3ViKF92ZWN0b3IkYy5jb3B5KG5vcm1hbCkubXVsdGlwbHlTY2FsYXIoMip0aGlzLmRvdChub3JtYWwpKSk7fWFuZ2xlVG8odil7Y29uc3QgZGVub21pbmF0b3I9TWF0aC5zcXJ0KHRoaXMubGVuZ3RoU3EoKSp2Lmxlbmd0aFNxKCkpO2lmKGRlbm9taW5hdG9yPT09MClyZXR1cm4gTWF0aC5QSS8yO2NvbnN0IHRoZXRhPXRoaXMuZG90KHYpL2Rlbm9taW5hdG9yOy8vIGNsYW1wLCB0byBoYW5kbGUgbnVtZXJpY2FsIHByb2JsZW1zCglyZXR1cm4gTWF0aC5hY29zKGNsYW1wKHRoZXRhLC0xLDEpKTt9ZGlzdGFuY2VUbyh2KXtyZXR1cm4gTWF0aC5zcXJ0KHRoaXMuZGlzdGFuY2VUb1NxdWFyZWQodikpO31kaXN0YW5jZVRvU3F1YXJlZCh2KXtjb25zdCBkeD10aGlzLngtdi54LGR5PXRoaXMueS12LnksZHo9dGhpcy56LXYuejtyZXR1cm4gZHgqZHgrZHkqZHkrZHoqZHo7fW1hbmhhdHRhbkRpc3RhbmNlVG8odil7cmV0dXJuIE1hdGguYWJzKHRoaXMueC12LngpK01hdGguYWJzKHRoaXMueS12LnkpK01hdGguYWJzKHRoaXMuei12LnopO31zZXRGcm9tU3BoZXJpY2FsKHMpe3JldHVybiB0aGlzLnNldEZyb21TcGhlcmljYWxDb29yZHMocy5yYWRpdXMscy5waGkscy50aGV0YSk7fXNldEZyb21TcGhlcmljYWxDb29yZHMocmFkaXVzLHBoaSx0aGV0YSl7Y29uc3Qgc2luUGhpUmFkaXVzPU1hdGguc2luKHBoaSkqcmFkaXVzO3RoaXMueD1zaW5QaGlSYWRpdXMqTWF0aC5zaW4odGhldGEpO3RoaXMueT1NYXRoLmNvcyhwaGkpKnJhZGl1czt0aGlzLno9c2luUGhpUmFkaXVzKk1hdGguY29zKHRoZXRhKTtyZXR1cm4gdGhpczt9c2V0RnJvbUN5bGluZHJpY2FsKGMpe3JldHVybiB0aGlzLnNldEZyb21DeWxpbmRyaWNhbENvb3JkcyhjLnJhZGl1cyxjLnRoZXRhLGMueSk7fXNldEZyb21DeWxpbmRyaWNhbENvb3JkcyhyYWRpdXMsdGhldGEseSl7dGhpcy54PXJhZGl1cypNYXRoLnNpbih0aGV0YSk7dGhpcy55PXk7dGhpcy56PXJhZGl1cypNYXRoLmNvcyh0aGV0YSk7cmV0dXJuIHRoaXM7fXNldEZyb21NYXRyaXhQb3NpdGlvbihtKXtjb25zdCBlPW0uZWxlbWVudHM7dGhpcy54PWVbMTJdO3RoaXMueT1lWzEzXTt0aGlzLno9ZVsxNF07cmV0dXJuIHRoaXM7fXNldEZyb21NYXRyaXhTY2FsZShtKXtjb25zdCBzeD10aGlzLnNldEZyb21NYXRyaXhDb2x1bW4obSwwKS5sZW5ndGgoKTtjb25zdCBzeT10aGlzLnNldEZyb21NYXRyaXhDb2x1bW4obSwxKS5sZW5ndGgoKTtjb25zdCBzej10aGlzLnNldEZyb21NYXRyaXhDb2x1bW4obSwyKS5sZW5ndGgoKTt0aGlzLng9c3g7dGhpcy55PXN5O3RoaXMuej1zejtyZXR1cm4gdGhpczt9c2V0RnJvbU1hdHJpeENvbHVtbihtLGluZGV4KXtyZXR1cm4gdGhpcy5mcm9tQXJyYXkobS5lbGVtZW50cyxpbmRleCo0KTt9c2V0RnJvbU1hdHJpeDNDb2x1bW4obSxpbmRleCl7cmV0dXJuIHRoaXMuZnJvbUFycmF5KG0uZWxlbWVudHMsaW5kZXgqMyk7fWVxdWFscyh2KXtyZXR1cm4gdi54PT09dGhpcy54JiZ2Lnk9PT10aGlzLnkmJnYuej09PXRoaXMuejt9ZnJvbUFycmF5KGFycmF5LG9mZnNldCl7aWYob2Zmc2V0PT09dm9pZCAwKXtvZmZzZXQ9MDt9dGhpcy54PWFycmF5W29mZnNldF07dGhpcy55PWFycmF5W29mZnNldCsxXTt0aGlzLno9YXJyYXlbb2Zmc2V0KzJdO3JldHVybiB0aGlzO310b0FycmF5KGFycmF5LG9mZnNldCl7aWYoYXJyYXk9PT12b2lkIDApe2FycmF5PVtdO31pZihvZmZzZXQ9PT12b2lkIDApe29mZnNldD0wO31hcnJheVtvZmZzZXRdPXRoaXMueDthcnJheVtvZmZzZXQrMV09dGhpcy55O2FycmF5W29mZnNldCsyXT10aGlzLno7cmV0dXJuIGFycmF5O31mcm9tQnVmZmVyQXR0cmlidXRlKGF0dHJpYnV0ZSxpbmRleCxvZmZzZXQpe2lmKG9mZnNldCE9PXVuZGVmaW5lZCl7Y29uc29sZS53YXJuKCdUSFJFRS5WZWN0b3IzOiBvZmZzZXQgaGFzIGJlZW4gcmVtb3ZlZCBmcm9tIC5mcm9tQnVmZmVyQXR0cmlidXRlKCkuJyk7fXRoaXMueD1hdHRyaWJ1dGUuZ2V0WChpbmRleCk7dGhpcy55PWF0dHJpYnV0ZS5nZXRZKGluZGV4KTt0aGlzLno9YXR0cmlidXRlLmdldFooaW5kZXgpO3JldHVybiB0aGlzO31yYW5kb20oKXt0aGlzLng9TWF0aC5yYW5kb20oKTt0aGlzLnk9TWF0aC5yYW5kb20oKTt0aGlzLno9TWF0aC5yYW5kb20oKTtyZXR1cm4gdGhpczt9cmFuZG9tRGlyZWN0aW9uKCl7Ly8gRGVyaXZlZCBmcm9tIGh0dHBzOi8vbWF0aHdvcmxkLndvbGZyYW0uY29tL1NwaGVyZVBvaW50UGlja2luZy5odG1sCgljb25zdCB1PShNYXRoLnJhbmRvbSgpLTAuNSkqMjtjb25zdCB0PU1hdGgucmFuZG9tKCkqTWF0aC5QSSoyO2NvbnN0IGY9TWF0aC5zcXJ0KDEtdSoqMik7dGhpcy54PWYqTWF0aC5jb3ModCk7dGhpcy55PWYqTWF0aC5zaW4odCk7dGhpcy56PXU7cmV0dXJuIHRoaXM7fSpbU3ltYm9sLml0ZXJhdG9yXSgpe3lpZWxkIHRoaXMueDt5aWVsZCB0aGlzLnk7eWllbGQgdGhpcy56O319VmVjdG9yMy5wcm90b3R5cGUuaXNWZWN0b3IzPXRydWU7Y29uc3QgX3ZlY3RvciRjPS8qQF9fUFVSRV9fKi9uZXcgVmVjdG9yMygpO2NvbnN0IF9xdWF0ZXJuaW9uJDQ9LypAX19QVVJFX18qL25ldyBRdWF0ZXJuaW9uKCk7Y2xhc3MgQm94M3tjb25zdHJ1Y3RvcihtaW4sbWF4KXtpZihtaW49PT12b2lkIDApe21pbj1uZXcgVmVjdG9yMygrSW5maW5pdHksK0luZmluaXR5LCtJbmZpbml0eSk7fWlmKG1heD09PXZvaWQgMCl7bWF4PW5ldyBWZWN0b3IzKC1JbmZpbml0eSwtSW5maW5pdHksLUluZmluaXR5KTt9dGhpcy5taW49bWluO3RoaXMubWF4PW1heDt9c2V0KG1pbixtYXgpe3RoaXMubWluLmNvcHkobWluKTt0aGlzLm1heC5jb3B5KG1heCk7cmV0dXJuIHRoaXM7fXNldEZyb21BcnJheShhcnJheSl7bGV0IG1pblg9K0luZmluaXR5O2xldCBtaW5ZPStJbmZpbml0eTtsZXQgbWluWj0rSW5maW5pdHk7bGV0IG1heFg9LUluZmluaXR5O2xldCBtYXhZPS1JbmZpbml0eTtsZXQgbWF4Wj0tSW5maW5pdHk7Zm9yKGxldCBpPTAsbD1hcnJheS5sZW5ndGg7aTxsO2krPTMpe2NvbnN0IHg9YXJyYXlbaV07Y29uc3QgeT1hcnJheVtpKzFdO2NvbnN0IHo9YXJyYXlbaSsyXTtpZih4PG1pblgpbWluWD14O2lmKHk8bWluWSltaW5ZPXk7aWYoejxtaW5aKW1pblo9ejtpZih4Pm1heFgpbWF4WD14O2lmKHk+bWF4WSltYXhZPXk7aWYoej5tYXhaKW1heFo9ejt9dGhpcy5taW4uc2V0KG1pblgsbWluWSxtaW5aKTt0aGlzLm1heC5zZXQobWF4WCxtYXhZLG1heFopO3JldHVybiB0aGlzO31zZXRGcm9tQnVmZmVyQXR0cmlidXRlKGF0dHJpYnV0ZSl7bGV0IG1pblg9K0luZmluaXR5O2xldCBtaW5ZPStJbmZpbml0eTtsZXQgbWluWj0rSW5maW5pdHk7bGV0IG1heFg9LUluZmluaXR5O2xldCBtYXhZPS1JbmZpbml0eTtsZXQgbWF4Wj0tSW5maW5pdHk7Zm9yKGxldCBpPTAsbD1hdHRyaWJ1dGUuY291bnQ7aTxsO2krKyl7Y29uc3QgeD1hdHRyaWJ1dGUuZ2V0WChpKTtjb25zdCB5PWF0dHJpYnV0ZS5nZXRZKGkpO2NvbnN0IHo9YXR0cmlidXRlLmdldFooaSk7aWYoeDxtaW5YKW1pblg9eDtpZih5PG1pblkpbWluWT15O2lmKHo8bWluWiltaW5aPXo7aWYoeD5tYXhYKW1heFg9eDtpZih5Pm1heFkpbWF4WT15O2lmKHo+bWF4WiltYXhaPXo7fXRoaXMubWluLnNldChtaW5YLG1pblksbWluWik7dGhpcy5tYXguc2V0KG1heFgsbWF4WSxtYXhaKTtyZXR1cm4gdGhpczt9c2V0RnJvbVBvaW50cyhwb2ludHMpe3RoaXMubWFrZUVtcHR5KCk7Zm9yKGxldCBpPTAsaWw9cG9pbnRzLmxlbmd0aDtpPGlsO2krKyl7dGhpcy5leHBhbmRCeVBvaW50KHBvaW50c1tpXSk7fXJldHVybiB0aGlzO31zZXRGcm9tQ2VudGVyQW5kU2l6ZShjZW50ZXIsc2l6ZSl7Y29uc3QgaGFsZlNpemU9X3ZlY3RvciRiLmNvcHkoc2l6ZSkubXVsdGlwbHlTY2FsYXIoMC41KTt0aGlzLm1pbi5jb3B5KGNlbnRlcikuc3ViKGhhbGZTaXplKTt0aGlzLm1heC5jb3B5KGNlbnRlcikuYWRkKGhhbGZTaXplKTtyZXR1cm4gdGhpczt9c2V0RnJvbU9iamVjdChvYmplY3Qpe3RoaXMubWFrZUVtcHR5KCk7cmV0dXJuIHRoaXMuZXhwYW5kQnlPYmplY3Qob2JqZWN0KTt9Y2xvbmUoKXtyZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IoKS5jb3B5KHRoaXMpO31jb3B5KGJveCl7dGhpcy5taW4uY29weShib3gubWluKTt0aGlzLm1heC5jb3B5KGJveC5tYXgpO3JldHVybiB0aGlzO31tYWtlRW1wdHkoKXt0aGlzLm1pbi54PXRoaXMubWluLnk9dGhpcy5taW4uej0rSW5maW5pdHk7dGhpcy5tYXgueD10aGlzLm1heC55PXRoaXMubWF4Lno9LUluZmluaXR5O3JldHVybiB0aGlzO31pc0VtcHR5KCl7Ly8gdGhpcyBpcyBhIG1vcmUgcm9idXN0IGNoZWNrIGZvciBlbXB0eSB0aGFuICggdm9sdW1lIDw9IDAgKSBiZWNhdXNlIHZvbHVtZSBjYW4gZ2V0IHBvc2l0aXZlIHdpdGggdHdvIG5lZ2F0aXZlIGF4ZXMKCXJldHVybiB0aGlzLm1heC54PHRoaXMubWluLnh8fHRoaXMubWF4Lnk8dGhpcy5taW4ueXx8dGhpcy5tYXguejx0aGlzLm1pbi56O31nZXRDZW50ZXIodGFyZ2V0KXtyZXR1cm4gdGhpcy5pc0VtcHR5KCk/dGFyZ2V0LnNldCgwLDAsMCk6dGFyZ2V0LmFkZFZlY3RvcnModGhpcy5taW4sdGhpcy5tYXgpLm11bHRpcGx5U2NhbGFyKDAuNSk7fWdldFNpemUodGFyZ2V0KXtyZXR1cm4gdGhpcy5pc0VtcHR5KCk/dGFyZ2V0LnNldCgwLDAsMCk6dGFyZ2V0LnN1YlZlY3RvcnModGhpcy5tYXgsdGhpcy5taW4pO31leHBhbmRCeVBvaW50KHBvaW50KXt0aGlzLm1pbi5taW4ocG9pbnQpO3RoaXMubWF4Lm1heChwb2ludCk7cmV0dXJuIHRoaXM7fWV4cGFuZEJ5VmVjdG9yKHZlY3Rvcil7dGhpcy5taW4uc3ViKHZlY3Rvcik7dGhpcy5tYXguYWRkKHZlY3Rvcik7cmV0dXJuIHRoaXM7fWV4cGFuZEJ5U2NhbGFyKHNjYWxhcil7dGhpcy5taW4uYWRkU2NhbGFyKC1zY2FsYXIpO3RoaXMubWF4LmFkZFNjYWxhcihzY2FsYXIpO3JldHVybiB0aGlzO31leHBhbmRCeU9iamVjdChvYmplY3Qpey8vIENvbXB1dGVzIHRoZSB3b3JsZC1heGlzLWFsaWduZWQgYm91bmRpbmcgYm94IG9mIGFuIG9iamVjdCAoaW5jbHVkaW5nIGl0cyBjaGlsZHJlbiksCgkvLyBhY2NvdW50aW5nIGZvciBib3RoIHRoZSBvYmplY3QncywgYW5kIGNoaWxkcmVuJ3MsIHdvcmxkIHRyYW5zZm9ybXMKCW9iamVjdC51cGRhdGVXb3JsZE1hdHJpeChmYWxzZSxmYWxzZSk7Y29uc3QgZ2VvbWV0cnk9b2JqZWN0Lmdlb21ldHJ5O2lmKGdlb21ldHJ5IT09dW5kZWZpbmVkKXtpZihnZW9tZXRyeS5ib3VuZGluZ0JveD09PW51bGwpe2dlb21ldHJ5LmNvbXB1dGVCb3VuZGluZ0JveCgpO31fYm94JDMuY29weShnZW9tZXRyeS5ib3VuZGluZ0JveCk7X2JveCQzLmFwcGx5TWF0cml4NChvYmplY3QubWF0cml4V29ybGQpO3RoaXMudW5pb24oX2JveCQzKTt9Y29uc3QgY2hpbGRyZW49b2JqZWN0LmNoaWxkcmVuO2ZvcihsZXQgaT0wLGw9Y2hpbGRyZW4ubGVuZ3RoO2k8bDtpKyspe3RoaXMuZXhwYW5kQnlPYmplY3QoY2hpbGRyZW5baV0pO31yZXR1cm4gdGhpczt9Y29udGFpbnNQb2ludChwb2ludCl7cmV0dXJuIHBvaW50Lng8dGhpcy5taW4ueHx8cG9pbnQueD50aGlzLm1heC54fHxwb2ludC55PHRoaXMubWluLnl8fHBvaW50Lnk+dGhpcy5tYXgueXx8cG9pbnQuejx0aGlzLm1pbi56fHxwb2ludC56PnRoaXMubWF4Lno/ZmFsc2U6dHJ1ZTt9Y29udGFpbnNCb3goYm94KXtyZXR1cm4gdGhpcy5taW4ueDw9Ym94Lm1pbi54JiZib3gubWF4Lng8PXRoaXMubWF4LngmJnRoaXMubWluLnk8PWJveC5taW4ueSYmYm94Lm1heC55PD10aGlzLm1heC55JiZ0aGlzLm1pbi56PD1ib3gubWluLnomJmJveC5tYXguejw9dGhpcy5tYXguejt9Z2V0UGFyYW1ldGVyKHBvaW50LHRhcmdldCl7Ly8gVGhpcyBjYW4gcG90ZW50aWFsbHkgaGF2ZSBhIGRpdmlkZSBieSB6ZXJvIGlmIHRoZSBib3gKCS8vIGhhcyBhIHNpemUgZGltZW5zaW9uIG9mIDAuCglyZXR1cm4gdGFyZ2V0LnNldCgocG9pbnQueC10aGlzLm1pbi54KS8odGhpcy5tYXgueC10aGlzLm1pbi54KSwocG9pbnQueS10aGlzLm1pbi55KS8odGhpcy5tYXgueS10aGlzLm1pbi55KSwocG9pbnQuei10aGlzLm1pbi56KS8odGhpcy5tYXguei10aGlzLm1pbi56KSk7fWludGVyc2VjdHNCb3goYm94KXsvLyB1c2luZyA2IHNwbGl0dGluZyBwbGFuZXMgdG8gcnVsZSBvdXQgaW50ZXJzZWN0aW9ucy4KCXJldHVybiBib3gubWF4Lng8dGhpcy5taW4ueHx8Ym94Lm1pbi54PnRoaXMubWF4Lnh8fGJveC5tYXgueTx0aGlzLm1pbi55fHxib3gubWluLnk+dGhpcy5tYXgueXx8Ym94Lm1heC56PHRoaXMubWluLnp8fGJveC5taW4uej50aGlzLm1heC56P2ZhbHNlOnRydWU7fWludGVyc2VjdHNTcGhlcmUoc3BoZXJlKXsvLyBGaW5kIHRoZSBwb2ludCBvbiB0aGUgQUFCQiBjbG9zZXN0IHRvIHRoZSBzcGhlcmUgY2VudGVyLgoJdGhpcy5jbGFtcFBvaW50KHNwaGVyZS5jZW50ZXIsX3ZlY3RvciRiKTsvLyBJZiB0aGF0IHBvaW50IGlzIGluc2lkZSB0aGUgc3BoZXJlLCB0aGUgQUFCQiBhbmQgc3BoZXJlIGludGVyc2VjdC4KCXJldHVybiBfdmVjdG9yJGIuZGlzdGFuY2VUb1NxdWFyZWQoc3BoZXJlLmNlbnRlcik8PXNwaGVyZS5yYWRpdXMqc3BoZXJlLnJhZGl1czt9aW50ZXJzZWN0c1BsYW5lKHBsYW5lKXsvLyBXZSBjb21wdXRlIHRoZSBtaW5pbXVtIGFuZCBtYXhpbXVtIGRvdCBwcm9kdWN0IHZhbHVlcy4gSWYgdGhvc2UgdmFsdWVzCgkvLyBhcmUgb24gdGhlIHNhbWUgc2lkZSAoYmFjayBvciBmcm9udCkgb2YgdGhlIHBsYW5lLCB0aGVuIHRoZXJlIGlzIG5vIGludGVyc2VjdGlvbi4KCWxldCBtaW4sbWF4O2lmKHBsYW5lLm5vcm1hbC54PjApe21pbj1wbGFuZS5ub3JtYWwueCp0aGlzLm1pbi54O21heD1wbGFuZS5ub3JtYWwueCp0aGlzLm1heC54O31lbHNlIHttaW49cGxhbmUubm9ybWFsLngqdGhpcy5tYXgueDttYXg9cGxhbmUubm9ybWFsLngqdGhpcy5taW4ueDt9aWYocGxhbmUubm9ybWFsLnk+MCl7bWluKz1wbGFuZS5ub3JtYWwueSp0aGlzLm1pbi55O21heCs9cGxhbmUubm9ybWFsLnkqdGhpcy5tYXgueTt9ZWxzZSB7bWluKz1wbGFuZS5ub3JtYWwueSp0aGlzLm1heC55O21heCs9cGxhbmUubm9ybWFsLnkqdGhpcy5taW4ueTt9aWYocGxhbmUubm9ybWFsLno+MCl7bWluKz1wbGFuZS5ub3JtYWwueip0aGlzLm1pbi56O21heCs9cGxhbmUubm9ybWFsLnoqdGhpcy5tYXguejt9ZWxzZSB7bWluKz1wbGFuZS5ub3JtYWwueip0aGlzLm1heC56O21heCs9cGxhbmUubm9ybWFsLnoqdGhpcy5taW4uejt9cmV0dXJuIG1pbjw9LXBsYW5lLmNvbnN0YW50JiZtYXg+PS1wbGFuZS5jb25zdGFudDt9aW50ZXJzZWN0c1RyaWFuZ2xlKHRyaWFuZ2xlKXtpZih0aGlzLmlzRW1wdHkoKSl7cmV0dXJuIGZhbHNlO30vLyBjb21wdXRlIGJveCBjZW50ZXIgYW5kIGV4dGVudHMKCXRoaXMuZ2V0Q2VudGVyKF9jZW50ZXIpO19leHRlbnRzLnN1YlZlY3RvcnModGhpcy5tYXgsX2NlbnRlcik7Ly8gdHJhbnNsYXRlIHRyaWFuZ2xlIHRvIGFhYmIgb3JpZ2luCglfdjAkMi5zdWJWZWN0b3JzKHRyaWFuZ2xlLmEsX2NlbnRlcik7X3YxJDcuc3ViVmVjdG9ycyh0cmlhbmdsZS5iLF9jZW50ZXIpO192MiQzLnN1YlZlY3RvcnModHJpYW5nbGUuYyxfY2VudGVyKTsvLyBjb21wdXRlIGVkZ2UgdmVjdG9ycyBmb3IgdHJpYW5nbGUKCV9mMC5zdWJWZWN0b3JzKF92MSQ3LF92MCQyKTtfZjEuc3ViVmVjdG9ycyhfdjIkMyxfdjEkNyk7X2YyLnN1YlZlY3RvcnMoX3YwJDIsX3YyJDMpOy8vIHRlc3QgYWdhaW5zdCBheGVzIHRoYXQgYXJlIGdpdmVuIGJ5IGNyb3NzIHByb2R1Y3QgY29tYmluYXRpb25zIG9mIHRoZSBlZGdlcyBvZiB0aGUgdHJpYW5nbGUgYW5kIHRoZSBlZGdlcyBvZiB0aGUgYWFiYgoJLy8gbWFrZSBhbiBheGlzIHRlc3Rpbmcgb2YgZWFjaCBvZiB0aGUgMyBzaWRlcyBvZiB0aGUgYWFiYiBhZ2FpbnN0IGVhY2ggb2YgdGhlIDMgc2lkZXMgb2YgdGhlIHRyaWFuZ2xlID0gOSBheGlzIG9mIHNlcGFyYXRpb24KCS8vIGF4aXNfaWogPSB1X2kgeCBmX2ogKHUwLCB1MSwgdTIgPSBmYWNlIG5vcm1hbHMgb2YgYWFiYiA9IHgseSx6IGF4ZXMgdmVjdG9ycyBzaW5jZSBhYWJiIGlzIGF4aXMgYWxpZ25lZCkKCWxldCBheGVzPVswLC1fZjAueixfZjAueSwwLC1fZjEueixfZjEueSwwLC1fZjIueixfZjIueSxfZjAueiwwLC1fZjAueCxfZjEueiwwLC1fZjEueCxfZjIueiwwLC1fZjIueCwtX2YwLnksX2YwLngsMCwtX2YxLnksX2YxLngsMCwtX2YyLnksX2YyLngsMF07aWYoIXNhdEZvckF4ZXMoYXhlcyxfdjAkMixfdjEkNyxfdjIkMyxfZXh0ZW50cykpe3JldHVybiBmYWxzZTt9Ly8gdGVzdCAzIGZhY2Ugbm9ybWFscyBmcm9tIHRoZSBhYWJiCglheGVzPVsxLDAsMCwwLDEsMCwwLDAsMV07aWYoIXNhdEZvckF4ZXMoYXhlcyxfdjAkMixfdjEkNyxfdjIkMyxfZXh0ZW50cykpe3JldHVybiBmYWxzZTt9Ly8gZmluYWxseSB0ZXN0aW5nIHRoZSBmYWNlIG5vcm1hbCBvZiB0aGUgdHJpYW5nbGUKCS8vIHVzZSBhbHJlYWR5IGV4aXN0aW5nIHRyaWFuZ2xlIGVkZ2UgdmVjdG9ycyBoZXJlCglfdHJpYW5nbGVOb3JtYWwuY3Jvc3NWZWN0b3JzKF9mMCxfZjEpO2F4ZXM9W190cmlhbmdsZU5vcm1hbC54LF90cmlhbmdsZU5vcm1hbC55LF90cmlhbmdsZU5vcm1hbC56XTtyZXR1cm4gc2F0Rm9yQXhlcyhheGVzLF92MCQyLF92MSQ3LF92MiQzLF9leHRlbnRzKTt9Y2xhbXBQb2ludChwb2ludCx0YXJnZXQpe3JldHVybiB0YXJnZXQuY29weShwb2ludCkuY2xhbXAodGhpcy5taW4sdGhpcy5tYXgpO31kaXN0YW5jZVRvUG9pbnQocG9pbnQpe2NvbnN0IGNsYW1wZWRQb2ludD1fdmVjdG9yJGIuY29weShwb2ludCkuY2xhbXAodGhpcy5taW4sdGhpcy5tYXgpO3JldHVybiBjbGFtcGVkUG9pbnQuc3ViKHBvaW50KS5sZW5ndGgoKTt9Z2V0Qm91bmRpbmdTcGhlcmUodGFyZ2V0KXt0aGlzLmdldENlbnRlcih0YXJnZXQuY2VudGVyKTt0YXJnZXQucmFkaXVzPXRoaXMuZ2V0U2l6ZShfdmVjdG9yJGIpLmxlbmd0aCgpKjAuNTtyZXR1cm4gdGFyZ2V0O31pbnRlcnNlY3QoYm94KXt0aGlzLm1pbi5tYXgoYm94Lm1pbik7dGhpcy5tYXgubWluKGJveC5tYXgpOy8vIGVuc3VyZSB0aGF0IGlmIHRoZXJlIGlzIG5vIG92ZXJsYXAsIHRoZSByZXN1bHQgaXMgZnVsbHkgZW1wdHksIG5vdCBzbGlnaHRseSBlbXB0eSB3aXRoIG5vbi1pbmYvK2luZiB2YWx1ZXMgdGhhdCB3aWxsIGNhdXNlIHN1YnNlcXVlbmNlIGludGVyc2VjdHMgdG8gZXJyb25lb3VzbHkgcmV0dXJuIHZhbGlkIHZhbHVlcy4KCWlmKHRoaXMuaXNFbXB0eSgpKXRoaXMubWFrZUVtcHR5KCk7cmV0dXJuIHRoaXM7fXVuaW9uKGJveCl7dGhpcy5taW4ubWluKGJveC5taW4pO3RoaXMubWF4Lm1heChib3gubWF4KTtyZXR1cm4gdGhpczt9YXBwbHlNYXRyaXg0KG1hdHJpeCl7Ly8gdHJhbnNmb3JtIG9mIGVtcHR5IGJveCBpcyBhbiBlbXB0eSBib3guCglpZih0aGlzLmlzRW1wdHkoKSlyZXR1cm4gdGhpczsvLyBOT1RFOiBJIGFtIHVzaW5nIGEgYmluYXJ5IHBhdHRlcm4gdG8gc3BlY2lmeSBhbGwgMl4zIGNvbWJpbmF0aW9ucyBiZWxvdwoJX3BvaW50c1swXS5zZXQodGhpcy5taW4ueCx0aGlzLm1pbi55LHRoaXMubWluLnopLmFwcGx5TWF0cml4NChtYXRyaXgpOy8vIDAwMAoJX3BvaW50c1sxXS5zZXQodGhpcy5taW4ueCx0aGlzLm1pbi55LHRoaXMubWF4LnopLmFwcGx5TWF0cml4NChtYXRyaXgpOy8vIDAwMQoJX3BvaW50c1syXS5zZXQodGhpcy5taW4ueCx0aGlzLm1heC55LHRoaXMubWluLnopLmFwcGx5TWF0cml4NChtYXRyaXgpOy8vIDAxMAoJX3BvaW50c1szXS5zZXQodGhpcy5taW4ueCx0aGlzLm1heC55LHRoaXMubWF4LnopLmFwcGx5TWF0cml4NChtYXRyaXgpOy8vIDAxMQoJX3BvaW50c1s0XS5zZXQodGhpcy5tYXgueCx0aGlzLm1pbi55LHRoaXMubWluLnopLmFwcGx5TWF0cml4NChtYXRyaXgpOy8vIDEwMAoJX3BvaW50c1s1XS5zZXQodGhpcy5tYXgueCx0aGlzLm1pbi55LHRoaXMubWF4LnopLmFwcGx5TWF0cml4NChtYXRyaXgpOy8vIDEwMQoJX3BvaW50c1s2XS5zZXQodGhpcy5tYXgueCx0aGlzLm1heC55LHRoaXMubWluLnopLmFwcGx5TWF0cml4NChtYXRyaXgpOy8vIDExMAoJX3BvaW50c1s3XS5zZXQodGhpcy5tYXgueCx0aGlzLm1heC55LHRoaXMubWF4LnopLmFwcGx5TWF0cml4NChtYXRyaXgpOy8vIDExMQoJdGhpcy5zZXRGcm9tUG9pbnRzKF9wb2ludHMpO3JldHVybiB0aGlzO310cmFuc2xhdGUob2Zmc2V0KXt0aGlzLm1pbi5hZGQob2Zmc2V0KTt0aGlzLm1heC5hZGQob2Zmc2V0KTtyZXR1cm4gdGhpczt9ZXF1YWxzKGJveCl7cmV0dXJuIGJveC5taW4uZXF1YWxzKHRoaXMubWluKSYmYm94Lm1heC5lcXVhbHModGhpcy5tYXgpO319Qm94My5wcm90b3R5cGUuaXNCb3gzPXRydWU7Y29uc3QgX3BvaW50cz1bLypAX19QVVJFX18qL25ldyBWZWN0b3IzKCksLypAX19QVVJFX18qL25ldyBWZWN0b3IzKCksLypAX19QVVJFX18qL25ldyBWZWN0b3IzKCksLypAX19QVVJFX18qL25ldyBWZWN0b3IzKCksLypAX19QVVJFX18qL25ldyBWZWN0b3IzKCksLypAX19QVVJFX18qL25ldyBWZWN0b3IzKCksLypAX19QVVJFX18qL25ldyBWZWN0b3IzKCksLypAX19QVVJFX18qL25ldyBWZWN0b3IzKCldO2NvbnN0IF92ZWN0b3IkYj0vKkBfX1BVUkVfXyovbmV3IFZlY3RvcjMoKTtjb25zdCBfYm94JDM9LypAX19QVVJFX18qL25ldyBCb3gzKCk7Ly8gdHJpYW5nbGUgY2VudGVyZWQgdmVydGljZXMKCWNvbnN0IF92MCQyPS8qQF9fUFVSRV9fKi9uZXcgVmVjdG9yMygpO2NvbnN0IF92MSQ3PS8qQF9fUFVSRV9fKi9uZXcgVmVjdG9yMygpO2NvbnN0IF92MiQzPS8qQF9fUFVSRV9fKi9uZXcgVmVjdG9yMygpOy8vIHRyaWFuZ2xlIGVkZ2UgdmVjdG9ycwoJY29uc3QgX2YwPS8qQF9fUFVSRV9fKi9uZXcgVmVjdG9yMygpO2NvbnN0IF9mMT0vKkBfX1BVUkVfXyovbmV3IFZlY3RvcjMoKTtjb25zdCBfZjI9LypAX19QVVJFX18qL25ldyBWZWN0b3IzKCk7Y29uc3QgX2NlbnRlcj0vKkBfX1BVUkVfXyovbmV3IFZlY3RvcjMoKTtjb25zdCBfZXh0ZW50cz0vKkBfX1BVUkVfXyovbmV3IFZlY3RvcjMoKTtjb25zdCBfdHJpYW5nbGVOb3JtYWw9LypAX19QVVJFX18qL25ldyBWZWN0b3IzKCk7Y29uc3QgX3Rlc3RBeGlzPS8qQF9fUFVSRV9fKi9uZXcgVmVjdG9yMygpO2Z1bmN0aW9uIHNhdEZvckF4ZXMoYXhlcyx2MCx2MSx2MixleHRlbnRzKXtmb3IobGV0IGk9MCxqPWF4ZXMubGVuZ3RoLTM7aTw9ajtpKz0zKXtfdGVzdEF4aXMuZnJvbUFycmF5KGF4ZXMsaSk7Ly8gcHJvamVjdCB0aGUgYWFiYiBvbnRvIHRoZSBzZXBlcmF0aW5nIGF4aXMKCWNvbnN0IHI9ZXh0ZW50cy54Kk1hdGguYWJzKF90ZXN0QXhpcy54KStleHRlbnRzLnkqTWF0aC5hYnMoX3Rlc3RBeGlzLnkpK2V4dGVudHMueipNYXRoLmFicyhfdGVzdEF4aXMueik7Ly8gcHJvamVjdCBhbGwgMyB2ZXJ0aWNlcyBvZiB0aGUgdHJpYW5nbGUgb250byB0aGUgc2VwZXJhdGluZyBheGlzCgljb25zdCBwMD12MC5kb3QoX3Rlc3RBeGlzKTtjb25zdCBwMT12MS5kb3QoX3Rlc3RBeGlzKTtjb25zdCBwMj12Mi5kb3QoX3Rlc3RBeGlzKTsvLyBhY3R1YWwgdGVzdCwgYmFzaWNhbGx5IHNlZSBpZiBlaXRoZXIgb2YgdGhlIG1vc3QgZXh0cmVtZSBvZiB0aGUgdHJpYW5nbGUgcG9pbnRzIGludGVyc2VjdHMgcgoJaWYoTWF0aC5tYXgoLU1hdGgubWF4KHAwLHAxLHAyKSxNYXRoLm1pbihwMCxwMSxwMikpPnIpey8vIHBvaW50cyBvZiB0aGUgcHJvamVjdGVkIHRyaWFuZ2xlIGFyZSBvdXRzaWRlIHRoZSBwcm9qZWN0ZWQgaGFsZi1sZW5ndGggb2YgdGhlIGFhYmIKCS8vIHRoZSBheGlzIGlzIHNlcGVyYXRpbmcgYW5kIHdlIGNhbiBleGl0CglyZXR1cm4gZmFsc2U7fX1yZXR1cm4gdHJ1ZTt9Y29uc3QgX2JveCQyPS8qQF9fUFVSRV9fKi9uZXcgQm94MygpO2NvbnN0IF92MSQ2PS8qQF9fUFVSRV9fKi9uZXcgVmVjdG9yMygpO2NvbnN0IF90b0ZhcnRoZXN0UG9pbnQ9LypAX19QVVJFX18qL25ldyBWZWN0b3IzKCk7Y29uc3QgX3RvUG9pbnQ9LypAX19QVVJFX18qL25ldyBWZWN0b3IzKCk7Y2xhc3MgU3BoZXJle2NvbnN0cnVjdG9yKGNlbnRlcixyYWRpdXMpe2lmKGNlbnRlcj09PXZvaWQgMCl7Y2VudGVyPW5ldyBWZWN0b3IzKCk7fWlmKHJhZGl1cz09PXZvaWQgMCl7cmFkaXVzPS0xO310aGlzLmNlbnRlcj1jZW50ZXI7dGhpcy5yYWRpdXM9cmFkaXVzO31zZXQoY2VudGVyLHJhZGl1cyl7dGhpcy5jZW50ZXIuY29weShjZW50ZXIpO3RoaXMucmFkaXVzPXJhZGl1cztyZXR1cm4gdGhpczt9c2V0RnJvbVBvaW50cyhwb2ludHMsb3B0aW9uYWxDZW50ZXIpe2NvbnN0IGNlbnRlcj10aGlzLmNlbnRlcjtpZihvcHRpb25hbENlbnRlciE9PXVuZGVmaW5lZCl7Y2VudGVyLmNvcHkob3B0aW9uYWxDZW50ZXIpO31lbHNlIHtfYm94JDIuc2V0RnJvbVBvaW50cyhwb2ludHMpLmdldENlbnRlcihjZW50ZXIpO31sZXQgbWF4UmFkaXVzU3E9MDtmb3IobGV0IGk9MCxpbD1wb2ludHMubGVuZ3RoO2k8aWw7aSsrKXttYXhSYWRpdXNTcT1NYXRoLm1heChtYXhSYWRpdXNTcSxjZW50ZXIuZGlzdGFuY2VUb1NxdWFyZWQocG9pbnRzW2ldKSk7fXRoaXMucmFkaXVzPU1hdGguc3FydChtYXhSYWRpdXNTcSk7cmV0dXJuIHRoaXM7fWNvcHkoc3BoZXJlKXt0aGlzLmNlbnRlci5jb3B5KHNwaGVyZS5jZW50ZXIpO3RoaXMucmFkaXVzPXNwaGVyZS5yYWRpdXM7cmV0dXJuIHRoaXM7fWlzRW1wdHkoKXtyZXR1cm4gdGhpcy5yYWRpdXM8MDt9bWFrZUVtcHR5KCl7dGhpcy5jZW50ZXIuc2V0KDAsMCwwKTt0aGlzLnJhZGl1cz0tMTtyZXR1cm4gdGhpczt9Y29udGFpbnNQb2ludChwb2ludCl7cmV0dXJuIHBvaW50LmRpc3RhbmNlVG9TcXVhcmVkKHRoaXMuY2VudGVyKTw9dGhpcy5yYWRpdXMqdGhpcy5yYWRpdXM7fWRpc3RhbmNlVG9Qb2ludChwb2ludCl7cmV0dXJuIHBvaW50LmRpc3RhbmNlVG8odGhpcy5jZW50ZXIpLXRoaXMucmFkaXVzO31pbnRlcnNlY3RzU3BoZXJlKHNwaGVyZSl7Y29uc3QgcmFkaXVzU3VtPXRoaXMucmFkaXVzK3NwaGVyZS5yYWRpdXM7cmV0dXJuIHNwaGVyZS5jZW50ZXIuZGlzdGFuY2VUb1NxdWFyZWQodGhpcy5jZW50ZXIpPD1yYWRpdXNTdW0qcmFkaXVzU3VtO31pbnRlcnNlY3RzQm94KGJveCl7cmV0dXJuIGJveC5pbnRlcnNlY3RzU3BoZXJlKHRoaXMpO31pbnRlcnNlY3RzUGxhbmUocGxhbmUpe3JldHVybiBNYXRoLmFicyhwbGFuZS5kaXN0YW5jZVRvUG9pbnQodGhpcy5jZW50ZXIpKTw9dGhpcy5yYWRpdXM7fWNsYW1wUG9pbnQocG9pbnQsdGFyZ2V0KXtjb25zdCBkZWx0YUxlbmd0aFNxPXRoaXMuY2VudGVyLmRpc3RhbmNlVG9TcXVhcmVkKHBvaW50KTt0YXJnZXQuY29weShwb2ludCk7aWYoZGVsdGFMZW5ndGhTcT50aGlzLnJhZGl1cyp0aGlzLnJhZGl1cyl7dGFyZ2V0LnN1Yih0aGlzLmNlbnRlcikubm9ybWFsaXplKCk7dGFyZ2V0Lm11bHRpcGx5U2NhbGFyKHRoaXMucmFkaXVzKS5hZGQodGhpcy5jZW50ZXIpO31yZXR1cm4gdGFyZ2V0O31nZXRCb3VuZGluZ0JveCh0YXJnZXQpe2lmKHRoaXMuaXNFbXB0eSgpKXsvLyBFbXB0eSBzcGhlcmUgcHJvZHVjZXMgZW1wdHkgYm91bmRpbmcgYm94Cgl0YXJnZXQubWFrZUVtcHR5KCk7cmV0dXJuIHRhcmdldDt9dGFyZ2V0LnNldCh0aGlzLmNlbnRlcix0aGlzLmNlbnRlcik7dGFyZ2V0LmV4cGFuZEJ5U2NhbGFyKHRoaXMucmFkaXVzKTtyZXR1cm4gdGFyZ2V0O31hcHBseU1hdHJpeDQobWF0cml4KXt0aGlzLmNlbnRlci5hcHBseU1hdHJpeDQobWF0cml4KTt0aGlzLnJhZGl1cz10aGlzLnJhZGl1cyptYXRyaXguZ2V0TWF4U2NhbGVPbkF4aXMoKTtyZXR1cm4gdGhpczt9dHJhbnNsYXRlKG9mZnNldCl7dGhpcy5jZW50ZXIuYWRkKG9mZnNldCk7cmV0dXJuIHRoaXM7fWV4cGFuZEJ5UG9pbnQocG9pbnQpey8vIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL2p1ai9NYXRoR2VvTGliL2Jsb2IvMjk0MGI5OWI5OWNmZTU3NWRkNDUxMDNlZjIwZjQwMTlkZWUxNWI1NC9zcmMvR2VvbWV0cnkvU3BoZXJlLmNwcCNMNjQ5LUw2NzEKCV90b1BvaW50LnN1YlZlY3RvcnMocG9pbnQsdGhpcy5jZW50ZXIpO2NvbnN0IGxlbmd0aFNxPV90b1BvaW50Lmxlbmd0aFNxKCk7aWYobGVuZ3RoU3E+dGhpcy5yYWRpdXMqdGhpcy5yYWRpdXMpe2NvbnN0IGxlbmd0aD1NYXRoLnNxcnQobGVuZ3RoU3EpO2NvbnN0IG1pc3NpbmdSYWRpdXNIYWxmPShsZW5ndGgtdGhpcy5yYWRpdXMpKjAuNTsvLyBOdWRnZSB0aGlzIHNwaGVyZSB0b3dhcmRzIHRoZSB0YXJnZXQgcG9pbnQuIEFkZCBoYWxmIHRoZSBtaXNzaW5nIGRpc3RhbmNlIHRvIHJhZGl1cywKCS8vIGFuZCB0aGUgb3RoZXIgaGFsZiB0byBwb3NpdGlvbi4gVGhpcyBnaXZlcyBhIHRpZ2h0ZXIgZW5jbG9zdXJlLCBpbnN0ZWFkIG9mIGlmCgkvLyB0aGUgd2hvbGUgbWlzc2luZyBkaXN0YW5jZSB3ZXJlIGp1c3QgYWRkZWQgdG8gcmFkaXVzLgoJdGhpcy5jZW50ZXIuYWRkKF90b1BvaW50Lm11bHRpcGx5U2NhbGFyKG1pc3NpbmdSYWRpdXNIYWxmL2xlbmd0aCkpO3RoaXMucmFkaXVzKz1taXNzaW5nUmFkaXVzSGFsZjt9cmV0dXJuIHRoaXM7fXVuaW9uKHNwaGVyZSl7Ly8gZnJvbSBodHRwczovL2dpdGh1Yi5jb20vanVqL01hdGhHZW9MaWIvYmxvYi8yOTQwYjk5Yjk5Y2ZlNTc1ZGQ0NTEwM2VmMjBmNDAxOWRlZTE1YjU0L3NyYy9HZW9tZXRyeS9TcGhlcmUuY3BwI0w3NTktTDc2OQoJLy8gVG8gZW5jbG9zZSBhbm90aGVyIHNwaGVyZSBpbnRvIHRoaXMgc3BoZXJlLCB3ZSBvbmx5IG5lZWQgdG8gZW5jbG9zZSB0d28gcG9pbnRzOgoJLy8gMSkgRW5jbG9zZSB0aGUgZmFydGhlc3QgcG9pbnQgb24gdGhlIG90aGVyIHNwaGVyZSBpbnRvIHRoaXMgc3BoZXJlLgoJLy8gMikgRW5jbG9zZSB0aGUgb3Bwb3NpdGUgcG9pbnQgb2YgdGhlIGZhcnRoZXN0IHBvaW50IGludG8gdGhpcyBzcGhlcmUuCglfdG9GYXJ0aGVzdFBvaW50LnN1YlZlY3RvcnMoc3BoZXJlLmNlbnRlcix0aGlzLmNlbnRlcikubm9ybWFsaXplKCkubXVsdGlwbHlTY2FsYXIoc3BoZXJlLnJhZGl1cyk7dGhpcy5leHBhbmRCeVBvaW50KF92MSQ2LmNvcHkoc3BoZXJlLmNlbnRlcikuYWRkKF90b0ZhcnRoZXN0UG9pbnQpKTt0aGlzLmV4cGFuZEJ5UG9pbnQoX3YxJDYuY29weShzcGhlcmUuY2VudGVyKS5zdWIoX3RvRmFydGhlc3RQb2ludCkpO3JldHVybiB0aGlzO31lcXVhbHMoc3BoZXJlKXtyZXR1cm4gc3BoZXJlLmNlbnRlci5lcXVhbHModGhpcy5jZW50ZXIpJiZzcGhlcmUucmFkaXVzPT09dGhpcy5yYWRpdXM7fWNsb25lKCl7cmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKCkuY29weSh0aGlzKTt9fWNvbnN0IF92ZWN0b3IkYT0vKkBfX1BVUkVfXyovbmV3IFZlY3RvcjMoKTtjb25zdCBfc2VnQ2VudGVyPS8qQF9fUFVSRV9fKi9uZXcgVmVjdG9yMygpO2NvbnN0IF9zZWdEaXI9LypAX19QVVJFX18qL25ldyBWZWN0b3IzKCk7Y29uc3QgX2RpZmY9LypAX19QVVJFX18qL25ldyBWZWN0b3IzKCk7Y29uc3QgX2VkZ2UxPS8qQF9fUFVSRV9fKi9uZXcgVmVjdG9yMygpO2NvbnN0IF9lZGdlMj0vKkBfX1BVUkVfXyovbmV3IFZlY3RvcjMoKTtjb25zdCBfbm9ybWFsJDE9LypAX19QVVJFX18qL25ldyBWZWN0b3IzKCk7Y2xhc3MgUmF5e2NvbnN0cnVjdG9yKG9yaWdpbixkaXJlY3Rpb24pe2lmKG9yaWdpbj09PXZvaWQgMCl7b3JpZ2luPW5ldyBWZWN0b3IzKCk7fWlmKGRpcmVjdGlvbj09PXZvaWQgMCl7ZGlyZWN0aW9uPW5ldyBWZWN0b3IzKDAsMCwtMSk7fXRoaXMub3JpZ2luPW9yaWdpbjt0aGlzLmRpcmVjdGlvbj1kaXJlY3Rpb247fXNldChvcmlnaW4sZGlyZWN0aW9uKXt0aGlzLm9yaWdpbi5jb3B5KG9yaWdpbik7dGhpcy5kaXJlY3Rpb24uY29weShkaXJlY3Rpb24pO3JldHVybiB0aGlzO31jb3B5KHJheSl7dGhpcy5vcmlnaW4uY29weShyYXkub3JpZ2luKTt0aGlzLmRpcmVjdGlvbi5jb3B5KHJheS5kaXJlY3Rpb24pO3JldHVybiB0aGlzO31hdCh0LHRhcmdldCl7cmV0dXJuIHRhcmdldC5jb3B5KHRoaXMuZGlyZWN0aW9uKS5tdWx0aXBseVNjYWxhcih0KS5hZGQodGhpcy5vcmlnaW4pO31sb29rQXQodil7dGhpcy5kaXJlY3Rpb24uY29weSh2KS5zdWIodGhpcy5vcmlnaW4pLm5vcm1hbGl6ZSgpO3JldHVybiB0aGlzO31yZWNhc3QodCl7dGhpcy5vcmlnaW4uY29weSh0aGlzLmF0KHQsX3ZlY3RvciRhKSk7cmV0dXJuIHRoaXM7fWNsb3Nlc3RQb2ludFRvUG9pbnQocG9pbnQsdGFyZ2V0KXt0YXJnZXQuc3ViVmVjdG9ycyhwb2ludCx0aGlzLm9yaWdpbik7Y29uc3QgZGlyZWN0aW9uRGlzdGFuY2U9dGFyZ2V0LmRvdCh0aGlzLmRpcmVjdGlvbik7aWYoZGlyZWN0aW9uRGlzdGFuY2U8MCl7cmV0dXJuIHRhcmdldC5jb3B5KHRoaXMub3JpZ2luKTt9cmV0dXJuIHRhcmdldC5jb3B5KHRoaXMuZGlyZWN0aW9uKS5tdWx0aXBseVNjYWxhcihkaXJlY3Rpb25EaXN0YW5jZSkuYWRkKHRoaXMub3JpZ2luKTt9ZGlzdGFuY2VUb1BvaW50KHBvaW50KXtyZXR1cm4gTWF0aC5zcXJ0KHRoaXMuZGlzdGFuY2VTcVRvUG9pbnQocG9pbnQpKTt9ZGlzdGFuY2VTcVRvUG9pbnQocG9pbnQpe2NvbnN0IGRpcmVjdGlvbkRpc3RhbmNlPV92ZWN0b3IkYS5zdWJWZWN0b3JzKHBvaW50LHRoaXMub3JpZ2luKS5kb3QodGhpcy5kaXJlY3Rpb24pOy8vIHBvaW50IGJlaGluZCB0aGUgcmF5CglpZihkaXJlY3Rpb25EaXN0YW5jZTwwKXtyZXR1cm4gdGhpcy5vcmlnaW4uZGlzdGFuY2VUb1NxdWFyZWQocG9pbnQpO31fdmVjdG9yJGEuY29weSh0aGlzLmRpcmVjdGlvbikubXVsdGlwbHlTY2FsYXIoZGlyZWN0aW9uRGlzdGFuY2UpLmFkZCh0aGlzLm9yaWdpbik7cmV0dXJuIF92ZWN0b3IkYS5kaXN0YW5jZVRvU3F1YXJlZChwb2ludCk7fWRpc3RhbmNlU3FUb1NlZ21lbnQodjAsdjEsb3B0aW9uYWxQb2ludE9uUmF5LG9wdGlvbmFsUG9pbnRPblNlZ21lbnQpey8vIGZyb20gaHR0cDovL3d3dy5nZW9tZXRyaWN0b29scy5jb20vR1RFbmdpbmUvSW5jbHVkZS9NYXRoZW1hdGljcy9HdGVEaXN0UmF5U2VnbWVudC5oCgkvLyBJdCByZXR1cm5zIHRoZSBtaW4gZGlzdGFuY2UgYmV0d2VlbiB0aGUgcmF5IGFuZCB0aGUgc2VnbWVudAoJLy8gZGVmaW5lZCBieSB2MCBhbmQgdjEKCS8vIEl0IGNhbiBhbHNvIHNldCB0d28gb3B0aW9uYWwgdGFyZ2V0cyA6CgkvLyAtIFRoZSBjbG9zZXN0IHBvaW50IG9uIHRoZSByYXkKCS8vIC0gVGhlIGNsb3Nlc3QgcG9pbnQgb24gdGhlIHNlZ21lbnQKCV9zZWdDZW50ZXIuY29weSh2MCkuYWRkKHYxKS5tdWx0aXBseVNjYWxhcigwLjUpO19zZWdEaXIuY29weSh2MSkuc3ViKHYwKS5ub3JtYWxpemUoKTtfZGlmZi5jb3B5KHRoaXMub3JpZ2luKS5zdWIoX3NlZ0NlbnRlcik7Y29uc3Qgc2VnRXh0ZW50PXYwLmRpc3RhbmNlVG8odjEpKjAuNTtjb25zdCBhMDE9LXRoaXMuZGlyZWN0aW9uLmRvdChfc2VnRGlyKTtjb25zdCBiMD1fZGlmZi5kb3QodGhpcy5kaXJlY3Rpb24pO2NvbnN0IGIxPS1fZGlmZi5kb3QoX3NlZ0Rpcik7Y29uc3QgYz1fZGlmZi5sZW5ndGhTcSgpO2NvbnN0IGRldD1NYXRoLmFicygxLWEwMSphMDEpO2xldCBzMCxzMSxzcXJEaXN0LGV4dERldDtpZihkZXQ+MCl7Ly8gVGhlIHJheSBhbmQgc2VnbWVudCBhcmUgbm90IHBhcmFsbGVsLgoJczA9YTAxKmIxLWIwO3MxPWEwMSpiMC1iMTtleHREZXQ9c2VnRXh0ZW50KmRldDtpZihzMD49MCl7aWYoczE+PS1leHREZXQpe2lmKHMxPD1leHREZXQpey8vIHJlZ2lvbiAwCgkvLyBNaW5pbXVtIGF0IGludGVyaW9yIHBvaW50cyBvZiByYXkgYW5kIHNlZ21lbnQuCgljb25zdCBpbnZEZXQ9MS9kZXQ7czAqPWludkRldDtzMSo9aW52RGV0O3NxckRpc3Q9czAqKHMwK2EwMSpzMSsyKmIwKStzMSooYTAxKnMwK3MxKzIqYjEpK2M7fWVsc2Ugey8vIHJlZ2lvbiAxCglzMT1zZWdFeHRlbnQ7czA9TWF0aC5tYXgoMCwtKGEwMSpzMStiMCkpO3NxckRpc3Q9LXMwKnMwK3MxKihzMSsyKmIxKStjO319ZWxzZSB7Ly8gcmVnaW9uIDUKCXMxPS1zZWdFeHRlbnQ7czA9TWF0aC5tYXgoMCwtKGEwMSpzMStiMCkpO3NxckRpc3Q9LXMwKnMwK3MxKihzMSsyKmIxKStjO319ZWxzZSB7aWYoczE8PS1leHREZXQpey8vIHJlZ2lvbiA0CglzMD1NYXRoLm1heCgwLC0oLWEwMSpzZWdFeHRlbnQrYjApKTtzMT1zMD4wPy1zZWdFeHRlbnQ6TWF0aC5taW4oTWF0aC5tYXgoLXNlZ0V4dGVudCwtYjEpLHNlZ0V4dGVudCk7c3FyRGlzdD0tczAqczArczEqKHMxKzIqYjEpK2M7fWVsc2UgaWYoczE8PWV4dERldCl7Ly8gcmVnaW9uIDMKCXMwPTA7czE9TWF0aC5taW4oTWF0aC5tYXgoLXNlZ0V4dGVudCwtYjEpLHNlZ0V4dGVudCk7c3FyRGlzdD1zMSooczErMipiMSkrYzt9ZWxzZSB7Ly8gcmVnaW9uIDIKCXMwPU1hdGgubWF4KDAsLShhMDEqc2VnRXh0ZW50K2IwKSk7czE9czA+MD9zZWdFeHRlbnQ6TWF0aC5taW4oTWF0aC5tYXgoLXNlZ0V4dGVudCwtYjEpLHNlZ0V4dGVudCk7c3FyRGlzdD0tczAqczArczEqKHMxKzIqYjEpK2M7fX19ZWxzZSB7Ly8gUmF5IGFuZCBzZWdtZW50IGFyZSBwYXJhbGxlbC4KCXMxPWEwMT4wPy1zZWdFeHRlbnQ6c2VnRXh0ZW50O3MwPU1hdGgubWF4KDAsLShhMDEqczErYjApKTtzcXJEaXN0PS1zMCpzMCtzMSooczErMipiMSkrYzt9aWYob3B0aW9uYWxQb2ludE9uUmF5KXtvcHRpb25hbFBvaW50T25SYXkuY29weSh0aGlzLmRpcmVjdGlvbikubXVsdGlwbHlTY2FsYXIoczApLmFkZCh0aGlzLm9yaWdpbik7fWlmKG9wdGlvbmFsUG9pbnRPblNlZ21lbnQpe29wdGlvbmFsUG9pbnRPblNlZ21lbnQuY29weShfc2VnRGlyKS5tdWx0aXBseVNjYWxhcihzMSkuYWRkKF9zZWdDZW50ZXIpO31yZXR1cm4gc3FyRGlzdDt9aW50ZXJzZWN0U3BoZXJlKHNwaGVyZSx0YXJnZXQpe192ZWN0b3IkYS5zdWJWZWN0b3JzKHNwaGVyZS5jZW50ZXIsdGhpcy5vcmlnaW4pO2NvbnN0IHRjYT1fdmVjdG9yJGEuZG90KHRoaXMuZGlyZWN0aW9uKTtjb25zdCBkMj1fdmVjdG9yJGEuZG90KF92ZWN0b3IkYSktdGNhKnRjYTtjb25zdCByYWRpdXMyPXNwaGVyZS5yYWRpdXMqc3BoZXJlLnJhZGl1cztpZihkMj5yYWRpdXMyKXJldHVybiBudWxsO2NvbnN0IHRoYz1NYXRoLnNxcnQocmFkaXVzMi1kMik7Ly8gdDAgPSBmaXJzdCBpbnRlcnNlY3QgcG9pbnQgLSBlbnRyYW5jZSBvbiBmcm9udCBvZiBzcGhlcmUKCWNvbnN0IHQwPXRjYS10aGM7Ly8gdDEgPSBzZWNvbmQgaW50ZXJzZWN0IHBvaW50IC0gZXhpdCBwb2ludCBvbiBiYWNrIG9mIHNwaGVyZQoJY29uc3QgdDE9dGNhK3RoYzsvLyB0ZXN0IHRvIHNlZSBpZiBib3RoIHQwIGFuZCB0MSBhcmUgYmVoaW5kIHRoZSByYXkgLSBpZiBzbywgcmV0dXJuIG51bGwKCWlmKHQwPDAmJnQxPDApcmV0dXJuIG51bGw7Ly8gdGVzdCB0byBzZWUgaWYgdDAgaXMgYmVoaW5kIHRoZSByYXk6CgkvLyBpZiBpdCBpcywgdGhlIHJheSBpcyBpbnNpZGUgdGhlIHNwaGVyZSwgc28gcmV0dXJuIHRoZSBzZWNvbmQgZXhpdCBwb2ludCBzY2FsZWQgYnkgdDEsCgkvLyBpbiBvcmRlciB0byBhbHdheXMgcmV0dXJuIGFuIGludGVyc2VjdCBwb2ludCB0aGF0IGlzIGluIGZyb250IG9mIHRoZSByYXkuCglpZih0MDwwKXJldHVybiB0aGlzLmF0KHQxLHRhcmdldCk7Ly8gZWxzZSB0MCBpcyBpbiBmcm9udCBvZiB0aGUgcmF5LCBzbyByZXR1cm4gdGhlIGZpcnN0IGNvbGxpc2lvbiBwb2ludCBzY2FsZWQgYnkgdDAKCXJldHVybiB0aGlzLmF0KHQwLHRhcmdldCk7fWludGVyc2VjdHNTcGhlcmUoc3BoZXJlKXtyZXR1cm4gdGhpcy5kaXN0YW5jZVNxVG9Qb2ludChzcGhlcmUuY2VudGVyKTw9c3BoZXJlLnJhZGl1cypzcGhlcmUucmFkaXVzO31kaXN0YW5jZVRvUGxhbmUocGxhbmUpe2NvbnN0IGRlbm9taW5hdG9yPXBsYW5lLm5vcm1hbC5kb3QodGhpcy5kaXJlY3Rpb24pO2lmKGRlbm9taW5hdG9yPT09MCl7Ly8gbGluZSBpcyBjb3BsYW5hciwgcmV0dXJuIG9yaWdpbgoJaWYocGxhbmUuZGlzdGFuY2VUb1BvaW50KHRoaXMub3JpZ2luKT09PTApe3JldHVybiAwO30vLyBOdWxsIGlzIHByZWZlcmFibGUgdG8gdW5kZWZpbmVkIHNpbmNlIHVuZGVmaW5lZCBtZWFucy4uLi4gaXQgaXMgdW5kZWZpbmVkCglyZXR1cm4gbnVsbDt9Y29uc3QgdD0tKHRoaXMub3JpZ2luLmRvdChwbGFuZS5ub3JtYWwpK3BsYW5lLmNvbnN0YW50KS9kZW5vbWluYXRvcjsvLyBSZXR1cm4gaWYgdGhlIHJheSBuZXZlciBpbnRlcnNlY3RzIHRoZSBwbGFuZQoJcmV0dXJuIHQ+PTA/dDpudWxsO31pbnRlcnNlY3RQbGFuZShwbGFuZSx0YXJnZXQpe2NvbnN0IHQ9dGhpcy5kaXN0YW5jZVRvUGxhbmUocGxhbmUpO2lmKHQ9PT1udWxsKXtyZXR1cm4gbnVsbDt9cmV0dXJuIHRoaXMuYXQodCx0YXJnZXQpO31pbnRlcnNlY3RzUGxhbmUocGxhbmUpey8vIGNoZWNrIGlmIHRoZSByYXkgbGllcyBvbiB0aGUgcGxhbmUgZmlyc3QKCWNvbnN0IGRpc3RUb1BvaW50PXBsYW5lLmRpc3RhbmNlVG9Qb2ludCh0aGlzLm9yaWdpbik7aWYoZGlzdFRvUG9pbnQ9PT0wKXtyZXR1cm4gdHJ1ZTt9Y29uc3QgZGVub21pbmF0b3I9cGxhbmUubm9ybWFsLmRvdCh0aGlzLmRpcmVjdGlvbik7aWYoZGVub21pbmF0b3IqZGlzdFRvUG9pbnQ8MCl7cmV0dXJuIHRydWU7fS8vIHJheSBvcmlnaW4gaXMgYmVoaW5kIHRoZSBwbGFuZSAoYW5kIGlzIHBvaW50aW5nIGJlaGluZCBpdCkKCXJldHVybiBmYWxzZTt9aW50ZXJzZWN0Qm94KGJveCx0YXJnZXQpe2xldCB0bWluLHRtYXgsdHltaW4sdHltYXgsdHptaW4sdHptYXg7Y29uc3QgaW52ZGlyeD0xL3RoaXMuZGlyZWN0aW9uLngsaW52ZGlyeT0xL3RoaXMuZGlyZWN0aW9uLnksaW52ZGlyej0xL3RoaXMuZGlyZWN0aW9uLno7Y29uc3Qgb3JpZ2luPXRoaXMub3JpZ2luO2lmKGludmRpcng+PTApe3RtaW49KGJveC5taW4ueC1vcmlnaW4ueCkqaW52ZGlyeDt0bWF4PShib3gubWF4Lngtb3JpZ2luLngpKmludmRpcng7fWVsc2Uge3RtaW49KGJveC5tYXgueC1vcmlnaW4ueCkqaW52ZGlyeDt0bWF4PShib3gubWluLngtb3JpZ2luLngpKmludmRpcng7fWlmKGludmRpcnk+PTApe3R5bWluPShib3gubWluLnktb3JpZ2luLnkpKmludmRpcnk7dHltYXg9KGJveC5tYXgueS1vcmlnaW4ueSkqaW52ZGlyeTt9ZWxzZSB7dHltaW49KGJveC5tYXgueS1vcmlnaW4ueSkqaW52ZGlyeTt0eW1heD0oYm94Lm1pbi55LW9yaWdpbi55KSppbnZkaXJ5O31pZih0bWluPnR5bWF4fHx0eW1pbj50bWF4KXJldHVybiBudWxsOy8vIFRoZXNlIGxpbmVzIGFsc28gaGFuZGxlIHRoZSBjYXNlIHdoZXJlIHRtaW4gb3IgdG1heCBpcyBOYU4KCS8vIChyZXN1bHQgb2YgMCAqIEluZmluaXR5KS4geCAhPT0geCByZXR1cm5zIHRydWUgaWYgeCBpcyBOYU4KCWlmKHR5bWluPnRtaW58fHRtaW4hPT10bWluKXRtaW49dHltaW47aWYodHltYXg8dG1heHx8dG1heCE9PXRtYXgpdG1heD10eW1heDtpZihpbnZkaXJ6Pj0wKXt0em1pbj0oYm94Lm1pbi56LW9yaWdpbi56KSppbnZkaXJ6O3R6bWF4PShib3gubWF4Lnotb3JpZ2luLnopKmludmRpcno7fWVsc2Uge3R6bWluPShib3gubWF4Lnotb3JpZ2luLnopKmludmRpcno7dHptYXg9KGJveC5taW4uei1vcmlnaW4ueikqaW52ZGlyejt9aWYodG1pbj50em1heHx8dHptaW4+dG1heClyZXR1cm4gbnVsbDtpZih0em1pbj50bWlufHx0bWluIT09dG1pbil0bWluPXR6bWluO2lmKHR6bWF4PHRtYXh8fHRtYXghPT10bWF4KXRtYXg9dHptYXg7Ly9yZXR1cm4gcG9pbnQgY2xvc2VzdCB0byB0aGUgcmF5IChwb3NpdGl2ZSBzaWRlKQoJaWYodG1heDwwKXJldHVybiBudWxsO3JldHVybiB0aGlzLmF0KHRtaW4+PTA/dG1pbjp0bWF4LHRhcmdldCk7fWludGVyc2VjdHNCb3goYm94KXtyZXR1cm4gdGhpcy5pbnRlcnNlY3RCb3goYm94LF92ZWN0b3IkYSkhPT1udWxsO31pbnRlcnNlY3RUcmlhbmdsZShhLGIsYyxiYWNrZmFjZUN1bGxpbmcsdGFyZ2V0KXsvLyBDb21wdXRlIHRoZSBvZmZzZXQgb3JpZ2luLCBlZGdlcywgYW5kIG5vcm1hbC4KCS8vIGZyb20gaHR0cDovL3d3dy5nZW9tZXRyaWN0b29scy5jb20vR1RFbmdpbmUvSW5jbHVkZS9NYXRoZW1hdGljcy9HdGVJbnRyUmF5M1RyaWFuZ2xlMy5oCglfZWRnZTEuc3ViVmVjdG9ycyhiLGEpO19lZGdlMi5zdWJWZWN0b3JzKGMsYSk7X25vcm1hbCQxLmNyb3NzVmVjdG9ycyhfZWRnZTEsX2VkZ2UyKTsvLyBTb2x2ZSBRICsgdCpEID0gYjEqRTEgKyBiMipFMiAoUSA9IGtEaWZmLCBEID0gcmF5IGRpcmVjdGlvbiwKCS8vIEUxID0ga0VkZ2UxLCBFMiA9IGtFZGdlMiwgTiA9IENyb3NzKEUxLEUyKSkgYnkKCS8vICAgfERvdChELE4pfCpiMSA9IHNpZ24oRG90KEQsTikpKkRvdChELENyb3NzKFEsRTIpKQoJLy8gICB8RG90KEQsTil8KmIyID0gc2lnbihEb3QoRCxOKSkqRG90KEQsQ3Jvc3MoRTEsUSkpCgkvLyAgIHxEb3QoRCxOKXwqdCA9IC1zaWduKERvdChELE4pKSpEb3QoUSxOKQoJbGV0IERkTj10aGlzLmRpcmVjdGlvbi5kb3QoX25vcm1hbCQxKTtsZXQgc2lnbjtpZihEZE4+MCl7aWYoYmFja2ZhY2VDdWxsaW5nKXJldHVybiBudWxsO3NpZ249MTt9ZWxzZSBpZihEZE48MCl7c2lnbj0tMTtEZE49LURkTjt9ZWxzZSB7cmV0dXJuIG51bGw7fV9kaWZmLnN1YlZlY3RvcnModGhpcy5vcmlnaW4sYSk7Y29uc3QgRGRReEUyPXNpZ24qdGhpcy5kaXJlY3Rpb24uZG90KF9lZGdlMi5jcm9zc1ZlY3RvcnMoX2RpZmYsX2VkZ2UyKSk7Ly8gYjEgPCAwLCBubyBpbnRlcnNlY3Rpb24KCWlmKERkUXhFMjwwKXtyZXR1cm4gbnVsbDt9Y29uc3QgRGRFMXhRPXNpZ24qdGhpcy5kaXJlY3Rpb24uZG90KF9lZGdlMS5jcm9zcyhfZGlmZikpOy8vIGIyIDwgMCwgbm8gaW50ZXJzZWN0aW9uCglpZihEZEUxeFE8MCl7cmV0dXJuIG51bGw7fS8vIGIxK2IyID4gMSwgbm8gaW50ZXJzZWN0aW9uCglpZihEZFF4RTIrRGRFMXhRPkRkTil7cmV0dXJuIG51bGw7fS8vIExpbmUgaW50ZXJzZWN0cyB0cmlhbmdsZSwgY2hlY2sgaWYgcmF5IGRvZXMuCgljb25zdCBRZE49LXNpZ24qX2RpZmYuZG90KF9ub3JtYWwkMSk7Ly8gdCA8IDAsIG5vIGludGVyc2VjdGlvbgoJaWYoUWROPDApe3JldHVybiBudWxsO30vLyBSYXkgaW50ZXJzZWN0cyB0cmlhbmdsZS4KCXJldHVybiB0aGlzLmF0KFFkTi9EZE4sdGFyZ2V0KTt9YXBwbHlNYXRyaXg0KG1hdHJpeDQpe3RoaXMub3JpZ2luLmFwcGx5TWF0cml4NChtYXRyaXg0KTt0aGlzLmRpcmVjdGlvbi50cmFuc2Zvcm1EaXJlY3Rpb24obWF0cml4NCk7cmV0dXJuIHRoaXM7fWVxdWFscyhyYXkpe3JldHVybiByYXkub3JpZ2luLmVxdWFscyh0aGlzLm9yaWdpbikmJnJheS5kaXJlY3Rpb24uZXF1YWxzKHRoaXMuZGlyZWN0aW9uKTt9Y2xvbmUoKXtyZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IoKS5jb3B5KHRoaXMpO319Y2xhc3MgTWF0cml4NHtjb25zdHJ1Y3Rvcigpe3RoaXMuZWxlbWVudHM9WzEsMCwwLDAsMCwxLDAsMCwwLDAsMSwwLDAsMCwwLDFdO2lmKGFyZ3VtZW50cy5sZW5ndGg+MCl7Y29uc29sZS5lcnJvcignVEhSRUUuTWF0cml4NDogdGhlIGNvbnN0cnVjdG9yIG5vIGxvbmdlciByZWFkcyBhcmd1bWVudHMuIHVzZSAuc2V0KCkgaW5zdGVhZC4nKTt9fXNldChuMTEsbjEyLG4xMyxuMTQsbjIxLG4yMixuMjMsbjI0LG4zMSxuMzIsbjMzLG4zNCxuNDEsbjQyLG40MyxuNDQpe2NvbnN0IHRlPXRoaXMuZWxlbWVudHM7dGVbMF09bjExO3RlWzRdPW4xMjt0ZVs4XT1uMTM7dGVbMTJdPW4xNDt0ZVsxXT1uMjE7dGVbNV09bjIyO3RlWzldPW4yMzt0ZVsxM109bjI0O3RlWzJdPW4zMTt0ZVs2XT1uMzI7dGVbMTBdPW4zMzt0ZVsxNF09bjM0O3RlWzNdPW40MTt0ZVs3XT1uNDI7dGVbMTFdPW40Mzt0ZVsxNV09bjQ0O3JldHVybiB0aGlzO31pZGVudGl0eSgpe3RoaXMuc2V0KDEsMCwwLDAsMCwxLDAsMCwwLDAsMSwwLDAsMCwwLDEpO3JldHVybiB0aGlzO31jbG9uZSgpe3JldHVybiBuZXcgTWF0cml4NCgpLmZyb21BcnJheSh0aGlzLmVsZW1lbnRzKTt9Y29weShtKXtjb25zdCB0ZT10aGlzLmVsZW1lbnRzO2NvbnN0IG1lPW0uZWxlbWVudHM7dGVbMF09bWVbMF07dGVbMV09bWVbMV07dGVbMl09bWVbMl07dGVbM109bWVbM107dGVbNF09bWVbNF07dGVbNV09bWVbNV07dGVbNl09bWVbNl07dGVbN109bWVbN107dGVbOF09bWVbOF07dGVbOV09bWVbOV07dGVbMTBdPW1lWzEwXTt0ZVsxMV09bWVbMTFdO3RlWzEyXT1tZVsxMl07dGVbMTNdPW1lWzEzXTt0ZVsxNF09bWVbMTRdO3RlWzE1XT1tZVsxNV07cmV0dXJuIHRoaXM7fWNvcHlQb3NpdGlvbihtKXtjb25zdCB0ZT10aGlzLmVsZW1lbnRzLG1lPW0uZWxlbWVudHM7dGVbMTJdPW1lWzEyXTt0ZVsxM109bWVbMTNdO3RlWzE0XT1tZVsxNF07cmV0dXJuIHRoaXM7fXNldEZyb21NYXRyaXgzKG0pe2NvbnN0IG1lPW0uZWxlbWVudHM7dGhpcy5zZXQobWVbMF0sbWVbM10sbWVbNl0sMCxtZVsxXSxtZVs0XSxtZVs3XSwwLG1lWzJdLG1lWzVdLG1lWzhdLDAsMCwwLDAsMSk7cmV0dXJuIHRoaXM7fWV4dHJhY3RCYXNpcyh4QXhpcyx5QXhpcyx6QXhpcyl7eEF4aXMuc2V0RnJvbU1hdHJpeENvbHVtbih0aGlzLDApO3lBeGlzLnNldEZyb21NYXRyaXhDb2x1bW4odGhpcywxKTt6QXhpcy5zZXRGcm9tTWF0cml4Q29sdW1uKHRoaXMsMik7cmV0dXJuIHRoaXM7fW1ha2VCYXNpcyh4QXhpcyx5QXhpcyx6QXhpcyl7dGhpcy5zZXQoeEF4aXMueCx5QXhpcy54LHpBeGlzLngsMCx4QXhpcy55LHlBeGlzLnksekF4aXMueSwwLHhBeGlzLnoseUF4aXMueix6QXhpcy56LDAsMCwwLDAsMSk7cmV0dXJuIHRoaXM7fWV4dHJhY3RSb3RhdGlvbihtKXsvLyB0aGlzIG1ldGhvZCBkb2VzIG5vdCBzdXBwb3J0IHJlZmxlY3Rpb24gbWF0cmljZXMKCWNvbnN0IHRlPXRoaXMuZWxlbWVudHM7Y29uc3QgbWU9bS5lbGVtZW50cztjb25zdCBzY2FsZVg9MS9fdjEkNS5zZXRGcm9tTWF0cml4Q29sdW1uKG0sMCkubGVuZ3RoKCk7Y29uc3Qgc2NhbGVZPTEvX3YxJDUuc2V0RnJvbU1hdHJpeENvbHVtbihtLDEpLmxlbmd0aCgpO2NvbnN0IHNjYWxlWj0xL192MSQ1LnNldEZyb21NYXRyaXhDb2x1bW4obSwyKS5sZW5ndGgoKTt0ZVswXT1tZVswXSpzY2FsZVg7dGVbMV09bWVbMV0qc2NhbGVYO3RlWzJdPW1lWzJdKnNjYWxlWDt0ZVszXT0wO3RlWzRdPW1lWzRdKnNjYWxlWTt0ZVs1XT1tZVs1XSpzY2FsZVk7dGVbNl09bWVbNl0qc2NhbGVZO3RlWzddPTA7dGVbOF09bWVbOF0qc2NhbGVaO3RlWzldPW1lWzldKnNjYWxlWjt0ZVsxMF09bWVbMTBdKnNjYWxlWjt0ZVsxMV09MDt0ZVsxMl09MDt0ZVsxM109MDt0ZVsxNF09MDt0ZVsxNV09MTtyZXR1cm4gdGhpczt9bWFrZVJvdGF0aW9uRnJvbUV1bGVyKGV1bGVyKXtpZighKGV1bGVyJiZldWxlci5pc0V1bGVyKSl7Y29uc29sZS5lcnJvcignVEhSRUUuTWF0cml4NDogLm1ha2VSb3RhdGlvbkZyb21FdWxlcigpIG5vdyBleHBlY3RzIGEgRXVsZXIgcm90YXRpb24gcmF0aGVyIHRoYW4gYSBWZWN0b3IzIGFuZCBvcmRlci4nKTt9Y29uc3QgdGU9dGhpcy5lbGVtZW50cztjb25zdCB4PWV1bGVyLngseT1ldWxlci55LHo9ZXVsZXIuejtjb25zdCBhPU1hdGguY29zKHgpLGI9TWF0aC5zaW4oeCk7Y29uc3QgYz1NYXRoLmNvcyh5KSxkPU1hdGguc2luKHkpO2NvbnN0IGU9TWF0aC5jb3MoeiksZj1NYXRoLnNpbih6KTtpZihldWxlci5vcmRlcj09PSdYWVonKXtjb25zdCBhZT1hKmUsYWY9YSpmLGJlPWIqZSxiZj1iKmY7dGVbMF09YyplO3RlWzRdPS1jKmY7dGVbOF09ZDt0ZVsxXT1hZitiZSpkO3RlWzVdPWFlLWJmKmQ7dGVbOV09LWIqYzt0ZVsyXT1iZi1hZSpkO3RlWzZdPWJlK2FmKmQ7dGVbMTBdPWEqYzt9ZWxzZSBpZihldWxlci5vcmRlcj09PSdZWFonKXtjb25zdCBjZT1jKmUsY2Y9YypmLGRlPWQqZSxkZj1kKmY7dGVbMF09Y2UrZGYqYjt0ZVs0XT1kZSpiLWNmO3RlWzhdPWEqZDt0ZVsxXT1hKmY7dGVbNV09YSplO3RlWzldPS1iO3RlWzJdPWNmKmItZGU7dGVbNl09ZGYrY2UqYjt0ZVsxMF09YSpjO31lbHNlIGlmKGV1bGVyLm9yZGVyPT09J1pYWScpe2NvbnN0IGNlPWMqZSxjZj1jKmYsZGU9ZCplLGRmPWQqZjt0ZVswXT1jZS1kZipiO3RlWzRdPS1hKmY7dGVbOF09ZGUrY2YqYjt0ZVsxXT1jZitkZSpiO3RlWzVdPWEqZTt0ZVs5XT1kZi1jZSpiO3RlWzJdPS1hKmQ7dGVbNl09Yjt0ZVsxMF09YSpjO31lbHNlIGlmKGV1bGVyLm9yZGVyPT09J1pZWCcpe2NvbnN0IGFlPWEqZSxhZj1hKmYsYmU9YiplLGJmPWIqZjt0ZVswXT1jKmU7dGVbNF09YmUqZC1hZjt0ZVs4XT1hZSpkK2JmO3RlWzFdPWMqZjt0ZVs1XT1iZipkK2FlO3RlWzldPWFmKmQtYmU7dGVbMl09LWQ7dGVbNl09YipjO3RlWzEwXT1hKmM7fWVsc2UgaWYoZXVsZXIub3JkZXI9PT0nWVpYJyl7Y29uc3QgYWM9YSpjLGFkPWEqZCxiYz1iKmMsYmQ9YipkO3RlWzBdPWMqZTt0ZVs0XT1iZC1hYypmO3RlWzhdPWJjKmYrYWQ7dGVbMV09Zjt0ZVs1XT1hKmU7dGVbOV09LWIqZTt0ZVsyXT0tZCplO3RlWzZdPWFkKmYrYmM7dGVbMTBdPWFjLWJkKmY7fWVsc2UgaWYoZXVsZXIub3JkZXI9PT0nWFpZJyl7Y29uc3QgYWM9YSpjLGFkPWEqZCxiYz1iKmMsYmQ9YipkO3RlWzBdPWMqZTt0ZVs0XT0tZjt0ZVs4XT1kKmU7dGVbMV09YWMqZitiZDt0ZVs1XT1hKmU7dGVbOV09YWQqZi1iYzt0ZVsyXT1iYypmLWFkO3RlWzZdPWIqZTt0ZVsxMF09YmQqZithYzt9Ly8gYm90dG9tIHJvdwoJdGVbM109MDt0ZVs3XT0wO3RlWzExXT0wOy8vIGxhc3QgY29sdW1uCgl0ZVsxMl09MDt0ZVsxM109MDt0ZVsxNF09MDt0ZVsxNV09MTtyZXR1cm4gdGhpczt9bWFrZVJvdGF0aW9uRnJvbVF1YXRlcm5pb24ocSl7cmV0dXJuIHRoaXMuY29tcG9zZShfemVybyxxLF9vbmUpO31sb29rQXQoZXllLHRhcmdldCx1cCl7Y29uc3QgdGU9dGhpcy5lbGVtZW50cztfei5zdWJWZWN0b3JzKGV5ZSx0YXJnZXQpO2lmKF96Lmxlbmd0aFNxKCk9PT0wKXsvLyBleWUgYW5kIHRhcmdldCBhcmUgaW4gdGhlIHNhbWUgcG9zaXRpb24KCV96Lno9MTt9X3oubm9ybWFsaXplKCk7X3guY3Jvc3NWZWN0b3JzKHVwLF96KTtpZihfeC5sZW5ndGhTcSgpPT09MCl7Ly8gdXAgYW5kIHogYXJlIHBhcmFsbGVsCglpZihNYXRoLmFicyh1cC56KT09PTEpe196LngrPTAuMDAwMTt9ZWxzZSB7X3oueis9MC4wMDAxO31fei5ub3JtYWxpemUoKTtfeC5jcm9zc1ZlY3RvcnModXAsX3opO31feC5ub3JtYWxpemUoKTtfeS5jcm9zc1ZlY3RvcnMoX3osX3gpO3RlWzBdPV94Lng7dGVbNF09X3kueDt0ZVs4XT1fei54O3RlWzFdPV94Lnk7dGVbNV09X3kueTt0ZVs5XT1fei55O3RlWzJdPV94Lno7dGVbNl09X3kuejt0ZVsxMF09X3ouejtyZXR1cm4gdGhpczt9bXVsdGlwbHkobSxuKXtpZihuIT09dW5kZWZpbmVkKXtjb25zb2xlLndhcm4oJ1RIUkVFLk1hdHJpeDQ6IC5tdWx0aXBseSgpIG5vdyBvbmx5IGFjY2VwdHMgb25lIGFyZ3VtZW50LiBVc2UgLm11bHRpcGx5TWF0cmljZXMoIGEsIGIgKSBpbnN0ZWFkLicpO3JldHVybiB0aGlzLm11bHRpcGx5TWF0cmljZXMobSxuKTt9cmV0dXJuIHRoaXMubXVsdGlwbHlNYXRyaWNlcyh0aGlzLG0pO31wcmVtdWx0aXBseShtKXtyZXR1cm4gdGhpcy5tdWx0aXBseU1hdHJpY2VzKG0sdGhpcyk7fW11bHRpcGx5TWF0cmljZXMoYSxiKXtjb25zdCBhZT1hLmVsZW1lbnRzO2NvbnN0IGJlPWIuZWxlbWVudHM7Y29uc3QgdGU9dGhpcy5lbGVtZW50cztjb25zdCBhMTE9YWVbMF0sYTEyPWFlWzRdLGExMz1hZVs4XSxhMTQ9YWVbMTJdO2NvbnN0IGEyMT1hZVsxXSxhMjI9YWVbNV0sYTIzPWFlWzldLGEyND1hZVsxM107Y29uc3QgYTMxPWFlWzJdLGEzMj1hZVs2XSxhMzM9YWVbMTBdLGEzND1hZVsxNF07Y29uc3QgYTQxPWFlWzNdLGE0Mj1hZVs3XSxhNDM9YWVbMTFdLGE0ND1hZVsxNV07Y29uc3QgYjExPWJlWzBdLGIxMj1iZVs0XSxiMTM9YmVbOF0sYjE0PWJlWzEyXTtjb25zdCBiMjE9YmVbMV0sYjIyPWJlWzVdLGIyMz1iZVs5XSxiMjQ9YmVbMTNdO2NvbnN0IGIzMT1iZVsyXSxiMzI9YmVbNl0sYjMzPWJlWzEwXSxiMzQ9YmVbMTRdO2NvbnN0IGI0MT1iZVszXSxiNDI9YmVbN10sYjQzPWJlWzExXSxiNDQ9YmVbMTVdO3RlWzBdPWExMSpiMTErYTEyKmIyMSthMTMqYjMxK2ExNCpiNDE7dGVbNF09YTExKmIxMithMTIqYjIyK2ExMypiMzIrYTE0KmI0Mjt0ZVs4XT1hMTEqYjEzK2ExMipiMjMrYTEzKmIzMythMTQqYjQzO3RlWzEyXT1hMTEqYjE0K2ExMipiMjQrYTEzKmIzNCthMTQqYjQ0O3RlWzFdPWEyMSpiMTErYTIyKmIyMSthMjMqYjMxK2EyNCpiNDE7dGVbNV09YTIxKmIxMithMjIqYjIyK2EyMypiMzIrYTI0KmI0Mjt0ZVs5XT1hMjEqYjEzK2EyMipiMjMrYTIzKmIzMythMjQqYjQzO3RlWzEzXT1hMjEqYjE0K2EyMipiMjQrYTIzKmIzNCthMjQqYjQ0O3RlWzJdPWEzMSpiMTErYTMyKmIyMSthMzMqYjMxK2EzNCpiNDE7dGVbNl09YTMxKmIxMithMzIqYjIyK2EzMypiMzIrYTM0KmI0Mjt0ZVsxMF09YTMxKmIxMythMzIqYjIzK2EzMypiMzMrYTM0KmI0Mzt0ZVsxNF09YTMxKmIxNCthMzIqYjI0K2EzMypiMzQrYTM0KmI0NDt0ZVszXT1hNDEqYjExK2E0MipiMjErYTQzKmIzMSthNDQqYjQxO3RlWzddPWE0MSpiMTIrYTQyKmIyMithNDMqYjMyK2E0NCpiNDI7dGVbMTFdPWE0MSpiMTMrYTQyKmIyMythNDMqYjMzK2E0NCpiNDM7dGVbMTVdPWE0MSpiMTQrYTQyKmIyNCthNDMqYjM0K2E0NCpiNDQ7cmV0dXJuIHRoaXM7fW11bHRpcGx5U2NhbGFyKHMpe2NvbnN0IHRlPXRoaXMuZWxlbWVudHM7dGVbMF0qPXM7dGVbNF0qPXM7dGVbOF0qPXM7dGVbMTJdKj1zO3RlWzFdKj1zO3RlWzVdKj1zO3RlWzldKj1zO3RlWzEzXSo9czt0ZVsyXSo9czt0ZVs2XSo9czt0ZVsxMF0qPXM7dGVbMTRdKj1zO3RlWzNdKj1zO3RlWzddKj1zO3RlWzExXSo9czt0ZVsxNV0qPXM7cmV0dXJuIHRoaXM7fWRldGVybWluYW50KCl7Y29uc3QgdGU9dGhpcy5lbGVtZW50cztjb25zdCBuMTE9dGVbMF0sbjEyPXRlWzRdLG4xMz10ZVs4XSxuMTQ9dGVbMTJdO2NvbnN0IG4yMT10ZVsxXSxuMjI9dGVbNV0sbjIzPXRlWzldLG4yND10ZVsxM107Y29uc3QgbjMxPXRlWzJdLG4zMj10ZVs2XSxuMzM9dGVbMTBdLG4zND10ZVsxNF07Y29uc3QgbjQxPXRlWzNdLG40Mj10ZVs3XSxuNDM9dGVbMTFdLG40ND10ZVsxNV07Ly9UT0RPOiBtYWtlIHRoaXMgbW9yZSBlZmZpY2llbnQKCS8vKCBiYXNlZCBvbiBodHRwOi8vd3d3LmV1Y2xpZGVhbnNwYWNlLmNvbS9tYXRocy9hbGdlYnJhL21hdHJpeC9mdW5jdGlvbnMvaW52ZXJzZS9mb3VyRC9pbmRleC5odG0gKQoJcmV0dXJuIG40MSooK24xNCpuMjMqbjMyLW4xMypuMjQqbjMyLW4xNCpuMjIqbjMzK24xMipuMjQqbjMzK24xMypuMjIqbjM0LW4xMipuMjMqbjM0KStuNDIqKCtuMTEqbjIzKm4zNC1uMTEqbjI0Km4zMytuMTQqbjIxKm4zMy1uMTMqbjIxKm4zNCtuMTMqbjI0Km4zMS1uMTQqbjIzKm4zMSkrbjQzKigrbjExKm4yNCpuMzItbjExKm4yMipuMzQtbjE0Km4yMSpuMzIrbjEyKm4yMSpuMzQrbjE0Km4yMipuMzEtbjEyKm4yNCpuMzEpK240NCooLW4xMypuMjIqbjMxLW4xMSpuMjMqbjMyK24xMSpuMjIqbjMzK24xMypuMjEqbjMyLW4xMipuMjEqbjMzK24xMipuMjMqbjMxKTt9dHJhbnNwb3NlKCl7Y29uc3QgdGU9dGhpcy5lbGVtZW50cztsZXQgdG1wO3RtcD10ZVsxXTt0ZVsxXT10ZVs0XTt0ZVs0XT10bXA7dG1wPXRlWzJdO3RlWzJdPXRlWzhdO3RlWzhdPXRtcDt0bXA9dGVbNl07dGVbNl09dGVbOV07dGVbOV09dG1wO3RtcD10ZVszXTt0ZVszXT10ZVsxMl07dGVbMTJdPXRtcDt0bXA9dGVbN107dGVbN109dGVbMTNdO3RlWzEzXT10bXA7dG1wPXRlWzExXTt0ZVsxMV09dGVbMTRdO3RlWzE0XT10bXA7cmV0dXJuIHRoaXM7fXNldFBvc2l0aW9uKHgseSx6KXtjb25zdCB0ZT10aGlzLmVsZW1lbnRzO2lmKHguaXNWZWN0b3IzKXt0ZVsxMl09eC54O3RlWzEzXT14Lnk7dGVbMTRdPXguejt9ZWxzZSB7dGVbMTJdPXg7dGVbMTNdPXk7dGVbMTRdPXo7fXJldHVybiB0aGlzO31pbnZlcnQoKXsvLyBiYXNlZCBvbiBodHRwOi8vd3d3LmV1Y2xpZGVhbnNwYWNlLmNvbS9tYXRocy9hbGdlYnJhL21hdHJpeC9mdW5jdGlvbnMvaW52ZXJzZS9mb3VyRC9pbmRleC5odG0KCWNvbnN0IHRlPXRoaXMuZWxlbWVudHMsbjExPXRlWzBdLG4yMT10ZVsxXSxuMzE9dGVbMl0sbjQxPXRlWzNdLG4xMj10ZVs0XSxuMjI9dGVbNV0sbjMyPXRlWzZdLG40Mj10ZVs3XSxuMTM9dGVbOF0sbjIzPXRlWzldLG4zMz10ZVsxMF0sbjQzPXRlWzExXSxuMTQ9dGVbMTJdLG4yND10ZVsxM10sbjM0PXRlWzE0XSxuNDQ9dGVbMTVdLHQxMT1uMjMqbjM0Km40Mi1uMjQqbjMzKm40MituMjQqbjMyKm40My1uMjIqbjM0Km40My1uMjMqbjMyKm40NCtuMjIqbjMzKm40NCx0MTI9bjE0Km4zMypuNDItbjEzKm4zNCpuNDItbjE0Km4zMipuNDMrbjEyKm4zNCpuNDMrbjEzKm4zMipuNDQtbjEyKm4zMypuNDQsdDEzPW4xMypuMjQqbjQyLW4xNCpuMjMqbjQyK24xNCpuMjIqbjQzLW4xMipuMjQqbjQzLW4xMypuMjIqbjQ0K24xMipuMjMqbjQ0LHQxND1uMTQqbjIzKm4zMi1uMTMqbjI0Km4zMi1uMTQqbjIyKm4zMytuMTIqbjI0Km4zMytuMTMqbjIyKm4zNC1uMTIqbjIzKm4zNDtjb25zdCBkZXQ9bjExKnQxMStuMjEqdDEyK24zMSp0MTMrbjQxKnQxNDtpZihkZXQ9PT0wKXJldHVybiB0aGlzLnNldCgwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwKTtjb25zdCBkZXRJbnY9MS9kZXQ7dGVbMF09dDExKmRldEludjt0ZVsxXT0objI0Km4zMypuNDEtbjIzKm4zNCpuNDEtbjI0Km4zMSpuNDMrbjIxKm4zNCpuNDMrbjIzKm4zMSpuNDQtbjIxKm4zMypuNDQpKmRldEludjt0ZVsyXT0objIyKm4zNCpuNDEtbjI0Km4zMipuNDErbjI0Km4zMSpuNDItbjIxKm4zNCpuNDItbjIyKm4zMSpuNDQrbjIxKm4zMipuNDQpKmRldEludjt0ZVszXT0objIzKm4zMipuNDEtbjIyKm4zMypuNDEtbjIzKm4zMSpuNDIrbjIxKm4zMypuNDIrbjIyKm4zMSpuNDMtbjIxKm4zMipuNDMpKmRldEludjt0ZVs0XT10MTIqZGV0SW52O3RlWzVdPShuMTMqbjM0Km40MS1uMTQqbjMzKm40MStuMTQqbjMxKm40My1uMTEqbjM0Km40My1uMTMqbjMxKm40NCtuMTEqbjMzKm40NCkqZGV0SW52O3RlWzZdPShuMTQqbjMyKm40MS1uMTIqbjM0Km40MS1uMTQqbjMxKm40MituMTEqbjM0Km40MituMTIqbjMxKm40NC1uMTEqbjMyKm40NCkqZGV0SW52O3RlWzddPShuMTIqbjMzKm40MS1uMTMqbjMyKm40MStuMTMqbjMxKm40Mi1uMTEqbjMzKm40Mi1uMTIqbjMxKm40MytuMTEqbjMyKm40MykqZGV0SW52O3RlWzhdPXQxMypkZXRJbnY7dGVbOV09KG4xNCpuMjMqbjQxLW4xMypuMjQqbjQxLW4xNCpuMjEqbjQzK24xMSpuMjQqbjQzK24xMypuMjEqbjQ0LW4xMSpuMjMqbjQ0KSpkZXRJbnY7dGVbMTBdPShuMTIqbjI0Km40MS1uMTQqbjIyKm40MStuMTQqbjIxKm40Mi1uMTEqbjI0Km40Mi1uMTIqbjIxKm40NCtuMTEqbjIyKm40NCkqZGV0SW52O3RlWzExXT0objEzKm4yMipuNDEtbjEyKm4yMypuNDEtbjEzKm4yMSpuNDIrbjExKm4yMypuNDIrbjEyKm4yMSpuNDMtbjExKm4yMipuNDMpKmRldEludjt0ZVsxMl09dDE0KmRldEludjt0ZVsxM109KG4xMypuMjQqbjMxLW4xNCpuMjMqbjMxK24xNCpuMjEqbjMzLW4xMSpuMjQqbjMzLW4xMypuMjEqbjM0K24xMSpuMjMqbjM0KSpkZXRJbnY7dGVbMTRdPShuMTQqbjIyKm4zMS1uMTIqbjI0Km4zMS1uMTQqbjIxKm4zMituMTEqbjI0Km4zMituMTIqbjIxKm4zNC1uMTEqbjIyKm4zNCkqZGV0SW52O3RlWzE1XT0objEyKm4yMypuMzEtbjEzKm4yMipuMzErbjEzKm4yMSpuMzItbjExKm4yMypuMzItbjEyKm4yMSpuMzMrbjExKm4yMipuMzMpKmRldEludjtyZXR1cm4gdGhpczt9c2NhbGUodil7Y29uc3QgdGU9dGhpcy5lbGVtZW50cztjb25zdCB4PXYueCx5PXYueSx6PXYuejt0ZVswXSo9eDt0ZVs0XSo9eTt0ZVs4XSo9ejt0ZVsxXSo9eDt0ZVs1XSo9eTt0ZVs5XSo9ejt0ZVsyXSo9eDt0ZVs2XSo9eTt0ZVsxMF0qPXo7dGVbM10qPXg7dGVbN10qPXk7dGVbMTFdKj16O3JldHVybiB0aGlzO31nZXRNYXhTY2FsZU9uQXhpcygpe2NvbnN0IHRlPXRoaXMuZWxlbWVudHM7Y29uc3Qgc2NhbGVYU3E9dGVbMF0qdGVbMF0rdGVbMV0qdGVbMV0rdGVbMl0qdGVbMl07Y29uc3Qgc2NhbGVZU3E9dGVbNF0qdGVbNF0rdGVbNV0qdGVbNV0rdGVbNl0qdGVbNl07Y29uc3Qgc2NhbGVaU3E9dGVbOF0qdGVbOF0rdGVbOV0qdGVbOV0rdGVbMTBdKnRlWzEwXTtyZXR1cm4gTWF0aC5zcXJ0KE1hdGgubWF4KHNjYWxlWFNxLHNjYWxlWVNxLHNjYWxlWlNxKSk7fW1ha2VUcmFuc2xhdGlvbih4LHkseil7dGhpcy5zZXQoMSwwLDAseCwwLDEsMCx5LDAsMCwxLHosMCwwLDAsMSk7cmV0dXJuIHRoaXM7fW1ha2VSb3RhdGlvblgodGhldGEpe2NvbnN0IGM9TWF0aC5jb3ModGhldGEpLHM9TWF0aC5zaW4odGhldGEpO3RoaXMuc2V0KDEsMCwwLDAsMCxjLC1zLDAsMCxzLGMsMCwwLDAsMCwxKTtyZXR1cm4gdGhpczt9bWFrZVJvdGF0aW9uWSh0aGV0YSl7Y29uc3QgYz1NYXRoLmNvcyh0aGV0YSkscz1NYXRoLnNpbih0aGV0YSk7dGhpcy5zZXQoYywwLHMsMCwwLDEsMCwwLC1zLDAsYywwLDAsMCwwLDEpO3JldHVybiB0aGlzO31tYWtlUm90YXRpb25aKHRoZXRhKXtjb25zdCBjPU1hdGguY29zKHRoZXRhKSxzPU1hdGguc2luKHRoZXRhKTt0aGlzLnNldChjLC1zLDAsMCxzLGMsMCwwLDAsMCwxLDAsMCwwLDAsMSk7cmV0dXJuIHRoaXM7fW1ha2VSb3RhdGlvbkF4aXMoYXhpcyxhbmdsZSl7Ly8gQmFzZWQgb24gaHR0cDovL3d3dy5nYW1lZGV2Lm5ldC9yZWZlcmVuY2UvYXJ0aWNsZXMvYXJ0aWNsZTExOTkuYXNwCgljb25zdCBjPU1hdGguY29zKGFuZ2xlKTtjb25zdCBzPU1hdGguc2luKGFuZ2xlKTtjb25zdCB0PTEtYztjb25zdCB4PWF4aXMueCx5PWF4aXMueSx6PWF4aXMuejtjb25zdCB0eD10KngsdHk9dCp5O3RoaXMuc2V0KHR4KngrYyx0eCp5LXMqeix0eCp6K3MqeSwwLHR4Knkrcyp6LHR5KnkrYyx0eSp6LXMqeCwwLHR4Knotcyp5LHR5Knorcyp4LHQqeip6K2MsMCwwLDAsMCwxKTtyZXR1cm4gdGhpczt9bWFrZVNjYWxlKHgseSx6KXt0aGlzLnNldCh4LDAsMCwwLDAseSwwLDAsMCwwLHosMCwwLDAsMCwxKTtyZXR1cm4gdGhpczt9bWFrZVNoZWFyKHh5LHh6LHl4LHl6LHp4LHp5KXt0aGlzLnNldCgxLHl4LHp4LDAseHksMSx6eSwwLHh6LHl6LDEsMCwwLDAsMCwxKTtyZXR1cm4gdGhpczt9Y29tcG9zZShwb3NpdGlvbixxdWF0ZXJuaW9uLHNjYWxlKXtjb25zdCB0ZT10aGlzLmVsZW1lbnRzO2NvbnN0IHg9cXVhdGVybmlvbi5feCx5PXF1YXRlcm5pb24uX3ksej1xdWF0ZXJuaW9uLl96LHc9cXVhdGVybmlvbi5fdztjb25zdCB4Mj14K3gseTI9eSt5LHoyPXorejtjb25zdCB4eD14KngyLHh5PXgqeTIseHo9eCp6Mjtjb25zdCB5eT15KnkyLHl6PXkqejIseno9eip6Mjtjb25zdCB3eD13KngyLHd5PXcqeTIsd3o9dyp6Mjtjb25zdCBzeD1zY2FsZS54LHN5PXNjYWxlLnksc3o9c2NhbGUuejt0ZVswXT0oMS0oeXkrenopKSpzeDt0ZVsxXT0oeHkrd3opKnN4O3RlWzJdPSh4ei13eSkqc3g7dGVbM109MDt0ZVs0XT0oeHktd3opKnN5O3RlWzVdPSgxLSh4eCt6eikpKnN5O3RlWzZdPSh5eit3eCkqc3k7dGVbN109MDt0ZVs4XT0oeHord3kpKnN6O3RlWzldPSh5ei13eCkqc3o7dGVbMTBdPSgxLSh4eCt5eSkpKnN6O3RlWzExXT0wO3RlWzEyXT1wb3NpdGlvbi54O3RlWzEzXT1wb3NpdGlvbi55O3RlWzE0XT1wb3NpdGlvbi56O3RlWzE1XT0xO3JldHVybiB0aGlzO31kZWNvbXBvc2UocG9zaXRpb24scXVhdGVybmlvbixzY2FsZSl7Y29uc3QgdGU9dGhpcy5lbGVtZW50cztsZXQgc3g9X3YxJDUuc2V0KHRlWzBdLHRlWzFdLHRlWzJdKS5sZW5ndGgoKTtjb25zdCBzeT1fdjEkNS5zZXQodGVbNF0sdGVbNV0sdGVbNl0pLmxlbmd0aCgpO2NvbnN0IHN6PV92MSQ1LnNldCh0ZVs4XSx0ZVs5XSx0ZVsxMF0pLmxlbmd0aCgpOy8vIGlmIGRldGVybWluZSBpcyBuZWdhdGl2ZSwgd2UgbmVlZCB0byBpbnZlcnQgb25lIHNjYWxlCgljb25zdCBkZXQ9dGhpcy5kZXRlcm1pbmFudCgpO2lmKGRldDwwKXN4PS1zeDtwb3NpdGlvbi54PXRlWzEyXTtwb3NpdGlvbi55PXRlWzEzXTtwb3NpdGlvbi56PXRlWzE0XTsvLyBzY2FsZSB0aGUgcm90YXRpb24gcGFydAoJX20xJDIuY29weSh0aGlzKTtjb25zdCBpbnZTWD0xL3N4O2NvbnN0IGludlNZPTEvc3k7Y29uc3QgaW52U1o9MS9zejtfbTEkMi5lbGVtZW50c1swXSo9aW52U1g7X20xJDIuZWxlbWVudHNbMV0qPWludlNYO19tMSQyLmVsZW1lbnRzWzJdKj1pbnZTWDtfbTEkMi5lbGVtZW50c1s0XSo9aW52U1k7X20xJDIuZWxlbWVudHNbNV0qPWludlNZO19tMSQyLmVsZW1lbnRzWzZdKj1pbnZTWTtfbTEkMi5lbGVtZW50c1s4XSo9aW52U1o7X20xJDIuZWxlbWVudHNbOV0qPWludlNaO19tMSQyLmVsZW1lbnRzWzEwXSo9aW52U1o7cXVhdGVybmlvbi5zZXRGcm9tUm90YXRpb25NYXRyaXgoX20xJDIpO3NjYWxlLng9c3g7c2NhbGUueT1zeTtzY2FsZS56PXN6O3JldHVybiB0aGlzO31tYWtlUGVyc3BlY3RpdmUobGVmdCxyaWdodCx0b3AsYm90dG9tLG5lYXIsZmFyKXtpZihmYXI9PT11bmRlZmluZWQpe2NvbnNvbGUud2FybignVEhSRUUuTWF0cml4NDogLm1ha2VQZXJzcGVjdGl2ZSgpIGhhcyBiZWVuIHJlZGVmaW5lZCBhbmQgaGFzIGEgbmV3IHNpZ25hdHVyZS4gUGxlYXNlIGNoZWNrIHRoZSBkb2NzLicpO31jb25zdCB0ZT10aGlzLmVsZW1lbnRzO2NvbnN0IHg9MipuZWFyLyhyaWdodC1sZWZ0KTtjb25zdCB5PTIqbmVhci8odG9wLWJvdHRvbSk7Y29uc3QgYT0ocmlnaHQrbGVmdCkvKHJpZ2h0LWxlZnQpO2NvbnN0IGI9KHRvcCtib3R0b20pLyh0b3AtYm90dG9tKTtjb25zdCBjPS0oZmFyK25lYXIpLyhmYXItbmVhcik7Y29uc3QgZD0tMipmYXIqbmVhci8oZmFyLW5lYXIpO3RlWzBdPXg7dGVbNF09MDt0ZVs4XT1hO3RlWzEyXT0wO3RlWzFdPTA7dGVbNV09eTt0ZVs5XT1iO3RlWzEzXT0wO3RlWzJdPTA7dGVbNl09MDt0ZVsxMF09Yzt0ZVsxNF09ZDt0ZVszXT0wO3RlWzddPTA7dGVbMTFdPS0xO3RlWzE1XT0wO3JldHVybiB0aGlzO31tYWtlT3J0aG9ncmFwaGljKGxlZnQscmlnaHQsdG9wLGJvdHRvbSxuZWFyLGZhcil7Y29uc3QgdGU9dGhpcy5lbGVtZW50cztjb25zdCB3PTEuMC8ocmlnaHQtbGVmdCk7Y29uc3QgaD0xLjAvKHRvcC1ib3R0b20pO2NvbnN0IHA9MS4wLyhmYXItbmVhcik7Y29uc3QgeD0ocmlnaHQrbGVmdCkqdztjb25zdCB5PSh0b3ArYm90dG9tKSpoO2NvbnN0IHo9KGZhcituZWFyKSpwO3RlWzBdPTIqdzt0ZVs0XT0wO3RlWzhdPTA7dGVbMTJdPS14O3RlWzFdPTA7dGVbNV09MipoO3RlWzldPTA7dGVbMTNdPS15O3RlWzJdPTA7dGVbNl09MDt0ZVsxMF09LTIqcDt0ZVsxNF09LXo7dGVbM109MDt0ZVs3XT0wO3RlWzExXT0wO3RlWzE1XT0xO3JldHVybiB0aGlzO31lcXVhbHMobWF0cml4KXtjb25zdCB0ZT10aGlzLmVsZW1lbnRzO2NvbnN0IG1lPW1hdHJpeC5lbGVtZW50cztmb3IobGV0IGk9MDtpPDE2O2krKyl7aWYodGVbaV0hPT1tZVtpXSlyZXR1cm4gZmFsc2U7fXJldHVybiB0cnVlO31mcm9tQXJyYXkoYXJyYXksb2Zmc2V0KXtpZihvZmZzZXQ9PT12b2lkIDApe29mZnNldD0wO31mb3IobGV0IGk9MDtpPDE2O2krKyl7dGhpcy5lbGVtZW50c1tpXT1hcnJheVtpK29mZnNldF07fXJldHVybiB0aGlzO310b0FycmF5KGFycmF5LG9mZnNldCl7aWYoYXJyYXk9PT12b2lkIDApe2FycmF5PVtdO31pZihvZmZzZXQ9PT12b2lkIDApe29mZnNldD0wO31jb25zdCB0ZT10aGlzLmVsZW1lbnRzO2FycmF5W29mZnNldF09dGVbMF07YXJyYXlbb2Zmc2V0KzFdPXRlWzFdO2FycmF5W29mZnNldCsyXT10ZVsyXTthcnJheVtvZmZzZXQrM109dGVbM107YXJyYXlbb2Zmc2V0KzRdPXRlWzRdO2FycmF5W29mZnNldCs1XT10ZVs1XTthcnJheVtvZmZzZXQrNl09dGVbNl07YXJyYXlbb2Zmc2V0KzddPXRlWzddO2FycmF5W29mZnNldCs4XT10ZVs4XTthcnJheVtvZmZzZXQrOV09dGVbOV07YXJyYXlbb2Zmc2V0KzEwXT10ZVsxMF07YXJyYXlbb2Zmc2V0KzExXT10ZVsxMV07YXJyYXlbb2Zmc2V0KzEyXT10ZVsxMl07YXJyYXlbb2Zmc2V0KzEzXT10ZVsxM107YXJyYXlbb2Zmc2V0KzE0XT10ZVsxNF07YXJyYXlbb2Zmc2V0KzE1XT10ZVsxNV07cmV0dXJuIGFycmF5O319TWF0cml4NC5wcm90b3R5cGUuaXNNYXRyaXg0PXRydWU7Y29uc3QgX3YxJDU9LypAX19QVVJFX18qL25ldyBWZWN0b3IzKCk7Y29uc3QgX20xJDI9LypAX19QVVJFX18qL25ldyBNYXRyaXg0KCk7Y29uc3QgX3plcm89LypAX19QVVJFX18qL25ldyBWZWN0b3IzKDAsMCwwKTtjb25zdCBfb25lPS8qQF9fUFVSRV9fKi9uZXcgVmVjdG9yMygxLDEsMSk7Y29uc3QgX3g9LypAX19QVVJFX18qL25ldyBWZWN0b3IzKCk7Y29uc3QgX3k9LypAX19QVVJFX18qL25ldyBWZWN0b3IzKCk7Y29uc3QgX3o9LypAX19QVVJFX18qL25ldyBWZWN0b3IzKCk7Y29uc3QgX21hdHJpeCQxPS8qQF9fUFVSRV9fKi9uZXcgTWF0cml4NCgpO2NvbnN0IF9xdWF0ZXJuaW9uJDM9LypAX19QVVJFX18qL25ldyBRdWF0ZXJuaW9uKCk7Y2xhc3MgRXVsZXJ7Y29uc3RydWN0b3IoeCx5LHosb3JkZXIpe2lmKHg9PT12b2lkIDApe3g9MDt9aWYoeT09PXZvaWQgMCl7eT0wO31pZih6PT09dm9pZCAwKXt6PTA7fWlmKG9yZGVyPT09dm9pZCAwKXtvcmRlcj1FdWxlci5EZWZhdWx0T3JkZXI7fXRoaXMuX3g9eDt0aGlzLl95PXk7dGhpcy5fej16O3RoaXMuX29yZGVyPW9yZGVyO31nZXQgeCgpe3JldHVybiB0aGlzLl94O31zZXQgeCh2YWx1ZSl7dGhpcy5feD12YWx1ZTt0aGlzLl9vbkNoYW5nZUNhbGxiYWNrKCk7fWdldCB5KCl7cmV0dXJuIHRoaXMuX3k7fXNldCB5KHZhbHVlKXt0aGlzLl95PXZhbHVlO3RoaXMuX29uQ2hhbmdlQ2FsbGJhY2soKTt9Z2V0IHooKXtyZXR1cm4gdGhpcy5fejt9c2V0IHoodmFsdWUpe3RoaXMuX3o9dmFsdWU7dGhpcy5fb25DaGFuZ2VDYWxsYmFjaygpO31nZXQgb3JkZXIoKXtyZXR1cm4gdGhpcy5fb3JkZXI7fXNldCBvcmRlcih2YWx1ZSl7dGhpcy5fb3JkZXI9dmFsdWU7dGhpcy5fb25DaGFuZ2VDYWxsYmFjaygpO31zZXQoeCx5LHosb3JkZXIpe2lmKG9yZGVyPT09dm9pZCAwKXtvcmRlcj10aGlzLl9vcmRlcjt9dGhpcy5feD14O3RoaXMuX3k9eTt0aGlzLl96PXo7dGhpcy5fb3JkZXI9b3JkZXI7dGhpcy5fb25DaGFuZ2VDYWxsYmFjaygpO3JldHVybiB0aGlzO31jbG9uZSgpe3JldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLl94LHRoaXMuX3ksdGhpcy5feix0aGlzLl9vcmRlcik7fWNvcHkoZXVsZXIpe3RoaXMuX3g9ZXVsZXIuX3g7dGhpcy5feT1ldWxlci5feTt0aGlzLl96PWV1bGVyLl96O3RoaXMuX29yZGVyPWV1bGVyLl9vcmRlcjt0aGlzLl9vbkNoYW5nZUNhbGxiYWNrKCk7cmV0dXJuIHRoaXM7fXNldEZyb21Sb3RhdGlvbk1hdHJpeChtLG9yZGVyLHVwZGF0ZSl7aWYob3JkZXI9PT12b2lkIDApe29yZGVyPXRoaXMuX29yZGVyO31pZih1cGRhdGU9PT12b2lkIDApe3VwZGF0ZT10cnVlO30vLyBhc3N1bWVzIHRoZSB1cHBlciAzeDMgb2YgbSBpcyBhIHB1cmUgcm90YXRpb24gbWF0cml4IChpLmUsIHVuc2NhbGVkKQoJY29uc3QgdGU9bS5lbGVtZW50cztjb25zdCBtMTE9dGVbMF0sbTEyPXRlWzRdLG0xMz10ZVs4XTtjb25zdCBtMjE9dGVbMV0sbTIyPXRlWzVdLG0yMz10ZVs5XTtjb25zdCBtMzE9dGVbMl0sbTMyPXRlWzZdLG0zMz10ZVsxMF07c3dpdGNoKG9yZGVyKXtjYXNlJ1hZWic6dGhpcy5feT1NYXRoLmFzaW4oY2xhbXAobTEzLC0xLDEpKTtpZihNYXRoLmFicyhtMTMpPDAuOTk5OTk5OSl7dGhpcy5feD1NYXRoLmF0YW4yKC1tMjMsbTMzKTt0aGlzLl96PU1hdGguYXRhbjIoLW0xMixtMTEpO31lbHNlIHt0aGlzLl94PU1hdGguYXRhbjIobTMyLG0yMik7dGhpcy5fej0wO31icmVhaztjYXNlJ1lYWic6dGhpcy5feD1NYXRoLmFzaW4oLWNsYW1wKG0yMywtMSwxKSk7aWYoTWF0aC5hYnMobTIzKTwwLjk5OTk5OTkpe3RoaXMuX3k9TWF0aC5hdGFuMihtMTMsbTMzKTt0aGlzLl96PU1hdGguYXRhbjIobTIxLG0yMik7fWVsc2Uge3RoaXMuX3k9TWF0aC5hdGFuMigtbTMxLG0xMSk7dGhpcy5fej0wO31icmVhaztjYXNlJ1pYWSc6dGhpcy5feD1NYXRoLmFzaW4oY2xhbXAobTMyLC0xLDEpKTtpZihNYXRoLmFicyhtMzIpPDAuOTk5OTk5OSl7dGhpcy5feT1NYXRoLmF0YW4yKC1tMzEsbTMzKTt0aGlzLl96PU1hdGguYXRhbjIoLW0xMixtMjIpO31lbHNlIHt0aGlzLl95PTA7dGhpcy5fej1NYXRoLmF0YW4yKG0yMSxtMTEpO31icmVhaztjYXNlJ1pZWCc6dGhpcy5feT1NYXRoLmFzaW4oLWNsYW1wKG0zMSwtMSwxKSk7aWYoTWF0aC5hYnMobTMxKTwwLjk5OTk5OTkpe3RoaXMuX3g9TWF0aC5hdGFuMihtMzIsbTMzKTt0aGlzLl96PU1hdGguYXRhbjIobTIxLG0xMSk7fWVsc2Uge3RoaXMuX3g9MDt0aGlzLl96PU1hdGguYXRhbjIoLW0xMixtMjIpO31icmVhaztjYXNlJ1laWCc6dGhpcy5fej1NYXRoLmFzaW4oY2xhbXAobTIxLC0xLDEpKTtpZihNYXRoLmFicyhtMjEpPDAuOTk5OTk5OSl7dGhpcy5feD1NYXRoLmF0YW4yKC1tMjMsbTIyKTt0aGlzLl95PU1hdGguYXRhbjIoLW0zMSxtMTEpO31lbHNlIHt0aGlzLl94PTA7dGhpcy5feT1NYXRoLmF0YW4yKG0xMyxtMzMpO31icmVhaztjYXNlJ1haWSc6dGhpcy5fej1NYXRoLmFzaW4oLWNsYW1wKG0xMiwtMSwxKSk7aWYoTWF0aC5hYnMobTEyKTwwLjk5OTk5OTkpe3RoaXMuX3g9TWF0aC5hdGFuMihtMzIsbTIyKTt0aGlzLl95PU1hdGguYXRhbjIobTEzLG0xMSk7fWVsc2Uge3RoaXMuX3g9TWF0aC5hdGFuMigtbTIzLG0zMyk7dGhpcy5feT0wO31icmVhaztkZWZhdWx0OmNvbnNvbGUud2FybignVEhSRUUuRXVsZXI6IC5zZXRGcm9tUm90YXRpb25NYXRyaXgoKSBlbmNvdW50ZXJlZCBhbiB1bmtub3duIG9yZGVyOiAnK29yZGVyKTt9dGhpcy5fb3JkZXI9b3JkZXI7aWYodXBkYXRlPT09dHJ1ZSl0aGlzLl9vbkNoYW5nZUNhbGxiYWNrKCk7cmV0dXJuIHRoaXM7fXNldEZyb21RdWF0ZXJuaW9uKHEsb3JkZXIsdXBkYXRlKXtfbWF0cml4JDEubWFrZVJvdGF0aW9uRnJvbVF1YXRlcm5pb24ocSk7cmV0dXJuIHRoaXMuc2V0RnJvbVJvdGF0aW9uTWF0cml4KF9tYXRyaXgkMSxvcmRlcix1cGRhdGUpO31zZXRGcm9tVmVjdG9yMyh2LG9yZGVyKXtpZihvcmRlcj09PXZvaWQgMCl7b3JkZXI9dGhpcy5fb3JkZXI7fXJldHVybiB0aGlzLnNldCh2Lngsdi55LHYueixvcmRlcik7fXJlb3JkZXIobmV3T3JkZXIpey8vIFdBUk5JTkc6IHRoaXMgZGlzY2FyZHMgcmV2b2x1dGlvbiBpbmZvcm1hdGlvbiAtYmhvdXN0b24KCV9xdWF0ZXJuaW9uJDMuc2V0RnJvbUV1bGVyKHRoaXMpO3JldHVybiB0aGlzLnNldEZyb21RdWF0ZXJuaW9uKF9xdWF0ZXJuaW9uJDMsbmV3T3JkZXIpO31lcXVhbHMoZXVsZXIpe3JldHVybiBldWxlci5feD09PXRoaXMuX3gmJmV1bGVyLl95PT09dGhpcy5feSYmZXVsZXIuX3o9PT10aGlzLl96JiZldWxlci5fb3JkZXI9PT10aGlzLl9vcmRlcjt9ZnJvbUFycmF5KGFycmF5KXt0aGlzLl94PWFycmF5WzBdO3RoaXMuX3k9YXJyYXlbMV07dGhpcy5fej1hcnJheVsyXTtpZihhcnJheVszXSE9PXVuZGVmaW5lZCl0aGlzLl9vcmRlcj1hcnJheVszXTt0aGlzLl9vbkNoYW5nZUNhbGxiYWNrKCk7cmV0dXJuIHRoaXM7fXRvQXJyYXkoYXJyYXksb2Zmc2V0KXtpZihhcnJheT09PXZvaWQgMCl7YXJyYXk9W107fWlmKG9mZnNldD09PXZvaWQgMCl7b2Zmc2V0PTA7fWFycmF5W29mZnNldF09dGhpcy5feDthcnJheVtvZmZzZXQrMV09dGhpcy5feTthcnJheVtvZmZzZXQrMl09dGhpcy5fejthcnJheVtvZmZzZXQrM109dGhpcy5fb3JkZXI7cmV0dXJuIGFycmF5O310b1ZlY3RvcjMob3B0aW9uYWxSZXN1bHQpe2lmKG9wdGlvbmFsUmVzdWx0KXtyZXR1cm4gb3B0aW9uYWxSZXN1bHQuc2V0KHRoaXMuX3gsdGhpcy5feSx0aGlzLl96KTt9ZWxzZSB7cmV0dXJuIG5ldyBWZWN0b3IzKHRoaXMuX3gsdGhpcy5feSx0aGlzLl96KTt9fV9vbkNoYW5nZShjYWxsYmFjayl7dGhpcy5fb25DaGFuZ2VDYWxsYmFjaz1jYWxsYmFjaztyZXR1cm4gdGhpczt9X29uQ2hhbmdlQ2FsbGJhY2soKXt9fUV1bGVyLnByb3RvdHlwZS5pc0V1bGVyPXRydWU7RXVsZXIuRGVmYXVsdE9yZGVyPSdYWVonO0V1bGVyLlJvdGF0aW9uT3JkZXJzPVsnWFlaJywnWVpYJywnWlhZJywnWFpZJywnWVhaJywnWllYJ107Y2xhc3MgTGF5ZXJze2NvbnN0cnVjdG9yKCl7dGhpcy5tYXNrPTF8MDt9c2V0KGNoYW5uZWwpe3RoaXMubWFzaz0oMTw8Y2hhbm5lbHwwKT4+PjA7fWVuYWJsZShjaGFubmVsKXt0aGlzLm1hc2t8PTE8PGNoYW5uZWx8MDt9ZW5hYmxlQWxsKCl7dGhpcy5tYXNrPTB4ZmZmZmZmZmZ8MDt9dG9nZ2xlKGNoYW5uZWwpe3RoaXMubWFza149MTw8Y2hhbm5lbHwwO31kaXNhYmxlKGNoYW5uZWwpe3RoaXMubWFzayY9figxPDxjaGFubmVsfDApO31kaXNhYmxlQWxsKCl7dGhpcy5tYXNrPTA7fXRlc3QobGF5ZXJzKXtyZXR1cm4gKHRoaXMubWFzayZsYXllcnMubWFzaykhPT0wO31pc0VuYWJsZWQoY2hhbm5lbCl7cmV0dXJuICh0aGlzLm1hc2smKDE8PGNoYW5uZWx8MCkpIT09MDt9fWxldCBfb2JqZWN0M0RJZD0wO2NvbnN0IF92MSQ0PS8qQF9fUFVSRV9fKi9uZXcgVmVjdG9yMygpO2NvbnN0IF9xMT0vKkBfX1BVUkVfXyovbmV3IFF1YXRlcm5pb24oKTtjb25zdCBfbTEkMT0vKkBfX1BVUkVfXyovbmV3IE1hdHJpeDQoKTtjb25zdCBfdGFyZ2V0PS8qQF9fUFVSRV9fKi9uZXcgVmVjdG9yMygpO2NvbnN0IF9wb3NpdGlvbiQzPS8qQF9fUFVSRV9fKi9uZXcgVmVjdG9yMygpO2NvbnN0IF9zY2FsZSQyPS8qQF9fUFVSRV9fKi9uZXcgVmVjdG9yMygpO2NvbnN0IF9xdWF0ZXJuaW9uJDI9LypAX19QVVJFX18qL25ldyBRdWF0ZXJuaW9uKCk7Y29uc3QgX3hBeGlzPS8qQF9fUFVSRV9fKi9uZXcgVmVjdG9yMygxLDAsMCk7Y29uc3QgX3lBeGlzPS8qQF9fUFVSRV9fKi9uZXcgVmVjdG9yMygwLDEsMCk7Y29uc3QgX3pBeGlzPS8qQF9fUFVSRV9fKi9uZXcgVmVjdG9yMygwLDAsMSk7Y29uc3QgX2FkZGVkRXZlbnQ9e3R5cGU6J2FkZGVkJ307Y29uc3QgX3JlbW92ZWRFdmVudD17dHlwZToncmVtb3ZlZCd9O2NsYXNzIE9iamVjdDNEIGV4dGVuZHMgRXZlbnREaXNwYXRjaGVye2NvbnN0cnVjdG9yKCl7c3VwZXIoKTtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywnaWQnLHt2YWx1ZTpfb2JqZWN0M0RJZCsrfSk7dGhpcy51dWlkPWdlbmVyYXRlVVVJRCgpO3RoaXMubmFtZT0nJzt0aGlzLnR5cGU9J09iamVjdDNEJzt0aGlzLnBhcmVudD1udWxsO3RoaXMuY2hpbGRyZW49W107dGhpcy51cD1PYmplY3QzRC5EZWZhdWx0VXAuY2xvbmUoKTtjb25zdCBwb3NpdGlvbj1uZXcgVmVjdG9yMygpO2NvbnN0IHJvdGF0aW9uPW5ldyBFdWxlcigpO2NvbnN0IHF1YXRlcm5pb249bmV3IFF1YXRlcm5pb24oKTtjb25zdCBzY2FsZT1uZXcgVmVjdG9yMygxLDEsMSk7ZnVuY3Rpb24gb25Sb3RhdGlvbkNoYW5nZSgpe3F1YXRlcm5pb24uc2V0RnJvbUV1bGVyKHJvdGF0aW9uLGZhbHNlKTt9ZnVuY3Rpb24gb25RdWF0ZXJuaW9uQ2hhbmdlKCl7cm90YXRpb24uc2V0RnJvbVF1YXRlcm5pb24ocXVhdGVybmlvbix1bmRlZmluZWQsZmFsc2UpO31yb3RhdGlvbi5fb25DaGFuZ2Uob25Sb3RhdGlvbkNoYW5nZSk7cXVhdGVybmlvbi5fb25DaGFuZ2Uob25RdWF0ZXJuaW9uQ2hhbmdlKTtPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLHtwb3NpdGlvbjp7Y29uZmlndXJhYmxlOnRydWUsZW51bWVyYWJsZTp0cnVlLHZhbHVlOnBvc2l0aW9ufSxyb3RhdGlvbjp7Y29uZmlndXJhYmxlOnRydWUsZW51bWVyYWJsZTp0cnVlLHZhbHVlOnJvdGF0aW9ufSxxdWF0ZXJuaW9uOntjb25maWd1cmFibGU6dHJ1ZSxlbnVtZXJhYmxlOnRydWUsdmFsdWU6cXVhdGVybmlvbn0sc2NhbGU6e2NvbmZpZ3VyYWJsZTp0cnVlLGVudW1lcmFibGU6dHJ1ZSx2YWx1ZTpzY2FsZX0sbW9kZWxWaWV3TWF0cml4Ont2YWx1ZTpuZXcgTWF0cml4NCgpfSxub3JtYWxNYXRyaXg6e3ZhbHVlOm5ldyBNYXRyaXgzKCl9fSk7dGhpcy5tYXRyaXg9bmV3IE1hdHJpeDQoKTt0aGlzLm1hdHJpeFdvcmxkPW5ldyBNYXRyaXg0KCk7dGhpcy5tYXRyaXhBdXRvVXBkYXRlPU9iamVjdDNELkRlZmF1bHRNYXRyaXhBdXRvVXBkYXRlO3RoaXMubWF0cml4V29ybGROZWVkc1VwZGF0ZT1mYWxzZTt0aGlzLmxheWVycz1uZXcgTGF5ZXJzKCk7dGhpcy52aXNpYmxlPXRydWU7dGhpcy5jYXN0U2hhZG93PWZhbHNlO3RoaXMucmVjZWl2ZVNoYWRvdz1mYWxzZTt0aGlzLmZydXN0dW1DdWxsZWQ9dHJ1ZTt0aGlzLnJlbmRlck9yZGVyPTA7dGhpcy5hbmltYXRpb25zPVtdO3RoaXMudXNlckRhdGE9e307fW9uQmVmb3JlUmVuZGVyKCl7fW9uQWZ0ZXJSZW5kZXIoKXt9YXBwbHlNYXRyaXg0KG1hdHJpeCl7aWYodGhpcy5tYXRyaXhBdXRvVXBkYXRlKXRoaXMudXBkYXRlTWF0cml4KCk7dGhpcy5tYXRyaXgucHJlbXVsdGlwbHkobWF0cml4KTt0aGlzLm1hdHJpeC5kZWNvbXBvc2UodGhpcy5wb3NpdGlvbix0aGlzLnF1YXRlcm5pb24sdGhpcy5zY2FsZSk7fWFwcGx5UXVhdGVybmlvbihxKXt0aGlzLnF1YXRlcm5pb24ucHJlbXVsdGlwbHkocSk7cmV0dXJuIHRoaXM7fXNldFJvdGF0aW9uRnJvbUF4aXNBbmdsZShheGlzLGFuZ2xlKXsvLyBhc3N1bWVzIGF4aXMgaXMgbm9ybWFsaXplZAoJdGhpcy5xdWF0ZXJuaW9uLnNldEZyb21BeGlzQW5nbGUoYXhpcyxhbmdsZSk7fXNldFJvdGF0aW9uRnJvbUV1bGVyKGV1bGVyKXt0aGlzLnF1YXRlcm5pb24uc2V0RnJvbUV1bGVyKGV1bGVyLHRydWUpO31zZXRSb3RhdGlvbkZyb21NYXRyaXgobSl7Ly8gYXNzdW1lcyB0aGUgdXBwZXIgM3gzIG9mIG0gaXMgYSBwdXJlIHJvdGF0aW9uIG1hdHJpeCAoaS5lLCB1bnNjYWxlZCkKCXRoaXMucXVhdGVybmlvbi5zZXRGcm9tUm90YXRpb25NYXRyaXgobSk7fXNldFJvdGF0aW9uRnJvbVF1YXRlcm5pb24ocSl7Ly8gYXNzdW1lcyBxIGlzIG5vcm1hbGl6ZWQKCXRoaXMucXVhdGVybmlvbi5jb3B5KHEpO31yb3RhdGVPbkF4aXMoYXhpcyxhbmdsZSl7Ly8gcm90YXRlIG9iamVjdCBvbiBheGlzIGluIG9iamVjdCBzcGFjZQoJLy8gYXhpcyBpcyBhc3N1bWVkIHRvIGJlIG5vcm1hbGl6ZWQKCV9xMS5zZXRGcm9tQXhpc0FuZ2xlKGF4aXMsYW5nbGUpO3RoaXMucXVhdGVybmlvbi5tdWx0aXBseShfcTEpO3JldHVybiB0aGlzO31yb3RhdGVPbldvcmxkQXhpcyhheGlzLGFuZ2xlKXsvLyByb3RhdGUgb2JqZWN0IG9uIGF4aXMgaW4gd29ybGQgc3BhY2UKCS8vIGF4aXMgaXMgYXNzdW1lZCB0byBiZSBub3JtYWxpemVkCgkvLyBtZXRob2QgYXNzdW1lcyBubyByb3RhdGVkIHBhcmVudAoJX3ExLnNldEZyb21BeGlzQW5nbGUoYXhpcyxhbmdsZSk7dGhpcy5xdWF0ZXJuaW9uLnByZW11bHRpcGx5KF9xMSk7cmV0dXJuIHRoaXM7fXJvdGF0ZVgoYW5nbGUpe3JldHVybiB0aGlzLnJvdGF0ZU9uQXhpcyhfeEF4aXMsYW5nbGUpO31yb3RhdGVZKGFuZ2xlKXtyZXR1cm4gdGhpcy5yb3RhdGVPbkF4aXMoX3lBeGlzLGFuZ2xlKTt9cm90YXRlWihhbmdsZSl7cmV0dXJuIHRoaXMucm90YXRlT25BeGlzKF96QXhpcyxhbmdsZSk7fXRyYW5zbGF0ZU9uQXhpcyhheGlzLGRpc3RhbmNlKXsvLyB0cmFuc2xhdGUgb2JqZWN0IGJ5IGRpc3RhbmNlIGFsb25nIGF4aXMgaW4gb2JqZWN0IHNwYWNlCgkvLyBheGlzIGlzIGFzc3VtZWQgdG8gYmUgbm9ybWFsaXplZAoJX3YxJDQuY29weShheGlzKS5hcHBseVF1YXRlcm5pb24odGhpcy5xdWF0ZXJuaW9uKTt0aGlzLnBvc2l0aW9uLmFkZChfdjEkNC5tdWx0aXBseVNjYWxhcihkaXN0YW5jZSkpO3JldHVybiB0aGlzO310cmFuc2xhdGVYKGRpc3RhbmNlKXtyZXR1cm4gdGhpcy50cmFuc2xhdGVPbkF4aXMoX3hBeGlzLGRpc3RhbmNlKTt9dHJhbnNsYXRlWShkaXN0YW5jZSl7cmV0dXJuIHRoaXMudHJhbnNsYXRlT25BeGlzKF95QXhpcyxkaXN0YW5jZSk7fXRyYW5zbGF0ZVooZGlzdGFuY2Upe3JldHVybiB0aGlzLnRyYW5zbGF0ZU9uQXhpcyhfekF4aXMsZGlzdGFuY2UpO31sb2NhbFRvV29ybGQodmVjdG9yKXtyZXR1cm4gdmVjdG9yLmFwcGx5TWF0cml4NCh0aGlzLm1hdHJpeFdvcmxkKTt9d29ybGRUb0xvY2FsKHZlY3Rvcil7cmV0dXJuIHZlY3Rvci5hcHBseU1hdHJpeDQoX20xJDEuY29weSh0aGlzLm1hdHJpeFdvcmxkKS5pbnZlcnQoKSk7fWxvb2tBdCh4LHkseil7Ly8gVGhpcyBtZXRob2QgZG9lcyBub3Qgc3VwcG9ydCBvYmplY3RzIGhhdmluZyBub24tdW5pZm9ybWx5LXNjYWxlZCBwYXJlbnQocykKCWlmKHguaXNWZWN0b3IzKXtfdGFyZ2V0LmNvcHkoeCk7fWVsc2Uge190YXJnZXQuc2V0KHgseSx6KTt9Y29uc3QgcGFyZW50PXRoaXMucGFyZW50O3RoaXMudXBkYXRlV29ybGRNYXRyaXgodHJ1ZSxmYWxzZSk7X3Bvc2l0aW9uJDMuc2V0RnJvbU1hdHJpeFBvc2l0aW9uKHRoaXMubWF0cml4V29ybGQpO2lmKHRoaXMuaXNDYW1lcmF8fHRoaXMuaXNMaWdodCl7X20xJDEubG9va0F0KF9wb3NpdGlvbiQzLF90YXJnZXQsdGhpcy51cCk7fWVsc2Uge19tMSQxLmxvb2tBdChfdGFyZ2V0LF9wb3NpdGlvbiQzLHRoaXMudXApO310aGlzLnF1YXRlcm5pb24uc2V0RnJvbVJvdGF0aW9uTWF0cml4KF9tMSQxKTtpZihwYXJlbnQpe19tMSQxLmV4dHJhY3RSb3RhdGlvbihwYXJlbnQubWF0cml4V29ybGQpO19xMS5zZXRGcm9tUm90YXRpb25NYXRyaXgoX20xJDEpO3RoaXMucXVhdGVybmlvbi5wcmVtdWx0aXBseShfcTEuaW52ZXJ0KCkpO319YWRkKG9iamVjdCl7aWYoYXJndW1lbnRzLmxlbmd0aD4xKXtmb3IobGV0IGk9MDtpPGFyZ3VtZW50cy5sZW5ndGg7aSsrKXt0aGlzLmFkZChhcmd1bWVudHNbaV0pO31yZXR1cm4gdGhpczt9aWYob2JqZWN0PT09dGhpcyl7Y29uc29sZS5lcnJvcignVEhSRUUuT2JqZWN0M0QuYWRkOiBvYmplY3QgY2FuXCd0IGJlIGFkZGVkIGFzIGEgY2hpbGQgb2YgaXRzZWxmLicsb2JqZWN0KTtyZXR1cm4gdGhpczt9aWYob2JqZWN0JiZvYmplY3QuaXNPYmplY3QzRCl7aWYob2JqZWN0LnBhcmVudCE9PW51bGwpe29iamVjdC5wYXJlbnQucmVtb3ZlKG9iamVjdCk7fW9iamVjdC5wYXJlbnQ9dGhpczt0aGlzLmNoaWxkcmVuLnB1c2gob2JqZWN0KTtvYmplY3QuZGlzcGF0Y2hFdmVudChfYWRkZWRFdmVudCk7fWVsc2Uge2NvbnNvbGUuZXJyb3IoJ1RIUkVFLk9iamVjdDNELmFkZDogb2JqZWN0IG5vdCBhbiBpbnN0YW5jZSBvZiBUSFJFRS5PYmplY3QzRC4nLG9iamVjdCk7fXJldHVybiB0aGlzO31yZW1vdmUob2JqZWN0KXtpZihhcmd1bWVudHMubGVuZ3RoPjEpe2ZvcihsZXQgaT0wO2k8YXJndW1lbnRzLmxlbmd0aDtpKyspe3RoaXMucmVtb3ZlKGFyZ3VtZW50c1tpXSk7fXJldHVybiB0aGlzO31jb25zdCBpbmRleD10aGlzLmNoaWxkcmVuLmluZGV4T2Yob2JqZWN0KTtpZihpbmRleCE9PS0xKXtvYmplY3QucGFyZW50PW51bGw7dGhpcy5jaGlsZHJlbi5zcGxpY2UoaW5kZXgsMSk7b2JqZWN0LmRpc3BhdGNoRXZlbnQoX3JlbW92ZWRFdmVudCk7fXJldHVybiB0aGlzO31yZW1vdmVGcm9tUGFyZW50KCl7Y29uc3QgcGFyZW50PXRoaXMucGFyZW50O2lmKHBhcmVudCE9PW51bGwpe3BhcmVudC5yZW1vdmUodGhpcyk7fXJldHVybiB0aGlzO31jbGVhcigpe2ZvcihsZXQgaT0wO2k8dGhpcy5jaGlsZHJlbi5sZW5ndGg7aSsrKXtjb25zdCBvYmplY3Q9dGhpcy5jaGlsZHJlbltpXTtvYmplY3QucGFyZW50PW51bGw7b2JqZWN0LmRpc3BhdGNoRXZlbnQoX3JlbW92ZWRFdmVudCk7fXRoaXMuY2hpbGRyZW4ubGVuZ3RoPTA7cmV0dXJuIHRoaXM7fWF0dGFjaChvYmplY3Qpey8vIGFkZHMgb2JqZWN0IGFzIGEgY2hpbGQgb2YgdGhpcywgd2hpbGUgbWFpbnRhaW5pbmcgdGhlIG9iamVjdCdzIHdvcmxkIHRyYW5zZm9ybQoJLy8gTm90ZTogVGhpcyBtZXRob2QgZG9lcyBub3Qgc3VwcG9ydCBzY2VuZSBncmFwaHMgaGF2aW5nIG5vbi11bmlmb3JtbHktc2NhbGVkIG5vZGVzKHMpCgl0aGlzLnVwZGF0ZVdvcmxkTWF0cml4KHRydWUsZmFsc2UpO19tMSQxLmNvcHkodGhpcy5tYXRyaXhXb3JsZCkuaW52ZXJ0KCk7aWYob2JqZWN0LnBhcmVudCE9PW51bGwpe29iamVjdC5wYXJlbnQudXBkYXRlV29ybGRNYXRyaXgodHJ1ZSxmYWxzZSk7X20xJDEubXVsdGlwbHkob2JqZWN0LnBhcmVudC5tYXRyaXhXb3JsZCk7fW9iamVjdC5hcHBseU1hdHJpeDQoX20xJDEpO3RoaXMuYWRkKG9iamVjdCk7b2JqZWN0LnVwZGF0ZVdvcmxkTWF0cml4KGZhbHNlLHRydWUpO3JldHVybiB0aGlzO31nZXRPYmplY3RCeUlkKGlkKXtyZXR1cm4gdGhpcy5nZXRPYmplY3RCeVByb3BlcnR5KCdpZCcsaWQpO31nZXRPYmplY3RCeU5hbWUobmFtZSl7cmV0dXJuIHRoaXMuZ2V0T2JqZWN0QnlQcm9wZXJ0eSgnbmFtZScsbmFtZSk7fWdldE9iamVjdEJ5UHJvcGVydHkobmFtZSx2YWx1ZSl7aWYodGhpc1tuYW1lXT09PXZhbHVlKXJldHVybiB0aGlzO2ZvcihsZXQgaT0wLGw9dGhpcy5jaGlsZHJlbi5sZW5ndGg7aTxsO2krKyl7Y29uc3QgY2hpbGQ9dGhpcy5jaGlsZHJlbltpXTtjb25zdCBvYmplY3Q9Y2hpbGQuZ2V0T2JqZWN0QnlQcm9wZXJ0eShuYW1lLHZhbHVlKTtpZihvYmplY3QhPT11bmRlZmluZWQpe3JldHVybiBvYmplY3Q7fX1yZXR1cm4gdW5kZWZpbmVkO31nZXRXb3JsZFBvc2l0aW9uKHRhcmdldCl7dGhpcy51cGRhdGVXb3JsZE1hdHJpeCh0cnVlLGZhbHNlKTtyZXR1cm4gdGFyZ2V0LnNldEZyb21NYXRyaXhQb3NpdGlvbih0aGlzLm1hdHJpeFdvcmxkKTt9Z2V0V29ybGRRdWF0ZXJuaW9uKHRhcmdldCl7dGhpcy51cGRhdGVXb3JsZE1hdHJpeCh0cnVlLGZhbHNlKTt0aGlzLm1hdHJpeFdvcmxkLmRlY29tcG9zZShfcG9zaXRpb24kMyx0YXJnZXQsX3NjYWxlJDIpO3JldHVybiB0YXJnZXQ7fWdldFdvcmxkU2NhbGUodGFyZ2V0KXt0aGlzLnVwZGF0ZVdvcmxkTWF0cml4KHRydWUsZmFsc2UpO3RoaXMubWF0cml4V29ybGQuZGVjb21wb3NlKF9wb3NpdGlvbiQzLF9xdWF0ZXJuaW9uJDIsdGFyZ2V0KTtyZXR1cm4gdGFyZ2V0O31nZXRXb3JsZERpcmVjdGlvbih0YXJnZXQpe3RoaXMudXBkYXRlV29ybGRNYXRyaXgodHJ1ZSxmYWxzZSk7Y29uc3QgZT10aGlzLm1hdHJpeFdvcmxkLmVsZW1lbnRzO3JldHVybiB0YXJnZXQuc2V0KGVbOF0sZVs5XSxlWzEwXSkubm9ybWFsaXplKCk7fXJheWNhc3QoKXt9dHJhdmVyc2UoY2FsbGJhY2spe2NhbGxiYWNrKHRoaXMpO2NvbnN0IGNoaWxkcmVuPXRoaXMuY2hpbGRyZW47Zm9yKGxldCBpPTAsbD1jaGlsZHJlbi5sZW5ndGg7aTxsO2krKyl7Y2hpbGRyZW5baV0udHJhdmVyc2UoY2FsbGJhY2spO319dHJhdmVyc2VWaXNpYmxlKGNhbGxiYWNrKXtpZih0aGlzLnZpc2libGU9PT1mYWxzZSlyZXR1cm47Y2FsbGJhY2sodGhpcyk7Y29uc3QgY2hpbGRyZW49dGhpcy5jaGlsZHJlbjtmb3IobGV0IGk9MCxsPWNoaWxkcmVuLmxlbmd0aDtpPGw7aSsrKXtjaGlsZHJlbltpXS50cmF2ZXJzZVZpc2libGUoY2FsbGJhY2spO319dHJhdmVyc2VBbmNlc3RvcnMoY2FsbGJhY2spe2NvbnN0IHBhcmVudD10aGlzLnBhcmVudDtpZihwYXJlbnQhPT1udWxsKXtjYWxsYmFjayhwYXJlbnQpO3BhcmVudC50cmF2ZXJzZUFuY2VzdG9ycyhjYWxsYmFjayk7fX11cGRhdGVNYXRyaXgoKXt0aGlzLm1hdHJpeC5jb21wb3NlKHRoaXMucG9zaXRpb24sdGhpcy5xdWF0ZXJuaW9uLHRoaXMuc2NhbGUpO3RoaXMubWF0cml4V29ybGROZWVkc1VwZGF0ZT10cnVlO311cGRhdGVNYXRyaXhXb3JsZChmb3JjZSl7aWYodGhpcy5tYXRyaXhBdXRvVXBkYXRlKXRoaXMudXBkYXRlTWF0cml4KCk7aWYodGhpcy5tYXRyaXhXb3JsZE5lZWRzVXBkYXRlfHxmb3JjZSl7aWYodGhpcy5wYXJlbnQ9PT1udWxsKXt0aGlzLm1hdHJpeFdvcmxkLmNvcHkodGhpcy5tYXRyaXgpO31lbHNlIHt0aGlzLm1hdHJpeFdvcmxkLm11bHRpcGx5TWF0cmljZXModGhpcy5wYXJlbnQubWF0cml4V29ybGQsdGhpcy5tYXRyaXgpO310aGlzLm1hdHJpeFdvcmxkTmVlZHNVcGRhdGU9ZmFsc2U7Zm9yY2U9dHJ1ZTt9Ly8gdXBkYXRlIGNoaWxkcmVuCgljb25zdCBjaGlsZHJlbj10aGlzLmNoaWxkcmVuO2ZvcihsZXQgaT0wLGw9Y2hpbGRyZW4ubGVuZ3RoO2k8bDtpKyspe2NoaWxkcmVuW2ldLnVwZGF0ZU1hdHJpeFdvcmxkKGZvcmNlKTt9fXVwZGF0ZVdvcmxkTWF0cml4KHVwZGF0ZVBhcmVudHMsdXBkYXRlQ2hpbGRyZW4pe2NvbnN0IHBhcmVudD10aGlzLnBhcmVudDtpZih1cGRhdGVQYXJlbnRzPT09dHJ1ZSYmcGFyZW50IT09bnVsbCl7cGFyZW50LnVwZGF0ZVdvcmxkTWF0cml4KHRydWUsZmFsc2UpO31pZih0aGlzLm1hdHJpeEF1dG9VcGRhdGUpdGhpcy51cGRhdGVNYXRyaXgoKTtpZih0aGlzLnBhcmVudD09PW51bGwpe3RoaXMubWF0cml4V29ybGQuY29weSh0aGlzLm1hdHJpeCk7fWVsc2Uge3RoaXMubWF0cml4V29ybGQubXVsdGlwbHlNYXRyaWNlcyh0aGlzLnBhcmVudC5tYXRyaXhXb3JsZCx0aGlzLm1hdHJpeCk7fS8vIHVwZGF0ZSBjaGlsZHJlbgoJaWYodXBkYXRlQ2hpbGRyZW49PT10cnVlKXtjb25zdCBjaGlsZHJlbj10aGlzLmNoaWxkcmVuO2ZvcihsZXQgaT0wLGw9Y2hpbGRyZW4ubGVuZ3RoO2k8bDtpKyspe2NoaWxkcmVuW2ldLnVwZGF0ZVdvcmxkTWF0cml4KGZhbHNlLHRydWUpO319fXRvSlNPTihtZXRhKXsvLyBtZXRhIGlzIGEgc3RyaW5nIHdoZW4gY2FsbGVkIGZyb20gSlNPTi5zdHJpbmdpZnkKCWNvbnN0IGlzUm9vdE9iamVjdD1tZXRhPT09dW5kZWZpbmVkfHx0eXBlb2YgbWV0YT09PSdzdHJpbmcnO2NvbnN0IG91dHB1dD17fTsvLyBtZXRhIGlzIGEgaGFzaCB1c2VkIHRvIGNvbGxlY3QgZ2VvbWV0cmllcywgbWF0ZXJpYWxzLgoJLy8gbm90IHByb3ZpZGluZyBpdCBpbXBsaWVzIHRoYXQgdGhpcyBpcyB0aGUgcm9vdCBvYmplY3QKCS8vIGJlaW5nIHNlcmlhbGl6ZWQuCglpZihpc1Jvb3RPYmplY3Qpey8vIGluaXRpYWxpemUgbWV0YSBvYmoKCW1ldGE9e2dlb21ldHJpZXM6e30sbWF0ZXJpYWxzOnt9LHRleHR1cmVzOnt9LGltYWdlczp7fSxzaGFwZXM6e30sc2tlbGV0b25zOnt9LGFuaW1hdGlvbnM6e319O291dHB1dC5tZXRhZGF0YT17dmVyc2lvbjo0LjUsdHlwZTonT2JqZWN0JyxnZW5lcmF0b3I6J09iamVjdDNELnRvSlNPTid9O30vLyBzdGFuZGFyZCBPYmplY3QzRCBzZXJpYWxpemF0aW9uCgljb25zdCBvYmplY3Q9e307b2JqZWN0LnV1aWQ9dGhpcy51dWlkO29iamVjdC50eXBlPXRoaXMudHlwZTtpZih0aGlzLm5hbWUhPT0nJylvYmplY3QubmFtZT10aGlzLm5hbWU7aWYodGhpcy5jYXN0U2hhZG93PT09dHJ1ZSlvYmplY3QuY2FzdFNoYWRvdz10cnVlO2lmKHRoaXMucmVjZWl2ZVNoYWRvdz09PXRydWUpb2JqZWN0LnJlY2VpdmVTaGFkb3c9dHJ1ZTtpZih0aGlzLnZpc2libGU9PT1mYWxzZSlvYmplY3QudmlzaWJsZT1mYWxzZTtpZih0aGlzLmZydXN0dW1DdWxsZWQ9PT1mYWxzZSlvYmplY3QuZnJ1c3R1bUN1bGxlZD1mYWxzZTtpZih0aGlzLnJlbmRlck9yZGVyIT09MClvYmplY3QucmVuZGVyT3JkZXI9dGhpcy5yZW5kZXJPcmRlcjtpZihKU09OLnN0cmluZ2lmeSh0aGlzLnVzZXJEYXRhKSE9PSd7fScpb2JqZWN0LnVzZXJEYXRhPXRoaXMudXNlckRhdGE7b2JqZWN0LmxheWVycz10aGlzLmxheWVycy5tYXNrO29iamVjdC5tYXRyaXg9dGhpcy5tYXRyaXgudG9BcnJheSgpO2lmKHRoaXMubWF0cml4QXV0b1VwZGF0ZT09PWZhbHNlKW9iamVjdC5tYXRyaXhBdXRvVXBkYXRlPWZhbHNlOy8vIG9iamVjdCBzcGVjaWZpYyBwcm9wZXJ0aWVzCglpZih0aGlzLmlzSW5zdGFuY2VkTWVzaCl7b2JqZWN0LnR5cGU9J0luc3RhbmNlZE1lc2gnO29iamVjdC5jb3VudD10aGlzLmNvdW50O29iamVjdC5pbnN0YW5jZU1hdHJpeD10aGlzLmluc3RhbmNlTWF0cml4LnRvSlNPTigpO2lmKHRoaXMuaW5zdGFuY2VDb2xvciE9PW51bGwpb2JqZWN0Lmluc3RhbmNlQ29sb3I9dGhpcy5pbnN0YW5jZUNvbG9yLnRvSlNPTigpO30vLwoJZnVuY3Rpb24gc2VyaWFsaXplKGxpYnJhcnksZWxlbWVudCl7aWYobGlicmFyeVtlbGVtZW50LnV1aWRdPT09dW5kZWZpbmVkKXtsaWJyYXJ5W2VsZW1lbnQudXVpZF09ZWxlbWVudC50b0pTT04obWV0YSk7fXJldHVybiBlbGVtZW50LnV1aWQ7fWlmKHRoaXMuaXNTY2VuZSl7aWYodGhpcy5iYWNrZ3JvdW5kKXtpZih0aGlzLmJhY2tncm91bmQuaXNDb2xvcil7b2JqZWN0LmJhY2tncm91bmQ9dGhpcy5iYWNrZ3JvdW5kLnRvSlNPTigpO31lbHNlIGlmKHRoaXMuYmFja2dyb3VuZC5pc1RleHR1cmUpe29iamVjdC5iYWNrZ3JvdW5kPXRoaXMuYmFja2dyb3VuZC50b0pTT04obWV0YSkudXVpZDt9fWlmKHRoaXMuZW52aXJvbm1lbnQmJnRoaXMuZW52aXJvbm1lbnQuaXNUZXh0dXJlKXtvYmplY3QuZW52aXJvbm1lbnQ9dGhpcy5lbnZpcm9ubWVudC50b0pTT04obWV0YSkudXVpZDt9fWVsc2UgaWYodGhpcy5pc01lc2h8fHRoaXMuaXNMaW5lfHx0aGlzLmlzUG9pbnRzKXtvYmplY3QuZ2VvbWV0cnk9c2VyaWFsaXplKG1ldGEuZ2VvbWV0cmllcyx0aGlzLmdlb21ldHJ5KTtjb25zdCBwYXJhbWV0ZXJzPXRoaXMuZ2VvbWV0cnkucGFyYW1ldGVycztpZihwYXJhbWV0ZXJzIT09dW5kZWZpbmVkJiZwYXJhbWV0ZXJzLnNoYXBlcyE9PXVuZGVmaW5lZCl7Y29uc3Qgc2hhcGVzPXBhcmFtZXRlcnMuc2hhcGVzO2lmKEFycmF5LmlzQXJyYXkoc2hhcGVzKSl7Zm9yKGxldCBpPTAsbD1zaGFwZXMubGVuZ3RoO2k8bDtpKyspe2NvbnN0IHNoYXBlPXNoYXBlc1tpXTtzZXJpYWxpemUobWV0YS5zaGFwZXMsc2hhcGUpO319ZWxzZSB7c2VyaWFsaXplKG1ldGEuc2hhcGVzLHNoYXBlcyk7fX19aWYodGhpcy5pc1NraW5uZWRNZXNoKXtvYmplY3QuYmluZE1vZGU9dGhpcy5iaW5kTW9kZTtvYmplY3QuYmluZE1hdHJpeD10aGlzLmJpbmRNYXRyaXgudG9BcnJheSgpO2lmKHRoaXMuc2tlbGV0b24hPT11bmRlZmluZWQpe3NlcmlhbGl6ZShtZXRhLnNrZWxldG9ucyx0aGlzLnNrZWxldG9uKTtvYmplY3Quc2tlbGV0b249dGhpcy5za2VsZXRvbi51dWlkO319aWYodGhpcy5tYXRlcmlhbCE9PXVuZGVmaW5lZCl7aWYoQXJyYXkuaXNBcnJheSh0aGlzLm1hdGVyaWFsKSl7Y29uc3QgdXVpZHM9W107Zm9yKGxldCBpPTAsbD10aGlzLm1hdGVyaWFsLmxlbmd0aDtpPGw7aSsrKXt1dWlkcy5wdXNoKHNlcmlhbGl6ZShtZXRhLm1hdGVyaWFscyx0aGlzLm1hdGVyaWFsW2ldKSk7fW9iamVjdC5tYXRlcmlhbD11dWlkczt9ZWxzZSB7b2JqZWN0Lm1hdGVyaWFsPXNlcmlhbGl6ZShtZXRhLm1hdGVyaWFscyx0aGlzLm1hdGVyaWFsKTt9fS8vCglpZih0aGlzLmNoaWxkcmVuLmxlbmd0aD4wKXtvYmplY3QuY2hpbGRyZW49W107Zm9yKGxldCBpPTA7aTx0aGlzLmNoaWxkcmVuLmxlbmd0aDtpKyspe29iamVjdC5jaGlsZHJlbi5wdXNoKHRoaXMuY2hpbGRyZW5baV0udG9KU09OKG1ldGEpLm9iamVjdCk7fX0vLwoJaWYodGhpcy5hbmltYXRpb25zLmxlbmd0aD4wKXtvYmplY3QuYW5pbWF0aW9ucz1bXTtmb3IobGV0IGk9MDtpPHRoaXMuYW5pbWF0aW9ucy5sZW5ndGg7aSsrKXtjb25zdCBhbmltYXRpb249dGhpcy5hbmltYXRpb25zW2ldO29iamVjdC5hbmltYXRpb25zLnB1c2goc2VyaWFsaXplKG1ldGEuYW5pbWF0aW9ucyxhbmltYXRpb24pKTt9fWlmKGlzUm9vdE9iamVjdCl7Y29uc3QgZ2VvbWV0cmllcz1leHRyYWN0RnJvbUNhY2hlKG1ldGEuZ2VvbWV0cmllcyk7Y29uc3QgbWF0ZXJpYWxzPWV4dHJhY3RGcm9tQ2FjaGUobWV0YS5tYXRlcmlhbHMpO2NvbnN0IHRleHR1cmVzPWV4dHJhY3RGcm9tQ2FjaGUobWV0YS50ZXh0dXJlcyk7Y29uc3QgaW1hZ2VzPWV4dHJhY3RGcm9tQ2FjaGUobWV0YS5pbWFnZXMpO2NvbnN0IHNoYXBlcz1leHRyYWN0RnJvbUNhY2hlKG1ldGEuc2hhcGVzKTtjb25zdCBza2VsZXRvbnM9ZXh0cmFjdEZyb21DYWNoZShtZXRhLnNrZWxldG9ucyk7Y29uc3QgYW5pbWF0aW9ucz1leHRyYWN0RnJvbUNhY2hlKG1ldGEuYW5pbWF0aW9ucyk7aWYoZ2VvbWV0cmllcy5sZW5ndGg+MClvdXRwdXQuZ2VvbWV0cmllcz1nZW9tZXRyaWVzO2lmKG1hdGVyaWFscy5sZW5ndGg+MClvdXRwdXQubWF0ZXJpYWxzPW1hdGVyaWFscztpZih0ZXh0dXJlcy5sZW5ndGg+MClvdXRwdXQudGV4dHVyZXM9dGV4dHVyZXM7aWYoaW1hZ2VzLmxlbmd0aD4wKW91dHB1dC5pbWFnZXM9aW1hZ2VzO2lmKHNoYXBlcy5sZW5ndGg+MClvdXRwdXQuc2hhcGVzPXNoYXBlcztpZihza2VsZXRvbnMubGVuZ3RoPjApb3V0cHV0LnNrZWxldG9ucz1za2VsZXRvbnM7aWYoYW5pbWF0aW9ucy5sZW5ndGg+MClvdXRwdXQuYW5pbWF0aW9ucz1hbmltYXRpb25zO31vdXRwdXQub2JqZWN0PW9iamVjdDtyZXR1cm4gb3V0cHV0Oy8vIGV4dHJhY3QgZGF0YSBmcm9tIHRoZSBjYWNoZSBoYXNoCgkvLyByZW1vdmUgbWV0YWRhdGEgb24gZWFjaCBpdGVtCgkvLyBhbmQgcmV0dXJuIGFzIGFycmF5CglmdW5jdGlvbiBleHRyYWN0RnJvbUNhY2hlKGNhY2hlKXtjb25zdCB2YWx1ZXM9W107Zm9yKGNvbnN0IGtleSBpbiBjYWNoZSl7Y29uc3QgZGF0YT1jYWNoZVtrZXldO2RlbGV0ZSBkYXRhLm1ldGFkYXRhO3ZhbHVlcy5wdXNoKGRhdGEpO31yZXR1cm4gdmFsdWVzO319Y2xvbmUocmVjdXJzaXZlKXtyZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IoKS5jb3B5KHRoaXMscmVjdXJzaXZlKTt9Y29weShzb3VyY2UscmVjdXJzaXZlKXtpZihyZWN1cnNpdmU9PT12b2lkIDApe3JlY3Vyc2l2ZT10cnVlO310aGlzLm5hbWU9c291cmNlLm5hbWU7dGhpcy51cC5jb3B5KHNvdXJjZS51cCk7dGhpcy5wb3NpdGlvbi5jb3B5KHNvdXJjZS5wb3NpdGlvbik7dGhpcy5yb3RhdGlvbi5vcmRlcj1zb3VyY2Uucm90YXRpb24ub3JkZXI7dGhpcy5xdWF0ZXJuaW9uLmNvcHkoc291cmNlLnF1YXRlcm5pb24pO3RoaXMuc2NhbGUuY29weShzb3VyY2Uuc2NhbGUpO3RoaXMubWF0cml4LmNvcHkoc291cmNlLm1hdHJpeCk7dGhpcy5tYXRyaXhXb3JsZC5jb3B5KHNvdXJjZS5tYXRyaXhXb3JsZCk7dGhpcy5tYXRyaXhBdXRvVXBkYXRlPXNvdXJjZS5tYXRyaXhBdXRvVXBkYXRlO3RoaXMubWF0cml4V29ybGROZWVkc1VwZGF0ZT1zb3VyY2UubWF0cml4V29ybGROZWVkc1VwZGF0ZTt0aGlzLmxheWVycy5tYXNrPXNvdXJjZS5sYXllcnMubWFzazt0aGlzLnZpc2libGU9c291cmNlLnZpc2libGU7dGhpcy5jYXN0U2hhZG93PXNvdXJjZS5jYXN0U2hhZG93O3RoaXMucmVjZWl2ZVNoYWRvdz1zb3VyY2UucmVjZWl2ZVNoYWRvdzt0aGlzLmZydXN0dW1DdWxsZWQ9c291cmNlLmZydXN0dW1DdWxsZWQ7dGhpcy5yZW5kZXJPcmRlcj1zb3VyY2UucmVuZGVyT3JkZXI7dGhpcy51c2VyRGF0YT1KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHNvdXJjZS51c2VyRGF0YSkpO2lmKHJlY3Vyc2l2ZT09PXRydWUpe2ZvcihsZXQgaT0wO2k8c291cmNlLmNoaWxkcmVuLmxlbmd0aDtpKyspe2NvbnN0IGNoaWxkPXNvdXJjZS5jaGlsZHJlbltpXTt0aGlzLmFkZChjaGlsZC5jbG9uZSgpKTt9fXJldHVybiB0aGlzO319T2JqZWN0M0QuRGVmYXVsdFVwPW5ldyBWZWN0b3IzKDAsMSwwKTtPYmplY3QzRC5EZWZhdWx0TWF0cml4QXV0b1VwZGF0ZT10cnVlO09iamVjdDNELnByb3RvdHlwZS5pc09iamVjdDNEPXRydWU7Y29uc3QgX3YwJDE9LypAX19QVVJFX18qL25ldyBWZWN0b3IzKCk7Y29uc3QgX3YxJDM9LypAX19QVVJFX18qL25ldyBWZWN0b3IzKCk7Y29uc3QgX3YyJDI9LypAX19QVVJFX18qL25ldyBWZWN0b3IzKCk7Y29uc3QgX3YzJDE9LypAX19QVVJFX18qL25ldyBWZWN0b3IzKCk7Y29uc3QgX3ZhYj0vKkBfX1BVUkVfXyovbmV3IFZlY3RvcjMoKTtjb25zdCBfdmFjPS8qQF9fUFVSRV9fKi9uZXcgVmVjdG9yMygpO2NvbnN0IF92YmM9LypAX19QVVJFX18qL25ldyBWZWN0b3IzKCk7Y29uc3QgX3ZhcD0vKkBfX1BVUkVfXyovbmV3IFZlY3RvcjMoKTtjb25zdCBfdmJwPS8qQF9fUFVSRV9fKi9uZXcgVmVjdG9yMygpO2NvbnN0IF92Y3A9LypAX19QVVJFX18qL25ldyBWZWN0b3IzKCk7Y2xhc3MgVHJpYW5nbGV7Y29uc3RydWN0b3IoYSxiLGMpe2lmKGE9PT12b2lkIDApe2E9bmV3IFZlY3RvcjMoKTt9aWYoYj09PXZvaWQgMCl7Yj1uZXcgVmVjdG9yMygpO31pZihjPT09dm9pZCAwKXtjPW5ldyBWZWN0b3IzKCk7fXRoaXMuYT1hO3RoaXMuYj1iO3RoaXMuYz1jO31zdGF0aWMgZ2V0Tm9ybWFsKGEsYixjLHRhcmdldCl7dGFyZ2V0LnN1YlZlY3RvcnMoYyxiKTtfdjAkMS5zdWJWZWN0b3JzKGEsYik7dGFyZ2V0LmNyb3NzKF92MCQxKTtjb25zdCB0YXJnZXRMZW5ndGhTcT10YXJnZXQubGVuZ3RoU3EoKTtpZih0YXJnZXRMZW5ndGhTcT4wKXtyZXR1cm4gdGFyZ2V0Lm11bHRpcGx5U2NhbGFyKDEvTWF0aC5zcXJ0KHRhcmdldExlbmd0aFNxKSk7fXJldHVybiB0YXJnZXQuc2V0KDAsMCwwKTt9Ly8gc3RhdGljL2luc3RhbmNlIG1ldGhvZCB0byBjYWxjdWxhdGUgYmFyeWNlbnRyaWMgY29vcmRpbmF0ZXMKCS8vIGJhc2VkIG9uOiBodHRwOi8vd3d3LmJsYWNrcGF3bi5jb20vdGV4dHMvcG9pbnRpbnBvbHkvZGVmYXVsdC5odG1sCglzdGF0aWMgZ2V0QmFyeWNvb3JkKHBvaW50LGEsYixjLHRhcmdldCl7X3YwJDEuc3ViVmVjdG9ycyhjLGEpO192MSQzLnN1YlZlY3RvcnMoYixhKTtfdjIkMi5zdWJWZWN0b3JzKHBvaW50LGEpO2NvbnN0IGRvdDAwPV92MCQxLmRvdChfdjAkMSk7Y29uc3QgZG90MDE9X3YwJDEuZG90KF92MSQzKTtjb25zdCBkb3QwMj1fdjAkMS5kb3QoX3YyJDIpO2NvbnN0IGRvdDExPV92MSQzLmRvdChfdjEkMyk7Y29uc3QgZG90MTI9X3YxJDMuZG90KF92MiQyKTtjb25zdCBkZW5vbT1kb3QwMCpkb3QxMS1kb3QwMSpkb3QwMTsvLyBjb2xsaW5lYXIgb3Igc2luZ3VsYXIgdHJpYW5nbGUKCWlmKGRlbm9tPT09MCl7Ly8gYXJiaXRyYXJ5IGxvY2F0aW9uIG91dHNpZGUgb2YgdHJpYW5nbGU/CgkvLyBub3Qgc3VyZSBpZiB0aGlzIGlzIHRoZSBiZXN0IGlkZWEsIG1heWJlIHNob3VsZCBiZSByZXR1cm5pbmcgdW5kZWZpbmVkCglyZXR1cm4gdGFyZ2V0LnNldCgtMiwtMSwtMSk7fWNvbnN0IGludkRlbm9tPTEvZGVub207Y29uc3QgdT0oZG90MTEqZG90MDItZG90MDEqZG90MTIpKmludkRlbm9tO2NvbnN0IHY9KGRvdDAwKmRvdDEyLWRvdDAxKmRvdDAyKSppbnZEZW5vbTsvLyBiYXJ5Y2VudHJpYyBjb29yZGluYXRlcyBtdXN0IGFsd2F5cyBzdW0gdG8gMQoJcmV0dXJuIHRhcmdldC5zZXQoMS11LXYsdix1KTt9c3RhdGljIGNvbnRhaW5zUG9pbnQocG9pbnQsYSxiLGMpe3RoaXMuZ2V0QmFyeWNvb3JkKHBvaW50LGEsYixjLF92MyQxKTtyZXR1cm4gX3YzJDEueD49MCYmX3YzJDEueT49MCYmX3YzJDEueCtfdjMkMS55PD0xO31zdGF0aWMgZ2V0VVYocG9pbnQscDEscDIscDMsdXYxLHV2Mix1djMsdGFyZ2V0KXt0aGlzLmdldEJhcnljb29yZChwb2ludCxwMSxwMixwMyxfdjMkMSk7dGFyZ2V0LnNldCgwLDApO3RhcmdldC5hZGRTY2FsZWRWZWN0b3IodXYxLF92MyQxLngpO3RhcmdldC5hZGRTY2FsZWRWZWN0b3IodXYyLF92MyQxLnkpO3RhcmdldC5hZGRTY2FsZWRWZWN0b3IodXYzLF92MyQxLnopO3JldHVybiB0YXJnZXQ7fXN0YXRpYyBpc0Zyb250RmFjaW5nKGEsYixjLGRpcmVjdGlvbil7X3YwJDEuc3ViVmVjdG9ycyhjLGIpO192MSQzLnN1YlZlY3RvcnMoYSxiKTsvLyBzdHJpY3RseSBmcm9udCBmYWNpbmcKCXJldHVybiBfdjAkMS5jcm9zcyhfdjEkMykuZG90KGRpcmVjdGlvbik8MD90cnVlOmZhbHNlO31zZXQoYSxiLGMpe3RoaXMuYS5jb3B5KGEpO3RoaXMuYi5jb3B5KGIpO3RoaXMuYy5jb3B5KGMpO3JldHVybiB0aGlzO31zZXRGcm9tUG9pbnRzQW5kSW5kaWNlcyhwb2ludHMsaTAsaTEsaTIpe3RoaXMuYS5jb3B5KHBvaW50c1tpMF0pO3RoaXMuYi5jb3B5KHBvaW50c1tpMV0pO3RoaXMuYy5jb3B5KHBvaW50c1tpMl0pO3JldHVybiB0aGlzO31zZXRGcm9tQXR0cmlidXRlQW5kSW5kaWNlcyhhdHRyaWJ1dGUsaTAsaTEsaTIpe3RoaXMuYS5mcm9tQnVmZmVyQXR0cmlidXRlKGF0dHJpYnV0ZSxpMCk7dGhpcy5iLmZyb21CdWZmZXJBdHRyaWJ1dGUoYXR0cmlidXRlLGkxKTt0aGlzLmMuZnJvbUJ1ZmZlckF0dHJpYnV0ZShhdHRyaWJ1dGUsaTIpO3JldHVybiB0aGlzO31jbG9uZSgpe3JldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3RvcigpLmNvcHkodGhpcyk7fWNvcHkodHJpYW5nbGUpe3RoaXMuYS5jb3B5KHRyaWFuZ2xlLmEpO3RoaXMuYi5jb3B5KHRyaWFuZ2xlLmIpO3RoaXMuYy5jb3B5KHRyaWFuZ2xlLmMpO3JldHVybiB0aGlzO31nZXRBcmVhKCl7X3YwJDEuc3ViVmVjdG9ycyh0aGlzLmMsdGhpcy5iKTtfdjEkMy5zdWJWZWN0b3JzKHRoaXMuYSx0aGlzLmIpO3JldHVybiBfdjAkMS5jcm9zcyhfdjEkMykubGVuZ3RoKCkqMC41O31nZXRNaWRwb2ludCh0YXJnZXQpe3JldHVybiB0YXJnZXQuYWRkVmVjdG9ycyh0aGlzLmEsdGhpcy5iKS5hZGQodGhpcy5jKS5tdWx0aXBseVNjYWxhcigxLzMpO31nZXROb3JtYWwodGFyZ2V0KXtyZXR1cm4gVHJpYW5nbGUuZ2V0Tm9ybWFsKHRoaXMuYSx0aGlzLmIsdGhpcy5jLHRhcmdldCk7fWdldFBsYW5lKHRhcmdldCl7cmV0dXJuIHRhcmdldC5zZXRGcm9tQ29wbGFuYXJQb2ludHModGhpcy5hLHRoaXMuYix0aGlzLmMpO31nZXRCYXJ5Y29vcmQocG9pbnQsdGFyZ2V0KXtyZXR1cm4gVHJpYW5nbGUuZ2V0QmFyeWNvb3JkKHBvaW50LHRoaXMuYSx0aGlzLmIsdGhpcy5jLHRhcmdldCk7fWdldFVWKHBvaW50LHV2MSx1djIsdXYzLHRhcmdldCl7cmV0dXJuIFRyaWFuZ2xlLmdldFVWKHBvaW50LHRoaXMuYSx0aGlzLmIsdGhpcy5jLHV2MSx1djIsdXYzLHRhcmdldCk7fWNvbnRhaW5zUG9pbnQocG9pbnQpe3JldHVybiBUcmlhbmdsZS5jb250YWluc1BvaW50KHBvaW50LHRoaXMuYSx0aGlzLmIsdGhpcy5jKTt9aXNGcm9udEZhY2luZyhkaXJlY3Rpb24pe3JldHVybiBUcmlhbmdsZS5pc0Zyb250RmFjaW5nKHRoaXMuYSx0aGlzLmIsdGhpcy5jLGRpcmVjdGlvbik7fWludGVyc2VjdHNCb3goYm94KXtyZXR1cm4gYm94LmludGVyc2VjdHNUcmlhbmdsZSh0aGlzKTt9Y2xvc2VzdFBvaW50VG9Qb2ludChwLHRhcmdldCl7Y29uc3QgYT10aGlzLmEsYj10aGlzLmIsYz10aGlzLmM7bGV0IHYsdzsvLyBhbGdvcml0aG0gdGhhbmtzIHRvIFJlYWwtVGltZSBDb2xsaXNpb24gRGV0ZWN0aW9uIGJ5IENocmlzdGVyIEVyaWNzb24sCgkvLyBwdWJsaXNoZWQgYnkgTW9yZ2FuIEthdWZtYW5uIFB1Ymxpc2hlcnMsIChjKSAyMDA1IEVsc2V2aWVyIEluYy4sCgkvLyB1bmRlciB0aGUgYWNjb21wYW55aW5nIGxpY2Vuc2U7IHNlZSBjaGFwdGVyIDUuMS41IGZvciBkZXRhaWxlZCBleHBsYW5hdGlvbi4KCS8vIGJhc2ljYWxseSwgd2UncmUgZGlzdGluZ3Vpc2hpbmcgd2hpY2ggb2YgdGhlIHZvcm9ub2kgcmVnaW9ucyBvZiB0aGUgdHJpYW5nbGUKCS8vIHRoZSBwb2ludCBsaWVzIGluIHdpdGggdGhlIG1pbmltdW0gYW1vdW50IG9mIHJlZHVuZGFudCBjb21wdXRhdGlvbi4KCV92YWIuc3ViVmVjdG9ycyhiLGEpO192YWMuc3ViVmVjdG9ycyhjLGEpO192YXAuc3ViVmVjdG9ycyhwLGEpO2NvbnN0IGQxPV92YWIuZG90KF92YXApO2NvbnN0IGQyPV92YWMuZG90KF92YXApO2lmKGQxPD0wJiZkMjw9MCl7Ly8gdmVydGV4IHJlZ2lvbiBvZiBBOyBiYXJ5Y2VudHJpYyBjb29yZHMgKDEsIDAsIDApCglyZXR1cm4gdGFyZ2V0LmNvcHkoYSk7fV92YnAuc3ViVmVjdG9ycyhwLGIpO2NvbnN0IGQzPV92YWIuZG90KF92YnApO2NvbnN0IGQ0PV92YWMuZG90KF92YnApO2lmKGQzPj0wJiZkNDw9ZDMpey8vIHZlcnRleCByZWdpb24gb2YgQjsgYmFyeWNlbnRyaWMgY29vcmRzICgwLCAxLCAwKQoJcmV0dXJuIHRhcmdldC5jb3B5KGIpO31jb25zdCB2Yz1kMSpkNC1kMypkMjtpZih2Yzw9MCYmZDE+PTAmJmQzPD0wKXt2PWQxLyhkMS1kMyk7Ly8gZWRnZSByZWdpb24gb2YgQUI7IGJhcnljZW50cmljIGNvb3JkcyAoMS12LCB2LCAwKQoJcmV0dXJuIHRhcmdldC5jb3B5KGEpLmFkZFNjYWxlZFZlY3RvcihfdmFiLHYpO31fdmNwLnN1YlZlY3RvcnMocCxjKTtjb25zdCBkNT1fdmFiLmRvdChfdmNwKTtjb25zdCBkNj1fdmFjLmRvdChfdmNwKTtpZihkNj49MCYmZDU8PWQ2KXsvLyB2ZXJ0ZXggcmVnaW9uIG9mIEM7IGJhcnljZW50cmljIGNvb3JkcyAoMCwgMCwgMSkKCXJldHVybiB0YXJnZXQuY29weShjKTt9Y29uc3QgdmI9ZDUqZDItZDEqZDY7aWYodmI8PTAmJmQyPj0wJiZkNjw9MCl7dz1kMi8oZDItZDYpOy8vIGVkZ2UgcmVnaW9uIG9mIEFDOyBiYXJ5Y2VudHJpYyBjb29yZHMgKDEtdywgMCwgdykKCXJldHVybiB0YXJnZXQuY29weShhKS5hZGRTY2FsZWRWZWN0b3IoX3ZhYyx3KTt9Y29uc3QgdmE9ZDMqZDYtZDUqZDQ7aWYodmE8PTAmJmQ0LWQzPj0wJiZkNS1kNj49MCl7X3ZiYy5zdWJWZWN0b3JzKGMsYik7dz0oZDQtZDMpLyhkNC1kMysoZDUtZDYpKTsvLyBlZGdlIHJlZ2lvbiBvZiBCQzsgYmFyeWNlbnRyaWMgY29vcmRzICgwLCAxLXcsIHcpCglyZXR1cm4gdGFyZ2V0LmNvcHkoYikuYWRkU2NhbGVkVmVjdG9yKF92YmMsdyk7Ly8gZWRnZSByZWdpb24gb2YgQkMKCX0vLyBmYWNlIHJlZ2lvbgoJY29uc3QgZGVub209MS8odmErdmIrdmMpOy8vIHUgPSB2YSAqIGRlbm9tCgl2PXZiKmRlbm9tO3c9dmMqZGVub207cmV0dXJuIHRhcmdldC5jb3B5KGEpLmFkZFNjYWxlZFZlY3RvcihfdmFiLHYpLmFkZFNjYWxlZFZlY3RvcihfdmFjLHcpO31lcXVhbHModHJpYW5nbGUpe3JldHVybiB0cmlhbmdsZS5hLmVxdWFscyh0aGlzLmEpJiZ0cmlhbmdsZS5iLmVxdWFscyh0aGlzLmIpJiZ0cmlhbmdsZS5jLmVxdWFscyh0aGlzLmMpO319bGV0IG1hdGVyaWFsSWQ9MDtjbGFzcyBNYXRlcmlhbCBleHRlbmRzIEV2ZW50RGlzcGF0Y2hlcntjb25zdHJ1Y3Rvcigpe3N1cGVyKCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsJ2lkJyx7dmFsdWU6bWF0ZXJpYWxJZCsrfSk7dGhpcy51dWlkPWdlbmVyYXRlVVVJRCgpO3RoaXMubmFtZT0nJzt0aGlzLnR5cGU9J01hdGVyaWFsJzt0aGlzLmZvZz10cnVlO3RoaXMuYmxlbmRpbmc9Tm9ybWFsQmxlbmRpbmc7dGhpcy5zaWRlPUZyb250U2lkZTt0aGlzLnZlcnRleENvbG9ycz1mYWxzZTt0aGlzLm9wYWNpdHk9MTt0aGlzLmZvcm1hdD1SR0JBRm9ybWF0O3RoaXMudHJhbnNwYXJlbnQ9ZmFsc2U7dGhpcy5ibGVuZFNyYz1TcmNBbHBoYUZhY3Rvcjt0aGlzLmJsZW5kRHN0PU9uZU1pbnVzU3JjQWxwaGFGYWN0b3I7dGhpcy5ibGVuZEVxdWF0aW9uPUFkZEVxdWF0aW9uO3RoaXMuYmxlbmRTcmNBbHBoYT1udWxsO3RoaXMuYmxlbmREc3RBbHBoYT1udWxsO3RoaXMuYmxlbmRFcXVhdGlvbkFscGhhPW51bGw7dGhpcy5kZXB0aEZ1bmM9TGVzc0VxdWFsRGVwdGg7dGhpcy5kZXB0aFRlc3Q9dHJ1ZTt0aGlzLmRlcHRoV3JpdGU9dHJ1ZTt0aGlzLnN0ZW5jaWxXcml0ZU1hc2s9MHhmZjt0aGlzLnN0ZW5jaWxGdW5jPUFsd2F5c1N0ZW5jaWxGdW5jO3RoaXMuc3RlbmNpbFJlZj0wO3RoaXMuc3RlbmNpbEZ1bmNNYXNrPTB4ZmY7dGhpcy5zdGVuY2lsRmFpbD1LZWVwU3RlbmNpbE9wO3RoaXMuc3RlbmNpbFpGYWlsPUtlZXBTdGVuY2lsT3A7dGhpcy5zdGVuY2lsWlBhc3M9S2VlcFN0ZW5jaWxPcDt0aGlzLnN0ZW5jaWxXcml0ZT1mYWxzZTt0aGlzLmNsaXBwaW5nUGxhbmVzPW51bGw7dGhpcy5jbGlwSW50ZXJzZWN0aW9uPWZhbHNlO3RoaXMuY2xpcFNoYWRvd3M9ZmFsc2U7dGhpcy5zaGFkb3dTaWRlPW51bGw7dGhpcy5jb2xvcldyaXRlPXRydWU7dGhpcy5wcmVjaXNpb249bnVsbDsvLyBvdmVycmlkZSB0aGUgcmVuZGVyZXIncyBkZWZhdWx0IHByZWNpc2lvbiBmb3IgdGhpcyBtYXRlcmlhbAoJdGhpcy5wb2x5Z29uT2Zmc2V0PWZhbHNlO3RoaXMucG9seWdvbk9mZnNldEZhY3Rvcj0wO3RoaXMucG9seWdvbk9mZnNldFVuaXRzPTA7dGhpcy5kaXRoZXJpbmc9ZmFsc2U7dGhpcy5hbHBoYVRvQ292ZXJhZ2U9ZmFsc2U7dGhpcy5wcmVtdWx0aXBsaWVkQWxwaGE9ZmFsc2U7dGhpcy52aXNpYmxlPXRydWU7dGhpcy50b25lTWFwcGVkPXRydWU7dGhpcy51c2VyRGF0YT17fTt0aGlzLnZlcnNpb249MDt0aGlzLl9hbHBoYVRlc3Q9MDt9Z2V0IGFscGhhVGVzdCgpe3JldHVybiB0aGlzLl9hbHBoYVRlc3Q7fXNldCBhbHBoYVRlc3QodmFsdWUpe2lmKHRoaXMuX2FscGhhVGVzdD4wIT09dmFsdWU+MCl7dGhpcy52ZXJzaW9uKys7fXRoaXMuX2FscGhhVGVzdD12YWx1ZTt9b25CdWlsZCgpe31vbkJlZm9yZVJlbmRlcigpe31vbkJlZm9yZUNvbXBpbGUoKXt9Y3VzdG9tUHJvZ3JhbUNhY2hlS2V5KCl7cmV0dXJuIHRoaXMub25CZWZvcmVDb21waWxlLnRvU3RyaW5nKCk7fXNldFZhbHVlcyh2YWx1ZXMpe2lmKHZhbHVlcz09PXVuZGVmaW5lZClyZXR1cm47Zm9yKGNvbnN0IGtleSBpbiB2YWx1ZXMpe2NvbnN0IG5ld1ZhbHVlPXZhbHVlc1trZXldO2lmKG5ld1ZhbHVlPT09dW5kZWZpbmVkKXtjb25zb2xlLndhcm4oJ1RIUkVFLk1hdGVyaWFsOiBcJycra2V5KydcJyBwYXJhbWV0ZXIgaXMgdW5kZWZpbmVkLicpO2NvbnRpbnVlO30vLyBmb3IgYmFja3dhcmQgY29tcGF0YWJpbGl0eSBpZiBzaGFkaW5nIGlzIHNldCBpbiB0aGUgY29uc3RydWN0b3IKCWlmKGtleT09PSdzaGFkaW5nJyl7Y29uc29sZS53YXJuKCdUSFJFRS4nK3RoaXMudHlwZSsnOiAuc2hhZGluZyBoYXMgYmVlbiByZW1vdmVkLiBVc2UgdGhlIGJvb2xlYW4gLmZsYXRTaGFkaW5nIGluc3RlYWQuJyk7dGhpcy5mbGF0U2hhZGluZz1uZXdWYWx1ZT09PUZsYXRTaGFkaW5nP3RydWU6ZmFsc2U7Y29udGludWU7fWNvbnN0IGN1cnJlbnRWYWx1ZT10aGlzW2tleV07aWYoY3VycmVudFZhbHVlPT09dW5kZWZpbmVkKXtjb25zb2xlLndhcm4oJ1RIUkVFLicrdGhpcy50eXBlKyc6IFwnJytrZXkrJ1wnIGlzIG5vdCBhIHByb3BlcnR5IG9mIHRoaXMgbWF0ZXJpYWwuJyk7Y29udGludWU7fWlmKGN1cnJlbnRWYWx1ZSYmY3VycmVudFZhbHVlLmlzQ29sb3Ipe2N1cnJlbnRWYWx1ZS5zZXQobmV3VmFsdWUpO31lbHNlIGlmKGN1cnJlbnRWYWx1ZSYmY3VycmVudFZhbHVlLmlzVmVjdG9yMyYmbmV3VmFsdWUmJm5ld1ZhbHVlLmlzVmVjdG9yMyl7Y3VycmVudFZhbHVlLmNvcHkobmV3VmFsdWUpO31lbHNlIHt0aGlzW2tleV09bmV3VmFsdWU7fX19dG9KU09OKG1ldGEpe2NvbnN0IGlzUm9vdD1tZXRhPT09dW5kZWZpbmVkfHx0eXBlb2YgbWV0YT09PSdzdHJpbmcnO2lmKGlzUm9vdCl7bWV0YT17dGV4dHVyZXM6e30saW1hZ2VzOnt9fTt9Y29uc3QgZGF0YT17bWV0YWRhdGE6e3ZlcnNpb246NC41LHR5cGU6J01hdGVyaWFsJyxnZW5lcmF0b3I6J01hdGVyaWFsLnRvSlNPTid9fTsvLyBzdGFuZGFyZCBNYXRlcmlhbCBzZXJpYWxpemF0aW9uCglkYXRhLnV1aWQ9dGhpcy51dWlkO2RhdGEudHlwZT10aGlzLnR5cGU7aWYodGhpcy5uYW1lIT09JycpZGF0YS5uYW1lPXRoaXMubmFtZTtpZih0aGlzLmNvbG9yJiZ0aGlzLmNvbG9yLmlzQ29sb3IpZGF0YS5jb2xvcj10aGlzLmNvbG9yLmdldEhleCgpO2lmKHRoaXMucm91Z2huZXNzIT09dW5kZWZpbmVkKWRhdGEucm91Z2huZXNzPXRoaXMucm91Z2huZXNzO2lmKHRoaXMubWV0YWxuZXNzIT09dW5kZWZpbmVkKWRhdGEubWV0YWxuZXNzPXRoaXMubWV0YWxuZXNzO2lmKHRoaXMuc2hlZW4hPT11bmRlZmluZWQpZGF0YS5zaGVlbj10aGlzLnNoZWVuO2lmKHRoaXMuc2hlZW5Db2xvciYmdGhpcy5zaGVlbkNvbG9yLmlzQ29sb3IpZGF0YS5zaGVlbkNvbG9yPXRoaXMuc2hlZW5Db2xvci5nZXRIZXgoKTtpZih0aGlzLnNoZWVuUm91Z2huZXNzIT09dW5kZWZpbmVkKWRhdGEuc2hlZW5Sb3VnaG5lc3M9dGhpcy5zaGVlblJvdWdobmVzcztpZih0aGlzLmVtaXNzaXZlJiZ0aGlzLmVtaXNzaXZlLmlzQ29sb3IpZGF0YS5lbWlzc2l2ZT10aGlzLmVtaXNzaXZlLmdldEhleCgpO2lmKHRoaXMuZW1pc3NpdmVJbnRlbnNpdHkmJnRoaXMuZW1pc3NpdmVJbnRlbnNpdHkhPT0xKWRhdGEuZW1pc3NpdmVJbnRlbnNpdHk9dGhpcy5lbWlzc2l2ZUludGVuc2l0eTtpZih0aGlzLnNwZWN1bGFyJiZ0aGlzLnNwZWN1bGFyLmlzQ29sb3IpZGF0YS5zcGVjdWxhcj10aGlzLnNwZWN1bGFyLmdldEhleCgpO2lmKHRoaXMuc3BlY3VsYXJJbnRlbnNpdHkhPT11bmRlZmluZWQpZGF0YS5zcGVjdWxhckludGVuc2l0eT10aGlzLnNwZWN1bGFySW50ZW5zaXR5O2lmKHRoaXMuc3BlY3VsYXJDb2xvciYmdGhpcy5zcGVjdWxhckNvbG9yLmlzQ29sb3IpZGF0YS5zcGVjdWxhckNvbG9yPXRoaXMuc3BlY3VsYXJDb2xvci5nZXRIZXgoKTtpZih0aGlzLnNoaW5pbmVzcyE9PXVuZGVmaW5lZClkYXRhLnNoaW5pbmVzcz10aGlzLnNoaW5pbmVzcztpZih0aGlzLmNsZWFyY29hdCE9PXVuZGVmaW5lZClkYXRhLmNsZWFyY29hdD10aGlzLmNsZWFyY29hdDtpZih0aGlzLmNsZWFyY29hdFJvdWdobmVzcyE9PXVuZGVmaW5lZClkYXRhLmNsZWFyY29hdFJvdWdobmVzcz10aGlzLmNsZWFyY29hdFJvdWdobmVzcztpZih0aGlzLmNsZWFyY29hdE1hcCYmdGhpcy5jbGVhcmNvYXRNYXAuaXNUZXh0dXJlKXtkYXRhLmNsZWFyY29hdE1hcD10aGlzLmNsZWFyY29hdE1hcC50b0pTT04obWV0YSkudXVpZDt9aWYodGhpcy5jbGVhcmNvYXRSb3VnaG5lc3NNYXAmJnRoaXMuY2xlYXJjb2F0Um91Z2huZXNzTWFwLmlzVGV4dHVyZSl7ZGF0YS5jbGVhcmNvYXRSb3VnaG5lc3NNYXA9dGhpcy5jbGVhcmNvYXRSb3VnaG5lc3NNYXAudG9KU09OKG1ldGEpLnV1aWQ7fWlmKHRoaXMuY2xlYXJjb2F0Tm9ybWFsTWFwJiZ0aGlzLmNsZWFyY29hdE5vcm1hbE1hcC5pc1RleHR1cmUpe2RhdGEuY2xlYXJjb2F0Tm9ybWFsTWFwPXRoaXMuY2xlYXJjb2F0Tm9ybWFsTWFwLnRvSlNPTihtZXRhKS51dWlkO2RhdGEuY2xlYXJjb2F0Tm9ybWFsU2NhbGU9dGhpcy5jbGVhcmNvYXROb3JtYWxTY2FsZS50b0FycmF5KCk7fWlmKHRoaXMubWFwJiZ0aGlzLm1hcC5pc1RleHR1cmUpZGF0YS5tYXA9dGhpcy5tYXAudG9KU09OKG1ldGEpLnV1aWQ7aWYodGhpcy5tYXRjYXAmJnRoaXMubWF0Y2FwLmlzVGV4dHVyZSlkYXRhLm1hdGNhcD10aGlzLm1hdGNhcC50b0pTT04obWV0YSkudXVpZDtpZih0aGlzLmFscGhhTWFwJiZ0aGlzLmFscGhhTWFwLmlzVGV4dHVyZSlkYXRhLmFscGhhTWFwPXRoaXMuYWxwaGFNYXAudG9KU09OKG1ldGEpLnV1aWQ7aWYodGhpcy5saWdodE1hcCYmdGhpcy5saWdodE1hcC5pc1RleHR1cmUpe2RhdGEubGlnaHRNYXA9dGhpcy5saWdodE1hcC50b0pTT04obWV0YSkudXVpZDtkYXRhLmxpZ2h0TWFwSW50ZW5zaXR5PXRoaXMubGlnaHRNYXBJbnRlbnNpdHk7fWlmKHRoaXMuYW9NYXAmJnRoaXMuYW9NYXAuaXNUZXh0dXJlKXtkYXRhLmFvTWFwPXRoaXMuYW9NYXAudG9KU09OKG1ldGEpLnV1aWQ7ZGF0YS5hb01hcEludGVuc2l0eT10aGlzLmFvTWFwSW50ZW5zaXR5O31pZih0aGlzLmJ1bXBNYXAmJnRoaXMuYnVtcE1hcC5pc1RleHR1cmUpe2RhdGEuYnVtcE1hcD10aGlzLmJ1bXBNYXAudG9KU09OKG1ldGEpLnV1aWQ7ZGF0YS5idW1wU2NhbGU9dGhpcy5idW1wU2NhbGU7fWlmKHRoaXMubm9ybWFsTWFwJiZ0aGlzLm5vcm1hbE1hcC5pc1RleHR1cmUpe2RhdGEubm9ybWFsTWFwPXRoaXMubm9ybWFsTWFwLnRvSlNPTihtZXRhKS51dWlkO2RhdGEubm9ybWFsTWFwVHlwZT10aGlzLm5vcm1hbE1hcFR5cGU7ZGF0YS5ub3JtYWxTY2FsZT10aGlzLm5vcm1hbFNjYWxlLnRvQXJyYXkoKTt9aWYodGhpcy5kaXNwbGFjZW1lbnRNYXAmJnRoaXMuZGlzcGxhY2VtZW50TWFwLmlzVGV4dHVyZSl7ZGF0YS5kaXNwbGFjZW1lbnRNYXA9dGhpcy5kaXNwbGFjZW1lbnRNYXAudG9KU09OKG1ldGEpLnV1aWQ7ZGF0YS5kaXNwbGFjZW1lbnRTY2FsZT10aGlzLmRpc3BsYWNlbWVudFNjYWxlO2RhdGEuZGlzcGxhY2VtZW50Qmlhcz10aGlzLmRpc3BsYWNlbWVudEJpYXM7fWlmKHRoaXMucm91Z2huZXNzTWFwJiZ0aGlzLnJvdWdobmVzc01hcC5pc1RleHR1cmUpZGF0YS5yb3VnaG5lc3NNYXA9dGhpcy5yb3VnaG5lc3NNYXAudG9KU09OKG1ldGEpLnV1aWQ7aWYodGhpcy5tZXRhbG5lc3NNYXAmJnRoaXMubWV0YWxuZXNzTWFwLmlzVGV4dHVyZSlkYXRhLm1ldGFsbmVzc01hcD10aGlzLm1ldGFsbmVzc01hcC50b0pTT04obWV0YSkudXVpZDtpZih0aGlzLmVtaXNzaXZlTWFwJiZ0aGlzLmVtaXNzaXZlTWFwLmlzVGV4dHVyZSlkYXRhLmVtaXNzaXZlTWFwPXRoaXMuZW1pc3NpdmVNYXAudG9KU09OKG1ldGEpLnV1aWQ7aWYodGhpcy5zcGVjdWxhck1hcCYmdGhpcy5zcGVjdWxhck1hcC5pc1RleHR1cmUpZGF0YS5zcGVjdWxhck1hcD10aGlzLnNwZWN1bGFyTWFwLnRvSlNPTihtZXRhKS51dWlkO2lmKHRoaXMuc3BlY3VsYXJJbnRlbnNpdHlNYXAmJnRoaXMuc3BlY3VsYXJJbnRlbnNpdHlNYXAuaXNUZXh0dXJlKWRhdGEuc3BlY3VsYXJJbnRlbnNpdHlNYXA9dGhpcy5zcGVjdWxhckludGVuc2l0eU1hcC50b0pTT04obWV0YSkudXVpZDtpZih0aGlzLnNwZWN1bGFyQ29sb3JNYXAmJnRoaXMuc3BlY3VsYXJDb2xvck1hcC5pc1RleHR1cmUpZGF0YS5zcGVjdWxhckNvbG9yTWFwPXRoaXMuc3BlY3VsYXJDb2xvck1hcC50b0pTT04obWV0YSkudXVpZDtpZih0aGlzLmVudk1hcCYmdGhpcy5lbnZNYXAuaXNUZXh0dXJlKXtkYXRhLmVudk1hcD10aGlzLmVudk1hcC50b0pTT04obWV0YSkudXVpZDtpZih0aGlzLmNvbWJpbmUhPT11bmRlZmluZWQpZGF0YS5jb21iaW5lPXRoaXMuY29tYmluZTt9aWYodGhpcy5lbnZNYXBJbnRlbnNpdHkhPT11bmRlZmluZWQpZGF0YS5lbnZNYXBJbnRlbnNpdHk9dGhpcy5lbnZNYXBJbnRlbnNpdHk7aWYodGhpcy5yZWZsZWN0aXZpdHkhPT11bmRlZmluZWQpZGF0YS5yZWZsZWN0aXZpdHk9dGhpcy5yZWZsZWN0aXZpdHk7aWYodGhpcy5yZWZyYWN0aW9uUmF0aW8hPT11bmRlZmluZWQpZGF0YS5yZWZyYWN0aW9uUmF0aW89dGhpcy5yZWZyYWN0aW9uUmF0aW87aWYodGhpcy5ncmFkaWVudE1hcCYmdGhpcy5ncmFkaWVudE1hcC5pc1RleHR1cmUpe2RhdGEuZ3JhZGllbnRNYXA9dGhpcy5ncmFkaWVudE1hcC50b0pTT04obWV0YSkudXVpZDt9aWYodGhpcy50cmFuc21pc3Npb24hPT11bmRlZmluZWQpZGF0YS50cmFuc21pc3Npb249dGhpcy50cmFuc21pc3Npb247aWYodGhpcy50cmFuc21pc3Npb25NYXAmJnRoaXMudHJhbnNtaXNzaW9uTWFwLmlzVGV4dHVyZSlkYXRhLnRyYW5zbWlzc2lvbk1hcD10aGlzLnRyYW5zbWlzc2lvbk1hcC50b0pTT04obWV0YSkudXVpZDtpZih0aGlzLnRoaWNrbmVzcyE9PXVuZGVmaW5lZClkYXRhLnRoaWNrbmVzcz10aGlzLnRoaWNrbmVzcztpZih0aGlzLnRoaWNrbmVzc01hcCYmdGhpcy50aGlja25lc3NNYXAuaXNUZXh0dXJlKWRhdGEudGhpY2tuZXNzTWFwPXRoaXMudGhpY2tuZXNzTWFwLnRvSlNPTihtZXRhKS51dWlkO2lmKHRoaXMuYXR0ZW51YXRpb25EaXN0YW5jZSE9PXVuZGVmaW5lZClkYXRhLmF0dGVudWF0aW9uRGlzdGFuY2U9dGhpcy5hdHRlbnVhdGlvbkRpc3RhbmNlO2lmKHRoaXMuYXR0ZW51YXRpb25Db2xvciE9PXVuZGVmaW5lZClkYXRhLmF0dGVudWF0aW9uQ29sb3I9dGhpcy5hdHRlbnVhdGlvbkNvbG9yLmdldEhleCgpO2lmKHRoaXMuc2l6ZSE9PXVuZGVmaW5lZClkYXRhLnNpemU9dGhpcy5zaXplO2lmKHRoaXMuc2hhZG93U2lkZSE9PW51bGwpZGF0YS5zaGFkb3dTaWRlPXRoaXMuc2hhZG93U2lkZTtpZih0aGlzLnNpemVBdHRlbnVhdGlvbiE9PXVuZGVmaW5lZClkYXRhLnNpemVBdHRlbnVhdGlvbj10aGlzLnNpemVBdHRlbnVhdGlvbjtpZih0aGlzLmJsZW5kaW5nIT09Tm9ybWFsQmxlbmRpbmcpZGF0YS5ibGVuZGluZz10aGlzLmJsZW5kaW5nO2lmKHRoaXMuc2lkZSE9PUZyb250U2lkZSlkYXRhLnNpZGU9dGhpcy5zaWRlO2lmKHRoaXMudmVydGV4Q29sb3JzKWRhdGEudmVydGV4Q29sb3JzPXRydWU7aWYodGhpcy5vcGFjaXR5PDEpZGF0YS5vcGFjaXR5PXRoaXMub3BhY2l0eTtpZih0aGlzLmZvcm1hdCE9PVJHQkFGb3JtYXQpZGF0YS5mb3JtYXQ9dGhpcy5mb3JtYXQ7aWYodGhpcy50cmFuc3BhcmVudD09PXRydWUpZGF0YS50cmFuc3BhcmVudD10aGlzLnRyYW5zcGFyZW50O2RhdGEuZGVwdGhGdW5jPXRoaXMuZGVwdGhGdW5jO2RhdGEuZGVwdGhUZXN0PXRoaXMuZGVwdGhUZXN0O2RhdGEuZGVwdGhXcml0ZT10aGlzLmRlcHRoV3JpdGU7ZGF0YS5jb2xvcldyaXRlPXRoaXMuY29sb3JXcml0ZTtkYXRhLnN0ZW5jaWxXcml0ZT10aGlzLnN0ZW5jaWxXcml0ZTtkYXRhLnN0ZW5jaWxXcml0ZU1hc2s9dGhpcy5zdGVuY2lsV3JpdGVNYXNrO2RhdGEuc3RlbmNpbEZ1bmM9dGhpcy5zdGVuY2lsRnVuYztkYXRhLnN0ZW5jaWxSZWY9dGhpcy5zdGVuY2lsUmVmO2RhdGEuc3RlbmNpbEZ1bmNNYXNrPXRoaXMuc3RlbmNpbEZ1bmNNYXNrO2RhdGEuc3RlbmNpbEZhaWw9dGhpcy5zdGVuY2lsRmFpbDtkYXRhLnN0ZW5jaWxaRmFpbD10aGlzLnN0ZW5jaWxaRmFpbDtkYXRhLnN0ZW5jaWxaUGFzcz10aGlzLnN0ZW5jaWxaUGFzczsvLyByb3RhdGlvbiAoU3ByaXRlTWF0ZXJpYWwpCglpZih0aGlzLnJvdGF0aW9uJiZ0aGlzLnJvdGF0aW9uIT09MClkYXRhLnJvdGF0aW9uPXRoaXMucm90YXRpb247aWYodGhpcy5wb2x5Z29uT2Zmc2V0PT09dHJ1ZSlkYXRhLnBvbHlnb25PZmZzZXQ9dHJ1ZTtpZih0aGlzLnBvbHlnb25PZmZzZXRGYWN0b3IhPT0wKWRhdGEucG9seWdvbk9mZnNldEZhY3Rvcj10aGlzLnBvbHlnb25PZmZzZXRGYWN0b3I7aWYodGhpcy5wb2x5Z29uT2Zmc2V0VW5pdHMhPT0wKWRhdGEucG9seWdvbk9mZnNldFVuaXRzPXRoaXMucG9seWdvbk9mZnNldFVuaXRzO2lmKHRoaXMubGluZXdpZHRoJiZ0aGlzLmxpbmV3aWR0aCE9PTEpZGF0YS5saW5ld2lkdGg9dGhpcy5saW5ld2lkdGg7aWYodGhpcy5kYXNoU2l6ZSE9PXVuZGVmaW5lZClkYXRhLmRhc2hTaXplPXRoaXMuZGFzaFNpemU7aWYodGhpcy5nYXBTaXplIT09dW5kZWZpbmVkKWRhdGEuZ2FwU2l6ZT10aGlzLmdhcFNpemU7aWYodGhpcy5zY2FsZSE9PXVuZGVmaW5lZClkYXRhLnNjYWxlPXRoaXMuc2NhbGU7aWYodGhpcy5kaXRoZXJpbmc9PT10cnVlKWRhdGEuZGl0aGVyaW5nPXRydWU7aWYodGhpcy5hbHBoYVRlc3Q+MClkYXRhLmFscGhhVGVzdD10aGlzLmFscGhhVGVzdDtpZih0aGlzLmFscGhhVG9Db3ZlcmFnZT09PXRydWUpZGF0YS5hbHBoYVRvQ292ZXJhZ2U9dGhpcy5hbHBoYVRvQ292ZXJhZ2U7aWYodGhpcy5wcmVtdWx0aXBsaWVkQWxwaGE9PT10cnVlKWRhdGEucHJlbXVsdGlwbGllZEFscGhhPXRoaXMucHJlbXVsdGlwbGllZEFscGhhO2lmKHRoaXMud2lyZWZyYW1lPT09dHJ1ZSlkYXRhLndpcmVmcmFtZT10aGlzLndpcmVmcmFtZTtpZih0aGlzLndpcmVmcmFtZUxpbmV3aWR0aD4xKWRhdGEud2lyZWZyYW1lTGluZXdpZHRoPXRoaXMud2lyZWZyYW1lTGluZXdpZHRoO2lmKHRoaXMud2lyZWZyYW1lTGluZWNhcCE9PSdyb3VuZCcpZGF0YS53aXJlZnJhbWVMaW5lY2FwPXRoaXMud2lyZWZyYW1lTGluZWNhcDtpZih0aGlzLndpcmVmcmFtZUxpbmVqb2luIT09J3JvdW5kJylkYXRhLndpcmVmcmFtZUxpbmVqb2luPXRoaXMud2lyZWZyYW1lTGluZWpvaW47aWYodGhpcy5mbGF0U2hhZGluZz09PXRydWUpZGF0YS5mbGF0U2hhZGluZz10aGlzLmZsYXRTaGFkaW5nO2lmKHRoaXMudmlzaWJsZT09PWZhbHNlKWRhdGEudmlzaWJsZT1mYWxzZTtpZih0aGlzLnRvbmVNYXBwZWQ9PT1mYWxzZSlkYXRhLnRvbmVNYXBwZWQ9ZmFsc2U7aWYoSlNPTi5zdHJpbmdpZnkodGhpcy51c2VyRGF0YSkhPT0ne30nKWRhdGEudXNlckRhdGE9dGhpcy51c2VyRGF0YTsvLyBUT0RPOiBDb3BpZWQgZnJvbSBPYmplY3QzRC50b0pTT04KCWZ1bmN0aW9uIGV4dHJhY3RGcm9tQ2FjaGUoY2FjaGUpe2NvbnN0IHZhbHVlcz1bXTtmb3IoY29uc3Qga2V5IGluIGNhY2hlKXtjb25zdCBkYXRhPWNhY2hlW2tleV07ZGVsZXRlIGRhdGEubWV0YWRhdGE7dmFsdWVzLnB1c2goZGF0YSk7fXJldHVybiB2YWx1ZXM7fWlmKGlzUm9vdCl7Y29uc3QgdGV4dHVyZXM9ZXh0cmFjdEZyb21DYWNoZShtZXRhLnRleHR1cmVzKTtjb25zdCBpbWFnZXM9ZXh0cmFjdEZyb21DYWNoZShtZXRhLmltYWdlcyk7aWYodGV4dHVyZXMubGVuZ3RoPjApZGF0YS50ZXh0dXJlcz10ZXh0dXJlcztpZihpbWFnZXMubGVuZ3RoPjApZGF0YS5pbWFnZXM9aW1hZ2VzO31yZXR1cm4gZGF0YTt9Y2xvbmUoKXtyZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IoKS5jb3B5KHRoaXMpO31jb3B5KHNvdXJjZSl7dGhpcy5uYW1lPXNvdXJjZS5uYW1lO3RoaXMuZm9nPXNvdXJjZS5mb2c7dGhpcy5ibGVuZGluZz1zb3VyY2UuYmxlbmRpbmc7dGhpcy5zaWRlPXNvdXJjZS5zaWRlO3RoaXMudmVydGV4Q29sb3JzPXNvdXJjZS52ZXJ0ZXhDb2xvcnM7dGhpcy5vcGFjaXR5PXNvdXJjZS5vcGFjaXR5O3RoaXMuZm9ybWF0PXNvdXJjZS5mb3JtYXQ7dGhpcy50cmFuc3BhcmVudD1zb3VyY2UudHJhbnNwYXJlbnQ7dGhpcy5ibGVuZFNyYz1zb3VyY2UuYmxlbmRTcmM7dGhpcy5ibGVuZERzdD1zb3VyY2UuYmxlbmREc3Q7dGhpcy5ibGVuZEVxdWF0aW9uPXNvdXJjZS5ibGVuZEVxdWF0aW9uO3RoaXMuYmxlbmRTcmNBbHBoYT1zb3VyY2UuYmxlbmRTcmNBbHBoYTt0aGlzLmJsZW5kRHN0QWxwaGE9c291cmNlLmJsZW5kRHN0QWxwaGE7dGhpcy5ibGVuZEVxdWF0aW9uQWxwaGE9c291cmNlLmJsZW5kRXF1YXRpb25BbHBoYTt0aGlzLmRlcHRoRnVuYz1zb3VyY2UuZGVwdGhGdW5jO3RoaXMuZGVwdGhUZXN0PXNvdXJjZS5kZXB0aFRlc3Q7dGhpcy5kZXB0aFdyaXRlPXNvdXJjZS5kZXB0aFdyaXRlO3RoaXMuc3RlbmNpbFdyaXRlTWFzaz1zb3VyY2Uuc3RlbmNpbFdyaXRlTWFzazt0aGlzLnN0ZW5jaWxGdW5jPXNvdXJjZS5zdGVuY2lsRnVuYzt0aGlzLnN0ZW5jaWxSZWY9c291cmNlLnN0ZW5jaWxSZWY7dGhpcy5zdGVuY2lsRnVuY01hc2s9c291cmNlLnN0ZW5jaWxGdW5jTWFzazt0aGlzLnN0ZW5jaWxGYWlsPXNvdXJjZS5zdGVuY2lsRmFpbDt0aGlzLnN0ZW5jaWxaRmFpbD1zb3VyY2Uuc3RlbmNpbFpGYWlsO3RoaXMuc3RlbmNpbFpQYXNzPXNvdXJjZS5zdGVuY2lsWlBhc3M7dGhpcy5zdGVuY2lsV3JpdGU9c291cmNlLnN0ZW5jaWxXcml0ZTtjb25zdCBzcmNQbGFuZXM9c291cmNlLmNsaXBwaW5nUGxhbmVzO2xldCBkc3RQbGFuZXM9bnVsbDtpZihzcmNQbGFuZXMhPT1udWxsKXtjb25zdCBuPXNyY1BsYW5lcy5sZW5ndGg7ZHN0UGxhbmVzPW5ldyBBcnJheShuKTtmb3IobGV0IGk9MDtpIT09bjsrK2kpe2RzdFBsYW5lc1tpXT1zcmNQbGFuZXNbaV0uY2xvbmUoKTt9fXRoaXMuY2xpcHBpbmdQbGFuZXM9ZHN0UGxhbmVzO3RoaXMuY2xpcEludGVyc2VjdGlvbj1zb3VyY2UuY2xpcEludGVyc2VjdGlvbjt0aGlzLmNsaXBTaGFkb3dzPXNvdXJjZS5jbGlwU2hhZG93czt0aGlzLnNoYWRvd1NpZGU9c291cmNlLnNoYWRvd1NpZGU7dGhpcy5jb2xvcldyaXRlPXNvdXJjZS5jb2xvcldyaXRlO3RoaXMucHJlY2lzaW9uPXNvdXJjZS5wcmVjaXNpb247dGhpcy5wb2x5Z29uT2Zmc2V0PXNvdXJjZS5wb2x5Z29uT2Zmc2V0O3RoaXMucG9seWdvbk9mZnNldEZhY3Rvcj1zb3VyY2UucG9seWdvbk9mZnNldEZhY3Rvcjt0aGlzLnBvbHlnb25PZmZzZXRVbml0cz1zb3VyY2UucG9seWdvbk9mZnNldFVuaXRzO3RoaXMuZGl0aGVyaW5nPXNvdXJjZS5kaXRoZXJpbmc7dGhpcy5hbHBoYVRlc3Q9c291cmNlLmFscGhhVGVzdDt0aGlzLmFscGhhVG9Db3ZlcmFnZT1zb3VyY2UuYWxwaGFUb0NvdmVyYWdlO3RoaXMucHJlbXVsdGlwbGllZEFscGhhPXNvdXJjZS5wcmVtdWx0aXBsaWVkQWxwaGE7dGhpcy52aXNpYmxlPXNvdXJjZS52aXNpYmxlO3RoaXMudG9uZU1hcHBlZD1zb3VyY2UudG9uZU1hcHBlZDt0aGlzLnVzZXJEYXRhPUpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoc291cmNlLnVzZXJEYXRhKSk7cmV0dXJuIHRoaXM7fWRpc3Bvc2UoKXt0aGlzLmRpc3BhdGNoRXZlbnQoe3R5cGU6J2Rpc3Bvc2UnfSk7fXNldCBuZWVkc1VwZGF0ZSh2YWx1ZSl7aWYodmFsdWU9PT10cnVlKXRoaXMudmVyc2lvbisrO319TWF0ZXJpYWwucHJvdG90eXBlLmlzTWF0ZXJpYWw9dHJ1ZTtjb25zdCBfY29sb3JLZXl3b3Jkcz17J2FsaWNlYmx1ZSc6MHhGMEY4RkYsJ2FudGlxdWV3aGl0ZSc6MHhGQUVCRDcsJ2FxdWEnOjB4MDBGRkZGLCdhcXVhbWFyaW5lJzoweDdGRkZENCwnYXp1cmUnOjB4RjBGRkZGLCdiZWlnZSc6MHhGNUY1REMsJ2Jpc3F1ZSc6MHhGRkU0QzQsJ2JsYWNrJzoweDAwMDAwMCwnYmxhbmNoZWRhbG1vbmQnOjB4RkZFQkNELCdibHVlJzoweDAwMDBGRiwnYmx1ZXZpb2xldCc6MHg4QTJCRTIsJ2Jyb3duJzoweEE1MkEyQSwnYnVybHl3b29kJzoweERFQjg4NywnY2FkZXRibHVlJzoweDVGOUVBMCwnY2hhcnRyZXVzZSc6MHg3RkZGMDAsJ2Nob2NvbGF0ZSc6MHhEMjY5MUUsJ2NvcmFsJzoweEZGN0Y1MCwnY29ybmZsb3dlcmJsdWUnOjB4NjQ5NUVELCdjb3Juc2lsayc6MHhGRkY4REMsJ2NyaW1zb24nOjB4REMxNDNDLCdjeWFuJzoweDAwRkZGRiwnZGFya2JsdWUnOjB4MDAwMDhCLCdkYXJrY3lhbic6MHgwMDhCOEIsJ2Rhcmtnb2xkZW5yb2QnOjB4Qjg4NjBCLCdkYXJrZ3JheSc6MHhBOUE5QTksJ2RhcmtncmVlbic6MHgwMDY0MDAsJ2RhcmtncmV5JzoweEE5QTlBOSwnZGFya2toYWtpJzoweEJEQjc2QiwnZGFya21hZ2VudGEnOjB4OEIwMDhCLCdkYXJrb2xpdmVncmVlbic6MHg1NTZCMkYsJ2RhcmtvcmFuZ2UnOjB4RkY4QzAwLCdkYXJrb3JjaGlkJzoweDk5MzJDQywnZGFya3JlZCc6MHg4QjAwMDAsJ2RhcmtzYWxtb24nOjB4RTk5NjdBLCdkYXJrc2VhZ3JlZW4nOjB4OEZCQzhGLCdkYXJrc2xhdGVibHVlJzoweDQ4M0Q4QiwnZGFya3NsYXRlZ3JheSc6MHgyRjRGNEYsJ2RhcmtzbGF0ZWdyZXknOjB4MkY0RjRGLCdkYXJrdHVycXVvaXNlJzoweDAwQ0VEMSwnZGFya3Zpb2xldCc6MHg5NDAwRDMsJ2RlZXBwaW5rJzoweEZGMTQ5MywnZGVlcHNreWJsdWUnOjB4MDBCRkZGLCdkaW1ncmF5JzoweDY5Njk2OSwnZGltZ3JleSc6MHg2OTY5NjksJ2RvZGdlcmJsdWUnOjB4MUU5MEZGLCdmaXJlYnJpY2snOjB4QjIyMjIyLCdmbG9yYWx3aGl0ZSc6MHhGRkZBRjAsJ2ZvcmVzdGdyZWVuJzoweDIyOEIyMiwnZnVjaHNpYSc6MHhGRjAwRkYsJ2dhaW5zYm9ybyc6MHhEQ0RDREMsJ2dob3N0d2hpdGUnOjB4RjhGOEZGLCdnb2xkJzoweEZGRDcwMCwnZ29sZGVucm9kJzoweERBQTUyMCwnZ3JheSc6MHg4MDgwODAsJ2dyZWVuJzoweDAwODAwMCwnZ3JlZW55ZWxsb3cnOjB4QURGRjJGLCdncmV5JzoweDgwODA4MCwnaG9uZXlkZXcnOjB4RjBGRkYwLCdob3RwaW5rJzoweEZGNjlCNCwnaW5kaWFucmVkJzoweENENUM1QywnaW5kaWdvJzoweDRCMDA4MiwnaXZvcnknOjB4RkZGRkYwLCdraGFraSc6MHhGMEU2OEMsJ2xhdmVuZGVyJzoweEU2RTZGQSwnbGF2ZW5kZXJibHVzaCc6MHhGRkYwRjUsJ2xhd25ncmVlbic6MHg3Q0ZDMDAsJ2xlbW9uY2hpZmZvbic6MHhGRkZBQ0QsJ2xpZ2h0Ymx1ZSc6MHhBREQ4RTYsJ2xpZ2h0Y29yYWwnOjB4RjA4MDgwLCdsaWdodGN5YW4nOjB4RTBGRkZGLCdsaWdodGdvbGRlbnJvZHllbGxvdyc6MHhGQUZBRDIsJ2xpZ2h0Z3JheSc6MHhEM0QzRDMsJ2xpZ2h0Z3JlZW4nOjB4OTBFRTkwLCdsaWdodGdyZXknOjB4RDNEM0QzLCdsaWdodHBpbmsnOjB4RkZCNkMxLCdsaWdodHNhbG1vbic6MHhGRkEwN0EsJ2xpZ2h0c2VhZ3JlZW4nOjB4MjBCMkFBLCdsaWdodHNreWJsdWUnOjB4ODdDRUZBLCdsaWdodHNsYXRlZ3JheSc6MHg3Nzg4OTksJ2xpZ2h0c2xhdGVncmV5JzoweDc3ODg5OSwnbGlnaHRzdGVlbGJsdWUnOjB4QjBDNERFLCdsaWdodHllbGxvdyc6MHhGRkZGRTAsJ2xpbWUnOjB4MDBGRjAwLCdsaW1lZ3JlZW4nOjB4MzJDRDMyLCdsaW5lbic6MHhGQUYwRTYsJ21hZ2VudGEnOjB4RkYwMEZGLCdtYXJvb24nOjB4ODAwMDAwLCdtZWRpdW1hcXVhbWFyaW5lJzoweDY2Q0RBQSwnbWVkaXVtYmx1ZSc6MHgwMDAwQ0QsJ21lZGl1bW9yY2hpZCc6MHhCQTU1RDMsJ21lZGl1bXB1cnBsZSc6MHg5MzcwREIsJ21lZGl1bXNlYWdyZWVuJzoweDNDQjM3MSwnbWVkaXVtc2xhdGVibHVlJzoweDdCNjhFRSwnbWVkaXVtc3ByaW5nZ3JlZW4nOjB4MDBGQTlBLCdtZWRpdW10dXJxdW9pc2UnOjB4NDhEMUNDLCdtZWRpdW12aW9sZXRyZWQnOjB4QzcxNTg1LCdtaWRuaWdodGJsdWUnOjB4MTkxOTcwLCdtaW50Y3JlYW0nOjB4RjVGRkZBLCdtaXN0eXJvc2UnOjB4RkZFNEUxLCdtb2NjYXNpbic6MHhGRkU0QjUsJ25hdmFqb3doaXRlJzoweEZGREVBRCwnbmF2eSc6MHgwMDAwODAsJ29sZGxhY2UnOjB4RkRGNUU2LCdvbGl2ZSc6MHg4MDgwMDAsJ29saXZlZHJhYic6MHg2QjhFMjMsJ29yYW5nZSc6MHhGRkE1MDAsJ29yYW5nZXJlZCc6MHhGRjQ1MDAsJ29yY2hpZCc6MHhEQTcwRDYsJ3BhbGVnb2xkZW5yb2QnOjB4RUVFOEFBLCdwYWxlZ3JlZW4nOjB4OThGQjk4LCdwYWxldHVycXVvaXNlJzoweEFGRUVFRSwncGFsZXZpb2xldHJlZCc6MHhEQjcwOTMsJ3BhcGF5YXdoaXAnOjB4RkZFRkQ1LCdwZWFjaHB1ZmYnOjB4RkZEQUI5LCdwZXJ1JzoweENEODUzRiwncGluayc6MHhGRkMwQ0IsJ3BsdW0nOjB4RERBMERELCdwb3dkZXJibHVlJzoweEIwRTBFNiwncHVycGxlJzoweDgwMDA4MCwncmViZWNjYXB1cnBsZSc6MHg2NjMzOTksJ3JlZCc6MHhGRjAwMDAsJ3Jvc3licm93bic6MHhCQzhGOEYsJ3JveWFsYmx1ZSc6MHg0MTY5RTEsJ3NhZGRsZWJyb3duJzoweDhCNDUxMywnc2FsbW9uJzoweEZBODA3Miwnc2FuZHlicm93bic6MHhGNEE0NjAsJ3NlYWdyZWVuJzoweDJFOEI1Nywnc2Vhc2hlbGwnOjB4RkZGNUVFLCdzaWVubmEnOjB4QTA1MjJELCdzaWx2ZXInOjB4QzBDMEMwLCdza3libHVlJzoweDg3Q0VFQiwnc2xhdGVibHVlJzoweDZBNUFDRCwnc2xhdGVncmF5JzoweDcwODA5MCwnc2xhdGVncmV5JzoweDcwODA5MCwnc25vdyc6MHhGRkZBRkEsJ3NwcmluZ2dyZWVuJzoweDAwRkY3Riwnc3RlZWxibHVlJzoweDQ2ODJCNCwndGFuJzoweEQyQjQ4QywndGVhbCc6MHgwMDgwODAsJ3RoaXN0bGUnOjB4RDhCRkQ4LCd0b21hdG8nOjB4RkY2MzQ3LCd0dXJxdW9pc2UnOjB4NDBFMEQwLCd2aW9sZXQnOjB4RUU4MkVFLCd3aGVhdCc6MHhGNURFQjMsJ3doaXRlJzoweEZGRkZGRiwnd2hpdGVzbW9rZSc6MHhGNUY1RjUsJ3llbGxvdyc6MHhGRkZGMDAsJ3llbGxvd2dyZWVuJzoweDlBQ0QzMn07Y29uc3QgX2hzbEE9e2g6MCxzOjAsbDowfTtjb25zdCBfaHNsQj17aDowLHM6MCxsOjB9O2Z1bmN0aW9uIGh1ZTJyZ2IocCxxLHQpe2lmKHQ8MCl0Kz0xO2lmKHQ+MSl0LT0xO2lmKHQ8MS82KXJldHVybiBwKyhxLXApKjYqdDtpZih0PDEvMilyZXR1cm4gcTtpZih0PDIvMylyZXR1cm4gcCsocS1wKSo2KigyLzMtdCk7cmV0dXJuIHA7fWZ1bmN0aW9uIFNSR0JUb0xpbmVhcihjKXtyZXR1cm4gYzwwLjA0MDQ1P2MqMC4wNzczOTkzODA4Ok1hdGgucG93KGMqMC45NDc4NjcyOTg2KzAuMDUyMTMyNzAxNCwyLjQpO31mdW5jdGlvbiBMaW5lYXJUb1NSR0IoYyl7cmV0dXJuIGM8MC4wMDMxMzA4P2MqMTIuOTI6MS4wNTUqTWF0aC5wb3coYywwLjQxNjY2KS0wLjA1NTt9Y2xhc3MgQ29sb3J7Y29uc3RydWN0b3IocixnLGIpe2lmKGc9PT11bmRlZmluZWQmJmI9PT11bmRlZmluZWQpey8vIHIgaXMgVEhSRUUuQ29sb3IsIGhleCBvciBzdHJpbmcKCXJldHVybiB0aGlzLnNldChyKTt9cmV0dXJuIHRoaXMuc2V0UkdCKHIsZyxiKTt9c2V0KHZhbHVlKXtpZih2YWx1ZSYmdmFsdWUuaXNDb2xvcil7dGhpcy5jb3B5KHZhbHVlKTt9ZWxzZSBpZih0eXBlb2YgdmFsdWU9PT0nbnVtYmVyJyl7dGhpcy5zZXRIZXgodmFsdWUpO31lbHNlIGlmKHR5cGVvZiB2YWx1ZT09PSdzdHJpbmcnKXt0aGlzLnNldFN0eWxlKHZhbHVlKTt9cmV0dXJuIHRoaXM7fXNldFNjYWxhcihzY2FsYXIpe3RoaXMucj1zY2FsYXI7dGhpcy5nPXNjYWxhcjt0aGlzLmI9c2NhbGFyO3JldHVybiB0aGlzO31zZXRIZXgoaGV4KXtoZXg9TWF0aC5mbG9vcihoZXgpO3RoaXMucj0oaGV4Pj4xNiYyNTUpLzI1NTt0aGlzLmc9KGhleD4+OCYyNTUpLzI1NTt0aGlzLmI9KGhleCYyNTUpLzI1NTtyZXR1cm4gdGhpczt9c2V0UkdCKHIsZyxiKXt0aGlzLnI9cjt0aGlzLmc9Zzt0aGlzLmI9YjtyZXR1cm4gdGhpczt9c2V0SFNMKGgscyxsKXsvLyBoLHMsbCByYW5nZXMgYXJlIGluIDAuMCAtIDEuMAoJaD1ldWNsaWRlYW5Nb2R1bG8oaCwxKTtzPWNsYW1wKHMsMCwxKTtsPWNsYW1wKGwsMCwxKTtpZihzPT09MCl7dGhpcy5yPXRoaXMuZz10aGlzLmI9bDt9ZWxzZSB7Y29uc3QgcD1sPD0wLjU/bCooMStzKTpsK3MtbCpzO2NvbnN0IHE9MipsLXA7dGhpcy5yPWh1ZTJyZ2IocSxwLGgrMS8zKTt0aGlzLmc9aHVlMnJnYihxLHAsaCk7dGhpcy5iPWh1ZTJyZ2IocSxwLGgtMS8zKTt9cmV0dXJuIHRoaXM7fXNldFN0eWxlKHN0eWxlKXtmdW5jdGlvbiBoYW5kbGVBbHBoYShzdHJpbmcpe2lmKHN0cmluZz09PXVuZGVmaW5lZClyZXR1cm47aWYocGFyc2VGbG9hdChzdHJpbmcpPDEpe2NvbnNvbGUud2FybignVEhSRUUuQ29sb3I6IEFscGhhIGNvbXBvbmVudCBvZiAnK3N0eWxlKycgd2lsbCBiZSBpZ25vcmVkLicpO319bGV0IG07aWYobT0vXigoPzpyZ2J8aHNsKWE/KVwoKFteXCldKilcKS8uZXhlYyhzdHlsZSkpey8vIHJnYiAvIGhzbAoJbGV0IGNvbG9yO2NvbnN0IG5hbWU9bVsxXTtjb25zdCBjb21wb25lbnRzPW1bMl07c3dpdGNoKG5hbWUpe2Nhc2UncmdiJzpjYXNlJ3JnYmEnOmlmKGNvbG9yPS9eXHMqKFxkKylccyosXHMqKFxkKylccyosXHMqKFxkKylccyooPzosXHMqKFxkKlwuP1xkKylccyopPyQvLmV4ZWMoY29tcG9uZW50cykpey8vIHJnYigyNTUsMCwwKSByZ2JhKDI1NSwwLDAsMC41KQoJdGhpcy5yPU1hdGgubWluKDI1NSxwYXJzZUludChjb2xvclsxXSwxMCkpLzI1NTt0aGlzLmc9TWF0aC5taW4oMjU1LHBhcnNlSW50KGNvbG9yWzJdLDEwKSkvMjU1O3RoaXMuYj1NYXRoLm1pbigyNTUscGFyc2VJbnQoY29sb3JbM10sMTApKS8yNTU7aGFuZGxlQWxwaGEoY29sb3JbNF0pO3JldHVybiB0aGlzO31pZihjb2xvcj0vXlxzKihcZCspXCVccyosXHMqKFxkKylcJVxzKixccyooXGQrKVwlXHMqKD86LFxzKihcZCpcLj9cZCspXHMqKT8kLy5leGVjKGNvbXBvbmVudHMpKXsvLyByZ2IoMTAwJSwwJSwwJSkgcmdiYSgxMDAlLDAlLDAlLDAuNSkKCXRoaXMucj1NYXRoLm1pbigxMDAscGFyc2VJbnQoY29sb3JbMV0sMTApKS8xMDA7dGhpcy5nPU1hdGgubWluKDEwMCxwYXJzZUludChjb2xvclsyXSwxMCkpLzEwMDt0aGlzLmI9TWF0aC5taW4oMTAwLHBhcnNlSW50KGNvbG9yWzNdLDEwKSkvMTAwO2hhbmRsZUFscGhhKGNvbG9yWzRdKTtyZXR1cm4gdGhpczt9YnJlYWs7Y2FzZSdoc2wnOmNhc2UnaHNsYSc6aWYoY29sb3I9L15ccyooXGQqXC4/XGQrKVxzKixccyooXGQrKVwlXHMqLFxzKihcZCspXCVccyooPzosXHMqKFxkKlwuP1xkKylccyopPyQvLmV4ZWMoY29tcG9uZW50cykpey8vIGhzbCgxMjAsNTAlLDUwJSkgaHNsYSgxMjAsNTAlLDUwJSwwLjUpCgljb25zdCBoPXBhcnNlRmxvYXQoY29sb3JbMV0pLzM2MDtjb25zdCBzPXBhcnNlSW50KGNvbG9yWzJdLDEwKS8xMDA7Y29uc3QgbD1wYXJzZUludChjb2xvclszXSwxMCkvMTAwO2hhbmRsZUFscGhhKGNvbG9yWzRdKTtyZXR1cm4gdGhpcy5zZXRIU0woaCxzLGwpO31icmVhazt9fWVsc2UgaWYobT0vXlwjKFtBLUZhLWZcZF0rKSQvLmV4ZWMoc3R5bGUpKXsvLyBoZXggY29sb3IKCWNvbnN0IGhleD1tWzFdO2NvbnN0IHNpemU9aGV4Lmxlbmd0aDtpZihzaXplPT09Myl7Ly8gI2ZmMAoJdGhpcy5yPXBhcnNlSW50KGhleC5jaGFyQXQoMCkraGV4LmNoYXJBdCgwKSwxNikvMjU1O3RoaXMuZz1wYXJzZUludChoZXguY2hhckF0KDEpK2hleC5jaGFyQXQoMSksMTYpLzI1NTt0aGlzLmI9cGFyc2VJbnQoaGV4LmNoYXJBdCgyKStoZXguY2hhckF0KDIpLDE2KS8yNTU7cmV0dXJuIHRoaXM7fWVsc2UgaWYoc2l6ZT09PTYpey8vICNmZjAwMDAKCXRoaXMucj1wYXJzZUludChoZXguY2hhckF0KDApK2hleC5jaGFyQXQoMSksMTYpLzI1NTt0aGlzLmc9cGFyc2VJbnQoaGV4LmNoYXJBdCgyKStoZXguY2hhckF0KDMpLDE2KS8yNTU7dGhpcy5iPXBhcnNlSW50KGhleC5jaGFyQXQoNCkraGV4LmNoYXJBdCg1KSwxNikvMjU1O3JldHVybiB0aGlzO319aWYoc3R5bGUmJnN0eWxlLmxlbmd0aD4wKXtyZXR1cm4gdGhpcy5zZXRDb2xvck5hbWUoc3R5bGUpO31yZXR1cm4gdGhpczt9c2V0Q29sb3JOYW1lKHN0eWxlKXsvLyBjb2xvciBrZXl3b3JkcwoJY29uc3QgaGV4PV9jb2xvcktleXdvcmRzW3N0eWxlLnRvTG93ZXJDYXNlKCldO2lmKGhleCE9PXVuZGVmaW5lZCl7Ly8gcmVkCgl0aGlzLnNldEhleChoZXgpO31lbHNlIHsvLyB1bmtub3duIGNvbG9yCgljb25zb2xlLndhcm4oJ1RIUkVFLkNvbG9yOiBVbmtub3duIGNvbG9yICcrc3R5bGUpO31yZXR1cm4gdGhpczt9Y2xvbmUoKXtyZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy5yLHRoaXMuZyx0aGlzLmIpO31jb3B5KGNvbG9yKXt0aGlzLnI9Y29sb3Iucjt0aGlzLmc9Y29sb3IuZzt0aGlzLmI9Y29sb3IuYjtyZXR1cm4gdGhpczt9Y29weUdhbW1hVG9MaW5lYXIoY29sb3IsZ2FtbWFGYWN0b3Ipe2lmKGdhbW1hRmFjdG9yPT09dm9pZCAwKXtnYW1tYUZhY3Rvcj0yLjA7fXRoaXMucj1NYXRoLnBvdyhjb2xvci5yLGdhbW1hRmFjdG9yKTt0aGlzLmc9TWF0aC5wb3coY29sb3IuZyxnYW1tYUZhY3Rvcik7dGhpcy5iPU1hdGgucG93KGNvbG9yLmIsZ2FtbWFGYWN0b3IpO3JldHVybiB0aGlzO31jb3B5TGluZWFyVG9HYW1tYShjb2xvcixnYW1tYUZhY3Rvcil7aWYoZ2FtbWFGYWN0b3I9PT12b2lkIDApe2dhbW1hRmFjdG9yPTIuMDt9Y29uc3Qgc2FmZUludmVyc2U9Z2FtbWFGYWN0b3I+MD8xLjAvZ2FtbWFGYWN0b3I6MS4wO3RoaXMucj1NYXRoLnBvdyhjb2xvci5yLHNhZmVJbnZlcnNlKTt0aGlzLmc9TWF0aC5wb3coY29sb3IuZyxzYWZlSW52ZXJzZSk7dGhpcy5iPU1hdGgucG93KGNvbG9yLmIsc2FmZUludmVyc2UpO3JldHVybiB0aGlzO31jb252ZXJ0R2FtbWFUb0xpbmVhcihnYW1tYUZhY3Rvcil7dGhpcy5jb3B5R2FtbWFUb0xpbmVhcih0aGlzLGdhbW1hRmFjdG9yKTtyZXR1cm4gdGhpczt9Y29udmVydExpbmVhclRvR2FtbWEoZ2FtbWFGYWN0b3Ipe3RoaXMuY29weUxpbmVhclRvR2FtbWEodGhpcyxnYW1tYUZhY3Rvcik7cmV0dXJuIHRoaXM7fWNvcHlTUkdCVG9MaW5lYXIoY29sb3Ipe3RoaXMucj1TUkdCVG9MaW5lYXIoY29sb3Iucik7dGhpcy5nPVNSR0JUb0xpbmVhcihjb2xvci5nKTt0aGlzLmI9U1JHQlRvTGluZWFyKGNvbG9yLmIpO3JldHVybiB0aGlzO31jb3B5TGluZWFyVG9TUkdCKGNvbG9yKXt0aGlzLnI9TGluZWFyVG9TUkdCKGNvbG9yLnIpO3RoaXMuZz1MaW5lYXJUb1NSR0IoY29sb3IuZyk7dGhpcy5iPUxpbmVhclRvU1JHQihjb2xvci5iKTtyZXR1cm4gdGhpczt9Y29udmVydFNSR0JUb0xpbmVhcigpe3RoaXMuY29weVNSR0JUb0xpbmVhcih0aGlzKTtyZXR1cm4gdGhpczt9Y29udmVydExpbmVhclRvU1JHQigpe3RoaXMuY29weUxpbmVhclRvU1JHQih0aGlzKTtyZXR1cm4gdGhpczt9Z2V0SGV4KCl7cmV0dXJuIHRoaXMucioyNTU8PDE2XnRoaXMuZyoyNTU8PDhedGhpcy5iKjI1NTw8MDt9Z2V0SGV4U3RyaW5nKCl7cmV0dXJuICgnMDAwMDAwJyt0aGlzLmdldEhleCgpLnRvU3RyaW5nKDE2KSkuc2xpY2UoLTYpO31nZXRIU0wodGFyZ2V0KXsvLyBoLHMsbCByYW5nZXMgYXJlIGluIDAuMCAtIDEuMAoJY29uc3Qgcj10aGlzLnIsZz10aGlzLmcsYj10aGlzLmI7Y29uc3QgbWF4PU1hdGgubWF4KHIsZyxiKTtjb25zdCBtaW49TWF0aC5taW4ocixnLGIpO2xldCBodWUsc2F0dXJhdGlvbjtjb25zdCBsaWdodG5lc3M9KG1pbittYXgpLzIuMDtpZihtaW49PT1tYXgpe2h1ZT0wO3NhdHVyYXRpb249MDt9ZWxzZSB7Y29uc3QgZGVsdGE9bWF4LW1pbjtzYXR1cmF0aW9uPWxpZ2h0bmVzczw9MC41P2RlbHRhLyhtYXgrbWluKTpkZWx0YS8oMi1tYXgtbWluKTtzd2l0Y2gobWF4KXtjYXNlIHI6aHVlPShnLWIpL2RlbHRhKyhnPGI/NjowKTticmVhaztjYXNlIGc6aHVlPShiLXIpL2RlbHRhKzI7YnJlYWs7Y2FzZSBiOmh1ZT0oci1nKS9kZWx0YSs0O2JyZWFrO31odWUvPTY7fXRhcmdldC5oPWh1ZTt0YXJnZXQucz1zYXR1cmF0aW9uO3RhcmdldC5sPWxpZ2h0bmVzcztyZXR1cm4gdGFyZ2V0O31nZXRTdHlsZSgpe3JldHVybiAncmdiKCcrKHRoaXMucioyNTV8MCkrJywnKyh0aGlzLmcqMjU1fDApKycsJysodGhpcy5iKjI1NXwwKSsnKSc7fW9mZnNldEhTTChoLHMsbCl7dGhpcy5nZXRIU0woX2hzbEEpO19oc2xBLmgrPWg7X2hzbEEucys9cztfaHNsQS5sKz1sO3RoaXMuc2V0SFNMKF9oc2xBLmgsX2hzbEEucyxfaHNsQS5sKTtyZXR1cm4gdGhpczt9YWRkKGNvbG9yKXt0aGlzLnIrPWNvbG9yLnI7dGhpcy5nKz1jb2xvci5nO3RoaXMuYis9Y29sb3IuYjtyZXR1cm4gdGhpczt9YWRkQ29sb3JzKGNvbG9yMSxjb2xvcjIpe3RoaXMucj1jb2xvcjEucitjb2xvcjIucjt0aGlzLmc9Y29sb3IxLmcrY29sb3IyLmc7dGhpcy5iPWNvbG9yMS5iK2NvbG9yMi5iO3JldHVybiB0aGlzO31hZGRTY2FsYXIocyl7dGhpcy5yKz1zO3RoaXMuZys9czt0aGlzLmIrPXM7cmV0dXJuIHRoaXM7fXN1Yihjb2xvcil7dGhpcy5yPU1hdGgubWF4KDAsdGhpcy5yLWNvbG9yLnIpO3RoaXMuZz1NYXRoLm1heCgwLHRoaXMuZy1jb2xvci5nKTt0aGlzLmI9TWF0aC5tYXgoMCx0aGlzLmItY29sb3IuYik7cmV0dXJuIHRoaXM7fW11bHRpcGx5KGNvbG9yKXt0aGlzLnIqPWNvbG9yLnI7dGhpcy5nKj1jb2xvci5nO3RoaXMuYio9Y29sb3IuYjtyZXR1cm4gdGhpczt9bXVsdGlwbHlTY2FsYXIocyl7dGhpcy5yKj1zO3RoaXMuZyo9czt0aGlzLmIqPXM7cmV0dXJuIHRoaXM7fWxlcnAoY29sb3IsYWxwaGEpe3RoaXMucis9KGNvbG9yLnItdGhpcy5yKSphbHBoYTt0aGlzLmcrPShjb2xvci5nLXRoaXMuZykqYWxwaGE7dGhpcy5iKz0oY29sb3IuYi10aGlzLmIpKmFscGhhO3JldHVybiB0aGlzO31sZXJwQ29sb3JzKGNvbG9yMSxjb2xvcjIsYWxwaGEpe3RoaXMucj1jb2xvcjEucisoY29sb3IyLnItY29sb3IxLnIpKmFscGhhO3RoaXMuZz1jb2xvcjEuZysoY29sb3IyLmctY29sb3IxLmcpKmFscGhhO3RoaXMuYj1jb2xvcjEuYisoY29sb3IyLmItY29sb3IxLmIpKmFscGhhO3JldHVybiB0aGlzO31sZXJwSFNMKGNvbG9yLGFscGhhKXt0aGlzLmdldEhTTChfaHNsQSk7Y29sb3IuZ2V0SFNMKF9oc2xCKTtjb25zdCBoPWxlcnAoX2hzbEEuaCxfaHNsQi5oLGFscGhhKTtjb25zdCBzPWxlcnAoX2hzbEEucyxfaHNsQi5zLGFscGhhKTtjb25zdCBsPWxlcnAoX2hzbEEubCxfaHNsQi5sLGFscGhhKTt0aGlzLnNldEhTTChoLHMsbCk7cmV0dXJuIHRoaXM7fWVxdWFscyhjKXtyZXR1cm4gYy5yPT09dGhpcy5yJiZjLmc9PT10aGlzLmcmJmMuYj09PXRoaXMuYjt9ZnJvbUFycmF5KGFycmF5LG9mZnNldCl7aWYob2Zmc2V0PT09dm9pZCAwKXtvZmZzZXQ9MDt9dGhpcy5yPWFycmF5W29mZnNldF07dGhpcy5nPWFycmF5W29mZnNldCsxXTt0aGlzLmI9YXJyYXlbb2Zmc2V0KzJdO3JldHVybiB0aGlzO310b0FycmF5KGFycmF5LG9mZnNldCl7aWYoYXJyYXk9PT12b2lkIDApe2FycmF5PVtdO31pZihvZmZzZXQ9PT12b2lkIDApe29mZnNldD0wO31hcnJheVtvZmZzZXRdPXRoaXMucjthcnJheVtvZmZzZXQrMV09dGhpcy5nO2FycmF5W29mZnNldCsyXT10aGlzLmI7cmV0dXJuIGFycmF5O31mcm9tQnVmZmVyQXR0cmlidXRlKGF0dHJpYnV0ZSxpbmRleCl7dGhpcy5yPWF0dHJpYnV0ZS5nZXRYKGluZGV4KTt0aGlzLmc9YXR0cmlidXRlLmdldFkoaW5kZXgpO3RoaXMuYj1hdHRyaWJ1dGUuZ2V0WihpbmRleCk7aWYoYXR0cmlidXRlLm5vcm1hbGl6ZWQ9PT10cnVlKXsvLyBhc3N1bWluZyBVaW50OEFycmF5Cgl0aGlzLnIvPTI1NTt0aGlzLmcvPTI1NTt0aGlzLmIvPTI1NTt9cmV0dXJuIHRoaXM7fXRvSlNPTigpe3JldHVybiB0aGlzLmdldEhleCgpO319Q29sb3IuTkFNRVM9X2NvbG9yS2V5d29yZHM7Q29sb3IucHJvdG90eXBlLmlzQ29sb3I9dHJ1ZTtDb2xvci5wcm90b3R5cGUucj0xO0NvbG9yLnByb3RvdHlwZS5nPTE7Q29sb3IucHJvdG90eXBlLmI9MTsvKioKCSAqIHBhcmFtZXRlcnMgPSB7CgkgKiAgY29sb3I6IDxoZXg+LAoJICogIG9wYWNpdHk6IDxmbG9hdD4sCgkgKiAgbWFwOiBuZXcgVEhSRUUuVGV4dHVyZSggPEltYWdlPiApLAoJICoKCSAqICBsaWdodE1hcDogbmV3IFRIUkVFLlRleHR1cmUoIDxJbWFnZT4gKSwKCSAqICBsaWdodE1hcEludGVuc2l0eTogPGZsb2F0PgoJICoKCSAqICBhb01hcDogbmV3IFRIUkVFLlRleHR1cmUoIDxJbWFnZT4gKSwKCSAqICBhb01hcEludGVuc2l0eTogPGZsb2F0PgoJICoKCSAqICBzcGVjdWxhck1hcDogbmV3IFRIUkVFLlRleHR1cmUoIDxJbWFnZT4gKSwKCSAqCgkgKiAgYWxwaGFNYXA6IG5ldyBUSFJFRS5UZXh0dXJlKCA8SW1hZ2U+ICksCgkgKgoJICogIGVudk1hcDogbmV3IFRIUkVFLkN1YmVUZXh0dXJlKCBbcG9zeCwgbmVneCwgcG9zeSwgbmVneSwgcG9zeiwgbmVnel0gKSwKCSAqICBjb21iaW5lOiBUSFJFRS5NdWx0aXBseSwKCSAqICByZWZsZWN0aXZpdHk6IDxmbG9hdD4sCgkgKiAgcmVmcmFjdGlvblJhdGlvOiA8ZmxvYXQ+LAoJICoKCSAqICBkZXB0aFRlc3Q6IDxib29sPiwKCSAqICBkZXB0aFdyaXRlOiA8Ym9vbD4sCgkgKgoJICogIHdpcmVmcmFtZTogPGJvb2xlYW4+LAoJICogIHdpcmVmcmFtZUxpbmV3aWR0aDogPGZsb2F0PiwKCSAqIH0KCSAqL2NsYXNzIE1lc2hCYXNpY01hdGVyaWFsIGV4dGVuZHMgTWF0ZXJpYWx7Y29uc3RydWN0b3IocGFyYW1ldGVycyl7c3VwZXIoKTt0aGlzLnR5cGU9J01lc2hCYXNpY01hdGVyaWFsJzt0aGlzLmNvbG9yPW5ldyBDb2xvcigweGZmZmZmZik7Ly8gZW1pc3NpdmUKCXRoaXMubWFwPW51bGw7dGhpcy5saWdodE1hcD1udWxsO3RoaXMubGlnaHRNYXBJbnRlbnNpdHk9MS4wO3RoaXMuYW9NYXA9bnVsbDt0aGlzLmFvTWFwSW50ZW5zaXR5PTEuMDt0aGlzLnNwZWN1bGFyTWFwPW51bGw7dGhpcy5hbHBoYU1hcD1udWxsO3RoaXMuZW52TWFwPW51bGw7dGhpcy5jb21iaW5lPU11bHRpcGx5T3BlcmF0aW9uO3RoaXMucmVmbGVjdGl2aXR5PTE7dGhpcy5yZWZyYWN0aW9uUmF0aW89MC45ODt0aGlzLndpcmVmcmFtZT1mYWxzZTt0aGlzLndpcmVmcmFtZUxpbmV3aWR0aD0xO3RoaXMud2lyZWZyYW1lTGluZWNhcD0ncm91bmQnO3RoaXMud2lyZWZyYW1lTGluZWpvaW49J3JvdW5kJzt0aGlzLnNldFZhbHVlcyhwYXJhbWV0ZXJzKTt9Y29weShzb3VyY2Upe3N1cGVyLmNvcHkoc291cmNlKTt0aGlzLmNvbG9yLmNvcHkoc291cmNlLmNvbG9yKTt0aGlzLm1hcD1zb3VyY2UubWFwO3RoaXMubGlnaHRNYXA9c291cmNlLmxpZ2h0TWFwO3RoaXMubGlnaHRNYXBJbnRlbnNpdHk9c291cmNlLmxpZ2h0TWFwSW50ZW5zaXR5O3RoaXMuYW9NYXA9c291cmNlLmFvTWFwO3RoaXMuYW9NYXBJbnRlbnNpdHk9c291cmNlLmFvTWFwSW50ZW5zaXR5O3RoaXMuc3BlY3VsYXJNYXA9c291cmNlLnNwZWN1bGFyTWFwO3RoaXMuYWxwaGFNYXA9c291cmNlLmFscGhhTWFwO3RoaXMuZW52TWFwPXNvdXJjZS5lbnZNYXA7dGhpcy5jb21iaW5lPXNvdXJjZS5jb21iaW5lO3RoaXMucmVmbGVjdGl2aXR5PXNvdXJjZS5yZWZsZWN0aXZpdHk7dGhpcy5yZWZyYWN0aW9uUmF0aW89c291cmNlLnJlZnJhY3Rpb25SYXRpbzt0aGlzLndpcmVmcmFtZT1zb3VyY2Uud2lyZWZyYW1lO3RoaXMud2lyZWZyYW1lTGluZXdpZHRoPXNvdXJjZS53aXJlZnJhbWVMaW5ld2lkdGg7dGhpcy53aXJlZnJhbWVMaW5lY2FwPXNvdXJjZS53aXJlZnJhbWVMaW5lY2FwO3RoaXMud2lyZWZyYW1lTGluZWpvaW49c291cmNlLndpcmVmcmFtZUxpbmVqb2luO3JldHVybiB0aGlzO319TWVzaEJhc2ljTWF0ZXJpYWwucHJvdG90eXBlLmlzTWVzaEJhc2ljTWF0ZXJpYWw9dHJ1ZTtjb25zdCBfdmVjdG9yJDk9LypAX19QVVJFX18qL25ldyBWZWN0b3IzKCk7Y29uc3QgX3ZlY3RvcjIkMT0vKkBfX1BVUkVfXyovbmV3IFZlY3RvcjIoKTtjbGFzcyBCdWZmZXJBdHRyaWJ1dGV7Y29uc3RydWN0b3IoYXJyYXksaXRlbVNpemUsbm9ybWFsaXplZCl7aWYoQXJyYXkuaXNBcnJheShhcnJheSkpe3Rocm93IG5ldyBUeXBlRXJyb3IoJ1RIUkVFLkJ1ZmZlckF0dHJpYnV0ZTogYXJyYXkgc2hvdWxkIGJlIGEgVHlwZWQgQXJyYXkuJyk7fXRoaXMubmFtZT0nJzt0aGlzLmFycmF5PWFycmF5O3RoaXMuaXRlbVNpemU9aXRlbVNpemU7dGhpcy5jb3VudD1hcnJheSE9PXVuZGVmaW5lZD9hcnJheS5sZW5ndGgvaXRlbVNpemU6MDt0aGlzLm5vcm1hbGl6ZWQ9bm9ybWFsaXplZD09PXRydWU7dGhpcy51c2FnZT1TdGF0aWNEcmF3VXNhZ2U7dGhpcy51cGRhdGVSYW5nZT17b2Zmc2V0OjAsY291bnQ6LTF9O3RoaXMudmVyc2lvbj0wO31vblVwbG9hZENhbGxiYWNrKCl7fXNldCBuZWVkc1VwZGF0ZSh2YWx1ZSl7aWYodmFsdWU9PT10cnVlKXRoaXMudmVyc2lvbisrO31zZXRVc2FnZSh2YWx1ZSl7dGhpcy51c2FnZT12YWx1ZTtyZXR1cm4gdGhpczt9Y29weShzb3VyY2Upe3RoaXMubmFtZT1zb3VyY2UubmFtZTt0aGlzLmFycmF5PW5ldyBzb3VyY2UuYXJyYXkuY29uc3RydWN0b3Ioc291cmNlLmFycmF5KTt0aGlzLml0ZW1TaXplPXNvdXJjZS5pdGVtU2l6ZTt0aGlzLmNvdW50PXNvdXJjZS5jb3VudDt0aGlzLm5vcm1hbGl6ZWQ9c291cmNlLm5vcm1hbGl6ZWQ7dGhpcy51c2FnZT1zb3VyY2UudXNhZ2U7cmV0dXJuIHRoaXM7fWNvcHlBdChpbmRleDEsYXR0cmlidXRlLGluZGV4Mil7aW5kZXgxKj10aGlzLml0ZW1TaXplO2luZGV4Mio9YXR0cmlidXRlLml0ZW1TaXplO2ZvcihsZXQgaT0wLGw9dGhpcy5pdGVtU2l6ZTtpPGw7aSsrKXt0aGlzLmFycmF5W2luZGV4MStpXT1hdHRyaWJ1dGUuYXJyYXlbaW5kZXgyK2ldO31yZXR1cm4gdGhpczt9Y29weUFycmF5KGFycmF5KXt0aGlzLmFycmF5LnNldChhcnJheSk7cmV0dXJuIHRoaXM7fWNvcHlDb2xvcnNBcnJheShjb2xvcnMpe2NvbnN0IGFycmF5PXRoaXMuYXJyYXk7bGV0IG9mZnNldD0wO2ZvcihsZXQgaT0wLGw9Y29sb3JzLmxlbmd0aDtpPGw7aSsrKXtsZXQgY29sb3I9Y29sb3JzW2ldO2lmKGNvbG9yPT09dW5kZWZpbmVkKXtjb25zb2xlLndhcm4oJ1RIUkVFLkJ1ZmZlckF0dHJpYnV0ZS5jb3B5Q29sb3JzQXJyYXkoKTogY29sb3IgaXMgdW5kZWZpbmVkJyxpKTtjb2xvcj1uZXcgQ29sb3IoKTt9YXJyYXlbb2Zmc2V0KytdPWNvbG9yLnI7YXJyYXlbb2Zmc2V0KytdPWNvbG9yLmc7YXJyYXlbb2Zmc2V0KytdPWNvbG9yLmI7fXJldHVybiB0aGlzO31jb3B5VmVjdG9yMnNBcnJheSh2ZWN0b3JzKXtjb25zdCBhcnJheT10aGlzLmFycmF5O2xldCBvZmZzZXQ9MDtmb3IobGV0IGk9MCxsPXZlY3RvcnMubGVuZ3RoO2k8bDtpKyspe2xldCB2ZWN0b3I9dmVjdG9yc1tpXTtpZih2ZWN0b3I9PT11bmRlZmluZWQpe2NvbnNvbGUud2FybignVEhSRUUuQnVmZmVyQXR0cmlidXRlLmNvcHlWZWN0b3Iyc0FycmF5KCk6IHZlY3RvciBpcyB1bmRlZmluZWQnLGkpO3ZlY3Rvcj1uZXcgVmVjdG9yMigpO31hcnJheVtvZmZzZXQrK109dmVjdG9yLng7YXJyYXlbb2Zmc2V0KytdPXZlY3Rvci55O31yZXR1cm4gdGhpczt9Y29weVZlY3RvcjNzQXJyYXkodmVjdG9ycyl7Y29uc3QgYXJyYXk9dGhpcy5hcnJheTtsZXQgb2Zmc2V0PTA7Zm9yKGxldCBpPTAsbD12ZWN0b3JzLmxlbmd0aDtpPGw7aSsrKXtsZXQgdmVjdG9yPXZlY3RvcnNbaV07aWYodmVjdG9yPT09dW5kZWZpbmVkKXtjb25zb2xlLndhcm4oJ1RIUkVFLkJ1ZmZlckF0dHJpYnV0ZS5jb3B5VmVjdG9yM3NBcnJheSgpOiB2ZWN0b3IgaXMgdW5kZWZpbmVkJyxpKTt2ZWN0b3I9bmV3IFZlY3RvcjMoKTt9YXJyYXlbb2Zmc2V0KytdPXZlY3Rvci54O2FycmF5W29mZnNldCsrXT12ZWN0b3IueTthcnJheVtvZmZzZXQrK109dmVjdG9yLno7fXJldHVybiB0aGlzO31jb3B5VmVjdG9yNHNBcnJheSh2ZWN0b3JzKXtjb25zdCBhcnJheT10aGlzLmFycmF5O2xldCBvZmZzZXQ9MDtmb3IobGV0IGk9MCxsPXZlY3RvcnMubGVuZ3RoO2k8bDtpKyspe2xldCB2ZWN0b3I9dmVjdG9yc1tpXTtpZih2ZWN0b3I9PT11bmRlZmluZWQpe2NvbnNvbGUud2FybignVEhSRUUuQnVmZmVyQXR0cmlidXRlLmNvcHlWZWN0b3I0c0FycmF5KCk6IHZlY3RvciBpcyB1bmRlZmluZWQnLGkpO3ZlY3Rvcj1uZXcgVmVjdG9yNCgpO31hcnJheVtvZmZzZXQrK109dmVjdG9yLng7YXJyYXlbb2Zmc2V0KytdPXZlY3Rvci55O2FycmF5W29mZnNldCsrXT12ZWN0b3IuejthcnJheVtvZmZzZXQrK109dmVjdG9yLnc7fXJldHVybiB0aGlzO31hcHBseU1hdHJpeDMobSl7aWYodGhpcy5pdGVtU2l6ZT09PTIpe2ZvcihsZXQgaT0wLGw9dGhpcy5jb3VudDtpPGw7aSsrKXtfdmVjdG9yMiQxLmZyb21CdWZmZXJBdHRyaWJ1dGUodGhpcyxpKTtfdmVjdG9yMiQxLmFwcGx5TWF0cml4MyhtKTt0aGlzLnNldFhZKGksX3ZlY3RvcjIkMS54LF92ZWN0b3IyJDEueSk7fX1lbHNlIGlmKHRoaXMuaXRlbVNpemU9PT0zKXtmb3IobGV0IGk9MCxsPXRoaXMuY291bnQ7aTxsO2krKyl7X3ZlY3RvciQ5LmZyb21CdWZmZXJBdHRyaWJ1dGUodGhpcyxpKTtfdmVjdG9yJDkuYXBwbHlNYXRyaXgzKG0pO3RoaXMuc2V0WFlaKGksX3ZlY3RvciQ5LngsX3ZlY3RvciQ5LnksX3ZlY3RvciQ5LnopO319cmV0dXJuIHRoaXM7fWFwcGx5TWF0cml4NChtKXtmb3IobGV0IGk9MCxsPXRoaXMuY291bnQ7aTxsO2krKyl7X3ZlY3RvciQ5Lng9dGhpcy5nZXRYKGkpO192ZWN0b3IkOS55PXRoaXMuZ2V0WShpKTtfdmVjdG9yJDkuej10aGlzLmdldFooaSk7X3ZlY3RvciQ5LmFwcGx5TWF0cml4NChtKTt0aGlzLnNldFhZWihpLF92ZWN0b3IkOS54LF92ZWN0b3IkOS55LF92ZWN0b3IkOS56KTt9cmV0dXJuIHRoaXM7fWFwcGx5Tm9ybWFsTWF0cml4KG0pe2ZvcihsZXQgaT0wLGw9dGhpcy5jb3VudDtpPGw7aSsrKXtfdmVjdG9yJDkueD10aGlzLmdldFgoaSk7X3ZlY3RvciQ5Lnk9dGhpcy5nZXRZKGkpO192ZWN0b3IkOS56PXRoaXMuZ2V0WihpKTtfdmVjdG9yJDkuYXBwbHlOb3JtYWxNYXRyaXgobSk7dGhpcy5zZXRYWVooaSxfdmVjdG9yJDkueCxfdmVjdG9yJDkueSxfdmVjdG9yJDkueik7fXJldHVybiB0aGlzO310cmFuc2Zvcm1EaXJlY3Rpb24obSl7Zm9yKGxldCBpPTAsbD10aGlzLmNvdW50O2k8bDtpKyspe192ZWN0b3IkOS54PXRoaXMuZ2V0WChpKTtfdmVjdG9yJDkueT10aGlzLmdldFkoaSk7X3ZlY3RvciQ5Lno9dGhpcy5nZXRaKGkpO192ZWN0b3IkOS50cmFuc2Zvcm1EaXJlY3Rpb24obSk7dGhpcy5zZXRYWVooaSxfdmVjdG9yJDkueCxfdmVjdG9yJDkueSxfdmVjdG9yJDkueik7fXJldHVybiB0aGlzO31zZXQodmFsdWUsb2Zmc2V0KXtpZihvZmZzZXQ9PT12b2lkIDApe29mZnNldD0wO310aGlzLmFycmF5LnNldCh2YWx1ZSxvZmZzZXQpO3JldHVybiB0aGlzO31nZXRYKGluZGV4KXtyZXR1cm4gdGhpcy5hcnJheVtpbmRleCp0aGlzLml0ZW1TaXplXTt9c2V0WChpbmRleCx4KXt0aGlzLmFycmF5W2luZGV4KnRoaXMuaXRlbVNpemVdPXg7cmV0dXJuIHRoaXM7fWdldFkoaW5kZXgpe3JldHVybiB0aGlzLmFycmF5W2luZGV4KnRoaXMuaXRlbVNpemUrMV07fXNldFkoaW5kZXgseSl7dGhpcy5hcnJheVtpbmRleCp0aGlzLml0ZW1TaXplKzFdPXk7cmV0dXJuIHRoaXM7fWdldFooaW5kZXgpe3JldHVybiB0aGlzLmFycmF5W2luZGV4KnRoaXMuaXRlbVNpemUrMl07fXNldFooaW5kZXgseil7dGhpcy5hcnJheVtpbmRleCp0aGlzLml0ZW1TaXplKzJdPXo7cmV0dXJuIHRoaXM7fWdldFcoaW5kZXgpe3JldHVybiB0aGlzLmFycmF5W2luZGV4KnRoaXMuaXRlbVNpemUrM107fXNldFcoaW5kZXgsdyl7dGhpcy5hcnJheVtpbmRleCp0aGlzLml0ZW1TaXplKzNdPXc7cmV0dXJuIHRoaXM7fXNldFhZKGluZGV4LHgseSl7aW5kZXgqPXRoaXMuaXRlbVNpemU7dGhpcy5hcnJheVtpbmRleCswXT14O3RoaXMuYXJyYXlbaW5kZXgrMV09eTtyZXR1cm4gdGhpczt9c2V0WFlaKGluZGV4LHgseSx6KXtpbmRleCo9dGhpcy5pdGVtU2l6ZTt0aGlzLmFycmF5W2luZGV4KzBdPXg7dGhpcy5hcnJheVtpbmRleCsxXT15O3RoaXMuYXJyYXlbaW5kZXgrMl09ejtyZXR1cm4gdGhpczt9c2V0WFlaVyhpbmRleCx4LHkseix3KXtpbmRleCo9dGhpcy5pdGVtU2l6ZTt0aGlzLmFycmF5W2luZGV4KzBdPXg7dGhpcy5hcnJheVtpbmRleCsxXT15O3RoaXMuYXJyYXlbaW5kZXgrMl09ejt0aGlzLmFycmF5W2luZGV4KzNdPXc7cmV0dXJuIHRoaXM7fW9uVXBsb2FkKGNhbGxiYWNrKXt0aGlzLm9uVXBsb2FkQ2FsbGJhY2s9Y2FsbGJhY2s7cmV0dXJuIHRoaXM7fWNsb25lKCl7cmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMuYXJyYXksdGhpcy5pdGVtU2l6ZSkuY29weSh0aGlzKTt9dG9KU09OKCl7Y29uc3QgZGF0YT17aXRlbVNpemU6dGhpcy5pdGVtU2l6ZSx0eXBlOnRoaXMuYXJyYXkuY29uc3RydWN0b3IubmFtZSxhcnJheTpBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0aGlzLmFycmF5KSxub3JtYWxpemVkOnRoaXMubm9ybWFsaXplZH07aWYodGhpcy5uYW1lIT09JycpZGF0YS5uYW1lPXRoaXMubmFtZTtpZih0aGlzLnVzYWdlIT09U3RhdGljRHJhd1VzYWdlKWRhdGEudXNhZ2U9dGhpcy51c2FnZTtpZih0aGlzLnVwZGF0ZVJhbmdlLm9mZnNldCE9PTB8fHRoaXMudXBkYXRlUmFuZ2UuY291bnQhPT0tMSlkYXRhLnVwZGF0ZVJhbmdlPXRoaXMudXBkYXRlUmFuZ2U7cmV0dXJuIGRhdGE7fX1CdWZmZXJBdHRyaWJ1dGUucHJvdG90eXBlLmlzQnVmZmVyQXR0cmlidXRlPXRydWU7Ly8KCWNsYXNzIFVpbnQxNkJ1ZmZlckF0dHJpYnV0ZSBleHRlbmRzIEJ1ZmZlckF0dHJpYnV0ZXtjb25zdHJ1Y3RvcihhcnJheSxpdGVtU2l6ZSxub3JtYWxpemVkKXtzdXBlcihuZXcgVWludDE2QXJyYXkoYXJyYXkpLGl0ZW1TaXplLG5vcm1hbGl6ZWQpO319Y2xhc3MgVWludDMyQnVmZmVyQXR0cmlidXRlIGV4dGVuZHMgQnVmZmVyQXR0cmlidXRle2NvbnN0cnVjdG9yKGFycmF5LGl0ZW1TaXplLG5vcm1hbGl6ZWQpe3N1cGVyKG5ldyBVaW50MzJBcnJheShhcnJheSksaXRlbVNpemUsbm9ybWFsaXplZCk7fX1jbGFzcyBGbG9hdDE2QnVmZmVyQXR0cmlidXRlIGV4dGVuZHMgQnVmZmVyQXR0cmlidXRle2NvbnN0cnVjdG9yKGFycmF5LGl0ZW1TaXplLG5vcm1hbGl6ZWQpe3N1cGVyKG5ldyBVaW50MTZBcnJheShhcnJheSksaXRlbVNpemUsbm9ybWFsaXplZCk7fX1GbG9hdDE2QnVmZmVyQXR0cmlidXRlLnByb3RvdHlwZS5pc0Zsb2F0MTZCdWZmZXJBdHRyaWJ1dGU9dHJ1ZTtjbGFzcyBGbG9hdDMyQnVmZmVyQXR0cmlidXRlIGV4dGVuZHMgQnVmZmVyQXR0cmlidXRle2NvbnN0cnVjdG9yKGFycmF5LGl0ZW1TaXplLG5vcm1hbGl6ZWQpe3N1cGVyKG5ldyBGbG9hdDMyQXJyYXkoYXJyYXkpLGl0ZW1TaXplLG5vcm1hbGl6ZWQpO319bGV0IF9pZD0wO2NvbnN0IF9tMT0vKkBfX1BVUkVfXyovbmV3IE1hdHJpeDQoKTtjb25zdCBfb2JqPS8qQF9fUFVSRV9fKi9uZXcgT2JqZWN0M0QoKTtjb25zdCBfb2Zmc2V0PS8qQF9fUFVSRV9fKi9uZXcgVmVjdG9yMygpO2NvbnN0IF9ib3gkMT0vKkBfX1BVUkVfXyovbmV3IEJveDMoKTtjb25zdCBfYm94TW9ycGhUYXJnZXRzPS8qQF9fUFVSRV9fKi9uZXcgQm94MygpO2NvbnN0IF92ZWN0b3IkOD0vKkBfX1BVUkVfXyovbmV3IFZlY3RvcjMoKTtjbGFzcyBCdWZmZXJHZW9tZXRyeSBleHRlbmRzIEV2ZW50RGlzcGF0Y2hlcntjb25zdHJ1Y3Rvcigpe3N1cGVyKCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsJ2lkJyx7dmFsdWU6X2lkKyt9KTt0aGlzLnV1aWQ9Z2VuZXJhdGVVVUlEKCk7dGhpcy5uYW1lPScnO3RoaXMudHlwZT0nQnVmZmVyR2VvbWV0cnknO3RoaXMuaW5kZXg9bnVsbDt0aGlzLmF0dHJpYnV0ZXM9e307dGhpcy5tb3JwaEF0dHJpYnV0ZXM9e307dGhpcy5tb3JwaFRhcmdldHNSZWxhdGl2ZT1mYWxzZTt0aGlzLmdyb3Vwcz1bXTt0aGlzLmJvdW5kaW5nQm94PW51bGw7dGhpcy5ib3VuZGluZ1NwaGVyZT1udWxsO3RoaXMuZHJhd1JhbmdlPXtzdGFydDowLGNvdW50OkluZmluaXR5fTt0aGlzLnVzZXJEYXRhPXt9O31nZXRJbmRleCgpe3JldHVybiB0aGlzLmluZGV4O31zZXRJbmRleChpbmRleCl7aWYoQXJyYXkuaXNBcnJheShpbmRleCkpe3RoaXMuaW5kZXg9bmV3KGFycmF5TWF4KGluZGV4KT42NTUzNT9VaW50MzJCdWZmZXJBdHRyaWJ1dGU6VWludDE2QnVmZmVyQXR0cmlidXRlKShpbmRleCwxKTt9ZWxzZSB7dGhpcy5pbmRleD1pbmRleDt9cmV0dXJuIHRoaXM7fWdldEF0dHJpYnV0ZShuYW1lKXtyZXR1cm4gdGhpcy5hdHRyaWJ1dGVzW25hbWVdO31zZXRBdHRyaWJ1dGUobmFtZSxhdHRyaWJ1dGUpe3RoaXMuYXR0cmlidXRlc1tuYW1lXT1hdHRyaWJ1dGU7cmV0dXJuIHRoaXM7fWRlbGV0ZUF0dHJpYnV0ZShuYW1lKXtkZWxldGUgdGhpcy5hdHRyaWJ1dGVzW25hbWVdO3JldHVybiB0aGlzO31oYXNBdHRyaWJ1dGUobmFtZSl7cmV0dXJuIHRoaXMuYXR0cmlidXRlc1tuYW1lXSE9PXVuZGVmaW5lZDt9YWRkR3JvdXAoc3RhcnQsY291bnQsbWF0ZXJpYWxJbmRleCl7aWYobWF0ZXJpYWxJbmRleD09PXZvaWQgMCl7bWF0ZXJpYWxJbmRleD0wO310aGlzLmdyb3Vwcy5wdXNoKHtzdGFydDpzdGFydCxjb3VudDpjb3VudCxtYXRlcmlhbEluZGV4Om1hdGVyaWFsSW5kZXh9KTt9Y2xlYXJHcm91cHMoKXt0aGlzLmdyb3Vwcz1bXTt9c2V0RHJhd1JhbmdlKHN0YXJ0LGNvdW50KXt0aGlzLmRyYXdSYW5nZS5zdGFydD1zdGFydDt0aGlzLmRyYXdSYW5nZS5jb3VudD1jb3VudDt9YXBwbHlNYXRyaXg0KG1hdHJpeCl7Y29uc3QgcG9zaXRpb249dGhpcy5hdHRyaWJ1dGVzLnBvc2l0aW9uO2lmKHBvc2l0aW9uIT09dW5kZWZpbmVkKXtwb3NpdGlvbi5hcHBseU1hdHJpeDQobWF0cml4KTtwb3NpdGlvbi5uZWVkc1VwZGF0ZT10cnVlO31jb25zdCBub3JtYWw9dGhpcy5hdHRyaWJ1dGVzLm5vcm1hbDtpZihub3JtYWwhPT11bmRlZmluZWQpe2NvbnN0IG5vcm1hbE1hdHJpeD1uZXcgTWF0cml4MygpLmdldE5vcm1hbE1hdHJpeChtYXRyaXgpO25vcm1hbC5hcHBseU5vcm1hbE1hdHJpeChub3JtYWxNYXRyaXgpO25vcm1hbC5uZWVkc1VwZGF0ZT10cnVlO31jb25zdCB0YW5nZW50PXRoaXMuYXR0cmlidXRlcy50YW5nZW50O2lmKHRhbmdlbnQhPT11bmRlZmluZWQpe3RhbmdlbnQudHJhbnNmb3JtRGlyZWN0aW9uKG1hdHJpeCk7dGFuZ2VudC5uZWVkc1VwZGF0ZT10cnVlO31pZih0aGlzLmJvdW5kaW5nQm94IT09bnVsbCl7dGhpcy5jb21wdXRlQm91bmRpbmdCb3goKTt9aWYodGhpcy5ib3VuZGluZ1NwaGVyZSE9PW51bGwpe3RoaXMuY29tcHV0ZUJvdW5kaW5nU3BoZXJlKCk7fXJldHVybiB0aGlzO31hcHBseVF1YXRlcm5pb24ocSl7X20xLm1ha2VSb3RhdGlvbkZyb21RdWF0ZXJuaW9uKHEpO3RoaXMuYXBwbHlNYXRyaXg0KF9tMSk7cmV0dXJuIHRoaXM7fXJvdGF0ZVgoYW5nbGUpey8vIHJvdGF0ZSBnZW9tZXRyeSBhcm91bmQgd29ybGQgeC1heGlzCglfbTEubWFrZVJvdGF0aW9uWChhbmdsZSk7dGhpcy5hcHBseU1hdHJpeDQoX20xKTtyZXR1cm4gdGhpczt9cm90YXRlWShhbmdsZSl7Ly8gcm90YXRlIGdlb21ldHJ5IGFyb3VuZCB3b3JsZCB5LWF4aXMKCV9tMS5tYWtlUm90YXRpb25ZKGFuZ2xlKTt0aGlzLmFwcGx5TWF0cml4NChfbTEpO3JldHVybiB0aGlzO31yb3RhdGVaKGFuZ2xlKXsvLyByb3RhdGUgZ2VvbWV0cnkgYXJvdW5kIHdvcmxkIHotYXhpcwoJX20xLm1ha2VSb3RhdGlvblooYW5nbGUpO3RoaXMuYXBwbHlNYXRyaXg0KF9tMSk7cmV0dXJuIHRoaXM7fXRyYW5zbGF0ZSh4LHkseil7Ly8gdHJhbnNsYXRlIGdlb21ldHJ5CglfbTEubWFrZVRyYW5zbGF0aW9uKHgseSx6KTt0aGlzLmFwcGx5TWF0cml4NChfbTEpO3JldHVybiB0aGlzO31zY2FsZSh4LHkseil7Ly8gc2NhbGUgZ2VvbWV0cnkKCV9tMS5tYWtlU2NhbGUoeCx5LHopO3RoaXMuYXBwbHlNYXRyaXg0KF9tMSk7cmV0dXJuIHRoaXM7fWxvb2tBdCh2ZWN0b3Ipe19vYmoubG9va0F0KHZlY3Rvcik7X29iai51cGRhdGVNYXRyaXgoKTt0aGlzLmFwcGx5TWF0cml4NChfb2JqLm1hdHJpeCk7cmV0dXJuIHRoaXM7fWNlbnRlcigpe3RoaXMuY29tcHV0ZUJvdW5kaW5nQm94KCk7dGhpcy5ib3VuZGluZ0JveC5nZXRDZW50ZXIoX29mZnNldCkubmVnYXRlKCk7dGhpcy50cmFuc2xhdGUoX29mZnNldC54LF9vZmZzZXQueSxfb2Zmc2V0LnopO3JldHVybiB0aGlzO31zZXRGcm9tUG9pbnRzKHBvaW50cyl7Y29uc3QgcG9zaXRpb249W107Zm9yKGxldCBpPTAsbD1wb2ludHMubGVuZ3RoO2k8bDtpKyspe2NvbnN0IHBvaW50PXBvaW50c1tpXTtwb3NpdGlvbi5wdXNoKHBvaW50LngscG9pbnQueSxwb2ludC56fHwwKTt9dGhpcy5zZXRBdHRyaWJ1dGUoJ3Bvc2l0aW9uJyxuZXcgRmxvYXQzMkJ1ZmZlckF0dHJpYnV0ZShwb3NpdGlvbiwzKSk7cmV0dXJuIHRoaXM7fWNvbXB1dGVCb3VuZGluZ0JveCgpe2lmKHRoaXMuYm91bmRpbmdCb3g9PT1udWxsKXt0aGlzLmJvdW5kaW5nQm94PW5ldyBCb3gzKCk7fWNvbnN0IHBvc2l0aW9uPXRoaXMuYXR0cmlidXRlcy5wb3NpdGlvbjtjb25zdCBtb3JwaEF0dHJpYnV0ZXNQb3NpdGlvbj10aGlzLm1vcnBoQXR0cmlidXRlcy5wb3NpdGlvbjtpZihwb3NpdGlvbiYmcG9zaXRpb24uaXNHTEJ1ZmZlckF0dHJpYnV0ZSl7Y29uc29sZS5lcnJvcignVEhSRUUuQnVmZmVyR2VvbWV0cnkuY29tcHV0ZUJvdW5kaW5nQm94KCk6IEdMQnVmZmVyQXR0cmlidXRlIHJlcXVpcmVzIGEgbWFudWFsIGJvdW5kaW5nIGJveC4gQWx0ZXJuYXRpdmVseSBzZXQgIm1lc2guZnJ1c3R1bUN1bGxlZCIgdG8gImZhbHNlIi4nLHRoaXMpO3RoaXMuYm91bmRpbmdCb3guc2V0KG5ldyBWZWN0b3IzKC1JbmZpbml0eSwtSW5maW5pdHksLUluZmluaXR5KSxuZXcgVmVjdG9yMygrSW5maW5pdHksK0luZmluaXR5LCtJbmZpbml0eSkpO3JldHVybjt9aWYocG9zaXRpb24hPT11bmRlZmluZWQpe3RoaXMuYm91bmRpbmdCb3guc2V0RnJvbUJ1ZmZlckF0dHJpYnV0ZShwb3NpdGlvbik7Ly8gcHJvY2VzcyBtb3JwaCBhdHRyaWJ1dGVzIGlmIHByZXNlbnQKCWlmKG1vcnBoQXR0cmlidXRlc1Bvc2l0aW9uKXtmb3IobGV0IGk9MCxpbD1tb3JwaEF0dHJpYnV0ZXNQb3NpdGlvbi5sZW5ndGg7aTxpbDtpKyspe2NvbnN0IG1vcnBoQXR0cmlidXRlPW1vcnBoQXR0cmlidXRlc1Bvc2l0aW9uW2ldO19ib3gkMS5zZXRGcm9tQnVmZmVyQXR0cmlidXRlKG1vcnBoQXR0cmlidXRlKTtpZih0aGlzLm1vcnBoVGFyZ2V0c1JlbGF0aXZlKXtfdmVjdG9yJDguYWRkVmVjdG9ycyh0aGlzLmJvdW5kaW5nQm94Lm1pbixfYm94JDEubWluKTt0aGlzLmJvdW5kaW5nQm94LmV4cGFuZEJ5UG9pbnQoX3ZlY3RvciQ4KTtfdmVjdG9yJDguYWRkVmVjdG9ycyh0aGlzLmJvdW5kaW5nQm94Lm1heCxfYm94JDEubWF4KTt0aGlzLmJvdW5kaW5nQm94LmV4cGFuZEJ5UG9pbnQoX3ZlY3RvciQ4KTt9ZWxzZSB7dGhpcy5ib3VuZGluZ0JveC5leHBhbmRCeVBvaW50KF9ib3gkMS5taW4pO3RoaXMuYm91bmRpbmdCb3guZXhwYW5kQnlQb2ludChfYm94JDEubWF4KTt9fX19ZWxzZSB7dGhpcy5ib3VuZGluZ0JveC5tYWtlRW1wdHkoKTt9aWYoaXNOYU4odGhpcy5ib3VuZGluZ0JveC5taW4ueCl8fGlzTmFOKHRoaXMuYm91bmRpbmdCb3gubWluLnkpfHxpc05hTih0aGlzLmJvdW5kaW5nQm94Lm1pbi56KSl7Y29uc29sZS5lcnJvcignVEhSRUUuQnVmZmVyR2VvbWV0cnkuY29tcHV0ZUJvdW5kaW5nQm94KCk6IENvbXB1dGVkIG1pbi9tYXggaGF2ZSBOYU4gdmFsdWVzLiBUaGUgInBvc2l0aW9uIiBhdHRyaWJ1dGUgaXMgbGlrZWx5IHRvIGhhdmUgTmFOIHZhbHVlcy4nLHRoaXMpO319Y29tcHV0ZUJvdW5kaW5nU3BoZXJlKCl7aWYodGhpcy5ib3VuZGluZ1NwaGVyZT09PW51bGwpe3RoaXMuYm91bmRpbmdTcGhlcmU9bmV3IFNwaGVyZSgpO31jb25zdCBwb3NpdGlvbj10aGlzLmF0dHJpYnV0ZXMucG9zaXRpb247Y29uc3QgbW9ycGhBdHRyaWJ1dGVzUG9zaXRpb249dGhpcy5tb3JwaEF0dHJpYnV0ZXMucG9zaXRpb247aWYocG9zaXRpb24mJnBvc2l0aW9uLmlzR0xCdWZmZXJBdHRyaWJ1dGUpe2NvbnNvbGUuZXJyb3IoJ1RIUkVFLkJ1ZmZlckdlb21ldHJ5LmNvbXB1dGVCb3VuZGluZ1NwaGVyZSgpOiBHTEJ1ZmZlckF0dHJpYnV0ZSByZXF1aXJlcyBhIG1hbnVhbCBib3VuZGluZyBzcGhlcmUuIEFsdGVybmF0aXZlbHkgc2V0ICJtZXNoLmZydXN0dW1DdWxsZWQiIHRvICJmYWxzZSIuJyx0aGlzKTt0aGlzLmJvdW5kaW5nU3BoZXJlLnNldChuZXcgVmVjdG9yMygpLEluZmluaXR5KTtyZXR1cm47fWlmKHBvc2l0aW9uKXsvLyBmaXJzdCwgZmluZCB0aGUgY2VudGVyIG9mIHRoZSBib3VuZGluZyBzcGhlcmUKCWNvbnN0IGNlbnRlcj10aGlzLmJvdW5kaW5nU3BoZXJlLmNlbnRlcjtfYm94JDEuc2V0RnJvbUJ1ZmZlckF0dHJpYnV0ZShwb3NpdGlvbik7Ly8gcHJvY2VzcyBtb3JwaCBhdHRyaWJ1dGVzIGlmIHByZXNlbnQKCWlmKG1vcnBoQXR0cmlidXRlc1Bvc2l0aW9uKXtmb3IobGV0IGk9MCxpbD1tb3JwaEF0dHJpYnV0ZXNQb3NpdGlvbi5sZW5ndGg7aTxpbDtpKyspe2NvbnN0IG1vcnBoQXR0cmlidXRlPW1vcnBoQXR0cmlidXRlc1Bvc2l0aW9uW2ldO19ib3hNb3JwaFRhcmdldHMuc2V0RnJvbUJ1ZmZlckF0dHJpYnV0ZShtb3JwaEF0dHJpYnV0ZSk7aWYodGhpcy5tb3JwaFRhcmdldHNSZWxhdGl2ZSl7X3ZlY3RvciQ4LmFkZFZlY3RvcnMoX2JveCQxLm1pbixfYm94TW9ycGhUYXJnZXRzLm1pbik7X2JveCQxLmV4cGFuZEJ5UG9pbnQoX3ZlY3RvciQ4KTtfdmVjdG9yJDguYWRkVmVjdG9ycyhfYm94JDEubWF4LF9ib3hNb3JwaFRhcmdldHMubWF4KTtfYm94JDEuZXhwYW5kQnlQb2ludChfdmVjdG9yJDgpO31lbHNlIHtfYm94JDEuZXhwYW5kQnlQb2ludChfYm94TW9ycGhUYXJnZXRzLm1pbik7X2JveCQxLmV4cGFuZEJ5UG9pbnQoX2JveE1vcnBoVGFyZ2V0cy5tYXgpO319fV9ib3gkMS5nZXRDZW50ZXIoY2VudGVyKTsvLyBzZWNvbmQsIHRyeSB0byBmaW5kIGEgYm91bmRpbmdTcGhlcmUgd2l0aCBhIHJhZGl1cyBzbWFsbGVyIHRoYW4gdGhlCgkvLyBib3VuZGluZ1NwaGVyZSBvZiB0aGUgYm91bmRpbmdCb3g6IHNxcnQoMykgc21hbGxlciBpbiB0aGUgYmVzdCBjYXNlCglsZXQgbWF4UmFkaXVzU3E9MDtmb3IobGV0IGk9MCxpbD1wb3NpdGlvbi5jb3VudDtpPGlsO2krKyl7X3ZlY3RvciQ4LmZyb21CdWZmZXJBdHRyaWJ1dGUocG9zaXRpb24saSk7bWF4UmFkaXVzU3E9TWF0aC5tYXgobWF4UmFkaXVzU3EsY2VudGVyLmRpc3RhbmNlVG9TcXVhcmVkKF92ZWN0b3IkOCkpO30vLyBwcm9jZXNzIG1vcnBoIGF0dHJpYnV0ZXMgaWYgcHJlc2VudAoJaWYobW9ycGhBdHRyaWJ1dGVzUG9zaXRpb24pe2ZvcihsZXQgaT0wLGlsPW1vcnBoQXR0cmlidXRlc1Bvc2l0aW9uLmxlbmd0aDtpPGlsO2krKyl7Y29uc3QgbW9ycGhBdHRyaWJ1dGU9bW9ycGhBdHRyaWJ1dGVzUG9zaXRpb25baV07Y29uc3QgbW9ycGhUYXJnZXRzUmVsYXRpdmU9dGhpcy5tb3JwaFRhcmdldHNSZWxhdGl2ZTtmb3IobGV0IGo9MCxqbD1tb3JwaEF0dHJpYnV0ZS5jb3VudDtqPGpsO2orKyl7X3ZlY3RvciQ4LmZyb21CdWZmZXJBdHRyaWJ1dGUobW9ycGhBdHRyaWJ1dGUsaik7aWYobW9ycGhUYXJnZXRzUmVsYXRpdmUpe19vZmZzZXQuZnJvbUJ1ZmZlckF0dHJpYnV0ZShwb3NpdGlvbixqKTtfdmVjdG9yJDguYWRkKF9vZmZzZXQpO31tYXhSYWRpdXNTcT1NYXRoLm1heChtYXhSYWRpdXNTcSxjZW50ZXIuZGlzdGFuY2VUb1NxdWFyZWQoX3ZlY3RvciQ4KSk7fX19dGhpcy5ib3VuZGluZ1NwaGVyZS5yYWRpdXM9TWF0aC5zcXJ0KG1heFJhZGl1c1NxKTtpZihpc05hTih0aGlzLmJvdW5kaW5nU3BoZXJlLnJhZGl1cykpe2NvbnNvbGUuZXJyb3IoJ1RIUkVFLkJ1ZmZlckdlb21ldHJ5LmNvbXB1dGVCb3VuZGluZ1NwaGVyZSgpOiBDb21wdXRlZCByYWRpdXMgaXMgTmFOLiBUaGUgInBvc2l0aW9uIiBhdHRyaWJ1dGUgaXMgbGlrZWx5IHRvIGhhdmUgTmFOIHZhbHVlcy4nLHRoaXMpO319fWNvbXB1dGVUYW5nZW50cygpe2NvbnN0IGluZGV4PXRoaXMuaW5kZXg7Y29uc3QgYXR0cmlidXRlcz10aGlzLmF0dHJpYnV0ZXM7Ly8gYmFzZWQgb24gaHR0cDovL3d3dy50ZXJhdGhvbi5jb20vY29kZS90YW5nZW50Lmh0bWwKCS8vIChwZXIgdmVydGV4IHRhbmdlbnRzKQoJaWYoaW5kZXg9PT1udWxsfHxhdHRyaWJ1dGVzLnBvc2l0aW9uPT09dW5kZWZpbmVkfHxhdHRyaWJ1dGVzLm5vcm1hbD09PXVuZGVmaW5lZHx8YXR0cmlidXRlcy51dj09PXVuZGVmaW5lZCl7Y29uc29sZS5lcnJvcignVEhSRUUuQnVmZmVyR2VvbWV0cnk6IC5jb21wdXRlVGFuZ2VudHMoKSBmYWlsZWQuIE1pc3NpbmcgcmVxdWlyZWQgYXR0cmlidXRlcyAoaW5kZXgsIHBvc2l0aW9uLCBub3JtYWwgb3IgdXYpJyk7cmV0dXJuO31jb25zdCBpbmRpY2VzPWluZGV4LmFycmF5O2NvbnN0IHBvc2l0aW9ucz1hdHRyaWJ1dGVzLnBvc2l0aW9uLmFycmF5O2NvbnN0IG5vcm1hbHM9YXR0cmlidXRlcy5ub3JtYWwuYXJyYXk7Y29uc3QgdXZzPWF0dHJpYnV0ZXMudXYuYXJyYXk7Y29uc3QgblZlcnRpY2VzPXBvc2l0aW9ucy5sZW5ndGgvMztpZihhdHRyaWJ1dGVzLnRhbmdlbnQ9PT11bmRlZmluZWQpe3RoaXMuc2V0QXR0cmlidXRlKCd0YW5nZW50JyxuZXcgQnVmZmVyQXR0cmlidXRlKG5ldyBGbG9hdDMyQXJyYXkoNCpuVmVydGljZXMpLDQpKTt9Y29uc3QgdGFuZ2VudHM9YXR0cmlidXRlcy50YW5nZW50LmFycmF5O2NvbnN0IHRhbjE9W10sdGFuMj1bXTtmb3IobGV0IGk9MDtpPG5WZXJ0aWNlcztpKyspe3RhbjFbaV09bmV3IFZlY3RvcjMoKTt0YW4yW2ldPW5ldyBWZWN0b3IzKCk7fWNvbnN0IHZBPW5ldyBWZWN0b3IzKCksdkI9bmV3IFZlY3RvcjMoKSx2Qz1uZXcgVmVjdG9yMygpLHV2QT1uZXcgVmVjdG9yMigpLHV2Qj1uZXcgVmVjdG9yMigpLHV2Qz1uZXcgVmVjdG9yMigpLHNkaXI9bmV3IFZlY3RvcjMoKSx0ZGlyPW5ldyBWZWN0b3IzKCk7ZnVuY3Rpb24gaGFuZGxlVHJpYW5nbGUoYSxiLGMpe3ZBLmZyb21BcnJheShwb3NpdGlvbnMsYSozKTt2Qi5mcm9tQXJyYXkocG9zaXRpb25zLGIqMyk7dkMuZnJvbUFycmF5KHBvc2l0aW9ucyxjKjMpO3V2QS5mcm9tQXJyYXkodXZzLGEqMik7dXZCLmZyb21BcnJheSh1dnMsYioyKTt1dkMuZnJvbUFycmF5KHV2cyxjKjIpO3ZCLnN1Yih2QSk7dkMuc3ViKHZBKTt1dkIuc3ViKHV2QSk7dXZDLnN1Yih1dkEpO2NvbnN0IHI9MS4wLyh1dkIueCp1dkMueS11dkMueCp1dkIueSk7Ly8gc2lsZW50bHkgaWdub3JlIGRlZ2VuZXJhdGUgdXYgdHJpYW5nbGVzIGhhdmluZyBjb2luY2lkZW50IG9yIGNvbGluZWFyIHZlcnRpY2VzCglpZighaXNGaW5pdGUocikpcmV0dXJuO3NkaXIuY29weSh2QikubXVsdGlwbHlTY2FsYXIodXZDLnkpLmFkZFNjYWxlZFZlY3Rvcih2QywtdXZCLnkpLm11bHRpcGx5U2NhbGFyKHIpO3RkaXIuY29weSh2QykubXVsdGlwbHlTY2FsYXIodXZCLngpLmFkZFNjYWxlZFZlY3Rvcih2QiwtdXZDLngpLm11bHRpcGx5U2NhbGFyKHIpO3RhbjFbYV0uYWRkKHNkaXIpO3RhbjFbYl0uYWRkKHNkaXIpO3RhbjFbY10uYWRkKHNkaXIpO3RhbjJbYV0uYWRkKHRkaXIpO3RhbjJbYl0uYWRkKHRkaXIpO3RhbjJbY10uYWRkKHRkaXIpO31sZXQgZ3JvdXBzPXRoaXMuZ3JvdXBzO2lmKGdyb3Vwcy5sZW5ndGg9PT0wKXtncm91cHM9W3tzdGFydDowLGNvdW50OmluZGljZXMubGVuZ3RofV07fWZvcihsZXQgaT0wLGlsPWdyb3Vwcy5sZW5ndGg7aTxpbDsrK2kpe2NvbnN0IGdyb3VwPWdyb3Vwc1tpXTtjb25zdCBzdGFydD1ncm91cC5zdGFydDtjb25zdCBjb3VudD1ncm91cC5jb3VudDtmb3IobGV0IGo9c3RhcnQsamw9c3RhcnQrY291bnQ7ajxqbDtqKz0zKXtoYW5kbGVUcmlhbmdsZShpbmRpY2VzW2orMF0saW5kaWNlc1tqKzFdLGluZGljZXNbaisyXSk7fX1jb25zdCB0bXA9bmV3IFZlY3RvcjMoKSx0bXAyPW5ldyBWZWN0b3IzKCk7Y29uc3Qgbj1uZXcgVmVjdG9yMygpLG4yPW5ldyBWZWN0b3IzKCk7ZnVuY3Rpb24gaGFuZGxlVmVydGV4KHYpe24uZnJvbUFycmF5KG5vcm1hbHMsdiozKTtuMi5jb3B5KG4pO2NvbnN0IHQ9dGFuMVt2XTsvLyBHcmFtLVNjaG1pZHQgb3J0aG9nb25hbGl6ZQoJdG1wLmNvcHkodCk7dG1wLnN1YihuLm11bHRpcGx5U2NhbGFyKG4uZG90KHQpKSkubm9ybWFsaXplKCk7Ly8gQ2FsY3VsYXRlIGhhbmRlZG5lc3MKCXRtcDIuY3Jvc3NWZWN0b3JzKG4yLHQpO2NvbnN0IHRlc3Q9dG1wMi5kb3QodGFuMlt2XSk7Y29uc3Qgdz10ZXN0PDAuMD8tMS4wOjEuMDt0YW5nZW50c1t2KjRdPXRtcC54O3RhbmdlbnRzW3YqNCsxXT10bXAueTt0YW5nZW50c1t2KjQrMl09dG1wLno7dGFuZ2VudHNbdio0KzNdPXc7fWZvcihsZXQgaT0wLGlsPWdyb3Vwcy5sZW5ndGg7aTxpbDsrK2kpe2NvbnN0IGdyb3VwPWdyb3Vwc1tpXTtjb25zdCBzdGFydD1ncm91cC5zdGFydDtjb25zdCBjb3VudD1ncm91cC5jb3VudDtmb3IobGV0IGo9c3RhcnQsamw9c3RhcnQrY291bnQ7ajxqbDtqKz0zKXtoYW5kbGVWZXJ0ZXgoaW5kaWNlc1tqKzBdKTtoYW5kbGVWZXJ0ZXgoaW5kaWNlc1tqKzFdKTtoYW5kbGVWZXJ0ZXgoaW5kaWNlc1tqKzJdKTt9fX1jb21wdXRlVmVydGV4Tm9ybWFscygpe2NvbnN0IGluZGV4PXRoaXMuaW5kZXg7Y29uc3QgcG9zaXRpb25BdHRyaWJ1dGU9dGhpcy5nZXRBdHRyaWJ1dGUoJ3Bvc2l0aW9uJyk7aWYocG9zaXRpb25BdHRyaWJ1dGUhPT11bmRlZmluZWQpe2xldCBub3JtYWxBdHRyaWJ1dGU9dGhpcy5nZXRBdHRyaWJ1dGUoJ25vcm1hbCcpO2lmKG5vcm1hbEF0dHJpYnV0ZT09PXVuZGVmaW5lZCl7bm9ybWFsQXR0cmlidXRlPW5ldyBCdWZmZXJBdHRyaWJ1dGUobmV3IEZsb2F0MzJBcnJheShwb3NpdGlvbkF0dHJpYnV0ZS5jb3VudCozKSwzKTt0aGlzLnNldEF0dHJpYnV0ZSgnbm9ybWFsJyxub3JtYWxBdHRyaWJ1dGUpO31lbHNlIHsvLyByZXNldCBleGlzdGluZyBub3JtYWxzIHRvIHplcm8KCWZvcihsZXQgaT0wLGlsPW5vcm1hbEF0dHJpYnV0ZS5jb3VudDtpPGlsO2krKyl7bm9ybWFsQXR0cmlidXRlLnNldFhZWihpLDAsMCwwKTt9fWNvbnN0IHBBPW5ldyBWZWN0b3IzKCkscEI9bmV3IFZlY3RvcjMoKSxwQz1uZXcgVmVjdG9yMygpO2NvbnN0IG5BPW5ldyBWZWN0b3IzKCksbkI9bmV3IFZlY3RvcjMoKSxuQz1uZXcgVmVjdG9yMygpO2NvbnN0IGNiPW5ldyBWZWN0b3IzKCksYWI9bmV3IFZlY3RvcjMoKTsvLyBpbmRleGVkIGVsZW1lbnRzCglpZihpbmRleCl7Zm9yKGxldCBpPTAsaWw9aW5kZXguY291bnQ7aTxpbDtpKz0zKXtjb25zdCB2QT1pbmRleC5nZXRYKGkrMCk7Y29uc3QgdkI9aW5kZXguZ2V0WChpKzEpO2NvbnN0IHZDPWluZGV4LmdldFgoaSsyKTtwQS5mcm9tQnVmZmVyQXR0cmlidXRlKHBvc2l0aW9uQXR0cmlidXRlLHZBKTtwQi5mcm9tQnVmZmVyQXR0cmlidXRlKHBvc2l0aW9uQXR0cmlidXRlLHZCKTtwQy5mcm9tQnVmZmVyQXR0cmlidXRlKHBvc2l0aW9uQXR0cmlidXRlLHZDKTtjYi5zdWJWZWN0b3JzKHBDLHBCKTthYi5zdWJWZWN0b3JzKHBBLHBCKTtjYi5jcm9zcyhhYik7bkEuZnJvbUJ1ZmZlckF0dHJpYnV0ZShub3JtYWxBdHRyaWJ1dGUsdkEpO25CLmZyb21CdWZmZXJBdHRyaWJ1dGUobm9ybWFsQXR0cmlidXRlLHZCKTtuQy5mcm9tQnVmZmVyQXR0cmlidXRlKG5vcm1hbEF0dHJpYnV0ZSx2Qyk7bkEuYWRkKGNiKTtuQi5hZGQoY2IpO25DLmFkZChjYik7bm9ybWFsQXR0cmlidXRlLnNldFhZWih2QSxuQS54LG5BLnksbkEueik7bm9ybWFsQXR0cmlidXRlLnNldFhZWih2QixuQi54LG5CLnksbkIueik7bm9ybWFsQXR0cmlidXRlLnNldFhZWih2QyxuQy54LG5DLnksbkMueik7fX1lbHNlIHsvLyBub24taW5kZXhlZCBlbGVtZW50cyAodW5jb25uZWN0ZWQgdHJpYW5nbGUgc291cCkKCWZvcihsZXQgaT0wLGlsPXBvc2l0aW9uQXR0cmlidXRlLmNvdW50O2k8aWw7aSs9Myl7cEEuZnJvbUJ1ZmZlckF0dHJpYnV0ZShwb3NpdGlvbkF0dHJpYnV0ZSxpKzApO3BCLmZyb21CdWZmZXJBdHRyaWJ1dGUocG9zaXRpb25BdHRyaWJ1dGUsaSsxKTtwQy5mcm9tQnVmZmVyQXR0cmlidXRlKHBvc2l0aW9uQXR0cmlidXRlLGkrMik7Y2Iuc3ViVmVjdG9ycyhwQyxwQik7YWIuc3ViVmVjdG9ycyhwQSxwQik7Y2IuY3Jvc3MoYWIpO25vcm1hbEF0dHJpYnV0ZS5zZXRYWVooaSswLGNiLngsY2IueSxjYi56KTtub3JtYWxBdHRyaWJ1dGUuc2V0WFlaKGkrMSxjYi54LGNiLnksY2Iueik7bm9ybWFsQXR0cmlidXRlLnNldFhZWihpKzIsY2IueCxjYi55LGNiLnopO319dGhpcy5ub3JtYWxpemVOb3JtYWxzKCk7bm9ybWFsQXR0cmlidXRlLm5lZWRzVXBkYXRlPXRydWU7fX1tZXJnZShnZW9tZXRyeSxvZmZzZXQpe2lmKCEoZ2VvbWV0cnkmJmdlb21ldHJ5LmlzQnVmZmVyR2VvbWV0cnkpKXtjb25zb2xlLmVycm9yKCdUSFJFRS5CdWZmZXJHZW9tZXRyeS5tZXJnZSgpOiBnZW9tZXRyeSBub3QgYW4gaW5zdGFuY2Ugb2YgVEhSRUUuQnVmZmVyR2VvbWV0cnkuJyxnZW9tZXRyeSk7cmV0dXJuO31pZihvZmZzZXQ9PT11bmRlZmluZWQpe29mZnNldD0wO2NvbnNvbGUud2FybignVEhSRUUuQnVmZmVyR2VvbWV0cnkubWVyZ2UoKTogT3ZlcndyaXRpbmcgb3JpZ2luYWwgZ2VvbWV0cnksIHN0YXJ0aW5nIGF0IG9mZnNldD0wLiAnKydVc2UgQnVmZmVyR2VvbWV0cnlVdGlscy5tZXJnZUJ1ZmZlckdlb21ldHJpZXMoKSBmb3IgbG9zc2xlc3MgbWVyZ2UuJyk7fWNvbnN0IGF0dHJpYnV0ZXM9dGhpcy5hdHRyaWJ1dGVzO2Zvcihjb25zdCBrZXkgaW4gYXR0cmlidXRlcyl7aWYoZ2VvbWV0cnkuYXR0cmlidXRlc1trZXldPT09dW5kZWZpbmVkKWNvbnRpbnVlO2NvbnN0IGF0dHJpYnV0ZTE9YXR0cmlidXRlc1trZXldO2NvbnN0IGF0dHJpYnV0ZUFycmF5MT1hdHRyaWJ1dGUxLmFycmF5O2NvbnN0IGF0dHJpYnV0ZTI9Z2VvbWV0cnkuYXR0cmlidXRlc1trZXldO2NvbnN0IGF0dHJpYnV0ZUFycmF5Mj1hdHRyaWJ1dGUyLmFycmF5O2NvbnN0IGF0dHJpYnV0ZU9mZnNldD1hdHRyaWJ1dGUyLml0ZW1TaXplKm9mZnNldDtjb25zdCBsZW5ndGg9TWF0aC5taW4oYXR0cmlidXRlQXJyYXkyLmxlbmd0aCxhdHRyaWJ1dGVBcnJheTEubGVuZ3RoLWF0dHJpYnV0ZU9mZnNldCk7Zm9yKGxldCBpPTAsaj1hdHRyaWJ1dGVPZmZzZXQ7aTxsZW5ndGg7aSsrLGorKyl7YXR0cmlidXRlQXJyYXkxW2pdPWF0dHJpYnV0ZUFycmF5MltpXTt9fXJldHVybiB0aGlzO31ub3JtYWxpemVOb3JtYWxzKCl7Y29uc3Qgbm9ybWFscz10aGlzLmF0dHJpYnV0ZXMubm9ybWFsO2ZvcihsZXQgaT0wLGlsPW5vcm1hbHMuY291bnQ7aTxpbDtpKyspe192ZWN0b3IkOC5mcm9tQnVmZmVyQXR0cmlidXRlKG5vcm1hbHMsaSk7X3ZlY3RvciQ4Lm5vcm1hbGl6ZSgpO25vcm1hbHMuc2V0WFlaKGksX3ZlY3RvciQ4LngsX3ZlY3RvciQ4LnksX3ZlY3RvciQ4LnopO319dG9Ob25JbmRleGVkKCl7ZnVuY3Rpb24gY29udmVydEJ1ZmZlckF0dHJpYnV0ZShhdHRyaWJ1dGUsaW5kaWNlcyl7Y29uc3QgYXJyYXk9YXR0cmlidXRlLmFycmF5O2NvbnN0IGl0ZW1TaXplPWF0dHJpYnV0ZS5pdGVtU2l6ZTtjb25zdCBub3JtYWxpemVkPWF0dHJpYnV0ZS5ub3JtYWxpemVkO2NvbnN0IGFycmF5Mj1uZXcgYXJyYXkuY29uc3RydWN0b3IoaW5kaWNlcy5sZW5ndGgqaXRlbVNpemUpO2xldCBpbmRleD0wLGluZGV4Mj0wO2ZvcihsZXQgaT0wLGw9aW5kaWNlcy5sZW5ndGg7aTxsO2krKyl7aWYoYXR0cmlidXRlLmlzSW50ZXJsZWF2ZWRCdWZmZXJBdHRyaWJ1dGUpe2luZGV4PWluZGljZXNbaV0qYXR0cmlidXRlLmRhdGEuc3RyaWRlK2F0dHJpYnV0ZS5vZmZzZXQ7fWVsc2Uge2luZGV4PWluZGljZXNbaV0qaXRlbVNpemU7fWZvcihsZXQgaj0wO2o8aXRlbVNpemU7aisrKXthcnJheTJbaW5kZXgyKytdPWFycmF5W2luZGV4KytdO319cmV0dXJuIG5ldyBCdWZmZXJBdHRyaWJ1dGUoYXJyYXkyLGl0ZW1TaXplLG5vcm1hbGl6ZWQpO30vLwoJaWYodGhpcy5pbmRleD09PW51bGwpe2NvbnNvbGUud2FybignVEhSRUUuQnVmZmVyR2VvbWV0cnkudG9Ob25JbmRleGVkKCk6IEJ1ZmZlckdlb21ldHJ5IGlzIGFscmVhZHkgbm9uLWluZGV4ZWQuJyk7cmV0dXJuIHRoaXM7fWNvbnN0IGdlb21ldHJ5Mj1uZXcgQnVmZmVyR2VvbWV0cnkoKTtjb25zdCBpbmRpY2VzPXRoaXMuaW5kZXguYXJyYXk7Y29uc3QgYXR0cmlidXRlcz10aGlzLmF0dHJpYnV0ZXM7Ly8gYXR0cmlidXRlcwoJZm9yKGNvbnN0IG5hbWUgaW4gYXR0cmlidXRlcyl7Y29uc3QgYXR0cmlidXRlPWF0dHJpYnV0ZXNbbmFtZV07Y29uc3QgbmV3QXR0cmlidXRlPWNvbnZlcnRCdWZmZXJBdHRyaWJ1dGUoYXR0cmlidXRlLGluZGljZXMpO2dlb21ldHJ5Mi5zZXRBdHRyaWJ1dGUobmFtZSxuZXdBdHRyaWJ1dGUpO30vLyBtb3JwaCBhdHRyaWJ1dGVzCgljb25zdCBtb3JwaEF0dHJpYnV0ZXM9dGhpcy5tb3JwaEF0dHJpYnV0ZXM7Zm9yKGNvbnN0IG5hbWUgaW4gbW9ycGhBdHRyaWJ1dGVzKXtjb25zdCBtb3JwaEFycmF5PVtdO2NvbnN0IG1vcnBoQXR0cmlidXRlPW1vcnBoQXR0cmlidXRlc1tuYW1lXTsvLyBtb3JwaEF0dHJpYnV0ZTogYXJyYXkgb2YgRmxvYXQzMkJ1ZmZlckF0dHJpYnV0ZXMKCWZvcihsZXQgaT0wLGlsPW1vcnBoQXR0cmlidXRlLmxlbmd0aDtpPGlsO2krKyl7Y29uc3QgYXR0cmlidXRlPW1vcnBoQXR0cmlidXRlW2ldO2NvbnN0IG5ld0F0dHJpYnV0ZT1jb252ZXJ0QnVmZmVyQXR0cmlidXRlKGF0dHJpYnV0ZSxpbmRpY2VzKTttb3JwaEFycmF5LnB1c2gobmV3QXR0cmlidXRlKTt9Z2VvbWV0cnkyLm1vcnBoQXR0cmlidXRlc1tuYW1lXT1tb3JwaEFycmF5O31nZW9tZXRyeTIubW9ycGhUYXJnZXRzUmVsYXRpdmU9dGhpcy5tb3JwaFRhcmdldHNSZWxhdGl2ZTsvLyBncm91cHMKCWNvbnN0IGdyb3Vwcz10aGlzLmdyb3Vwcztmb3IobGV0IGk9MCxsPWdyb3Vwcy5sZW5ndGg7aTxsO2krKyl7Y29uc3QgZ3JvdXA9Z3JvdXBzW2ldO2dlb21ldHJ5Mi5hZGRHcm91cChncm91cC5zdGFydCxncm91cC5jb3VudCxncm91cC5tYXRlcmlhbEluZGV4KTt9cmV0dXJuIGdlb21ldHJ5Mjt9dG9KU09OKCl7Y29uc3QgZGF0YT17bWV0YWRhdGE6e3ZlcnNpb246NC41LHR5cGU6J0J1ZmZlckdlb21ldHJ5JyxnZW5lcmF0b3I6J0J1ZmZlckdlb21ldHJ5LnRvSlNPTid9fTsvLyBzdGFuZGFyZCBCdWZmZXJHZW9tZXRyeSBzZXJpYWxpemF0aW9uCglkYXRhLnV1aWQ9dGhpcy51dWlkO2RhdGEudHlwZT10aGlzLnR5cGU7aWYodGhpcy5uYW1lIT09JycpZGF0YS5uYW1lPXRoaXMubmFtZTtpZihPYmplY3Qua2V5cyh0aGlzLnVzZXJEYXRhKS5sZW5ndGg+MClkYXRhLnVzZXJEYXRhPXRoaXMudXNlckRhdGE7aWYodGhpcy5wYXJhbWV0ZXJzIT09dW5kZWZpbmVkKXtjb25zdCBwYXJhbWV0ZXJzPXRoaXMucGFyYW1ldGVycztmb3IoY29uc3Qga2V5IGluIHBhcmFtZXRlcnMpe2lmKHBhcmFtZXRlcnNba2V5XSE9PXVuZGVmaW5lZClkYXRhW2tleV09cGFyYW1ldGVyc1trZXldO31yZXR1cm4gZGF0YTt9Ly8gZm9yIHNpbXBsaWNpdHkgdGhlIGNvZGUgYXNzdW1lcyBhdHRyaWJ1dGVzIGFyZSBub3Qgc2hhcmVkIGFjcm9zcyBnZW9tZXRyaWVzLCBzZWUgIzE1ODExCglkYXRhLmRhdGE9e2F0dHJpYnV0ZXM6e319O2NvbnN0IGluZGV4PXRoaXMuaW5kZXg7aWYoaW5kZXghPT1udWxsKXtkYXRhLmRhdGEuaW5kZXg9e3R5cGU6aW5kZXguYXJyYXkuY29uc3RydWN0b3IubmFtZSxhcnJheTpBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChpbmRleC5hcnJheSl9O31jb25zdCBhdHRyaWJ1dGVzPXRoaXMuYXR0cmlidXRlcztmb3IoY29uc3Qga2V5IGluIGF0dHJpYnV0ZXMpe2NvbnN0IGF0dHJpYnV0ZT1hdHRyaWJ1dGVzW2tleV07ZGF0YS5kYXRhLmF0dHJpYnV0ZXNba2V5XT1hdHRyaWJ1dGUudG9KU09OKGRhdGEuZGF0YSk7fWNvbnN0IG1vcnBoQXR0cmlidXRlcz17fTtsZXQgaGFzTW9ycGhBdHRyaWJ1dGVzPWZhbHNlO2Zvcihjb25zdCBrZXkgaW4gdGhpcy5tb3JwaEF0dHJpYnV0ZXMpe2NvbnN0IGF0dHJpYnV0ZUFycmF5PXRoaXMubW9ycGhBdHRyaWJ1dGVzW2tleV07Y29uc3QgYXJyYXk9W107Zm9yKGxldCBpPTAsaWw9YXR0cmlidXRlQXJyYXkubGVuZ3RoO2k8aWw7aSsrKXtjb25zdCBhdHRyaWJ1dGU9YXR0cmlidXRlQXJyYXlbaV07YXJyYXkucHVzaChhdHRyaWJ1dGUudG9KU09OKGRhdGEuZGF0YSkpO31pZihhcnJheS5sZW5ndGg+MCl7bW9ycGhBdHRyaWJ1dGVzW2tleV09YXJyYXk7aGFzTW9ycGhBdHRyaWJ1dGVzPXRydWU7fX1pZihoYXNNb3JwaEF0dHJpYnV0ZXMpe2RhdGEuZGF0YS5tb3JwaEF0dHJpYnV0ZXM9bW9ycGhBdHRyaWJ1dGVzO2RhdGEuZGF0YS5tb3JwaFRhcmdldHNSZWxhdGl2ZT10aGlzLm1vcnBoVGFyZ2V0c1JlbGF0aXZlO31jb25zdCBncm91cHM9dGhpcy5ncm91cHM7aWYoZ3JvdXBzLmxlbmd0aD4wKXtkYXRhLmRhdGEuZ3JvdXBzPUpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZ3JvdXBzKSk7fWNvbnN0IGJvdW5kaW5nU3BoZXJlPXRoaXMuYm91bmRpbmdTcGhlcmU7aWYoYm91bmRpbmdTcGhlcmUhPT1udWxsKXtkYXRhLmRhdGEuYm91bmRpbmdTcGhlcmU9e2NlbnRlcjpib3VuZGluZ1NwaGVyZS5jZW50ZXIudG9BcnJheSgpLHJhZGl1czpib3VuZGluZ1NwaGVyZS5yYWRpdXN9O31yZXR1cm4gZGF0YTt9Y2xvbmUoKXtyZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IoKS5jb3B5KHRoaXMpO31jb3B5KHNvdXJjZSl7Ly8gcmVzZXQKCXRoaXMuaW5kZXg9bnVsbDt0aGlzLmF0dHJpYnV0ZXM9e307dGhpcy5tb3JwaEF0dHJpYnV0ZXM9e307dGhpcy5ncm91cHM9W107dGhpcy5ib3VuZGluZ0JveD1udWxsO3RoaXMuYm91bmRpbmdTcGhlcmU9bnVsbDsvLyB1c2VkIGZvciBzdG9yaW5nIGNsb25lZCwgc2hhcmVkIGRhdGEKCWNvbnN0IGRhdGE9e307Ly8gbmFtZQoJdGhpcy5uYW1lPXNvdXJjZS5uYW1lOy8vIGluZGV4Cgljb25zdCBpbmRleD1zb3VyY2UuaW5kZXg7aWYoaW5kZXghPT1udWxsKXt0aGlzLnNldEluZGV4KGluZGV4LmNsb25lKGRhdGEpKTt9Ly8gYXR0cmlidXRlcwoJY29uc3QgYXR0cmlidXRlcz1zb3VyY2UuYXR0cmlidXRlcztmb3IoY29uc3QgbmFtZSBpbiBhdHRyaWJ1dGVzKXtjb25zdCBhdHRyaWJ1dGU9YXR0cmlidXRlc1tuYW1lXTt0aGlzLnNldEF0dHJpYnV0ZShuYW1lLGF0dHJpYnV0ZS5jbG9uZShkYXRhKSk7fS8vIG1vcnBoIGF0dHJpYnV0ZXMKCWNvbnN0IG1vcnBoQXR0cmlidXRlcz1zb3VyY2UubW9ycGhBdHRyaWJ1dGVzO2Zvcihjb25zdCBuYW1lIGluIG1vcnBoQXR0cmlidXRlcyl7Y29uc3QgYXJyYXk9W107Y29uc3QgbW9ycGhBdHRyaWJ1dGU9bW9ycGhBdHRyaWJ1dGVzW25hbWVdOy8vIG1vcnBoQXR0cmlidXRlOiBhcnJheSBvZiBGbG9hdDMyQnVmZmVyQXR0cmlidXRlcwoJZm9yKGxldCBpPTAsbD1tb3JwaEF0dHJpYnV0ZS5sZW5ndGg7aTxsO2krKyl7YXJyYXkucHVzaChtb3JwaEF0dHJpYnV0ZVtpXS5jbG9uZShkYXRhKSk7fXRoaXMubW9ycGhBdHRyaWJ1dGVzW25hbWVdPWFycmF5O310aGlzLm1vcnBoVGFyZ2V0c1JlbGF0aXZlPXNvdXJjZS5tb3JwaFRhcmdldHNSZWxhdGl2ZTsvLyBncm91cHMKCWNvbnN0IGdyb3Vwcz1zb3VyY2UuZ3JvdXBzO2ZvcihsZXQgaT0wLGw9Z3JvdXBzLmxlbmd0aDtpPGw7aSsrKXtjb25zdCBncm91cD1ncm91cHNbaV07dGhpcy5hZGRHcm91cChncm91cC5zdGFydCxncm91cC5jb3VudCxncm91cC5tYXRlcmlhbEluZGV4KTt9Ly8gYm91bmRpbmcgYm94Cgljb25zdCBib3VuZGluZ0JveD1zb3VyY2UuYm91bmRpbmdCb3g7aWYoYm91bmRpbmdCb3ghPT1udWxsKXt0aGlzLmJvdW5kaW5nQm94PWJvdW5kaW5nQm94LmNsb25lKCk7fS8vIGJvdW5kaW5nIHNwaGVyZQoJY29uc3QgYm91bmRpbmdTcGhlcmU9c291cmNlLmJvdW5kaW5nU3BoZXJlO2lmKGJvdW5kaW5nU3BoZXJlIT09bnVsbCl7dGhpcy5ib3VuZGluZ1NwaGVyZT1ib3VuZGluZ1NwaGVyZS5jbG9uZSgpO30vLyBkcmF3IHJhbmdlCgl0aGlzLmRyYXdSYW5nZS5zdGFydD1zb3VyY2UuZHJhd1JhbmdlLnN0YXJ0O3RoaXMuZHJhd1JhbmdlLmNvdW50PXNvdXJjZS5kcmF3UmFuZ2UuY291bnQ7Ly8gdXNlciBkYXRhCgl0aGlzLnVzZXJEYXRhPXNvdXJjZS51c2VyRGF0YTsvLyBnZW9tZXRyeSBnZW5lcmF0b3IgcGFyYW1ldGVycwoJaWYoc291cmNlLnBhcmFtZXRlcnMhPT11bmRlZmluZWQpdGhpcy5wYXJhbWV0ZXJzPU9iamVjdC5hc3NpZ24oe30sc291cmNlLnBhcmFtZXRlcnMpO3JldHVybiB0aGlzO31kaXNwb3NlKCl7dGhpcy5kaXNwYXRjaEV2ZW50KHt0eXBlOidkaXNwb3NlJ30pO319QnVmZmVyR2VvbWV0cnkucHJvdG90eXBlLmlzQnVmZmVyR2VvbWV0cnk9dHJ1ZTtjb25zdCBfaW52ZXJzZU1hdHJpeCQyPS8qQF9fUFVSRV9fKi9uZXcgTWF0cml4NCgpO2NvbnN0IF9yYXkkMj0vKkBfX1BVUkVfXyovbmV3IFJheSgpO2NvbnN0IF9zcGhlcmUkMz0vKkBfX1BVUkVfXyovbmV3IFNwaGVyZSgpO2NvbnN0IF92QSQxPS8qQF9fUFVSRV9fKi9uZXcgVmVjdG9yMygpO2NvbnN0IF92QiQxPS8qQF9fUFVSRV9fKi9uZXcgVmVjdG9yMygpO2NvbnN0IF92QyQxPS8qQF9fUFVSRV9fKi9uZXcgVmVjdG9yMygpO2NvbnN0IF90ZW1wQT0vKkBfX1BVUkVfXyovbmV3IFZlY3RvcjMoKTtjb25zdCBfdGVtcEI9LypAX19QVVJFX18qL25ldyBWZWN0b3IzKCk7Y29uc3QgX3RlbXBDPS8qQF9fUFVSRV9fKi9uZXcgVmVjdG9yMygpO2NvbnN0IF9tb3JwaEE9LypAX19QVVJFX18qL25ldyBWZWN0b3IzKCk7Y29uc3QgX21vcnBoQj0vKkBfX1BVUkVfXyovbmV3IFZlY3RvcjMoKTtjb25zdCBfbW9ycGhDPS8qQF9fUFVSRV9fKi9uZXcgVmVjdG9yMygpO2NvbnN0IF91dkEkMT0vKkBfX1BVUkVfXyovbmV3IFZlY3RvcjIoKTtjb25zdCBfdXZCJDE9LypAX19QVVJFX18qL25ldyBWZWN0b3IyKCk7Y29uc3QgX3V2QyQxPS8qQF9fUFVSRV9fKi9uZXcgVmVjdG9yMigpO2NvbnN0IF9pbnRlcnNlY3Rpb25Qb2ludD0vKkBfX1BVUkVfXyovbmV3IFZlY3RvcjMoKTtjb25zdCBfaW50ZXJzZWN0aW9uUG9pbnRXb3JsZD0vKkBfX1BVUkVfXyovbmV3IFZlY3RvcjMoKTtjbGFzcyBNZXNoIGV4dGVuZHMgT2JqZWN0M0R7Y29uc3RydWN0b3IoZ2VvbWV0cnksbWF0ZXJpYWwpe2lmKGdlb21ldHJ5PT09dm9pZCAwKXtnZW9tZXRyeT1uZXcgQnVmZmVyR2VvbWV0cnkoKTt9aWYobWF0ZXJpYWw9PT12b2lkIDApe21hdGVyaWFsPW5ldyBNZXNoQmFzaWNNYXRlcmlhbCgpO31zdXBlcigpO3RoaXMudHlwZT0nTWVzaCc7dGhpcy5nZW9tZXRyeT1nZW9tZXRyeTt0aGlzLm1hdGVyaWFsPW1hdGVyaWFsO3RoaXMudXBkYXRlTW9ycGhUYXJnZXRzKCk7fWNvcHkoc291cmNlKXtzdXBlci5jb3B5KHNvdXJjZSk7aWYoc291cmNlLm1vcnBoVGFyZ2V0SW5mbHVlbmNlcyE9PXVuZGVmaW5lZCl7dGhpcy5tb3JwaFRhcmdldEluZmx1ZW5jZXM9c291cmNlLm1vcnBoVGFyZ2V0SW5mbHVlbmNlcy5zbGljZSgpO31pZihzb3VyY2UubW9ycGhUYXJnZXREaWN0aW9uYXJ5IT09dW5kZWZpbmVkKXt0aGlzLm1vcnBoVGFyZ2V0RGljdGlvbmFyeT1PYmplY3QuYXNzaWduKHt9LHNvdXJjZS5tb3JwaFRhcmdldERpY3Rpb25hcnkpO310aGlzLm1hdGVyaWFsPXNvdXJjZS5tYXRlcmlhbDt0aGlzLmdlb21ldHJ5PXNvdXJjZS5nZW9tZXRyeTtyZXR1cm4gdGhpczt9dXBkYXRlTW9ycGhUYXJnZXRzKCl7Y29uc3QgZ2VvbWV0cnk9dGhpcy5nZW9tZXRyeTtpZihnZW9tZXRyeS5pc0J1ZmZlckdlb21ldHJ5KXtjb25zdCBtb3JwaEF0dHJpYnV0ZXM9Z2VvbWV0cnkubW9ycGhBdHRyaWJ1dGVzO2NvbnN0IGtleXM9T2JqZWN0LmtleXMobW9ycGhBdHRyaWJ1dGVzKTtpZihrZXlzLmxlbmd0aD4wKXtjb25zdCBtb3JwaEF0dHJpYnV0ZT1tb3JwaEF0dHJpYnV0ZXNba2V5c1swXV07aWYobW9ycGhBdHRyaWJ1dGUhPT11bmRlZmluZWQpe3RoaXMubW9ycGhUYXJnZXRJbmZsdWVuY2VzPVtdO3RoaXMubW9ycGhUYXJnZXREaWN0aW9uYXJ5PXt9O2ZvcihsZXQgbT0wLG1sPW1vcnBoQXR0cmlidXRlLmxlbmd0aDttPG1sO20rKyl7Y29uc3QgbmFtZT1tb3JwaEF0dHJpYnV0ZVttXS5uYW1lfHxTdHJpbmcobSk7dGhpcy5tb3JwaFRhcmdldEluZmx1ZW5jZXMucHVzaCgwKTt0aGlzLm1vcnBoVGFyZ2V0RGljdGlvbmFyeVtuYW1lXT1tO319fX1lbHNlIHtjb25zdCBtb3JwaFRhcmdldHM9Z2VvbWV0cnkubW9ycGhUYXJnZXRzO2lmKG1vcnBoVGFyZ2V0cyE9PXVuZGVmaW5lZCYmbW9ycGhUYXJnZXRzLmxlbmd0aD4wKXtjb25zb2xlLmVycm9yKCdUSFJFRS5NZXNoLnVwZGF0ZU1vcnBoVGFyZ2V0cygpIG5vIGxvbmdlciBzdXBwb3J0cyBUSFJFRS5HZW9tZXRyeS4gVXNlIFRIUkVFLkJ1ZmZlckdlb21ldHJ5IGluc3RlYWQuJyk7fX19cmF5Y2FzdChyYXljYXN0ZXIsaW50ZXJzZWN0cyl7Y29uc3QgZ2VvbWV0cnk9dGhpcy5nZW9tZXRyeTtjb25zdCBtYXRlcmlhbD10aGlzLm1hdGVyaWFsO2NvbnN0IG1hdHJpeFdvcmxkPXRoaXMubWF0cml4V29ybGQ7aWYobWF0ZXJpYWw9PT11bmRlZmluZWQpcmV0dXJuOy8vIENoZWNraW5nIGJvdW5kaW5nU3BoZXJlIGRpc3RhbmNlIHRvIHJheQoJaWYoZ2VvbWV0cnkuYm91bmRpbmdTcGhlcmU9PT1udWxsKWdlb21ldHJ5LmNvbXB1dGVCb3VuZGluZ1NwaGVyZSgpO19zcGhlcmUkMy5jb3B5KGdlb21ldHJ5LmJvdW5kaW5nU3BoZXJlKTtfc3BoZXJlJDMuYXBwbHlNYXRyaXg0KG1hdHJpeFdvcmxkKTtpZihyYXljYXN0ZXIucmF5LmludGVyc2VjdHNTcGhlcmUoX3NwaGVyZSQzKT09PWZhbHNlKXJldHVybjsvLwoJX2ludmVyc2VNYXRyaXgkMi5jb3B5KG1hdHJpeFdvcmxkKS5pbnZlcnQoKTtfcmF5JDIuY29weShyYXljYXN0ZXIucmF5KS5hcHBseU1hdHJpeDQoX2ludmVyc2VNYXRyaXgkMik7Ly8gQ2hlY2sgYm91bmRpbmdCb3ggYmVmb3JlIGNvbnRpbnVpbmcKCWlmKGdlb21ldHJ5LmJvdW5kaW5nQm94IT09bnVsbCl7aWYoX3JheSQyLmludGVyc2VjdHNCb3goZ2VvbWV0cnkuYm91bmRpbmdCb3gpPT09ZmFsc2UpcmV0dXJuO31sZXQgaW50ZXJzZWN0aW9uO2lmKGdlb21ldHJ5LmlzQnVmZmVyR2VvbWV0cnkpe2NvbnN0IGluZGV4PWdlb21ldHJ5LmluZGV4O2NvbnN0IHBvc2l0aW9uPWdlb21ldHJ5LmF0dHJpYnV0ZXMucG9zaXRpb247Y29uc3QgbW9ycGhQb3NpdGlvbj1nZW9tZXRyeS5tb3JwaEF0dHJpYnV0ZXMucG9zaXRpb247Y29uc3QgbW9ycGhUYXJnZXRzUmVsYXRpdmU9Z2VvbWV0cnkubW9ycGhUYXJnZXRzUmVsYXRpdmU7Y29uc3QgdXY9Z2VvbWV0cnkuYXR0cmlidXRlcy51djtjb25zdCB1djI9Z2VvbWV0cnkuYXR0cmlidXRlcy51djI7Y29uc3QgZ3JvdXBzPWdlb21ldHJ5Lmdyb3Vwcztjb25zdCBkcmF3UmFuZ2U9Z2VvbWV0cnkuZHJhd1JhbmdlO2lmKGluZGV4IT09bnVsbCl7Ly8gaW5kZXhlZCBidWZmZXIgZ2VvbWV0cnkKCWlmKEFycmF5LmlzQXJyYXkobWF0ZXJpYWwpKXtmb3IobGV0IGk9MCxpbD1ncm91cHMubGVuZ3RoO2k8aWw7aSsrKXtjb25zdCBncm91cD1ncm91cHNbaV07Y29uc3QgZ3JvdXBNYXRlcmlhbD1tYXRlcmlhbFtncm91cC5tYXRlcmlhbEluZGV4XTtjb25zdCBzdGFydD1NYXRoLm1heChncm91cC5zdGFydCxkcmF3UmFuZ2Uuc3RhcnQpO2NvbnN0IGVuZD1NYXRoLm1pbihpbmRleC5jb3VudCxNYXRoLm1pbihncm91cC5zdGFydCtncm91cC5jb3VudCxkcmF3UmFuZ2Uuc3RhcnQrZHJhd1JhbmdlLmNvdW50KSk7Zm9yKGxldCBqPXN0YXJ0LGpsPWVuZDtqPGpsO2orPTMpe2NvbnN0IGE9aW5kZXguZ2V0WChqKTtjb25zdCBiPWluZGV4LmdldFgoaisxKTtjb25zdCBjPWluZGV4LmdldFgoaisyKTtpbnRlcnNlY3Rpb249Y2hlY2tCdWZmZXJHZW9tZXRyeUludGVyc2VjdGlvbiQxKHRoaXMsZ3JvdXBNYXRlcmlhbCxyYXljYXN0ZXIsX3JheSQyLHBvc2l0aW9uLG1vcnBoUG9zaXRpb24sbW9ycGhUYXJnZXRzUmVsYXRpdmUsdXYsdXYyLGEsYixjKTtpZihpbnRlcnNlY3Rpb24pe2ludGVyc2VjdGlvbi5mYWNlSW5kZXg9TWF0aC5mbG9vcihqLzMpOy8vIHRyaWFuZ2xlIG51bWJlciBpbiBpbmRleGVkIGJ1ZmZlciBzZW1hbnRpY3MKCWludGVyc2VjdGlvbi5mYWNlLm1hdGVyaWFsSW5kZXg9Z3JvdXAubWF0ZXJpYWxJbmRleDtpbnRlcnNlY3RzLnB1c2goaW50ZXJzZWN0aW9uKTt9fX19ZWxzZSB7Y29uc3Qgc3RhcnQ9TWF0aC5tYXgoMCxkcmF3UmFuZ2Uuc3RhcnQpO2NvbnN0IGVuZD1NYXRoLm1pbihpbmRleC5jb3VudCxkcmF3UmFuZ2Uuc3RhcnQrZHJhd1JhbmdlLmNvdW50KTtmb3IobGV0IGk9c3RhcnQsaWw9ZW5kO2k8aWw7aSs9Myl7Y29uc3QgYT1pbmRleC5nZXRYKGkpO2NvbnN0IGI9aW5kZXguZ2V0WChpKzEpO2NvbnN0IGM9aW5kZXguZ2V0WChpKzIpO2ludGVyc2VjdGlvbj1jaGVja0J1ZmZlckdlb21ldHJ5SW50ZXJzZWN0aW9uJDEodGhpcyxtYXRlcmlhbCxyYXljYXN0ZXIsX3JheSQyLHBvc2l0aW9uLG1vcnBoUG9zaXRpb24sbW9ycGhUYXJnZXRzUmVsYXRpdmUsdXYsdXYyLGEsYixjKTtpZihpbnRlcnNlY3Rpb24pe2ludGVyc2VjdGlvbi5mYWNlSW5kZXg9TWF0aC5mbG9vcihpLzMpOy8vIHRyaWFuZ2xlIG51bWJlciBpbiBpbmRleGVkIGJ1ZmZlciBzZW1hbnRpY3MKCWludGVyc2VjdHMucHVzaChpbnRlcnNlY3Rpb24pO319fX1lbHNlIGlmKHBvc2l0aW9uIT09dW5kZWZpbmVkKXsvLyBub24taW5kZXhlZCBidWZmZXIgZ2VvbWV0cnkKCWlmKEFycmF5LmlzQXJyYXkobWF0ZXJpYWwpKXtmb3IobGV0IGk9MCxpbD1ncm91cHMubGVuZ3RoO2k8aWw7aSsrKXtjb25zdCBncm91cD1ncm91cHNbaV07Y29uc3QgZ3JvdXBNYXRlcmlhbD1tYXRlcmlhbFtncm91cC5tYXRlcmlhbEluZGV4XTtjb25zdCBzdGFydD1NYXRoLm1heChncm91cC5zdGFydCxkcmF3UmFuZ2Uuc3RhcnQpO2NvbnN0IGVuZD1NYXRoLm1pbihwb3NpdGlvbi5jb3VudCxNYXRoLm1pbihncm91cC5zdGFydCtncm91cC5jb3VudCxkcmF3UmFuZ2Uuc3RhcnQrZHJhd1JhbmdlLmNvdW50KSk7Zm9yKGxldCBqPXN0YXJ0LGpsPWVuZDtqPGpsO2orPTMpe2NvbnN0IGE9ajtjb25zdCBiPWorMTtjb25zdCBjPWorMjtpbnRlcnNlY3Rpb249Y2hlY2tCdWZmZXJHZW9tZXRyeUludGVyc2VjdGlvbiQxKHRoaXMsZ3JvdXBNYXRlcmlhbCxyYXljYXN0ZXIsX3JheSQyLHBvc2l0aW9uLG1vcnBoUG9zaXRpb24sbW9ycGhUYXJnZXRzUmVsYXRpdmUsdXYsdXYyLGEsYixjKTtpZihpbnRlcnNlY3Rpb24pe2ludGVyc2VjdGlvbi5mYWNlSW5kZXg9TWF0aC5mbG9vcihqLzMpOy8vIHRyaWFuZ2xlIG51bWJlciBpbiBub24taW5kZXhlZCBidWZmZXIgc2VtYW50aWNzCglpbnRlcnNlY3Rpb24uZmFjZS5tYXRlcmlhbEluZGV4PWdyb3VwLm1hdGVyaWFsSW5kZXg7aW50ZXJzZWN0cy5wdXNoKGludGVyc2VjdGlvbik7fX19fWVsc2Uge2NvbnN0IHN0YXJ0PU1hdGgubWF4KDAsZHJhd1JhbmdlLnN0YXJ0KTtjb25zdCBlbmQ9TWF0aC5taW4ocG9zaXRpb24uY291bnQsZHJhd1JhbmdlLnN0YXJ0K2RyYXdSYW5nZS5jb3VudCk7Zm9yKGxldCBpPXN0YXJ0LGlsPWVuZDtpPGlsO2krPTMpe2NvbnN0IGE9aTtjb25zdCBiPWkrMTtjb25zdCBjPWkrMjtpbnRlcnNlY3Rpb249Y2hlY2tCdWZmZXJHZW9tZXRyeUludGVyc2VjdGlvbiQxKHRoaXMsbWF0ZXJpYWwscmF5Y2FzdGVyLF9yYXkkMixwb3NpdGlvbixtb3JwaFBvc2l0aW9uLG1vcnBoVGFyZ2V0c1JlbGF0aXZlLHV2LHV2MixhLGIsYyk7aWYoaW50ZXJzZWN0aW9uKXtpbnRlcnNlY3Rpb24uZmFjZUluZGV4PU1hdGguZmxvb3IoaS8zKTsvLyB0cmlhbmdsZSBudW1iZXIgaW4gbm9uLWluZGV4ZWQgYnVmZmVyIHNlbWFudGljcwoJaW50ZXJzZWN0cy5wdXNoKGludGVyc2VjdGlvbik7fX19fX1lbHNlIGlmKGdlb21ldHJ5LmlzR2VvbWV0cnkpe2NvbnNvbGUuZXJyb3IoJ1RIUkVFLk1lc2gucmF5Y2FzdCgpIG5vIGxvbmdlciBzdXBwb3J0cyBUSFJFRS5HZW9tZXRyeS4gVXNlIFRIUkVFLkJ1ZmZlckdlb21ldHJ5IGluc3RlYWQuJyk7fX19TWVzaC5wcm90b3R5cGUuaXNNZXNoPXRydWU7ZnVuY3Rpb24gY2hlY2tJbnRlcnNlY3Rpb24kMShvYmplY3QsbWF0ZXJpYWwscmF5Y2FzdGVyLHJheSxwQSxwQixwQyxwb2ludCl7bGV0IGludGVyc2VjdDtpZihtYXRlcmlhbC5zaWRlPT09QmFja1NpZGUpe2ludGVyc2VjdD1yYXkuaW50ZXJzZWN0VHJpYW5nbGUocEMscEIscEEsdHJ1ZSxwb2ludCk7fWVsc2Uge2ludGVyc2VjdD1yYXkuaW50ZXJzZWN0VHJpYW5nbGUocEEscEIscEMsbWF0ZXJpYWwuc2lkZSE9PURvdWJsZVNpZGUscG9pbnQpO31pZihpbnRlcnNlY3Q9PT1udWxsKXJldHVybiBudWxsO19pbnRlcnNlY3Rpb25Qb2ludFdvcmxkLmNvcHkocG9pbnQpO19pbnRlcnNlY3Rpb25Qb2ludFdvcmxkLmFwcGx5TWF0cml4NChvYmplY3QubWF0cml4V29ybGQpO2NvbnN0IGRpc3RhbmNlPXJheWNhc3Rlci5yYXkub3JpZ2luLmRpc3RhbmNlVG8oX2ludGVyc2VjdGlvblBvaW50V29ybGQpO2lmKGRpc3RhbmNlPHJheWNhc3Rlci5uZWFyfHxkaXN0YW5jZT5yYXljYXN0ZXIuZmFyKXJldHVybiBudWxsO3JldHVybiB7ZGlzdGFuY2U6ZGlzdGFuY2UscG9pbnQ6X2ludGVyc2VjdGlvblBvaW50V29ybGQuY2xvbmUoKSxvYmplY3Q6b2JqZWN0fTt9ZnVuY3Rpb24gY2hlY2tCdWZmZXJHZW9tZXRyeUludGVyc2VjdGlvbiQxKG9iamVjdCxtYXRlcmlhbCxyYXljYXN0ZXIscmF5LHBvc2l0aW9uLG1vcnBoUG9zaXRpb24sbW9ycGhUYXJnZXRzUmVsYXRpdmUsdXYsdXYyLGEsYixjKXtfdkEkMS5mcm9tQnVmZmVyQXR0cmlidXRlKHBvc2l0aW9uLGEpO192QiQxLmZyb21CdWZmZXJBdHRyaWJ1dGUocG9zaXRpb24sYik7X3ZDJDEuZnJvbUJ1ZmZlckF0dHJpYnV0ZShwb3NpdGlvbixjKTtjb25zdCBtb3JwaEluZmx1ZW5jZXM9b2JqZWN0Lm1vcnBoVGFyZ2V0SW5mbHVlbmNlcztpZihtb3JwaFBvc2l0aW9uJiZtb3JwaEluZmx1ZW5jZXMpe19tb3JwaEEuc2V0KDAsMCwwKTtfbW9ycGhCLnNldCgwLDAsMCk7X21vcnBoQy5zZXQoMCwwLDApO2ZvcihsZXQgaT0wLGlsPW1vcnBoUG9zaXRpb24ubGVuZ3RoO2k8aWw7aSsrKXtjb25zdCBpbmZsdWVuY2U9bW9ycGhJbmZsdWVuY2VzW2ldO2NvbnN0IG1vcnBoQXR0cmlidXRlPW1vcnBoUG9zaXRpb25baV07aWYoaW5mbHVlbmNlPT09MCljb250aW51ZTtfdGVtcEEuZnJvbUJ1ZmZlckF0dHJpYnV0ZShtb3JwaEF0dHJpYnV0ZSxhKTtfdGVtcEIuZnJvbUJ1ZmZlckF0dHJpYnV0ZShtb3JwaEF0dHJpYnV0ZSxiKTtfdGVtcEMuZnJvbUJ1ZmZlckF0dHJpYnV0ZShtb3JwaEF0dHJpYnV0ZSxjKTtpZihtb3JwaFRhcmdldHNSZWxhdGl2ZSl7X21vcnBoQS5hZGRTY2FsZWRWZWN0b3IoX3RlbXBBLGluZmx1ZW5jZSk7X21vcnBoQi5hZGRTY2FsZWRWZWN0b3IoX3RlbXBCLGluZmx1ZW5jZSk7X21vcnBoQy5hZGRTY2FsZWRWZWN0b3IoX3RlbXBDLGluZmx1ZW5jZSk7fWVsc2Uge19tb3JwaEEuYWRkU2NhbGVkVmVjdG9yKF90ZW1wQS5zdWIoX3ZBJDEpLGluZmx1ZW5jZSk7X21vcnBoQi5hZGRTY2FsZWRWZWN0b3IoX3RlbXBCLnN1YihfdkIkMSksaW5mbHVlbmNlKTtfbW9ycGhDLmFkZFNjYWxlZFZlY3RvcihfdGVtcEMuc3ViKF92QyQxKSxpbmZsdWVuY2UpO319X3ZBJDEuYWRkKF9tb3JwaEEpO192QiQxLmFkZChfbW9ycGhCKTtfdkMkMS5hZGQoX21vcnBoQyk7fWlmKG9iamVjdC5pc1NraW5uZWRNZXNoKXtvYmplY3QuYm9uZVRyYW5zZm9ybShhLF92QSQxKTtvYmplY3QuYm9uZVRyYW5zZm9ybShiLF92QiQxKTtvYmplY3QuYm9uZVRyYW5zZm9ybShjLF92QyQxKTt9Y29uc3QgaW50ZXJzZWN0aW9uPWNoZWNrSW50ZXJzZWN0aW9uJDEob2JqZWN0LG1hdGVyaWFsLHJheWNhc3RlcixyYXksX3ZBJDEsX3ZCJDEsX3ZDJDEsX2ludGVyc2VjdGlvblBvaW50KTtpZihpbnRlcnNlY3Rpb24pe2lmKHV2KXtfdXZBJDEuZnJvbUJ1ZmZlckF0dHJpYnV0ZSh1dixhKTtfdXZCJDEuZnJvbUJ1ZmZlckF0dHJpYnV0ZSh1dixiKTtfdXZDJDEuZnJvbUJ1ZmZlckF0dHJpYnV0ZSh1dixjKTtpbnRlcnNlY3Rpb24udXY9VHJpYW5nbGUuZ2V0VVYoX2ludGVyc2VjdGlvblBvaW50LF92QSQxLF92QiQxLF92QyQxLF91dkEkMSxfdXZCJDEsX3V2QyQxLG5ldyBWZWN0b3IyKCkpO31pZih1djIpe191dkEkMS5mcm9tQnVmZmVyQXR0cmlidXRlKHV2MixhKTtfdXZCJDEuZnJvbUJ1ZmZlckF0dHJpYnV0ZSh1djIsYik7X3V2QyQxLmZyb21CdWZmZXJBdHRyaWJ1dGUodXYyLGMpO2ludGVyc2VjdGlvbi51djI9VHJpYW5nbGUuZ2V0VVYoX2ludGVyc2VjdGlvblBvaW50LF92QSQxLF92QiQxLF92QyQxLF91dkEkMSxfdXZCJDEsX3V2QyQxLG5ldyBWZWN0b3IyKCkpO31jb25zdCBmYWNlPXthOmEsYjpiLGM6Yyxub3JtYWw6bmV3IFZlY3RvcjMoKSxtYXRlcmlhbEluZGV4OjB9O1RyaWFuZ2xlLmdldE5vcm1hbChfdkEkMSxfdkIkMSxfdkMkMSxmYWNlLm5vcm1hbCk7aW50ZXJzZWN0aW9uLmZhY2U9ZmFjZTt9cmV0dXJuIGludGVyc2VjdGlvbjt9Y2xhc3MgQm94R2VvbWV0cnkgZXh0ZW5kcyBCdWZmZXJHZW9tZXRyeXtjb25zdHJ1Y3Rvcih3aWR0aCxoZWlnaHQsZGVwdGgsd2lkdGhTZWdtZW50cyxoZWlnaHRTZWdtZW50cyxkZXB0aFNlZ21lbnRzKXtpZih3aWR0aD09PXZvaWQgMCl7d2lkdGg9MTt9aWYoaGVpZ2h0PT09dm9pZCAwKXtoZWlnaHQ9MTt9aWYoZGVwdGg9PT12b2lkIDApe2RlcHRoPTE7fWlmKHdpZHRoU2VnbWVudHM9PT12b2lkIDApe3dpZHRoU2VnbWVudHM9MTt9aWYoaGVpZ2h0U2VnbWVudHM9PT12b2lkIDApe2hlaWdodFNlZ21lbnRzPTE7fWlmKGRlcHRoU2VnbWVudHM9PT12b2lkIDApe2RlcHRoU2VnbWVudHM9MTt9c3VwZXIoKTt0aGlzLnR5cGU9J0JveEdlb21ldHJ5Jzt0aGlzLnBhcmFtZXRlcnM9e3dpZHRoOndpZHRoLGhlaWdodDpoZWlnaHQsZGVwdGg6ZGVwdGgsd2lkdGhTZWdtZW50czp3aWR0aFNlZ21lbnRzLGhlaWdodFNlZ21lbnRzOmhlaWdodFNlZ21lbnRzLGRlcHRoU2VnbWVudHM6ZGVwdGhTZWdtZW50c307Y29uc3Qgc2NvcGU9dGhpczsvLyBzZWdtZW50cwoJd2lkdGhTZWdtZW50cz1NYXRoLmZsb29yKHdpZHRoU2VnbWVudHMpO2hlaWdodFNlZ21lbnRzPU1hdGguZmxvb3IoaGVpZ2h0U2VnbWVudHMpO2RlcHRoU2VnbWVudHM9TWF0aC5mbG9vcihkZXB0aFNlZ21lbnRzKTsvLyBidWZmZXJzCgljb25zdCBpbmRpY2VzPVtdO2NvbnN0IHZlcnRpY2VzPVtdO2NvbnN0IG5vcm1hbHM9W107Y29uc3QgdXZzPVtdOy8vIGhlbHBlciB2YXJpYWJsZXMKCWxldCBudW1iZXJPZlZlcnRpY2VzPTA7bGV0IGdyb3VwU3RhcnQ9MDsvLyBidWlsZCBlYWNoIHNpZGUgb2YgdGhlIGJveCBnZW9tZXRyeQoJYnVpbGRQbGFuZSgneicsJ3knLCd4JywtMSwtMSxkZXB0aCxoZWlnaHQsd2lkdGgsZGVwdGhTZWdtZW50cyxoZWlnaHRTZWdtZW50cywwKTsvLyBweAoJYnVpbGRQbGFuZSgneicsJ3knLCd4JywxLC0xLGRlcHRoLGhlaWdodCwtd2lkdGgsZGVwdGhTZWdtZW50cyxoZWlnaHRTZWdtZW50cywxKTsvLyBueAoJYnVpbGRQbGFuZSgneCcsJ3onLCd5JywxLDEsd2lkdGgsZGVwdGgsaGVpZ2h0LHdpZHRoU2VnbWVudHMsZGVwdGhTZWdtZW50cywyKTsvLyBweQoJYnVpbGRQbGFuZSgneCcsJ3onLCd5JywxLC0xLHdpZHRoLGRlcHRoLC1oZWlnaHQsd2lkdGhTZWdtZW50cyxkZXB0aFNlZ21lbnRzLDMpOy8vIG55CglidWlsZFBsYW5lKCd4JywneScsJ3onLDEsLTEsd2lkdGgsaGVpZ2h0LGRlcHRoLHdpZHRoU2VnbWVudHMsaGVpZ2h0U2VnbWVudHMsNCk7Ly8gcHoKCWJ1aWxkUGxhbmUoJ3gnLCd5JywneicsLTEsLTEsd2lkdGgsaGVpZ2h0LC1kZXB0aCx3aWR0aFNlZ21lbnRzLGhlaWdodFNlZ21lbnRzLDUpOy8vIG56CgkvLyBidWlsZCBnZW9tZXRyeQoJdGhpcy5zZXRJbmRleChpbmRpY2VzKTt0aGlzLnNldEF0dHJpYnV0ZSgncG9zaXRpb24nLG5ldyBGbG9hdDMyQnVmZmVyQXR0cmlidXRlKHZlcnRpY2VzLDMpKTt0aGlzLnNldEF0dHJpYnV0ZSgnbm9ybWFsJyxuZXcgRmxvYXQzMkJ1ZmZlckF0dHJpYnV0ZShub3JtYWxzLDMpKTt0aGlzLnNldEF0dHJpYnV0ZSgndXYnLG5ldyBGbG9hdDMyQnVmZmVyQXR0cmlidXRlKHV2cywyKSk7ZnVuY3Rpb24gYnVpbGRQbGFuZSh1LHYsdyx1ZGlyLHZkaXIsd2lkdGgsaGVpZ2h0LGRlcHRoLGdyaWRYLGdyaWRZLG1hdGVyaWFsSW5kZXgpe2NvbnN0IHNlZ21lbnRXaWR0aD13aWR0aC9ncmlkWDtjb25zdCBzZWdtZW50SGVpZ2h0PWhlaWdodC9ncmlkWTtjb25zdCB3aWR0aEhhbGY9d2lkdGgvMjtjb25zdCBoZWlnaHRIYWxmPWhlaWdodC8yO2NvbnN0IGRlcHRoSGFsZj1kZXB0aC8yO2NvbnN0IGdyaWRYMT1ncmlkWCsxO2NvbnN0IGdyaWRZMT1ncmlkWSsxO2xldCB2ZXJ0ZXhDb3VudGVyPTA7bGV0IGdyb3VwQ291bnQ9MDtjb25zdCB2ZWN0b3I9bmV3IFZlY3RvcjMoKTsvLyBnZW5lcmF0ZSB2ZXJ0aWNlcywgbm9ybWFscyBhbmQgdXZzCglmb3IobGV0IGl5PTA7aXk8Z3JpZFkxO2l5Kyspe2NvbnN0IHk9aXkqc2VnbWVudEhlaWdodC1oZWlnaHRIYWxmO2ZvcihsZXQgaXg9MDtpeDxncmlkWDE7aXgrKyl7Y29uc3QgeD1peCpzZWdtZW50V2lkdGgtd2lkdGhIYWxmOy8vIHNldCB2YWx1ZXMgdG8gY29ycmVjdCB2ZWN0b3IgY29tcG9uZW50Cgl2ZWN0b3JbdV09eCp1ZGlyO3ZlY3Rvclt2XT15KnZkaXI7dmVjdG9yW3ddPWRlcHRoSGFsZjsvLyBub3cgYXBwbHkgdmVjdG9yIHRvIHZlcnRleCBidWZmZXIKCXZlcnRpY2VzLnB1c2godmVjdG9yLngsdmVjdG9yLnksdmVjdG9yLnopOy8vIHNldCB2YWx1ZXMgdG8gY29ycmVjdCB2ZWN0b3IgY29tcG9uZW50Cgl2ZWN0b3JbdV09MDt2ZWN0b3Jbdl09MDt2ZWN0b3Jbd109ZGVwdGg+MD8xOi0xOy8vIG5vdyBhcHBseSB2ZWN0b3IgdG8gbm9ybWFsIGJ1ZmZlcgoJbm9ybWFscy5wdXNoKHZlY3Rvci54LHZlY3Rvci55LHZlY3Rvci56KTsvLyB1dnMKCXV2cy5wdXNoKGl4L2dyaWRYKTt1dnMucHVzaCgxLWl5L2dyaWRZKTsvLyBjb3VudGVycwoJdmVydGV4Q291bnRlcis9MTt9fS8vIGluZGljZXMKCS8vIDEuIHlvdSBuZWVkIHRocmVlIGluZGljZXMgdG8gZHJhdyBhIHNpbmdsZSBmYWNlCgkvLyAyLiBhIHNpbmdsZSBzZWdtZW50IGNvbnNpc3RzIG9mIHR3byBmYWNlcwoJLy8gMy4gc28gd2UgbmVlZCB0byBnZW5lcmF0ZSBzaXggKDIqMykgaW5kaWNlcyBwZXIgc2VnbWVudAoJZm9yKGxldCBpeT0wO2l5PGdyaWRZO2l5Kyspe2ZvcihsZXQgaXg9MDtpeDxncmlkWDtpeCsrKXtjb25zdCBhPW51bWJlck9mVmVydGljZXMraXgrZ3JpZFgxKml5O2NvbnN0IGI9bnVtYmVyT2ZWZXJ0aWNlcytpeCtncmlkWDEqKGl5KzEpO2NvbnN0IGM9bnVtYmVyT2ZWZXJ0aWNlcysoaXgrMSkrZ3JpZFgxKihpeSsxKTtjb25zdCBkPW51bWJlck9mVmVydGljZXMrKGl4KzEpK2dyaWRYMSppeTsvLyBmYWNlcwoJaW5kaWNlcy5wdXNoKGEsYixkKTtpbmRpY2VzLnB1c2goYixjLGQpOy8vIGluY3JlYXNlIGNvdW50ZXIKCWdyb3VwQ291bnQrPTY7fX0vLyBhZGQgYSBncm91cCB0byB0aGUgZ2VvbWV0cnkuIHRoaXMgd2lsbCBlbnN1cmUgbXVsdGkgbWF0ZXJpYWwgc3VwcG9ydAoJc2NvcGUuYWRkR3JvdXAoZ3JvdXBTdGFydCxncm91cENvdW50LG1hdGVyaWFsSW5kZXgpOy8vIGNhbGN1bGF0ZSBuZXcgc3RhcnQgdmFsdWUgZm9yIGdyb3VwcwoJZ3JvdXBTdGFydCs9Z3JvdXBDb3VudDsvLyB1cGRhdGUgdG90YWwgbnVtYmVyIG9mIHZlcnRpY2VzCgludW1iZXJPZlZlcnRpY2VzKz12ZXJ0ZXhDb3VudGVyO319c3RhdGljIGZyb21KU09OKGRhdGEpe3JldHVybiBuZXcgQm94R2VvbWV0cnkoZGF0YS53aWR0aCxkYXRhLmhlaWdodCxkYXRhLmRlcHRoLGRhdGEud2lkdGhTZWdtZW50cyxkYXRhLmhlaWdodFNlZ21lbnRzLGRhdGEuZGVwdGhTZWdtZW50cyk7fX0vKioKCSAqIFVuaWZvcm0gVXRpbGl0aWVzCgkgKi9mdW5jdGlvbiBjbG9uZVVuaWZvcm1zKHNyYyl7Y29uc3QgZHN0PXt9O2Zvcihjb25zdCB1IGluIHNyYyl7ZHN0W3VdPXt9O2Zvcihjb25zdCBwIGluIHNyY1t1XSl7Y29uc3QgcHJvcGVydHk9c3JjW3VdW3BdO2lmKHByb3BlcnR5JiYocHJvcGVydHkuaXNDb2xvcnx8cHJvcGVydHkuaXNNYXRyaXgzfHxwcm9wZXJ0eS5pc01hdHJpeDR8fHByb3BlcnR5LmlzVmVjdG9yMnx8cHJvcGVydHkuaXNWZWN0b3IzfHxwcm9wZXJ0eS5pc1ZlY3RvcjR8fHByb3BlcnR5LmlzVGV4dHVyZXx8cHJvcGVydHkuaXNRdWF0ZXJuaW9uKSl7ZHN0W3VdW3BdPXByb3BlcnR5LmNsb25lKCk7fWVsc2UgaWYoQXJyYXkuaXNBcnJheShwcm9wZXJ0eSkpe2RzdFt1XVtwXT1wcm9wZXJ0eS5zbGljZSgpO31lbHNlIHtkc3RbdV1bcF09cHJvcGVydHk7fX19cmV0dXJuIGRzdDt9ZnVuY3Rpb24gbWVyZ2VVbmlmb3Jtcyh1bmlmb3Jtcyl7Y29uc3QgbWVyZ2VkPXt9O2ZvcihsZXQgdT0wO3U8dW5pZm9ybXMubGVuZ3RoO3UrKyl7Y29uc3QgdG1wPWNsb25lVW5pZm9ybXModW5pZm9ybXNbdV0pO2Zvcihjb25zdCBwIGluIHRtcCl7bWVyZ2VkW3BdPXRtcFtwXTt9fXJldHVybiBtZXJnZWQ7fS8vIExlZ2FjeQoJY29uc3QgVW5pZm9ybXNVdGlscz17Y2xvbmU6Y2xvbmVVbmlmb3JtcyxtZXJnZTptZXJnZVVuaWZvcm1zfTt2YXIgZGVmYXVsdF92ZXJ0ZXg9InZvaWQgbWFpbigpIHtcblx0Z2xfUG9zaXRpb24gPSBwcm9qZWN0aW9uTWF0cml4ICogbW9kZWxWaWV3TWF0cml4ICogdmVjNCggcG9zaXRpb24sIDEuMCApO1xufSI7dmFyIGRlZmF1bHRfZnJhZ21lbnQ9InZvaWQgbWFpbigpIHtcblx0Z2xfRnJhZ0NvbG9yID0gdmVjNCggMS4wLCAwLjAsIDAuMCwgMS4wICk7XG59IjsvKioKCSAqIHBhcmFtZXRlcnMgPSB7CgkgKiAgZGVmaW5lczogeyAibGFiZWwiIDogInZhbHVlIiB9LAoJICogIHVuaWZvcm1zOiB7ICJwYXJhbWV0ZXIxIjogeyB2YWx1ZTogMS4wIH0sICJwYXJhbWV0ZXIyIjogeyB2YWx1ZTI6IDIgfSB9LAoJICoKCSAqICBmcmFnbWVudFNoYWRlcjogPHN0cmluZz4sCgkgKiAgdmVydGV4U2hhZGVyOiA8c3RyaW5nPiwKCSAqCgkgKiAgd2lyZWZyYW1lOiA8Ym9vbGVhbj4sCgkgKiAgd2lyZWZyYW1lTGluZXdpZHRoOiA8ZmxvYXQ+LAoJICoKCSAqICBsaWdodHM6IDxib29sPgoJICogfQoJICovY2xhc3MgU2hhZGVyTWF0ZXJpYWwgZXh0ZW5kcyBNYXRlcmlhbHtjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzKXtzdXBlcigpO3RoaXMudHlwZT0nU2hhZGVyTWF0ZXJpYWwnO3RoaXMuZGVmaW5lcz17fTt0aGlzLnVuaWZvcm1zPXt9O3RoaXMudmVydGV4U2hhZGVyPWRlZmF1bHRfdmVydGV4O3RoaXMuZnJhZ21lbnRTaGFkZXI9ZGVmYXVsdF9mcmFnbWVudDt0aGlzLmxpbmV3aWR0aD0xO3RoaXMud2lyZWZyYW1lPWZhbHNlO3RoaXMud2lyZWZyYW1lTGluZXdpZHRoPTE7dGhpcy5mb2c9ZmFsc2U7Ly8gc2V0IHRvIHVzZSBzY2VuZSBmb2cKCXRoaXMubGlnaHRzPWZhbHNlOy8vIHNldCB0byB1c2Ugc2NlbmUgbGlnaHRzCgl0aGlzLmNsaXBwaW5nPWZhbHNlOy8vIHNldCB0byB1c2UgdXNlci1kZWZpbmVkIGNsaXBwaW5nIHBsYW5lcwoJdGhpcy5leHRlbnNpb25zPXtkZXJpdmF0aXZlczpmYWxzZSwvLyBzZXQgdG8gdXNlIGRlcml2YXRpdmVzCglmcmFnRGVwdGg6ZmFsc2UsLy8gc2V0IHRvIHVzZSBmcmFnbWVudCBkZXB0aCB2YWx1ZXMKCWRyYXdCdWZmZXJzOmZhbHNlLC8vIHNldCB0byB1c2UgZHJhdyBidWZmZXJzCglzaGFkZXJUZXh0dXJlTE9EOmZhbHNlLy8gc2V0IHRvIHVzZSBzaGFkZXIgdGV4dHVyZSBMT0QKCX07Ly8gV2hlbiByZW5kZXJlZCBnZW9tZXRyeSBkb2Vzbid0IGluY2x1ZGUgdGhlc2UgYXR0cmlidXRlcyBidXQgdGhlIG1hdGVyaWFsIGRvZXMsCgkvLyB1c2UgdGhlc2UgZGVmYXVsdCB2YWx1ZXMgaW4gV2ViR0wuIFRoaXMgYXZvaWRzIGVycm9ycyB3aGVuIGJ1ZmZlciBkYXRhIGlzIG1pc3NpbmcuCgl0aGlzLmRlZmF1bHRBdHRyaWJ1dGVWYWx1ZXM9eydjb2xvcic6WzEsMSwxXSwndXYnOlswLDBdLCd1djInOlswLDBdfTt0aGlzLmluZGV4MEF0dHJpYnV0ZU5hbWU9dW5kZWZpbmVkO3RoaXMudW5pZm9ybXNOZWVkVXBkYXRlPWZhbHNlO3RoaXMuZ2xzbFZlcnNpb249bnVsbDtpZihwYXJhbWV0ZXJzIT09dW5kZWZpbmVkKXtpZihwYXJhbWV0ZXJzLmF0dHJpYnV0ZXMhPT11bmRlZmluZWQpe2NvbnNvbGUuZXJyb3IoJ1RIUkVFLlNoYWRlck1hdGVyaWFsOiBhdHRyaWJ1dGVzIHNob3VsZCBub3cgYmUgZGVmaW5lZCBpbiBUSFJFRS5CdWZmZXJHZW9tZXRyeSBpbnN0ZWFkLicpO310aGlzLnNldFZhbHVlcyhwYXJhbWV0ZXJzKTt9fWNvcHkoc291cmNlKXtzdXBlci5jb3B5KHNvdXJjZSk7dGhpcy5mcmFnbWVudFNoYWRlcj1zb3VyY2UuZnJhZ21lbnRTaGFkZXI7dGhpcy52ZXJ0ZXhTaGFkZXI9c291cmNlLnZlcnRleFNoYWRlcjt0aGlzLnVuaWZvcm1zPWNsb25lVW5pZm9ybXMoc291cmNlLnVuaWZvcm1zKTt0aGlzLmRlZmluZXM9T2JqZWN0LmFzc2lnbih7fSxzb3VyY2UuZGVmaW5lcyk7dGhpcy53aXJlZnJhbWU9c291cmNlLndpcmVmcmFtZTt0aGlzLndpcmVmcmFtZUxpbmV3aWR0aD1zb3VyY2Uud2lyZWZyYW1lTGluZXdpZHRoO3RoaXMubGlnaHRzPXNvdXJjZS5saWdodHM7dGhpcy5jbGlwcGluZz1zb3VyY2UuY2xpcHBpbmc7dGhpcy5leHRlbnNpb25zPU9iamVjdC5hc3NpZ24oe30sc291cmNlLmV4dGVuc2lvbnMpO3RoaXMuZ2xzbFZlcnNpb249c291cmNlLmdsc2xWZXJzaW9uO3JldHVybiB0aGlzO310b0pTT04obWV0YSl7Y29uc3QgZGF0YT1zdXBlci50b0pTT04obWV0YSk7ZGF0YS5nbHNsVmVyc2lvbj10aGlzLmdsc2xWZXJzaW9uO2RhdGEudW5pZm9ybXM9e307Zm9yKGNvbnN0IG5hbWUgaW4gdGhpcy51bmlmb3Jtcyl7Y29uc3QgdW5pZm9ybT10aGlzLnVuaWZvcm1zW25hbWVdO2NvbnN0IHZhbHVlPXVuaWZvcm0udmFsdWU7aWYodmFsdWUmJnZhbHVlLmlzVGV4dHVyZSl7ZGF0YS51bmlmb3Jtc1tuYW1lXT17dHlwZTondCcsdmFsdWU6dmFsdWUudG9KU09OKG1ldGEpLnV1aWR9O31lbHNlIGlmKHZhbHVlJiZ2YWx1ZS5pc0NvbG9yKXtkYXRhLnVuaWZvcm1zW25hbWVdPXt0eXBlOidjJyx2YWx1ZTp2YWx1ZS5nZXRIZXgoKX07fWVsc2UgaWYodmFsdWUmJnZhbHVlLmlzVmVjdG9yMil7ZGF0YS51bmlmb3Jtc1tuYW1lXT17dHlwZTondjInLHZhbHVlOnZhbHVlLnRvQXJyYXkoKX07fWVsc2UgaWYodmFsdWUmJnZhbHVlLmlzVmVjdG9yMyl7ZGF0YS51bmlmb3Jtc1tuYW1lXT17dHlwZTondjMnLHZhbHVlOnZhbHVlLnRvQXJyYXkoKX07fWVsc2UgaWYodmFsdWUmJnZhbHVlLmlzVmVjdG9yNCl7ZGF0YS51bmlmb3Jtc1tuYW1lXT17dHlwZTondjQnLHZhbHVlOnZhbHVlLnRvQXJyYXkoKX07fWVsc2UgaWYodmFsdWUmJnZhbHVlLmlzTWF0cml4Myl7ZGF0YS51bmlmb3Jtc1tuYW1lXT17dHlwZTonbTMnLHZhbHVlOnZhbHVlLnRvQXJyYXkoKX07fWVsc2UgaWYodmFsdWUmJnZhbHVlLmlzTWF0cml4NCl7ZGF0YS51bmlmb3Jtc1tuYW1lXT17dHlwZTonbTQnLHZhbHVlOnZhbHVlLnRvQXJyYXkoKX07fWVsc2Uge2RhdGEudW5pZm9ybXNbbmFtZV09e3ZhbHVlOnZhbHVlfTsvLyBub3RlOiB0aGUgYXJyYXkgdmFyaWFudHMgdjJ2LCB2M3YsIHY0diwgbTR2IGFuZCB0diBhcmUgbm90IHN1cHBvcnRlZCBzbyBmYXIKCX19aWYoT2JqZWN0LmtleXModGhpcy5kZWZpbmVzKS5sZW5ndGg+MClkYXRhLmRlZmluZXM9dGhpcy5kZWZpbmVzO2RhdGEudmVydGV4U2hhZGVyPXRoaXMudmVydGV4U2hhZGVyO2RhdGEuZnJhZ21lbnRTaGFkZXI9dGhpcy5mcmFnbWVudFNoYWRlcjtjb25zdCBleHRlbnNpb25zPXt9O2Zvcihjb25zdCBrZXkgaW4gdGhpcy5leHRlbnNpb25zKXtpZih0aGlzLmV4dGVuc2lvbnNba2V5XT09PXRydWUpZXh0ZW5zaW9uc1trZXldPXRydWU7fWlmKE9iamVjdC5rZXlzKGV4dGVuc2lvbnMpLmxlbmd0aD4wKWRhdGEuZXh0ZW5zaW9ucz1leHRlbnNpb25zO3JldHVybiBkYXRhO319U2hhZGVyTWF0ZXJpYWwucHJvdG90eXBlLmlzU2hhZGVyTWF0ZXJpYWw9dHJ1ZTtjbGFzcyBDYW1lcmEgZXh0ZW5kcyBPYmplY3QzRHtjb25zdHJ1Y3Rvcigpe3N1cGVyKCk7dGhpcy50eXBlPSdDYW1lcmEnO3RoaXMubWF0cml4V29ybGRJbnZlcnNlPW5ldyBNYXRyaXg0KCk7dGhpcy5wcm9qZWN0aW9uTWF0cml4PW5ldyBNYXRyaXg0KCk7dGhpcy5wcm9qZWN0aW9uTWF0cml4SW52ZXJzZT1uZXcgTWF0cml4NCgpO31jb3B5KHNvdXJjZSxyZWN1cnNpdmUpe3N1cGVyLmNvcHkoc291cmNlLHJlY3Vyc2l2ZSk7dGhpcy5tYXRyaXhXb3JsZEludmVyc2UuY29weShzb3VyY2UubWF0cml4V29ybGRJbnZlcnNlKTt0aGlzLnByb2plY3Rpb25NYXRyaXguY29weShzb3VyY2UucHJvamVjdGlvbk1hdHJpeCk7dGhpcy5wcm9qZWN0aW9uTWF0cml4SW52ZXJzZS5jb3B5KHNvdXJjZS5wcm9qZWN0aW9uTWF0cml4SW52ZXJzZSk7cmV0dXJuIHRoaXM7fWdldFdvcmxkRGlyZWN0aW9uKHRhcmdldCl7dGhpcy51cGRhdGVXb3JsZE1hdHJpeCh0cnVlLGZhbHNlKTtjb25zdCBlPXRoaXMubWF0cml4V29ybGQuZWxlbWVudHM7cmV0dXJuIHRhcmdldC5zZXQoLWVbOF0sLWVbOV0sLWVbMTBdKS5ub3JtYWxpemUoKTt9dXBkYXRlTWF0cml4V29ybGQoZm9yY2Upe3N1cGVyLnVwZGF0ZU1hdHJpeFdvcmxkKGZvcmNlKTt0aGlzLm1hdHJpeFdvcmxkSW52ZXJzZS5jb3B5KHRoaXMubWF0cml4V29ybGQpLmludmVydCgpO311cGRhdGVXb3JsZE1hdHJpeCh1cGRhdGVQYXJlbnRzLHVwZGF0ZUNoaWxkcmVuKXtzdXBlci51cGRhdGVXb3JsZE1hdHJpeCh1cGRhdGVQYXJlbnRzLHVwZGF0ZUNoaWxkcmVuKTt0aGlzLm1hdHJpeFdvcmxkSW52ZXJzZS5jb3B5KHRoaXMubWF0cml4V29ybGQpLmludmVydCgpO31jbG9uZSgpe3JldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3RvcigpLmNvcHkodGhpcyk7fX1DYW1lcmEucHJvdG90eXBlLmlzQ2FtZXJhPXRydWU7Y2xhc3MgUGVyc3BlY3RpdmVDYW1lcmEgZXh0ZW5kcyBDYW1lcmF7Y29uc3RydWN0b3IoZm92LGFzcGVjdCxuZWFyLGZhcil7aWYoZm92PT09dm9pZCAwKXtmb3Y9NTA7fWlmKGFzcGVjdD09PXZvaWQgMCl7YXNwZWN0PTE7fWlmKG5lYXI9PT12b2lkIDApe25lYXI9MC4xO31pZihmYXI9PT12b2lkIDApe2Zhcj0yMDAwO31zdXBlcigpO3RoaXMudHlwZT0nUGVyc3BlY3RpdmVDYW1lcmEnO3RoaXMuZm92PWZvdjt0aGlzLnpvb209MTt0aGlzLm5lYXI9bmVhcjt0aGlzLmZhcj1mYXI7dGhpcy5mb2N1cz0xMDt0aGlzLmFzcGVjdD1hc3BlY3Q7dGhpcy52aWV3PW51bGw7dGhpcy5maWxtR2F1Z2U9MzU7Ly8gd2lkdGggb2YgdGhlIGZpbG0gKGRlZmF1bHQgaW4gbWlsbGltZXRlcnMpCgl0aGlzLmZpbG1PZmZzZXQ9MDsvLyBob3Jpem9udGFsIGZpbG0gb2Zmc2V0IChzYW1lIHVuaXQgYXMgZ2F1Z2UpCgl0aGlzLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKTt9Y29weShzb3VyY2UscmVjdXJzaXZlKXtzdXBlci5jb3B5KHNvdXJjZSxyZWN1cnNpdmUpO3RoaXMuZm92PXNvdXJjZS5mb3Y7dGhpcy56b29tPXNvdXJjZS56b29tO3RoaXMubmVhcj1zb3VyY2UubmVhcjt0aGlzLmZhcj1zb3VyY2UuZmFyO3RoaXMuZm9jdXM9c291cmNlLmZvY3VzO3RoaXMuYXNwZWN0PXNvdXJjZS5hc3BlY3Q7dGhpcy52aWV3PXNvdXJjZS52aWV3PT09bnVsbD9udWxsOk9iamVjdC5hc3NpZ24oe30sc291cmNlLnZpZXcpO3RoaXMuZmlsbUdhdWdlPXNvdXJjZS5maWxtR2F1Z2U7dGhpcy5maWxtT2Zmc2V0PXNvdXJjZS5maWxtT2Zmc2V0O3JldHVybiB0aGlzO30vKioKCQkgKiBTZXRzIHRoZSBGT1YgYnkgZm9jYWwgbGVuZ3RoIGluIHJlc3BlY3QgdG8gdGhlIGN1cnJlbnQgLmZpbG1HYXVnZS4KCQkgKgoJCSAqIFRoZSBkZWZhdWx0IGZpbG0gZ2F1Z2UgaXMgMzUsIHNvIHRoYXQgdGhlIGZvY2FsIGxlbmd0aCBjYW4gYmUgc3BlY2lmaWVkIGZvcgoJCSAqIGEgMzVtbSAoZnVsbCBmcmFtZSkgY2FtZXJhLgoJCSAqCgkJICogVmFsdWVzIGZvciBmb2NhbCBsZW5ndGggYW5kIGZpbG0gZ2F1Z2UgbXVzdCBoYXZlIHRoZSBzYW1lIHVuaXQuCgkJICovc2V0Rm9jYWxMZW5ndGgoZm9jYWxMZW5ndGgpey8qKiBzZWUge0BsaW5rIGh0dHA6Ly93d3cuYm9iYXRraW5zLmNvbS9waG90b2dyYXBoeS90ZWNobmljYWwvZmllbGRfb2Zfdmlldy5odG1sfSAqL2NvbnN0IHZFeHRlbnRTbG9wZT0wLjUqdGhpcy5nZXRGaWxtSGVpZ2h0KCkvZm9jYWxMZW5ndGg7dGhpcy5mb3Y9UkFEMkRFRyoyKk1hdGguYXRhbih2RXh0ZW50U2xvcGUpO3RoaXMudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpO30vKioKCQkgKiBDYWxjdWxhdGVzIHRoZSBmb2NhbCBsZW5ndGggZnJvbSB0aGUgY3VycmVudCAuZm92IGFuZCAuZmlsbUdhdWdlLgoJCSAqL2dldEZvY2FsTGVuZ3RoKCl7Y29uc3QgdkV4dGVudFNsb3BlPU1hdGgudGFuKERFRzJSQUQqMC41KnRoaXMuZm92KTtyZXR1cm4gMC41KnRoaXMuZ2V0RmlsbUhlaWdodCgpL3ZFeHRlbnRTbG9wZTt9Z2V0RWZmZWN0aXZlRk9WKCl7cmV0dXJuIFJBRDJERUcqMipNYXRoLmF0YW4oTWF0aC50YW4oREVHMlJBRCowLjUqdGhpcy5mb3YpL3RoaXMuem9vbSk7fWdldEZpbG1XaWR0aCgpey8vIGZpbG0gbm90IGNvbXBsZXRlbHkgY292ZXJlZCBpbiBwb3J0cmFpdCBmb3JtYXQgKGFzcGVjdCA8IDEpCglyZXR1cm4gdGhpcy5maWxtR2F1Z2UqTWF0aC5taW4odGhpcy5hc3BlY3QsMSk7fWdldEZpbG1IZWlnaHQoKXsvLyBmaWxtIG5vdCBjb21wbGV0ZWx5IGNvdmVyZWQgaW4gbGFuZHNjYXBlIGZvcm1hdCAoYXNwZWN0ID4gMSkKCXJldHVybiB0aGlzLmZpbG1HYXVnZS9NYXRoLm1heCh0aGlzLmFzcGVjdCwxKTt9LyoqCgkJICogU2V0cyBhbiBvZmZzZXQgaW4gYSBsYXJnZXIgZnJ1c3R1bS4gVGhpcyBpcyB1c2VmdWwgZm9yIG11bHRpLXdpbmRvdyBvcgoJCSAqIG11bHRpLW1vbml0b3IvbXVsdGktbWFjaGluZSBzZXR1cHMuCgkJICoKCQkgKiBGb3IgZXhhbXBsZSwgaWYgeW91IGhhdmUgM3gyIG1vbml0b3JzIGFuZCBlYWNoIG1vbml0b3IgaXMgMTkyMHgxMDgwIGFuZAoJCSAqIHRoZSBtb25pdG9ycyBhcmUgaW4gZ3JpZCBsaWtlIHRoaXMKCQkgKgoJCSAqICAgKy0tLSstLS0rLS0tKwoJCSAqICAgfCBBIHwgQiB8IEMgfAoJCSAqICAgKy0tLSstLS0rLS0tKwoJCSAqICAgfCBEIHwgRSB8IEYgfAoJCSAqICAgKy0tLSstLS0rLS0tKwoJCSAqCgkJICogdGhlbiBmb3IgZWFjaCBtb25pdG9yIHlvdSB3b3VsZCBjYWxsIGl0IGxpa2UgdGhpcwoJCSAqCgkJICogICBjb25zdCB3ID0gMTkyMDsKCQkgKiAgIGNvbnN0IGggPSAxMDgwOwoJCSAqICAgY29uc3QgZnVsbFdpZHRoID0gdyAqIDM7CgkJICogICBjb25zdCBmdWxsSGVpZ2h0ID0gaCAqIDI7CgkJICoKCQkgKiAgIC0tQS0tCgkJICogICBjYW1lcmEuc2V0Vmlld09mZnNldCggZnVsbFdpZHRoLCBmdWxsSGVpZ2h0LCB3ICogMCwgaCAqIDAsIHcsIGggKTsKCQkgKiAgIC0tQi0tCgkJICogICBjYW1lcmEuc2V0Vmlld09mZnNldCggZnVsbFdpZHRoLCBmdWxsSGVpZ2h0LCB3ICogMSwgaCAqIDAsIHcsIGggKTsKCQkgKiAgIC0tQy0tCgkJICogICBjYW1lcmEuc2V0Vmlld09mZnNldCggZnVsbFdpZHRoLCBmdWxsSGVpZ2h0LCB3ICogMiwgaCAqIDAsIHcsIGggKTsKCQkgKiAgIC0tRC0tCgkJICogICBjYW1lcmEuc2V0Vmlld09mZnNldCggZnVsbFdpZHRoLCBmdWxsSGVpZ2h0LCB3ICogMCwgaCAqIDEsIHcsIGggKTsKCQkgKiAgIC0tRS0tCgkJICogICBjYW1lcmEuc2V0Vmlld09mZnNldCggZnVsbFdpZHRoLCBmdWxsSGVpZ2h0LCB3ICogMSwgaCAqIDEsIHcsIGggKTsKCQkgKiAgIC0tRi0tCgkJICogICBjYW1lcmEuc2V0Vmlld09mZnNldCggZnVsbFdpZHRoLCBmdWxsSGVpZ2h0LCB3ICogMiwgaCAqIDEsIHcsIGggKTsKCQkgKgoJCSAqICAgTm90ZSB0aGVyZSBpcyBubyByZWFzb24gbW9uaXRvcnMgaGF2ZSB0byBiZSB0aGUgc2FtZSBzaXplIG9yIGluIGEgZ3JpZC4KCQkgKi9zZXRWaWV3T2Zmc2V0KGZ1bGxXaWR0aCxmdWxsSGVpZ2h0LHgseSx3aWR0aCxoZWlnaHQpe3RoaXMuYXNwZWN0PWZ1bGxXaWR0aC9mdWxsSGVpZ2h0O2lmKHRoaXMudmlldz09PW51bGwpe3RoaXMudmlldz17ZW5hYmxlZDp0cnVlLGZ1bGxXaWR0aDoxLGZ1bGxIZWlnaHQ6MSxvZmZzZXRYOjAsb2Zmc2V0WTowLHdpZHRoOjEsaGVpZ2h0OjF9O310aGlzLnZpZXcuZW5hYmxlZD10cnVlO3RoaXMudmlldy5mdWxsV2lkdGg9ZnVsbFdpZHRoO3RoaXMudmlldy5mdWxsSGVpZ2h0PWZ1bGxIZWlnaHQ7dGhpcy52aWV3Lm9mZnNldFg9eDt0aGlzLnZpZXcub2Zmc2V0WT15O3RoaXMudmlldy53aWR0aD13aWR0aDt0aGlzLnZpZXcuaGVpZ2h0PWhlaWdodDt0aGlzLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKTt9Y2xlYXJWaWV3T2Zmc2V0KCl7aWYodGhpcy52aWV3IT09bnVsbCl7dGhpcy52aWV3LmVuYWJsZWQ9ZmFsc2U7fXRoaXMudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpO311cGRhdGVQcm9qZWN0aW9uTWF0cml4KCl7Y29uc3QgbmVhcj10aGlzLm5lYXI7bGV0IHRvcD1uZWFyKk1hdGgudGFuKERFRzJSQUQqMC41KnRoaXMuZm92KS90aGlzLnpvb207bGV0IGhlaWdodD0yKnRvcDtsZXQgd2lkdGg9dGhpcy5hc3BlY3QqaGVpZ2h0O2xldCBsZWZ0PS0wLjUqd2lkdGg7Y29uc3Qgdmlldz10aGlzLnZpZXc7aWYodGhpcy52aWV3IT09bnVsbCYmdGhpcy52aWV3LmVuYWJsZWQpe2NvbnN0IGZ1bGxXaWR0aD12aWV3LmZ1bGxXaWR0aCxmdWxsSGVpZ2h0PXZpZXcuZnVsbEhlaWdodDtsZWZ0Kz12aWV3Lm9mZnNldFgqd2lkdGgvZnVsbFdpZHRoO3RvcC09dmlldy5vZmZzZXRZKmhlaWdodC9mdWxsSGVpZ2h0O3dpZHRoKj12aWV3LndpZHRoL2Z1bGxXaWR0aDtoZWlnaHQqPXZpZXcuaGVpZ2h0L2Z1bGxIZWlnaHQ7fWNvbnN0IHNrZXc9dGhpcy5maWxtT2Zmc2V0O2lmKHNrZXchPT0wKWxlZnQrPW5lYXIqc2tldy90aGlzLmdldEZpbG1XaWR0aCgpO3RoaXMucHJvamVjdGlvbk1hdHJpeC5tYWtlUGVyc3BlY3RpdmUobGVmdCxsZWZ0K3dpZHRoLHRvcCx0b3AtaGVpZ2h0LG5lYXIsdGhpcy5mYXIpO3RoaXMucHJvamVjdGlvbk1hdHJpeEludmVyc2UuY29weSh0aGlzLnByb2plY3Rpb25NYXRyaXgpLmludmVydCgpO310b0pTT04obWV0YSl7Y29uc3QgZGF0YT1zdXBlci50b0pTT04obWV0YSk7ZGF0YS5vYmplY3QuZm92PXRoaXMuZm92O2RhdGEub2JqZWN0Lnpvb209dGhpcy56b29tO2RhdGEub2JqZWN0Lm5lYXI9dGhpcy5uZWFyO2RhdGEub2JqZWN0LmZhcj10aGlzLmZhcjtkYXRhLm9iamVjdC5mb2N1cz10aGlzLmZvY3VzO2RhdGEub2JqZWN0LmFzcGVjdD10aGlzLmFzcGVjdDtpZih0aGlzLnZpZXchPT1udWxsKWRhdGEub2JqZWN0LnZpZXc9T2JqZWN0LmFzc2lnbih7fSx0aGlzLnZpZXcpO2RhdGEub2JqZWN0LmZpbG1HYXVnZT10aGlzLmZpbG1HYXVnZTtkYXRhLm9iamVjdC5maWxtT2Zmc2V0PXRoaXMuZmlsbU9mZnNldDtyZXR1cm4gZGF0YTt9fVBlcnNwZWN0aXZlQ2FtZXJhLnByb3RvdHlwZS5pc1BlcnNwZWN0aXZlQ2FtZXJhPXRydWU7Y29uc3QgZm92PTkwLGFzcGVjdD0xO2NsYXNzIEN1YmVDYW1lcmEgZXh0ZW5kcyBPYmplY3QzRHtjb25zdHJ1Y3RvcihuZWFyLGZhcixyZW5kZXJUYXJnZXQpe3N1cGVyKCk7dGhpcy50eXBlPSdDdWJlQ2FtZXJhJztpZihyZW5kZXJUYXJnZXQuaXNXZWJHTEN1YmVSZW5kZXJUYXJnZXQhPT10cnVlKXtjb25zb2xlLmVycm9yKCdUSFJFRS5DdWJlQ2FtZXJhOiBUaGUgY29uc3RydWN0b3Igbm93IGV4cGVjdHMgYW4gaW5zdGFuY2Ugb2YgV2ViR0xDdWJlUmVuZGVyVGFyZ2V0IGFzIHRoaXJkIHBhcmFtZXRlci4nKTtyZXR1cm47fXRoaXMucmVuZGVyVGFyZ2V0PXJlbmRlclRhcmdldDtjb25zdCBjYW1lcmFQWD1uZXcgUGVyc3BlY3RpdmVDYW1lcmEoZm92LGFzcGVjdCxuZWFyLGZhcik7Y2FtZXJhUFgubGF5ZXJzPXRoaXMubGF5ZXJzO2NhbWVyYVBYLnVwLnNldCgwLC0xLDApO2NhbWVyYVBYLmxvb2tBdChuZXcgVmVjdG9yMygxLDAsMCkpO3RoaXMuYWRkKGNhbWVyYVBYKTtjb25zdCBjYW1lcmFOWD1uZXcgUGVyc3BlY3RpdmVDYW1lcmEoZm92LGFzcGVjdCxuZWFyLGZhcik7Y2FtZXJhTlgubGF5ZXJzPXRoaXMubGF5ZXJzO2NhbWVyYU5YLnVwLnNldCgwLC0xLDApO2NhbWVyYU5YLmxvb2tBdChuZXcgVmVjdG9yMygtMSwwLDApKTt0aGlzLmFkZChjYW1lcmFOWCk7Y29uc3QgY2FtZXJhUFk9bmV3IFBlcnNwZWN0aXZlQ2FtZXJhKGZvdixhc3BlY3QsbmVhcixmYXIpO2NhbWVyYVBZLmxheWVycz10aGlzLmxheWVycztjYW1lcmFQWS51cC5zZXQoMCwwLDEpO2NhbWVyYVBZLmxvb2tBdChuZXcgVmVjdG9yMygwLDEsMCkpO3RoaXMuYWRkKGNhbWVyYVBZKTtjb25zdCBjYW1lcmFOWT1uZXcgUGVyc3BlY3RpdmVDYW1lcmEoZm92LGFzcGVjdCxuZWFyLGZhcik7Y2FtZXJhTlkubGF5ZXJzPXRoaXMubGF5ZXJzO2NhbWVyYU5ZLnVwLnNldCgwLDAsLTEpO2NhbWVyYU5ZLmxvb2tBdChuZXcgVmVjdG9yMygwLC0xLDApKTt0aGlzLmFkZChjYW1lcmFOWSk7Y29uc3QgY2FtZXJhUFo9bmV3IFBlcnNwZWN0aXZlQ2FtZXJhKGZvdixhc3BlY3QsbmVhcixmYXIpO2NhbWVyYVBaLmxheWVycz10aGlzLmxheWVycztjYW1lcmFQWi51cC5zZXQoMCwtMSwwKTtjYW1lcmFQWi5sb29rQXQobmV3IFZlY3RvcjMoMCwwLDEpKTt0aGlzLmFkZChjYW1lcmFQWik7Y29uc3QgY2FtZXJhTlo9bmV3IFBlcnNwZWN0aXZlQ2FtZXJhKGZvdixhc3BlY3QsbmVhcixmYXIpO2NhbWVyYU5aLmxheWVycz10aGlzLmxheWVycztjYW1lcmFOWi51cC5zZXQoMCwtMSwwKTtjYW1lcmFOWi5sb29rQXQobmV3IFZlY3RvcjMoMCwwLC0xKSk7dGhpcy5hZGQoY2FtZXJhTlopO311cGRhdGUocmVuZGVyZXIsc2NlbmUpe2lmKHRoaXMucGFyZW50PT09bnVsbCl0aGlzLnVwZGF0ZU1hdHJpeFdvcmxkKCk7Y29uc3QgcmVuZGVyVGFyZ2V0PXRoaXMucmVuZGVyVGFyZ2V0O2NvbnN0W2NhbWVyYVBYLGNhbWVyYU5YLGNhbWVyYVBZLGNhbWVyYU5ZLGNhbWVyYVBaLGNhbWVyYU5aXT10aGlzLmNoaWxkcmVuO2NvbnN0IGN1cnJlbnRYckVuYWJsZWQ9cmVuZGVyZXIueHIuZW5hYmxlZDtjb25zdCBjdXJyZW50UmVuZGVyVGFyZ2V0PXJlbmRlcmVyLmdldFJlbmRlclRhcmdldCgpO3JlbmRlcmVyLnhyLmVuYWJsZWQ9ZmFsc2U7Y29uc3QgZ2VuZXJhdGVNaXBtYXBzPXJlbmRlclRhcmdldC50ZXh0dXJlLmdlbmVyYXRlTWlwbWFwcztyZW5kZXJUYXJnZXQudGV4dHVyZS5nZW5lcmF0ZU1pcG1hcHM9ZmFsc2U7cmVuZGVyZXIuc2V0UmVuZGVyVGFyZ2V0KHJlbmRlclRhcmdldCwwKTtyZW5kZXJlci5yZW5kZXIoc2NlbmUsY2FtZXJhUFgpO3JlbmRlcmVyLnNldFJlbmRlclRhcmdldChyZW5kZXJUYXJnZXQsMSk7cmVuZGVyZXIucmVuZGVyKHNjZW5lLGNhbWVyYU5YKTtyZW5kZXJlci5zZXRSZW5kZXJUYXJnZXQocmVuZGVyVGFyZ2V0LDIpO3JlbmRlcmVyLnJlbmRlcihzY2VuZSxjYW1lcmFQWSk7cmVuZGVyZXIuc2V0UmVuZGVyVGFyZ2V0KHJlbmRlclRhcmdldCwzKTtyZW5kZXJlci5yZW5kZXIoc2NlbmUsY2FtZXJhTlkpO3JlbmRlcmVyLnNldFJlbmRlclRhcmdldChyZW5kZXJUYXJnZXQsNCk7cmVuZGVyZXIucmVuZGVyKHNjZW5lLGNhbWVyYVBaKTtyZW5kZXJUYXJnZXQudGV4dHVyZS5nZW5lcmF0ZU1pcG1hcHM9Z2VuZXJhdGVNaXBtYXBzO3JlbmRlcmVyLnNldFJlbmRlclRhcmdldChyZW5kZXJUYXJnZXQsNSk7cmVuZGVyZXIucmVuZGVyKHNjZW5lLGNhbWVyYU5aKTtyZW5kZXJlci5zZXRSZW5kZXJUYXJnZXQoY3VycmVudFJlbmRlclRhcmdldCk7cmVuZGVyZXIueHIuZW5hYmxlZD1jdXJyZW50WHJFbmFibGVkO319Y2xhc3MgQ3ViZVRleHR1cmUgZXh0ZW5kcyBUZXh0dXJle2NvbnN0cnVjdG9yKGltYWdlcyxtYXBwaW5nLHdyYXBTLHdyYXBULG1hZ0ZpbHRlcixtaW5GaWx0ZXIsZm9ybWF0LHR5cGUsYW5pc290cm9weSxlbmNvZGluZyl7aW1hZ2VzPWltYWdlcyE9PXVuZGVmaW5lZD9pbWFnZXM6W107bWFwcGluZz1tYXBwaW5nIT09dW5kZWZpbmVkP21hcHBpbmc6Q3ViZVJlZmxlY3Rpb25NYXBwaW5nO3N1cGVyKGltYWdlcyxtYXBwaW5nLHdyYXBTLHdyYXBULG1hZ0ZpbHRlcixtaW5GaWx0ZXIsZm9ybWF0LHR5cGUsYW5pc290cm9weSxlbmNvZGluZyk7dGhpcy5mbGlwWT1mYWxzZTt9Z2V0IGltYWdlcygpe3JldHVybiB0aGlzLmltYWdlO31zZXQgaW1hZ2VzKHZhbHVlKXt0aGlzLmltYWdlPXZhbHVlO319Q3ViZVRleHR1cmUucHJvdG90eXBlLmlzQ3ViZVRleHR1cmU9dHJ1ZTtjbGFzcyBXZWJHTEN1YmVSZW5kZXJUYXJnZXQgZXh0ZW5kcyBXZWJHTFJlbmRlclRhcmdldHtjb25zdHJ1Y3RvcihzaXplLG9wdGlvbnMsZHVtbXkpe2lmKE51bWJlci5pc0ludGVnZXIob3B0aW9ucykpe2NvbnNvbGUud2FybignVEhSRUUuV2ViR0xDdWJlUmVuZGVyVGFyZ2V0OiBjb25zdHJ1Y3RvciBzaWduYXR1cmUgaXMgbm93IFdlYkdMQ3ViZVJlbmRlclRhcmdldCggc2l6ZSwgb3B0aW9ucyApJyk7b3B0aW9ucz1kdW1teTt9c3VwZXIoc2l6ZSxzaXplLG9wdGlvbnMpO29wdGlvbnM9b3B0aW9uc3x8e307Ly8gQnkgY29udmVudGlvbiAtLSBsaWtlbHkgYmFzZWQgb24gdGhlIFJlbmRlck1hbiBzcGVjIGZyb20gdGhlIDE5OTAncyAtLSBjdWJlIG1hcHMgYXJlIHNwZWNpZmllZCBieSBXZWJHTCAoYW5kIHRocmVlLmpzKQoJLy8gaW4gYSBjb29yZGluYXRlIHN5c3RlbSBpbiB3aGljaCBwb3NpdGl2ZS14IGlzIHRvIHRoZSByaWdodCB3aGVuIGxvb2tpbmcgdXAgdGhlIHBvc2l0aXZlLXogYXhpcyAtLSBpbiBvdGhlciB3b3JkcywKCS8vIGluIGEgbGVmdC1oYW5kZWQgY29vcmRpbmF0ZSBzeXN0ZW0uIEJ5IGNvbnRpbnVpbmcgdGhpcyBjb252ZW50aW9uLCBwcmVleGlzdGluZyBjdWJlIG1hcHMgY29udGludWVkIHRvIHJlbmRlciBjb3JyZWN0bHkuCgkvLyB0aHJlZS5qcyB1c2VzIGEgcmlnaHQtaGFuZGVkIGNvb3JkaW5hdGUgc3lzdGVtLiBTbyBlbnZpcm9ubWVudCBtYXBzIHVzZWQgaW4gdGhyZWUuanMgYXBwZWFyIHRvIGhhdmUgcHggYW5kIG54IHN3YXBwZWQKCS8vIGFuZCB0aGUgZmxhZyBpc1JlbmRlclRhcmdldFRleHR1cmUgY29udHJvbHMgdGhpcyBjb252ZXJzaW9uLiBUaGUgZmxpcCBpcyBub3QgcmVxdWlyZWQgd2hlbiB1c2luZyBXZWJHTEN1YmVSZW5kZXJUYXJnZXQudGV4dHVyZQoJLy8gYXMgYSBjdWJlIHRleHR1cmUgKHRoaXMgaXMgZGV0ZWN0ZWQgd2hlbiBpc1JlbmRlclRhcmdldFRleHR1cmUgaXMgc2V0IHRvIHRydWUgZm9yIGN1YmUgdGV4dHVyZXMpLgoJdGhpcy50ZXh0dXJlPW5ldyBDdWJlVGV4dHVyZSh1bmRlZmluZWQsb3B0aW9ucy5tYXBwaW5nLG9wdGlvbnMud3JhcFMsb3B0aW9ucy53cmFwVCxvcHRpb25zLm1hZ0ZpbHRlcixvcHRpb25zLm1pbkZpbHRlcixvcHRpb25zLmZvcm1hdCxvcHRpb25zLnR5cGUsb3B0aW9ucy5hbmlzb3Ryb3B5LG9wdGlvbnMuZW5jb2RpbmcpO3RoaXMudGV4dHVyZS5pc1JlbmRlclRhcmdldFRleHR1cmU9dHJ1ZTt0aGlzLnRleHR1cmUuZ2VuZXJhdGVNaXBtYXBzPW9wdGlvbnMuZ2VuZXJhdGVNaXBtYXBzIT09dW5kZWZpbmVkP29wdGlvbnMuZ2VuZXJhdGVNaXBtYXBzOmZhbHNlO3RoaXMudGV4dHVyZS5taW5GaWx0ZXI9b3B0aW9ucy5taW5GaWx0ZXIhPT11bmRlZmluZWQ/b3B0aW9ucy5taW5GaWx0ZXI6TGluZWFyRmlsdGVyO3RoaXMudGV4dHVyZS5fbmVlZHNGbGlwRW52TWFwPWZhbHNlO31mcm9tRXF1aXJlY3Rhbmd1bGFyVGV4dHVyZShyZW5kZXJlcix0ZXh0dXJlKXt0aGlzLnRleHR1cmUudHlwZT10ZXh0dXJlLnR5cGU7dGhpcy50ZXh0dXJlLmZvcm1hdD1SR0JBRm9ybWF0Oy8vIHNlZSAjMTg4NTkKCXRoaXMudGV4dHVyZS5lbmNvZGluZz10ZXh0dXJlLmVuY29kaW5nO3RoaXMudGV4dHVyZS5nZW5lcmF0ZU1pcG1hcHM9dGV4dHVyZS5nZW5lcmF0ZU1pcG1hcHM7dGhpcy50ZXh0dXJlLm1pbkZpbHRlcj10ZXh0dXJlLm1pbkZpbHRlcjt0aGlzLnRleHR1cmUubWFnRmlsdGVyPXRleHR1cmUubWFnRmlsdGVyO2NvbnN0IHNoYWRlcj17dW5pZm9ybXM6e3RFcXVpcmVjdDp7dmFsdWU6bnVsbH19LHZlcnRleFNoYWRlcjovKiBnbHNsICovYAoKCQkJCXZhcnlpbmcgdmVjMyB2V29ybGREaXJlY3Rpb247CgoJCQkJdmVjMyB0cmFuc2Zvcm1EaXJlY3Rpb24oIGluIHZlYzMgZGlyLCBpbiBtYXQ0IG1hdHJpeCApIHsKCgkJCQkJcmV0dXJuIG5vcm1hbGl6ZSggKCBtYXRyaXggKiB2ZWM0KCBkaXIsIDAuMCApICkueHl6ICk7CgoJCQkJfQoKCQkJCXZvaWQgbWFpbigpIHsKCgkJCQkJdldvcmxkRGlyZWN0aW9uID0gdHJhbnNmb3JtRGlyZWN0aW9uKCBwb3NpdGlvbiwgbW9kZWxNYXRyaXggKTsKCgkJCQkJI2luY2x1ZGUgPGJlZ2luX3ZlcnRleD4KCQkJCQkjaW5jbHVkZSA8cHJvamVjdF92ZXJ0ZXg+CgoJCQkJfQoJCQlgLGZyYWdtZW50U2hhZGVyOi8qIGdsc2wgKi9gCgoJCQkJdW5pZm9ybSBzYW1wbGVyMkQgdEVxdWlyZWN0OwoKCQkJCXZhcnlpbmcgdmVjMyB2V29ybGREaXJlY3Rpb247CgoJCQkJI2luY2x1ZGUgPGNvbW1vbj4KCgkJCQl2b2lkIG1haW4oKSB7CgoJCQkJCXZlYzMgZGlyZWN0aW9uID0gbm9ybWFsaXplKCB2V29ybGREaXJlY3Rpb24gKTsKCgkJCQkJdmVjMiBzYW1wbGVVViA9IGVxdWlyZWN0VXYoIGRpcmVjdGlvbiApOwoKCQkJCQlnbF9GcmFnQ29sb3IgPSB0ZXh0dXJlMkQoIHRFcXVpcmVjdCwgc2FtcGxlVVYgKTsKCgkJCQl9CgkJCWB9O2NvbnN0IGdlb21ldHJ5PW5ldyBCb3hHZW9tZXRyeSg1LDUsNSk7Y29uc3QgbWF0ZXJpYWw9bmV3IFNoYWRlck1hdGVyaWFsKHtuYW1lOidDdWJlbWFwRnJvbUVxdWlyZWN0Jyx1bmlmb3JtczpjbG9uZVVuaWZvcm1zKHNoYWRlci51bmlmb3JtcyksdmVydGV4U2hhZGVyOnNoYWRlci52ZXJ0ZXhTaGFkZXIsZnJhZ21lbnRTaGFkZXI6c2hhZGVyLmZyYWdtZW50U2hhZGVyLHNpZGU6QmFja1NpZGUsYmxlbmRpbmc6Tm9CbGVuZGluZ30pO21hdGVyaWFsLnVuaWZvcm1zLnRFcXVpcmVjdC52YWx1ZT10ZXh0dXJlO2NvbnN0IG1lc2g9bmV3IE1lc2goZ2VvbWV0cnksbWF0ZXJpYWwpO2NvbnN0IGN1cnJlbnRNaW5GaWx0ZXI9dGV4dHVyZS5taW5GaWx0ZXI7Ly8gQXZvaWQgYmx1cnJlZCBwb2xlcwoJaWYodGV4dHVyZS5taW5GaWx0ZXI9PT1MaW5lYXJNaXBtYXBMaW5lYXJGaWx0ZXIpdGV4dHVyZS5taW5GaWx0ZXI9TGluZWFyRmlsdGVyO2NvbnN0IGNhbWVyYT1uZXcgQ3ViZUNhbWVyYSgxLDEwLHRoaXMpO2NhbWVyYS51cGRhdGUocmVuZGVyZXIsbWVzaCk7dGV4dHVyZS5taW5GaWx0ZXI9Y3VycmVudE1pbkZpbHRlcjttZXNoLmdlb21ldHJ5LmRpc3Bvc2UoKTttZXNoLm1hdGVyaWFsLmRpc3Bvc2UoKTtyZXR1cm4gdGhpczt9Y2xlYXIocmVuZGVyZXIsY29sb3IsZGVwdGgsc3RlbmNpbCl7Y29uc3QgY3VycmVudFJlbmRlclRhcmdldD1yZW5kZXJlci5nZXRSZW5kZXJUYXJnZXQoKTtmb3IobGV0IGk9MDtpPDY7aSsrKXtyZW5kZXJlci5zZXRSZW5kZXJUYXJnZXQodGhpcyxpKTtyZW5kZXJlci5jbGVhcihjb2xvcixkZXB0aCxzdGVuY2lsKTt9cmVuZGVyZXIuc2V0UmVuZGVyVGFyZ2V0KGN1cnJlbnRSZW5kZXJUYXJnZXQpO319V2ViR0xDdWJlUmVuZGVyVGFyZ2V0LnByb3RvdHlwZS5pc1dlYkdMQ3ViZVJlbmRlclRhcmdldD10cnVlO2NvbnN0IF92ZWN0b3IxPS8qQF9fUFVSRV9fKi9uZXcgVmVjdG9yMygpO2NvbnN0IF92ZWN0b3IyPS8qQF9fUFVSRV9fKi9uZXcgVmVjdG9yMygpO2NvbnN0IF9ub3JtYWxNYXRyaXg9LypAX19QVVJFX18qL25ldyBNYXRyaXgzKCk7Y2xhc3MgUGxhbmV7Y29uc3RydWN0b3Iobm9ybWFsLGNvbnN0YW50KXtpZihub3JtYWw9PT12b2lkIDApe25vcm1hbD1uZXcgVmVjdG9yMygxLDAsMCk7fWlmKGNvbnN0YW50PT09dm9pZCAwKXtjb25zdGFudD0wO30vLyBub3JtYWwgaXMgYXNzdW1lZCB0byBiZSBub3JtYWxpemVkCgl0aGlzLm5vcm1hbD1ub3JtYWw7dGhpcy5jb25zdGFudD1jb25zdGFudDt9c2V0KG5vcm1hbCxjb25zdGFudCl7dGhpcy5ub3JtYWwuY29weShub3JtYWwpO3RoaXMuY29uc3RhbnQ9Y29uc3RhbnQ7cmV0dXJuIHRoaXM7fXNldENvbXBvbmVudHMoeCx5LHosdyl7dGhpcy5ub3JtYWwuc2V0KHgseSx6KTt0aGlzLmNvbnN0YW50PXc7cmV0dXJuIHRoaXM7fXNldEZyb21Ob3JtYWxBbmRDb3BsYW5hclBvaW50KG5vcm1hbCxwb2ludCl7dGhpcy5ub3JtYWwuY29weShub3JtYWwpO3RoaXMuY29uc3RhbnQ9LXBvaW50LmRvdCh0aGlzLm5vcm1hbCk7cmV0dXJuIHRoaXM7fXNldEZyb21Db3BsYW5hclBvaW50cyhhLGIsYyl7Y29uc3Qgbm9ybWFsPV92ZWN0b3IxLnN1YlZlY3RvcnMoYyxiKS5jcm9zcyhfdmVjdG9yMi5zdWJWZWN0b3JzKGEsYikpLm5vcm1hbGl6ZSgpOy8vIFE6IHNob3VsZCBhbiBlcnJvciBiZSB0aHJvd24gaWYgbm9ybWFsIGlzIHplcm8gKGUuZy4gZGVnZW5lcmF0ZSBwbGFuZSk/Cgl0aGlzLnNldEZyb21Ob3JtYWxBbmRDb3BsYW5hclBvaW50KG5vcm1hbCxhKTtyZXR1cm4gdGhpczt9Y29weShwbGFuZSl7dGhpcy5ub3JtYWwuY29weShwbGFuZS5ub3JtYWwpO3RoaXMuY29uc3RhbnQ9cGxhbmUuY29uc3RhbnQ7cmV0dXJuIHRoaXM7fW5vcm1hbGl6ZSgpey8vIE5vdGU6IHdpbGwgbGVhZCB0byBhIGRpdmlkZSBieSB6ZXJvIGlmIHRoZSBwbGFuZSBpcyBpbnZhbGlkLgoJY29uc3QgaW52ZXJzZU5vcm1hbExlbmd0aD0xLjAvdGhpcy5ub3JtYWwubGVuZ3RoKCk7dGhpcy5ub3JtYWwubXVsdGlwbHlTY2FsYXIoaW52ZXJzZU5vcm1hbExlbmd0aCk7dGhpcy5jb25zdGFudCo9aW52ZXJzZU5vcm1hbExlbmd0aDtyZXR1cm4gdGhpczt9bmVnYXRlKCl7dGhpcy5jb25zdGFudCo9LTE7dGhpcy5ub3JtYWwubmVnYXRlKCk7cmV0dXJuIHRoaXM7fWRpc3RhbmNlVG9Qb2ludChwb2ludCl7cmV0dXJuIHRoaXMubm9ybWFsLmRvdChwb2ludCkrdGhpcy5jb25zdGFudDt9ZGlzdGFuY2VUb1NwaGVyZShzcGhlcmUpe3JldHVybiB0aGlzLmRpc3RhbmNlVG9Qb2ludChzcGhlcmUuY2VudGVyKS1zcGhlcmUucmFkaXVzO31wcm9qZWN0UG9pbnQocG9pbnQsdGFyZ2V0KXtyZXR1cm4gdGFyZ2V0LmNvcHkodGhpcy5ub3JtYWwpLm11bHRpcGx5U2NhbGFyKC10aGlzLmRpc3RhbmNlVG9Qb2ludChwb2ludCkpLmFkZChwb2ludCk7fWludGVyc2VjdExpbmUobGluZSx0YXJnZXQpe2NvbnN0IGRpcmVjdGlvbj1saW5lLmRlbHRhKF92ZWN0b3IxKTtjb25zdCBkZW5vbWluYXRvcj10aGlzLm5vcm1hbC5kb3QoZGlyZWN0aW9uKTtpZihkZW5vbWluYXRvcj09PTApey8vIGxpbmUgaXMgY29wbGFuYXIsIHJldHVybiBvcmlnaW4KCWlmKHRoaXMuZGlzdGFuY2VUb1BvaW50KGxpbmUuc3RhcnQpPT09MCl7cmV0dXJuIHRhcmdldC5jb3B5KGxpbmUuc3RhcnQpO30vLyBVbnN1cmUgaWYgdGhpcyBpcyB0aGUgY29ycmVjdCBtZXRob2QgdG8gaGFuZGxlIHRoaXMgY2FzZS4KCXJldHVybiBudWxsO31jb25zdCB0PS0obGluZS5zdGFydC5kb3QodGhpcy5ub3JtYWwpK3RoaXMuY29uc3RhbnQpL2Rlbm9taW5hdG9yO2lmKHQ8MHx8dD4xKXtyZXR1cm4gbnVsbDt9cmV0dXJuIHRhcmdldC5jb3B5KGRpcmVjdGlvbikubXVsdGlwbHlTY2FsYXIodCkuYWRkKGxpbmUuc3RhcnQpO31pbnRlcnNlY3RzTGluZShsaW5lKXsvLyBOb3RlOiB0aGlzIHRlc3RzIGlmIGEgbGluZSBpbnRlcnNlY3RzIHRoZSBwbGFuZSwgbm90IHdoZXRoZXIgaXQgKG9yIGl0cyBlbmQtcG9pbnRzKSBhcmUgY29wbGFuYXIgd2l0aCBpdC4KCWNvbnN0IHN0YXJ0U2lnbj10aGlzLmRpc3RhbmNlVG9Qb2ludChsaW5lLnN0YXJ0KTtjb25zdCBlbmRTaWduPXRoaXMuZGlzdGFuY2VUb1BvaW50KGxpbmUuZW5kKTtyZXR1cm4gc3RhcnRTaWduPDAmJmVuZFNpZ24+MHx8ZW5kU2lnbjwwJiZzdGFydFNpZ24+MDt9aW50ZXJzZWN0c0JveChib3gpe3JldHVybiBib3guaW50ZXJzZWN0c1BsYW5lKHRoaXMpO31pbnRlcnNlY3RzU3BoZXJlKHNwaGVyZSl7cmV0dXJuIHNwaGVyZS5pbnRlcnNlY3RzUGxhbmUodGhpcyk7fWNvcGxhbmFyUG9pbnQodGFyZ2V0KXtyZXR1cm4gdGFyZ2V0LmNvcHkodGhpcy5ub3JtYWwpLm11bHRpcGx5U2NhbGFyKC10aGlzLmNvbnN0YW50KTt9YXBwbHlNYXRyaXg0KG1hdHJpeCxvcHRpb25hbE5vcm1hbE1hdHJpeCl7Y29uc3Qgbm9ybWFsTWF0cml4PW9wdGlvbmFsTm9ybWFsTWF0cml4fHxfbm9ybWFsTWF0cml4LmdldE5vcm1hbE1hdHJpeChtYXRyaXgpO2NvbnN0IHJlZmVyZW5jZVBvaW50PXRoaXMuY29wbGFuYXJQb2ludChfdmVjdG9yMSkuYXBwbHlNYXRyaXg0KG1hdHJpeCk7Y29uc3Qgbm9ybWFsPXRoaXMubm9ybWFsLmFwcGx5TWF0cml4Myhub3JtYWxNYXRyaXgpLm5vcm1hbGl6ZSgpO3RoaXMuY29uc3RhbnQ9LXJlZmVyZW5jZVBvaW50LmRvdChub3JtYWwpO3JldHVybiB0aGlzO310cmFuc2xhdGUob2Zmc2V0KXt0aGlzLmNvbnN0YW50LT1vZmZzZXQuZG90KHRoaXMubm9ybWFsKTtyZXR1cm4gdGhpczt9ZXF1YWxzKHBsYW5lKXtyZXR1cm4gcGxhbmUubm9ybWFsLmVxdWFscyh0aGlzLm5vcm1hbCkmJnBsYW5lLmNvbnN0YW50PT09dGhpcy5jb25zdGFudDt9Y2xvbmUoKXtyZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IoKS5jb3B5KHRoaXMpO319UGxhbmUucHJvdG90eXBlLmlzUGxhbmU9dHJ1ZTtjb25zdCBfc3BoZXJlJDI9LypAX19QVVJFX18qL25ldyBTcGhlcmUoKTtjb25zdCBfdmVjdG9yJDc9LypAX19QVVJFX18qL25ldyBWZWN0b3IzKCk7Y2xhc3MgRnJ1c3R1bXtjb25zdHJ1Y3RvcihwMCxwMSxwMixwMyxwNCxwNSl7aWYocDA9PT12b2lkIDApe3AwPW5ldyBQbGFuZSgpO31pZihwMT09PXZvaWQgMCl7cDE9bmV3IFBsYW5lKCk7fWlmKHAyPT09dm9pZCAwKXtwMj1uZXcgUGxhbmUoKTt9aWYocDM9PT12b2lkIDApe3AzPW5ldyBQbGFuZSgpO31pZihwND09PXZvaWQgMCl7cDQ9bmV3IFBsYW5lKCk7fWlmKHA1PT09dm9pZCAwKXtwNT1uZXcgUGxhbmUoKTt9dGhpcy5wbGFuZXM9W3AwLHAxLHAyLHAzLHA0LHA1XTt9c2V0KHAwLHAxLHAyLHAzLHA0LHA1KXtjb25zdCBwbGFuZXM9dGhpcy5wbGFuZXM7cGxhbmVzWzBdLmNvcHkocDApO3BsYW5lc1sxXS5jb3B5KHAxKTtwbGFuZXNbMl0uY29weShwMik7cGxhbmVzWzNdLmNvcHkocDMpO3BsYW5lc1s0XS5jb3B5KHA0KTtwbGFuZXNbNV0uY29weShwNSk7cmV0dXJuIHRoaXM7fWNvcHkoZnJ1c3R1bSl7Y29uc3QgcGxhbmVzPXRoaXMucGxhbmVzO2ZvcihsZXQgaT0wO2k8NjtpKyspe3BsYW5lc1tpXS5jb3B5KGZydXN0dW0ucGxhbmVzW2ldKTt9cmV0dXJuIHRoaXM7fXNldEZyb21Qcm9qZWN0aW9uTWF0cml4KG0pe2NvbnN0IHBsYW5lcz10aGlzLnBsYW5lcztjb25zdCBtZT1tLmVsZW1lbnRzO2NvbnN0IG1lMD1tZVswXSxtZTE9bWVbMV0sbWUyPW1lWzJdLG1lMz1tZVszXTtjb25zdCBtZTQ9bWVbNF0sbWU1PW1lWzVdLG1lNj1tZVs2XSxtZTc9bWVbN107Y29uc3QgbWU4PW1lWzhdLG1lOT1tZVs5XSxtZTEwPW1lWzEwXSxtZTExPW1lWzExXTtjb25zdCBtZTEyPW1lWzEyXSxtZTEzPW1lWzEzXSxtZTE0PW1lWzE0XSxtZTE1PW1lWzE1XTtwbGFuZXNbMF0uc2V0Q29tcG9uZW50cyhtZTMtbWUwLG1lNy1tZTQsbWUxMS1tZTgsbWUxNS1tZTEyKS5ub3JtYWxpemUoKTtwbGFuZXNbMV0uc2V0Q29tcG9uZW50cyhtZTMrbWUwLG1lNyttZTQsbWUxMSttZTgsbWUxNSttZTEyKS5ub3JtYWxpemUoKTtwbGFuZXNbMl0uc2V0Q29tcG9uZW50cyhtZTMrbWUxLG1lNyttZTUsbWUxMSttZTksbWUxNSttZTEzKS5ub3JtYWxpemUoKTtwbGFuZXNbM10uc2V0Q29tcG9uZW50cyhtZTMtbWUxLG1lNy1tZTUsbWUxMS1tZTksbWUxNS1tZTEzKS5ub3JtYWxpemUoKTtwbGFuZXNbNF0uc2V0Q29tcG9uZW50cyhtZTMtbWUyLG1lNy1tZTYsbWUxMS1tZTEwLG1lMTUtbWUxNCkubm9ybWFsaXplKCk7cGxhbmVzWzVdLnNldENvbXBvbmVudHMobWUzK21lMixtZTcrbWU2LG1lMTErbWUxMCxtZTE1K21lMTQpLm5vcm1hbGl6ZSgpO3JldHVybiB0aGlzO31pbnRlcnNlY3RzT2JqZWN0KG9iamVjdCl7Y29uc3QgZ2VvbWV0cnk9b2JqZWN0Lmdlb21ldHJ5O2lmKGdlb21ldHJ5LmJvdW5kaW5nU3BoZXJlPT09bnVsbClnZW9tZXRyeS5jb21wdXRlQm91bmRpbmdTcGhlcmUoKTtfc3BoZXJlJDIuY29weShnZW9tZXRyeS5ib3VuZGluZ1NwaGVyZSkuYXBwbHlNYXRyaXg0KG9iamVjdC5tYXRyaXhXb3JsZCk7cmV0dXJuIHRoaXMuaW50ZXJzZWN0c1NwaGVyZShfc3BoZXJlJDIpO31pbnRlcnNlY3RzU3ByaXRlKHNwcml0ZSl7X3NwaGVyZSQyLmNlbnRlci5zZXQoMCwwLDApO19zcGhlcmUkMi5yYWRpdXM9MC43MDcxMDY3ODExODY1NDc2O19zcGhlcmUkMi5hcHBseU1hdHJpeDQoc3ByaXRlLm1hdHJpeFdvcmxkKTtyZXR1cm4gdGhpcy5pbnRlcnNlY3RzU3BoZXJlKF9zcGhlcmUkMik7fWludGVyc2VjdHNTcGhlcmUoc3BoZXJlKXtjb25zdCBwbGFuZXM9dGhpcy5wbGFuZXM7Y29uc3QgY2VudGVyPXNwaGVyZS5jZW50ZXI7Y29uc3QgbmVnUmFkaXVzPS1zcGhlcmUucmFkaXVzO2ZvcihsZXQgaT0wO2k8NjtpKyspe2NvbnN0IGRpc3RhbmNlPXBsYW5lc1tpXS5kaXN0YW5jZVRvUG9pbnQoY2VudGVyKTtpZihkaXN0YW5jZTxuZWdSYWRpdXMpe3JldHVybiBmYWxzZTt9fXJldHVybiB0cnVlO31pbnRlcnNlY3RzQm94KGJveCl7Y29uc3QgcGxhbmVzPXRoaXMucGxhbmVzO2ZvcihsZXQgaT0wO2k8NjtpKyspe2NvbnN0IHBsYW5lPXBsYW5lc1tpXTsvLyBjb3JuZXIgYXQgbWF4IGRpc3RhbmNlCglfdmVjdG9yJDcueD1wbGFuZS5ub3JtYWwueD4wP2JveC5tYXgueDpib3gubWluLng7X3ZlY3RvciQ3Lnk9cGxhbmUubm9ybWFsLnk+MD9ib3gubWF4Lnk6Ym94Lm1pbi55O192ZWN0b3IkNy56PXBsYW5lLm5vcm1hbC56PjA/Ym94Lm1heC56OmJveC5taW4uejtpZihwbGFuZS5kaXN0YW5jZVRvUG9pbnQoX3ZlY3RvciQ3KTwwKXtyZXR1cm4gZmFsc2U7fX1yZXR1cm4gdHJ1ZTt9Y29udGFpbnNQb2ludChwb2ludCl7Y29uc3QgcGxhbmVzPXRoaXMucGxhbmVzO2ZvcihsZXQgaT0wO2k8NjtpKyspe2lmKHBsYW5lc1tpXS5kaXN0YW5jZVRvUG9pbnQocG9pbnQpPDApe3JldHVybiBmYWxzZTt9fXJldHVybiB0cnVlO31jbG9uZSgpe3JldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3RvcigpLmNvcHkodGhpcyk7fX1mdW5jdGlvbiBXZWJHTEFuaW1hdGlvbigpe2xldCBjb250ZXh0PW51bGw7bGV0IGlzQW5pbWF0aW5nPWZhbHNlO2xldCBhbmltYXRpb25Mb29wPW51bGw7bGV0IHJlcXVlc3RJZD1udWxsO2Z1bmN0aW9uIG9uQW5pbWF0aW9uRnJhbWUodGltZSxmcmFtZSl7YW5pbWF0aW9uTG9vcCh0aW1lLGZyYW1lKTtyZXF1ZXN0SWQ9Y29udGV4dC5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUob25BbmltYXRpb25GcmFtZSk7fXJldHVybiB7c3RhcnQ6ZnVuY3Rpb24oKXtpZihpc0FuaW1hdGluZz09PXRydWUpcmV0dXJuO2lmKGFuaW1hdGlvbkxvb3A9PT1udWxsKXJldHVybjtyZXF1ZXN0SWQ9Y29udGV4dC5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUob25BbmltYXRpb25GcmFtZSk7aXNBbmltYXRpbmc9dHJ1ZTt9LHN0b3A6ZnVuY3Rpb24oKXtjb250ZXh0LmNhbmNlbEFuaW1hdGlvbkZyYW1lKHJlcXVlc3RJZCk7aXNBbmltYXRpbmc9ZmFsc2U7fSxzZXRBbmltYXRpb25Mb29wOmZ1bmN0aW9uKGNhbGxiYWNrKXthbmltYXRpb25Mb29wPWNhbGxiYWNrO30sc2V0Q29udGV4dDpmdW5jdGlvbih2YWx1ZSl7Y29udGV4dD12YWx1ZTt9fTt9ZnVuY3Rpb24gV2ViR0xBdHRyaWJ1dGVzKGdsLGNhcGFiaWxpdGllcyl7Y29uc3QgaXNXZWJHTDI9Y2FwYWJpbGl0aWVzLmlzV2ViR0wyO2NvbnN0IGJ1ZmZlcnM9bmV3IFdlYWtNYXAoKTtmdW5jdGlvbiBjcmVhdGVCdWZmZXIoYXR0cmlidXRlLGJ1ZmZlclR5cGUpe2NvbnN0IGFycmF5PWF0dHJpYnV0ZS5hcnJheTtjb25zdCB1c2FnZT1hdHRyaWJ1dGUudXNhZ2U7Y29uc3QgYnVmZmVyPWdsLmNyZWF0ZUJ1ZmZlcigpO2dsLmJpbmRCdWZmZXIoYnVmZmVyVHlwZSxidWZmZXIpO2dsLmJ1ZmZlckRhdGEoYnVmZmVyVHlwZSxhcnJheSx1c2FnZSk7YXR0cmlidXRlLm9uVXBsb2FkQ2FsbGJhY2soKTtsZXQgdHlwZT01MTI2O2lmKGFycmF5IGluc3RhbmNlb2YgRmxvYXQzMkFycmF5KXt0eXBlPTUxMjY7fWVsc2UgaWYoYXJyYXkgaW5zdGFuY2VvZiBGbG9hdDY0QXJyYXkpe2NvbnNvbGUud2FybignVEhSRUUuV2ViR0xBdHRyaWJ1dGVzOiBVbnN1cHBvcnRlZCBkYXRhIGJ1ZmZlciBmb3JtYXQ6IEZsb2F0NjRBcnJheS4nKTt9ZWxzZSBpZihhcnJheSBpbnN0YW5jZW9mIFVpbnQxNkFycmF5KXtpZihhdHRyaWJ1dGUuaXNGbG9hdDE2QnVmZmVyQXR0cmlidXRlKXtpZihpc1dlYkdMMil7dHlwZT01MTMxO31lbHNlIHtjb25zb2xlLndhcm4oJ1RIUkVFLldlYkdMQXR0cmlidXRlczogVXNhZ2Ugb2YgRmxvYXQxNkJ1ZmZlckF0dHJpYnV0ZSByZXF1aXJlcyBXZWJHTDIuJyk7fX1lbHNlIHt0eXBlPTUxMjM7fX1lbHNlIGlmKGFycmF5IGluc3RhbmNlb2YgSW50MTZBcnJheSl7dHlwZT01MTIyO31lbHNlIGlmKGFycmF5IGluc3RhbmNlb2YgVWludDMyQXJyYXkpe3R5cGU9NTEyNTt9ZWxzZSBpZihhcnJheSBpbnN0YW5jZW9mIEludDMyQXJyYXkpe3R5cGU9NTEyNDt9ZWxzZSBpZihhcnJheSBpbnN0YW5jZW9mIEludDhBcnJheSl7dHlwZT01MTIwO31lbHNlIGlmKGFycmF5IGluc3RhbmNlb2YgVWludDhBcnJheSl7dHlwZT01MTIxO31lbHNlIGlmKGFycmF5IGluc3RhbmNlb2YgVWludDhDbGFtcGVkQXJyYXkpe3R5cGU9NTEyMTt9cmV0dXJuIHtidWZmZXI6YnVmZmVyLHR5cGU6dHlwZSxieXRlc1BlckVsZW1lbnQ6YXJyYXkuQllURVNfUEVSX0VMRU1FTlQsdmVyc2lvbjphdHRyaWJ1dGUudmVyc2lvbn07fWZ1bmN0aW9uIHVwZGF0ZUJ1ZmZlcihidWZmZXIsYXR0cmlidXRlLGJ1ZmZlclR5cGUpe2NvbnN0IGFycmF5PWF0dHJpYnV0ZS5hcnJheTtjb25zdCB1cGRhdGVSYW5nZT1hdHRyaWJ1dGUudXBkYXRlUmFuZ2U7Z2wuYmluZEJ1ZmZlcihidWZmZXJUeXBlLGJ1ZmZlcik7aWYodXBkYXRlUmFuZ2UuY291bnQ9PT0tMSl7Ly8gTm90IHVzaW5nIHVwZGF0ZSByYW5nZXMKCWdsLmJ1ZmZlclN1YkRhdGEoYnVmZmVyVHlwZSwwLGFycmF5KTt9ZWxzZSB7aWYoaXNXZWJHTDIpe2dsLmJ1ZmZlclN1YkRhdGEoYnVmZmVyVHlwZSx1cGRhdGVSYW5nZS5vZmZzZXQqYXJyYXkuQllURVNfUEVSX0VMRU1FTlQsYXJyYXksdXBkYXRlUmFuZ2Uub2Zmc2V0LHVwZGF0ZVJhbmdlLmNvdW50KTt9ZWxzZSB7Z2wuYnVmZmVyU3ViRGF0YShidWZmZXJUeXBlLHVwZGF0ZVJhbmdlLm9mZnNldCphcnJheS5CWVRFU19QRVJfRUxFTUVOVCxhcnJheS5zdWJhcnJheSh1cGRhdGVSYW5nZS5vZmZzZXQsdXBkYXRlUmFuZ2Uub2Zmc2V0K3VwZGF0ZVJhbmdlLmNvdW50KSk7fXVwZGF0ZVJhbmdlLmNvdW50PS0xOy8vIHJlc2V0IHJhbmdlCgl9fS8vCglmdW5jdGlvbiBnZXQoYXR0cmlidXRlKXtpZihhdHRyaWJ1dGUuaXNJbnRlcmxlYXZlZEJ1ZmZlckF0dHJpYnV0ZSlhdHRyaWJ1dGU9YXR0cmlidXRlLmRhdGE7cmV0dXJuIGJ1ZmZlcnMuZ2V0KGF0dHJpYnV0ZSk7fWZ1bmN0aW9uIHJlbW92ZShhdHRyaWJ1dGUpe2lmKGF0dHJpYnV0ZS5pc0ludGVybGVhdmVkQnVmZmVyQXR0cmlidXRlKWF0dHJpYnV0ZT1hdHRyaWJ1dGUuZGF0YTtjb25zdCBkYXRhPWJ1ZmZlcnMuZ2V0KGF0dHJpYnV0ZSk7aWYoZGF0YSl7Z2wuZGVsZXRlQnVmZmVyKGRhdGEuYnVmZmVyKTtidWZmZXJzLmRlbGV0ZShhdHRyaWJ1dGUpO319ZnVuY3Rpb24gdXBkYXRlKGF0dHJpYnV0ZSxidWZmZXJUeXBlKXtpZihhdHRyaWJ1dGUuaXNHTEJ1ZmZlckF0dHJpYnV0ZSl7Y29uc3QgY2FjaGVkPWJ1ZmZlcnMuZ2V0KGF0dHJpYnV0ZSk7aWYoIWNhY2hlZHx8Y2FjaGVkLnZlcnNpb248YXR0cmlidXRlLnZlcnNpb24pe2J1ZmZlcnMuc2V0KGF0dHJpYnV0ZSx7YnVmZmVyOmF0dHJpYnV0ZS5idWZmZXIsdHlwZTphdHRyaWJ1dGUudHlwZSxieXRlc1BlckVsZW1lbnQ6YXR0cmlidXRlLmVsZW1lbnRTaXplLHZlcnNpb246YXR0cmlidXRlLnZlcnNpb259KTt9cmV0dXJuO31pZihhdHRyaWJ1dGUuaXNJbnRlcmxlYXZlZEJ1ZmZlckF0dHJpYnV0ZSlhdHRyaWJ1dGU9YXR0cmlidXRlLmRhdGE7Y29uc3QgZGF0YT1idWZmZXJzLmdldChhdHRyaWJ1dGUpO2lmKGRhdGE9PT11bmRlZmluZWQpe2J1ZmZlcnMuc2V0KGF0dHJpYnV0ZSxjcmVhdGVCdWZmZXIoYXR0cmlidXRlLGJ1ZmZlclR5cGUpKTt9ZWxzZSBpZihkYXRhLnZlcnNpb248YXR0cmlidXRlLnZlcnNpb24pe3VwZGF0ZUJ1ZmZlcihkYXRhLmJ1ZmZlcixhdHRyaWJ1dGUsYnVmZmVyVHlwZSk7ZGF0YS52ZXJzaW9uPWF0dHJpYnV0ZS52ZXJzaW9uO319cmV0dXJuIHtnZXQ6Z2V0LHJlbW92ZTpyZW1vdmUsdXBkYXRlOnVwZGF0ZX07fWNsYXNzIFBsYW5lR2VvbWV0cnkgZXh0ZW5kcyBCdWZmZXJHZW9tZXRyeXtjb25zdHJ1Y3Rvcih3aWR0aCxoZWlnaHQsd2lkdGhTZWdtZW50cyxoZWlnaHRTZWdtZW50cyl7aWYod2lkdGg9PT12b2lkIDApe3dpZHRoPTE7fWlmKGhlaWdodD09PXZvaWQgMCl7aGVpZ2h0PTE7fWlmKHdpZHRoU2VnbWVudHM9PT12b2lkIDApe3dpZHRoU2VnbWVudHM9MTt9aWYoaGVpZ2h0U2VnbWVudHM9PT12b2lkIDApe2hlaWdodFNlZ21lbnRzPTE7fXN1cGVyKCk7dGhpcy50eXBlPSdQbGFuZUdlb21ldHJ5Jzt0aGlzLnBhcmFtZXRlcnM9e3dpZHRoOndpZHRoLGhlaWdodDpoZWlnaHQsd2lkdGhTZWdtZW50czp3aWR0aFNlZ21lbnRzLGhlaWdodFNlZ21lbnRzOmhlaWdodFNlZ21lbnRzfTtjb25zdCB3aWR0aF9oYWxmPXdpZHRoLzI7Y29uc3QgaGVpZ2h0X2hhbGY9aGVpZ2h0LzI7Y29uc3QgZ3JpZFg9TWF0aC5mbG9vcih3aWR0aFNlZ21lbnRzKTtjb25zdCBncmlkWT1NYXRoLmZsb29yKGhlaWdodFNlZ21lbnRzKTtjb25zdCBncmlkWDE9Z3JpZFgrMTtjb25zdCBncmlkWTE9Z3JpZFkrMTtjb25zdCBzZWdtZW50X3dpZHRoPXdpZHRoL2dyaWRYO2NvbnN0IHNlZ21lbnRfaGVpZ2h0PWhlaWdodC9ncmlkWTsvLwoJY29uc3QgaW5kaWNlcz1bXTtjb25zdCB2ZXJ0aWNlcz1bXTtjb25zdCBub3JtYWxzPVtdO2NvbnN0IHV2cz1bXTtmb3IobGV0IGl5PTA7aXk8Z3JpZFkxO2l5Kyspe2NvbnN0IHk9aXkqc2VnbWVudF9oZWlnaHQtaGVpZ2h0X2hhbGY7Zm9yKGxldCBpeD0wO2l4PGdyaWRYMTtpeCsrKXtjb25zdCB4PWl4KnNlZ21lbnRfd2lkdGgtd2lkdGhfaGFsZjt2ZXJ0aWNlcy5wdXNoKHgsLXksMCk7bm9ybWFscy5wdXNoKDAsMCwxKTt1dnMucHVzaChpeC9ncmlkWCk7dXZzLnB1c2goMS1peS9ncmlkWSk7fX1mb3IobGV0IGl5PTA7aXk8Z3JpZFk7aXkrKyl7Zm9yKGxldCBpeD0wO2l4PGdyaWRYO2l4Kyspe2NvbnN0IGE9aXgrZ3JpZFgxKml5O2NvbnN0IGI9aXgrZ3JpZFgxKihpeSsxKTtjb25zdCBjPWl4KzErZ3JpZFgxKihpeSsxKTtjb25zdCBkPWl4KzErZ3JpZFgxKml5O2luZGljZXMucHVzaChhLGIsZCk7aW5kaWNlcy5wdXNoKGIsYyxkKTt9fXRoaXMuc2V0SW5kZXgoaW5kaWNlcyk7dGhpcy5zZXRBdHRyaWJ1dGUoJ3Bvc2l0aW9uJyxuZXcgRmxvYXQzMkJ1ZmZlckF0dHJpYnV0ZSh2ZXJ0aWNlcywzKSk7dGhpcy5zZXRBdHRyaWJ1dGUoJ25vcm1hbCcsbmV3IEZsb2F0MzJCdWZmZXJBdHRyaWJ1dGUobm9ybWFscywzKSk7dGhpcy5zZXRBdHRyaWJ1dGUoJ3V2JyxuZXcgRmxvYXQzMkJ1ZmZlckF0dHJpYnV0ZSh1dnMsMikpO31zdGF0aWMgZnJvbUpTT04oZGF0YSl7cmV0dXJuIG5ldyBQbGFuZUdlb21ldHJ5KGRhdGEud2lkdGgsZGF0YS5oZWlnaHQsZGF0YS53aWR0aFNlZ21lbnRzLGRhdGEuaGVpZ2h0U2VnbWVudHMpO319dmFyIGFscGhhbWFwX2ZyYWdtZW50PSIjaWZkZWYgVVNFX0FMUEhBTUFQXG5cdGRpZmZ1c2VDb2xvci5hICo9IHRleHR1cmUyRCggYWxwaGFNYXAsIHZVdiApLmc7XG4jZW5kaWYiO3ZhciBhbHBoYW1hcF9wYXJzX2ZyYWdtZW50PSIjaWZkZWYgVVNFX0FMUEhBTUFQXG5cdHVuaWZvcm0gc2FtcGxlcjJEIGFscGhhTWFwO1xuI2VuZGlmIjt2YXIgYWxwaGF0ZXN0X2ZyYWdtZW50PSIjaWZkZWYgVVNFX0FMUEhBVEVTVFxuXHRpZiAoIGRpZmZ1c2VDb2xvci5hIDwgYWxwaGFUZXN0ICkgZGlzY2FyZDtcbiNlbmRpZiI7dmFyIGFscGhhdGVzdF9wYXJzX2ZyYWdtZW50PSIjaWZkZWYgVVNFX0FMUEhBVEVTVFxuXHR1bmlmb3JtIGZsb2F0IGFscGhhVGVzdDtcbiNlbmRpZiI7dmFyIGFvbWFwX2ZyYWdtZW50PSIjaWZkZWYgVVNFX0FPTUFQXG5cdGZsb2F0IGFtYmllbnRPY2NsdXNpb24gPSAoIHRleHR1cmUyRCggYW9NYXAsIHZVdjIgKS5yIC0gMS4wICkgKiBhb01hcEludGVuc2l0eSArIDEuMDtcblx0cmVmbGVjdGVkTGlnaHQuaW5kaXJlY3REaWZmdXNlICo9IGFtYmllbnRPY2NsdXNpb247XG5cdCNpZiBkZWZpbmVkKCBVU0VfRU5WTUFQICkgJiYgZGVmaW5lZCggU1RBTkRBUkQgKVxuXHRcdGZsb2F0IGRvdE5WID0gc2F0dXJhdGUoIGRvdCggZ2VvbWV0cnkubm9ybWFsLCBnZW9tZXRyeS52aWV3RGlyICkgKTtcblx0XHRyZWZsZWN0ZWRMaWdodC5pbmRpcmVjdFNwZWN1bGFyICo9IGNvbXB1dGVTcGVjdWxhck9jY2x1c2lvbiggZG90TlYsIGFtYmllbnRPY2NsdXNpb24sIG1hdGVyaWFsLnJvdWdobmVzcyApO1xuXHQjZW5kaWZcbiNlbmRpZiI7dmFyIGFvbWFwX3BhcnNfZnJhZ21lbnQ9IiNpZmRlZiBVU0VfQU9NQVBcblx0dW5pZm9ybSBzYW1wbGVyMkQgYW9NYXA7XG5cdHVuaWZvcm0gZmxvYXQgYW9NYXBJbnRlbnNpdHk7XG4jZW5kaWYiO3ZhciBiZWdpbl92ZXJ0ZXg9InZlYzMgdHJhbnNmb3JtZWQgPSB2ZWMzKCBwb3NpdGlvbiApOyI7dmFyIGJlZ2lubm9ybWFsX3ZlcnRleD0idmVjMyBvYmplY3ROb3JtYWwgPSB2ZWMzKCBub3JtYWwgKTtcbiNpZmRlZiBVU0VfVEFOR0VOVFxuXHR2ZWMzIG9iamVjdFRhbmdlbnQgPSB2ZWMzKCB0YW5nZW50Lnh5eiApO1xuI2VuZGlmIjt2YXIgYnNkZnM9InZlYzMgQlJERl9MYW1iZXJ0KCBjb25zdCBpbiB2ZWMzIGRpZmZ1c2VDb2xvciApIHtcblx0cmV0dXJuIFJFQ0lQUk9DQUxfUEkgKiBkaWZmdXNlQ29sb3I7XG59XG52ZWMzIEZfU2NobGljayggY29uc3QgaW4gdmVjMyBmMCwgY29uc3QgaW4gZmxvYXQgZjkwLCBjb25zdCBpbiBmbG9hdCBkb3RWSCApIHtcblx0ZmxvYXQgZnJlc25lbCA9IGV4cDIoICggLSA1LjU1NDczICogZG90VkggLSA2Ljk4MzE2ICkgKiBkb3RWSCApO1xuXHRyZXR1cm4gZjAgKiAoIDEuMCAtIGZyZXNuZWwgKSArICggZjkwICogZnJlc25lbCApO1xufVxuZmxvYXQgVl9HR1hfU21pdGhDb3JyZWxhdGVkKCBjb25zdCBpbiBmbG9hdCBhbHBoYSwgY29uc3QgaW4gZmxvYXQgZG90TkwsIGNvbnN0IGluIGZsb2F0IGRvdE5WICkge1xuXHRmbG9hdCBhMiA9IHBvdzIoIGFscGhhICk7XG5cdGZsb2F0IGd2ID0gZG90TkwgKiBzcXJ0KCBhMiArICggMS4wIC0gYTIgKSAqIHBvdzIoIGRvdE5WICkgKTtcblx0ZmxvYXQgZ2wgPSBkb3ROViAqIHNxcnQoIGEyICsgKCAxLjAgLSBhMiApICogcG93MiggZG90TkwgKSApO1xuXHRyZXR1cm4gMC41IC8gbWF4KCBndiArIGdsLCBFUFNJTE9OICk7XG59XG5mbG9hdCBEX0dHWCggY29uc3QgaW4gZmxvYXQgYWxwaGEsIGNvbnN0IGluIGZsb2F0IGRvdE5IICkge1xuXHRmbG9hdCBhMiA9IHBvdzIoIGFscGhhICk7XG5cdGZsb2F0IGRlbm9tID0gcG93MiggZG90TkggKSAqICggYTIgLSAxLjAgKSArIDEuMDtcblx0cmV0dXJuIFJFQ0lQUk9DQUxfUEkgKiBhMiAvIHBvdzIoIGRlbm9tICk7XG59XG52ZWMzIEJSREZfR0dYKCBjb25zdCBpbiB2ZWMzIGxpZ2h0RGlyLCBjb25zdCBpbiB2ZWMzIHZpZXdEaXIsIGNvbnN0IGluIHZlYzMgbm9ybWFsLCBjb25zdCBpbiB2ZWMzIGYwLCBjb25zdCBpbiBmbG9hdCBmOTAsIGNvbnN0IGluIGZsb2F0IHJvdWdobmVzcyApIHtcblx0ZmxvYXQgYWxwaGEgPSBwb3cyKCByb3VnaG5lc3MgKTtcblx0dmVjMyBoYWxmRGlyID0gbm9ybWFsaXplKCBsaWdodERpciArIHZpZXdEaXIgKTtcblx0ZmxvYXQgZG90TkwgPSBzYXR1cmF0ZSggZG90KCBub3JtYWwsIGxpZ2h0RGlyICkgKTtcblx0ZmxvYXQgZG90TlYgPSBzYXR1cmF0ZSggZG90KCBub3JtYWwsIHZpZXdEaXIgKSApO1xuXHRmbG9hdCBkb3ROSCA9IHNhdHVyYXRlKCBkb3QoIG5vcm1hbCwgaGFsZkRpciApICk7XG5cdGZsb2F0IGRvdFZIID0gc2F0dXJhdGUoIGRvdCggdmlld0RpciwgaGFsZkRpciApICk7XG5cdHZlYzMgRiA9IEZfU2NobGljayggZjAsIGY5MCwgZG90VkggKTtcblx0ZmxvYXQgViA9IFZfR0dYX1NtaXRoQ29ycmVsYXRlZCggYWxwaGEsIGRvdE5MLCBkb3ROViApO1xuXHRmbG9hdCBEID0gRF9HR1goIGFscGhhLCBkb3ROSCApO1xuXHRyZXR1cm4gRiAqICggViAqIEQgKTtcbn1cbnZlYzIgTFRDX1V2KCBjb25zdCBpbiB2ZWMzIE4sIGNvbnN0IGluIHZlYzMgViwgY29uc3QgaW4gZmxvYXQgcm91Z2huZXNzICkge1xuXHRjb25zdCBmbG9hdCBMVVRfU0laRSA9IDY0LjA7XG5cdGNvbnN0IGZsb2F0IExVVF9TQ0FMRSA9ICggTFVUX1NJWkUgLSAxLjAgKSAvIExVVF9TSVpFO1xuXHRjb25zdCBmbG9hdCBMVVRfQklBUyA9IDAuNSAvIExVVF9TSVpFO1xuXHRmbG9hdCBkb3ROViA9IHNhdHVyYXRlKCBkb3QoIE4sIFYgKSApO1xuXHR2ZWMyIHV2ID0gdmVjMiggcm91Z2huZXNzLCBzcXJ0KCAxLjAgLSBkb3ROViApICk7XG5cdHV2ID0gdXYgKiBMVVRfU0NBTEUgKyBMVVRfQklBUztcblx0cmV0dXJuIHV2O1xufVxuZmxvYXQgTFRDX0NsaXBwZWRTcGhlcmVGb3JtRmFjdG9yKCBjb25zdCBpbiB2ZWMzIGYgKSB7XG5cdGZsb2F0IGwgPSBsZW5ndGgoIGYgKTtcblx0cmV0dXJuIG1heCggKCBsICogbCArIGYueiApIC8gKCBsICsgMS4wICksIDAuMCApO1xufVxudmVjMyBMVENfRWRnZVZlY3RvckZvcm1GYWN0b3IoIGNvbnN0IGluIHZlYzMgdjEsIGNvbnN0IGluIHZlYzMgdjIgKSB7XG5cdGZsb2F0IHggPSBkb3QoIHYxLCB2MiApO1xuXHRmbG9hdCB5ID0gYWJzKCB4ICk7XG5cdGZsb2F0IGEgPSAwLjg1NDM5ODUgKyAoIDAuNDk2NTE1NSArIDAuMDE0NTIwNiAqIHkgKSAqIHk7XG5cdGZsb2F0IGIgPSAzLjQxNzU5NDAgKyAoIDQuMTYxNjcyNCArIHkgKSAqIHk7XG5cdGZsb2F0IHYgPSBhIC8gYjtcblx0ZmxvYXQgdGhldGFfc2ludGhldGEgPSAoIHggPiAwLjAgKSA/IHYgOiAwLjUgKiBpbnZlcnNlc3FydCggbWF4KCAxLjAgLSB4ICogeCwgMWUtNyApICkgLSB2O1xuXHRyZXR1cm4gY3Jvc3MoIHYxLCB2MiApICogdGhldGFfc2ludGhldGE7XG59XG52ZWMzIExUQ19FdmFsdWF0ZSggY29uc3QgaW4gdmVjMyBOLCBjb25zdCBpbiB2ZWMzIFYsIGNvbnN0IGluIHZlYzMgUCwgY29uc3QgaW4gbWF0MyBtSW52LCBjb25zdCBpbiB2ZWMzIHJlY3RDb29yZHNbIDQgXSApIHtcblx0dmVjMyB2MSA9IHJlY3RDb29yZHNbIDEgXSAtIHJlY3RDb29yZHNbIDAgXTtcblx0dmVjMyB2MiA9IHJlY3RDb29yZHNbIDMgXSAtIHJlY3RDb29yZHNbIDAgXTtcblx0dmVjMyBsaWdodE5vcm1hbCA9IGNyb3NzKCB2MSwgdjIgKTtcblx0aWYoIGRvdCggbGlnaHROb3JtYWwsIFAgLSByZWN0Q29vcmRzWyAwIF0gKSA8IDAuMCApIHJldHVybiB2ZWMzKCAwLjAgKTtcblx0dmVjMyBUMSwgVDI7XG5cdFQxID0gbm9ybWFsaXplKCBWIC0gTiAqIGRvdCggViwgTiApICk7XG5cdFQyID0gLSBjcm9zcyggTiwgVDEgKTtcblx0bWF0MyBtYXQgPSBtSW52ICogdHJhbnNwb3NlTWF0MyggbWF0MyggVDEsIFQyLCBOICkgKTtcblx0dmVjMyBjb29yZHNbIDQgXTtcblx0Y29vcmRzWyAwIF0gPSBtYXQgKiAoIHJlY3RDb29yZHNbIDAgXSAtIFAgKTtcblx0Y29vcmRzWyAxIF0gPSBtYXQgKiAoIHJlY3RDb29yZHNbIDEgXSAtIFAgKTtcblx0Y29vcmRzWyAyIF0gPSBtYXQgKiAoIHJlY3RDb29yZHNbIDIgXSAtIFAgKTtcblx0Y29vcmRzWyAzIF0gPSBtYXQgKiAoIHJlY3RDb29yZHNbIDMgXSAtIFAgKTtcblx0Y29vcmRzWyAwIF0gPSBub3JtYWxpemUoIGNvb3Jkc1sgMCBdICk7XG5cdGNvb3Jkc1sgMSBdID0gbm9ybWFsaXplKCBjb29yZHNbIDEgXSApO1xuXHRjb29yZHNbIDIgXSA9IG5vcm1hbGl6ZSggY29vcmRzWyAyIF0gKTtcblx0Y29vcmRzWyAzIF0gPSBub3JtYWxpemUoIGNvb3Jkc1sgMyBdICk7XG5cdHZlYzMgdmVjdG9yRm9ybUZhY3RvciA9IHZlYzMoIDAuMCApO1xuXHR2ZWN0b3JGb3JtRmFjdG9yICs9IExUQ19FZGdlVmVjdG9yRm9ybUZhY3RvciggY29vcmRzWyAwIF0sIGNvb3Jkc1sgMSBdICk7XG5cdHZlY3RvckZvcm1GYWN0b3IgKz0gTFRDX0VkZ2VWZWN0b3JGb3JtRmFjdG9yKCBjb29yZHNbIDEgXSwgY29vcmRzWyAyIF0gKTtcblx0dmVjdG9yRm9ybUZhY3RvciArPSBMVENfRWRnZVZlY3RvckZvcm1GYWN0b3IoIGNvb3Jkc1sgMiBdLCBjb29yZHNbIDMgXSApO1xuXHR2ZWN0b3JGb3JtRmFjdG9yICs9IExUQ19FZGdlVmVjdG9yRm9ybUZhY3RvciggY29vcmRzWyAzIF0sIGNvb3Jkc1sgMCBdICk7XG5cdGZsb2F0IHJlc3VsdCA9IExUQ19DbGlwcGVkU3BoZXJlRm9ybUZhY3RvciggdmVjdG9yRm9ybUZhY3RvciApO1xuXHRyZXR1cm4gdmVjMyggcmVzdWx0ICk7XG59XG5mbG9hdCBHX0JsaW5uUGhvbmdfSW1wbGljaXQoICkge1xuXHRyZXR1cm4gMC4yNTtcbn1cbmZsb2F0IERfQmxpbm5QaG9uZyggY29uc3QgaW4gZmxvYXQgc2hpbmluZXNzLCBjb25zdCBpbiBmbG9hdCBkb3ROSCApIHtcblx0cmV0dXJuIFJFQ0lQUk9DQUxfUEkgKiAoIHNoaW5pbmVzcyAqIDAuNSArIDEuMCApICogcG93KCBkb3ROSCwgc2hpbmluZXNzICk7XG59XG52ZWMzIEJSREZfQmxpbm5QaG9uZyggY29uc3QgaW4gdmVjMyBsaWdodERpciwgY29uc3QgaW4gdmVjMyB2aWV3RGlyLCBjb25zdCBpbiB2ZWMzIG5vcm1hbCwgY29uc3QgaW4gdmVjMyBzcGVjdWxhckNvbG9yLCBjb25zdCBpbiBmbG9hdCBzaGluaW5lc3MgKSB7XG5cdHZlYzMgaGFsZkRpciA9IG5vcm1hbGl6ZSggbGlnaHREaXIgKyB2aWV3RGlyICk7XG5cdGZsb2F0IGRvdE5IID0gc2F0dXJhdGUoIGRvdCggbm9ybWFsLCBoYWxmRGlyICkgKTtcblx0ZmxvYXQgZG90VkggPSBzYXR1cmF0ZSggZG90KCB2aWV3RGlyLCBoYWxmRGlyICkgKTtcblx0dmVjMyBGID0gRl9TY2hsaWNrKCBzcGVjdWxhckNvbG9yLCAxLjAsIGRvdFZIICk7XG5cdGZsb2F0IEcgPSBHX0JsaW5uUGhvbmdfSW1wbGljaXQoICk7XG5cdGZsb2F0IEQgPSBEX0JsaW5uUGhvbmcoIHNoaW5pbmVzcywgZG90TkggKTtcblx0cmV0dXJuIEYgKiAoIEcgKiBEICk7XG59XG4jaWYgZGVmaW5lZCggVVNFX1NIRUVOIClcbmZsb2F0IERfQ2hhcmxpZSggZmxvYXQgcm91Z2huZXNzLCBmbG9hdCBkb3ROSCApIHtcblx0ZmxvYXQgYWxwaGEgPSBwb3cyKCByb3VnaG5lc3MgKTtcblx0ZmxvYXQgaW52QWxwaGEgPSAxLjAgLyBhbHBoYTtcblx0ZmxvYXQgY29zMmggPSBkb3ROSCAqIGRvdE5IO1xuXHRmbG9hdCBzaW4yaCA9IG1heCggMS4wIC0gY29zMmgsIDAuMDA3ODEyNSApO1xuXHRyZXR1cm4gKCAyLjAgKyBpbnZBbHBoYSApICogcG93KCBzaW4yaCwgaW52QWxwaGEgKiAwLjUgKSAvICggMi4wICogUEkgKTtcbn1cbmZsb2F0IFZfTmV1YmVsdCggZmxvYXQgZG90TlYsIGZsb2F0IGRvdE5MICkge1xuXHRyZXR1cm4gc2F0dXJhdGUoIDEuMCAvICggNC4wICogKCBkb3ROTCArIGRvdE5WIC0gZG90TkwgKiBkb3ROViApICkgKTtcbn1cbnZlYzMgQlJERl9TaGVlbiggY29uc3QgaW4gdmVjMyBsaWdodERpciwgY29uc3QgaW4gdmVjMyB2aWV3RGlyLCBjb25zdCBpbiB2ZWMzIG5vcm1hbCwgdmVjMyBzaGVlbkNvbG9yLCBjb25zdCBpbiBmbG9hdCBzaGVlblJvdWdobmVzcyApIHtcblx0dmVjMyBoYWxmRGlyID0gbm9ybWFsaXplKCBsaWdodERpciArIHZpZXdEaXIgKTtcblx0ZmxvYXQgZG90TkwgPSBzYXR1cmF0ZSggZG90KCBub3JtYWwsIGxpZ2h0RGlyICkgKTtcblx0ZmxvYXQgZG90TlYgPSBzYXR1cmF0ZSggZG90KCBub3JtYWwsIHZpZXdEaXIgKSApO1xuXHRmbG9hdCBkb3ROSCA9IHNhdHVyYXRlKCBkb3QoIG5vcm1hbCwgaGFsZkRpciApICk7XG5cdGZsb2F0IEQgPSBEX0NoYXJsaWUoIHNoZWVuUm91Z2huZXNzLCBkb3ROSCApO1xuXHRmbG9hdCBWID0gVl9OZXViZWx0KCBkb3ROViwgZG90TkwgKTtcblx0cmV0dXJuIHNoZWVuQ29sb3IgKiAoIEQgKiBWICk7XG59XG4jZW5kaWYiO3ZhciBidW1wbWFwX3BhcnNfZnJhZ21lbnQ9IiNpZmRlZiBVU0VfQlVNUE1BUFxuXHR1bmlmb3JtIHNhbXBsZXIyRCBidW1wTWFwO1xuXHR1bmlmb3JtIGZsb2F0IGJ1bXBTY2FsZTtcblx0dmVjMiBkSGR4eV9md2QoKSB7XG5cdFx0dmVjMiBkU1RkeCA9IGRGZHgoIHZVdiApO1xuXHRcdHZlYzIgZFNUZHkgPSBkRmR5KCB2VXYgKTtcblx0XHRmbG9hdCBIbGwgPSBidW1wU2NhbGUgKiB0ZXh0dXJlMkQoIGJ1bXBNYXAsIHZVdiApLng7XG5cdFx0ZmxvYXQgZEJ4ID0gYnVtcFNjYWxlICogdGV4dHVyZTJEKCBidW1wTWFwLCB2VXYgKyBkU1RkeCApLnggLSBIbGw7XG5cdFx0ZmxvYXQgZEJ5ID0gYnVtcFNjYWxlICogdGV4dHVyZTJEKCBidW1wTWFwLCB2VXYgKyBkU1RkeSApLnggLSBIbGw7XG5cdFx0cmV0dXJuIHZlYzIoIGRCeCwgZEJ5ICk7XG5cdH1cblx0dmVjMyBwZXJ0dXJiTm9ybWFsQXJiKCB2ZWMzIHN1cmZfcG9zLCB2ZWMzIHN1cmZfbm9ybSwgdmVjMiBkSGR4eSwgZmxvYXQgZmFjZURpcmVjdGlvbiApIHtcblx0XHR2ZWMzIHZTaWdtYVggPSB2ZWMzKCBkRmR4KCBzdXJmX3Bvcy54ICksIGRGZHgoIHN1cmZfcG9zLnkgKSwgZEZkeCggc3VyZl9wb3MueiApICk7XG5cdFx0dmVjMyB2U2lnbWFZID0gdmVjMyggZEZkeSggc3VyZl9wb3MueCApLCBkRmR5KCBzdXJmX3Bvcy55ICksIGRGZHkoIHN1cmZfcG9zLnogKSApO1xuXHRcdHZlYzMgdk4gPSBzdXJmX25vcm07XG5cdFx0dmVjMyBSMSA9IGNyb3NzKCB2U2lnbWFZLCB2TiApO1xuXHRcdHZlYzMgUjIgPSBjcm9zcyggdk4sIHZTaWdtYVggKTtcblx0XHRmbG9hdCBmRGV0ID0gZG90KCB2U2lnbWFYLCBSMSApICogZmFjZURpcmVjdGlvbjtcblx0XHR2ZWMzIHZHcmFkID0gc2lnbiggZkRldCApICogKCBkSGR4eS54ICogUjEgKyBkSGR4eS55ICogUjIgKTtcblx0XHRyZXR1cm4gbm9ybWFsaXplKCBhYnMoIGZEZXQgKSAqIHN1cmZfbm9ybSAtIHZHcmFkICk7XG5cdH1cbiNlbmRpZiI7dmFyIGNsaXBwaW5nX3BsYW5lc19mcmFnbWVudD0iI2lmIE5VTV9DTElQUElOR19QTEFORVMgPiAwXG5cdHZlYzQgcGxhbmU7XG5cdCNwcmFnbWEgdW5yb2xsX2xvb3Bfc3RhcnRcblx0Zm9yICggaW50IGkgPSAwOyBpIDwgVU5JT05fQ0xJUFBJTkdfUExBTkVTOyBpICsrICkge1xuXHRcdHBsYW5lID0gY2xpcHBpbmdQbGFuZXNbIGkgXTtcblx0XHRpZiAoIGRvdCggdkNsaXBQb3NpdGlvbiwgcGxhbmUueHl6ICkgPiBwbGFuZS53ICkgZGlzY2FyZDtcblx0fVxuXHQjcHJhZ21hIHVucm9sbF9sb29wX2VuZFxuXHQjaWYgVU5JT05fQ0xJUFBJTkdfUExBTkVTIDwgTlVNX0NMSVBQSU5HX1BMQU5FU1xuXHRcdGJvb2wgY2xpcHBlZCA9IHRydWU7XG5cdFx0I3ByYWdtYSB1bnJvbGxfbG9vcF9zdGFydFxuXHRcdGZvciAoIGludCBpID0gVU5JT05fQ0xJUFBJTkdfUExBTkVTOyBpIDwgTlVNX0NMSVBQSU5HX1BMQU5FUzsgaSArKyApIHtcblx0XHRcdHBsYW5lID0gY2xpcHBpbmdQbGFuZXNbIGkgXTtcblx0XHRcdGNsaXBwZWQgPSAoIGRvdCggdkNsaXBQb3NpdGlvbiwgcGxhbmUueHl6ICkgPiBwbGFuZS53ICkgJiYgY2xpcHBlZDtcblx0XHR9XG5cdFx0I3ByYWdtYSB1bnJvbGxfbG9vcF9lbmRcblx0XHRpZiAoIGNsaXBwZWQgKSBkaXNjYXJkO1xuXHQjZW5kaWZcbiNlbmRpZiI7dmFyIGNsaXBwaW5nX3BsYW5lc19wYXJzX2ZyYWdtZW50PSIjaWYgTlVNX0NMSVBQSU5HX1BMQU5FUyA+IDBcblx0dmFyeWluZyB2ZWMzIHZDbGlwUG9zaXRpb247XG5cdHVuaWZvcm0gdmVjNCBjbGlwcGluZ1BsYW5lc1sgTlVNX0NMSVBQSU5HX1BMQU5FUyBdO1xuI2VuZGlmIjt2YXIgY2xpcHBpbmdfcGxhbmVzX3BhcnNfdmVydGV4PSIjaWYgTlVNX0NMSVBQSU5HX1BMQU5FUyA+IDBcblx0dmFyeWluZyB2ZWMzIHZDbGlwUG9zaXRpb247XG4jZW5kaWYiO3ZhciBjbGlwcGluZ19wbGFuZXNfdmVydGV4PSIjaWYgTlVNX0NMSVBQSU5HX1BMQU5FUyA+IDBcblx0dkNsaXBQb3NpdGlvbiA9IC0gbXZQb3NpdGlvbi54eXo7XG4jZW5kaWYiO3ZhciBjb2xvcl9mcmFnbWVudD0iI2lmIGRlZmluZWQoIFVTRV9DT0xPUl9BTFBIQSApXG5cdGRpZmZ1c2VDb2xvciAqPSB2Q29sb3I7XG4jZWxpZiBkZWZpbmVkKCBVU0VfQ09MT1IgKVxuXHRkaWZmdXNlQ29sb3IucmdiICo9IHZDb2xvcjtcbiNlbmRpZiI7dmFyIGNvbG9yX3BhcnNfZnJhZ21lbnQ9IiNpZiBkZWZpbmVkKCBVU0VfQ09MT1JfQUxQSEEgKVxuXHR2YXJ5aW5nIHZlYzQgdkNvbG9yO1xuI2VsaWYgZGVmaW5lZCggVVNFX0NPTE9SIClcblx0dmFyeWluZyB2ZWMzIHZDb2xvcjtcbiNlbmRpZiI7dmFyIGNvbG9yX3BhcnNfdmVydGV4PSIjaWYgZGVmaW5lZCggVVNFX0NPTE9SX0FMUEhBIClcblx0dmFyeWluZyB2ZWM0IHZDb2xvcjtcbiNlbGlmIGRlZmluZWQoIFVTRV9DT0xPUiApIHx8IGRlZmluZWQoIFVTRV9JTlNUQU5DSU5HX0NPTE9SIClcblx0dmFyeWluZyB2ZWMzIHZDb2xvcjtcbiNlbmRpZiI7dmFyIGNvbG9yX3ZlcnRleD0iI2lmIGRlZmluZWQoIFVTRV9DT0xPUl9BTFBIQSApXG5cdHZDb2xvciA9IHZlYzQoIDEuMCApO1xuI2VsaWYgZGVmaW5lZCggVVNFX0NPTE9SICkgfHwgZGVmaW5lZCggVVNFX0lOU1RBTkNJTkdfQ09MT1IgKVxuXHR2Q29sb3IgPSB2ZWMzKCAxLjAgKTtcbiNlbmRpZlxuI2lmZGVmIFVTRV9DT0xPUlxuXHR2Q29sb3IgKj0gY29sb3I7XG4jZW5kaWZcbiNpZmRlZiBVU0VfSU5TVEFOQ0lOR19DT0xPUlxuXHR2Q29sb3IueHl6ICo9IGluc3RhbmNlQ29sb3IueHl6O1xuI2VuZGlmIjt2YXIgY29tbW9uPSIjZGVmaW5lIFBJIDMuMTQxNTkyNjUzNTg5NzkzXG4jZGVmaW5lIFBJMiA2LjI4MzE4NTMwNzE3OTU4NlxuI2RlZmluZSBQSV9IQUxGIDEuNTcwNzk2MzI2Nzk0ODk2NlxuI2RlZmluZSBSRUNJUFJPQ0FMX1BJIDAuMzE4MzA5ODg2MTgzNzkwN1xuI2RlZmluZSBSRUNJUFJPQ0FMX1BJMiAwLjE1OTE1NDk0MzA5MTg5NTM1XG4jZGVmaW5lIEVQU0lMT04gMWUtNlxuI2lmbmRlZiBzYXR1cmF0ZVxuI2RlZmluZSBzYXR1cmF0ZSggYSApIGNsYW1wKCBhLCAwLjAsIDEuMCApXG4jZW5kaWZcbiNkZWZpbmUgd2hpdGVDb21wbGVtZW50KCBhICkgKCAxLjAgLSBzYXR1cmF0ZSggYSApIClcbmZsb2F0IHBvdzIoIGNvbnN0IGluIGZsb2F0IHggKSB7IHJldHVybiB4Kng7IH1cbmZsb2F0IHBvdzMoIGNvbnN0IGluIGZsb2F0IHggKSB7IHJldHVybiB4KngqeDsgfVxuZmxvYXQgcG93NCggY29uc3QgaW4gZmxvYXQgeCApIHsgZmxvYXQgeDIgPSB4Kng7IHJldHVybiB4Mip4MjsgfVxuZmxvYXQgbWF4MyggY29uc3QgaW4gdmVjMyB2ICkgeyByZXR1cm4gbWF4KCBtYXgoIHYueCwgdi55ICksIHYueiApOyB9XG5mbG9hdCBhdmVyYWdlKCBjb25zdCBpbiB2ZWMzIGNvbG9yICkgeyByZXR1cm4gZG90KCBjb2xvciwgdmVjMyggMC4zMzMzICkgKTsgfVxuaGlnaHAgZmxvYXQgcmFuZCggY29uc3QgaW4gdmVjMiB1diApIHtcblx0Y29uc3QgaGlnaHAgZmxvYXQgYSA9IDEyLjk4OTgsIGIgPSA3OC4yMzMsIGMgPSA0Mzc1OC41NDUzO1xuXHRoaWdocCBmbG9hdCBkdCA9IGRvdCggdXYueHksIHZlYzIoIGEsYiApICksIHNuID0gbW9kKCBkdCwgUEkgKTtcblx0cmV0dXJuIGZyYWN0KCBzaW4oIHNuICkgKiBjICk7XG59XG4jaWZkZWYgSElHSF9QUkVDSVNJT05cblx0ZmxvYXQgcHJlY2lzaW9uU2FmZUxlbmd0aCggdmVjMyB2ICkgeyByZXR1cm4gbGVuZ3RoKCB2ICk7IH1cbiNlbHNlXG5cdGZsb2F0IHByZWNpc2lvblNhZmVMZW5ndGgoIHZlYzMgdiApIHtcblx0XHRmbG9hdCBtYXhDb21wb25lbnQgPSBtYXgzKCBhYnMoIHYgKSApO1xuXHRcdHJldHVybiBsZW5ndGgoIHYgLyBtYXhDb21wb25lbnQgKSAqIG1heENvbXBvbmVudDtcblx0fVxuI2VuZGlmXG5zdHJ1Y3QgSW5jaWRlbnRMaWdodCB7XG5cdHZlYzMgY29sb3I7XG5cdHZlYzMgZGlyZWN0aW9uO1xuXHRib29sIHZpc2libGU7XG59O1xuc3RydWN0IFJlZmxlY3RlZExpZ2h0IHtcblx0dmVjMyBkaXJlY3REaWZmdXNlO1xuXHR2ZWMzIGRpcmVjdFNwZWN1bGFyO1xuXHR2ZWMzIGluZGlyZWN0RGlmZnVzZTtcblx0dmVjMyBpbmRpcmVjdFNwZWN1bGFyO1xufTtcbnN0cnVjdCBHZW9tZXRyaWNDb250ZXh0IHtcblx0dmVjMyBwb3NpdGlvbjtcblx0dmVjMyBub3JtYWw7XG5cdHZlYzMgdmlld0RpcjtcbiNpZmRlZiBVU0VfQ0xFQVJDT0FUXG5cdHZlYzMgY2xlYXJjb2F0Tm9ybWFsO1xuI2VuZGlmXG59O1xudmVjMyB0cmFuc2Zvcm1EaXJlY3Rpb24oIGluIHZlYzMgZGlyLCBpbiBtYXQ0IG1hdHJpeCApIHtcblx0cmV0dXJuIG5vcm1hbGl6ZSggKCBtYXRyaXggKiB2ZWM0KCBkaXIsIDAuMCApICkueHl6ICk7XG59XG52ZWMzIGludmVyc2VUcmFuc2Zvcm1EaXJlY3Rpb24oIGluIHZlYzMgZGlyLCBpbiBtYXQ0IG1hdHJpeCApIHtcblx0cmV0dXJuIG5vcm1hbGl6ZSggKCB2ZWM0KCBkaXIsIDAuMCApICogbWF0cml4ICkueHl6ICk7XG59XG5tYXQzIHRyYW5zcG9zZU1hdDMoIGNvbnN0IGluIG1hdDMgbSApIHtcblx0bWF0MyB0bXA7XG5cdHRtcFsgMCBdID0gdmVjMyggbVsgMCBdLngsIG1bIDEgXS54LCBtWyAyIF0ueCApO1xuXHR0bXBbIDEgXSA9IHZlYzMoIG1bIDAgXS55LCBtWyAxIF0ueSwgbVsgMiBdLnkgKTtcblx0dG1wWyAyIF0gPSB2ZWMzKCBtWyAwIF0ueiwgbVsgMSBdLnosIG1bIDIgXS56ICk7XG5cdHJldHVybiB0bXA7XG59XG5mbG9hdCBsaW5lYXJUb1JlbGF0aXZlTHVtaW5hbmNlKCBjb25zdCBpbiB2ZWMzIGNvbG9yICkge1xuXHR2ZWMzIHdlaWdodHMgPSB2ZWMzKCAwLjIxMjYsIDAuNzE1MiwgMC4wNzIyICk7XG5cdHJldHVybiBkb3QoIHdlaWdodHMsIGNvbG9yLnJnYiApO1xufVxuYm9vbCBpc1BlcnNwZWN0aXZlTWF0cml4KCBtYXQ0IG0gKSB7XG5cdHJldHVybiBtWyAyIF1bIDMgXSA9PSAtIDEuMDtcbn1cbnZlYzIgZXF1aXJlY3RVdiggaW4gdmVjMyBkaXIgKSB7XG5cdGZsb2F0IHUgPSBhdGFuKCBkaXIueiwgZGlyLnggKSAqIFJFQ0lQUk9DQUxfUEkyICsgMC41O1xuXHRmbG9hdCB2ID0gYXNpbiggY2xhbXAoIGRpci55LCAtIDEuMCwgMS4wICkgKSAqIFJFQ0lQUk9DQUxfUEkgKyAwLjU7XG5cdHJldHVybiB2ZWMyKCB1LCB2ICk7XG59Ijt2YXIgY3ViZV91dl9yZWZsZWN0aW9uX2ZyYWdtZW50PSIjaWZkZWYgRU5WTUFQX1RZUEVfQ1VCRV9VVlxuXHQjZGVmaW5lIGN1YmVVVl9tYXhNaXBMZXZlbCA4LjBcblx0I2RlZmluZSBjdWJlVVZfbWluTWlwTGV2ZWwgNC4wXG5cdCNkZWZpbmUgY3ViZVVWX21heFRpbGVTaXplIDI1Ni4wXG5cdCNkZWZpbmUgY3ViZVVWX21pblRpbGVTaXplIDE2LjBcblx0ZmxvYXQgZ2V0RmFjZSggdmVjMyBkaXJlY3Rpb24gKSB7XG5cdFx0dmVjMyBhYnNEaXJlY3Rpb24gPSBhYnMoIGRpcmVjdGlvbiApO1xuXHRcdGZsb2F0IGZhY2UgPSAtIDEuMDtcblx0XHRpZiAoIGFic0RpcmVjdGlvbi54ID4gYWJzRGlyZWN0aW9uLnogKSB7XG5cdFx0XHRpZiAoIGFic0RpcmVjdGlvbi54ID4gYWJzRGlyZWN0aW9uLnkgKVxuXHRcdFx0XHRmYWNlID0gZGlyZWN0aW9uLnggPiAwLjAgPyAwLjAgOiAzLjA7XG5cdFx0XHRlbHNlXG5cdFx0XHRcdGZhY2UgPSBkaXJlY3Rpb24ueSA+IDAuMCA/IDEuMCA6IDQuMDtcblx0XHR9IGVsc2Uge1xuXHRcdFx0aWYgKCBhYnNEaXJlY3Rpb24ueiA+IGFic0RpcmVjdGlvbi55IClcblx0XHRcdFx0ZmFjZSA9IGRpcmVjdGlvbi56ID4gMC4wID8gMi4wIDogNS4wO1xuXHRcdFx0ZWxzZVxuXHRcdFx0XHRmYWNlID0gZGlyZWN0aW9uLnkgPiAwLjAgPyAxLjAgOiA0LjA7XG5cdFx0fVxuXHRcdHJldHVybiBmYWNlO1xuXHR9XG5cdHZlYzIgZ2V0VVYoIHZlYzMgZGlyZWN0aW9uLCBmbG9hdCBmYWNlICkge1xuXHRcdHZlYzIgdXY7XG5cdFx0aWYgKCBmYWNlID09IDAuMCApIHtcblx0XHRcdHV2ID0gdmVjMiggZGlyZWN0aW9uLnosIGRpcmVjdGlvbi55ICkgLyBhYnMoIGRpcmVjdGlvbi54ICk7XG5cdFx0fSBlbHNlIGlmICggZmFjZSA9PSAxLjAgKSB7XG5cdFx0XHR1diA9IHZlYzIoIC0gZGlyZWN0aW9uLngsIC0gZGlyZWN0aW9uLnogKSAvIGFicyggZGlyZWN0aW9uLnkgKTtcblx0XHR9IGVsc2UgaWYgKCBmYWNlID09IDIuMCApIHtcblx0XHRcdHV2ID0gdmVjMiggLSBkaXJlY3Rpb24ueCwgZGlyZWN0aW9uLnkgKSAvIGFicyggZGlyZWN0aW9uLnogKTtcblx0XHR9IGVsc2UgaWYgKCBmYWNlID09IDMuMCApIHtcblx0XHRcdHV2ID0gdmVjMiggLSBkaXJlY3Rpb24ueiwgZGlyZWN0aW9uLnkgKSAvIGFicyggZGlyZWN0aW9uLnggKTtcblx0XHR9IGVsc2UgaWYgKCBmYWNlID09IDQuMCApIHtcblx0XHRcdHV2ID0gdmVjMiggLSBkaXJlY3Rpb24ueCwgZGlyZWN0aW9uLnogKSAvIGFicyggZGlyZWN0aW9uLnkgKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dXYgPSB2ZWMyKCBkaXJlY3Rpb24ueCwgZGlyZWN0aW9uLnkgKSAvIGFicyggZGlyZWN0aW9uLnogKTtcblx0XHR9XG5cdFx0cmV0dXJuIDAuNSAqICggdXYgKyAxLjAgKTtcblx0fVxuXHR2ZWMzIGJpbGluZWFyQ3ViZVVWKCBzYW1wbGVyMkQgZW52TWFwLCB2ZWMzIGRpcmVjdGlvbiwgZmxvYXQgbWlwSW50ICkge1xuXHRcdGZsb2F0IGZhY2UgPSBnZXRGYWNlKCBkaXJlY3Rpb24gKTtcblx0XHRmbG9hdCBmaWx0ZXJJbnQgPSBtYXgoIGN1YmVVVl9taW5NaXBMZXZlbCAtIG1pcEludCwgMC4wICk7XG5cdFx0bWlwSW50ID0gbWF4KCBtaXBJbnQsIGN1YmVVVl9taW5NaXBMZXZlbCApO1xuXHRcdGZsb2F0IGZhY2VTaXplID0gZXhwMiggbWlwSW50ICk7XG5cdFx0ZmxvYXQgdGV4ZWxTaXplID0gMS4wIC8gKCAzLjAgKiBjdWJlVVZfbWF4VGlsZVNpemUgKTtcblx0XHR2ZWMyIHV2ID0gZ2V0VVYoIGRpcmVjdGlvbiwgZmFjZSApICogKCBmYWNlU2l6ZSAtIDEuMCApO1xuXHRcdHZlYzIgZiA9IGZyYWN0KCB1diApO1xuXHRcdHV2ICs9IDAuNSAtIGY7XG5cdFx0aWYgKCBmYWNlID4gMi4wICkge1xuXHRcdFx0dXYueSArPSBmYWNlU2l6ZTtcblx0XHRcdGZhY2UgLT0gMy4wO1xuXHRcdH1cblx0XHR1di54ICs9IGZhY2UgKiBmYWNlU2l6ZTtcblx0XHRpZiAoIG1pcEludCA8IGN1YmVVVl9tYXhNaXBMZXZlbCApIHtcblx0XHRcdHV2LnkgKz0gMi4wICogY3ViZVVWX21heFRpbGVTaXplO1xuXHRcdH1cblx0XHR1di55ICs9IGZpbHRlckludCAqIDIuMCAqIGN1YmVVVl9taW5UaWxlU2l6ZTtcblx0XHR1di54ICs9IDMuMCAqIG1heCggMC4wLCBjdWJlVVZfbWF4VGlsZVNpemUgLSAyLjAgKiBmYWNlU2l6ZSApO1xuXHRcdHV2ICo9IHRleGVsU2l6ZTtcblx0XHR2ZWMzIHRsID0gZW52TWFwVGV4ZWxUb0xpbmVhciggdGV4dHVyZTJEKCBlbnZNYXAsIHV2ICkgKS5yZ2I7XG5cdFx0dXYueCArPSB0ZXhlbFNpemU7XG5cdFx0dmVjMyB0ciA9IGVudk1hcFRleGVsVG9MaW5lYXIoIHRleHR1cmUyRCggZW52TWFwLCB1diApICkucmdiO1xuXHRcdHV2LnkgKz0gdGV4ZWxTaXplO1xuXHRcdHZlYzMgYnIgPSBlbnZNYXBUZXhlbFRvTGluZWFyKCB0ZXh0dXJlMkQoIGVudk1hcCwgdXYgKSApLnJnYjtcblx0XHR1di54IC09IHRleGVsU2l6ZTtcblx0XHR2ZWMzIGJsID0gZW52TWFwVGV4ZWxUb0xpbmVhciggdGV4dHVyZTJEKCBlbnZNYXAsIHV2ICkgKS5yZ2I7XG5cdFx0dmVjMyB0bSA9IG1peCggdGwsIHRyLCBmLnggKTtcblx0XHR2ZWMzIGJtID0gbWl4KCBibCwgYnIsIGYueCApO1xuXHRcdHJldHVybiBtaXgoIHRtLCBibSwgZi55ICk7XG5cdH1cblx0I2RlZmluZSByMCAxLjBcblx0I2RlZmluZSB2MCAwLjMzOVxuXHQjZGVmaW5lIG0wIC0gMi4wXG5cdCNkZWZpbmUgcjEgMC44XG5cdCNkZWZpbmUgdjEgMC4yNzZcblx0I2RlZmluZSBtMSAtIDEuMFxuXHQjZGVmaW5lIHI0IDAuNFxuXHQjZGVmaW5lIHY0IDAuMDQ2XG5cdCNkZWZpbmUgbTQgMi4wXG5cdCNkZWZpbmUgcjUgMC4zMDVcblx0I2RlZmluZSB2NSAwLjAxNlxuXHQjZGVmaW5lIG01IDMuMFxuXHQjZGVmaW5lIHI2IDAuMjFcblx0I2RlZmluZSB2NiAwLjAwMzhcblx0I2RlZmluZSBtNiA0LjBcblx0ZmxvYXQgcm91Z2huZXNzVG9NaXAoIGZsb2F0IHJvdWdobmVzcyApIHtcblx0XHRmbG9hdCBtaXAgPSAwLjA7XG5cdFx0aWYgKCByb3VnaG5lc3MgPj0gcjEgKSB7XG5cdFx0XHRtaXAgPSAoIHIwIC0gcm91Z2huZXNzICkgKiAoIG0xIC0gbTAgKSAvICggcjAgLSByMSApICsgbTA7XG5cdFx0fSBlbHNlIGlmICggcm91Z2huZXNzID49IHI0ICkge1xuXHRcdFx0bWlwID0gKCByMSAtIHJvdWdobmVzcyApICogKCBtNCAtIG0xICkgLyAoIHIxIC0gcjQgKSArIG0xO1xuXHRcdH0gZWxzZSBpZiAoIHJvdWdobmVzcyA+PSByNSApIHtcblx0XHRcdG1pcCA9ICggcjQgLSByb3VnaG5lc3MgKSAqICggbTUgLSBtNCApIC8gKCByNCAtIHI1ICkgKyBtNDtcblx0XHR9IGVsc2UgaWYgKCByb3VnaG5lc3MgPj0gcjYgKSB7XG5cdFx0XHRtaXAgPSAoIHI1IC0gcm91Z2huZXNzICkgKiAoIG02IC0gbTUgKSAvICggcjUgLSByNiApICsgbTU7XG5cdFx0fSBlbHNlIHtcblx0XHRcdG1pcCA9IC0gMi4wICogbG9nMiggMS4xNiAqIHJvdWdobmVzcyApO1x0XHR9XG5cdFx0cmV0dXJuIG1pcDtcblx0fVxuXHR2ZWM0IHRleHR1cmVDdWJlVVYoIHNhbXBsZXIyRCBlbnZNYXAsIHZlYzMgc2FtcGxlRGlyLCBmbG9hdCByb3VnaG5lc3MgKSB7XG5cdFx0ZmxvYXQgbWlwID0gY2xhbXAoIHJvdWdobmVzc1RvTWlwKCByb3VnaG5lc3MgKSwgbTAsIGN1YmVVVl9tYXhNaXBMZXZlbCApO1xuXHRcdGZsb2F0IG1pcEYgPSBmcmFjdCggbWlwICk7XG5cdFx0ZmxvYXQgbWlwSW50ID0gZmxvb3IoIG1pcCApO1xuXHRcdHZlYzMgY29sb3IwID0gYmlsaW5lYXJDdWJlVVYoIGVudk1hcCwgc2FtcGxlRGlyLCBtaXBJbnQgKTtcblx0XHRpZiAoIG1pcEYgPT0gMC4wICkge1xuXHRcdFx0cmV0dXJuIHZlYzQoIGNvbG9yMCwgMS4wICk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHZlYzMgY29sb3IxID0gYmlsaW5lYXJDdWJlVVYoIGVudk1hcCwgc2FtcGxlRGlyLCBtaXBJbnQgKyAxLjAgKTtcblx0XHRcdHJldHVybiB2ZWM0KCBtaXgoIGNvbG9yMCwgY29sb3IxLCBtaXBGICksIDEuMCApO1xuXHRcdH1cblx0fVxuI2VuZGlmIjt2YXIgZGVmYXVsdG5vcm1hbF92ZXJ0ZXg9InZlYzMgdHJhbnNmb3JtZWROb3JtYWwgPSBvYmplY3ROb3JtYWw7XG4jaWZkZWYgVVNFX0lOU1RBTkNJTkdcblx0bWF0MyBtID0gbWF0MyggaW5zdGFuY2VNYXRyaXggKTtcblx0dHJhbnNmb3JtZWROb3JtYWwgLz0gdmVjMyggZG90KCBtWyAwIF0sIG1bIDAgXSApLCBkb3QoIG1bIDEgXSwgbVsgMSBdICksIGRvdCggbVsgMiBdLCBtWyAyIF0gKSApO1xuXHR0cmFuc2Zvcm1lZE5vcm1hbCA9IG0gKiB0cmFuc2Zvcm1lZE5vcm1hbDtcbiNlbmRpZlxudHJhbnNmb3JtZWROb3JtYWwgPSBub3JtYWxNYXRyaXggKiB0cmFuc2Zvcm1lZE5vcm1hbDtcbiNpZmRlZiBGTElQX1NJREVEXG5cdHRyYW5zZm9ybWVkTm9ybWFsID0gLSB0cmFuc2Zvcm1lZE5vcm1hbDtcbiNlbmRpZlxuI2lmZGVmIFVTRV9UQU5HRU5UXG5cdHZlYzMgdHJhbnNmb3JtZWRUYW5nZW50ID0gKCBtb2RlbFZpZXdNYXRyaXggKiB2ZWM0KCBvYmplY3RUYW5nZW50LCAwLjAgKSApLnh5ejtcblx0I2lmZGVmIEZMSVBfU0lERURcblx0XHR0cmFuc2Zvcm1lZFRhbmdlbnQgPSAtIHRyYW5zZm9ybWVkVGFuZ2VudDtcblx0I2VuZGlmXG4jZW5kaWYiO3ZhciBkaXNwbGFjZW1lbnRtYXBfcGFyc192ZXJ0ZXg9IiNpZmRlZiBVU0VfRElTUExBQ0VNRU5UTUFQXG5cdHVuaWZvcm0gc2FtcGxlcjJEIGRpc3BsYWNlbWVudE1hcDtcblx0dW5pZm9ybSBmbG9hdCBkaXNwbGFjZW1lbnRTY2FsZTtcblx0dW5pZm9ybSBmbG9hdCBkaXNwbGFjZW1lbnRCaWFzO1xuI2VuZGlmIjt2YXIgZGlzcGxhY2VtZW50bWFwX3ZlcnRleD0iI2lmZGVmIFVTRV9ESVNQTEFDRU1FTlRNQVBcblx0dHJhbnNmb3JtZWQgKz0gbm9ybWFsaXplKCBvYmplY3ROb3JtYWwgKSAqICggdGV4dHVyZTJEKCBkaXNwbGFjZW1lbnRNYXAsIHZVdiApLnggKiBkaXNwbGFjZW1lbnRTY2FsZSArIGRpc3BsYWNlbWVudEJpYXMgKTtcbiNlbmRpZiI7dmFyIGVtaXNzaXZlbWFwX2ZyYWdtZW50PSIjaWZkZWYgVVNFX0VNSVNTSVZFTUFQXG5cdHZlYzQgZW1pc3NpdmVDb2xvciA9IHRleHR1cmUyRCggZW1pc3NpdmVNYXAsIHZVdiApO1xuXHRlbWlzc2l2ZUNvbG9yLnJnYiA9IGVtaXNzaXZlTWFwVGV4ZWxUb0xpbmVhciggZW1pc3NpdmVDb2xvciApLnJnYjtcblx0dG90YWxFbWlzc2l2ZVJhZGlhbmNlICo9IGVtaXNzaXZlQ29sb3IucmdiO1xuI2VuZGlmIjt2YXIgZW1pc3NpdmVtYXBfcGFyc19mcmFnbWVudD0iI2lmZGVmIFVTRV9FTUlTU0lWRU1BUFxuXHR1bmlmb3JtIHNhbXBsZXIyRCBlbWlzc2l2ZU1hcDtcbiNlbmRpZiI7dmFyIGVuY29kaW5nc19mcmFnbWVudD0iZ2xfRnJhZ0NvbG9yID0gbGluZWFyVG9PdXRwdXRUZXhlbCggZ2xfRnJhZ0NvbG9yICk7Ijt2YXIgZW5jb2RpbmdzX3BhcnNfZnJhZ21lbnQ9IlxudmVjNCBMaW5lYXJUb0xpbmVhciggaW4gdmVjNCB2YWx1ZSApIHtcblx0cmV0dXJuIHZhbHVlO1xufVxudmVjNCBHYW1tYVRvTGluZWFyKCBpbiB2ZWM0IHZhbHVlLCBpbiBmbG9hdCBnYW1tYUZhY3RvciApIHtcblx0cmV0dXJuIHZlYzQoIHBvdyggdmFsdWUucmdiLCB2ZWMzKCBnYW1tYUZhY3RvciApICksIHZhbHVlLmEgKTtcbn1cbnZlYzQgTGluZWFyVG9HYW1tYSggaW4gdmVjNCB2YWx1ZSwgaW4gZmxvYXQgZ2FtbWFGYWN0b3IgKSB7XG5cdHJldHVybiB2ZWM0KCBwb3coIHZhbHVlLnJnYiwgdmVjMyggMS4wIC8gZ2FtbWFGYWN0b3IgKSApLCB2YWx1ZS5hICk7XG59XG52ZWM0IHNSR0JUb0xpbmVhciggaW4gdmVjNCB2YWx1ZSApIHtcblx0cmV0dXJuIHZlYzQoIG1peCggcG93KCB2YWx1ZS5yZ2IgKiAwLjk0Nzg2NzI5ODYgKyB2ZWMzKCAwLjA1MjEzMjcwMTQgKSwgdmVjMyggMi40ICkgKSwgdmFsdWUucmdiICogMC4wNzczOTkzODA4LCB2ZWMzKCBsZXNzVGhhbkVxdWFsKCB2YWx1ZS5yZ2IsIHZlYzMoIDAuMDQwNDUgKSApICkgKSwgdmFsdWUuYSApO1xufVxudmVjNCBMaW5lYXJUb3NSR0IoIGluIHZlYzQgdmFsdWUgKSB7XG5cdHJldHVybiB2ZWM0KCBtaXgoIHBvdyggdmFsdWUucmdiLCB2ZWMzKCAwLjQxNjY2ICkgKSAqIDEuMDU1IC0gdmVjMyggMC4wNTUgKSwgdmFsdWUucmdiICogMTIuOTIsIHZlYzMoIGxlc3NUaGFuRXF1YWwoIHZhbHVlLnJnYiwgdmVjMyggMC4wMDMxMzA4ICkgKSApICksIHZhbHVlLmEgKTtcbn1cbnZlYzQgUkdCRVRvTGluZWFyKCBpbiB2ZWM0IHZhbHVlICkge1xuXHRyZXR1cm4gdmVjNCggdmFsdWUucmdiICogZXhwMiggdmFsdWUuYSAqIDI1NS4wIC0gMTI4LjAgKSwgMS4wICk7XG59XG52ZWM0IExpbmVhclRvUkdCRSggaW4gdmVjNCB2YWx1ZSApIHtcblx0ZmxvYXQgbWF4Q29tcG9uZW50ID0gbWF4KCBtYXgoIHZhbHVlLnIsIHZhbHVlLmcgKSwgdmFsdWUuYiApO1xuXHRmbG9hdCBmRXhwID0gY2xhbXAoIGNlaWwoIGxvZzIoIG1heENvbXBvbmVudCApICksIC0xMjguMCwgMTI3LjAgKTtcblx0cmV0dXJuIHZlYzQoIHZhbHVlLnJnYiAvIGV4cDIoIGZFeHAgKSwgKCBmRXhwICsgMTI4LjAgKSAvIDI1NS4wICk7XG59XG52ZWM0IFJHQk1Ub0xpbmVhciggaW4gdmVjNCB2YWx1ZSwgaW4gZmxvYXQgbWF4UmFuZ2UgKSB7XG5cdHJldHVybiB2ZWM0KCB2YWx1ZS5yZ2IgKiB2YWx1ZS5hICogbWF4UmFuZ2UsIDEuMCApO1xufVxudmVjNCBMaW5lYXJUb1JHQk0oIGluIHZlYzQgdmFsdWUsIGluIGZsb2F0IG1heFJhbmdlICkge1xuXHRmbG9hdCBtYXhSR0IgPSBtYXgoIHZhbHVlLnIsIG1heCggdmFsdWUuZywgdmFsdWUuYiApICk7XG5cdGZsb2F0IE0gPSBjbGFtcCggbWF4UkdCIC8gbWF4UmFuZ2UsIDAuMCwgMS4wICk7XG5cdE0gPSBjZWlsKCBNICogMjU1LjAgKSAvIDI1NS4wO1xuXHRyZXR1cm4gdmVjNCggdmFsdWUucmdiIC8gKCBNICogbWF4UmFuZ2UgKSwgTSApO1xufVxudmVjNCBSR0JEVG9MaW5lYXIoIGluIHZlYzQgdmFsdWUsIGluIGZsb2F0IG1heFJhbmdlICkge1xuXHRyZXR1cm4gdmVjNCggdmFsdWUucmdiICogKCAoIG1heFJhbmdlIC8gMjU1LjAgKSAvIHZhbHVlLmEgKSwgMS4wICk7XG59XG52ZWM0IExpbmVhclRvUkdCRCggaW4gdmVjNCB2YWx1ZSwgaW4gZmxvYXQgbWF4UmFuZ2UgKSB7XG5cdGZsb2F0IG1heFJHQiA9IG1heCggdmFsdWUuciwgbWF4KCB2YWx1ZS5nLCB2YWx1ZS5iICkgKTtcblx0ZmxvYXQgRCA9IG1heCggbWF4UmFuZ2UgLyBtYXhSR0IsIDEuMCApO1xuXHREID0gY2xhbXAoIGZsb29yKCBEICkgLyAyNTUuMCwgMC4wLCAxLjAgKTtcblx0cmV0dXJuIHZlYzQoIHZhbHVlLnJnYiAqICggRCAqICggMjU1LjAgLyBtYXhSYW5nZSApICksIEQgKTtcbn0iO3ZhciBlbnZtYXBfZnJhZ21lbnQ9IiNpZmRlZiBVU0VfRU5WTUFQXG5cdCNpZmRlZiBFTlZfV09STERQT1Ncblx0XHR2ZWMzIGNhbWVyYVRvRnJhZztcblx0XHRpZiAoIGlzT3J0aG9ncmFwaGljICkge1xuXHRcdFx0Y2FtZXJhVG9GcmFnID0gbm9ybWFsaXplKCB2ZWMzKCAtIHZpZXdNYXRyaXhbIDAgXVsgMiBdLCAtIHZpZXdNYXRyaXhbIDEgXVsgMiBdLCAtIHZpZXdNYXRyaXhbIDIgXVsgMiBdICkgKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Y2FtZXJhVG9GcmFnID0gbm9ybWFsaXplKCB2V29ybGRQb3NpdGlvbiAtIGNhbWVyYVBvc2l0aW9uICk7XG5cdFx0fVxuXHRcdHZlYzMgd29ybGROb3JtYWwgPSBpbnZlcnNlVHJhbnNmb3JtRGlyZWN0aW9uKCBub3JtYWwsIHZpZXdNYXRyaXggKTtcblx0XHQjaWZkZWYgRU5WTUFQX01PREVfUkVGTEVDVElPTlxuXHRcdFx0dmVjMyByZWZsZWN0VmVjID0gcmVmbGVjdCggY2FtZXJhVG9GcmFnLCB3b3JsZE5vcm1hbCApO1xuXHRcdCNlbHNlXG5cdFx0XHR2ZWMzIHJlZmxlY3RWZWMgPSByZWZyYWN0KCBjYW1lcmFUb0ZyYWcsIHdvcmxkTm9ybWFsLCByZWZyYWN0aW9uUmF0aW8gKTtcblx0XHQjZW5kaWZcblx0I2Vsc2Vcblx0XHR2ZWMzIHJlZmxlY3RWZWMgPSB2UmVmbGVjdDtcblx0I2VuZGlmXG5cdCNpZmRlZiBFTlZNQVBfVFlQRV9DVUJFXG5cdFx0dmVjNCBlbnZDb2xvciA9IHRleHR1cmVDdWJlKCBlbnZNYXAsIHZlYzMoIGZsaXBFbnZNYXAgKiByZWZsZWN0VmVjLngsIHJlZmxlY3RWZWMueXogKSApO1xuXHRcdGVudkNvbG9yID0gZW52TWFwVGV4ZWxUb0xpbmVhciggZW52Q29sb3IgKTtcblx0I2VsaWYgZGVmaW5lZCggRU5WTUFQX1RZUEVfQ1VCRV9VViApXG5cdFx0dmVjNCBlbnZDb2xvciA9IHRleHR1cmVDdWJlVVYoIGVudk1hcCwgcmVmbGVjdFZlYywgMC4wICk7XG5cdCNlbHNlXG5cdFx0dmVjNCBlbnZDb2xvciA9IHZlYzQoIDAuMCApO1xuXHQjZW5kaWZcblx0I2lmZGVmIEVOVk1BUF9CTEVORElOR19NVUxUSVBMWVxuXHRcdG91dGdvaW5nTGlnaHQgPSBtaXgoIG91dGdvaW5nTGlnaHQsIG91dGdvaW5nTGlnaHQgKiBlbnZDb2xvci54eXosIHNwZWN1bGFyU3RyZW5ndGggKiByZWZsZWN0aXZpdHkgKTtcblx0I2VsaWYgZGVmaW5lZCggRU5WTUFQX0JMRU5ESU5HX01JWCApXG5cdFx0b3V0Z29pbmdMaWdodCA9IG1peCggb3V0Z29pbmdMaWdodCwgZW52Q29sb3IueHl6LCBzcGVjdWxhclN0cmVuZ3RoICogcmVmbGVjdGl2aXR5ICk7XG5cdCNlbGlmIGRlZmluZWQoIEVOVk1BUF9CTEVORElOR19BREQgKVxuXHRcdG91dGdvaW5nTGlnaHQgKz0gZW52Q29sb3IueHl6ICogc3BlY3VsYXJTdHJlbmd0aCAqIHJlZmxlY3Rpdml0eTtcblx0I2VuZGlmXG4jZW5kaWYiO3ZhciBlbnZtYXBfY29tbW9uX3BhcnNfZnJhZ21lbnQ9IiNpZmRlZiBVU0VfRU5WTUFQXG5cdHVuaWZvcm0gZmxvYXQgZW52TWFwSW50ZW5zaXR5O1xuXHR1bmlmb3JtIGZsb2F0IGZsaXBFbnZNYXA7XG5cdCNpZmRlZiBFTlZNQVBfVFlQRV9DVUJFXG5cdFx0dW5pZm9ybSBzYW1wbGVyQ3ViZSBlbnZNYXA7XG5cdCNlbHNlXG5cdFx0dW5pZm9ybSBzYW1wbGVyMkQgZW52TWFwO1xuXHQjZW5kaWZcblx0XG4jZW5kaWYiO3ZhciBlbnZtYXBfcGFyc19mcmFnbWVudD0iI2lmZGVmIFVTRV9FTlZNQVBcblx0dW5pZm9ybSBmbG9hdCByZWZsZWN0aXZpdHk7XG5cdCNpZiBkZWZpbmVkKCBVU0VfQlVNUE1BUCApIHx8IGRlZmluZWQoIFVTRV9OT1JNQUxNQVAgKSB8fCBkZWZpbmVkKCBQSE9ORyApXG5cdFx0I2RlZmluZSBFTlZfV09STERQT1Ncblx0I2VuZGlmXG5cdCNpZmRlZiBFTlZfV09STERQT1Ncblx0XHR2YXJ5aW5nIHZlYzMgdldvcmxkUG9zaXRpb247XG5cdFx0dW5pZm9ybSBmbG9hdCByZWZyYWN0aW9uUmF0aW87XG5cdCNlbHNlXG5cdFx0dmFyeWluZyB2ZWMzIHZSZWZsZWN0O1xuXHQjZW5kaWZcbiNlbmRpZiI7dmFyIGVudm1hcF9wYXJzX3ZlcnRleD0iI2lmZGVmIFVTRV9FTlZNQVBcblx0I2lmIGRlZmluZWQoIFVTRV9CVU1QTUFQICkgfHwgZGVmaW5lZCggVVNFX05PUk1BTE1BUCApIHx8ZGVmaW5lZCggUEhPTkcgKVxuXHRcdCNkZWZpbmUgRU5WX1dPUkxEUE9TXG5cdCNlbmRpZlxuXHQjaWZkZWYgRU5WX1dPUkxEUE9TXG5cdFx0XG5cdFx0dmFyeWluZyB2ZWMzIHZXb3JsZFBvc2l0aW9uO1xuXHQjZWxzZVxuXHRcdHZhcnlpbmcgdmVjMyB2UmVmbGVjdDtcblx0XHR1bmlmb3JtIGZsb2F0IHJlZnJhY3Rpb25SYXRpbztcblx0I2VuZGlmXG4jZW5kaWYiO3ZhciBlbnZtYXBfdmVydGV4PSIjaWZkZWYgVVNFX0VOVk1BUFxuXHQjaWZkZWYgRU5WX1dPUkxEUE9TXG5cdFx0dldvcmxkUG9zaXRpb24gPSB3b3JsZFBvc2l0aW9uLnh5ejtcblx0I2Vsc2Vcblx0XHR2ZWMzIGNhbWVyYVRvVmVydGV4O1xuXHRcdGlmICggaXNPcnRob2dyYXBoaWMgKSB7XG5cdFx0XHRjYW1lcmFUb1ZlcnRleCA9IG5vcm1hbGl6ZSggdmVjMyggLSB2aWV3TWF0cml4WyAwIF1bIDIgXSwgLSB2aWV3TWF0cml4WyAxIF1bIDIgXSwgLSB2aWV3TWF0cml4WyAyIF1bIDIgXSApICk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGNhbWVyYVRvVmVydGV4ID0gbm9ybWFsaXplKCB3b3JsZFBvc2l0aW9uLnh5eiAtIGNhbWVyYVBvc2l0aW9uICk7XG5cdFx0fVxuXHRcdHZlYzMgd29ybGROb3JtYWwgPSBpbnZlcnNlVHJhbnNmb3JtRGlyZWN0aW9uKCB0cmFuc2Zvcm1lZE5vcm1hbCwgdmlld01hdHJpeCApO1xuXHRcdCNpZmRlZiBFTlZNQVBfTU9ERV9SRUZMRUNUSU9OXG5cdFx0XHR2UmVmbGVjdCA9IHJlZmxlY3QoIGNhbWVyYVRvVmVydGV4LCB3b3JsZE5vcm1hbCApO1xuXHRcdCNlbHNlXG5cdFx0XHR2UmVmbGVjdCA9IHJlZnJhY3QoIGNhbWVyYVRvVmVydGV4LCB3b3JsZE5vcm1hbCwgcmVmcmFjdGlvblJhdGlvICk7XG5cdFx0I2VuZGlmXG5cdCNlbmRpZlxuI2VuZGlmIjt2YXIgZm9nX3ZlcnRleD0iI2lmZGVmIFVTRV9GT0dcblx0dkZvZ0RlcHRoID0gLSBtdlBvc2l0aW9uLno7XG4jZW5kaWYiO3ZhciBmb2dfcGFyc192ZXJ0ZXg9IiNpZmRlZiBVU0VfRk9HXG5cdHZhcnlpbmcgZmxvYXQgdkZvZ0RlcHRoO1xuI2VuZGlmIjt2YXIgZm9nX2ZyYWdtZW50PSIjaWZkZWYgVVNFX0ZPR1xuXHQjaWZkZWYgRk9HX0VYUDJcblx0XHRmbG9hdCBmb2dGYWN0b3IgPSAxLjAgLSBleHAoIC0gZm9nRGVuc2l0eSAqIGZvZ0RlbnNpdHkgKiB2Rm9nRGVwdGggKiB2Rm9nRGVwdGggKTtcblx0I2Vsc2Vcblx0XHRmbG9hdCBmb2dGYWN0b3IgPSBzbW9vdGhzdGVwKCBmb2dOZWFyLCBmb2dGYXIsIHZGb2dEZXB0aCApO1xuXHQjZW5kaWZcblx0Z2xfRnJhZ0NvbG9yLnJnYiA9IG1peCggZ2xfRnJhZ0NvbG9yLnJnYiwgZm9nQ29sb3IsIGZvZ0ZhY3RvciApO1xuI2VuZGlmIjt2YXIgZm9nX3BhcnNfZnJhZ21lbnQ9IiNpZmRlZiBVU0VfRk9HXG5cdHVuaWZvcm0gdmVjMyBmb2dDb2xvcjtcblx0dmFyeWluZyBmbG9hdCB2Rm9nRGVwdGg7XG5cdCNpZmRlZiBGT0dfRVhQMlxuXHRcdHVuaWZvcm0gZmxvYXQgZm9nRGVuc2l0eTtcblx0I2Vsc2Vcblx0XHR1bmlmb3JtIGZsb2F0IGZvZ05lYXI7XG5cdFx0dW5pZm9ybSBmbG9hdCBmb2dGYXI7XG5cdCNlbmRpZlxuI2VuZGlmIjt2YXIgZ3JhZGllbnRtYXBfcGFyc19mcmFnbWVudD0iI2lmZGVmIFVTRV9HUkFESUVOVE1BUFxuXHR1bmlmb3JtIHNhbXBsZXIyRCBncmFkaWVudE1hcDtcbiNlbmRpZlxudmVjMyBnZXRHcmFkaWVudElycmFkaWFuY2UoIHZlYzMgbm9ybWFsLCB2ZWMzIGxpZ2h0RGlyZWN0aW9uICkge1xuXHRmbG9hdCBkb3ROTCA9IGRvdCggbm9ybWFsLCBsaWdodERpcmVjdGlvbiApO1xuXHR2ZWMyIGNvb3JkID0gdmVjMiggZG90TkwgKiAwLjUgKyAwLjUsIDAuMCApO1xuXHQjaWZkZWYgVVNFX0dSQURJRU5UTUFQXG5cdFx0cmV0dXJuIHRleHR1cmUyRCggZ3JhZGllbnRNYXAsIGNvb3JkICkucmdiO1xuXHQjZWxzZVxuXHRcdHJldHVybiAoIGNvb3JkLnggPCAwLjcgKSA/IHZlYzMoIDAuNyApIDogdmVjMyggMS4wICk7XG5cdCNlbmRpZlxufSI7dmFyIGxpZ2h0bWFwX2ZyYWdtZW50PSIjaWZkZWYgVVNFX0xJR0hUTUFQXG5cdHZlYzQgbGlnaHRNYXBUZXhlbCA9IHRleHR1cmUyRCggbGlnaHRNYXAsIHZVdjIgKTtcblx0dmVjMyBsaWdodE1hcElycmFkaWFuY2UgPSBsaWdodE1hcFRleGVsVG9MaW5lYXIoIGxpZ2h0TWFwVGV4ZWwgKS5yZ2IgKiBsaWdodE1hcEludGVuc2l0eTtcblx0I2lmbmRlZiBQSFlTSUNBTExZX0NPUlJFQ1RfTElHSFRTXG5cdFx0bGlnaHRNYXBJcnJhZGlhbmNlICo9IFBJO1xuXHQjZW5kaWZcblx0cmVmbGVjdGVkTGlnaHQuaW5kaXJlY3REaWZmdXNlICs9IGxpZ2h0TWFwSXJyYWRpYW5jZTtcbiNlbmRpZiI7dmFyIGxpZ2h0bWFwX3BhcnNfZnJhZ21lbnQ9IiNpZmRlZiBVU0VfTElHSFRNQVBcblx0dW5pZm9ybSBzYW1wbGVyMkQgbGlnaHRNYXA7XG5cdHVuaWZvcm0gZmxvYXQgbGlnaHRNYXBJbnRlbnNpdHk7XG4jZW5kaWYiO3ZhciBsaWdodHNfbGFtYmVydF92ZXJ0ZXg9InZlYzMgZGlmZnVzZSA9IHZlYzMoIDEuMCApO1xuR2VvbWV0cmljQ29udGV4dCBnZW9tZXRyeTtcbmdlb21ldHJ5LnBvc2l0aW9uID0gbXZQb3NpdGlvbi54eXo7XG5nZW9tZXRyeS5ub3JtYWwgPSBub3JtYWxpemUoIHRyYW5zZm9ybWVkTm9ybWFsICk7XG5nZW9tZXRyeS52aWV3RGlyID0gKCBpc09ydGhvZ3JhcGhpYyApID8gdmVjMyggMCwgMCwgMSApIDogbm9ybWFsaXplKCAtbXZQb3NpdGlvbi54eXogKTtcbkdlb21ldHJpY0NvbnRleHQgYmFja0dlb21ldHJ5O1xuYmFja0dlb21ldHJ5LnBvc2l0aW9uID0gZ2VvbWV0cnkucG9zaXRpb247XG5iYWNrR2VvbWV0cnkubm9ybWFsID0gLWdlb21ldHJ5Lm5vcm1hbDtcbmJhY2tHZW9tZXRyeS52aWV3RGlyID0gZ2VvbWV0cnkudmlld0RpcjtcbnZMaWdodEZyb250ID0gdmVjMyggMC4wICk7XG52SW5kaXJlY3RGcm9udCA9IHZlYzMoIDAuMCApO1xuI2lmZGVmIERPVUJMRV9TSURFRFxuXHR2TGlnaHRCYWNrID0gdmVjMyggMC4wICk7XG5cdHZJbmRpcmVjdEJhY2sgPSB2ZWMzKCAwLjAgKTtcbiNlbmRpZlxuSW5jaWRlbnRMaWdodCBkaXJlY3RMaWdodDtcbmZsb2F0IGRvdE5MO1xudmVjMyBkaXJlY3RMaWdodENvbG9yX0RpZmZ1c2U7XG52SW5kaXJlY3RGcm9udCArPSBnZXRBbWJpZW50TGlnaHRJcnJhZGlhbmNlKCBhbWJpZW50TGlnaHRDb2xvciApO1xudkluZGlyZWN0RnJvbnQgKz0gZ2V0TGlnaHRQcm9iZUlycmFkaWFuY2UoIGxpZ2h0UHJvYmUsIGdlb21ldHJ5Lm5vcm1hbCApO1xuI2lmZGVmIERPVUJMRV9TSURFRFxuXHR2SW5kaXJlY3RCYWNrICs9IGdldEFtYmllbnRMaWdodElycmFkaWFuY2UoIGFtYmllbnRMaWdodENvbG9yICk7XG5cdHZJbmRpcmVjdEJhY2sgKz0gZ2V0TGlnaHRQcm9iZUlycmFkaWFuY2UoIGxpZ2h0UHJvYmUsIGJhY2tHZW9tZXRyeS5ub3JtYWwgKTtcbiNlbmRpZlxuI2lmIE5VTV9QT0lOVF9MSUdIVFMgPiAwXG5cdCNwcmFnbWEgdW5yb2xsX2xvb3Bfc3RhcnRcblx0Zm9yICggaW50IGkgPSAwOyBpIDwgTlVNX1BPSU5UX0xJR0hUUzsgaSArKyApIHtcblx0XHRnZXRQb2ludExpZ2h0SW5mbyggcG9pbnRMaWdodHNbIGkgXSwgZ2VvbWV0cnksIGRpcmVjdExpZ2h0ICk7XG5cdFx0ZG90TkwgPSBkb3QoIGdlb21ldHJ5Lm5vcm1hbCwgZGlyZWN0TGlnaHQuZGlyZWN0aW9uICk7XG5cdFx0ZGlyZWN0TGlnaHRDb2xvcl9EaWZmdXNlID0gZGlyZWN0TGlnaHQuY29sb3I7XG5cdFx0dkxpZ2h0RnJvbnQgKz0gc2F0dXJhdGUoIGRvdE5MICkgKiBkaXJlY3RMaWdodENvbG9yX0RpZmZ1c2U7XG5cdFx0I2lmZGVmIERPVUJMRV9TSURFRFxuXHRcdFx0dkxpZ2h0QmFjayArPSBzYXR1cmF0ZSggLSBkb3ROTCApICogZGlyZWN0TGlnaHRDb2xvcl9EaWZmdXNlO1xuXHRcdCNlbmRpZlxuXHR9XG5cdCNwcmFnbWEgdW5yb2xsX2xvb3BfZW5kXG4jZW5kaWZcbiNpZiBOVU1fU1BPVF9MSUdIVFMgPiAwXG5cdCNwcmFnbWEgdW5yb2xsX2xvb3Bfc3RhcnRcblx0Zm9yICggaW50IGkgPSAwOyBpIDwgTlVNX1NQT1RfTElHSFRTOyBpICsrICkge1xuXHRcdGdldFNwb3RMaWdodEluZm8oIHNwb3RMaWdodHNbIGkgXSwgZ2VvbWV0cnksIGRpcmVjdExpZ2h0ICk7XG5cdFx0ZG90TkwgPSBkb3QoIGdlb21ldHJ5Lm5vcm1hbCwgZGlyZWN0TGlnaHQuZGlyZWN0aW9uICk7XG5cdFx0ZGlyZWN0TGlnaHRDb2xvcl9EaWZmdXNlID0gZGlyZWN0TGlnaHQuY29sb3I7XG5cdFx0dkxpZ2h0RnJvbnQgKz0gc2F0dXJhdGUoIGRvdE5MICkgKiBkaXJlY3RMaWdodENvbG9yX0RpZmZ1c2U7XG5cdFx0I2lmZGVmIERPVUJMRV9TSURFRFxuXHRcdFx0dkxpZ2h0QmFjayArPSBzYXR1cmF0ZSggLSBkb3ROTCApICogZGlyZWN0TGlnaHRDb2xvcl9EaWZmdXNlO1xuXHRcdCNlbmRpZlxuXHR9XG5cdCNwcmFnbWEgdW5yb2xsX2xvb3BfZW5kXG4jZW5kaWZcbiNpZiBOVU1fRElSX0xJR0hUUyA+IDBcblx0I3ByYWdtYSB1bnJvbGxfbG9vcF9zdGFydFxuXHRmb3IgKCBpbnQgaSA9IDA7IGkgPCBOVU1fRElSX0xJR0hUUzsgaSArKyApIHtcblx0XHRnZXREaXJlY3Rpb25hbExpZ2h0SW5mbyggZGlyZWN0aW9uYWxMaWdodHNbIGkgXSwgZ2VvbWV0cnksIGRpcmVjdExpZ2h0ICk7XG5cdFx0ZG90TkwgPSBkb3QoIGdlb21ldHJ5Lm5vcm1hbCwgZGlyZWN0TGlnaHQuZGlyZWN0aW9uICk7XG5cdFx0ZGlyZWN0TGlnaHRDb2xvcl9EaWZmdXNlID0gZGlyZWN0TGlnaHQuY29sb3I7XG5cdFx0dkxpZ2h0RnJvbnQgKz0gc2F0dXJhdGUoIGRvdE5MICkgKiBkaXJlY3RMaWdodENvbG9yX0RpZmZ1c2U7XG5cdFx0I2lmZGVmIERPVUJMRV9TSURFRFxuXHRcdFx0dkxpZ2h0QmFjayArPSBzYXR1cmF0ZSggLSBkb3ROTCApICogZGlyZWN0TGlnaHRDb2xvcl9EaWZmdXNlO1xuXHRcdCNlbmRpZlxuXHR9XG5cdCNwcmFnbWEgdW5yb2xsX2xvb3BfZW5kXG4jZW5kaWZcbiNpZiBOVU1fSEVNSV9MSUdIVFMgPiAwXG5cdCNwcmFnbWEgdW5yb2xsX2xvb3Bfc3RhcnRcblx0Zm9yICggaW50IGkgPSAwOyBpIDwgTlVNX0hFTUlfTElHSFRTOyBpICsrICkge1xuXHRcdHZJbmRpcmVjdEZyb250ICs9IGdldEhlbWlzcGhlcmVMaWdodElycmFkaWFuY2UoIGhlbWlzcGhlcmVMaWdodHNbIGkgXSwgZ2VvbWV0cnkubm9ybWFsICk7XG5cdFx0I2lmZGVmIERPVUJMRV9TSURFRFxuXHRcdFx0dkluZGlyZWN0QmFjayArPSBnZXRIZW1pc3BoZXJlTGlnaHRJcnJhZGlhbmNlKCBoZW1pc3BoZXJlTGlnaHRzWyBpIF0sIGJhY2tHZW9tZXRyeS5ub3JtYWwgKTtcblx0XHQjZW5kaWZcblx0fVxuXHQjcHJhZ21hIHVucm9sbF9sb29wX2VuZFxuI2VuZGlmIjt2YXIgbGlnaHRzX3BhcnNfYmVnaW49InVuaWZvcm0gYm9vbCByZWNlaXZlU2hhZG93O1xudW5pZm9ybSB2ZWMzIGFtYmllbnRMaWdodENvbG9yO1xudW5pZm9ybSB2ZWMzIGxpZ2h0UHJvYmVbIDkgXTtcbnZlYzMgc2hHZXRJcnJhZGlhbmNlQXQoIGluIHZlYzMgbm9ybWFsLCBpbiB2ZWMzIHNoQ29lZmZpY2llbnRzWyA5IF0gKSB7XG5cdGZsb2F0IHggPSBub3JtYWwueCwgeSA9IG5vcm1hbC55LCB6ID0gbm9ybWFsLno7XG5cdHZlYzMgcmVzdWx0ID0gc2hDb2VmZmljaWVudHNbIDAgXSAqIDAuODg2MjI3O1xuXHRyZXN1bHQgKz0gc2hDb2VmZmljaWVudHNbIDEgXSAqIDIuMCAqIDAuNTExNjY0ICogeTtcblx0cmVzdWx0ICs9IHNoQ29lZmZpY2llbnRzWyAyIF0gKiAyLjAgKiAwLjUxMTY2NCAqIHo7XG5cdHJlc3VsdCArPSBzaENvZWZmaWNpZW50c1sgMyBdICogMi4wICogMC41MTE2NjQgKiB4O1xuXHRyZXN1bHQgKz0gc2hDb2VmZmljaWVudHNbIDQgXSAqIDIuMCAqIDAuNDI5MDQzICogeCAqIHk7XG5cdHJlc3VsdCArPSBzaENvZWZmaWNpZW50c1sgNSBdICogMi4wICogMC40MjkwNDMgKiB5ICogejtcblx0cmVzdWx0ICs9IHNoQ29lZmZpY2llbnRzWyA2IF0gKiAoIDAuNzQzMTI1ICogeiAqIHogLSAwLjI0NzcwOCApO1xuXHRyZXN1bHQgKz0gc2hDb2VmZmljaWVudHNbIDcgXSAqIDIuMCAqIDAuNDI5MDQzICogeCAqIHo7XG5cdHJlc3VsdCArPSBzaENvZWZmaWNpZW50c1sgOCBdICogMC40MjkwNDMgKiAoIHggKiB4IC0geSAqIHkgKTtcblx0cmV0dXJuIHJlc3VsdDtcbn1cbnZlYzMgZ2V0TGlnaHRQcm9iZUlycmFkaWFuY2UoIGNvbnN0IGluIHZlYzMgbGlnaHRQcm9iZVsgOSBdLCBjb25zdCBpbiB2ZWMzIG5vcm1hbCApIHtcblx0dmVjMyB3b3JsZE5vcm1hbCA9IGludmVyc2VUcmFuc2Zvcm1EaXJlY3Rpb24oIG5vcm1hbCwgdmlld01hdHJpeCApO1xuXHR2ZWMzIGlycmFkaWFuY2UgPSBzaEdldElycmFkaWFuY2VBdCggd29ybGROb3JtYWwsIGxpZ2h0UHJvYmUgKTtcblx0cmV0dXJuIGlycmFkaWFuY2U7XG59XG52ZWMzIGdldEFtYmllbnRMaWdodElycmFkaWFuY2UoIGNvbnN0IGluIHZlYzMgYW1iaWVudExpZ2h0Q29sb3IgKSB7XG5cdHZlYzMgaXJyYWRpYW5jZSA9IGFtYmllbnRMaWdodENvbG9yO1xuXHRyZXR1cm4gaXJyYWRpYW5jZTtcbn1cbmZsb2F0IGdldERpc3RhbmNlQXR0ZW51YXRpb24oIGNvbnN0IGluIGZsb2F0IGxpZ2h0RGlzdGFuY2UsIGNvbnN0IGluIGZsb2F0IGN1dG9mZkRpc3RhbmNlLCBjb25zdCBpbiBmbG9hdCBkZWNheUV4cG9uZW50ICkge1xuXHQjaWYgZGVmaW5lZCAoIFBIWVNJQ0FMTFlfQ09SUkVDVF9MSUdIVFMgKVxuXHRcdGZsb2F0IGRpc3RhbmNlRmFsbG9mZiA9IDEuMCAvIG1heCggcG93KCBsaWdodERpc3RhbmNlLCBkZWNheUV4cG9uZW50ICksIDAuMDEgKTtcblx0XHRpZiAoIGN1dG9mZkRpc3RhbmNlID4gMC4wICkge1xuXHRcdFx0ZGlzdGFuY2VGYWxsb2ZmICo9IHBvdzIoIHNhdHVyYXRlKCAxLjAgLSBwb3c0KCBsaWdodERpc3RhbmNlIC8gY3V0b2ZmRGlzdGFuY2UgKSApICk7XG5cdFx0fVxuXHRcdHJldHVybiBkaXN0YW5jZUZhbGxvZmY7XG5cdCNlbHNlXG5cdFx0aWYgKCBjdXRvZmZEaXN0YW5jZSA+IDAuMCAmJiBkZWNheUV4cG9uZW50ID4gMC4wICkge1xuXHRcdFx0cmV0dXJuIHBvdyggc2F0dXJhdGUoIC0gbGlnaHREaXN0YW5jZSAvIGN1dG9mZkRpc3RhbmNlICsgMS4wICksIGRlY2F5RXhwb25lbnQgKTtcblx0XHR9XG5cdFx0cmV0dXJuIDEuMDtcblx0I2VuZGlmXG59XG5mbG9hdCBnZXRTcG90QXR0ZW51YXRpb24oIGNvbnN0IGluIGZsb2F0IGNvbmVDb3NpbmUsIGNvbnN0IGluIGZsb2F0IHBlbnVtYnJhQ29zaW5lLCBjb25zdCBpbiBmbG9hdCBhbmdsZUNvc2luZSApIHtcblx0cmV0dXJuIHNtb290aHN0ZXAoIGNvbmVDb3NpbmUsIHBlbnVtYnJhQ29zaW5lLCBhbmdsZUNvc2luZSApO1xufVxuI2lmIE5VTV9ESVJfTElHSFRTID4gMFxuXHRzdHJ1Y3QgRGlyZWN0aW9uYWxMaWdodCB7XG5cdFx0dmVjMyBkaXJlY3Rpb247XG5cdFx0dmVjMyBjb2xvcjtcblx0fTtcblx0dW5pZm9ybSBEaXJlY3Rpb25hbExpZ2h0IGRpcmVjdGlvbmFsTGlnaHRzWyBOVU1fRElSX0xJR0hUUyBdO1xuXHR2b2lkIGdldERpcmVjdGlvbmFsTGlnaHRJbmZvKCBjb25zdCBpbiBEaXJlY3Rpb25hbExpZ2h0IGRpcmVjdGlvbmFsTGlnaHQsIGNvbnN0IGluIEdlb21ldHJpY0NvbnRleHQgZ2VvbWV0cnksIG91dCBJbmNpZGVudExpZ2h0IGxpZ2h0ICkge1xuXHRcdGxpZ2h0LmNvbG9yID0gZGlyZWN0aW9uYWxMaWdodC5jb2xvcjtcblx0XHRsaWdodC5kaXJlY3Rpb24gPSBkaXJlY3Rpb25hbExpZ2h0LmRpcmVjdGlvbjtcblx0XHRsaWdodC52aXNpYmxlID0gdHJ1ZTtcblx0fVxuI2VuZGlmXG4jaWYgTlVNX1BPSU5UX0xJR0hUUyA+IDBcblx0c3RydWN0IFBvaW50TGlnaHQge1xuXHRcdHZlYzMgcG9zaXRpb247XG5cdFx0dmVjMyBjb2xvcjtcblx0XHRmbG9hdCBkaXN0YW5jZTtcblx0XHRmbG9hdCBkZWNheTtcblx0fTtcblx0dW5pZm9ybSBQb2ludExpZ2h0IHBvaW50TGlnaHRzWyBOVU1fUE9JTlRfTElHSFRTIF07XG5cdHZvaWQgZ2V0UG9pbnRMaWdodEluZm8oIGNvbnN0IGluIFBvaW50TGlnaHQgcG9pbnRMaWdodCwgY29uc3QgaW4gR2VvbWV0cmljQ29udGV4dCBnZW9tZXRyeSwgb3V0IEluY2lkZW50TGlnaHQgbGlnaHQgKSB7XG5cdFx0dmVjMyBsVmVjdG9yID0gcG9pbnRMaWdodC5wb3NpdGlvbiAtIGdlb21ldHJ5LnBvc2l0aW9uO1xuXHRcdGxpZ2h0LmRpcmVjdGlvbiA9IG5vcm1hbGl6ZSggbFZlY3RvciApO1xuXHRcdGZsb2F0IGxpZ2h0RGlzdGFuY2UgPSBsZW5ndGgoIGxWZWN0b3IgKTtcblx0XHRsaWdodC5jb2xvciA9IHBvaW50TGlnaHQuY29sb3I7XG5cdFx0bGlnaHQuY29sb3IgKj0gZ2V0RGlzdGFuY2VBdHRlbnVhdGlvbiggbGlnaHREaXN0YW5jZSwgcG9pbnRMaWdodC5kaXN0YW5jZSwgcG9pbnRMaWdodC5kZWNheSApO1xuXHRcdGxpZ2h0LnZpc2libGUgPSAoIGxpZ2h0LmNvbG9yICE9IHZlYzMoIDAuMCApICk7XG5cdH1cbiNlbmRpZlxuI2lmIE5VTV9TUE9UX0xJR0hUUyA+IDBcblx0c3RydWN0IFNwb3RMaWdodCB7XG5cdFx0dmVjMyBwb3NpdGlvbjtcblx0XHR2ZWMzIGRpcmVjdGlvbjtcblx0XHR2ZWMzIGNvbG9yO1xuXHRcdGZsb2F0IGRpc3RhbmNlO1xuXHRcdGZsb2F0IGRlY2F5O1xuXHRcdGZsb2F0IGNvbmVDb3M7XG5cdFx0ZmxvYXQgcGVudW1icmFDb3M7XG5cdH07XG5cdHVuaWZvcm0gU3BvdExpZ2h0IHNwb3RMaWdodHNbIE5VTV9TUE9UX0xJR0hUUyBdO1xuXHR2b2lkIGdldFNwb3RMaWdodEluZm8oIGNvbnN0IGluIFNwb3RMaWdodCBzcG90TGlnaHQsIGNvbnN0IGluIEdlb21ldHJpY0NvbnRleHQgZ2VvbWV0cnksIG91dCBJbmNpZGVudExpZ2h0IGxpZ2h0ICkge1xuXHRcdHZlYzMgbFZlY3RvciA9IHNwb3RMaWdodC5wb3NpdGlvbiAtIGdlb21ldHJ5LnBvc2l0aW9uO1xuXHRcdGxpZ2h0LmRpcmVjdGlvbiA9IG5vcm1hbGl6ZSggbFZlY3RvciApO1xuXHRcdGZsb2F0IGFuZ2xlQ29zID0gZG90KCBsaWdodC5kaXJlY3Rpb24sIHNwb3RMaWdodC5kaXJlY3Rpb24gKTtcblx0XHRmbG9hdCBzcG90QXR0ZW51YXRpb24gPSBnZXRTcG90QXR0ZW51YXRpb24oIHNwb3RMaWdodC5jb25lQ29zLCBzcG90TGlnaHQucGVudW1icmFDb3MsIGFuZ2xlQ29zICk7XG5cdFx0aWYgKCBzcG90QXR0ZW51YXRpb24gPiAwLjAgKSB7XG5cdFx0XHRmbG9hdCBsaWdodERpc3RhbmNlID0gbGVuZ3RoKCBsVmVjdG9yICk7XG5cdFx0XHRsaWdodC5jb2xvciA9IHNwb3RMaWdodC5jb2xvciAqIHNwb3RBdHRlbnVhdGlvbjtcblx0XHRcdGxpZ2h0LmNvbG9yICo9IGdldERpc3RhbmNlQXR0ZW51YXRpb24oIGxpZ2h0RGlzdGFuY2UsIHNwb3RMaWdodC5kaXN0YW5jZSwgc3BvdExpZ2h0LmRlY2F5ICk7XG5cdFx0XHRsaWdodC52aXNpYmxlID0gKCBsaWdodC5jb2xvciAhPSB2ZWMzKCAwLjAgKSApO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRsaWdodC5jb2xvciA9IHZlYzMoIDAuMCApO1xuXHRcdFx0bGlnaHQudmlzaWJsZSA9IGZhbHNlO1xuXHRcdH1cblx0fVxuI2VuZGlmXG4jaWYgTlVNX1JFQ1RfQVJFQV9MSUdIVFMgPiAwXG5cdHN0cnVjdCBSZWN0QXJlYUxpZ2h0IHtcblx0XHR2ZWMzIGNvbG9yO1xuXHRcdHZlYzMgcG9zaXRpb247XG5cdFx0dmVjMyBoYWxmV2lkdGg7XG5cdFx0dmVjMyBoYWxmSGVpZ2h0O1xuXHR9O1xuXHR1bmlmb3JtIHNhbXBsZXIyRCBsdGNfMTtcdHVuaWZvcm0gc2FtcGxlcjJEIGx0Y18yO1xuXHR1bmlmb3JtIFJlY3RBcmVhTGlnaHQgcmVjdEFyZWFMaWdodHNbIE5VTV9SRUNUX0FSRUFfTElHSFRTIF07XG4jZW5kaWZcbiNpZiBOVU1fSEVNSV9MSUdIVFMgPiAwXG5cdHN0cnVjdCBIZW1pc3BoZXJlTGlnaHQge1xuXHRcdHZlYzMgZGlyZWN0aW9uO1xuXHRcdHZlYzMgc2t5Q29sb3I7XG5cdFx0dmVjMyBncm91bmRDb2xvcjtcblx0fTtcblx0dW5pZm9ybSBIZW1pc3BoZXJlTGlnaHQgaGVtaXNwaGVyZUxpZ2h0c1sgTlVNX0hFTUlfTElHSFRTIF07XG5cdHZlYzMgZ2V0SGVtaXNwaGVyZUxpZ2h0SXJyYWRpYW5jZSggY29uc3QgaW4gSGVtaXNwaGVyZUxpZ2h0IGhlbWlMaWdodCwgY29uc3QgaW4gdmVjMyBub3JtYWwgKSB7XG5cdFx0ZmxvYXQgZG90TkwgPSBkb3QoIG5vcm1hbCwgaGVtaUxpZ2h0LmRpcmVjdGlvbiApO1xuXHRcdGZsb2F0IGhlbWlEaWZmdXNlV2VpZ2h0ID0gMC41ICogZG90TkwgKyAwLjU7XG5cdFx0dmVjMyBpcnJhZGlhbmNlID0gbWl4KCBoZW1pTGlnaHQuZ3JvdW5kQ29sb3IsIGhlbWlMaWdodC5za3lDb2xvciwgaGVtaURpZmZ1c2VXZWlnaHQgKTtcblx0XHRyZXR1cm4gaXJyYWRpYW5jZTtcblx0fVxuI2VuZGlmIjt2YXIgZW52bWFwX3BoeXNpY2FsX3BhcnNfZnJhZ21lbnQ9IiNpZiBkZWZpbmVkKCBVU0VfRU5WTUFQIClcblx0I2lmZGVmIEVOVk1BUF9NT0RFX1JFRlJBQ1RJT05cblx0XHR1bmlmb3JtIGZsb2F0IHJlZnJhY3Rpb25SYXRpbztcblx0I2VuZGlmXG5cdHZlYzMgZ2V0SUJMSXJyYWRpYW5jZSggY29uc3QgaW4gdmVjMyBub3JtYWwgKSB7XG5cdFx0I2lmIGRlZmluZWQoIEVOVk1BUF9UWVBFX0NVQkVfVVYgKVxuXHRcdFx0dmVjMyB3b3JsZE5vcm1hbCA9IGludmVyc2VUcmFuc2Zvcm1EaXJlY3Rpb24oIG5vcm1hbCwgdmlld01hdHJpeCApO1xuXHRcdFx0dmVjNCBlbnZNYXBDb2xvciA9IHRleHR1cmVDdWJlVVYoIGVudk1hcCwgd29ybGROb3JtYWwsIDEuMCApO1xuXHRcdFx0cmV0dXJuIFBJICogZW52TWFwQ29sb3IucmdiICogZW52TWFwSW50ZW5zaXR5O1xuXHRcdCNlbHNlXG5cdFx0XHRyZXR1cm4gdmVjMyggMC4wICk7XG5cdFx0I2VuZGlmXG5cdH1cblx0dmVjMyBnZXRJQkxSYWRpYW5jZSggY29uc3QgaW4gdmVjMyB2aWV3RGlyLCBjb25zdCBpbiB2ZWMzIG5vcm1hbCwgY29uc3QgaW4gZmxvYXQgcm91Z2huZXNzICkge1xuXHRcdCNpZiBkZWZpbmVkKCBFTlZNQVBfVFlQRV9DVUJFX1VWIClcblx0XHRcdHZlYzMgcmVmbGVjdFZlYztcblx0XHRcdCNpZmRlZiBFTlZNQVBfTU9ERV9SRUZMRUNUSU9OXG5cdFx0XHRcdHJlZmxlY3RWZWMgPSByZWZsZWN0KCAtIHZpZXdEaXIsIG5vcm1hbCApO1xuXHRcdFx0XHRyZWZsZWN0VmVjID0gbm9ybWFsaXplKCBtaXgoIHJlZmxlY3RWZWMsIG5vcm1hbCwgcm91Z2huZXNzICogcm91Z2huZXNzKSApO1xuXHRcdFx0I2Vsc2Vcblx0XHRcdFx0cmVmbGVjdFZlYyA9IHJlZnJhY3QoIC0gdmlld0Rpciwgbm9ybWFsLCByZWZyYWN0aW9uUmF0aW8gKTtcblx0XHRcdCNlbmRpZlxuXHRcdFx0cmVmbGVjdFZlYyA9IGludmVyc2VUcmFuc2Zvcm1EaXJlY3Rpb24oIHJlZmxlY3RWZWMsIHZpZXdNYXRyaXggKTtcblx0XHRcdHZlYzQgZW52TWFwQ29sb3IgPSB0ZXh0dXJlQ3ViZVVWKCBlbnZNYXAsIHJlZmxlY3RWZWMsIHJvdWdobmVzcyApO1xuXHRcdFx0cmV0dXJuIGVudk1hcENvbG9yLnJnYiAqIGVudk1hcEludGVuc2l0eTtcblx0XHQjZWxzZVxuXHRcdFx0cmV0dXJuIHZlYzMoIDAuMCApO1xuXHRcdCNlbmRpZlxuXHR9XG4jZW5kaWYiO3ZhciBsaWdodHNfdG9vbl9mcmFnbWVudD0iVG9vbk1hdGVyaWFsIG1hdGVyaWFsO1xubWF0ZXJpYWwuZGlmZnVzZUNvbG9yID0gZGlmZnVzZUNvbG9yLnJnYjsiO3ZhciBsaWdodHNfdG9vbl9wYXJzX2ZyYWdtZW50PSJ2YXJ5aW5nIHZlYzMgdlZpZXdQb3NpdGlvbjtcbnN0cnVjdCBUb29uTWF0ZXJpYWwge1xuXHR2ZWMzIGRpZmZ1c2VDb2xvcjtcbn07XG52b2lkIFJFX0RpcmVjdF9Ub29uKCBjb25zdCBpbiBJbmNpZGVudExpZ2h0IGRpcmVjdExpZ2h0LCBjb25zdCBpbiBHZW9tZXRyaWNDb250ZXh0IGdlb21ldHJ5LCBjb25zdCBpbiBUb29uTWF0ZXJpYWwgbWF0ZXJpYWwsIGlub3V0IFJlZmxlY3RlZExpZ2h0IHJlZmxlY3RlZExpZ2h0ICkge1xuXHR2ZWMzIGlycmFkaWFuY2UgPSBnZXRHcmFkaWVudElycmFkaWFuY2UoIGdlb21ldHJ5Lm5vcm1hbCwgZGlyZWN0TGlnaHQuZGlyZWN0aW9uICkgKiBkaXJlY3RMaWdodC5jb2xvcjtcblx0cmVmbGVjdGVkTGlnaHQuZGlyZWN0RGlmZnVzZSArPSBpcnJhZGlhbmNlICogQlJERl9MYW1iZXJ0KCBtYXRlcmlhbC5kaWZmdXNlQ29sb3IgKTtcbn1cbnZvaWQgUkVfSW5kaXJlY3REaWZmdXNlX1Rvb24oIGNvbnN0IGluIHZlYzMgaXJyYWRpYW5jZSwgY29uc3QgaW4gR2VvbWV0cmljQ29udGV4dCBnZW9tZXRyeSwgY29uc3QgaW4gVG9vbk1hdGVyaWFsIG1hdGVyaWFsLCBpbm91dCBSZWZsZWN0ZWRMaWdodCByZWZsZWN0ZWRMaWdodCApIHtcblx0cmVmbGVjdGVkTGlnaHQuaW5kaXJlY3REaWZmdXNlICs9IGlycmFkaWFuY2UgKiBCUkRGX0xhbWJlcnQoIG1hdGVyaWFsLmRpZmZ1c2VDb2xvciApO1xufVxuI2RlZmluZSBSRV9EaXJlY3RcdFx0XHRcdFJFX0RpcmVjdF9Ub29uXG4jZGVmaW5lIFJFX0luZGlyZWN0RGlmZnVzZVx0XHRSRV9JbmRpcmVjdERpZmZ1c2VfVG9vblxuI2RlZmluZSBNYXRlcmlhbF9MaWdodFByb2JlTE9EKCBtYXRlcmlhbCApXHQoMCkiO3ZhciBsaWdodHNfcGhvbmdfZnJhZ21lbnQ9IkJsaW5uUGhvbmdNYXRlcmlhbCBtYXRlcmlhbDtcbm1hdGVyaWFsLmRpZmZ1c2VDb2xvciA9IGRpZmZ1c2VDb2xvci5yZ2I7XG5tYXRlcmlhbC5zcGVjdWxhckNvbG9yID0gc3BlY3VsYXI7XG5tYXRlcmlhbC5zcGVjdWxhclNoaW5pbmVzcyA9IHNoaW5pbmVzcztcbm1hdGVyaWFsLnNwZWN1bGFyU3RyZW5ndGggPSBzcGVjdWxhclN0cmVuZ3RoOyI7dmFyIGxpZ2h0c19waG9uZ19wYXJzX2ZyYWdtZW50PSJ2YXJ5aW5nIHZlYzMgdlZpZXdQb3NpdGlvbjtcbnN0cnVjdCBCbGlublBob25nTWF0ZXJpYWwge1xuXHR2ZWMzIGRpZmZ1c2VDb2xvcjtcblx0dmVjMyBzcGVjdWxhckNvbG9yO1xuXHRmbG9hdCBzcGVjdWxhclNoaW5pbmVzcztcblx0ZmxvYXQgc3BlY3VsYXJTdHJlbmd0aDtcbn07XG52b2lkIFJFX0RpcmVjdF9CbGlublBob25nKCBjb25zdCBpbiBJbmNpZGVudExpZ2h0IGRpcmVjdExpZ2h0LCBjb25zdCBpbiBHZW9tZXRyaWNDb250ZXh0IGdlb21ldHJ5LCBjb25zdCBpbiBCbGlublBob25nTWF0ZXJpYWwgbWF0ZXJpYWwsIGlub3V0IFJlZmxlY3RlZExpZ2h0IHJlZmxlY3RlZExpZ2h0ICkge1xuXHRmbG9hdCBkb3ROTCA9IHNhdHVyYXRlKCBkb3QoIGdlb21ldHJ5Lm5vcm1hbCwgZGlyZWN0TGlnaHQuZGlyZWN0aW9uICkgKTtcblx0dmVjMyBpcnJhZGlhbmNlID0gZG90TkwgKiBkaXJlY3RMaWdodC5jb2xvcjtcblx0cmVmbGVjdGVkTGlnaHQuZGlyZWN0RGlmZnVzZSArPSBpcnJhZGlhbmNlICogQlJERl9MYW1iZXJ0KCBtYXRlcmlhbC5kaWZmdXNlQ29sb3IgKTtcblx0cmVmbGVjdGVkTGlnaHQuZGlyZWN0U3BlY3VsYXIgKz0gaXJyYWRpYW5jZSAqIEJSREZfQmxpbm5QaG9uZyggZGlyZWN0TGlnaHQuZGlyZWN0aW9uLCBnZW9tZXRyeS52aWV3RGlyLCBnZW9tZXRyeS5ub3JtYWwsIG1hdGVyaWFsLnNwZWN1bGFyQ29sb3IsIG1hdGVyaWFsLnNwZWN1bGFyU2hpbmluZXNzICkgKiBtYXRlcmlhbC5zcGVjdWxhclN0cmVuZ3RoO1xufVxudm9pZCBSRV9JbmRpcmVjdERpZmZ1c2VfQmxpbm5QaG9uZyggY29uc3QgaW4gdmVjMyBpcnJhZGlhbmNlLCBjb25zdCBpbiBHZW9tZXRyaWNDb250ZXh0IGdlb21ldHJ5LCBjb25zdCBpbiBCbGlublBob25nTWF0ZXJpYWwgbWF0ZXJpYWwsIGlub3V0IFJlZmxlY3RlZExpZ2h0IHJlZmxlY3RlZExpZ2h0ICkge1xuXHRyZWZsZWN0ZWRMaWdodC5pbmRpcmVjdERpZmZ1c2UgKz0gaXJyYWRpYW5jZSAqIEJSREZfTGFtYmVydCggbWF0ZXJpYWwuZGlmZnVzZUNvbG9yICk7XG59XG4jZGVmaW5lIFJFX0RpcmVjdFx0XHRcdFx0UkVfRGlyZWN0X0JsaW5uUGhvbmdcbiNkZWZpbmUgUkVfSW5kaXJlY3REaWZmdXNlXHRcdFJFX0luZGlyZWN0RGlmZnVzZV9CbGlublBob25nXG4jZGVmaW5lIE1hdGVyaWFsX0xpZ2h0UHJvYmVMT0QoIG1hdGVyaWFsIClcdCgwKSI7dmFyIGxpZ2h0c19waHlzaWNhbF9mcmFnbWVudD0iUGh5c2ljYWxNYXRlcmlhbCBtYXRlcmlhbDtcbm1hdGVyaWFsLmRpZmZ1c2VDb2xvciA9IGRpZmZ1c2VDb2xvci5yZ2IgKiAoIDEuMCAtIG1ldGFsbmVzc0ZhY3RvciApO1xudmVjMyBkeHkgPSBtYXgoIGFicyggZEZkeCggZ2VvbWV0cnlOb3JtYWwgKSApLCBhYnMoIGRGZHkoIGdlb21ldHJ5Tm9ybWFsICkgKSApO1xuZmxvYXQgZ2VvbWV0cnlSb3VnaG5lc3MgPSBtYXgoIG1heCggZHh5LngsIGR4eS55ICksIGR4eS56ICk7XG5tYXRlcmlhbC5yb3VnaG5lc3MgPSBtYXgoIHJvdWdobmVzc0ZhY3RvciwgMC4wNTI1ICk7bWF0ZXJpYWwucm91Z2huZXNzICs9IGdlb21ldHJ5Um91Z2huZXNzO1xubWF0ZXJpYWwucm91Z2huZXNzID0gbWluKCBtYXRlcmlhbC5yb3VnaG5lc3MsIDEuMCApO1xuI2lmZGVmIElPUlxuXHQjaWZkZWYgU1BFQ1VMQVJcblx0XHRmbG9hdCBzcGVjdWxhckludGVuc2l0eUZhY3RvciA9IHNwZWN1bGFySW50ZW5zaXR5O1xuXHRcdHZlYzMgc3BlY3VsYXJDb2xvckZhY3RvciA9IHNwZWN1bGFyQ29sb3I7XG5cdFx0I2lmZGVmIFVTRV9TUEVDVUxBUklOVEVOU0lUWU1BUFxuXHRcdFx0c3BlY3VsYXJJbnRlbnNpdHlGYWN0b3IgKj0gdGV4dHVyZTJEKCBzcGVjdWxhckludGVuc2l0eU1hcCwgdlV2ICkuYTtcblx0XHQjZW5kaWZcblx0XHQjaWZkZWYgVVNFX1NQRUNVTEFSQ09MT1JNQVBcblx0XHRcdHNwZWN1bGFyQ29sb3JGYWN0b3IgKj0gc3BlY3VsYXJDb2xvck1hcFRleGVsVG9MaW5lYXIoIHRleHR1cmUyRCggc3BlY3VsYXJDb2xvck1hcCwgdlV2ICkgKS5yZ2I7XG5cdFx0I2VuZGlmXG5cdFx0bWF0ZXJpYWwuc3BlY3VsYXJGOTAgPSBtaXgoIHNwZWN1bGFySW50ZW5zaXR5RmFjdG9yLCAxLjAsIG1ldGFsbmVzc0ZhY3RvciApO1xuXHQjZWxzZVxuXHRcdGZsb2F0IHNwZWN1bGFySW50ZW5zaXR5RmFjdG9yID0gMS4wO1xuXHRcdHZlYzMgc3BlY3VsYXJDb2xvckZhY3RvciA9IHZlYzMoIDEuMCApO1xuXHRcdG1hdGVyaWFsLnNwZWN1bGFyRjkwID0gMS4wO1xuXHQjZW5kaWZcblx0bWF0ZXJpYWwuc3BlY3VsYXJDb2xvciA9IG1peCggbWluKCBwb3cyKCAoIGlvciAtIDEuMCApIC8gKCBpb3IgKyAxLjAgKSApICogc3BlY3VsYXJDb2xvckZhY3RvciwgdmVjMyggMS4wICkgKSAqIHNwZWN1bGFySW50ZW5zaXR5RmFjdG9yLCBkaWZmdXNlQ29sb3IucmdiLCBtZXRhbG5lc3NGYWN0b3IgKTtcbiNlbHNlXG5cdG1hdGVyaWFsLnNwZWN1bGFyQ29sb3IgPSBtaXgoIHZlYzMoIDAuMDQgKSwgZGlmZnVzZUNvbG9yLnJnYiwgbWV0YWxuZXNzRmFjdG9yICk7XG5cdG1hdGVyaWFsLnNwZWN1bGFyRjkwID0gMS4wO1xuI2VuZGlmXG4jaWZkZWYgVVNFX0NMRUFSQ09BVFxuXHRtYXRlcmlhbC5jbGVhcmNvYXQgPSBjbGVhcmNvYXQ7XG5cdG1hdGVyaWFsLmNsZWFyY29hdFJvdWdobmVzcyA9IGNsZWFyY29hdFJvdWdobmVzcztcblx0bWF0ZXJpYWwuY2xlYXJjb2F0RjAgPSB2ZWMzKCAwLjA0ICk7XG5cdG1hdGVyaWFsLmNsZWFyY29hdEY5MCA9IDEuMDtcblx0I2lmZGVmIFVTRV9DTEVBUkNPQVRNQVBcblx0XHRtYXRlcmlhbC5jbGVhcmNvYXQgKj0gdGV4dHVyZTJEKCBjbGVhcmNvYXRNYXAsIHZVdiApLng7XG5cdCNlbmRpZlxuXHQjaWZkZWYgVVNFX0NMRUFSQ09BVF9ST1VHSE5FU1NNQVBcblx0XHRtYXRlcmlhbC5jbGVhcmNvYXRSb3VnaG5lc3MgKj0gdGV4dHVyZTJEKCBjbGVhcmNvYXRSb3VnaG5lc3NNYXAsIHZVdiApLnk7XG5cdCNlbmRpZlxuXHRtYXRlcmlhbC5jbGVhcmNvYXQgPSBzYXR1cmF0ZSggbWF0ZXJpYWwuY2xlYXJjb2F0ICk7XHRtYXRlcmlhbC5jbGVhcmNvYXRSb3VnaG5lc3MgPSBtYXgoIG1hdGVyaWFsLmNsZWFyY29hdFJvdWdobmVzcywgMC4wNTI1ICk7XG5cdG1hdGVyaWFsLmNsZWFyY29hdFJvdWdobmVzcyArPSBnZW9tZXRyeVJvdWdobmVzcztcblx0bWF0ZXJpYWwuY2xlYXJjb2F0Um91Z2huZXNzID0gbWluKCBtYXRlcmlhbC5jbGVhcmNvYXRSb3VnaG5lc3MsIDEuMCApO1xuI2VuZGlmXG4jaWZkZWYgVVNFX1NIRUVOXG5cdG1hdGVyaWFsLnNoZWVuQ29sb3IgPSBzaGVlbkNvbG9yO1xuXHQjaWZkZWYgVVNFX1NIRUVOQ09MT1JNQVBcblx0XHRtYXRlcmlhbC5zaGVlbkNvbG9yICo9IHNoZWVuQ29sb3JNYXBUZXhlbFRvTGluZWFyKCB0ZXh0dXJlMkQoIHNoZWVuQ29sb3JNYXAsIHZVdiApICkucmdiO1xuXHQjZW5kaWZcblx0bWF0ZXJpYWwuc2hlZW5Sb3VnaG5lc3MgPSBjbGFtcCggc2hlZW5Sb3VnaG5lc3MsIDAuMDcsIDEuMCApO1xuXHQjaWZkZWYgVVNFX1NIRUVOUk9VR0hORVNTTUFQXG5cdFx0bWF0ZXJpYWwuc2hlZW5Sb3VnaG5lc3MgKj0gdGV4dHVyZTJEKCBzaGVlblJvdWdobmVzc01hcCwgdlV2ICkuYTtcblx0I2VuZGlmXG4jZW5kaWYiO3ZhciBsaWdodHNfcGh5c2ljYWxfcGFyc19mcmFnbWVudD0ic3RydWN0IFBoeXNpY2FsTWF0ZXJpYWwge1xuXHR2ZWMzIGRpZmZ1c2VDb2xvcjtcblx0ZmxvYXQgcm91Z2huZXNzO1xuXHR2ZWMzIHNwZWN1bGFyQ29sb3I7XG5cdGZsb2F0IHNwZWN1bGFyRjkwO1xuXHQjaWZkZWYgVVNFX0NMRUFSQ09BVFxuXHRcdGZsb2F0IGNsZWFyY29hdDtcblx0XHRmbG9hdCBjbGVhcmNvYXRSb3VnaG5lc3M7XG5cdFx0dmVjMyBjbGVhcmNvYXRGMDtcblx0XHRmbG9hdCBjbGVhcmNvYXRGOTA7XG5cdCNlbmRpZlxuXHQjaWZkZWYgVVNFX1NIRUVOXG5cdFx0dmVjMyBzaGVlbkNvbG9yO1xuXHRcdGZsb2F0IHNoZWVuUm91Z2huZXNzO1xuXHQjZW5kaWZcbn07XG52ZWMzIGNsZWFyY29hdFNwZWN1bGFyID0gdmVjMyggMC4wICk7XG52ZWMyIERGR0FwcHJveCggY29uc3QgaW4gdmVjMyBub3JtYWwsIGNvbnN0IGluIHZlYzMgdmlld0RpciwgY29uc3QgaW4gZmxvYXQgcm91Z2huZXNzICkge1xuXHRmbG9hdCBkb3ROViA9IHNhdHVyYXRlKCBkb3QoIG5vcm1hbCwgdmlld0RpciApICk7XG5cdGNvbnN0IHZlYzQgYzAgPSB2ZWM0KCAtIDEsIC0gMC4wMjc1LCAtIDAuNTcyLCAwLjAyMiApO1xuXHRjb25zdCB2ZWM0IGMxID0gdmVjNCggMSwgMC4wNDI1LCAxLjA0LCAtIDAuMDQgKTtcblx0dmVjNCByID0gcm91Z2huZXNzICogYzAgKyBjMTtcblx0ZmxvYXQgYTAwNCA9IG1pbiggci54ICogci54LCBleHAyKCAtIDkuMjggKiBkb3ROViApICkgKiByLnggKyByLnk7XG5cdHZlYzIgZmFiID0gdmVjMiggLSAxLjA0LCAxLjA0ICkgKiBhMDA0ICsgci56dztcblx0cmV0dXJuIGZhYjtcbn1cbnZlYzMgRW52aXJvbm1lbnRCUkRGKCBjb25zdCBpbiB2ZWMzIG5vcm1hbCwgY29uc3QgaW4gdmVjMyB2aWV3RGlyLCBjb25zdCBpbiB2ZWMzIHNwZWN1bGFyQ29sb3IsIGNvbnN0IGluIGZsb2F0IHNwZWN1bGFyRjkwLCBjb25zdCBpbiBmbG9hdCByb3VnaG5lc3MgKSB7XG5cdHZlYzIgZmFiID0gREZHQXBwcm94KCBub3JtYWwsIHZpZXdEaXIsIHJvdWdobmVzcyApO1xuXHRyZXR1cm4gc3BlY3VsYXJDb2xvciAqIGZhYi54ICsgc3BlY3VsYXJGOTAgKiBmYWIueTtcbn1cbnZvaWQgY29tcHV0ZU11bHRpc2NhdHRlcmluZyggY29uc3QgaW4gdmVjMyBub3JtYWwsIGNvbnN0IGluIHZlYzMgdmlld0RpciwgY29uc3QgaW4gdmVjMyBzcGVjdWxhckNvbG9yLCBjb25zdCBpbiBmbG9hdCBzcGVjdWxhckY5MCwgY29uc3QgaW4gZmxvYXQgcm91Z2huZXNzLCBpbm91dCB2ZWMzIHNpbmdsZVNjYXR0ZXIsIGlub3V0IHZlYzMgbXVsdGlTY2F0dGVyICkge1xuXHR2ZWMyIGZhYiA9IERGR0FwcHJveCggbm9ybWFsLCB2aWV3RGlyLCByb3VnaG5lc3MgKTtcblx0dmVjMyBGc3NFc3MgPSBzcGVjdWxhckNvbG9yICogZmFiLnggKyBzcGVjdWxhckY5MCAqIGZhYi55O1xuXHRmbG9hdCBFc3MgPSBmYWIueCArIGZhYi55O1xuXHRmbG9hdCBFbXMgPSAxLjAgLSBFc3M7XG5cdHZlYzMgRmF2ZyA9IHNwZWN1bGFyQ29sb3IgKyAoIDEuMCAtIHNwZWN1bGFyQ29sb3IgKSAqIDAuMDQ3NjE5O1x0dmVjMyBGbXMgPSBGc3NFc3MgKiBGYXZnIC8gKCAxLjAgLSBFbXMgKiBGYXZnICk7XG5cdHNpbmdsZVNjYXR0ZXIgKz0gRnNzRXNzO1xuXHRtdWx0aVNjYXR0ZXIgKz0gRm1zICogRW1zO1xufVxuI2lmIE5VTV9SRUNUX0FSRUFfTElHSFRTID4gMFxuXHR2b2lkIFJFX0RpcmVjdF9SZWN0QXJlYV9QaHlzaWNhbCggY29uc3QgaW4gUmVjdEFyZWFMaWdodCByZWN0QXJlYUxpZ2h0LCBjb25zdCBpbiBHZW9tZXRyaWNDb250ZXh0IGdlb21ldHJ5LCBjb25zdCBpbiBQaHlzaWNhbE1hdGVyaWFsIG1hdGVyaWFsLCBpbm91dCBSZWZsZWN0ZWRMaWdodCByZWZsZWN0ZWRMaWdodCApIHtcblx0XHR2ZWMzIG5vcm1hbCA9IGdlb21ldHJ5Lm5vcm1hbDtcblx0XHR2ZWMzIHZpZXdEaXIgPSBnZW9tZXRyeS52aWV3RGlyO1xuXHRcdHZlYzMgcG9zaXRpb24gPSBnZW9tZXRyeS5wb3NpdGlvbjtcblx0XHR2ZWMzIGxpZ2h0UG9zID0gcmVjdEFyZWFMaWdodC5wb3NpdGlvbjtcblx0XHR2ZWMzIGhhbGZXaWR0aCA9IHJlY3RBcmVhTGlnaHQuaGFsZldpZHRoO1xuXHRcdHZlYzMgaGFsZkhlaWdodCA9IHJlY3RBcmVhTGlnaHQuaGFsZkhlaWdodDtcblx0XHR2ZWMzIGxpZ2h0Q29sb3IgPSByZWN0QXJlYUxpZ2h0LmNvbG9yO1xuXHRcdGZsb2F0IHJvdWdobmVzcyA9IG1hdGVyaWFsLnJvdWdobmVzcztcblx0XHR2ZWMzIHJlY3RDb29yZHNbIDQgXTtcblx0XHRyZWN0Q29vcmRzWyAwIF0gPSBsaWdodFBvcyArIGhhbGZXaWR0aCAtIGhhbGZIZWlnaHQ7XHRcdHJlY3RDb29yZHNbIDEgXSA9IGxpZ2h0UG9zIC0gaGFsZldpZHRoIC0gaGFsZkhlaWdodDtcblx0XHRyZWN0Q29vcmRzWyAyIF0gPSBsaWdodFBvcyAtIGhhbGZXaWR0aCArIGhhbGZIZWlnaHQ7XG5cdFx0cmVjdENvb3Jkc1sgMyBdID0gbGlnaHRQb3MgKyBoYWxmV2lkdGggKyBoYWxmSGVpZ2h0O1xuXHRcdHZlYzIgdXYgPSBMVENfVXYoIG5vcm1hbCwgdmlld0Rpciwgcm91Z2huZXNzICk7XG5cdFx0dmVjNCB0MSA9IHRleHR1cmUyRCggbHRjXzEsIHV2ICk7XG5cdFx0dmVjNCB0MiA9IHRleHR1cmUyRCggbHRjXzIsIHV2ICk7XG5cdFx0bWF0MyBtSW52ID0gbWF0Myhcblx0XHRcdHZlYzMoIHQxLngsIDAsIHQxLnkgKSxcblx0XHRcdHZlYzMoICAgIDAsIDEsICAgIDAgKSxcblx0XHRcdHZlYzMoIHQxLnosIDAsIHQxLncgKVxuXHRcdCk7XG5cdFx0dmVjMyBmcmVzbmVsID0gKCBtYXRlcmlhbC5zcGVjdWxhckNvbG9yICogdDIueCArICggdmVjMyggMS4wICkgLSBtYXRlcmlhbC5zcGVjdWxhckNvbG9yICkgKiB0Mi55ICk7XG5cdFx0cmVmbGVjdGVkTGlnaHQuZGlyZWN0U3BlY3VsYXIgKz0gbGlnaHRDb2xvciAqIGZyZXNuZWwgKiBMVENfRXZhbHVhdGUoIG5vcm1hbCwgdmlld0RpciwgcG9zaXRpb24sIG1JbnYsIHJlY3RDb29yZHMgKTtcblx0XHRyZWZsZWN0ZWRMaWdodC5kaXJlY3REaWZmdXNlICs9IGxpZ2h0Q29sb3IgKiBtYXRlcmlhbC5kaWZmdXNlQ29sb3IgKiBMVENfRXZhbHVhdGUoIG5vcm1hbCwgdmlld0RpciwgcG9zaXRpb24sIG1hdDMoIDEuMCApLCByZWN0Q29vcmRzICk7XG5cdH1cbiNlbmRpZlxudm9pZCBSRV9EaXJlY3RfUGh5c2ljYWwoIGNvbnN0IGluIEluY2lkZW50TGlnaHQgZGlyZWN0TGlnaHQsIGNvbnN0IGluIEdlb21ldHJpY0NvbnRleHQgZ2VvbWV0cnksIGNvbnN0IGluIFBoeXNpY2FsTWF0ZXJpYWwgbWF0ZXJpYWwsIGlub3V0IFJlZmxlY3RlZExpZ2h0IHJlZmxlY3RlZExpZ2h0ICkge1xuXHRmbG9hdCBkb3ROTCA9IHNhdHVyYXRlKCBkb3QoIGdlb21ldHJ5Lm5vcm1hbCwgZGlyZWN0TGlnaHQuZGlyZWN0aW9uICkgKTtcblx0dmVjMyBpcnJhZGlhbmNlID0gZG90TkwgKiBkaXJlY3RMaWdodC5jb2xvcjtcblx0I2lmZGVmIFVTRV9DTEVBUkNPQVRcblx0XHRmbG9hdCBkb3ROTGNjID0gc2F0dXJhdGUoIGRvdCggZ2VvbWV0cnkuY2xlYXJjb2F0Tm9ybWFsLCBkaXJlY3RMaWdodC5kaXJlY3Rpb24gKSApO1xuXHRcdHZlYzMgY2NJcnJhZGlhbmNlID0gZG90TkxjYyAqIGRpcmVjdExpZ2h0LmNvbG9yO1xuXHRcdGNsZWFyY29hdFNwZWN1bGFyICs9IGNjSXJyYWRpYW5jZSAqIEJSREZfR0dYKCBkaXJlY3RMaWdodC5kaXJlY3Rpb24sIGdlb21ldHJ5LnZpZXdEaXIsIGdlb21ldHJ5LmNsZWFyY29hdE5vcm1hbCwgbWF0ZXJpYWwuY2xlYXJjb2F0RjAsIG1hdGVyaWFsLmNsZWFyY29hdEY5MCwgbWF0ZXJpYWwuY2xlYXJjb2F0Um91Z2huZXNzICk7XG5cdCNlbmRpZlxuXHQjaWZkZWYgVVNFX1NIRUVOXG5cdFx0cmVmbGVjdGVkTGlnaHQuZGlyZWN0U3BlY3VsYXIgKz0gaXJyYWRpYW5jZSAqIEJSREZfU2hlZW4oIGRpcmVjdExpZ2h0LmRpcmVjdGlvbiwgZ2VvbWV0cnkudmlld0RpciwgZ2VvbWV0cnkubm9ybWFsLCBtYXRlcmlhbC5zaGVlbkNvbG9yLCBtYXRlcmlhbC5zaGVlblJvdWdobmVzcyApO1xuXHQjZW5kaWZcblx0cmVmbGVjdGVkTGlnaHQuZGlyZWN0U3BlY3VsYXIgKz0gaXJyYWRpYW5jZSAqIEJSREZfR0dYKCBkaXJlY3RMaWdodC5kaXJlY3Rpb24sIGdlb21ldHJ5LnZpZXdEaXIsIGdlb21ldHJ5Lm5vcm1hbCwgbWF0ZXJpYWwuc3BlY3VsYXJDb2xvciwgbWF0ZXJpYWwuc3BlY3VsYXJGOTAsIG1hdGVyaWFsLnJvdWdobmVzcyApO1xuXHRyZWZsZWN0ZWRMaWdodC5kaXJlY3REaWZmdXNlICs9IGlycmFkaWFuY2UgKiBCUkRGX0xhbWJlcnQoIG1hdGVyaWFsLmRpZmZ1c2VDb2xvciApO1xufVxudm9pZCBSRV9JbmRpcmVjdERpZmZ1c2VfUGh5c2ljYWwoIGNvbnN0IGluIHZlYzMgaXJyYWRpYW5jZSwgY29uc3QgaW4gR2VvbWV0cmljQ29udGV4dCBnZW9tZXRyeSwgY29uc3QgaW4gUGh5c2ljYWxNYXRlcmlhbCBtYXRlcmlhbCwgaW5vdXQgUmVmbGVjdGVkTGlnaHQgcmVmbGVjdGVkTGlnaHQgKSB7XG5cdHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0RGlmZnVzZSArPSBpcnJhZGlhbmNlICogQlJERl9MYW1iZXJ0KCBtYXRlcmlhbC5kaWZmdXNlQ29sb3IgKTtcbn1cbnZvaWQgUkVfSW5kaXJlY3RTcGVjdWxhcl9QaHlzaWNhbCggY29uc3QgaW4gdmVjMyByYWRpYW5jZSwgY29uc3QgaW4gdmVjMyBpcnJhZGlhbmNlLCBjb25zdCBpbiB2ZWMzIGNsZWFyY29hdFJhZGlhbmNlLCBjb25zdCBpbiBHZW9tZXRyaWNDb250ZXh0IGdlb21ldHJ5LCBjb25zdCBpbiBQaHlzaWNhbE1hdGVyaWFsIG1hdGVyaWFsLCBpbm91dCBSZWZsZWN0ZWRMaWdodCByZWZsZWN0ZWRMaWdodCkge1xuXHQjaWZkZWYgVVNFX0NMRUFSQ09BVFxuXHRcdGNsZWFyY29hdFNwZWN1bGFyICs9IGNsZWFyY29hdFJhZGlhbmNlICogRW52aXJvbm1lbnRCUkRGKCBnZW9tZXRyeS5jbGVhcmNvYXROb3JtYWwsIGdlb21ldHJ5LnZpZXdEaXIsIG1hdGVyaWFsLmNsZWFyY29hdEYwLCBtYXRlcmlhbC5jbGVhcmNvYXRGOTAsIG1hdGVyaWFsLmNsZWFyY29hdFJvdWdobmVzcyApO1xuXHQjZW5kaWZcblx0dmVjMyBzaW5nbGVTY2F0dGVyaW5nID0gdmVjMyggMC4wICk7XG5cdHZlYzMgbXVsdGlTY2F0dGVyaW5nID0gdmVjMyggMC4wICk7XG5cdHZlYzMgY29zaW5lV2VpZ2h0ZWRJcnJhZGlhbmNlID0gaXJyYWRpYW5jZSAqIFJFQ0lQUk9DQUxfUEk7XG5cdGNvbXB1dGVNdWx0aXNjYXR0ZXJpbmcoIGdlb21ldHJ5Lm5vcm1hbCwgZ2VvbWV0cnkudmlld0RpciwgbWF0ZXJpYWwuc3BlY3VsYXJDb2xvciwgbWF0ZXJpYWwuc3BlY3VsYXJGOTAsIG1hdGVyaWFsLnJvdWdobmVzcywgc2luZ2xlU2NhdHRlcmluZywgbXVsdGlTY2F0dGVyaW5nICk7XG5cdHZlYzMgZGlmZnVzZSA9IG1hdGVyaWFsLmRpZmZ1c2VDb2xvciAqICggMS4wIC0gKCBzaW5nbGVTY2F0dGVyaW5nICsgbXVsdGlTY2F0dGVyaW5nICkgKTtcblx0cmVmbGVjdGVkTGlnaHQuaW5kaXJlY3RTcGVjdWxhciArPSByYWRpYW5jZSAqIHNpbmdsZVNjYXR0ZXJpbmc7XG5cdHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0U3BlY3VsYXIgKz0gbXVsdGlTY2F0dGVyaW5nICogY29zaW5lV2VpZ2h0ZWRJcnJhZGlhbmNlO1xuXHRyZWZsZWN0ZWRMaWdodC5pbmRpcmVjdERpZmZ1c2UgKz0gZGlmZnVzZSAqIGNvc2luZVdlaWdodGVkSXJyYWRpYW5jZTtcbn1cbiNkZWZpbmUgUkVfRGlyZWN0XHRcdFx0XHRSRV9EaXJlY3RfUGh5c2ljYWxcbiNkZWZpbmUgUkVfRGlyZWN0X1JlY3RBcmVhXHRcdFJFX0RpcmVjdF9SZWN0QXJlYV9QaHlzaWNhbFxuI2RlZmluZSBSRV9JbmRpcmVjdERpZmZ1c2VcdFx0UkVfSW5kaXJlY3REaWZmdXNlX1BoeXNpY2FsXG4jZGVmaW5lIFJFX0luZGlyZWN0U3BlY3VsYXJcdFx0UkVfSW5kaXJlY3RTcGVjdWxhcl9QaHlzaWNhbFxuZmxvYXQgY29tcHV0ZVNwZWN1bGFyT2NjbHVzaW9uKCBjb25zdCBpbiBmbG9hdCBkb3ROViwgY29uc3QgaW4gZmxvYXQgYW1iaWVudE9jY2x1c2lvbiwgY29uc3QgaW4gZmxvYXQgcm91Z2huZXNzICkge1xuXHRyZXR1cm4gc2F0dXJhdGUoIHBvdyggZG90TlYgKyBhbWJpZW50T2NjbHVzaW9uLCBleHAyKCAtIDE2LjAgKiByb3VnaG5lc3MgLSAxLjAgKSApIC0gMS4wICsgYW1iaWVudE9jY2x1c2lvbiApO1xufSI7dmFyIGxpZ2h0c19mcmFnbWVudF9iZWdpbj0iXG5HZW9tZXRyaWNDb250ZXh0IGdlb21ldHJ5O1xuZ2VvbWV0cnkucG9zaXRpb24gPSAtIHZWaWV3UG9zaXRpb247XG5nZW9tZXRyeS5ub3JtYWwgPSBub3JtYWw7XG5nZW9tZXRyeS52aWV3RGlyID0gKCBpc09ydGhvZ3JhcGhpYyApID8gdmVjMyggMCwgMCwgMSApIDogbm9ybWFsaXplKCB2Vmlld1Bvc2l0aW9uICk7XG4jaWZkZWYgVVNFX0NMRUFSQ09BVFxuXHRnZW9tZXRyeS5jbGVhcmNvYXROb3JtYWwgPSBjbGVhcmNvYXROb3JtYWw7XG4jZW5kaWZcbkluY2lkZW50TGlnaHQgZGlyZWN0TGlnaHQ7XG4jaWYgKCBOVU1fUE9JTlRfTElHSFRTID4gMCApICYmIGRlZmluZWQoIFJFX0RpcmVjdCApXG5cdFBvaW50TGlnaHQgcG9pbnRMaWdodDtcblx0I2lmIGRlZmluZWQoIFVTRV9TSEFET1dNQVAgKSAmJiBOVU1fUE9JTlRfTElHSFRfU0hBRE9XUyA+IDBcblx0UG9pbnRMaWdodFNoYWRvdyBwb2ludExpZ2h0U2hhZG93O1xuXHQjZW5kaWZcblx0I3ByYWdtYSB1bnJvbGxfbG9vcF9zdGFydFxuXHRmb3IgKCBpbnQgaSA9IDA7IGkgPCBOVU1fUE9JTlRfTElHSFRTOyBpICsrICkge1xuXHRcdHBvaW50TGlnaHQgPSBwb2ludExpZ2h0c1sgaSBdO1xuXHRcdGdldFBvaW50TGlnaHRJbmZvKCBwb2ludExpZ2h0LCBnZW9tZXRyeSwgZGlyZWN0TGlnaHQgKTtcblx0XHQjaWYgZGVmaW5lZCggVVNFX1NIQURPV01BUCApICYmICggVU5ST0xMRURfTE9PUF9JTkRFWCA8IE5VTV9QT0lOVF9MSUdIVF9TSEFET1dTIClcblx0XHRwb2ludExpZ2h0U2hhZG93ID0gcG9pbnRMaWdodFNoYWRvd3NbIGkgXTtcblx0XHRkaXJlY3RMaWdodC5jb2xvciAqPSBhbGwoIGJ2ZWMyKCBkaXJlY3RMaWdodC52aXNpYmxlLCByZWNlaXZlU2hhZG93ICkgKSA/IGdldFBvaW50U2hhZG93KCBwb2ludFNoYWRvd01hcFsgaSBdLCBwb2ludExpZ2h0U2hhZG93LnNoYWRvd01hcFNpemUsIHBvaW50TGlnaHRTaGFkb3cuc2hhZG93QmlhcywgcG9pbnRMaWdodFNoYWRvdy5zaGFkb3dSYWRpdXMsIHZQb2ludFNoYWRvd0Nvb3JkWyBpIF0sIHBvaW50TGlnaHRTaGFkb3cuc2hhZG93Q2FtZXJhTmVhciwgcG9pbnRMaWdodFNoYWRvdy5zaGFkb3dDYW1lcmFGYXIgKSA6IDEuMDtcblx0XHQjZW5kaWZcblx0XHRSRV9EaXJlY3QoIGRpcmVjdExpZ2h0LCBnZW9tZXRyeSwgbWF0ZXJpYWwsIHJlZmxlY3RlZExpZ2h0ICk7XG5cdH1cblx0I3ByYWdtYSB1bnJvbGxfbG9vcF9lbmRcbiNlbmRpZlxuI2lmICggTlVNX1NQT1RfTElHSFRTID4gMCApICYmIGRlZmluZWQoIFJFX0RpcmVjdCApXG5cdFNwb3RMaWdodCBzcG90TGlnaHQ7XG5cdCNpZiBkZWZpbmVkKCBVU0VfU0hBRE9XTUFQICkgJiYgTlVNX1NQT1RfTElHSFRfU0hBRE9XUyA+IDBcblx0U3BvdExpZ2h0U2hhZG93IHNwb3RMaWdodFNoYWRvdztcblx0I2VuZGlmXG5cdCNwcmFnbWEgdW5yb2xsX2xvb3Bfc3RhcnRcblx0Zm9yICggaW50IGkgPSAwOyBpIDwgTlVNX1NQT1RfTElHSFRTOyBpICsrICkge1xuXHRcdHNwb3RMaWdodCA9IHNwb3RMaWdodHNbIGkgXTtcblx0XHRnZXRTcG90TGlnaHRJbmZvKCBzcG90TGlnaHQsIGdlb21ldHJ5LCBkaXJlY3RMaWdodCApO1xuXHRcdCNpZiBkZWZpbmVkKCBVU0VfU0hBRE9XTUFQICkgJiYgKCBVTlJPTExFRF9MT09QX0lOREVYIDwgTlVNX1NQT1RfTElHSFRfU0hBRE9XUyApXG5cdFx0c3BvdExpZ2h0U2hhZG93ID0gc3BvdExpZ2h0U2hhZG93c1sgaSBdO1xuXHRcdGRpcmVjdExpZ2h0LmNvbG9yICo9IGFsbCggYnZlYzIoIGRpcmVjdExpZ2h0LnZpc2libGUsIHJlY2VpdmVTaGFkb3cgKSApID8gZ2V0U2hhZG93KCBzcG90U2hhZG93TWFwWyBpIF0sIHNwb3RMaWdodFNoYWRvdy5zaGFkb3dNYXBTaXplLCBzcG90TGlnaHRTaGFkb3cuc2hhZG93Qmlhcywgc3BvdExpZ2h0U2hhZG93LnNoYWRvd1JhZGl1cywgdlNwb3RTaGFkb3dDb29yZFsgaSBdICkgOiAxLjA7XG5cdFx0I2VuZGlmXG5cdFx0UkVfRGlyZWN0KCBkaXJlY3RMaWdodCwgZ2VvbWV0cnksIG1hdGVyaWFsLCByZWZsZWN0ZWRMaWdodCApO1xuXHR9XG5cdCNwcmFnbWEgdW5yb2xsX2xvb3BfZW5kXG4jZW5kaWZcbiNpZiAoIE5VTV9ESVJfTElHSFRTID4gMCApICYmIGRlZmluZWQoIFJFX0RpcmVjdCApXG5cdERpcmVjdGlvbmFsTGlnaHQgZGlyZWN0aW9uYWxMaWdodDtcblx0I2lmIGRlZmluZWQoIFVTRV9TSEFET1dNQVAgKSAmJiBOVU1fRElSX0xJR0hUX1NIQURPV1MgPiAwXG5cdERpcmVjdGlvbmFsTGlnaHRTaGFkb3cgZGlyZWN0aW9uYWxMaWdodFNoYWRvdztcblx0I2VuZGlmXG5cdCNwcmFnbWEgdW5yb2xsX2xvb3Bfc3RhcnRcblx0Zm9yICggaW50IGkgPSAwOyBpIDwgTlVNX0RJUl9MSUdIVFM7IGkgKysgKSB7XG5cdFx0ZGlyZWN0aW9uYWxMaWdodCA9IGRpcmVjdGlvbmFsTGlnaHRzWyBpIF07XG5cdFx0Z2V0RGlyZWN0aW9uYWxMaWdodEluZm8oIGRpcmVjdGlvbmFsTGlnaHQsIGdlb21ldHJ5LCBkaXJlY3RMaWdodCApO1xuXHRcdCNpZiBkZWZpbmVkKCBVU0VfU0hBRE9XTUFQICkgJiYgKCBVTlJPTExFRF9MT09QX0lOREVYIDwgTlVNX0RJUl9MSUdIVF9TSEFET1dTIClcblx0XHRkaXJlY3Rpb25hbExpZ2h0U2hhZG93ID0gZGlyZWN0aW9uYWxMaWdodFNoYWRvd3NbIGkgXTtcblx0XHRkaXJlY3RMaWdodC5jb2xvciAqPSBhbGwoIGJ2ZWMyKCBkaXJlY3RMaWdodC52aXNpYmxlLCByZWNlaXZlU2hhZG93ICkgKSA/IGdldFNoYWRvdyggZGlyZWN0aW9uYWxTaGFkb3dNYXBbIGkgXSwgZGlyZWN0aW9uYWxMaWdodFNoYWRvdy5zaGFkb3dNYXBTaXplLCBkaXJlY3Rpb25hbExpZ2h0U2hhZG93LnNoYWRvd0JpYXMsIGRpcmVjdGlvbmFsTGlnaHRTaGFkb3cuc2hhZG93UmFkaXVzLCB2RGlyZWN0aW9uYWxTaGFkb3dDb29yZFsgaSBdICkgOiAxLjA7XG5cdFx0I2VuZGlmXG5cdFx0UkVfRGlyZWN0KCBkaXJlY3RMaWdodCwgZ2VvbWV0cnksIG1hdGVyaWFsLCByZWZsZWN0ZWRMaWdodCApO1xuXHR9XG5cdCNwcmFnbWEgdW5yb2xsX2xvb3BfZW5kXG4jZW5kaWZcbiNpZiAoIE5VTV9SRUNUX0FSRUFfTElHSFRTID4gMCApICYmIGRlZmluZWQoIFJFX0RpcmVjdF9SZWN0QXJlYSApXG5cdFJlY3RBcmVhTGlnaHQgcmVjdEFyZWFMaWdodDtcblx0I3ByYWdtYSB1bnJvbGxfbG9vcF9zdGFydFxuXHRmb3IgKCBpbnQgaSA9IDA7IGkgPCBOVU1fUkVDVF9BUkVBX0xJR0hUUzsgaSArKyApIHtcblx0XHRyZWN0QXJlYUxpZ2h0ID0gcmVjdEFyZWFMaWdodHNbIGkgXTtcblx0XHRSRV9EaXJlY3RfUmVjdEFyZWEoIHJlY3RBcmVhTGlnaHQsIGdlb21ldHJ5LCBtYXRlcmlhbCwgcmVmbGVjdGVkTGlnaHQgKTtcblx0fVxuXHQjcHJhZ21hIHVucm9sbF9sb29wX2VuZFxuI2VuZGlmXG4jaWYgZGVmaW5lZCggUkVfSW5kaXJlY3REaWZmdXNlIClcblx0dmVjMyBpYmxJcnJhZGlhbmNlID0gdmVjMyggMC4wICk7XG5cdHZlYzMgaXJyYWRpYW5jZSA9IGdldEFtYmllbnRMaWdodElycmFkaWFuY2UoIGFtYmllbnRMaWdodENvbG9yICk7XG5cdGlycmFkaWFuY2UgKz0gZ2V0TGlnaHRQcm9iZUlycmFkaWFuY2UoIGxpZ2h0UHJvYmUsIGdlb21ldHJ5Lm5vcm1hbCApO1xuXHQjaWYgKCBOVU1fSEVNSV9MSUdIVFMgPiAwIClcblx0XHQjcHJhZ21hIHVucm9sbF9sb29wX3N0YXJ0XG5cdFx0Zm9yICggaW50IGkgPSAwOyBpIDwgTlVNX0hFTUlfTElHSFRTOyBpICsrICkge1xuXHRcdFx0aXJyYWRpYW5jZSArPSBnZXRIZW1pc3BoZXJlTGlnaHRJcnJhZGlhbmNlKCBoZW1pc3BoZXJlTGlnaHRzWyBpIF0sIGdlb21ldHJ5Lm5vcm1hbCApO1xuXHRcdH1cblx0XHQjcHJhZ21hIHVucm9sbF9sb29wX2VuZFxuXHQjZW5kaWZcbiNlbmRpZlxuI2lmIGRlZmluZWQoIFJFX0luZGlyZWN0U3BlY3VsYXIgKVxuXHR2ZWMzIHJhZGlhbmNlID0gdmVjMyggMC4wICk7XG5cdHZlYzMgY2xlYXJjb2F0UmFkaWFuY2UgPSB2ZWMzKCAwLjAgKTtcbiNlbmRpZiI7dmFyIGxpZ2h0c19mcmFnbWVudF9tYXBzPSIjaWYgZGVmaW5lZCggUkVfSW5kaXJlY3REaWZmdXNlIClcblx0I2lmZGVmIFVTRV9MSUdIVE1BUFxuXHRcdHZlYzQgbGlnaHRNYXBUZXhlbCA9IHRleHR1cmUyRCggbGlnaHRNYXAsIHZVdjIgKTtcblx0XHR2ZWMzIGxpZ2h0TWFwSXJyYWRpYW5jZSA9IGxpZ2h0TWFwVGV4ZWxUb0xpbmVhciggbGlnaHRNYXBUZXhlbCApLnJnYiAqIGxpZ2h0TWFwSW50ZW5zaXR5O1xuXHRcdCNpZm5kZWYgUEhZU0lDQUxMWV9DT1JSRUNUX0xJR0hUU1xuXHRcdFx0bGlnaHRNYXBJcnJhZGlhbmNlICo9IFBJO1xuXHRcdCNlbmRpZlxuXHRcdGlycmFkaWFuY2UgKz0gbGlnaHRNYXBJcnJhZGlhbmNlO1xuXHQjZW5kaWZcblx0I2lmIGRlZmluZWQoIFVTRV9FTlZNQVAgKSAmJiBkZWZpbmVkKCBTVEFOREFSRCApICYmIGRlZmluZWQoIEVOVk1BUF9UWVBFX0NVQkVfVVYgKVxuXHRcdGlibElycmFkaWFuY2UgKz0gZ2V0SUJMSXJyYWRpYW5jZSggZ2VvbWV0cnkubm9ybWFsICk7XG5cdCNlbmRpZlxuI2VuZGlmXG4jaWYgZGVmaW5lZCggVVNFX0VOVk1BUCApICYmIGRlZmluZWQoIFJFX0luZGlyZWN0U3BlY3VsYXIgKVxuXHRyYWRpYW5jZSArPSBnZXRJQkxSYWRpYW5jZSggZ2VvbWV0cnkudmlld0RpciwgZ2VvbWV0cnkubm9ybWFsLCBtYXRlcmlhbC5yb3VnaG5lc3MgKTtcblx0I2lmZGVmIFVTRV9DTEVBUkNPQVRcblx0XHRjbGVhcmNvYXRSYWRpYW5jZSArPSBnZXRJQkxSYWRpYW5jZSggZ2VvbWV0cnkudmlld0RpciwgZ2VvbWV0cnkuY2xlYXJjb2F0Tm9ybWFsLCBtYXRlcmlhbC5jbGVhcmNvYXRSb3VnaG5lc3MgKTtcblx0I2VuZGlmXG4jZW5kaWYiO3ZhciBsaWdodHNfZnJhZ21lbnRfZW5kPSIjaWYgZGVmaW5lZCggUkVfSW5kaXJlY3REaWZmdXNlIClcblx0UkVfSW5kaXJlY3REaWZmdXNlKCBpcnJhZGlhbmNlLCBnZW9tZXRyeSwgbWF0ZXJpYWwsIHJlZmxlY3RlZExpZ2h0ICk7XG4jZW5kaWZcbiNpZiBkZWZpbmVkKCBSRV9JbmRpcmVjdFNwZWN1bGFyIClcblx0UkVfSW5kaXJlY3RTcGVjdWxhciggcmFkaWFuY2UsIGlibElycmFkaWFuY2UsIGNsZWFyY29hdFJhZGlhbmNlLCBnZW9tZXRyeSwgbWF0ZXJpYWwsIHJlZmxlY3RlZExpZ2h0ICk7XG4jZW5kaWYiO3ZhciBsb2dkZXB0aGJ1Zl9mcmFnbWVudD0iI2lmIGRlZmluZWQoIFVTRV9MT0dERVBUSEJVRiApICYmIGRlZmluZWQoIFVTRV9MT0dERVBUSEJVRl9FWFQgKVxuXHRnbF9GcmFnRGVwdGhFWFQgPSB2SXNQZXJzcGVjdGl2ZSA9PSAwLjAgPyBnbF9GcmFnQ29vcmQueiA6IGxvZzIoIHZGcmFnRGVwdGggKSAqIGxvZ0RlcHRoQnVmRkMgKiAwLjU7XG4jZW5kaWYiO3ZhciBsb2dkZXB0aGJ1Zl9wYXJzX2ZyYWdtZW50PSIjaWYgZGVmaW5lZCggVVNFX0xPR0RFUFRIQlVGICkgJiYgZGVmaW5lZCggVVNFX0xPR0RFUFRIQlVGX0VYVCApXG5cdHVuaWZvcm0gZmxvYXQgbG9nRGVwdGhCdWZGQztcblx0dmFyeWluZyBmbG9hdCB2RnJhZ0RlcHRoO1xuXHR2YXJ5aW5nIGZsb2F0IHZJc1BlcnNwZWN0aXZlO1xuI2VuZGlmIjt2YXIgbG9nZGVwdGhidWZfcGFyc192ZXJ0ZXg9IiNpZmRlZiBVU0VfTE9HREVQVEhCVUZcblx0I2lmZGVmIFVTRV9MT0dERVBUSEJVRl9FWFRcblx0XHR2YXJ5aW5nIGZsb2F0IHZGcmFnRGVwdGg7XG5cdFx0dmFyeWluZyBmbG9hdCB2SXNQZXJzcGVjdGl2ZTtcblx0I2Vsc2Vcblx0XHR1bmlmb3JtIGZsb2F0IGxvZ0RlcHRoQnVmRkM7XG5cdCNlbmRpZlxuI2VuZGlmIjt2YXIgbG9nZGVwdGhidWZfdmVydGV4PSIjaWZkZWYgVVNFX0xPR0RFUFRIQlVGXG5cdCNpZmRlZiBVU0VfTE9HREVQVEhCVUZfRVhUXG5cdFx0dkZyYWdEZXB0aCA9IDEuMCArIGdsX1Bvc2l0aW9uLnc7XG5cdFx0dklzUGVyc3BlY3RpdmUgPSBmbG9hdCggaXNQZXJzcGVjdGl2ZU1hdHJpeCggcHJvamVjdGlvbk1hdHJpeCApICk7XG5cdCNlbHNlXG5cdFx0aWYgKCBpc1BlcnNwZWN0aXZlTWF0cml4KCBwcm9qZWN0aW9uTWF0cml4ICkgKSB7XG5cdFx0XHRnbF9Qb3NpdGlvbi56ID0gbG9nMiggbWF4KCBFUFNJTE9OLCBnbF9Qb3NpdGlvbi53ICsgMS4wICkgKSAqIGxvZ0RlcHRoQnVmRkMgLSAxLjA7XG5cdFx0XHRnbF9Qb3NpdGlvbi56ICo9IGdsX1Bvc2l0aW9uLnc7XG5cdFx0fVxuXHQjZW5kaWZcbiNlbmRpZiI7dmFyIG1hcF9mcmFnbWVudD0iI2lmZGVmIFVTRV9NQVBcblx0dmVjNCB0ZXhlbENvbG9yID0gdGV4dHVyZTJEKCBtYXAsIHZVdiApO1xuXHR0ZXhlbENvbG9yID0gbWFwVGV4ZWxUb0xpbmVhciggdGV4ZWxDb2xvciApO1xuXHRkaWZmdXNlQ29sb3IgKj0gdGV4ZWxDb2xvcjtcbiNlbmRpZiI7dmFyIG1hcF9wYXJzX2ZyYWdtZW50PSIjaWZkZWYgVVNFX01BUFxuXHR1bmlmb3JtIHNhbXBsZXIyRCBtYXA7XG4jZW5kaWYiO3ZhciBtYXBfcGFydGljbGVfZnJhZ21lbnQ9IiNpZiBkZWZpbmVkKCBVU0VfTUFQICkgfHwgZGVmaW5lZCggVVNFX0FMUEhBTUFQIClcblx0dmVjMiB1diA9ICggdXZUcmFuc2Zvcm0gKiB2ZWMzKCBnbF9Qb2ludENvb3JkLngsIDEuMCAtIGdsX1BvaW50Q29vcmQueSwgMSApICkueHk7XG4jZW5kaWZcbiNpZmRlZiBVU0VfTUFQXG5cdHZlYzQgbWFwVGV4ZWwgPSB0ZXh0dXJlMkQoIG1hcCwgdXYgKTtcblx0ZGlmZnVzZUNvbG9yICo9IG1hcFRleGVsVG9MaW5lYXIoIG1hcFRleGVsICk7XG4jZW5kaWZcbiNpZmRlZiBVU0VfQUxQSEFNQVBcblx0ZGlmZnVzZUNvbG9yLmEgKj0gdGV4dHVyZTJEKCBhbHBoYU1hcCwgdXYgKS5nO1xuI2VuZGlmIjt2YXIgbWFwX3BhcnRpY2xlX3BhcnNfZnJhZ21lbnQ9IiNpZiBkZWZpbmVkKCBVU0VfTUFQICkgfHwgZGVmaW5lZCggVVNFX0FMUEhBTUFQIClcblx0dW5pZm9ybSBtYXQzIHV2VHJhbnNmb3JtO1xuI2VuZGlmXG4jaWZkZWYgVVNFX01BUFxuXHR1bmlmb3JtIHNhbXBsZXIyRCBtYXA7XG4jZW5kaWZcbiNpZmRlZiBVU0VfQUxQSEFNQVBcblx0dW5pZm9ybSBzYW1wbGVyMkQgYWxwaGFNYXA7XG4jZW5kaWYiO3ZhciBtZXRhbG5lc3NtYXBfZnJhZ21lbnQ9ImZsb2F0IG1ldGFsbmVzc0ZhY3RvciA9IG1ldGFsbmVzcztcbiNpZmRlZiBVU0VfTUVUQUxORVNTTUFQXG5cdHZlYzQgdGV4ZWxNZXRhbG5lc3MgPSB0ZXh0dXJlMkQoIG1ldGFsbmVzc01hcCwgdlV2ICk7XG5cdG1ldGFsbmVzc0ZhY3RvciAqPSB0ZXhlbE1ldGFsbmVzcy5iO1xuI2VuZGlmIjt2YXIgbWV0YWxuZXNzbWFwX3BhcnNfZnJhZ21lbnQ9IiNpZmRlZiBVU0VfTUVUQUxORVNTTUFQXG5cdHVuaWZvcm0gc2FtcGxlcjJEIG1ldGFsbmVzc01hcDtcbiNlbmRpZiI7dmFyIG1vcnBobm9ybWFsX3ZlcnRleD0iI2lmZGVmIFVTRV9NT1JQSE5PUk1BTFNcblx0b2JqZWN0Tm9ybWFsICo9IG1vcnBoVGFyZ2V0QmFzZUluZmx1ZW5jZTtcblx0I2lmZGVmIE1PUlBIVEFSR0VUU19URVhUVVJFXG5cdFx0Zm9yICggaW50IGkgPSAwOyBpIDwgTU9SUEhUQVJHRVRTX0NPVU5UOyBpICsrICkge1xuXHRcdFx0aWYgKCBtb3JwaFRhcmdldEluZmx1ZW5jZXNbIGkgXSA+IDAuMCApIG9iamVjdE5vcm1hbCArPSBnZXRNb3JwaCggZ2xfVmVydGV4SUQsIGksIDEsIDIgKSAqIG1vcnBoVGFyZ2V0SW5mbHVlbmNlc1sgaSBdO1xuXHRcdH1cblx0I2Vsc2Vcblx0XHRvYmplY3ROb3JtYWwgKz0gbW9ycGhOb3JtYWwwICogbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyAwIF07XG5cdFx0b2JqZWN0Tm9ybWFsICs9IG1vcnBoTm9ybWFsMSAqIG1vcnBoVGFyZ2V0SW5mbHVlbmNlc1sgMSBdO1xuXHRcdG9iamVjdE5vcm1hbCArPSBtb3JwaE5vcm1hbDIgKiBtb3JwaFRhcmdldEluZmx1ZW5jZXNbIDIgXTtcblx0XHRvYmplY3ROb3JtYWwgKz0gbW9ycGhOb3JtYWwzICogbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyAzIF07XG5cdCNlbmRpZlxuI2VuZGlmIjt2YXIgbW9ycGh0YXJnZXRfcGFyc192ZXJ0ZXg9IiNpZmRlZiBVU0VfTU9SUEhUQVJHRVRTXG5cdHVuaWZvcm0gZmxvYXQgbW9ycGhUYXJnZXRCYXNlSW5mbHVlbmNlO1xuXHQjaWZkZWYgTU9SUEhUQVJHRVRTX1RFWFRVUkVcblx0XHR1bmlmb3JtIGZsb2F0IG1vcnBoVGFyZ2V0SW5mbHVlbmNlc1sgTU9SUEhUQVJHRVRTX0NPVU5UIF07XG5cdFx0dW5pZm9ybSBzYW1wbGVyMkRBcnJheSBtb3JwaFRhcmdldHNUZXh0dXJlO1xuXHRcdHVuaWZvcm0gdmVjMiBtb3JwaFRhcmdldHNUZXh0dXJlU2l6ZTtcblx0XHR2ZWMzIGdldE1vcnBoKCBjb25zdCBpbiBpbnQgdmVydGV4SW5kZXgsIGNvbnN0IGluIGludCBtb3JwaFRhcmdldEluZGV4LCBjb25zdCBpbiBpbnQgb2Zmc2V0LCBjb25zdCBpbiBpbnQgc3RyaWRlICkge1xuXHRcdFx0ZmxvYXQgdGV4ZWxJbmRleCA9IGZsb2F0KCB2ZXJ0ZXhJbmRleCAqIHN0cmlkZSArIG9mZnNldCApO1xuXHRcdFx0ZmxvYXQgeSA9IGZsb29yKCB0ZXhlbEluZGV4IC8gbW9ycGhUYXJnZXRzVGV4dHVyZVNpemUueCApO1xuXHRcdFx0ZmxvYXQgeCA9IHRleGVsSW5kZXggLSB5ICogbW9ycGhUYXJnZXRzVGV4dHVyZVNpemUueDtcblx0XHRcdHZlYzMgbW9ycGhVViA9IHZlYzMoICggeCArIDAuNSApIC8gbW9ycGhUYXJnZXRzVGV4dHVyZVNpemUueCwgeSAvIG1vcnBoVGFyZ2V0c1RleHR1cmVTaXplLnksIG1vcnBoVGFyZ2V0SW5kZXggKTtcblx0XHRcdHJldHVybiB0ZXh0dXJlKCBtb3JwaFRhcmdldHNUZXh0dXJlLCBtb3JwaFVWICkueHl6O1xuXHRcdH1cblx0I2Vsc2Vcblx0XHQjaWZuZGVmIFVTRV9NT1JQSE5PUk1BTFNcblx0XHRcdHVuaWZvcm0gZmxvYXQgbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyA4IF07XG5cdFx0I2Vsc2Vcblx0XHRcdHVuaWZvcm0gZmxvYXQgbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyA0IF07XG5cdFx0I2VuZGlmXG5cdCNlbmRpZlxuI2VuZGlmIjt2YXIgbW9ycGh0YXJnZXRfdmVydGV4PSIjaWZkZWYgVVNFX01PUlBIVEFSR0VUU1xuXHR0cmFuc2Zvcm1lZCAqPSBtb3JwaFRhcmdldEJhc2VJbmZsdWVuY2U7XG5cdCNpZmRlZiBNT1JQSFRBUkdFVFNfVEVYVFVSRVxuXHRcdGZvciAoIGludCBpID0gMDsgaSA8IE1PUlBIVEFSR0VUU19DT1VOVDsgaSArKyApIHtcblx0XHRcdCNpZm5kZWYgVVNFX01PUlBITk9STUFMU1xuXHRcdFx0XHRpZiAoIG1vcnBoVGFyZ2V0SW5mbHVlbmNlc1sgaSBdID4gMC4wICkgdHJhbnNmb3JtZWQgKz0gZ2V0TW9ycGgoIGdsX1ZlcnRleElELCBpLCAwLCAxICkgKiBtb3JwaFRhcmdldEluZmx1ZW5jZXNbIGkgXTtcblx0XHRcdCNlbHNlXG5cdFx0XHRcdGlmICggbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyBpIF0gPiAwLjAgKSB0cmFuc2Zvcm1lZCArPSBnZXRNb3JwaCggZ2xfVmVydGV4SUQsIGksIDAsIDIgKSAqIG1vcnBoVGFyZ2V0SW5mbHVlbmNlc1sgaSBdO1xuXHRcdFx0I2VuZGlmXG5cdFx0fVxuXHQjZWxzZVxuXHRcdHRyYW5zZm9ybWVkICs9IG1vcnBoVGFyZ2V0MCAqIG1vcnBoVGFyZ2V0SW5mbHVlbmNlc1sgMCBdO1xuXHRcdHRyYW5zZm9ybWVkICs9IG1vcnBoVGFyZ2V0MSAqIG1vcnBoVGFyZ2V0SW5mbHVlbmNlc1sgMSBdO1xuXHRcdHRyYW5zZm9ybWVkICs9IG1vcnBoVGFyZ2V0MiAqIG1vcnBoVGFyZ2V0SW5mbHVlbmNlc1sgMiBdO1xuXHRcdHRyYW5zZm9ybWVkICs9IG1vcnBoVGFyZ2V0MyAqIG1vcnBoVGFyZ2V0SW5mbHVlbmNlc1sgMyBdO1xuXHRcdCNpZm5kZWYgVVNFX01PUlBITk9STUFMU1xuXHRcdFx0dHJhbnNmb3JtZWQgKz0gbW9ycGhUYXJnZXQ0ICogbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyA0IF07XG5cdFx0XHR0cmFuc2Zvcm1lZCArPSBtb3JwaFRhcmdldDUgKiBtb3JwaFRhcmdldEluZmx1ZW5jZXNbIDUgXTtcblx0XHRcdHRyYW5zZm9ybWVkICs9IG1vcnBoVGFyZ2V0NiAqIG1vcnBoVGFyZ2V0SW5mbHVlbmNlc1sgNiBdO1xuXHRcdFx0dHJhbnNmb3JtZWQgKz0gbW9ycGhUYXJnZXQ3ICogbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyA3IF07XG5cdFx0I2VuZGlmXG5cdCNlbmRpZlxuI2VuZGlmIjt2YXIgbm9ybWFsX2ZyYWdtZW50X2JlZ2luPSJmbG9hdCBmYWNlRGlyZWN0aW9uID0gZ2xfRnJvbnRGYWNpbmcgPyAxLjAgOiAtIDEuMDtcbiNpZmRlZiBGTEFUX1NIQURFRFxuXHR2ZWMzIGZkeCA9IHZlYzMoIGRGZHgoIHZWaWV3UG9zaXRpb24ueCApLCBkRmR4KCB2Vmlld1Bvc2l0aW9uLnkgKSwgZEZkeCggdlZpZXdQb3NpdGlvbi56ICkgKTtcblx0dmVjMyBmZHkgPSB2ZWMzKCBkRmR5KCB2Vmlld1Bvc2l0aW9uLnggKSwgZEZkeSggdlZpZXdQb3NpdGlvbi55ICksIGRGZHkoIHZWaWV3UG9zaXRpb24ueiApICk7XG5cdHZlYzMgbm9ybWFsID0gbm9ybWFsaXplKCBjcm9zcyggZmR4LCBmZHkgKSApO1xuI2Vsc2Vcblx0dmVjMyBub3JtYWwgPSBub3JtYWxpemUoIHZOb3JtYWwgKTtcblx0I2lmZGVmIERPVUJMRV9TSURFRFxuXHRcdG5vcm1hbCA9IG5vcm1hbCAqIGZhY2VEaXJlY3Rpb247XG5cdCNlbmRpZlxuXHQjaWZkZWYgVVNFX1RBTkdFTlRcblx0XHR2ZWMzIHRhbmdlbnQgPSBub3JtYWxpemUoIHZUYW5nZW50ICk7XG5cdFx0dmVjMyBiaXRhbmdlbnQgPSBub3JtYWxpemUoIHZCaXRhbmdlbnQgKTtcblx0XHQjaWZkZWYgRE9VQkxFX1NJREVEXG5cdFx0XHR0YW5nZW50ID0gdGFuZ2VudCAqIGZhY2VEaXJlY3Rpb247XG5cdFx0XHRiaXRhbmdlbnQgPSBiaXRhbmdlbnQgKiBmYWNlRGlyZWN0aW9uO1xuXHRcdCNlbmRpZlxuXHRcdCNpZiBkZWZpbmVkKCBUQU5HRU5UU1BBQ0VfTk9STUFMTUFQICkgfHwgZGVmaW5lZCggVVNFX0NMRUFSQ09BVF9OT1JNQUxNQVAgKVxuXHRcdFx0bWF0MyB2VEJOID0gbWF0MyggdGFuZ2VudCwgYml0YW5nZW50LCBub3JtYWwgKTtcblx0XHQjZW5kaWZcblx0I2VuZGlmXG4jZW5kaWZcbnZlYzMgZ2VvbWV0cnlOb3JtYWwgPSBub3JtYWw7Ijt2YXIgbm9ybWFsX2ZyYWdtZW50X21hcHM9IiNpZmRlZiBPQkpFQ1RTUEFDRV9OT1JNQUxNQVBcblx0bm9ybWFsID0gdGV4dHVyZTJEKCBub3JtYWxNYXAsIHZVdiApLnh5eiAqIDIuMCAtIDEuMDtcblx0I2lmZGVmIEZMSVBfU0lERURcblx0XHRub3JtYWwgPSAtIG5vcm1hbDtcblx0I2VuZGlmXG5cdCNpZmRlZiBET1VCTEVfU0lERURcblx0XHRub3JtYWwgPSBub3JtYWwgKiBmYWNlRGlyZWN0aW9uO1xuXHQjZW5kaWZcblx0bm9ybWFsID0gbm9ybWFsaXplKCBub3JtYWxNYXRyaXggKiBub3JtYWwgKTtcbiNlbGlmIGRlZmluZWQoIFRBTkdFTlRTUEFDRV9OT1JNQUxNQVAgKVxuXHR2ZWMzIG1hcE4gPSB0ZXh0dXJlMkQoIG5vcm1hbE1hcCwgdlV2ICkueHl6ICogMi4wIC0gMS4wO1xuXHRtYXBOLnh5ICo9IG5vcm1hbFNjYWxlO1xuXHQjaWZkZWYgVVNFX1RBTkdFTlRcblx0XHRub3JtYWwgPSBub3JtYWxpemUoIHZUQk4gKiBtYXBOICk7XG5cdCNlbHNlXG5cdFx0bm9ybWFsID0gcGVydHVyYk5vcm1hbDJBcmIoIC0gdlZpZXdQb3NpdGlvbiwgbm9ybWFsLCBtYXBOLCBmYWNlRGlyZWN0aW9uICk7XG5cdCNlbmRpZlxuI2VsaWYgZGVmaW5lZCggVVNFX0JVTVBNQVAgKVxuXHRub3JtYWwgPSBwZXJ0dXJiTm9ybWFsQXJiKCAtIHZWaWV3UG9zaXRpb24sIG5vcm1hbCwgZEhkeHlfZndkKCksIGZhY2VEaXJlY3Rpb24gKTtcbiNlbmRpZiI7dmFyIG5vcm1hbF9wYXJzX2ZyYWdtZW50PSIjaWZuZGVmIEZMQVRfU0hBREVEXG5cdHZhcnlpbmcgdmVjMyB2Tm9ybWFsO1xuXHQjaWZkZWYgVVNFX1RBTkdFTlRcblx0XHR2YXJ5aW5nIHZlYzMgdlRhbmdlbnQ7XG5cdFx0dmFyeWluZyB2ZWMzIHZCaXRhbmdlbnQ7XG5cdCNlbmRpZlxuI2VuZGlmIjt2YXIgbm9ybWFsX3BhcnNfdmVydGV4PSIjaWZuZGVmIEZMQVRfU0hBREVEXG5cdHZhcnlpbmcgdmVjMyB2Tm9ybWFsO1xuXHQjaWZkZWYgVVNFX1RBTkdFTlRcblx0XHR2YXJ5aW5nIHZlYzMgdlRhbmdlbnQ7XG5cdFx0dmFyeWluZyB2ZWMzIHZCaXRhbmdlbnQ7XG5cdCNlbmRpZlxuI2VuZGlmIjt2YXIgbm9ybWFsX3ZlcnRleD0iI2lmbmRlZiBGTEFUX1NIQURFRFxuXHR2Tm9ybWFsID0gbm9ybWFsaXplKCB0cmFuc2Zvcm1lZE5vcm1hbCApO1xuXHQjaWZkZWYgVVNFX1RBTkdFTlRcblx0XHR2VGFuZ2VudCA9IG5vcm1hbGl6ZSggdHJhbnNmb3JtZWRUYW5nZW50ICk7XG5cdFx0dkJpdGFuZ2VudCA9IG5vcm1hbGl6ZSggY3Jvc3MoIHZOb3JtYWwsIHZUYW5nZW50ICkgKiB0YW5nZW50LncgKTtcblx0I2VuZGlmXG4jZW5kaWYiO3ZhciBub3JtYWxtYXBfcGFyc19mcmFnbWVudD0iI2lmZGVmIFVTRV9OT1JNQUxNQVBcblx0dW5pZm9ybSBzYW1wbGVyMkQgbm9ybWFsTWFwO1xuXHR1bmlmb3JtIHZlYzIgbm9ybWFsU2NhbGU7XG4jZW5kaWZcbiNpZmRlZiBPQkpFQ1RTUEFDRV9OT1JNQUxNQVBcblx0dW5pZm9ybSBtYXQzIG5vcm1hbE1hdHJpeDtcbiNlbmRpZlxuI2lmICEgZGVmaW5lZCAoIFVTRV9UQU5HRU5UICkgJiYgKCBkZWZpbmVkICggVEFOR0VOVFNQQUNFX05PUk1BTE1BUCApIHx8IGRlZmluZWQgKCBVU0VfQ0xFQVJDT0FUX05PUk1BTE1BUCApIClcblx0dmVjMyBwZXJ0dXJiTm9ybWFsMkFyYiggdmVjMyBleWVfcG9zLCB2ZWMzIHN1cmZfbm9ybSwgdmVjMyBtYXBOLCBmbG9hdCBmYWNlRGlyZWN0aW9uICkge1xuXHRcdHZlYzMgcTAgPSB2ZWMzKCBkRmR4KCBleWVfcG9zLnggKSwgZEZkeCggZXllX3Bvcy55ICksIGRGZHgoIGV5ZV9wb3MueiApICk7XG5cdFx0dmVjMyBxMSA9IHZlYzMoIGRGZHkoIGV5ZV9wb3MueCApLCBkRmR5KCBleWVfcG9zLnkgKSwgZEZkeSggZXllX3Bvcy56ICkgKTtcblx0XHR2ZWMyIHN0MCA9IGRGZHgoIHZVdi5zdCApO1xuXHRcdHZlYzIgc3QxID0gZEZkeSggdlV2LnN0ICk7XG5cdFx0dmVjMyBOID0gc3VyZl9ub3JtO1xuXHRcdHZlYzMgcTFwZXJwID0gY3Jvc3MoIHExLCBOICk7XG5cdFx0dmVjMyBxMHBlcnAgPSBjcm9zcyggTiwgcTAgKTtcblx0XHR2ZWMzIFQgPSBxMXBlcnAgKiBzdDAueCArIHEwcGVycCAqIHN0MS54O1xuXHRcdHZlYzMgQiA9IHExcGVycCAqIHN0MC55ICsgcTBwZXJwICogc3QxLnk7XG5cdFx0ZmxvYXQgZGV0ID0gbWF4KCBkb3QoIFQsIFQgKSwgZG90KCBCLCBCICkgKTtcblx0XHRmbG9hdCBzY2FsZSA9ICggZGV0ID09IDAuMCApID8gMC4wIDogZmFjZURpcmVjdGlvbiAqIGludmVyc2VzcXJ0KCBkZXQgKTtcblx0XHRyZXR1cm4gbm9ybWFsaXplKCBUICogKCBtYXBOLnggKiBzY2FsZSApICsgQiAqICggbWFwTi55ICogc2NhbGUgKSArIE4gKiBtYXBOLnogKTtcblx0fVxuI2VuZGlmIjt2YXIgY2xlYXJjb2F0X25vcm1hbF9mcmFnbWVudF9iZWdpbj0iI2lmZGVmIFVTRV9DTEVBUkNPQVRcblx0dmVjMyBjbGVhcmNvYXROb3JtYWwgPSBnZW9tZXRyeU5vcm1hbDtcbiNlbmRpZiI7dmFyIGNsZWFyY29hdF9ub3JtYWxfZnJhZ21lbnRfbWFwcz0iI2lmZGVmIFVTRV9DTEVBUkNPQVRfTk9STUFMTUFQXG5cdHZlYzMgY2xlYXJjb2F0TWFwTiA9IHRleHR1cmUyRCggY2xlYXJjb2F0Tm9ybWFsTWFwLCB2VXYgKS54eXogKiAyLjAgLSAxLjA7XG5cdGNsZWFyY29hdE1hcE4ueHkgKj0gY2xlYXJjb2F0Tm9ybWFsU2NhbGU7XG5cdCNpZmRlZiBVU0VfVEFOR0VOVFxuXHRcdGNsZWFyY29hdE5vcm1hbCA9IG5vcm1hbGl6ZSggdlRCTiAqIGNsZWFyY29hdE1hcE4gKTtcblx0I2Vsc2Vcblx0XHRjbGVhcmNvYXROb3JtYWwgPSBwZXJ0dXJiTm9ybWFsMkFyYiggLSB2Vmlld1Bvc2l0aW9uLCBjbGVhcmNvYXROb3JtYWwsIGNsZWFyY29hdE1hcE4sIGZhY2VEaXJlY3Rpb24gKTtcblx0I2VuZGlmXG4jZW5kaWYiO3ZhciBjbGVhcmNvYXRfcGFyc19mcmFnbWVudD0iI2lmZGVmIFVTRV9DTEVBUkNPQVRNQVBcblx0dW5pZm9ybSBzYW1wbGVyMkQgY2xlYXJjb2F0TWFwO1xuI2VuZGlmXG4jaWZkZWYgVVNFX0NMRUFSQ09BVF9ST1VHSE5FU1NNQVBcblx0dW5pZm9ybSBzYW1wbGVyMkQgY2xlYXJjb2F0Um91Z2huZXNzTWFwO1xuI2VuZGlmXG4jaWZkZWYgVVNFX0NMRUFSQ09BVF9OT1JNQUxNQVBcblx0dW5pZm9ybSBzYW1wbGVyMkQgY2xlYXJjb2F0Tm9ybWFsTWFwO1xuXHR1bmlmb3JtIHZlYzIgY2xlYXJjb2F0Tm9ybWFsU2NhbGU7XG4jZW5kaWYiO3ZhciBvdXRwdXRfZnJhZ21lbnQ9IiNpZmRlZiBPUEFRVUVcbmRpZmZ1c2VDb2xvci5hID0gMS4wO1xuI2VuZGlmXG4jaWZkZWYgVVNFX1RSQU5TTUlTU0lPTlxuZGlmZnVzZUNvbG9yLmEgKj0gdHJhbnNtaXNzaW9uQWxwaGEgKyAwLjE7XG4jZW5kaWZcbmdsX0ZyYWdDb2xvciA9IHZlYzQoIG91dGdvaW5nTGlnaHQsIGRpZmZ1c2VDb2xvci5hICk7Ijt2YXIgcGFja2luZz0idmVjMyBwYWNrTm9ybWFsVG9SR0IoIGNvbnN0IGluIHZlYzMgbm9ybWFsICkge1xuXHRyZXR1cm4gbm9ybWFsaXplKCBub3JtYWwgKSAqIDAuNSArIDAuNTtcbn1cbnZlYzMgdW5wYWNrUkdCVG9Ob3JtYWwoIGNvbnN0IGluIHZlYzMgcmdiICkge1xuXHRyZXR1cm4gMi4wICogcmdiLnh5eiAtIDEuMDtcbn1cbmNvbnN0IGZsb2F0IFBhY2tVcHNjYWxlID0gMjU2LiAvIDI1NS47Y29uc3QgZmxvYXQgVW5wYWNrRG93bnNjYWxlID0gMjU1LiAvIDI1Ni47XG5jb25zdCB2ZWMzIFBhY2tGYWN0b3JzID0gdmVjMyggMjU2LiAqIDI1Ni4gKiAyNTYuLCAyNTYuICogMjU2LiwgMjU2LiApO1xuY29uc3QgdmVjNCBVbnBhY2tGYWN0b3JzID0gVW5wYWNrRG93bnNjYWxlIC8gdmVjNCggUGFja0ZhY3RvcnMsIDEuICk7XG5jb25zdCBmbG9hdCBTaGlmdFJpZ2h0OCA9IDEuIC8gMjU2LjtcbnZlYzQgcGFja0RlcHRoVG9SR0JBKCBjb25zdCBpbiBmbG9hdCB2ICkge1xuXHR2ZWM0IHIgPSB2ZWM0KCBmcmFjdCggdiAqIFBhY2tGYWN0b3JzICksIHYgKTtcblx0ci55encgLT0gci54eXogKiBTaGlmdFJpZ2h0ODtcdHJldHVybiByICogUGFja1Vwc2NhbGU7XG59XG5mbG9hdCB1bnBhY2tSR0JBVG9EZXB0aCggY29uc3QgaW4gdmVjNCB2ICkge1xuXHRyZXR1cm4gZG90KCB2LCBVbnBhY2tGYWN0b3JzICk7XG59XG52ZWM0IHBhY2sySGFsZlRvUkdCQSggdmVjMiB2ICkge1xuXHR2ZWM0IHIgPSB2ZWM0KCB2LngsIGZyYWN0KCB2LnggKiAyNTUuMCApLCB2LnksIGZyYWN0KCB2LnkgKiAyNTUuMCApICk7XG5cdHJldHVybiB2ZWM0KCByLnggLSByLnkgLyAyNTUuMCwgci55LCByLnogLSByLncgLyAyNTUuMCwgci53ICk7XG59XG52ZWMyIHVucGFja1JHQkFUbzJIYWxmKCB2ZWM0IHYgKSB7XG5cdHJldHVybiB2ZWMyKCB2LnggKyAoIHYueSAvIDI1NS4wICksIHYueiArICggdi53IC8gMjU1LjAgKSApO1xufVxuZmxvYXQgdmlld1pUb09ydGhvZ3JhcGhpY0RlcHRoKCBjb25zdCBpbiBmbG9hdCB2aWV3WiwgY29uc3QgaW4gZmxvYXQgbmVhciwgY29uc3QgaW4gZmxvYXQgZmFyICkge1xuXHRyZXR1cm4gKCB2aWV3WiArIG5lYXIgKSAvICggbmVhciAtIGZhciApO1xufVxuZmxvYXQgb3J0aG9ncmFwaGljRGVwdGhUb1ZpZXdaKCBjb25zdCBpbiBmbG9hdCBsaW5lYXJDbGlwWiwgY29uc3QgaW4gZmxvYXQgbmVhciwgY29uc3QgaW4gZmxvYXQgZmFyICkge1xuXHRyZXR1cm4gbGluZWFyQ2xpcFogKiAoIG5lYXIgLSBmYXIgKSAtIG5lYXI7XG59XG5mbG9hdCB2aWV3WlRvUGVyc3BlY3RpdmVEZXB0aCggY29uc3QgaW4gZmxvYXQgdmlld1osIGNvbnN0IGluIGZsb2F0IG5lYXIsIGNvbnN0IGluIGZsb2F0IGZhciApIHtcblx0cmV0dXJuICggKCBuZWFyICsgdmlld1ogKSAqIGZhciApIC8gKCAoIGZhciAtIG5lYXIgKSAqIHZpZXdaICk7XG59XG5mbG9hdCBwZXJzcGVjdGl2ZURlcHRoVG9WaWV3WiggY29uc3QgaW4gZmxvYXQgaW52Q2xpcFosIGNvbnN0IGluIGZsb2F0IG5lYXIsIGNvbnN0IGluIGZsb2F0IGZhciApIHtcblx0cmV0dXJuICggbmVhciAqIGZhciApIC8gKCAoIGZhciAtIG5lYXIgKSAqIGludkNsaXBaIC0gZmFyICk7XG59Ijt2YXIgcHJlbXVsdGlwbGllZF9hbHBoYV9mcmFnbWVudD0iI2lmZGVmIFBSRU1VTFRJUExJRURfQUxQSEFcblx0Z2xfRnJhZ0NvbG9yLnJnYiAqPSBnbF9GcmFnQ29sb3IuYTtcbiNlbmRpZiI7dmFyIHByb2plY3RfdmVydGV4PSJ2ZWM0IG12UG9zaXRpb24gPSB2ZWM0KCB0cmFuc2Zvcm1lZCwgMS4wICk7XG4jaWZkZWYgVVNFX0lOU1RBTkNJTkdcblx0bXZQb3NpdGlvbiA9IGluc3RhbmNlTWF0cml4ICogbXZQb3NpdGlvbjtcbiNlbmRpZlxubXZQb3NpdGlvbiA9IG1vZGVsVmlld01hdHJpeCAqIG12UG9zaXRpb247XG5nbF9Qb3NpdGlvbiA9IHByb2plY3Rpb25NYXRyaXggKiBtdlBvc2l0aW9uOyI7dmFyIGRpdGhlcmluZ19mcmFnbWVudD0iI2lmZGVmIERJVEhFUklOR1xuXHRnbF9GcmFnQ29sb3IucmdiID0gZGl0aGVyaW5nKCBnbF9GcmFnQ29sb3IucmdiICk7XG4jZW5kaWYiO3ZhciBkaXRoZXJpbmdfcGFyc19mcmFnbWVudD0iI2lmZGVmIERJVEhFUklOR1xuXHR2ZWMzIGRpdGhlcmluZyggdmVjMyBjb2xvciApIHtcblx0XHRmbG9hdCBncmlkX3Bvc2l0aW9uID0gcmFuZCggZ2xfRnJhZ0Nvb3JkLnh5ICk7XG5cdFx0dmVjMyBkaXRoZXJfc2hpZnRfUkdCID0gdmVjMyggMC4yNSAvIDI1NS4wLCAtMC4yNSAvIDI1NS4wLCAwLjI1IC8gMjU1LjAgKTtcblx0XHRkaXRoZXJfc2hpZnRfUkdCID0gbWl4KCAyLjAgKiBkaXRoZXJfc2hpZnRfUkdCLCAtMi4wICogZGl0aGVyX3NoaWZ0X1JHQiwgZ3JpZF9wb3NpdGlvbiApO1xuXHRcdHJldHVybiBjb2xvciArIGRpdGhlcl9zaGlmdF9SR0I7XG5cdH1cbiNlbmRpZiI7dmFyIHJvdWdobmVzc21hcF9mcmFnbWVudD0iZmxvYXQgcm91Z2huZXNzRmFjdG9yID0gcm91Z2huZXNzO1xuI2lmZGVmIFVTRV9ST1VHSE5FU1NNQVBcblx0dmVjNCB0ZXhlbFJvdWdobmVzcyA9IHRleHR1cmUyRCggcm91Z2huZXNzTWFwLCB2VXYgKTtcblx0cm91Z2huZXNzRmFjdG9yICo9IHRleGVsUm91Z2huZXNzLmc7XG4jZW5kaWYiO3ZhciByb3VnaG5lc3NtYXBfcGFyc19mcmFnbWVudD0iI2lmZGVmIFVTRV9ST1VHSE5FU1NNQVBcblx0dW5pZm9ybSBzYW1wbGVyMkQgcm91Z2huZXNzTWFwO1xuI2VuZGlmIjt2YXIgc2hhZG93bWFwX3BhcnNfZnJhZ21lbnQ9IiNpZmRlZiBVU0VfU0hBRE9XTUFQXG5cdCNpZiBOVU1fRElSX0xJR0hUX1NIQURPV1MgPiAwXG5cdFx0dW5pZm9ybSBzYW1wbGVyMkQgZGlyZWN0aW9uYWxTaGFkb3dNYXBbIE5VTV9ESVJfTElHSFRfU0hBRE9XUyBdO1xuXHRcdHZhcnlpbmcgdmVjNCB2RGlyZWN0aW9uYWxTaGFkb3dDb29yZFsgTlVNX0RJUl9MSUdIVF9TSEFET1dTIF07XG5cdFx0c3RydWN0IERpcmVjdGlvbmFsTGlnaHRTaGFkb3cge1xuXHRcdFx0ZmxvYXQgc2hhZG93Qmlhcztcblx0XHRcdGZsb2F0IHNoYWRvd05vcm1hbEJpYXM7XG5cdFx0XHRmbG9hdCBzaGFkb3dSYWRpdXM7XG5cdFx0XHR2ZWMyIHNoYWRvd01hcFNpemU7XG5cdFx0fTtcblx0XHR1bmlmb3JtIERpcmVjdGlvbmFsTGlnaHRTaGFkb3cgZGlyZWN0aW9uYWxMaWdodFNoYWRvd3NbIE5VTV9ESVJfTElHSFRfU0hBRE9XUyBdO1xuXHQjZW5kaWZcblx0I2lmIE5VTV9TUE9UX0xJR0hUX1NIQURPV1MgPiAwXG5cdFx0dW5pZm9ybSBzYW1wbGVyMkQgc3BvdFNoYWRvd01hcFsgTlVNX1NQT1RfTElHSFRfU0hBRE9XUyBdO1xuXHRcdHZhcnlpbmcgdmVjNCB2U3BvdFNoYWRvd0Nvb3JkWyBOVU1fU1BPVF9MSUdIVF9TSEFET1dTIF07XG5cdFx0c3RydWN0IFNwb3RMaWdodFNoYWRvdyB7XG5cdFx0XHRmbG9hdCBzaGFkb3dCaWFzO1xuXHRcdFx0ZmxvYXQgc2hhZG93Tm9ybWFsQmlhcztcblx0XHRcdGZsb2F0IHNoYWRvd1JhZGl1cztcblx0XHRcdHZlYzIgc2hhZG93TWFwU2l6ZTtcblx0XHR9O1xuXHRcdHVuaWZvcm0gU3BvdExpZ2h0U2hhZG93IHNwb3RMaWdodFNoYWRvd3NbIE5VTV9TUE9UX0xJR0hUX1NIQURPV1MgXTtcblx0I2VuZGlmXG5cdCNpZiBOVU1fUE9JTlRfTElHSFRfU0hBRE9XUyA+IDBcblx0XHR1bmlmb3JtIHNhbXBsZXIyRCBwb2ludFNoYWRvd01hcFsgTlVNX1BPSU5UX0xJR0hUX1NIQURPV1MgXTtcblx0XHR2YXJ5aW5nIHZlYzQgdlBvaW50U2hhZG93Q29vcmRbIE5VTV9QT0lOVF9MSUdIVF9TSEFET1dTIF07XG5cdFx0c3RydWN0IFBvaW50TGlnaHRTaGFkb3cge1xuXHRcdFx0ZmxvYXQgc2hhZG93Qmlhcztcblx0XHRcdGZsb2F0IHNoYWRvd05vcm1hbEJpYXM7XG5cdFx0XHRmbG9hdCBzaGFkb3dSYWRpdXM7XG5cdFx0XHR2ZWMyIHNoYWRvd01hcFNpemU7XG5cdFx0XHRmbG9hdCBzaGFkb3dDYW1lcmFOZWFyO1xuXHRcdFx0ZmxvYXQgc2hhZG93Q2FtZXJhRmFyO1xuXHRcdH07XG5cdFx0dW5pZm9ybSBQb2ludExpZ2h0U2hhZG93IHBvaW50TGlnaHRTaGFkb3dzWyBOVU1fUE9JTlRfTElHSFRfU0hBRE9XUyBdO1xuXHQjZW5kaWZcblx0ZmxvYXQgdGV4dHVyZTJEQ29tcGFyZSggc2FtcGxlcjJEIGRlcHRocywgdmVjMiB1diwgZmxvYXQgY29tcGFyZSApIHtcblx0XHRyZXR1cm4gc3RlcCggY29tcGFyZSwgdW5wYWNrUkdCQVRvRGVwdGgoIHRleHR1cmUyRCggZGVwdGhzLCB1diApICkgKTtcblx0fVxuXHR2ZWMyIHRleHR1cmUyRERpc3RyaWJ1dGlvbiggc2FtcGxlcjJEIHNoYWRvdywgdmVjMiB1diApIHtcblx0XHRyZXR1cm4gdW5wYWNrUkdCQVRvMkhhbGYoIHRleHR1cmUyRCggc2hhZG93LCB1diApICk7XG5cdH1cblx0ZmxvYXQgVlNNU2hhZG93IChzYW1wbGVyMkQgc2hhZG93LCB2ZWMyIHV2LCBmbG9hdCBjb21wYXJlICl7XG5cdFx0ZmxvYXQgb2NjbHVzaW9uID0gMS4wO1xuXHRcdHZlYzIgZGlzdHJpYnV0aW9uID0gdGV4dHVyZTJERGlzdHJpYnV0aW9uKCBzaGFkb3csIHV2ICk7XG5cdFx0ZmxvYXQgaGFyZF9zaGFkb3cgPSBzdGVwKCBjb21wYXJlICwgZGlzdHJpYnV0aW9uLnggKTtcblx0XHRpZiAoaGFyZF9zaGFkb3cgIT0gMS4wICkge1xuXHRcdFx0ZmxvYXQgZGlzdGFuY2UgPSBjb21wYXJlIC0gZGlzdHJpYnV0aW9uLnggO1xuXHRcdFx0ZmxvYXQgdmFyaWFuY2UgPSBtYXgoIDAuMDAwMDAsIGRpc3RyaWJ1dGlvbi55ICogZGlzdHJpYnV0aW9uLnkgKTtcblx0XHRcdGZsb2F0IHNvZnRuZXNzX3Byb2JhYmlsaXR5ID0gdmFyaWFuY2UgLyAodmFyaWFuY2UgKyBkaXN0YW5jZSAqIGRpc3RhbmNlICk7XHRcdFx0c29mdG5lc3NfcHJvYmFiaWxpdHkgPSBjbGFtcCggKCBzb2Z0bmVzc19wcm9iYWJpbGl0eSAtIDAuMyApIC8gKCAwLjk1IC0gMC4zICksIDAuMCwgMS4wICk7XHRcdFx0b2NjbHVzaW9uID0gY2xhbXAoIG1heCggaGFyZF9zaGFkb3csIHNvZnRuZXNzX3Byb2JhYmlsaXR5ICksIDAuMCwgMS4wICk7XG5cdFx0fVxuXHRcdHJldHVybiBvY2NsdXNpb247XG5cdH1cblx0ZmxvYXQgZ2V0U2hhZG93KCBzYW1wbGVyMkQgc2hhZG93TWFwLCB2ZWMyIHNoYWRvd01hcFNpemUsIGZsb2F0IHNoYWRvd0JpYXMsIGZsb2F0IHNoYWRvd1JhZGl1cywgdmVjNCBzaGFkb3dDb29yZCApIHtcblx0XHRmbG9hdCBzaGFkb3cgPSAxLjA7XG5cdFx0c2hhZG93Q29vcmQueHl6IC89IHNoYWRvd0Nvb3JkLnc7XG5cdFx0c2hhZG93Q29vcmQueiArPSBzaGFkb3dCaWFzO1xuXHRcdGJ2ZWM0IGluRnJ1c3R1bVZlYyA9IGJ2ZWM0ICggc2hhZG93Q29vcmQueCA+PSAwLjAsIHNoYWRvd0Nvb3JkLnggPD0gMS4wLCBzaGFkb3dDb29yZC55ID49IDAuMCwgc2hhZG93Q29vcmQueSA8PSAxLjAgKTtcblx0XHRib29sIGluRnJ1c3R1bSA9IGFsbCggaW5GcnVzdHVtVmVjICk7XG5cdFx0YnZlYzIgZnJ1c3R1bVRlc3RWZWMgPSBidmVjMiggaW5GcnVzdHVtLCBzaGFkb3dDb29yZC56IDw9IDEuMCApO1xuXHRcdGJvb2wgZnJ1c3R1bVRlc3QgPSBhbGwoIGZydXN0dW1UZXN0VmVjICk7XG5cdFx0aWYgKCBmcnVzdHVtVGVzdCApIHtcblx0XHQjaWYgZGVmaW5lZCggU0hBRE9XTUFQX1RZUEVfUENGIClcblx0XHRcdHZlYzIgdGV4ZWxTaXplID0gdmVjMiggMS4wICkgLyBzaGFkb3dNYXBTaXplO1xuXHRcdFx0ZmxvYXQgZHgwID0gLSB0ZXhlbFNpemUueCAqIHNoYWRvd1JhZGl1cztcblx0XHRcdGZsb2F0IGR5MCA9IC0gdGV4ZWxTaXplLnkgKiBzaGFkb3dSYWRpdXM7XG5cdFx0XHRmbG9hdCBkeDEgPSArIHRleGVsU2l6ZS54ICogc2hhZG93UmFkaXVzO1xuXHRcdFx0ZmxvYXQgZHkxID0gKyB0ZXhlbFNpemUueSAqIHNoYWRvd1JhZGl1cztcblx0XHRcdGZsb2F0IGR4MiA9IGR4MCAvIDIuMDtcblx0XHRcdGZsb2F0IGR5MiA9IGR5MCAvIDIuMDtcblx0XHRcdGZsb2F0IGR4MyA9IGR4MSAvIDIuMDtcblx0XHRcdGZsb2F0IGR5MyA9IGR5MSAvIDIuMDtcblx0XHRcdHNoYWRvdyA9IChcblx0XHRcdFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBzaGFkb3dDb29yZC54eSArIHZlYzIoIGR4MCwgZHkwICksIHNoYWRvd0Nvb3JkLnogKSArXG5cdFx0XHRcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgc2hhZG93Q29vcmQueHkgKyB2ZWMyKCAwLjAsIGR5MCApLCBzaGFkb3dDb29yZC56ICkgK1xuXHRcdFx0XHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggZHgxLCBkeTAgKSwgc2hhZG93Q29vcmQueiApICtcblx0XHRcdFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBzaGFkb3dDb29yZC54eSArIHZlYzIoIGR4MiwgZHkyICksIHNoYWRvd0Nvb3JkLnogKSArXG5cdFx0XHRcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgc2hhZG93Q29vcmQueHkgKyB2ZWMyKCAwLjAsIGR5MiApLCBzaGFkb3dDb29yZC56ICkgK1xuXHRcdFx0XHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggZHgzLCBkeTIgKSwgc2hhZG93Q29vcmQueiApICtcblx0XHRcdFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBzaGFkb3dDb29yZC54eSArIHZlYzIoIGR4MCwgMC4wICksIHNoYWRvd0Nvb3JkLnogKSArXG5cdFx0XHRcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgc2hhZG93Q29vcmQueHkgKyB2ZWMyKCBkeDIsIDAuMCApLCBzaGFkb3dDb29yZC56ICkgK1xuXHRcdFx0XHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIHNoYWRvd0Nvb3JkLnh5LCBzaGFkb3dDb29yZC56ICkgK1xuXHRcdFx0XHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggZHgzLCAwLjAgKSwgc2hhZG93Q29vcmQueiApICtcblx0XHRcdFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBzaGFkb3dDb29yZC54eSArIHZlYzIoIGR4MSwgMC4wICksIHNoYWRvd0Nvb3JkLnogKSArXG5cdFx0XHRcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgc2hhZG93Q29vcmQueHkgKyB2ZWMyKCBkeDIsIGR5MyApLCBzaGFkb3dDb29yZC56ICkgK1xuXHRcdFx0XHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggMC4wLCBkeTMgKSwgc2hhZG93Q29vcmQueiApICtcblx0XHRcdFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBzaGFkb3dDb29yZC54eSArIHZlYzIoIGR4MywgZHkzICksIHNoYWRvd0Nvb3JkLnogKSArXG5cdFx0XHRcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgc2hhZG93Q29vcmQueHkgKyB2ZWMyKCBkeDAsIGR5MSApLCBzaGFkb3dDb29yZC56ICkgK1xuXHRcdFx0XHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggMC4wLCBkeTEgKSwgc2hhZG93Q29vcmQueiApICtcblx0XHRcdFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBzaGFkb3dDb29yZC54eSArIHZlYzIoIGR4MSwgZHkxICksIHNoYWRvd0Nvb3JkLnogKVxuXHRcdFx0KSAqICggMS4wIC8gMTcuMCApO1xuXHRcdCNlbGlmIGRlZmluZWQoIFNIQURPV01BUF9UWVBFX1BDRl9TT0ZUIClcblx0XHRcdHZlYzIgdGV4ZWxTaXplID0gdmVjMiggMS4wICkgLyBzaGFkb3dNYXBTaXplO1xuXHRcdFx0ZmxvYXQgZHggPSB0ZXhlbFNpemUueDtcblx0XHRcdGZsb2F0IGR5ID0gdGV4ZWxTaXplLnk7XG5cdFx0XHR2ZWMyIHV2ID0gc2hhZG93Q29vcmQueHk7XG5cdFx0XHR2ZWMyIGYgPSBmcmFjdCggdXYgKiBzaGFkb3dNYXBTaXplICsgMC41ICk7XG5cdFx0XHR1diAtPSBmICogdGV4ZWxTaXplO1xuXHRcdFx0c2hhZG93ID0gKFxuXHRcdFx0XHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIHV2LCBzaGFkb3dDb29yZC56ICkgK1xuXHRcdFx0XHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIHV2ICsgdmVjMiggZHgsIDAuMCApLCBzaGFkb3dDb29yZC56ICkgK1xuXHRcdFx0XHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIHV2ICsgdmVjMiggMC4wLCBkeSApLCBzaGFkb3dDb29yZC56ICkgK1xuXHRcdFx0XHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIHV2ICsgdGV4ZWxTaXplLCBzaGFkb3dDb29yZC56ICkgK1xuXHRcdFx0XHRtaXgoIHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgdXYgKyB2ZWMyKCAtZHgsIDAuMCApLCBzaGFkb3dDb29yZC56ICksIFxuXHRcdFx0XHRcdCB0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIHV2ICsgdmVjMiggMi4wICogZHgsIDAuMCApLCBzaGFkb3dDb29yZC56ICksXG5cdFx0XHRcdFx0IGYueCApICtcblx0XHRcdFx0bWl4KCB0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIHV2ICsgdmVjMiggLWR4LCBkeSApLCBzaGFkb3dDb29yZC56ICksIFxuXHRcdFx0XHRcdCB0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIHV2ICsgdmVjMiggMi4wICogZHgsIGR5ICksIHNoYWRvd0Nvb3JkLnogKSxcblx0XHRcdFx0XHQgZi54ICkgK1xuXHRcdFx0XHRtaXgoIHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgdXYgKyB2ZWMyKCAwLjAsIC1keSApLCBzaGFkb3dDb29yZC56ICksIFxuXHRcdFx0XHRcdCB0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIHV2ICsgdmVjMiggMC4wLCAyLjAgKiBkeSApLCBzaGFkb3dDb29yZC56ICksXG5cdFx0XHRcdFx0IGYueSApICtcblx0XHRcdFx0bWl4KCB0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIHV2ICsgdmVjMiggZHgsIC1keSApLCBzaGFkb3dDb29yZC56ICksIFxuXHRcdFx0XHRcdCB0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIHV2ICsgdmVjMiggZHgsIDIuMCAqIGR5ICksIHNoYWRvd0Nvb3JkLnogKSxcblx0XHRcdFx0XHQgZi55ICkgK1xuXHRcdFx0XHRtaXgoIG1peCggdGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCB1diArIHZlYzIoIC1keCwgLWR5ICksIHNoYWRvd0Nvb3JkLnogKSwgXG5cdFx0XHRcdFx0XHQgIHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgdXYgKyB2ZWMyKCAyLjAgKiBkeCwgLWR5ICksIHNoYWRvd0Nvb3JkLnogKSxcblx0XHRcdFx0XHRcdCAgZi54ICksXG5cdFx0XHRcdFx0IG1peCggdGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCB1diArIHZlYzIoIC1keCwgMi4wICogZHkgKSwgc2hhZG93Q29vcmQueiApLCBcblx0XHRcdFx0XHRcdCAgdGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCB1diArIHZlYzIoIDIuMCAqIGR4LCAyLjAgKiBkeSApLCBzaGFkb3dDb29yZC56ICksXG5cdFx0XHRcdFx0XHQgIGYueCApLFxuXHRcdFx0XHRcdCBmLnkgKVxuXHRcdFx0KSAqICggMS4wIC8gOS4wICk7XG5cdFx0I2VsaWYgZGVmaW5lZCggU0hBRE9XTUFQX1RZUEVfVlNNIClcblx0XHRcdHNoYWRvdyA9IFZTTVNoYWRvdyggc2hhZG93TWFwLCBzaGFkb3dDb29yZC54eSwgc2hhZG93Q29vcmQueiApO1xuXHRcdCNlbHNlXG5cdFx0XHRzaGFkb3cgPSB0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIHNoYWRvd0Nvb3JkLnh5LCBzaGFkb3dDb29yZC56ICk7XG5cdFx0I2VuZGlmXG5cdFx0fVxuXHRcdHJldHVybiBzaGFkb3c7XG5cdH1cblx0dmVjMiBjdWJlVG9VViggdmVjMyB2LCBmbG9hdCB0ZXhlbFNpemVZICkge1xuXHRcdHZlYzMgYWJzViA9IGFicyggdiApO1xuXHRcdGZsb2F0IHNjYWxlVG9DdWJlID0gMS4wIC8gbWF4KCBhYnNWLngsIG1heCggYWJzVi55LCBhYnNWLnogKSApO1xuXHRcdGFic1YgKj0gc2NhbGVUb0N1YmU7XG5cdFx0diAqPSBzY2FsZVRvQ3ViZSAqICggMS4wIC0gMi4wICogdGV4ZWxTaXplWSApO1xuXHRcdHZlYzIgcGxhbmFyID0gdi54eTtcblx0XHRmbG9hdCBhbG1vc3RBVGV4ZWwgPSAxLjUgKiB0ZXhlbFNpemVZO1xuXHRcdGZsb2F0IGFsbW9zdE9uZSA9IDEuMCAtIGFsbW9zdEFUZXhlbDtcblx0XHRpZiAoIGFic1YueiA+PSBhbG1vc3RPbmUgKSB7XG5cdFx0XHRpZiAoIHYueiA+IDAuMCApXG5cdFx0XHRcdHBsYW5hci54ID0gNC4wIC0gdi54O1xuXHRcdH0gZWxzZSBpZiAoIGFic1YueCA+PSBhbG1vc3RPbmUgKSB7XG5cdFx0XHRmbG9hdCBzaWduWCA9IHNpZ24oIHYueCApO1xuXHRcdFx0cGxhbmFyLnggPSB2LnogKiBzaWduWCArIDIuMCAqIHNpZ25YO1xuXHRcdH0gZWxzZSBpZiAoIGFic1YueSA+PSBhbG1vc3RPbmUgKSB7XG5cdFx0XHRmbG9hdCBzaWduWSA9IHNpZ24oIHYueSApO1xuXHRcdFx0cGxhbmFyLnggPSB2LnggKyAyLjAgKiBzaWduWSArIDIuMDtcblx0XHRcdHBsYW5hci55ID0gdi56ICogc2lnblkgLSAyLjA7XG5cdFx0fVxuXHRcdHJldHVybiB2ZWMyKCAwLjEyNSwgMC4yNSApICogcGxhbmFyICsgdmVjMiggMC4zNzUsIDAuNzUgKTtcblx0fVxuXHRmbG9hdCBnZXRQb2ludFNoYWRvdyggc2FtcGxlcjJEIHNoYWRvd01hcCwgdmVjMiBzaGFkb3dNYXBTaXplLCBmbG9hdCBzaGFkb3dCaWFzLCBmbG9hdCBzaGFkb3dSYWRpdXMsIHZlYzQgc2hhZG93Q29vcmQsIGZsb2F0IHNoYWRvd0NhbWVyYU5lYXIsIGZsb2F0IHNoYWRvd0NhbWVyYUZhciApIHtcblx0XHR2ZWMyIHRleGVsU2l6ZSA9IHZlYzIoIDEuMCApIC8gKCBzaGFkb3dNYXBTaXplICogdmVjMiggNC4wLCAyLjAgKSApO1xuXHRcdHZlYzMgbGlnaHRUb1Bvc2l0aW9uID0gc2hhZG93Q29vcmQueHl6O1xuXHRcdGZsb2F0IGRwID0gKCBsZW5ndGgoIGxpZ2h0VG9Qb3NpdGlvbiApIC0gc2hhZG93Q2FtZXJhTmVhciApIC8gKCBzaGFkb3dDYW1lcmFGYXIgLSBzaGFkb3dDYW1lcmFOZWFyICk7XHRcdGRwICs9IHNoYWRvd0JpYXM7XG5cdFx0dmVjMyBiZDNEID0gbm9ybWFsaXplKCBsaWdodFRvUG9zaXRpb24gKTtcblx0XHQjaWYgZGVmaW5lZCggU0hBRE9XTUFQX1RZUEVfUENGICkgfHwgZGVmaW5lZCggU0hBRE9XTUFQX1RZUEVfUENGX1NPRlQgKSB8fCBkZWZpbmVkKCBTSEFET1dNQVBfVFlQRV9WU00gKVxuXHRcdFx0dmVjMiBvZmZzZXQgPSB2ZWMyKCAtIDEsIDEgKSAqIHNoYWRvd1JhZGl1cyAqIHRleGVsU2l6ZS55O1xuXHRcdFx0cmV0dXJuIChcblx0XHRcdFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBjdWJlVG9VViggYmQzRCArIG9mZnNldC54eXksIHRleGVsU2l6ZS55ICksIGRwICkgK1xuXHRcdFx0XHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIGN1YmVUb1VWKCBiZDNEICsgb2Zmc2V0Lnl5eSwgdGV4ZWxTaXplLnkgKSwgZHAgKSArXG5cdFx0XHRcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgY3ViZVRvVVYoIGJkM0QgKyBvZmZzZXQueHl4LCB0ZXhlbFNpemUueSApLCBkcCApICtcblx0XHRcdFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBjdWJlVG9VViggYmQzRCArIG9mZnNldC55eXgsIHRleGVsU2l6ZS55ICksIGRwICkgK1xuXHRcdFx0XHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIGN1YmVUb1VWKCBiZDNELCB0ZXhlbFNpemUueSApLCBkcCApICtcblx0XHRcdFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBjdWJlVG9VViggYmQzRCArIG9mZnNldC54eHksIHRleGVsU2l6ZS55ICksIGRwICkgK1xuXHRcdFx0XHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIGN1YmVUb1VWKCBiZDNEICsgb2Zmc2V0Lnl4eSwgdGV4ZWxTaXplLnkgKSwgZHAgKSArXG5cdFx0XHRcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgY3ViZVRvVVYoIGJkM0QgKyBvZmZzZXQueHh4LCB0ZXhlbFNpemUueSApLCBkcCApICtcblx0XHRcdFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBjdWJlVG9VViggYmQzRCArIG9mZnNldC55eHgsIHRleGVsU2l6ZS55ICksIGRwIClcblx0XHRcdCkgKiAoIDEuMCAvIDkuMCApO1xuXHRcdCNlbHNlXG5cdFx0XHRyZXR1cm4gdGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBjdWJlVG9VViggYmQzRCwgdGV4ZWxTaXplLnkgKSwgZHAgKTtcblx0XHQjZW5kaWZcblx0fVxuI2VuZGlmIjt2YXIgc2hhZG93bWFwX3BhcnNfdmVydGV4PSIjaWZkZWYgVVNFX1NIQURPV01BUFxuXHQjaWYgTlVNX0RJUl9MSUdIVF9TSEFET1dTID4gMFxuXHRcdHVuaWZvcm0gbWF0NCBkaXJlY3Rpb25hbFNoYWRvd01hdHJpeFsgTlVNX0RJUl9MSUdIVF9TSEFET1dTIF07XG5cdFx0dmFyeWluZyB2ZWM0IHZEaXJlY3Rpb25hbFNoYWRvd0Nvb3JkWyBOVU1fRElSX0xJR0hUX1NIQURPV1MgXTtcblx0XHRzdHJ1Y3QgRGlyZWN0aW9uYWxMaWdodFNoYWRvdyB7XG5cdFx0XHRmbG9hdCBzaGFkb3dCaWFzO1xuXHRcdFx0ZmxvYXQgc2hhZG93Tm9ybWFsQmlhcztcblx0XHRcdGZsb2F0IHNoYWRvd1JhZGl1cztcblx0XHRcdHZlYzIgc2hhZG93TWFwU2l6ZTtcblx0XHR9O1xuXHRcdHVuaWZvcm0gRGlyZWN0aW9uYWxMaWdodFNoYWRvdyBkaXJlY3Rpb25hbExpZ2h0U2hhZG93c1sgTlVNX0RJUl9MSUdIVF9TSEFET1dTIF07XG5cdCNlbmRpZlxuXHQjaWYgTlVNX1NQT1RfTElHSFRfU0hBRE9XUyA+IDBcblx0XHR1bmlmb3JtIG1hdDQgc3BvdFNoYWRvd01hdHJpeFsgTlVNX1NQT1RfTElHSFRfU0hBRE9XUyBdO1xuXHRcdHZhcnlpbmcgdmVjNCB2U3BvdFNoYWRvd0Nvb3JkWyBOVU1fU1BPVF9MSUdIVF9TSEFET1dTIF07XG5cdFx0c3RydWN0IFNwb3RMaWdodFNoYWRvdyB7XG5cdFx0XHRmbG9hdCBzaGFkb3dCaWFzO1xuXHRcdFx0ZmxvYXQgc2hhZG93Tm9ybWFsQmlhcztcblx0XHRcdGZsb2F0IHNoYWRvd1JhZGl1cztcblx0XHRcdHZlYzIgc2hhZG93TWFwU2l6ZTtcblx0XHR9O1xuXHRcdHVuaWZvcm0gU3BvdExpZ2h0U2hhZG93IHNwb3RMaWdodFNoYWRvd3NbIE5VTV9TUE9UX0xJR0hUX1NIQURPV1MgXTtcblx0I2VuZGlmXG5cdCNpZiBOVU1fUE9JTlRfTElHSFRfU0hBRE9XUyA+IDBcblx0XHR1bmlmb3JtIG1hdDQgcG9pbnRTaGFkb3dNYXRyaXhbIE5VTV9QT0lOVF9MSUdIVF9TSEFET1dTIF07XG5cdFx0dmFyeWluZyB2ZWM0IHZQb2ludFNoYWRvd0Nvb3JkWyBOVU1fUE9JTlRfTElHSFRfU0hBRE9XUyBdO1xuXHRcdHN0cnVjdCBQb2ludExpZ2h0U2hhZG93IHtcblx0XHRcdGZsb2F0IHNoYWRvd0JpYXM7XG5cdFx0XHRmbG9hdCBzaGFkb3dOb3JtYWxCaWFzO1xuXHRcdFx0ZmxvYXQgc2hhZG93UmFkaXVzO1xuXHRcdFx0dmVjMiBzaGFkb3dNYXBTaXplO1xuXHRcdFx0ZmxvYXQgc2hhZG93Q2FtZXJhTmVhcjtcblx0XHRcdGZsb2F0IHNoYWRvd0NhbWVyYUZhcjtcblx0XHR9O1xuXHRcdHVuaWZvcm0gUG9pbnRMaWdodFNoYWRvdyBwb2ludExpZ2h0U2hhZG93c1sgTlVNX1BPSU5UX0xJR0hUX1NIQURPV1MgXTtcblx0I2VuZGlmXG4jZW5kaWYiO3ZhciBzaGFkb3dtYXBfdmVydGV4PSIjaWZkZWYgVVNFX1NIQURPV01BUFxuXHQjaWYgTlVNX0RJUl9MSUdIVF9TSEFET1dTID4gMCB8fCBOVU1fU1BPVF9MSUdIVF9TSEFET1dTID4gMCB8fCBOVU1fUE9JTlRfTElHSFRfU0hBRE9XUyA+IDBcblx0XHR2ZWMzIHNoYWRvd1dvcmxkTm9ybWFsID0gaW52ZXJzZVRyYW5zZm9ybURpcmVjdGlvbiggdHJhbnNmb3JtZWROb3JtYWwsIHZpZXdNYXRyaXggKTtcblx0XHR2ZWM0IHNoYWRvd1dvcmxkUG9zaXRpb247XG5cdCNlbmRpZlxuXHQjaWYgTlVNX0RJUl9MSUdIVF9TSEFET1dTID4gMFxuXHQjcHJhZ21hIHVucm9sbF9sb29wX3N0YXJ0XG5cdGZvciAoIGludCBpID0gMDsgaSA8IE5VTV9ESVJfTElHSFRfU0hBRE9XUzsgaSArKyApIHtcblx0XHRzaGFkb3dXb3JsZFBvc2l0aW9uID0gd29ybGRQb3NpdGlvbiArIHZlYzQoIHNoYWRvd1dvcmxkTm9ybWFsICogZGlyZWN0aW9uYWxMaWdodFNoYWRvd3NbIGkgXS5zaGFkb3dOb3JtYWxCaWFzLCAwICk7XG5cdFx0dkRpcmVjdGlvbmFsU2hhZG93Q29vcmRbIGkgXSA9IGRpcmVjdGlvbmFsU2hhZG93TWF0cml4WyBpIF0gKiBzaGFkb3dXb3JsZFBvc2l0aW9uO1xuXHR9XG5cdCNwcmFnbWEgdW5yb2xsX2xvb3BfZW5kXG5cdCNlbmRpZlxuXHQjaWYgTlVNX1NQT1RfTElHSFRfU0hBRE9XUyA+IDBcblx0I3ByYWdtYSB1bnJvbGxfbG9vcF9zdGFydFxuXHRmb3IgKCBpbnQgaSA9IDA7IGkgPCBOVU1fU1BPVF9MSUdIVF9TSEFET1dTOyBpICsrICkge1xuXHRcdHNoYWRvd1dvcmxkUG9zaXRpb24gPSB3b3JsZFBvc2l0aW9uICsgdmVjNCggc2hhZG93V29ybGROb3JtYWwgKiBzcG90TGlnaHRTaGFkb3dzWyBpIF0uc2hhZG93Tm9ybWFsQmlhcywgMCApO1xuXHRcdHZTcG90U2hhZG93Q29vcmRbIGkgXSA9IHNwb3RTaGFkb3dNYXRyaXhbIGkgXSAqIHNoYWRvd1dvcmxkUG9zaXRpb247XG5cdH1cblx0I3ByYWdtYSB1bnJvbGxfbG9vcF9lbmRcblx0I2VuZGlmXG5cdCNpZiBOVU1fUE9JTlRfTElHSFRfU0hBRE9XUyA+IDBcblx0I3ByYWdtYSB1bnJvbGxfbG9vcF9zdGFydFxuXHRmb3IgKCBpbnQgaSA9IDA7IGkgPCBOVU1fUE9JTlRfTElHSFRfU0hBRE9XUzsgaSArKyApIHtcblx0XHRzaGFkb3dXb3JsZFBvc2l0aW9uID0gd29ybGRQb3NpdGlvbiArIHZlYzQoIHNoYWRvd1dvcmxkTm9ybWFsICogcG9pbnRMaWdodFNoYWRvd3NbIGkgXS5zaGFkb3dOb3JtYWxCaWFzLCAwICk7XG5cdFx0dlBvaW50U2hhZG93Q29vcmRbIGkgXSA9IHBvaW50U2hhZG93TWF0cml4WyBpIF0gKiBzaGFkb3dXb3JsZFBvc2l0aW9uO1xuXHR9XG5cdCNwcmFnbWEgdW5yb2xsX2xvb3BfZW5kXG5cdCNlbmRpZlxuI2VuZGlmIjt2YXIgc2hhZG93bWFza19wYXJzX2ZyYWdtZW50PSJmbG9hdCBnZXRTaGFkb3dNYXNrKCkge1xuXHRmbG9hdCBzaGFkb3cgPSAxLjA7XG5cdCNpZmRlZiBVU0VfU0hBRE9XTUFQXG5cdCNpZiBOVU1fRElSX0xJR0hUX1NIQURPV1MgPiAwXG5cdERpcmVjdGlvbmFsTGlnaHRTaGFkb3cgZGlyZWN0aW9uYWxMaWdodDtcblx0I3ByYWdtYSB1bnJvbGxfbG9vcF9zdGFydFxuXHRmb3IgKCBpbnQgaSA9IDA7IGkgPCBOVU1fRElSX0xJR0hUX1NIQURPV1M7IGkgKysgKSB7XG5cdFx0ZGlyZWN0aW9uYWxMaWdodCA9IGRpcmVjdGlvbmFsTGlnaHRTaGFkb3dzWyBpIF07XG5cdFx0c2hhZG93ICo9IHJlY2VpdmVTaGFkb3cgPyBnZXRTaGFkb3coIGRpcmVjdGlvbmFsU2hhZG93TWFwWyBpIF0sIGRpcmVjdGlvbmFsTGlnaHQuc2hhZG93TWFwU2l6ZSwgZGlyZWN0aW9uYWxMaWdodC5zaGFkb3dCaWFzLCBkaXJlY3Rpb25hbExpZ2h0LnNoYWRvd1JhZGl1cywgdkRpcmVjdGlvbmFsU2hhZG93Q29vcmRbIGkgXSApIDogMS4wO1xuXHR9XG5cdCNwcmFnbWEgdW5yb2xsX2xvb3BfZW5kXG5cdCNlbmRpZlxuXHQjaWYgTlVNX1NQT1RfTElHSFRfU0hBRE9XUyA+IDBcblx0U3BvdExpZ2h0U2hhZG93IHNwb3RMaWdodDtcblx0I3ByYWdtYSB1bnJvbGxfbG9vcF9zdGFydFxuXHRmb3IgKCBpbnQgaSA9IDA7IGkgPCBOVU1fU1BPVF9MSUdIVF9TSEFET1dTOyBpICsrICkge1xuXHRcdHNwb3RMaWdodCA9IHNwb3RMaWdodFNoYWRvd3NbIGkgXTtcblx0XHRzaGFkb3cgKj0gcmVjZWl2ZVNoYWRvdyA/IGdldFNoYWRvdyggc3BvdFNoYWRvd01hcFsgaSBdLCBzcG90TGlnaHQuc2hhZG93TWFwU2l6ZSwgc3BvdExpZ2h0LnNoYWRvd0JpYXMsIHNwb3RMaWdodC5zaGFkb3dSYWRpdXMsIHZTcG90U2hhZG93Q29vcmRbIGkgXSApIDogMS4wO1xuXHR9XG5cdCNwcmFnbWEgdW5yb2xsX2xvb3BfZW5kXG5cdCNlbmRpZlxuXHQjaWYgTlVNX1BPSU5UX0xJR0hUX1NIQURPV1MgPiAwXG5cdFBvaW50TGlnaHRTaGFkb3cgcG9pbnRMaWdodDtcblx0I3ByYWdtYSB1bnJvbGxfbG9vcF9zdGFydFxuXHRmb3IgKCBpbnQgaSA9IDA7IGkgPCBOVU1fUE9JTlRfTElHSFRfU0hBRE9XUzsgaSArKyApIHtcblx0XHRwb2ludExpZ2h0ID0gcG9pbnRMaWdodFNoYWRvd3NbIGkgXTtcblx0XHRzaGFkb3cgKj0gcmVjZWl2ZVNoYWRvdyA/IGdldFBvaW50U2hhZG93KCBwb2ludFNoYWRvd01hcFsgaSBdLCBwb2ludExpZ2h0LnNoYWRvd01hcFNpemUsIHBvaW50TGlnaHQuc2hhZG93QmlhcywgcG9pbnRMaWdodC5zaGFkb3dSYWRpdXMsIHZQb2ludFNoYWRvd0Nvb3JkWyBpIF0sIHBvaW50TGlnaHQuc2hhZG93Q2FtZXJhTmVhciwgcG9pbnRMaWdodC5zaGFkb3dDYW1lcmFGYXIgKSA6IDEuMDtcblx0fVxuXHQjcHJhZ21hIHVucm9sbF9sb29wX2VuZFxuXHQjZW5kaWZcblx0I2VuZGlmXG5cdHJldHVybiBzaGFkb3c7XG59Ijt2YXIgc2tpbmJhc2VfdmVydGV4PSIjaWZkZWYgVVNFX1NLSU5OSU5HXG5cdG1hdDQgYm9uZU1hdFggPSBnZXRCb25lTWF0cml4KCBza2luSW5kZXgueCApO1xuXHRtYXQ0IGJvbmVNYXRZID0gZ2V0Qm9uZU1hdHJpeCggc2tpbkluZGV4LnkgKTtcblx0bWF0NCBib25lTWF0WiA9IGdldEJvbmVNYXRyaXgoIHNraW5JbmRleC56ICk7XG5cdG1hdDQgYm9uZU1hdFcgPSBnZXRCb25lTWF0cml4KCBza2luSW5kZXgudyApO1xuI2VuZGlmIjt2YXIgc2tpbm5pbmdfcGFyc192ZXJ0ZXg9IiNpZmRlZiBVU0VfU0tJTk5JTkdcblx0dW5pZm9ybSBtYXQ0IGJpbmRNYXRyaXg7XG5cdHVuaWZvcm0gbWF0NCBiaW5kTWF0cml4SW52ZXJzZTtcblx0I2lmZGVmIEJPTkVfVEVYVFVSRVxuXHRcdHVuaWZvcm0gaGlnaHAgc2FtcGxlcjJEIGJvbmVUZXh0dXJlO1xuXHRcdHVuaWZvcm0gaW50IGJvbmVUZXh0dXJlU2l6ZTtcblx0XHRtYXQ0IGdldEJvbmVNYXRyaXgoIGNvbnN0IGluIGZsb2F0IGkgKSB7XG5cdFx0XHRmbG9hdCBqID0gaSAqIDQuMDtcblx0XHRcdGZsb2F0IHggPSBtb2QoIGosIGZsb2F0KCBib25lVGV4dHVyZVNpemUgKSApO1xuXHRcdFx0ZmxvYXQgeSA9IGZsb29yKCBqIC8gZmxvYXQoIGJvbmVUZXh0dXJlU2l6ZSApICk7XG5cdFx0XHRmbG9hdCBkeCA9IDEuMCAvIGZsb2F0KCBib25lVGV4dHVyZVNpemUgKTtcblx0XHRcdGZsb2F0IGR5ID0gMS4wIC8gZmxvYXQoIGJvbmVUZXh0dXJlU2l6ZSApO1xuXHRcdFx0eSA9IGR5ICogKCB5ICsgMC41ICk7XG5cdFx0XHR2ZWM0IHYxID0gdGV4dHVyZTJEKCBib25lVGV4dHVyZSwgdmVjMiggZHggKiAoIHggKyAwLjUgKSwgeSApICk7XG5cdFx0XHR2ZWM0IHYyID0gdGV4dHVyZTJEKCBib25lVGV4dHVyZSwgdmVjMiggZHggKiAoIHggKyAxLjUgKSwgeSApICk7XG5cdFx0XHR2ZWM0IHYzID0gdGV4dHVyZTJEKCBib25lVGV4dHVyZSwgdmVjMiggZHggKiAoIHggKyAyLjUgKSwgeSApICk7XG5cdFx0XHR2ZWM0IHY0ID0gdGV4dHVyZTJEKCBib25lVGV4dHVyZSwgdmVjMiggZHggKiAoIHggKyAzLjUgKSwgeSApICk7XG5cdFx0XHRtYXQ0IGJvbmUgPSBtYXQ0KCB2MSwgdjIsIHYzLCB2NCApO1xuXHRcdFx0cmV0dXJuIGJvbmU7XG5cdFx0fVxuXHQjZWxzZVxuXHRcdHVuaWZvcm0gbWF0NCBib25lTWF0cmljZXNbIE1BWF9CT05FUyBdO1xuXHRcdG1hdDQgZ2V0Qm9uZU1hdHJpeCggY29uc3QgaW4gZmxvYXQgaSApIHtcblx0XHRcdG1hdDQgYm9uZSA9IGJvbmVNYXRyaWNlc1sgaW50KGkpIF07XG5cdFx0XHRyZXR1cm4gYm9uZTtcblx0XHR9XG5cdCNlbmRpZlxuI2VuZGlmIjt2YXIgc2tpbm5pbmdfdmVydGV4PSIjaWZkZWYgVVNFX1NLSU5OSU5HXG5cdHZlYzQgc2tpblZlcnRleCA9IGJpbmRNYXRyaXggKiB2ZWM0KCB0cmFuc2Zvcm1lZCwgMS4wICk7XG5cdHZlYzQgc2tpbm5lZCA9IHZlYzQoIDAuMCApO1xuXHRza2lubmVkICs9IGJvbmVNYXRYICogc2tpblZlcnRleCAqIHNraW5XZWlnaHQueDtcblx0c2tpbm5lZCArPSBib25lTWF0WSAqIHNraW5WZXJ0ZXggKiBza2luV2VpZ2h0Lnk7XG5cdHNraW5uZWQgKz0gYm9uZU1hdFogKiBza2luVmVydGV4ICogc2tpbldlaWdodC56O1xuXHRza2lubmVkICs9IGJvbmVNYXRXICogc2tpblZlcnRleCAqIHNraW5XZWlnaHQudztcblx0dHJhbnNmb3JtZWQgPSAoIGJpbmRNYXRyaXhJbnZlcnNlICogc2tpbm5lZCApLnh5ejtcbiNlbmRpZiI7dmFyIHNraW5ub3JtYWxfdmVydGV4PSIjaWZkZWYgVVNFX1NLSU5OSU5HXG5cdG1hdDQgc2tpbk1hdHJpeCA9IG1hdDQoIDAuMCApO1xuXHRza2luTWF0cml4ICs9IHNraW5XZWlnaHQueCAqIGJvbmVNYXRYO1xuXHRza2luTWF0cml4ICs9IHNraW5XZWlnaHQueSAqIGJvbmVNYXRZO1xuXHRza2luTWF0cml4ICs9IHNraW5XZWlnaHQueiAqIGJvbmVNYXRaO1xuXHRza2luTWF0cml4ICs9IHNraW5XZWlnaHQudyAqIGJvbmVNYXRXO1xuXHRza2luTWF0cml4ID0gYmluZE1hdHJpeEludmVyc2UgKiBza2luTWF0cml4ICogYmluZE1hdHJpeDtcblx0b2JqZWN0Tm9ybWFsID0gdmVjNCggc2tpbk1hdHJpeCAqIHZlYzQoIG9iamVjdE5vcm1hbCwgMC4wICkgKS54eXo7XG5cdCNpZmRlZiBVU0VfVEFOR0VOVFxuXHRcdG9iamVjdFRhbmdlbnQgPSB2ZWM0KCBza2luTWF0cml4ICogdmVjNCggb2JqZWN0VGFuZ2VudCwgMC4wICkgKS54eXo7XG5cdCNlbmRpZlxuI2VuZGlmIjt2YXIgc3BlY3VsYXJtYXBfZnJhZ21lbnQ9ImZsb2F0IHNwZWN1bGFyU3RyZW5ndGg7XG4jaWZkZWYgVVNFX1NQRUNVTEFSTUFQXG5cdHZlYzQgdGV4ZWxTcGVjdWxhciA9IHRleHR1cmUyRCggc3BlY3VsYXJNYXAsIHZVdiApO1xuXHRzcGVjdWxhclN0cmVuZ3RoID0gdGV4ZWxTcGVjdWxhci5yO1xuI2Vsc2Vcblx0c3BlY3VsYXJTdHJlbmd0aCA9IDEuMDtcbiNlbmRpZiI7dmFyIHNwZWN1bGFybWFwX3BhcnNfZnJhZ21lbnQ9IiNpZmRlZiBVU0VfU1BFQ1VMQVJNQVBcblx0dW5pZm9ybSBzYW1wbGVyMkQgc3BlY3VsYXJNYXA7XG4jZW5kaWYiO3ZhciB0b25lbWFwcGluZ19mcmFnbWVudD0iI2lmIGRlZmluZWQoIFRPTkVfTUFQUElORyApXG5cdGdsX0ZyYWdDb2xvci5yZ2IgPSB0b25lTWFwcGluZyggZ2xfRnJhZ0NvbG9yLnJnYiApO1xuI2VuZGlmIjt2YXIgdG9uZW1hcHBpbmdfcGFyc19mcmFnbWVudD0iI2lmbmRlZiBzYXR1cmF0ZVxuI2RlZmluZSBzYXR1cmF0ZSggYSApIGNsYW1wKCBhLCAwLjAsIDEuMCApXG4jZW5kaWZcbnVuaWZvcm0gZmxvYXQgdG9uZU1hcHBpbmdFeHBvc3VyZTtcbnZlYzMgTGluZWFyVG9uZU1hcHBpbmcoIHZlYzMgY29sb3IgKSB7XG5cdHJldHVybiB0b25lTWFwcGluZ0V4cG9zdXJlICogY29sb3I7XG59XG52ZWMzIFJlaW5oYXJkVG9uZU1hcHBpbmcoIHZlYzMgY29sb3IgKSB7XG5cdGNvbG9yICo9IHRvbmVNYXBwaW5nRXhwb3N1cmU7XG5cdHJldHVybiBzYXR1cmF0ZSggY29sb3IgLyAoIHZlYzMoIDEuMCApICsgY29sb3IgKSApO1xufVxudmVjMyBPcHRpbWl6ZWRDaW5lb25Ub25lTWFwcGluZyggdmVjMyBjb2xvciApIHtcblx0Y29sb3IgKj0gdG9uZU1hcHBpbmdFeHBvc3VyZTtcblx0Y29sb3IgPSBtYXgoIHZlYzMoIDAuMCApLCBjb2xvciAtIDAuMDA0ICk7XG5cdHJldHVybiBwb3coICggY29sb3IgKiAoIDYuMiAqIGNvbG9yICsgMC41ICkgKSAvICggY29sb3IgKiAoIDYuMiAqIGNvbG9yICsgMS43ICkgKyAwLjA2ICksIHZlYzMoIDIuMiApICk7XG59XG52ZWMzIFJSVEFuZE9EVEZpdCggdmVjMyB2ICkge1xuXHR2ZWMzIGEgPSB2ICogKCB2ICsgMC4wMjQ1Nzg2ICkgLSAwLjAwMDA5MDUzNztcblx0dmVjMyBiID0gdiAqICggMC45ODM3MjkgKiB2ICsgMC40MzI5NTEwICkgKyAwLjIzODA4MTtcblx0cmV0dXJuIGEgLyBiO1xufVxudmVjMyBBQ0VTRmlsbWljVG9uZU1hcHBpbmcoIHZlYzMgY29sb3IgKSB7XG5cdGNvbnN0IG1hdDMgQUNFU0lucHV0TWF0ID0gbWF0Myhcblx0XHR2ZWMzKCAwLjU5NzE5LCAwLjA3NjAwLCAwLjAyODQwICksXHRcdHZlYzMoIDAuMzU0NTgsIDAuOTA4MzQsIDAuMTMzODMgKSxcblx0XHR2ZWMzKCAwLjA0ODIzLCAwLjAxNTY2LCAwLjgzNzc3IClcblx0KTtcblx0Y29uc3QgbWF0MyBBQ0VTT3V0cHV0TWF0ID0gbWF0Myhcblx0XHR2ZWMzKCAgMS42MDQ3NSwgLTAuMTAyMDgsIC0wLjAwMzI3ICksXHRcdHZlYzMoIC0wLjUzMTA4LCAgMS4xMDgxMywgLTAuMDcyNzYgKSxcblx0XHR2ZWMzKCAtMC4wNzM2NywgLTAuMDA2MDUsICAxLjA3NjAyIClcblx0KTtcblx0Y29sb3IgKj0gdG9uZU1hcHBpbmdFeHBvc3VyZSAvIDAuNjtcblx0Y29sb3IgPSBBQ0VTSW5wdXRNYXQgKiBjb2xvcjtcblx0Y29sb3IgPSBSUlRBbmRPRFRGaXQoIGNvbG9yICk7XG5cdGNvbG9yID0gQUNFU091dHB1dE1hdCAqIGNvbG9yO1xuXHRyZXR1cm4gc2F0dXJhdGUoIGNvbG9yICk7XG59XG52ZWMzIEN1c3RvbVRvbmVNYXBwaW5nKCB2ZWMzIGNvbG9yICkgeyByZXR1cm4gY29sb3I7IH0iO3ZhciB0cmFuc21pc3Npb25fZnJhZ21lbnQ9IiNpZmRlZiBVU0VfVFJBTlNNSVNTSU9OXG5cdGZsb2F0IHRyYW5zbWlzc2lvbkFscGhhID0gMS4wO1xuXHRmbG9hdCB0cmFuc21pc3Npb25GYWN0b3IgPSB0cmFuc21pc3Npb247XG5cdGZsb2F0IHRoaWNrbmVzc0ZhY3RvciA9IHRoaWNrbmVzcztcblx0I2lmZGVmIFVTRV9UUkFOU01JU1NJT05NQVBcblx0XHR0cmFuc21pc3Npb25GYWN0b3IgKj0gdGV4dHVyZTJEKCB0cmFuc21pc3Npb25NYXAsIHZVdiApLnI7XG5cdCNlbmRpZlxuXHQjaWZkZWYgVVNFX1RISUNLTkVTU01BUFxuXHRcdHRoaWNrbmVzc0ZhY3RvciAqPSB0ZXh0dXJlMkQoIHRoaWNrbmVzc01hcCwgdlV2ICkuZztcblx0I2VuZGlmXG5cdHZlYzMgcG9zID0gdldvcmxkUG9zaXRpb247XG5cdHZlYzMgdiA9IG5vcm1hbGl6ZSggY2FtZXJhUG9zaXRpb24gLSBwb3MgKTtcblx0dmVjMyBuID0gaW52ZXJzZVRyYW5zZm9ybURpcmVjdGlvbiggbm9ybWFsLCB2aWV3TWF0cml4ICk7XG5cdHZlYzQgdHJhbnNtaXNzaW9uID0gZ2V0SUJMVm9sdW1lUmVmcmFjdGlvbihcblx0XHRuLCB2LCByb3VnaG5lc3NGYWN0b3IsIG1hdGVyaWFsLmRpZmZ1c2VDb2xvciwgbWF0ZXJpYWwuc3BlY3VsYXJDb2xvciwgbWF0ZXJpYWwuc3BlY3VsYXJGOTAsXG5cdFx0cG9zLCBtb2RlbE1hdHJpeCwgdmlld01hdHJpeCwgcHJvamVjdGlvbk1hdHJpeCwgaW9yLCB0aGlja25lc3NGYWN0b3IsXG5cdFx0YXR0ZW51YXRpb25Db2xvciwgYXR0ZW51YXRpb25EaXN0YW5jZSApO1xuXHR0b3RhbERpZmZ1c2UgPSBtaXgoIHRvdGFsRGlmZnVzZSwgdHJhbnNtaXNzaW9uLnJnYiwgdHJhbnNtaXNzaW9uRmFjdG9yICk7XG5cdHRyYW5zbWlzc2lvbkFscGhhID0gbWl4KCB0cmFuc21pc3Npb25BbHBoYSwgdHJhbnNtaXNzaW9uLmEsIHRyYW5zbWlzc2lvbkZhY3RvciApO1xuI2VuZGlmIjt2YXIgdHJhbnNtaXNzaW9uX3BhcnNfZnJhZ21lbnQ9IiNpZmRlZiBVU0VfVFJBTlNNSVNTSU9OXG5cdHVuaWZvcm0gZmxvYXQgdHJhbnNtaXNzaW9uO1xuXHR1bmlmb3JtIGZsb2F0IHRoaWNrbmVzcztcblx0dW5pZm9ybSBmbG9hdCBhdHRlbnVhdGlvbkRpc3RhbmNlO1xuXHR1bmlmb3JtIHZlYzMgYXR0ZW51YXRpb25Db2xvcjtcblx0I2lmZGVmIFVTRV9UUkFOU01JU1NJT05NQVBcblx0XHR1bmlmb3JtIHNhbXBsZXIyRCB0cmFuc21pc3Npb25NYXA7XG5cdCNlbmRpZlxuXHQjaWZkZWYgVVNFX1RISUNLTkVTU01BUFxuXHRcdHVuaWZvcm0gc2FtcGxlcjJEIHRoaWNrbmVzc01hcDtcblx0I2VuZGlmXG5cdHVuaWZvcm0gdmVjMiB0cmFuc21pc3Npb25TYW1wbGVyU2l6ZTtcblx0dW5pZm9ybSBzYW1wbGVyMkQgdHJhbnNtaXNzaW9uU2FtcGxlck1hcDtcblx0dW5pZm9ybSBtYXQ0IG1vZGVsTWF0cml4O1xuXHR1bmlmb3JtIG1hdDQgcHJvamVjdGlvbk1hdHJpeDtcblx0dmFyeWluZyB2ZWMzIHZXb3JsZFBvc2l0aW9uO1xuXHR2ZWMzIGdldFZvbHVtZVRyYW5zbWlzc2lvblJheSggdmVjMyBuLCB2ZWMzIHYsIGZsb2F0IHRoaWNrbmVzcywgZmxvYXQgaW9yLCBtYXQ0IG1vZGVsTWF0cml4ICkge1xuXHRcdHZlYzMgcmVmcmFjdGlvblZlY3RvciA9IHJlZnJhY3QoIC0gdiwgbm9ybWFsaXplKCBuICksIDEuMCAvIGlvciApO1xuXHRcdHZlYzMgbW9kZWxTY2FsZTtcblx0XHRtb2RlbFNjYWxlLnggPSBsZW5ndGgoIHZlYzMoIG1vZGVsTWF0cml4WyAwIF0ueHl6ICkgKTtcblx0XHRtb2RlbFNjYWxlLnkgPSBsZW5ndGgoIHZlYzMoIG1vZGVsTWF0cml4WyAxIF0ueHl6ICkgKTtcblx0XHRtb2RlbFNjYWxlLnogPSBsZW5ndGgoIHZlYzMoIG1vZGVsTWF0cml4WyAyIF0ueHl6ICkgKTtcblx0XHRyZXR1cm4gbm9ybWFsaXplKCByZWZyYWN0aW9uVmVjdG9yICkgKiB0aGlja25lc3MgKiBtb2RlbFNjYWxlO1xuXHR9XG5cdGZsb2F0IGFwcGx5SW9yVG9Sb3VnaG5lc3MoIGZsb2F0IHJvdWdobmVzcywgZmxvYXQgaW9yICkge1xuXHRcdHJldHVybiByb3VnaG5lc3MgKiBjbGFtcCggaW9yICogMi4wIC0gMi4wLCAwLjAsIDEuMCApO1xuXHR9XG5cdHZlYzQgZ2V0VHJhbnNtaXNzaW9uU2FtcGxlKCB2ZWMyIGZyYWdDb29yZCwgZmxvYXQgcm91Z2huZXNzLCBmbG9hdCBpb3IgKSB7XG5cdFx0ZmxvYXQgZnJhbWVidWZmZXJMb2QgPSBsb2cyKCB0cmFuc21pc3Npb25TYW1wbGVyU2l6ZS54ICkgKiBhcHBseUlvclRvUm91Z2huZXNzKCByb3VnaG5lc3MsIGlvciApO1xuXHRcdCNpZmRlZiBURVhUVVJFX0xPRF9FWFRcblx0XHRcdHJldHVybiB0ZXh0dXJlMkRMb2RFWFQoIHRyYW5zbWlzc2lvblNhbXBsZXJNYXAsIGZyYWdDb29yZC54eSwgZnJhbWVidWZmZXJMb2QgKTtcblx0XHQjZWxzZVxuXHRcdFx0cmV0dXJuIHRleHR1cmUyRCggdHJhbnNtaXNzaW9uU2FtcGxlck1hcCwgZnJhZ0Nvb3JkLnh5LCBmcmFtZWJ1ZmZlckxvZCApO1xuXHRcdCNlbmRpZlxuXHR9XG5cdHZlYzMgYXBwbHlWb2x1bWVBdHRlbnVhdGlvbiggdmVjMyByYWRpYW5jZSwgZmxvYXQgdHJhbnNtaXNzaW9uRGlzdGFuY2UsIHZlYzMgYXR0ZW51YXRpb25Db2xvciwgZmxvYXQgYXR0ZW51YXRpb25EaXN0YW5jZSApIHtcblx0XHRpZiAoIGF0dGVudWF0aW9uRGlzdGFuY2UgPT0gMC4wICkge1xuXHRcdFx0cmV0dXJuIHJhZGlhbmNlO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR2ZWMzIGF0dGVudWF0aW9uQ29lZmZpY2llbnQgPSAtbG9nKCBhdHRlbnVhdGlvbkNvbG9yICkgLyBhdHRlbnVhdGlvbkRpc3RhbmNlO1xuXHRcdFx0dmVjMyB0cmFuc21pdHRhbmNlID0gZXhwKCAtIGF0dGVudWF0aW9uQ29lZmZpY2llbnQgKiB0cmFuc21pc3Npb25EaXN0YW5jZSApO1x0XHRcdHJldHVybiB0cmFuc21pdHRhbmNlICogcmFkaWFuY2U7XG5cdFx0fVxuXHR9XG5cdHZlYzQgZ2V0SUJMVm9sdW1lUmVmcmFjdGlvbiggdmVjMyBuLCB2ZWMzIHYsIGZsb2F0IHJvdWdobmVzcywgdmVjMyBkaWZmdXNlQ29sb3IsIHZlYzMgc3BlY3VsYXJDb2xvciwgZmxvYXQgc3BlY3VsYXJGOTAsXG5cdFx0dmVjMyBwb3NpdGlvbiwgbWF0NCBtb2RlbE1hdHJpeCwgbWF0NCB2aWV3TWF0cml4LCBtYXQ0IHByb2pNYXRyaXgsIGZsb2F0IGlvciwgZmxvYXQgdGhpY2tuZXNzLFxuXHRcdHZlYzMgYXR0ZW51YXRpb25Db2xvciwgZmxvYXQgYXR0ZW51YXRpb25EaXN0YW5jZSApIHtcblx0XHR2ZWMzIHRyYW5zbWlzc2lvblJheSA9IGdldFZvbHVtZVRyYW5zbWlzc2lvblJheSggbiwgdiwgdGhpY2tuZXNzLCBpb3IsIG1vZGVsTWF0cml4ICk7XG5cdFx0dmVjMyByZWZyYWN0ZWRSYXlFeGl0ID0gcG9zaXRpb24gKyB0cmFuc21pc3Npb25SYXk7XG5cdFx0dmVjNCBuZGNQb3MgPSBwcm9qTWF0cml4ICogdmlld01hdHJpeCAqIHZlYzQoIHJlZnJhY3RlZFJheUV4aXQsIDEuMCApO1xuXHRcdHZlYzIgcmVmcmFjdGlvbkNvb3JkcyA9IG5kY1Bvcy54eSAvIG5kY1Bvcy53O1xuXHRcdHJlZnJhY3Rpb25Db29yZHMgKz0gMS4wO1xuXHRcdHJlZnJhY3Rpb25Db29yZHMgLz0gMi4wO1xuXHRcdHZlYzQgdHJhbnNtaXR0ZWRMaWdodCA9IGdldFRyYW5zbWlzc2lvblNhbXBsZSggcmVmcmFjdGlvbkNvb3Jkcywgcm91Z2huZXNzLCBpb3IgKTtcblx0XHR2ZWMzIGF0dGVudWF0ZWRDb2xvciA9IGFwcGx5Vm9sdW1lQXR0ZW51YXRpb24oIHRyYW5zbWl0dGVkTGlnaHQucmdiLCBsZW5ndGgoIHRyYW5zbWlzc2lvblJheSApLCBhdHRlbnVhdGlvbkNvbG9yLCBhdHRlbnVhdGlvbkRpc3RhbmNlICk7XG5cdFx0dmVjMyBGID0gRW52aXJvbm1lbnRCUkRGKCBuLCB2LCBzcGVjdWxhckNvbG9yLCBzcGVjdWxhckY5MCwgcm91Z2huZXNzICk7XG5cdFx0cmV0dXJuIHZlYzQoICggMS4wIC0gRiApICogYXR0ZW51YXRlZENvbG9yICogZGlmZnVzZUNvbG9yLCB0cmFuc21pdHRlZExpZ2h0LmEgKTtcblx0fVxuI2VuZGlmIjt2YXIgdXZfcGFyc19mcmFnbWVudD0iI2lmICggZGVmaW5lZCggVVNFX1VWICkgJiYgISBkZWZpbmVkKCBVVlNfVkVSVEVYX09OTFkgKSApXG5cdHZhcnlpbmcgdmVjMiB2VXY7XG4jZW5kaWYiO3ZhciB1dl9wYXJzX3ZlcnRleD0iI2lmZGVmIFVTRV9VVlxuXHQjaWZkZWYgVVZTX1ZFUlRFWF9PTkxZXG5cdFx0dmVjMiB2VXY7XG5cdCNlbHNlXG5cdFx0dmFyeWluZyB2ZWMyIHZVdjtcblx0I2VuZGlmXG5cdHVuaWZvcm0gbWF0MyB1dlRyYW5zZm9ybTtcbiNlbmRpZiI7dmFyIHV2X3ZlcnRleD0iI2lmZGVmIFVTRV9VVlxuXHR2VXYgPSAoIHV2VHJhbnNmb3JtICogdmVjMyggdXYsIDEgKSApLnh5O1xuI2VuZGlmIjt2YXIgdXYyX3BhcnNfZnJhZ21lbnQ9IiNpZiBkZWZpbmVkKCBVU0VfTElHSFRNQVAgKSB8fCBkZWZpbmVkKCBVU0VfQU9NQVAgKVxuXHR2YXJ5aW5nIHZlYzIgdlV2MjtcbiNlbmRpZiI7dmFyIHV2Ml9wYXJzX3ZlcnRleD0iI2lmIGRlZmluZWQoIFVTRV9MSUdIVE1BUCApIHx8IGRlZmluZWQoIFVTRV9BT01BUCApXG5cdGF0dHJpYnV0ZSB2ZWMyIHV2Mjtcblx0dmFyeWluZyB2ZWMyIHZVdjI7XG5cdHVuaWZvcm0gbWF0MyB1djJUcmFuc2Zvcm07XG4jZW5kaWYiO3ZhciB1djJfdmVydGV4PSIjaWYgZGVmaW5lZCggVVNFX0xJR0hUTUFQICkgfHwgZGVmaW5lZCggVVNFX0FPTUFQIClcblx0dlV2MiA9ICggdXYyVHJhbnNmb3JtICogdmVjMyggdXYyLCAxICkgKS54eTtcbiNlbmRpZiI7dmFyIHdvcmxkcG9zX3ZlcnRleD0iI2lmIGRlZmluZWQoIFVTRV9FTlZNQVAgKSB8fCBkZWZpbmVkKCBESVNUQU5DRSApIHx8IGRlZmluZWQgKCBVU0VfU0hBRE9XTUFQICkgfHwgZGVmaW5lZCAoIFVTRV9UUkFOU01JU1NJT04gKVxuXHR2ZWM0IHdvcmxkUG9zaXRpb24gPSB2ZWM0KCB0cmFuc2Zvcm1lZCwgMS4wICk7XG5cdCNpZmRlZiBVU0VfSU5TVEFOQ0lOR1xuXHRcdHdvcmxkUG9zaXRpb24gPSBpbnN0YW5jZU1hdHJpeCAqIHdvcmxkUG9zaXRpb247XG5cdCNlbmRpZlxuXHR3b3JsZFBvc2l0aW9uID0gbW9kZWxNYXRyaXggKiB3b3JsZFBvc2l0aW9uO1xuI2VuZGlmIjtjb25zdCB2ZXJ0ZXgkZz0idmFyeWluZyB2ZWMyIHZVdjtcbnVuaWZvcm0gbWF0MyB1dlRyYW5zZm9ybTtcbnZvaWQgbWFpbigpIHtcblx0dlV2ID0gKCB1dlRyYW5zZm9ybSAqIHZlYzMoIHV2LCAxICkgKS54eTtcblx0Z2xfUG9zaXRpb24gPSB2ZWM0KCBwb3NpdGlvbi54eSwgMS4wLCAxLjAgKTtcbn0iO2NvbnN0IGZyYWdtZW50JGc9InVuaWZvcm0gc2FtcGxlcjJEIHQyRDtcbnZhcnlpbmcgdmVjMiB2VXY7XG52b2lkIG1haW4oKSB7XG5cdHZlYzQgdGV4Q29sb3IgPSB0ZXh0dXJlMkQoIHQyRCwgdlV2ICk7XG5cdGdsX0ZyYWdDb2xvciA9IG1hcFRleGVsVG9MaW5lYXIoIHRleENvbG9yICk7XG5cdCNpbmNsdWRlIDx0b25lbWFwcGluZ19mcmFnbWVudD5cblx0I2luY2x1ZGUgPGVuY29kaW5nc19mcmFnbWVudD5cbn0iO2NvbnN0IHZlcnRleCRmPSJ2YXJ5aW5nIHZlYzMgdldvcmxkRGlyZWN0aW9uO1xuI2luY2x1ZGUgPGNvbW1vbj5cbnZvaWQgbWFpbigpIHtcblx0dldvcmxkRGlyZWN0aW9uID0gdHJhbnNmb3JtRGlyZWN0aW9uKCBwb3NpdGlvbiwgbW9kZWxNYXRyaXggKTtcblx0I2luY2x1ZGUgPGJlZ2luX3ZlcnRleD5cblx0I2luY2x1ZGUgPHByb2plY3RfdmVydGV4PlxuXHRnbF9Qb3NpdGlvbi56ID0gZ2xfUG9zaXRpb24udztcbn0iO2NvbnN0IGZyYWdtZW50JGY9IiNpbmNsdWRlIDxlbnZtYXBfY29tbW9uX3BhcnNfZnJhZ21lbnQ+XG51bmlmb3JtIGZsb2F0IG9wYWNpdHk7XG52YXJ5aW5nIHZlYzMgdldvcmxkRGlyZWN0aW9uO1xuI2luY2x1ZGUgPGN1YmVfdXZfcmVmbGVjdGlvbl9mcmFnbWVudD5cbnZvaWQgbWFpbigpIHtcblx0dmVjMyB2UmVmbGVjdCA9IHZXb3JsZERpcmVjdGlvbjtcblx0I2luY2x1ZGUgPGVudm1hcF9mcmFnbWVudD5cblx0Z2xfRnJhZ0NvbG9yID0gZW52Q29sb3I7XG5cdGdsX0ZyYWdDb2xvci5hICo9IG9wYWNpdHk7XG5cdCNpbmNsdWRlIDx0b25lbWFwcGluZ19mcmFnbWVudD5cblx0I2luY2x1ZGUgPGVuY29kaW5nc19mcmFnbWVudD5cbn0iO2NvbnN0IHZlcnRleCRlPSIjaW5jbHVkZSA8Y29tbW9uPlxuI2luY2x1ZGUgPHV2X3BhcnNfdmVydGV4PlxuI2luY2x1ZGUgPGRpc3BsYWNlbWVudG1hcF9wYXJzX3ZlcnRleD5cbiNpbmNsdWRlIDxtb3JwaHRhcmdldF9wYXJzX3ZlcnRleD5cbiNpbmNsdWRlIDxza2lubmluZ19wYXJzX3ZlcnRleD5cbiNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9wYXJzX3ZlcnRleD5cbiNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfcGFyc192ZXJ0ZXg+XG52YXJ5aW5nIHZlYzIgdkhpZ2hQcmVjaXNpb25aVztcbnZvaWQgbWFpbigpIHtcblx0I2luY2x1ZGUgPHV2X3ZlcnRleD5cblx0I2luY2x1ZGUgPHNraW5iYXNlX3ZlcnRleD5cblx0I2lmZGVmIFVTRV9ESVNQTEFDRU1FTlRNQVBcblx0XHQjaW5jbHVkZSA8YmVnaW5ub3JtYWxfdmVydGV4PlxuXHRcdCNpbmNsdWRlIDxtb3JwaG5vcm1hbF92ZXJ0ZXg+XG5cdFx0I2luY2x1ZGUgPHNraW5ub3JtYWxfdmVydGV4PlxuXHQjZW5kaWZcblx0I2luY2x1ZGUgPGJlZ2luX3ZlcnRleD5cblx0I2luY2x1ZGUgPG1vcnBodGFyZ2V0X3ZlcnRleD5cblx0I2luY2x1ZGUgPHNraW5uaW5nX3ZlcnRleD5cblx0I2luY2x1ZGUgPGRpc3BsYWNlbWVudG1hcF92ZXJ0ZXg+XG5cdCNpbmNsdWRlIDxwcm9qZWN0X3ZlcnRleD5cblx0I2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3ZlcnRleD5cblx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc192ZXJ0ZXg+XG5cdHZIaWdoUHJlY2lzaW9uWlcgPSBnbF9Qb3NpdGlvbi56dztcbn0iO2NvbnN0IGZyYWdtZW50JGU9IiNpZiBERVBUSF9QQUNLSU5HID09IDMyMDBcblx0dW5pZm9ybSBmbG9hdCBvcGFjaXR5O1xuI2VuZGlmXG4jaW5jbHVkZSA8Y29tbW9uPlxuI2luY2x1ZGUgPHBhY2tpbmc+XG4jaW5jbHVkZSA8dXZfcGFyc19mcmFnbWVudD5cbiNpbmNsdWRlIDxtYXBfcGFyc19mcmFnbWVudD5cbiNpbmNsdWRlIDxhbHBoYW1hcF9wYXJzX2ZyYWdtZW50PlxuI2luY2x1ZGUgPGFscGhhdGVzdF9wYXJzX2ZyYWdtZW50PlxuI2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3BhcnNfZnJhZ21lbnQ+XG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfZnJhZ21lbnQ+XG52YXJ5aW5nIHZlYzIgdkhpZ2hQcmVjaXNpb25aVztcbnZvaWQgbWFpbigpIHtcblx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19mcmFnbWVudD5cblx0dmVjNCBkaWZmdXNlQ29sb3IgPSB2ZWM0KCAxLjAgKTtcblx0I2lmIERFUFRIX1BBQ0tJTkcgPT0gMzIwMFxuXHRcdGRpZmZ1c2VDb2xvci5hID0gb3BhY2l0eTtcblx0I2VuZGlmXG5cdCNpbmNsdWRlIDxtYXBfZnJhZ21lbnQ+XG5cdCNpbmNsdWRlIDxhbHBoYW1hcF9mcmFnbWVudD5cblx0I2luY2x1ZGUgPGFscGhhdGVzdF9mcmFnbWVudD5cblx0I2luY2x1ZGUgPGxvZ2RlcHRoYnVmX2ZyYWdtZW50PlxuXHRmbG9hdCBmcmFnQ29vcmRaID0gMC41ICogdkhpZ2hQcmVjaXNpb25aV1swXSAvIHZIaWdoUHJlY2lzaW9uWldbMV0gKyAwLjU7XG5cdCNpZiBERVBUSF9QQUNLSU5HID09IDMyMDBcblx0XHRnbF9GcmFnQ29sb3IgPSB2ZWM0KCB2ZWMzKCAxLjAgLSBmcmFnQ29vcmRaICksIG9wYWNpdHkgKTtcblx0I2VsaWYgREVQVEhfUEFDS0lORyA9PSAzMjAxXG5cdFx0Z2xfRnJhZ0NvbG9yID0gcGFja0RlcHRoVG9SR0JBKCBmcmFnQ29vcmRaICk7XG5cdCNlbmRpZlxufSI7Y29uc3QgdmVydGV4JGQ9IiNkZWZpbmUgRElTVEFOQ0VcbnZhcnlpbmcgdmVjMyB2V29ybGRQb3NpdGlvbjtcbiNpbmNsdWRlIDxjb21tb24+XG4jaW5jbHVkZSA8dXZfcGFyc192ZXJ0ZXg+XG4jaW5jbHVkZSA8ZGlzcGxhY2VtZW50bWFwX3BhcnNfdmVydGV4PlxuI2luY2x1ZGUgPG1vcnBodGFyZ2V0X3BhcnNfdmVydGV4PlxuI2luY2x1ZGUgPHNraW5uaW5nX3BhcnNfdmVydGV4PlxuI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19wYXJzX3ZlcnRleD5cbnZvaWQgbWFpbigpIHtcblx0I2luY2x1ZGUgPHV2X3ZlcnRleD5cblx0I2luY2x1ZGUgPHNraW5iYXNlX3ZlcnRleD5cblx0I2lmZGVmIFVTRV9ESVNQTEFDRU1FTlRNQVBcblx0XHQjaW5jbHVkZSA8YmVnaW5ub3JtYWxfdmVydGV4PlxuXHRcdCNpbmNsdWRlIDxtb3JwaG5vcm1hbF92ZXJ0ZXg+XG5cdFx0I2luY2x1ZGUgPHNraW5ub3JtYWxfdmVydGV4PlxuXHQjZW5kaWZcblx0I2luY2x1ZGUgPGJlZ2luX3ZlcnRleD5cblx0I2luY2x1ZGUgPG1vcnBodGFyZ2V0X3ZlcnRleD5cblx0I2luY2x1ZGUgPHNraW5uaW5nX3ZlcnRleD5cblx0I2luY2x1ZGUgPGRpc3BsYWNlbWVudG1hcF92ZXJ0ZXg+XG5cdCNpbmNsdWRlIDxwcm9qZWN0X3ZlcnRleD5cblx0I2luY2x1ZGUgPHdvcmxkcG9zX3ZlcnRleD5cblx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc192ZXJ0ZXg+XG5cdHZXb3JsZFBvc2l0aW9uID0gd29ybGRQb3NpdGlvbi54eXo7XG59Ijtjb25zdCBmcmFnbWVudCRkPSIjZGVmaW5lIERJU1RBTkNFXG51bmlmb3JtIHZlYzMgcmVmZXJlbmNlUG9zaXRpb247XG51bmlmb3JtIGZsb2F0IG5lYXJEaXN0YW5jZTtcbnVuaWZvcm0gZmxvYXQgZmFyRGlzdGFuY2U7XG52YXJ5aW5nIHZlYzMgdldvcmxkUG9zaXRpb247XG4jaW5jbHVkZSA8Y29tbW9uPlxuI2luY2x1ZGUgPHBhY2tpbmc+XG4jaW5jbHVkZSA8dXZfcGFyc19mcmFnbWVudD5cbiNpbmNsdWRlIDxtYXBfcGFyc19mcmFnbWVudD5cbiNpbmNsdWRlIDxhbHBoYW1hcF9wYXJzX2ZyYWdtZW50PlxuI2luY2x1ZGUgPGFscGhhdGVzdF9wYXJzX2ZyYWdtZW50PlxuI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19wYXJzX2ZyYWdtZW50Plxudm9pZCBtYWluICgpIHtcblx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19mcmFnbWVudD5cblx0dmVjNCBkaWZmdXNlQ29sb3IgPSB2ZWM0KCAxLjAgKTtcblx0I2luY2x1ZGUgPG1hcF9mcmFnbWVudD5cblx0I2luY2x1ZGUgPGFscGhhbWFwX2ZyYWdtZW50PlxuXHQjaW5jbHVkZSA8YWxwaGF0ZXN0X2ZyYWdtZW50PlxuXHRmbG9hdCBkaXN0ID0gbGVuZ3RoKCB2V29ybGRQb3NpdGlvbiAtIHJlZmVyZW5jZVBvc2l0aW9uICk7XG5cdGRpc3QgPSAoIGRpc3QgLSBuZWFyRGlzdGFuY2UgKSAvICggZmFyRGlzdGFuY2UgLSBuZWFyRGlzdGFuY2UgKTtcblx0ZGlzdCA9IHNhdHVyYXRlKCBkaXN0ICk7XG5cdGdsX0ZyYWdDb2xvciA9IHBhY2tEZXB0aFRvUkdCQSggZGlzdCApO1xufSI7Y29uc3QgdmVydGV4JGM9InZhcnlpbmcgdmVjMyB2V29ybGREaXJlY3Rpb247XG4jaW5jbHVkZSA8Y29tbW9uPlxudm9pZCBtYWluKCkge1xuXHR2V29ybGREaXJlY3Rpb24gPSB0cmFuc2Zvcm1EaXJlY3Rpb24oIHBvc2l0aW9uLCBtb2RlbE1hdHJpeCApO1xuXHQjaW5jbHVkZSA8YmVnaW5fdmVydGV4PlxuXHQjaW5jbHVkZSA8cHJvamVjdF92ZXJ0ZXg+XG59Ijtjb25zdCBmcmFnbWVudCRjPSJ1bmlmb3JtIHNhbXBsZXIyRCB0RXF1aXJlY3Q7XG52YXJ5aW5nIHZlYzMgdldvcmxkRGlyZWN0aW9uO1xuI2luY2x1ZGUgPGNvbW1vbj5cbnZvaWQgbWFpbigpIHtcblx0dmVjMyBkaXJlY3Rpb24gPSBub3JtYWxpemUoIHZXb3JsZERpcmVjdGlvbiApO1xuXHR2ZWMyIHNhbXBsZVVWID0gZXF1aXJlY3RVdiggZGlyZWN0aW9uICk7XG5cdHZlYzQgdGV4Q29sb3IgPSB0ZXh0dXJlMkQoIHRFcXVpcmVjdCwgc2FtcGxlVVYgKTtcblx0Z2xfRnJhZ0NvbG9yID0gbWFwVGV4ZWxUb0xpbmVhciggdGV4Q29sb3IgKTtcblx0I2luY2x1ZGUgPHRvbmVtYXBwaW5nX2ZyYWdtZW50PlxuXHQjaW5jbHVkZSA8ZW5jb2RpbmdzX2ZyYWdtZW50PlxufSI7Y29uc3QgdmVydGV4JGI9InVuaWZvcm0gZmxvYXQgc2NhbGU7XG5hdHRyaWJ1dGUgZmxvYXQgbGluZURpc3RhbmNlO1xudmFyeWluZyBmbG9hdCB2TGluZURpc3RhbmNlO1xuI2luY2x1ZGUgPGNvbW1vbj5cbiNpbmNsdWRlIDxjb2xvcl9wYXJzX3ZlcnRleD5cbiNpbmNsdWRlIDxmb2dfcGFyc192ZXJ0ZXg+XG4jaW5jbHVkZSA8bW9ycGh0YXJnZXRfcGFyc192ZXJ0ZXg+XG4jaW5jbHVkZSA8bG9nZGVwdGhidWZfcGFyc192ZXJ0ZXg+XG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfdmVydGV4Plxudm9pZCBtYWluKCkge1xuXHR2TGluZURpc3RhbmNlID0gc2NhbGUgKiBsaW5lRGlzdGFuY2U7XG5cdCNpbmNsdWRlIDxjb2xvcl92ZXJ0ZXg+XG5cdCNpbmNsdWRlIDxiZWdpbl92ZXJ0ZXg+XG5cdCNpbmNsdWRlIDxtb3JwaHRhcmdldF92ZXJ0ZXg+XG5cdCNpbmNsdWRlIDxwcm9qZWN0X3ZlcnRleD5cblx0I2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3ZlcnRleD5cblx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc192ZXJ0ZXg+XG5cdCNpbmNsdWRlIDxmb2dfdmVydGV4PlxufSI7Y29uc3QgZnJhZ21lbnQkYj0idW5pZm9ybSB2ZWMzIGRpZmZ1c2U7XG51bmlmb3JtIGZsb2F0IG9wYWNpdHk7XG51bmlmb3JtIGZsb2F0IGRhc2hTaXplO1xudW5pZm9ybSBmbG9hdCB0b3RhbFNpemU7XG52YXJ5aW5nIGZsb2F0IHZMaW5lRGlzdGFuY2U7XG4jaW5jbHVkZSA8Y29tbW9uPlxuI2luY2x1ZGUgPGNvbG9yX3BhcnNfZnJhZ21lbnQ+XG4jaW5jbHVkZSA8Zm9nX3BhcnNfZnJhZ21lbnQ+XG4jaW5jbHVkZSA8bG9nZGVwdGhidWZfcGFyc19mcmFnbWVudD5cbiNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfcGFyc19mcmFnbWVudD5cbnZvaWQgbWFpbigpIHtcblx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19mcmFnbWVudD5cblx0aWYgKCBtb2QoIHZMaW5lRGlzdGFuY2UsIHRvdGFsU2l6ZSApID4gZGFzaFNpemUgKSB7XG5cdFx0ZGlzY2FyZDtcblx0fVxuXHR2ZWMzIG91dGdvaW5nTGlnaHQgPSB2ZWMzKCAwLjAgKTtcblx0dmVjNCBkaWZmdXNlQ29sb3IgPSB2ZWM0KCBkaWZmdXNlLCBvcGFjaXR5ICk7XG5cdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9mcmFnbWVudD5cblx0I2luY2x1ZGUgPGNvbG9yX2ZyYWdtZW50PlxuXHRvdXRnb2luZ0xpZ2h0ID0gZGlmZnVzZUNvbG9yLnJnYjtcblx0I2luY2x1ZGUgPG91dHB1dF9mcmFnbWVudD5cblx0I2luY2x1ZGUgPHRvbmVtYXBwaW5nX2ZyYWdtZW50PlxuXHQjaW5jbHVkZSA8ZW5jb2RpbmdzX2ZyYWdtZW50PlxuXHQjaW5jbHVkZSA8Zm9nX2ZyYWdtZW50PlxuXHQjaW5jbHVkZSA8cHJlbXVsdGlwbGllZF9hbHBoYV9mcmFnbWVudD5cbn0iO2NvbnN0IHZlcnRleCRhPSIjaW5jbHVkZSA8Y29tbW9uPlxuI2luY2x1ZGUgPHV2X3BhcnNfdmVydGV4PlxuI2luY2x1ZGUgPHV2Ml9wYXJzX3ZlcnRleD5cbiNpbmNsdWRlIDxlbnZtYXBfcGFyc192ZXJ0ZXg+XG4jaW5jbHVkZSA8Y29sb3JfcGFyc192ZXJ0ZXg+XG4jaW5jbHVkZSA8Zm9nX3BhcnNfdmVydGV4PlxuI2luY2x1ZGUgPG1vcnBodGFyZ2V0X3BhcnNfdmVydGV4PlxuI2luY2x1ZGUgPHNraW5uaW5nX3BhcnNfdmVydGV4PlxuI2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3BhcnNfdmVydGV4PlxuI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19wYXJzX3ZlcnRleD5cbnZvaWQgbWFpbigpIHtcblx0I2luY2x1ZGUgPHV2X3ZlcnRleD5cblx0I2luY2x1ZGUgPHV2Ml92ZXJ0ZXg+XG5cdCNpbmNsdWRlIDxjb2xvcl92ZXJ0ZXg+XG5cdCNpZiBkZWZpbmVkICggVVNFX0VOVk1BUCApIHx8IGRlZmluZWQgKCBVU0VfU0tJTk5JTkcgKVxuXHRcdCNpbmNsdWRlIDxiZWdpbm5vcm1hbF92ZXJ0ZXg+XG5cdFx0I2luY2x1ZGUgPG1vcnBobm9ybWFsX3ZlcnRleD5cblx0XHQjaW5jbHVkZSA8c2tpbmJhc2VfdmVydGV4PlxuXHRcdCNpbmNsdWRlIDxza2lubm9ybWFsX3ZlcnRleD5cblx0XHQjaW5jbHVkZSA8ZGVmYXVsdG5vcm1hbF92ZXJ0ZXg+XG5cdCNlbmRpZlxuXHQjaW5jbHVkZSA8YmVnaW5fdmVydGV4PlxuXHQjaW5jbHVkZSA8bW9ycGh0YXJnZXRfdmVydGV4PlxuXHQjaW5jbHVkZSA8c2tpbm5pbmdfdmVydGV4PlxuXHQjaW5jbHVkZSA8cHJvamVjdF92ZXJ0ZXg+XG5cdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl92ZXJ0ZXg+XG5cdCNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfdmVydGV4PlxuXHQjaW5jbHVkZSA8d29ybGRwb3NfdmVydGV4PlxuXHQjaW5jbHVkZSA8ZW52bWFwX3ZlcnRleD5cblx0I2luY2x1ZGUgPGZvZ192ZXJ0ZXg+XG59Ijtjb25zdCBmcmFnbWVudCRhPSJ1bmlmb3JtIHZlYzMgZGlmZnVzZTtcbnVuaWZvcm0gZmxvYXQgb3BhY2l0eTtcbiNpZm5kZWYgRkxBVF9TSEFERURcblx0dmFyeWluZyB2ZWMzIHZOb3JtYWw7XG4jZW5kaWZcbiNpbmNsdWRlIDxjb21tb24+XG4jaW5jbHVkZSA8ZGl0aGVyaW5nX3BhcnNfZnJhZ21lbnQ+XG4jaW5jbHVkZSA8Y29sb3JfcGFyc19mcmFnbWVudD5cbiNpbmNsdWRlIDx1dl9wYXJzX2ZyYWdtZW50PlxuI2luY2x1ZGUgPHV2Ml9wYXJzX2ZyYWdtZW50PlxuI2luY2x1ZGUgPG1hcF9wYXJzX2ZyYWdtZW50PlxuI2luY2x1ZGUgPGFscGhhbWFwX3BhcnNfZnJhZ21lbnQ+XG4jaW5jbHVkZSA8YWxwaGF0ZXN0X3BhcnNfZnJhZ21lbnQ+XG4jaW5jbHVkZSA8YW9tYXBfcGFyc19mcmFnbWVudD5cbiNpbmNsdWRlIDxsaWdodG1hcF9wYXJzX2ZyYWdtZW50PlxuI2luY2x1ZGUgPGVudm1hcF9jb21tb25fcGFyc19mcmFnbWVudD5cbiNpbmNsdWRlIDxlbnZtYXBfcGFyc19mcmFnbWVudD5cbiNpbmNsdWRlIDxjdWJlX3V2X3JlZmxlY3Rpb25fZnJhZ21lbnQ+XG4jaW5jbHVkZSA8Zm9nX3BhcnNfZnJhZ21lbnQ+XG4jaW5jbHVkZSA8c3BlY3VsYXJtYXBfcGFyc19mcmFnbWVudD5cbiNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9wYXJzX2ZyYWdtZW50PlxuI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19wYXJzX2ZyYWdtZW50Plxudm9pZCBtYWluKCkge1xuXHQjaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX2ZyYWdtZW50PlxuXHR2ZWM0IGRpZmZ1c2VDb2xvciA9IHZlYzQoIGRpZmZ1c2UsIG9wYWNpdHkgKTtcblx0I2luY2x1ZGUgPGxvZ2RlcHRoYnVmX2ZyYWdtZW50PlxuXHQjaW5jbHVkZSA8bWFwX2ZyYWdtZW50PlxuXHQjaW5jbHVkZSA8Y29sb3JfZnJhZ21lbnQ+XG5cdCNpbmNsdWRlIDxhbHBoYW1hcF9mcmFnbWVudD5cblx0I2luY2x1ZGUgPGFscGhhdGVzdF9mcmFnbWVudD5cblx0I2luY2x1ZGUgPHNwZWN1bGFybWFwX2ZyYWdtZW50PlxuXHRSZWZsZWN0ZWRMaWdodCByZWZsZWN0ZWRMaWdodCA9IFJlZmxlY3RlZExpZ2h0KCB2ZWMzKCAwLjAgKSwgdmVjMyggMC4wICksIHZlYzMoIDAuMCApLCB2ZWMzKCAwLjAgKSApO1xuXHQjaWZkZWYgVVNFX0xJR0hUTUFQXG5cdFx0dmVjNCBsaWdodE1hcFRleGVsPSB0ZXh0dXJlMkQoIGxpZ2h0TWFwLCB2VXYyICk7XG5cdFx0cmVmbGVjdGVkTGlnaHQuaW5kaXJlY3REaWZmdXNlICs9IGxpZ2h0TWFwVGV4ZWxUb0xpbmVhciggbGlnaHRNYXBUZXhlbCApLnJnYiAqIGxpZ2h0TWFwSW50ZW5zaXR5O1xuXHQjZWxzZVxuXHRcdHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0RGlmZnVzZSArPSB2ZWMzKCAxLjAgKTtcblx0I2VuZGlmXG5cdCNpbmNsdWRlIDxhb21hcF9mcmFnbWVudD5cblx0cmVmbGVjdGVkTGlnaHQuaW5kaXJlY3REaWZmdXNlICo9IGRpZmZ1c2VDb2xvci5yZ2I7XG5cdHZlYzMgb3V0Z29pbmdMaWdodCA9IHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0RGlmZnVzZTtcblx0I2luY2x1ZGUgPGVudm1hcF9mcmFnbWVudD5cblx0I2luY2x1ZGUgPG91dHB1dF9mcmFnbWVudD5cblx0I2luY2x1ZGUgPHRvbmVtYXBwaW5nX2ZyYWdtZW50PlxuXHQjaW5jbHVkZSA8ZW5jb2RpbmdzX2ZyYWdtZW50PlxuXHQjaW5jbHVkZSA8Zm9nX2ZyYWdtZW50PlxuXHQjaW5jbHVkZSA8cHJlbXVsdGlwbGllZF9hbHBoYV9mcmFnbWVudD5cblx0I2luY2x1ZGUgPGRpdGhlcmluZ19mcmFnbWVudD5cbn0iO2NvbnN0IHZlcnRleCQ5PSIjZGVmaW5lIExBTUJFUlRcbnZhcnlpbmcgdmVjMyB2TGlnaHRGcm9udDtcbnZhcnlpbmcgdmVjMyB2SW5kaXJlY3RGcm9udDtcbiNpZmRlZiBET1VCTEVfU0lERURcblx0dmFyeWluZyB2ZWMzIHZMaWdodEJhY2s7XG5cdHZhcnlpbmcgdmVjMyB2SW5kaXJlY3RCYWNrO1xuI2VuZGlmXG4jaW5jbHVkZSA8Y29tbW9uPlxuI2luY2x1ZGUgPHV2X3BhcnNfdmVydGV4PlxuI2luY2x1ZGUgPHV2Ml9wYXJzX3ZlcnRleD5cbiNpbmNsdWRlIDxlbnZtYXBfcGFyc192ZXJ0ZXg+XG4jaW5jbHVkZSA8YnNkZnM+XG4jaW5jbHVkZSA8bGlnaHRzX3BhcnNfYmVnaW4+XG4jaW5jbHVkZSA8Y29sb3JfcGFyc192ZXJ0ZXg+XG4jaW5jbHVkZSA8Zm9nX3BhcnNfdmVydGV4PlxuI2luY2x1ZGUgPG1vcnBodGFyZ2V0X3BhcnNfdmVydGV4PlxuI2luY2x1ZGUgPHNraW5uaW5nX3BhcnNfdmVydGV4PlxuI2luY2x1ZGUgPHNoYWRvd21hcF9wYXJzX3ZlcnRleD5cbiNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9wYXJzX3ZlcnRleD5cbiNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfcGFyc192ZXJ0ZXg+XG52b2lkIG1haW4oKSB7XG5cdCNpbmNsdWRlIDx1dl92ZXJ0ZXg+XG5cdCNpbmNsdWRlIDx1djJfdmVydGV4PlxuXHQjaW5jbHVkZSA8Y29sb3JfdmVydGV4PlxuXHQjaW5jbHVkZSA8YmVnaW5ub3JtYWxfdmVydGV4PlxuXHQjaW5jbHVkZSA8bW9ycGhub3JtYWxfdmVydGV4PlxuXHQjaW5jbHVkZSA8c2tpbmJhc2VfdmVydGV4PlxuXHQjaW5jbHVkZSA8c2tpbm5vcm1hbF92ZXJ0ZXg+XG5cdCNpbmNsdWRlIDxkZWZhdWx0bm9ybWFsX3ZlcnRleD5cblx0I2luY2x1ZGUgPGJlZ2luX3ZlcnRleD5cblx0I2luY2x1ZGUgPG1vcnBodGFyZ2V0X3ZlcnRleD5cblx0I2luY2x1ZGUgPHNraW5uaW5nX3ZlcnRleD5cblx0I2luY2x1ZGUgPHByb2plY3RfdmVydGV4PlxuXHQjaW5jbHVkZSA8bG9nZGVwdGhidWZfdmVydGV4PlxuXHQjaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3ZlcnRleD5cblx0I2luY2x1ZGUgPHdvcmxkcG9zX3ZlcnRleD5cblx0I2luY2x1ZGUgPGVudm1hcF92ZXJ0ZXg+XG5cdCNpbmNsdWRlIDxsaWdodHNfbGFtYmVydF92ZXJ0ZXg+XG5cdCNpbmNsdWRlIDxzaGFkb3dtYXBfdmVydGV4PlxuXHQjaW5jbHVkZSA8Zm9nX3ZlcnRleD5cbn0iO2NvbnN0IGZyYWdtZW50JDk9InVuaWZvcm0gdmVjMyBkaWZmdXNlO1xudW5pZm9ybSB2ZWMzIGVtaXNzaXZlO1xudW5pZm9ybSBmbG9hdCBvcGFjaXR5O1xudmFyeWluZyB2ZWMzIHZMaWdodEZyb250O1xudmFyeWluZyB2ZWMzIHZJbmRpcmVjdEZyb250O1xuI2lmZGVmIERPVUJMRV9TSURFRFxuXHR2YXJ5aW5nIHZlYzMgdkxpZ2h0QmFjaztcblx0dmFyeWluZyB2ZWMzIHZJbmRpcmVjdEJhY2s7XG4jZW5kaWZcbiNpbmNsdWRlIDxjb21tb24+XG4jaW5jbHVkZSA8cGFja2luZz5cbiNpbmNsdWRlIDxkaXRoZXJpbmdfcGFyc19mcmFnbWVudD5cbiNpbmNsdWRlIDxjb2xvcl9wYXJzX2ZyYWdtZW50PlxuI2luY2x1ZGUgPHV2X3BhcnNfZnJhZ21lbnQ+XG4jaW5jbHVkZSA8dXYyX3BhcnNfZnJhZ21lbnQ+XG4jaW5jbHVkZSA8bWFwX3BhcnNfZnJhZ21lbnQ+XG4jaW5jbHVkZSA8YWxwaGFtYXBfcGFyc19mcmFnbWVudD5cbiNpbmNsdWRlIDxhbHBoYXRlc3RfcGFyc19mcmFnbWVudD5cbiNpbmNsdWRlIDxhb21hcF9wYXJzX2ZyYWdtZW50PlxuI2luY2x1ZGUgPGxpZ2h0bWFwX3BhcnNfZnJhZ21lbnQ+XG4jaW5jbHVkZSA8ZW1pc3NpdmVtYXBfcGFyc19mcmFnbWVudD5cbiNpbmNsdWRlIDxlbnZtYXBfY29tbW9uX3BhcnNfZnJhZ21lbnQ+XG4jaW5jbHVkZSA8ZW52bWFwX3BhcnNfZnJhZ21lbnQ+XG4jaW5jbHVkZSA8Y3ViZV91dl9yZWZsZWN0aW9uX2ZyYWdtZW50PlxuI2luY2x1ZGUgPGJzZGZzPlxuI2luY2x1ZGUgPGxpZ2h0c19wYXJzX2JlZ2luPlxuI2luY2x1ZGUgPGZvZ19wYXJzX2ZyYWdtZW50PlxuI2luY2x1ZGUgPHNoYWRvd21hcF9wYXJzX2ZyYWdtZW50PlxuI2luY2x1ZGUgPHNoYWRvd21hc2tfcGFyc19mcmFnbWVudD5cbiNpbmNsdWRlIDxzcGVjdWxhcm1hcF9wYXJzX2ZyYWdtZW50PlxuI2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3BhcnNfZnJhZ21lbnQ+XG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfZnJhZ21lbnQ+XG52b2lkIG1haW4oKSB7XG5cdCNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfZnJhZ21lbnQ+XG5cdHZlYzQgZGlmZnVzZUNvbG9yID0gdmVjNCggZGlmZnVzZSwgb3BhY2l0eSApO1xuXHRSZWZsZWN0ZWRMaWdodCByZWZsZWN0ZWRMaWdodCA9IFJlZmxlY3RlZExpZ2h0KCB2ZWMzKCAwLjAgKSwgdmVjMyggMC4wICksIHZlYzMoIDAuMCApLCB2ZWMzKCAwLjAgKSApO1xuXHR2ZWMzIHRvdGFsRW1pc3NpdmVSYWRpYW5jZSA9IGVtaXNzaXZlO1xuXHQjaW5jbHVkZSA8bG9nZGVwdGhidWZfZnJhZ21lbnQ+XG5cdCNpbmNsdWRlIDxtYXBfZnJhZ21lbnQ+XG5cdCNpbmNsdWRlIDxjb2xvcl9mcmFnbWVudD5cblx0I2luY2x1ZGUgPGFscGhhbWFwX2ZyYWdtZW50PlxuXHQjaW5jbHVkZSA8YWxwaGF0ZXN0X2ZyYWdtZW50PlxuXHQjaW5jbHVkZSA8c3BlY3VsYXJtYXBfZnJhZ21lbnQ+XG5cdCNpbmNsdWRlIDxlbWlzc2l2ZW1hcF9mcmFnbWVudD5cblx0I2lmZGVmIERPVUJMRV9TSURFRFxuXHRcdHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0RGlmZnVzZSArPSAoIGdsX0Zyb250RmFjaW5nICkgPyB2SW5kaXJlY3RGcm9udCA6IHZJbmRpcmVjdEJhY2s7XG5cdCNlbHNlXG5cdFx0cmVmbGVjdGVkTGlnaHQuaW5kaXJlY3REaWZmdXNlICs9IHZJbmRpcmVjdEZyb250O1xuXHQjZW5kaWZcblx0I2luY2x1ZGUgPGxpZ2h0bWFwX2ZyYWdtZW50PlxuXHRyZWZsZWN0ZWRMaWdodC5pbmRpcmVjdERpZmZ1c2UgKj0gQlJERl9MYW1iZXJ0KCBkaWZmdXNlQ29sb3IucmdiICk7XG5cdCNpZmRlZiBET1VCTEVfU0lERURcblx0XHRyZWZsZWN0ZWRMaWdodC5kaXJlY3REaWZmdXNlID0gKCBnbF9Gcm9udEZhY2luZyApID8gdkxpZ2h0RnJvbnQgOiB2TGlnaHRCYWNrO1xuXHQjZWxzZVxuXHRcdHJlZmxlY3RlZExpZ2h0LmRpcmVjdERpZmZ1c2UgPSB2TGlnaHRGcm9udDtcblx0I2VuZGlmXG5cdHJlZmxlY3RlZExpZ2h0LmRpcmVjdERpZmZ1c2UgKj0gQlJERl9MYW1iZXJ0KCBkaWZmdXNlQ29sb3IucmdiICkgKiBnZXRTaGFkb3dNYXNrKCk7XG5cdCNpbmNsdWRlIDxhb21hcF9mcmFnbWVudD5cblx0dmVjMyBvdXRnb2luZ0xpZ2h0ID0gcmVmbGVjdGVkTGlnaHQuZGlyZWN0RGlmZnVzZSArIHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0RGlmZnVzZSArIHRvdGFsRW1pc3NpdmVSYWRpYW5jZTtcblx0I2luY2x1ZGUgPGVudm1hcF9mcmFnbWVudD5cblx0I2luY2x1ZGUgPG91dHB1dF9mcmFnbWVudD5cblx0I2luY2x1ZGUgPHRvbmVtYXBwaW5nX2ZyYWdtZW50PlxuXHQjaW5jbHVkZSA8ZW5jb2RpbmdzX2ZyYWdtZW50PlxuXHQjaW5jbHVkZSA8Zm9nX2ZyYWdtZW50PlxuXHQjaW5jbHVkZSA8cHJlbXVsdGlwbGllZF9hbHBoYV9mcmFnbWVudD5cblx0I2luY2x1ZGUgPGRpdGhlcmluZ19mcmFnbWVudD5cbn0iO2NvbnN0IHZlcnRleCQ4PSIjZGVmaW5lIE1BVENBUFxudmFyeWluZyB2ZWMzIHZWaWV3UG9zaXRpb247XG4jaW5jbHVkZSA8Y29tbW9uPlxuI2luY2x1ZGUgPHV2X3BhcnNfdmVydGV4PlxuI2luY2x1ZGUgPGNvbG9yX3BhcnNfdmVydGV4PlxuI2luY2x1ZGUgPGRpc3BsYWNlbWVudG1hcF9wYXJzX3ZlcnRleD5cbiNpbmNsdWRlIDxmb2dfcGFyc192ZXJ0ZXg+XG4jaW5jbHVkZSA8bm9ybWFsX3BhcnNfdmVydGV4PlxuI2luY2x1ZGUgPG1vcnBodGFyZ2V0X3BhcnNfdmVydGV4PlxuI2luY2x1ZGUgPHNraW5uaW5nX3BhcnNfdmVydGV4PlxuI2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3BhcnNfdmVydGV4PlxuI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19wYXJzX3ZlcnRleD5cbnZvaWQgbWFpbigpIHtcblx0I2luY2x1ZGUgPHV2X3ZlcnRleD5cblx0I2luY2x1ZGUgPGNvbG9yX3ZlcnRleD5cblx0I2luY2x1ZGUgPGJlZ2lubm9ybWFsX3ZlcnRleD5cblx0I2luY2x1ZGUgPG1vcnBobm9ybWFsX3ZlcnRleD5cblx0I2luY2x1ZGUgPHNraW5iYXNlX3ZlcnRleD5cblx0I2luY2x1ZGUgPHNraW5ub3JtYWxfdmVydGV4PlxuXHQjaW5jbHVkZSA8ZGVmYXVsdG5vcm1hbF92ZXJ0ZXg+XG5cdCNpbmNsdWRlIDxub3JtYWxfdmVydGV4PlxuXHQjaW5jbHVkZSA8YmVnaW5fdmVydGV4PlxuXHQjaW5jbHVkZSA8bW9ycGh0YXJnZXRfdmVydGV4PlxuXHQjaW5jbHVkZSA8c2tpbm5pbmdfdmVydGV4PlxuXHQjaW5jbHVkZSA8ZGlzcGxhY2VtZW50bWFwX3ZlcnRleD5cblx0I2luY2x1ZGUgPHByb2plY3RfdmVydGV4PlxuXHQjaW5jbHVkZSA8bG9nZGVwdGhidWZfdmVydGV4PlxuXHQjaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3ZlcnRleD5cblx0I2luY2x1ZGUgPGZvZ192ZXJ0ZXg+XG5cdHZWaWV3UG9zaXRpb24gPSAtIG12UG9zaXRpb24ueHl6O1xufSI7Y29uc3QgZnJhZ21lbnQkOD0iI2RlZmluZSBNQVRDQVBcbnVuaWZvcm0gdmVjMyBkaWZmdXNlO1xudW5pZm9ybSBmbG9hdCBvcGFjaXR5O1xudW5pZm9ybSBzYW1wbGVyMkQgbWF0Y2FwO1xudmFyeWluZyB2ZWMzIHZWaWV3UG9zaXRpb247XG4jaW5jbHVkZSA8Y29tbW9uPlxuI2luY2x1ZGUgPGRpdGhlcmluZ19wYXJzX2ZyYWdtZW50PlxuI2luY2x1ZGUgPGNvbG9yX3BhcnNfZnJhZ21lbnQ+XG4jaW5jbHVkZSA8dXZfcGFyc19mcmFnbWVudD5cbiNpbmNsdWRlIDxtYXBfcGFyc19mcmFnbWVudD5cbiNpbmNsdWRlIDxhbHBoYW1hcF9wYXJzX2ZyYWdtZW50PlxuI2luY2x1ZGUgPGFscGhhdGVzdF9wYXJzX2ZyYWdtZW50PlxuI2luY2x1ZGUgPGZvZ19wYXJzX2ZyYWdtZW50PlxuI2luY2x1ZGUgPG5vcm1hbF9wYXJzX2ZyYWdtZW50PlxuI2luY2x1ZGUgPGJ1bXBtYXBfcGFyc19mcmFnbWVudD5cbiNpbmNsdWRlIDxub3JtYWxtYXBfcGFyc19mcmFnbWVudD5cbiNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9wYXJzX2ZyYWdtZW50PlxuI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19wYXJzX2ZyYWdtZW50Plxudm9pZCBtYWluKCkge1xuXHQjaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX2ZyYWdtZW50PlxuXHR2ZWM0IGRpZmZ1c2VDb2xvciA9IHZlYzQoIGRpZmZ1c2UsIG9wYWNpdHkgKTtcblx0I2luY2x1ZGUgPGxvZ2RlcHRoYnVmX2ZyYWdtZW50PlxuXHQjaW5jbHVkZSA8bWFwX2ZyYWdtZW50PlxuXHQjaW5jbHVkZSA8Y29sb3JfZnJhZ21lbnQ+XG5cdCNpbmNsdWRlIDxhbHBoYW1hcF9mcmFnbWVudD5cblx0I2luY2x1ZGUgPGFscGhhdGVzdF9mcmFnbWVudD5cblx0I2luY2x1ZGUgPG5vcm1hbF9mcmFnbWVudF9iZWdpbj5cblx0I2luY2x1ZGUgPG5vcm1hbF9mcmFnbWVudF9tYXBzPlxuXHR2ZWMzIHZpZXdEaXIgPSBub3JtYWxpemUoIHZWaWV3UG9zaXRpb24gKTtcblx0dmVjMyB4ID0gbm9ybWFsaXplKCB2ZWMzKCB2aWV3RGlyLnosIDAuMCwgLSB2aWV3RGlyLnggKSApO1xuXHR2ZWMzIHkgPSBjcm9zcyggdmlld0RpciwgeCApO1xuXHR2ZWMyIHV2ID0gdmVjMiggZG90KCB4LCBub3JtYWwgKSwgZG90KCB5LCBub3JtYWwgKSApICogMC40OTUgKyAwLjU7XG5cdCNpZmRlZiBVU0VfTUFUQ0FQXG5cdFx0dmVjNCBtYXRjYXBDb2xvciA9IHRleHR1cmUyRCggbWF0Y2FwLCB1diApO1xuXHRcdG1hdGNhcENvbG9yID0gbWF0Y2FwVGV4ZWxUb0xpbmVhciggbWF0Y2FwQ29sb3IgKTtcblx0I2Vsc2Vcblx0XHR2ZWM0IG1hdGNhcENvbG9yID0gdmVjNCggMS4wICk7XG5cdCNlbmRpZlxuXHR2ZWMzIG91dGdvaW5nTGlnaHQgPSBkaWZmdXNlQ29sb3IucmdiICogbWF0Y2FwQ29sb3IucmdiO1xuXHQjaW5jbHVkZSA8b3V0cHV0X2ZyYWdtZW50PlxuXHQjaW5jbHVkZSA8dG9uZW1hcHBpbmdfZnJhZ21lbnQ+XG5cdCNpbmNsdWRlIDxlbmNvZGluZ3NfZnJhZ21lbnQ+XG5cdCNpbmNsdWRlIDxmb2dfZnJhZ21lbnQ+XG5cdCNpbmNsdWRlIDxwcmVtdWx0aXBsaWVkX2FscGhhX2ZyYWdtZW50PlxuXHQjaW5jbHVkZSA8ZGl0aGVyaW5nX2ZyYWdtZW50PlxufSI7Y29uc3QgdmVydGV4JDc9IiNkZWZpbmUgTk9STUFMXG4jaWYgZGVmaW5lZCggRkxBVF9TSEFERUQgKSB8fCBkZWZpbmVkKCBVU0VfQlVNUE1BUCApIHx8IGRlZmluZWQoIFRBTkdFTlRTUEFDRV9OT1JNQUxNQVAgKVxuXHR2YXJ5aW5nIHZlYzMgdlZpZXdQb3NpdGlvbjtcbiNlbmRpZlxuI2luY2x1ZGUgPGNvbW1vbj5cbiNpbmNsdWRlIDx1dl9wYXJzX3ZlcnRleD5cbiNpbmNsdWRlIDxkaXNwbGFjZW1lbnRtYXBfcGFyc192ZXJ0ZXg+XG4jaW5jbHVkZSA8bm9ybWFsX3BhcnNfdmVydGV4PlxuI2luY2x1ZGUgPG1vcnBodGFyZ2V0X3BhcnNfdmVydGV4PlxuI2luY2x1ZGUgPHNraW5uaW5nX3BhcnNfdmVydGV4PlxuI2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3BhcnNfdmVydGV4PlxuI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19wYXJzX3ZlcnRleD5cbnZvaWQgbWFpbigpIHtcblx0I2luY2x1ZGUgPHV2X3ZlcnRleD5cblx0I2luY2x1ZGUgPGJlZ2lubm9ybWFsX3ZlcnRleD5cblx0I2luY2x1ZGUgPG1vcnBobm9ybWFsX3ZlcnRleD5cblx0I2luY2x1ZGUgPHNraW5iYXNlX3ZlcnRleD5cblx0I2luY2x1ZGUgPHNraW5ub3JtYWxfdmVydGV4PlxuXHQjaW5jbHVkZSA8ZGVmYXVsdG5vcm1hbF92ZXJ0ZXg+XG5cdCNpbmNsdWRlIDxub3JtYWxfdmVydGV4PlxuXHQjaW5jbHVkZSA8YmVnaW5fdmVydGV4PlxuXHQjaW5jbHVkZSA8bW9ycGh0YXJnZXRfdmVydGV4PlxuXHQjaW5jbHVkZSA8c2tpbm5pbmdfdmVydGV4PlxuXHQjaW5jbHVkZSA8ZGlzcGxhY2VtZW50bWFwX3ZlcnRleD5cblx0I2luY2x1ZGUgPHByb2plY3RfdmVydGV4PlxuXHQjaW5jbHVkZSA8bG9nZGVwdGhidWZfdmVydGV4PlxuXHQjaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3ZlcnRleD5cbiNpZiBkZWZpbmVkKCBGTEFUX1NIQURFRCApIHx8IGRlZmluZWQoIFVTRV9CVU1QTUFQICkgfHwgZGVmaW5lZCggVEFOR0VOVFNQQUNFX05PUk1BTE1BUCApXG5cdHZWaWV3UG9zaXRpb24gPSAtIG12UG9zaXRpb24ueHl6O1xuI2VuZGlmXG59Ijtjb25zdCBmcmFnbWVudCQ3PSIjZGVmaW5lIE5PUk1BTFxudW5pZm9ybSBmbG9hdCBvcGFjaXR5O1xuI2lmIGRlZmluZWQoIEZMQVRfU0hBREVEICkgfHwgZGVmaW5lZCggVVNFX0JVTVBNQVAgKSB8fCBkZWZpbmVkKCBUQU5HRU5UU1BBQ0VfTk9STUFMTUFQIClcblx0dmFyeWluZyB2ZWMzIHZWaWV3UG9zaXRpb247XG4jZW5kaWZcbiNpbmNsdWRlIDxwYWNraW5nPlxuI2luY2x1ZGUgPHV2X3BhcnNfZnJhZ21lbnQ+XG4jaW5jbHVkZSA8bm9ybWFsX3BhcnNfZnJhZ21lbnQ+XG4jaW5jbHVkZSA8YnVtcG1hcF9wYXJzX2ZyYWdtZW50PlxuI2luY2x1ZGUgPG5vcm1hbG1hcF9wYXJzX2ZyYWdtZW50PlxuI2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3BhcnNfZnJhZ21lbnQ+XG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfZnJhZ21lbnQ+XG52b2lkIG1haW4oKSB7XG5cdCNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfZnJhZ21lbnQ+XG5cdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9mcmFnbWVudD5cblx0I2luY2x1ZGUgPG5vcm1hbF9mcmFnbWVudF9iZWdpbj5cblx0I2luY2x1ZGUgPG5vcm1hbF9mcmFnbWVudF9tYXBzPlxuXHRnbF9GcmFnQ29sb3IgPSB2ZWM0KCBwYWNrTm9ybWFsVG9SR0IoIG5vcm1hbCApLCBvcGFjaXR5ICk7XG59Ijtjb25zdCB2ZXJ0ZXgkNj0iI2RlZmluZSBQSE9OR1xudmFyeWluZyB2ZWMzIHZWaWV3UG9zaXRpb247XG4jaW5jbHVkZSA8Y29tbW9uPlxuI2luY2x1ZGUgPHV2X3BhcnNfdmVydGV4PlxuI2luY2x1ZGUgPHV2Ml9wYXJzX3ZlcnRleD5cbiNpbmNsdWRlIDxkaXNwbGFjZW1lbnRtYXBfcGFyc192ZXJ0ZXg+XG4jaW5jbHVkZSA8ZW52bWFwX3BhcnNfdmVydGV4PlxuI2luY2x1ZGUgPGNvbG9yX3BhcnNfdmVydGV4PlxuI2luY2x1ZGUgPGZvZ19wYXJzX3ZlcnRleD5cbiNpbmNsdWRlIDxub3JtYWxfcGFyc192ZXJ0ZXg+XG4jaW5jbHVkZSA8bW9ycGh0YXJnZXRfcGFyc192ZXJ0ZXg+XG4jaW5jbHVkZSA8c2tpbm5pbmdfcGFyc192ZXJ0ZXg+XG4jaW5jbHVkZSA8c2hhZG93bWFwX3BhcnNfdmVydGV4PlxuI2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3BhcnNfdmVydGV4PlxuI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19wYXJzX3ZlcnRleD5cbnZvaWQgbWFpbigpIHtcblx0I2luY2x1ZGUgPHV2X3ZlcnRleD5cblx0I2luY2x1ZGUgPHV2Ml92ZXJ0ZXg+XG5cdCNpbmNsdWRlIDxjb2xvcl92ZXJ0ZXg+XG5cdCNpbmNsdWRlIDxiZWdpbm5vcm1hbF92ZXJ0ZXg+XG5cdCNpbmNsdWRlIDxtb3JwaG5vcm1hbF92ZXJ0ZXg+XG5cdCNpbmNsdWRlIDxza2luYmFzZV92ZXJ0ZXg+XG5cdCNpbmNsdWRlIDxza2lubm9ybWFsX3ZlcnRleD5cblx0I2luY2x1ZGUgPGRlZmF1bHRub3JtYWxfdmVydGV4PlxuXHQjaW5jbHVkZSA8bm9ybWFsX3ZlcnRleD5cblx0I2luY2x1ZGUgPGJlZ2luX3ZlcnRleD5cblx0I2luY2x1ZGUgPG1vcnBodGFyZ2V0X3ZlcnRleD5cblx0I2luY2x1ZGUgPHNraW5uaW5nX3ZlcnRleD5cblx0I2luY2x1ZGUgPGRpc3BsYWNlbWVudG1hcF92ZXJ0ZXg+XG5cdCNpbmNsdWRlIDxwcm9qZWN0X3ZlcnRleD5cblx0I2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3ZlcnRleD5cblx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc192ZXJ0ZXg+XG5cdHZWaWV3UG9zaXRpb24gPSAtIG12UG9zaXRpb24ueHl6O1xuXHQjaW5jbHVkZSA8d29ybGRwb3NfdmVydGV4PlxuXHQjaW5jbHVkZSA8ZW52bWFwX3ZlcnRleD5cblx0I2luY2x1ZGUgPHNoYWRvd21hcF92ZXJ0ZXg+XG5cdCNpbmNsdWRlIDxmb2dfdmVydGV4PlxufSI7Y29uc3QgZnJhZ21lbnQkNj0iI2RlZmluZSBQSE9OR1xudW5pZm9ybSB2ZWMzIGRpZmZ1c2U7XG51bmlmb3JtIHZlYzMgZW1pc3NpdmU7XG51bmlmb3JtIHZlYzMgc3BlY3VsYXI7XG51bmlmb3JtIGZsb2F0IHNoaW5pbmVzcztcbnVuaWZvcm0gZmxvYXQgb3BhY2l0eTtcbiNpbmNsdWRlIDxjb21tb24+XG4jaW5jbHVkZSA8cGFja2luZz5cbiNpbmNsdWRlIDxkaXRoZXJpbmdfcGFyc19mcmFnbWVudD5cbiNpbmNsdWRlIDxjb2xvcl9wYXJzX2ZyYWdtZW50PlxuI2luY2x1ZGUgPHV2X3BhcnNfZnJhZ21lbnQ+XG4jaW5jbHVkZSA8dXYyX3BhcnNfZnJhZ21lbnQ+XG4jaW5jbHVkZSA8bWFwX3BhcnNfZnJhZ21lbnQ+XG4jaW5jbHVkZSA8YWxwaGFtYXBfcGFyc19mcmFnbWVudD5cbiNpbmNsdWRlIDxhbHBoYXRlc3RfcGFyc19mcmFnbWVudD5cbiNpbmNsdWRlIDxhb21hcF9wYXJzX2ZyYWdtZW50PlxuI2luY2x1ZGUgPGxpZ2h0bWFwX3BhcnNfZnJhZ21lbnQ+XG4jaW5jbHVkZSA8ZW1pc3NpdmVtYXBfcGFyc19mcmFnbWVudD5cbiNpbmNsdWRlIDxlbnZtYXBfY29tbW9uX3BhcnNfZnJhZ21lbnQ+XG4jaW5jbHVkZSA8ZW52bWFwX3BhcnNfZnJhZ21lbnQ+XG4jaW5jbHVkZSA8Y3ViZV91dl9yZWZsZWN0aW9uX2ZyYWdtZW50PlxuI2luY2x1ZGUgPGZvZ19wYXJzX2ZyYWdtZW50PlxuI2luY2x1ZGUgPGJzZGZzPlxuI2luY2x1ZGUgPGxpZ2h0c19wYXJzX2JlZ2luPlxuI2luY2x1ZGUgPG5vcm1hbF9wYXJzX2ZyYWdtZW50PlxuI2luY2x1ZGUgPGxpZ2h0c19waG9uZ19wYXJzX2ZyYWdtZW50PlxuI2luY2x1ZGUgPHNoYWRvd21hcF9wYXJzX2ZyYWdtZW50PlxuI2luY2x1ZGUgPGJ1bXBtYXBfcGFyc19mcmFnbWVudD5cbiNpbmNsdWRlIDxub3JtYWxtYXBfcGFyc19mcmFnbWVudD5cbiNpbmNsdWRlIDxzcGVjdWxhcm1hcF9wYXJzX2ZyYWdtZW50PlxuI2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3BhcnNfZnJhZ21lbnQ+XG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfZnJhZ21lbnQ+XG52b2lkIG1haW4oKSB7XG5cdCNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfZnJhZ21lbnQ+XG5cdHZlYzQgZGlmZnVzZUNvbG9yID0gdmVjNCggZGlmZnVzZSwgb3BhY2l0eSApO1xuXHRSZWZsZWN0ZWRMaWdodCByZWZsZWN0ZWRMaWdodCA9IFJlZmxlY3RlZExpZ2h0KCB2ZWMzKCAwLjAgKSwgdmVjMyggMC4wICksIHZlYzMoIDAuMCApLCB2ZWMzKCAwLjAgKSApO1xuXHR2ZWMzIHRvdGFsRW1pc3NpdmVSYWRpYW5jZSA9IGVtaXNzaXZlO1xuXHQjaW5jbHVkZSA8bG9nZGVwdGhidWZfZnJhZ21lbnQ+XG5cdCNpbmNsdWRlIDxtYXBfZnJhZ21lbnQ+XG5cdCNpbmNsdWRlIDxjb2xvcl9mcmFnbWVudD5cblx0I2luY2x1ZGUgPGFscGhhbWFwX2ZyYWdtZW50PlxuXHQjaW5jbHVkZSA8YWxwaGF0ZXN0X2ZyYWdtZW50PlxuXHQjaW5jbHVkZSA8c3BlY3VsYXJtYXBfZnJhZ21lbnQ+XG5cdCNpbmNsdWRlIDxub3JtYWxfZnJhZ21lbnRfYmVnaW4+XG5cdCNpbmNsdWRlIDxub3JtYWxfZnJhZ21lbnRfbWFwcz5cblx0I2luY2x1ZGUgPGVtaXNzaXZlbWFwX2ZyYWdtZW50PlxuXHQjaW5jbHVkZSA8bGlnaHRzX3Bob25nX2ZyYWdtZW50PlxuXHQjaW5jbHVkZSA8bGlnaHRzX2ZyYWdtZW50X2JlZ2luPlxuXHQjaW5jbHVkZSA8bGlnaHRzX2ZyYWdtZW50X21hcHM+XG5cdCNpbmNsdWRlIDxsaWdodHNfZnJhZ21lbnRfZW5kPlxuXHQjaW5jbHVkZSA8YW9tYXBfZnJhZ21lbnQ+XG5cdHZlYzMgb3V0Z29pbmdMaWdodCA9IHJlZmxlY3RlZExpZ2h0LmRpcmVjdERpZmZ1c2UgKyByZWZsZWN0ZWRMaWdodC5pbmRpcmVjdERpZmZ1c2UgKyByZWZsZWN0ZWRMaWdodC5kaXJlY3RTcGVjdWxhciArIHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0U3BlY3VsYXIgKyB0b3RhbEVtaXNzaXZlUmFkaWFuY2U7XG5cdCNpbmNsdWRlIDxlbnZtYXBfZnJhZ21lbnQ+XG5cdCNpbmNsdWRlIDxvdXRwdXRfZnJhZ21lbnQ+XG5cdCNpbmNsdWRlIDx0b25lbWFwcGluZ19mcmFnbWVudD5cblx0I2luY2x1ZGUgPGVuY29kaW5nc19mcmFnbWVudD5cblx0I2luY2x1ZGUgPGZvZ19mcmFnbWVudD5cblx0I2luY2x1ZGUgPHByZW11bHRpcGxpZWRfYWxwaGFfZnJhZ21lbnQ+XG5cdCNpbmNsdWRlIDxkaXRoZXJpbmdfZnJhZ21lbnQ+XG59Ijtjb25zdCB2ZXJ0ZXgkNT0iI2RlZmluZSBTVEFOREFSRFxudmFyeWluZyB2ZWMzIHZWaWV3UG9zaXRpb247XG4jaWZkZWYgVVNFX1RSQU5TTUlTU0lPTlxuXHR2YXJ5aW5nIHZlYzMgdldvcmxkUG9zaXRpb247XG4jZW5kaWZcbiNpbmNsdWRlIDxjb21tb24+XG4jaW5jbHVkZSA8dXZfcGFyc192ZXJ0ZXg+XG4jaW5jbHVkZSA8dXYyX3BhcnNfdmVydGV4PlxuI2luY2x1ZGUgPGRpc3BsYWNlbWVudG1hcF9wYXJzX3ZlcnRleD5cbiNpbmNsdWRlIDxjb2xvcl9wYXJzX3ZlcnRleD5cbiNpbmNsdWRlIDxmb2dfcGFyc192ZXJ0ZXg+XG4jaW5jbHVkZSA8bm9ybWFsX3BhcnNfdmVydGV4PlxuI2luY2x1ZGUgPG1vcnBodGFyZ2V0X3BhcnNfdmVydGV4PlxuI2luY2x1ZGUgPHNraW5uaW5nX3BhcnNfdmVydGV4PlxuI2luY2x1ZGUgPHNoYWRvd21hcF9wYXJzX3ZlcnRleD5cbiNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9wYXJzX3ZlcnRleD5cbiNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfcGFyc192ZXJ0ZXg+XG52b2lkIG1haW4oKSB7XG5cdCNpbmNsdWRlIDx1dl92ZXJ0ZXg+XG5cdCNpbmNsdWRlIDx1djJfdmVydGV4PlxuXHQjaW5jbHVkZSA8Y29sb3JfdmVydGV4PlxuXHQjaW5jbHVkZSA8YmVnaW5ub3JtYWxfdmVydGV4PlxuXHQjaW5jbHVkZSA8bW9ycGhub3JtYWxfdmVydGV4PlxuXHQjaW5jbHVkZSA8c2tpbmJhc2VfdmVydGV4PlxuXHQjaW5jbHVkZSA8c2tpbm5vcm1hbF92ZXJ0ZXg+XG5cdCNpbmNsdWRlIDxkZWZhdWx0bm9ybWFsX3ZlcnRleD5cblx0I2luY2x1ZGUgPG5vcm1hbF92ZXJ0ZXg+XG5cdCNpbmNsdWRlIDxiZWdpbl92ZXJ0ZXg+XG5cdCNpbmNsdWRlIDxtb3JwaHRhcmdldF92ZXJ0ZXg+XG5cdCNpbmNsdWRlIDxza2lubmluZ192ZXJ0ZXg+XG5cdCNpbmNsdWRlIDxkaXNwbGFjZW1lbnRtYXBfdmVydGV4PlxuXHQjaW5jbHVkZSA8cHJvamVjdF92ZXJ0ZXg+XG5cdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl92ZXJ0ZXg+XG5cdCNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfdmVydGV4PlxuXHR2Vmlld1Bvc2l0aW9uID0gLSBtdlBvc2l0aW9uLnh5ejtcblx0I2luY2x1ZGUgPHdvcmxkcG9zX3ZlcnRleD5cblx0I2luY2x1ZGUgPHNoYWRvd21hcF92ZXJ0ZXg+XG5cdCNpbmNsdWRlIDxmb2dfdmVydGV4PlxuI2lmZGVmIFVTRV9UUkFOU01JU1NJT05cblx0dldvcmxkUG9zaXRpb24gPSB3b3JsZFBvc2l0aW9uLnh5ejtcbiNlbmRpZlxufSI7Y29uc3QgZnJhZ21lbnQkNT0iI2RlZmluZSBTVEFOREFSRFxuI2lmZGVmIFBIWVNJQ0FMXG5cdCNkZWZpbmUgSU9SXG5cdCNkZWZpbmUgU1BFQ1VMQVJcbiNlbmRpZlxudW5pZm9ybSB2ZWMzIGRpZmZ1c2U7XG51bmlmb3JtIHZlYzMgZW1pc3NpdmU7XG51bmlmb3JtIGZsb2F0IHJvdWdobmVzcztcbnVuaWZvcm0gZmxvYXQgbWV0YWxuZXNzO1xudW5pZm9ybSBmbG9hdCBvcGFjaXR5O1xuI2lmZGVmIElPUlxuXHR1bmlmb3JtIGZsb2F0IGlvcjtcbiNlbmRpZlxuI2lmZGVmIFNQRUNVTEFSXG5cdHVuaWZvcm0gZmxvYXQgc3BlY3VsYXJJbnRlbnNpdHk7XG5cdHVuaWZvcm0gdmVjMyBzcGVjdWxhckNvbG9yO1xuXHQjaWZkZWYgVVNFX1NQRUNVTEFSSU5URU5TSVRZTUFQXG5cdFx0dW5pZm9ybSBzYW1wbGVyMkQgc3BlY3VsYXJJbnRlbnNpdHlNYXA7XG5cdCNlbmRpZlxuXHQjaWZkZWYgVVNFX1NQRUNVTEFSQ09MT1JNQVBcblx0XHR1bmlmb3JtIHNhbXBsZXIyRCBzcGVjdWxhckNvbG9yTWFwO1xuXHQjZW5kaWZcbiNlbmRpZlxuI2lmZGVmIFVTRV9DTEVBUkNPQVRcblx0dW5pZm9ybSBmbG9hdCBjbGVhcmNvYXQ7XG5cdHVuaWZvcm0gZmxvYXQgY2xlYXJjb2F0Um91Z2huZXNzO1xuI2VuZGlmXG4jaWZkZWYgVVNFX1NIRUVOXG5cdHVuaWZvcm0gdmVjMyBzaGVlbkNvbG9yO1xuXHR1bmlmb3JtIGZsb2F0IHNoZWVuUm91Z2huZXNzO1xuXHQjaWZkZWYgVVNFX1NIRUVOQ09MT1JNQVBcblx0XHR1bmlmb3JtIHNhbXBsZXIyRCBzaGVlbkNvbG9yTWFwO1xuXHQjZW5kaWZcblx0I2lmZGVmIFVTRV9TSEVFTlJPVUdITkVTU01BUFxuXHRcdHVuaWZvcm0gc2FtcGxlcjJEIHNoZWVuUm91Z2huZXNzTWFwO1xuXHQjZW5kaWZcbiNlbmRpZlxudmFyeWluZyB2ZWMzIHZWaWV3UG9zaXRpb247XG4jaW5jbHVkZSA8Y29tbW9uPlxuI2luY2x1ZGUgPHBhY2tpbmc+XG4jaW5jbHVkZSA8ZGl0aGVyaW5nX3BhcnNfZnJhZ21lbnQ+XG4jaW5jbHVkZSA8Y29sb3JfcGFyc19mcmFnbWVudD5cbiNpbmNsdWRlIDx1dl9wYXJzX2ZyYWdtZW50PlxuI2luY2x1ZGUgPHV2Ml9wYXJzX2ZyYWdtZW50PlxuI2luY2x1ZGUgPG1hcF9wYXJzX2ZyYWdtZW50PlxuI2luY2x1ZGUgPGFscGhhbWFwX3BhcnNfZnJhZ21lbnQ+XG4jaW5jbHVkZSA8YWxwaGF0ZXN0X3BhcnNfZnJhZ21lbnQ+XG4jaW5jbHVkZSA8YW9tYXBfcGFyc19mcmFnbWVudD5cbiNpbmNsdWRlIDxsaWdodG1hcF9wYXJzX2ZyYWdtZW50PlxuI2luY2x1ZGUgPGVtaXNzaXZlbWFwX3BhcnNfZnJhZ21lbnQ+XG4jaW5jbHVkZSA8YnNkZnM+XG4jaW5jbHVkZSA8Y3ViZV91dl9yZWZsZWN0aW9uX2ZyYWdtZW50PlxuI2luY2x1ZGUgPGVudm1hcF9jb21tb25fcGFyc19mcmFnbWVudD5cbiNpbmNsdWRlIDxlbnZtYXBfcGh5c2ljYWxfcGFyc19mcmFnbWVudD5cbiNpbmNsdWRlIDxmb2dfcGFyc19mcmFnbWVudD5cbiNpbmNsdWRlIDxsaWdodHNfcGFyc19iZWdpbj5cbiNpbmNsdWRlIDxub3JtYWxfcGFyc19mcmFnbWVudD5cbiNpbmNsdWRlIDxsaWdodHNfcGh5c2ljYWxfcGFyc19mcmFnbWVudD5cbiNpbmNsdWRlIDx0cmFuc21pc3Npb25fcGFyc19mcmFnbWVudD5cbiNpbmNsdWRlIDxzaGFkb3dtYXBfcGFyc19mcmFnbWVudD5cbiNpbmNsdWRlIDxidW1wbWFwX3BhcnNfZnJhZ21lbnQ+XG4jaW5jbHVkZSA8bm9ybWFsbWFwX3BhcnNfZnJhZ21lbnQ+XG4jaW5jbHVkZSA8Y2xlYXJjb2F0X3BhcnNfZnJhZ21lbnQ+XG4jaW5jbHVkZSA8cm91Z2huZXNzbWFwX3BhcnNfZnJhZ21lbnQ+XG4jaW5jbHVkZSA8bWV0YWxuZXNzbWFwX3BhcnNfZnJhZ21lbnQ+XG4jaW5jbHVkZSA8bG9nZGVwdGhidWZfcGFyc19mcmFnbWVudD5cbiNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfcGFyc19mcmFnbWVudD5cbnZvaWQgbWFpbigpIHtcblx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19mcmFnbWVudD5cblx0dmVjNCBkaWZmdXNlQ29sb3IgPSB2ZWM0KCBkaWZmdXNlLCBvcGFjaXR5ICk7XG5cdFJlZmxlY3RlZExpZ2h0IHJlZmxlY3RlZExpZ2h0ID0gUmVmbGVjdGVkTGlnaHQoIHZlYzMoIDAuMCApLCB2ZWMzKCAwLjAgKSwgdmVjMyggMC4wICksIHZlYzMoIDAuMCApICk7XG5cdHZlYzMgdG90YWxFbWlzc2l2ZVJhZGlhbmNlID0gZW1pc3NpdmU7XG5cdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9mcmFnbWVudD5cblx0I2luY2x1ZGUgPG1hcF9mcmFnbWVudD5cblx0I2luY2x1ZGUgPGNvbG9yX2ZyYWdtZW50PlxuXHQjaW5jbHVkZSA8YWxwaGFtYXBfZnJhZ21lbnQ+XG5cdCNpbmNsdWRlIDxhbHBoYXRlc3RfZnJhZ21lbnQ+XG5cdCNpbmNsdWRlIDxyb3VnaG5lc3NtYXBfZnJhZ21lbnQ+XG5cdCNpbmNsdWRlIDxtZXRhbG5lc3NtYXBfZnJhZ21lbnQ+XG5cdCNpbmNsdWRlIDxub3JtYWxfZnJhZ21lbnRfYmVnaW4+XG5cdCNpbmNsdWRlIDxub3JtYWxfZnJhZ21lbnRfbWFwcz5cblx0I2luY2x1ZGUgPGNsZWFyY29hdF9ub3JtYWxfZnJhZ21lbnRfYmVnaW4+XG5cdCNpbmNsdWRlIDxjbGVhcmNvYXRfbm9ybWFsX2ZyYWdtZW50X21hcHM+XG5cdCNpbmNsdWRlIDxlbWlzc2l2ZW1hcF9mcmFnbWVudD5cblx0I2luY2x1ZGUgPGxpZ2h0c19waHlzaWNhbF9mcmFnbWVudD5cblx0I2luY2x1ZGUgPGxpZ2h0c19mcmFnbWVudF9iZWdpbj5cblx0I2luY2x1ZGUgPGxpZ2h0c19mcmFnbWVudF9tYXBzPlxuXHQjaW5jbHVkZSA8bGlnaHRzX2ZyYWdtZW50X2VuZD5cblx0I2luY2x1ZGUgPGFvbWFwX2ZyYWdtZW50PlxuXHR2ZWMzIHRvdGFsRGlmZnVzZSA9IHJlZmxlY3RlZExpZ2h0LmRpcmVjdERpZmZ1c2UgKyByZWZsZWN0ZWRMaWdodC5pbmRpcmVjdERpZmZ1c2U7XG5cdHZlYzMgdG90YWxTcGVjdWxhciA9IHJlZmxlY3RlZExpZ2h0LmRpcmVjdFNwZWN1bGFyICsgcmVmbGVjdGVkTGlnaHQuaW5kaXJlY3RTcGVjdWxhcjtcblx0I2luY2x1ZGUgPHRyYW5zbWlzc2lvbl9mcmFnbWVudD5cblx0dmVjMyBvdXRnb2luZ0xpZ2h0ID0gdG90YWxEaWZmdXNlICsgdG90YWxTcGVjdWxhciArIHRvdGFsRW1pc3NpdmVSYWRpYW5jZTtcblx0I2lmZGVmIFVTRV9DTEVBUkNPQVRcblx0XHRmbG9hdCBkb3ROVmNjID0gc2F0dXJhdGUoIGRvdCggZ2VvbWV0cnkuY2xlYXJjb2F0Tm9ybWFsLCBnZW9tZXRyeS52aWV3RGlyICkgKTtcblx0XHR2ZWMzIEZjYyA9IEZfU2NobGljayggbWF0ZXJpYWwuY2xlYXJjb2F0RjAsIG1hdGVyaWFsLmNsZWFyY29hdEY5MCwgZG90TlZjYyApO1xuXHRcdG91dGdvaW5nTGlnaHQgPSBvdXRnb2luZ0xpZ2h0ICogKCAxLjAgLSBtYXRlcmlhbC5jbGVhcmNvYXQgKiBGY2MgKSArIGNsZWFyY29hdFNwZWN1bGFyICogbWF0ZXJpYWwuY2xlYXJjb2F0O1xuXHQjZW5kaWZcblx0I2luY2x1ZGUgPG91dHB1dF9mcmFnbWVudD5cblx0I2luY2x1ZGUgPHRvbmVtYXBwaW5nX2ZyYWdtZW50PlxuXHQjaW5jbHVkZSA8ZW5jb2RpbmdzX2ZyYWdtZW50PlxuXHQjaW5jbHVkZSA8Zm9nX2ZyYWdtZW50PlxuXHQjaW5jbHVkZSA8cHJlbXVsdGlwbGllZF9hbHBoYV9mcmFnbWVudD5cblx0I2luY2x1ZGUgPGRpdGhlcmluZ19mcmFnbWVudD5cbn0iO2NvbnN0IHZlcnRleCQ0PSIjZGVmaW5lIFRPT05cbnZhcnlpbmcgdmVjMyB2Vmlld1Bvc2l0aW9uO1xuI2luY2x1ZGUgPGNvbW1vbj5cbiNpbmNsdWRlIDx1dl9wYXJzX3ZlcnRleD5cbiNpbmNsdWRlIDx1djJfcGFyc192ZXJ0ZXg+XG4jaW5jbHVkZSA8ZGlzcGxhY2VtZW50bWFwX3BhcnNfdmVydGV4PlxuI2luY2x1ZGUgPGNvbG9yX3BhcnNfdmVydGV4PlxuI2luY2x1ZGUgPGZvZ19wYXJzX3ZlcnRleD5cbiNpbmNsdWRlIDxub3JtYWxfcGFyc192ZXJ0ZXg+XG4jaW5jbHVkZSA8bW9ycGh0YXJnZXRfcGFyc192ZXJ0ZXg+XG4jaW5jbHVkZSA8c2tpbm5pbmdfcGFyc192ZXJ0ZXg+XG4jaW5jbHVkZSA8c2hhZG93bWFwX3BhcnNfdmVydGV4PlxuI2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3BhcnNfdmVydGV4PlxuI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19wYXJzX3ZlcnRleD5cbnZvaWQgbWFpbigpIHtcblx0I2luY2x1ZGUgPHV2X3ZlcnRleD5cblx0I2luY2x1ZGUgPHV2Ml92ZXJ0ZXg+XG5cdCNpbmNsdWRlIDxjb2xvcl92ZXJ0ZXg+XG5cdCNpbmNsdWRlIDxiZWdpbm5vcm1hbF92ZXJ0ZXg+XG5cdCNpbmNsdWRlIDxtb3JwaG5vcm1hbF92ZXJ0ZXg+XG5cdCNpbmNsdWRlIDxza2luYmFzZV92ZXJ0ZXg+XG5cdCNpbmNsdWRlIDxza2lubm9ybWFsX3ZlcnRleD5cblx0I2luY2x1ZGUgPGRlZmF1bHRub3JtYWxfdmVydGV4PlxuXHQjaW5jbHVkZSA8bm9ybWFsX3ZlcnRleD5cblx0I2luY2x1ZGUgPGJlZ2luX3ZlcnRleD5cblx0I2luY2x1ZGUgPG1vcnBodGFyZ2V0X3ZlcnRleD5cblx0I2luY2x1ZGUgPHNraW5uaW5nX3ZlcnRleD5cblx0I2luY2x1ZGUgPGRpc3BsYWNlbWVudG1hcF92ZXJ0ZXg+XG5cdCNpbmNsdWRlIDxwcm9qZWN0X3ZlcnRleD5cblx0I2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3ZlcnRleD5cblx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc192ZXJ0ZXg+XG5cdHZWaWV3UG9zaXRpb24gPSAtIG12UG9zaXRpb24ueHl6O1xuXHQjaW5jbHVkZSA8d29ybGRwb3NfdmVydGV4PlxuXHQjaW5jbHVkZSA8c2hhZG93bWFwX3ZlcnRleD5cblx0I2luY2x1ZGUgPGZvZ192ZXJ0ZXg+XG59Ijtjb25zdCBmcmFnbWVudCQ0PSIjZGVmaW5lIFRPT05cbnVuaWZvcm0gdmVjMyBkaWZmdXNlO1xudW5pZm9ybSB2ZWMzIGVtaXNzaXZlO1xudW5pZm9ybSBmbG9hdCBvcGFjaXR5O1xuI2luY2x1ZGUgPGNvbW1vbj5cbiNpbmNsdWRlIDxwYWNraW5nPlxuI2luY2x1ZGUgPGRpdGhlcmluZ19wYXJzX2ZyYWdtZW50PlxuI2luY2x1ZGUgPGNvbG9yX3BhcnNfZnJhZ21lbnQ+XG4jaW5jbHVkZSA8dXZfcGFyc19mcmFnbWVudD5cbiNpbmNsdWRlIDx1djJfcGFyc19mcmFnbWVudD5cbiNpbmNsdWRlIDxtYXBfcGFyc19mcmFnbWVudD5cbiNpbmNsdWRlIDxhbHBoYW1hcF9wYXJzX2ZyYWdtZW50PlxuI2luY2x1ZGUgPGFscGhhdGVzdF9wYXJzX2ZyYWdtZW50PlxuI2luY2x1ZGUgPGFvbWFwX3BhcnNfZnJhZ21lbnQ+XG4jaW5jbHVkZSA8bGlnaHRtYXBfcGFyc19mcmFnbWVudD5cbiNpbmNsdWRlIDxlbWlzc2l2ZW1hcF9wYXJzX2ZyYWdtZW50PlxuI2luY2x1ZGUgPGdyYWRpZW50bWFwX3BhcnNfZnJhZ21lbnQ+XG4jaW5jbHVkZSA8Zm9nX3BhcnNfZnJhZ21lbnQ+XG4jaW5jbHVkZSA8YnNkZnM+XG4jaW5jbHVkZSA8bGlnaHRzX3BhcnNfYmVnaW4+XG4jaW5jbHVkZSA8bm9ybWFsX3BhcnNfZnJhZ21lbnQ+XG4jaW5jbHVkZSA8bGlnaHRzX3Rvb25fcGFyc19mcmFnbWVudD5cbiNpbmNsdWRlIDxzaGFkb3dtYXBfcGFyc19mcmFnbWVudD5cbiNpbmNsdWRlIDxidW1wbWFwX3BhcnNfZnJhZ21lbnQ+XG4jaW5jbHVkZSA8bm9ybWFsbWFwX3BhcnNfZnJhZ21lbnQ+XG4jaW5jbHVkZSA8bG9nZGVwdGhidWZfcGFyc19mcmFnbWVudD5cbiNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfcGFyc19mcmFnbWVudD5cbnZvaWQgbWFpbigpIHtcblx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19mcmFnbWVudD5cblx0dmVjNCBkaWZmdXNlQ29sb3IgPSB2ZWM0KCBkaWZmdXNlLCBvcGFjaXR5ICk7XG5cdFJlZmxlY3RlZExpZ2h0IHJlZmxlY3RlZExpZ2h0ID0gUmVmbGVjdGVkTGlnaHQoIHZlYzMoIDAuMCApLCB2ZWMzKCAwLjAgKSwgdmVjMyggMC4wICksIHZlYzMoIDAuMCApICk7XG5cdHZlYzMgdG90YWxFbWlzc2l2ZVJhZGlhbmNlID0gZW1pc3NpdmU7XG5cdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9mcmFnbWVudD5cblx0I2luY2x1ZGUgPG1hcF9mcmFnbWVudD5cblx0I2luY2x1ZGUgPGNvbG9yX2ZyYWdtZW50PlxuXHQjaW5jbHVkZSA8YWxwaGFtYXBfZnJhZ21lbnQ+XG5cdCNpbmNsdWRlIDxhbHBoYXRlc3RfZnJhZ21lbnQ+XG5cdCNpbmNsdWRlIDxub3JtYWxfZnJhZ21lbnRfYmVnaW4+XG5cdCNpbmNsdWRlIDxub3JtYWxfZnJhZ21lbnRfbWFwcz5cblx0I2luY2x1ZGUgPGVtaXNzaXZlbWFwX2ZyYWdtZW50PlxuXHQjaW5jbHVkZSA8bGlnaHRzX3Rvb25fZnJhZ21lbnQ+XG5cdCNpbmNsdWRlIDxsaWdodHNfZnJhZ21lbnRfYmVnaW4+XG5cdCNpbmNsdWRlIDxsaWdodHNfZnJhZ21lbnRfbWFwcz5cblx0I2luY2x1ZGUgPGxpZ2h0c19mcmFnbWVudF9lbmQ+XG5cdCNpbmNsdWRlIDxhb21hcF9mcmFnbWVudD5cblx0dmVjMyBvdXRnb2luZ0xpZ2h0ID0gcmVmbGVjdGVkTGlnaHQuZGlyZWN0RGlmZnVzZSArIHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0RGlmZnVzZSArIHRvdGFsRW1pc3NpdmVSYWRpYW5jZTtcblx0I2luY2x1ZGUgPG91dHB1dF9mcmFnbWVudD5cblx0I2luY2x1ZGUgPHRvbmVtYXBwaW5nX2ZyYWdtZW50PlxuXHQjaW5jbHVkZSA8ZW5jb2RpbmdzX2ZyYWdtZW50PlxuXHQjaW5jbHVkZSA8Zm9nX2ZyYWdtZW50PlxuXHQjaW5jbHVkZSA8cHJlbXVsdGlwbGllZF9hbHBoYV9mcmFnbWVudD5cblx0I2luY2x1ZGUgPGRpdGhlcmluZ19mcmFnbWVudD5cbn0iO2NvbnN0IHZlcnRleCQzPSJ1bmlmb3JtIGZsb2F0IHNpemU7XG51bmlmb3JtIGZsb2F0IHNjYWxlO1xuI2luY2x1ZGUgPGNvbW1vbj5cbiNpbmNsdWRlIDxjb2xvcl9wYXJzX3ZlcnRleD5cbiNpbmNsdWRlIDxmb2dfcGFyc192ZXJ0ZXg+XG4jaW5jbHVkZSA8bW9ycGh0YXJnZXRfcGFyc192ZXJ0ZXg+XG4jaW5jbHVkZSA8bG9nZGVwdGhidWZfcGFyc192ZXJ0ZXg+XG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfdmVydGV4Plxudm9pZCBtYWluKCkge1xuXHQjaW5jbHVkZSA8Y29sb3JfdmVydGV4PlxuXHQjaW5jbHVkZSA8YmVnaW5fdmVydGV4PlxuXHQjaW5jbHVkZSA8bW9ycGh0YXJnZXRfdmVydGV4PlxuXHQjaW5jbHVkZSA8cHJvamVjdF92ZXJ0ZXg+XG5cdGdsX1BvaW50U2l6ZSA9IHNpemU7XG5cdCNpZmRlZiBVU0VfU0laRUFUVEVOVUFUSU9OXG5cdFx0Ym9vbCBpc1BlcnNwZWN0aXZlID0gaXNQZXJzcGVjdGl2ZU1hdHJpeCggcHJvamVjdGlvbk1hdHJpeCApO1xuXHRcdGlmICggaXNQZXJzcGVjdGl2ZSApIGdsX1BvaW50U2l6ZSAqPSAoIHNjYWxlIC8gLSBtdlBvc2l0aW9uLnogKTtcblx0I2VuZGlmXG5cdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl92ZXJ0ZXg+XG5cdCNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfdmVydGV4PlxuXHQjaW5jbHVkZSA8d29ybGRwb3NfdmVydGV4PlxuXHQjaW5jbHVkZSA8Zm9nX3ZlcnRleD5cbn0iO2NvbnN0IGZyYWdtZW50JDM9InVuaWZvcm0gdmVjMyBkaWZmdXNlO1xudW5pZm9ybSBmbG9hdCBvcGFjaXR5O1xuI2luY2x1ZGUgPGNvbW1vbj5cbiNpbmNsdWRlIDxjb2xvcl9wYXJzX2ZyYWdtZW50PlxuI2luY2x1ZGUgPG1hcF9wYXJ0aWNsZV9wYXJzX2ZyYWdtZW50PlxuI2luY2x1ZGUgPGFscGhhdGVzdF9wYXJzX2ZyYWdtZW50PlxuI2luY2x1ZGUgPGZvZ19wYXJzX2ZyYWdtZW50PlxuI2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3BhcnNfZnJhZ21lbnQ+XG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfZnJhZ21lbnQ+XG52b2lkIG1haW4oKSB7XG5cdCNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfZnJhZ21lbnQ+XG5cdHZlYzMgb3V0Z29pbmdMaWdodCA9IHZlYzMoIDAuMCApO1xuXHR2ZWM0IGRpZmZ1c2VDb2xvciA9IHZlYzQoIGRpZmZ1c2UsIG9wYWNpdHkgKTtcblx0I2luY2x1ZGUgPGxvZ2RlcHRoYnVmX2ZyYWdtZW50PlxuXHQjaW5jbHVkZSA8bWFwX3BhcnRpY2xlX2ZyYWdtZW50PlxuXHQjaW5jbHVkZSA8Y29sb3JfZnJhZ21lbnQ+XG5cdCNpbmNsdWRlIDxhbHBoYXRlc3RfZnJhZ21lbnQ+XG5cdG91dGdvaW5nTGlnaHQgPSBkaWZmdXNlQ29sb3IucmdiO1xuXHQjaW5jbHVkZSA8b3V0cHV0X2ZyYWdtZW50PlxuXHQjaW5jbHVkZSA8dG9uZW1hcHBpbmdfZnJhZ21lbnQ+XG5cdCNpbmNsdWRlIDxlbmNvZGluZ3NfZnJhZ21lbnQ+XG5cdCNpbmNsdWRlIDxmb2dfZnJhZ21lbnQ+XG5cdCNpbmNsdWRlIDxwcmVtdWx0aXBsaWVkX2FscGhhX2ZyYWdtZW50PlxufSI7Y29uc3QgdmVydGV4JDI9IiNpbmNsdWRlIDxjb21tb24+XG4jaW5jbHVkZSA8Zm9nX3BhcnNfdmVydGV4PlxuI2luY2x1ZGUgPG1vcnBodGFyZ2V0X3BhcnNfdmVydGV4PlxuI2luY2x1ZGUgPHNraW5uaW5nX3BhcnNfdmVydGV4PlxuI2luY2x1ZGUgPHNoYWRvd21hcF9wYXJzX3ZlcnRleD5cbnZvaWQgbWFpbigpIHtcblx0I2luY2x1ZGUgPGJlZ2lubm9ybWFsX3ZlcnRleD5cblx0I2luY2x1ZGUgPG1vcnBobm9ybWFsX3ZlcnRleD5cblx0I2luY2x1ZGUgPHNraW5iYXNlX3ZlcnRleD5cblx0I2luY2x1ZGUgPHNraW5ub3JtYWxfdmVydGV4PlxuXHQjaW5jbHVkZSA8ZGVmYXVsdG5vcm1hbF92ZXJ0ZXg+XG5cdCNpbmNsdWRlIDxiZWdpbl92ZXJ0ZXg+XG5cdCNpbmNsdWRlIDxtb3JwaHRhcmdldF92ZXJ0ZXg+XG5cdCNpbmNsdWRlIDxza2lubmluZ192ZXJ0ZXg+XG5cdCNpbmNsdWRlIDxwcm9qZWN0X3ZlcnRleD5cblx0I2luY2x1ZGUgPHdvcmxkcG9zX3ZlcnRleD5cblx0I2luY2x1ZGUgPHNoYWRvd21hcF92ZXJ0ZXg+XG5cdCNpbmNsdWRlIDxmb2dfdmVydGV4PlxufSI7Y29uc3QgZnJhZ21lbnQkMj0idW5pZm9ybSB2ZWMzIGNvbG9yO1xudW5pZm9ybSBmbG9hdCBvcGFjaXR5O1xuI2luY2x1ZGUgPGNvbW1vbj5cbiNpbmNsdWRlIDxwYWNraW5nPlxuI2luY2x1ZGUgPGZvZ19wYXJzX2ZyYWdtZW50PlxuI2luY2x1ZGUgPGJzZGZzPlxuI2luY2x1ZGUgPGxpZ2h0c19wYXJzX2JlZ2luPlxuI2luY2x1ZGUgPHNoYWRvd21hcF9wYXJzX2ZyYWdtZW50PlxuI2luY2x1ZGUgPHNoYWRvd21hc2tfcGFyc19mcmFnbWVudD5cbnZvaWQgbWFpbigpIHtcblx0Z2xfRnJhZ0NvbG9yID0gdmVjNCggY29sb3IsIG9wYWNpdHkgKiAoIDEuMCAtIGdldFNoYWRvd01hc2soKSApICk7XG5cdCNpbmNsdWRlIDx0b25lbWFwcGluZ19mcmFnbWVudD5cblx0I2luY2x1ZGUgPGVuY29kaW5nc19mcmFnbWVudD5cblx0I2luY2x1ZGUgPGZvZ19mcmFnbWVudD5cbn0iO2NvbnN0IHZlcnRleCQxPSJ1bmlmb3JtIGZsb2F0IHJvdGF0aW9uO1xudW5pZm9ybSB2ZWMyIGNlbnRlcjtcbiNpbmNsdWRlIDxjb21tb24+XG4jaW5jbHVkZSA8dXZfcGFyc192ZXJ0ZXg+XG4jaW5jbHVkZSA8Zm9nX3BhcnNfdmVydGV4PlxuI2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3BhcnNfdmVydGV4PlxuI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19wYXJzX3ZlcnRleD5cbnZvaWQgbWFpbigpIHtcblx0I2luY2x1ZGUgPHV2X3ZlcnRleD5cblx0dmVjNCBtdlBvc2l0aW9uID0gbW9kZWxWaWV3TWF0cml4ICogdmVjNCggMC4wLCAwLjAsIDAuMCwgMS4wICk7XG5cdHZlYzIgc2NhbGU7XG5cdHNjYWxlLnggPSBsZW5ndGgoIHZlYzMoIG1vZGVsTWF0cml4WyAwIF0ueCwgbW9kZWxNYXRyaXhbIDAgXS55LCBtb2RlbE1hdHJpeFsgMCBdLnogKSApO1xuXHRzY2FsZS55ID0gbGVuZ3RoKCB2ZWMzKCBtb2RlbE1hdHJpeFsgMSBdLngsIG1vZGVsTWF0cml4WyAxIF0ueSwgbW9kZWxNYXRyaXhbIDEgXS56ICkgKTtcblx0I2lmbmRlZiBVU0VfU0laRUFUVEVOVUFUSU9OXG5cdFx0Ym9vbCBpc1BlcnNwZWN0aXZlID0gaXNQZXJzcGVjdGl2ZU1hdHJpeCggcHJvamVjdGlvbk1hdHJpeCApO1xuXHRcdGlmICggaXNQZXJzcGVjdGl2ZSApIHNjYWxlICo9IC0gbXZQb3NpdGlvbi56O1xuXHQjZW5kaWZcblx0dmVjMiBhbGlnbmVkUG9zaXRpb24gPSAoIHBvc2l0aW9uLnh5IC0gKCBjZW50ZXIgLSB2ZWMyKCAwLjUgKSApICkgKiBzY2FsZTtcblx0dmVjMiByb3RhdGVkUG9zaXRpb247XG5cdHJvdGF0ZWRQb3NpdGlvbi54ID0gY29zKCByb3RhdGlvbiApICogYWxpZ25lZFBvc2l0aW9uLnggLSBzaW4oIHJvdGF0aW9uICkgKiBhbGlnbmVkUG9zaXRpb24ueTtcblx0cm90YXRlZFBvc2l0aW9uLnkgPSBzaW4oIHJvdGF0aW9uICkgKiBhbGlnbmVkUG9zaXRpb24ueCArIGNvcyggcm90YXRpb24gKSAqIGFsaWduZWRQb3NpdGlvbi55O1xuXHRtdlBvc2l0aW9uLnh5ICs9IHJvdGF0ZWRQb3NpdGlvbjtcblx0Z2xfUG9zaXRpb24gPSBwcm9qZWN0aW9uTWF0cml4ICogbXZQb3NpdGlvbjtcblx0I2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3ZlcnRleD5cblx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc192ZXJ0ZXg+XG5cdCNpbmNsdWRlIDxmb2dfdmVydGV4PlxufSI7Y29uc3QgZnJhZ21lbnQkMT0idW5pZm9ybSB2ZWMzIGRpZmZ1c2U7XG51bmlmb3JtIGZsb2F0IG9wYWNpdHk7XG4jaW5jbHVkZSA8Y29tbW9uPlxuI2luY2x1ZGUgPHV2X3BhcnNfZnJhZ21lbnQ+XG4jaW5jbHVkZSA8bWFwX3BhcnNfZnJhZ21lbnQ+XG4jaW5jbHVkZSA8YWxwaGFtYXBfcGFyc19mcmFnbWVudD5cbiNpbmNsdWRlIDxhbHBoYXRlc3RfcGFyc19mcmFnbWVudD5cbiNpbmNsdWRlIDxmb2dfcGFyc19mcmFnbWVudD5cbiNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9wYXJzX2ZyYWdtZW50PlxuI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19wYXJzX2ZyYWdtZW50Plxudm9pZCBtYWluKCkge1xuXHQjaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX2ZyYWdtZW50PlxuXHR2ZWMzIG91dGdvaW5nTGlnaHQgPSB2ZWMzKCAwLjAgKTtcblx0dmVjNCBkaWZmdXNlQ29sb3IgPSB2ZWM0KCBkaWZmdXNlLCBvcGFjaXR5ICk7XG5cdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9mcmFnbWVudD5cblx0I2luY2x1ZGUgPG1hcF9mcmFnbWVudD5cblx0I2luY2x1ZGUgPGFscGhhbWFwX2ZyYWdtZW50PlxuXHQjaW5jbHVkZSA8YWxwaGF0ZXN0X2ZyYWdtZW50PlxuXHRvdXRnb2luZ0xpZ2h0ID0gZGlmZnVzZUNvbG9yLnJnYjtcblx0I2luY2x1ZGUgPG91dHB1dF9mcmFnbWVudD5cblx0I2luY2x1ZGUgPHRvbmVtYXBwaW5nX2ZyYWdtZW50PlxuXHQjaW5jbHVkZSA8ZW5jb2RpbmdzX2ZyYWdtZW50PlxuXHQjaW5jbHVkZSA8Zm9nX2ZyYWdtZW50PlxufSI7Y29uc3QgU2hhZGVyQ2h1bms9e2FscGhhbWFwX2ZyYWdtZW50OmFscGhhbWFwX2ZyYWdtZW50LGFscGhhbWFwX3BhcnNfZnJhZ21lbnQ6YWxwaGFtYXBfcGFyc19mcmFnbWVudCxhbHBoYXRlc3RfZnJhZ21lbnQ6YWxwaGF0ZXN0X2ZyYWdtZW50LGFscGhhdGVzdF9wYXJzX2ZyYWdtZW50OmFscGhhdGVzdF9wYXJzX2ZyYWdtZW50LGFvbWFwX2ZyYWdtZW50OmFvbWFwX2ZyYWdtZW50LGFvbWFwX3BhcnNfZnJhZ21lbnQ6YW9tYXBfcGFyc19mcmFnbWVudCxiZWdpbl92ZXJ0ZXg6YmVnaW5fdmVydGV4LGJlZ2lubm9ybWFsX3ZlcnRleDpiZWdpbm5vcm1hbF92ZXJ0ZXgsYnNkZnM6YnNkZnMsYnVtcG1hcF9wYXJzX2ZyYWdtZW50OmJ1bXBtYXBfcGFyc19mcmFnbWVudCxjbGlwcGluZ19wbGFuZXNfZnJhZ21lbnQ6Y2xpcHBpbmdfcGxhbmVzX2ZyYWdtZW50LGNsaXBwaW5nX3BsYW5lc19wYXJzX2ZyYWdtZW50OmNsaXBwaW5nX3BsYW5lc19wYXJzX2ZyYWdtZW50LGNsaXBwaW5nX3BsYW5lc19wYXJzX3ZlcnRleDpjbGlwcGluZ19wbGFuZXNfcGFyc192ZXJ0ZXgsY2xpcHBpbmdfcGxhbmVzX3ZlcnRleDpjbGlwcGluZ19wbGFuZXNfdmVydGV4LGNvbG9yX2ZyYWdtZW50OmNvbG9yX2ZyYWdtZW50LGNvbG9yX3BhcnNfZnJhZ21lbnQ6Y29sb3JfcGFyc19mcmFnbWVudCxjb2xvcl9wYXJzX3ZlcnRleDpjb2xvcl9wYXJzX3ZlcnRleCxjb2xvcl92ZXJ0ZXg6Y29sb3JfdmVydGV4LGNvbW1vbjpjb21tb24sY3ViZV91dl9yZWZsZWN0aW9uX2ZyYWdtZW50OmN1YmVfdXZfcmVmbGVjdGlvbl9mcmFnbWVudCxkZWZhdWx0bm9ybWFsX3ZlcnRleDpkZWZhdWx0bm9ybWFsX3ZlcnRleCxkaXNwbGFjZW1lbnRtYXBfcGFyc192ZXJ0ZXg6ZGlzcGxhY2VtZW50bWFwX3BhcnNfdmVydGV4LGRpc3BsYWNlbWVudG1hcF92ZXJ0ZXg6ZGlzcGxhY2VtZW50bWFwX3ZlcnRleCxlbWlzc2l2ZW1hcF9mcmFnbWVudDplbWlzc2l2ZW1hcF9mcmFnbWVudCxlbWlzc2l2ZW1hcF9wYXJzX2ZyYWdtZW50OmVtaXNzaXZlbWFwX3BhcnNfZnJhZ21lbnQsZW5jb2RpbmdzX2ZyYWdtZW50OmVuY29kaW5nc19mcmFnbWVudCxlbmNvZGluZ3NfcGFyc19mcmFnbWVudDplbmNvZGluZ3NfcGFyc19mcmFnbWVudCxlbnZtYXBfZnJhZ21lbnQ6ZW52bWFwX2ZyYWdtZW50LGVudm1hcF9jb21tb25fcGFyc19mcmFnbWVudDplbnZtYXBfY29tbW9uX3BhcnNfZnJhZ21lbnQsZW52bWFwX3BhcnNfZnJhZ21lbnQ6ZW52bWFwX3BhcnNfZnJhZ21lbnQsZW52bWFwX3BhcnNfdmVydGV4OmVudm1hcF9wYXJzX3ZlcnRleCxlbnZtYXBfcGh5c2ljYWxfcGFyc19mcmFnbWVudDplbnZtYXBfcGh5c2ljYWxfcGFyc19mcmFnbWVudCxlbnZtYXBfdmVydGV4OmVudm1hcF92ZXJ0ZXgsZm9nX3ZlcnRleDpmb2dfdmVydGV4LGZvZ19wYXJzX3ZlcnRleDpmb2dfcGFyc192ZXJ0ZXgsZm9nX2ZyYWdtZW50OmZvZ19mcmFnbWVudCxmb2dfcGFyc19mcmFnbWVudDpmb2dfcGFyc19mcmFnbWVudCxncmFkaWVudG1hcF9wYXJzX2ZyYWdtZW50OmdyYWRpZW50bWFwX3BhcnNfZnJhZ21lbnQsbGlnaHRtYXBfZnJhZ21lbnQ6bGlnaHRtYXBfZnJhZ21lbnQsbGlnaHRtYXBfcGFyc19mcmFnbWVudDpsaWdodG1hcF9wYXJzX2ZyYWdtZW50LGxpZ2h0c19sYW1iZXJ0X3ZlcnRleDpsaWdodHNfbGFtYmVydF92ZXJ0ZXgsbGlnaHRzX3BhcnNfYmVnaW46bGlnaHRzX3BhcnNfYmVnaW4sbGlnaHRzX3Rvb25fZnJhZ21lbnQ6bGlnaHRzX3Rvb25fZnJhZ21lbnQsbGlnaHRzX3Rvb25fcGFyc19mcmFnbWVudDpsaWdodHNfdG9vbl9wYXJzX2ZyYWdtZW50LGxpZ2h0c19waG9uZ19mcmFnbWVudDpsaWdodHNfcGhvbmdfZnJhZ21lbnQsbGlnaHRzX3Bob25nX3BhcnNfZnJhZ21lbnQ6bGlnaHRzX3Bob25nX3BhcnNfZnJhZ21lbnQsbGlnaHRzX3BoeXNpY2FsX2ZyYWdtZW50OmxpZ2h0c19waHlzaWNhbF9mcmFnbWVudCxsaWdodHNfcGh5c2ljYWxfcGFyc19mcmFnbWVudDpsaWdodHNfcGh5c2ljYWxfcGFyc19mcmFnbWVudCxsaWdodHNfZnJhZ21lbnRfYmVnaW46bGlnaHRzX2ZyYWdtZW50X2JlZ2luLGxpZ2h0c19mcmFnbWVudF9tYXBzOmxpZ2h0c19mcmFnbWVudF9tYXBzLGxpZ2h0c19mcmFnbWVudF9lbmQ6bGlnaHRzX2ZyYWdtZW50X2VuZCxsb2dkZXB0aGJ1Zl9mcmFnbWVudDpsb2dkZXB0aGJ1Zl9mcmFnbWVudCxsb2dkZXB0aGJ1Zl9wYXJzX2ZyYWdtZW50OmxvZ2RlcHRoYnVmX3BhcnNfZnJhZ21lbnQsbG9nZGVwdGhidWZfcGFyc192ZXJ0ZXg6bG9nZGVwdGhidWZfcGFyc192ZXJ0ZXgsbG9nZGVwdGhidWZfdmVydGV4OmxvZ2RlcHRoYnVmX3ZlcnRleCxtYXBfZnJhZ21lbnQ6bWFwX2ZyYWdtZW50LG1hcF9wYXJzX2ZyYWdtZW50Om1hcF9wYXJzX2ZyYWdtZW50LG1hcF9wYXJ0aWNsZV9mcmFnbWVudDptYXBfcGFydGljbGVfZnJhZ21lbnQsbWFwX3BhcnRpY2xlX3BhcnNfZnJhZ21lbnQ6bWFwX3BhcnRpY2xlX3BhcnNfZnJhZ21lbnQsbWV0YWxuZXNzbWFwX2ZyYWdtZW50Om1ldGFsbmVzc21hcF9mcmFnbWVudCxtZXRhbG5lc3NtYXBfcGFyc19mcmFnbWVudDptZXRhbG5lc3NtYXBfcGFyc19mcmFnbWVudCxtb3JwaG5vcm1hbF92ZXJ0ZXg6bW9ycGhub3JtYWxfdmVydGV4LG1vcnBodGFyZ2V0X3BhcnNfdmVydGV4Om1vcnBodGFyZ2V0X3BhcnNfdmVydGV4LG1vcnBodGFyZ2V0X3ZlcnRleDptb3JwaHRhcmdldF92ZXJ0ZXgsbm9ybWFsX2ZyYWdtZW50X2JlZ2luOm5vcm1hbF9mcmFnbWVudF9iZWdpbixub3JtYWxfZnJhZ21lbnRfbWFwczpub3JtYWxfZnJhZ21lbnRfbWFwcyxub3JtYWxfcGFyc19mcmFnbWVudDpub3JtYWxfcGFyc19mcmFnbWVudCxub3JtYWxfcGFyc192ZXJ0ZXg6bm9ybWFsX3BhcnNfdmVydGV4LG5vcm1hbF92ZXJ0ZXg6bm9ybWFsX3ZlcnRleCxub3JtYWxtYXBfcGFyc19mcmFnbWVudDpub3JtYWxtYXBfcGFyc19mcmFnbWVudCxjbGVhcmNvYXRfbm9ybWFsX2ZyYWdtZW50X2JlZ2luOmNsZWFyY29hdF9ub3JtYWxfZnJhZ21lbnRfYmVnaW4sY2xlYXJjb2F0X25vcm1hbF9mcmFnbWVudF9tYXBzOmNsZWFyY29hdF9ub3JtYWxfZnJhZ21lbnRfbWFwcyxjbGVhcmNvYXRfcGFyc19mcmFnbWVudDpjbGVhcmNvYXRfcGFyc19mcmFnbWVudCxvdXRwdXRfZnJhZ21lbnQ6b3V0cHV0X2ZyYWdtZW50LHBhY2tpbmc6cGFja2luZyxwcmVtdWx0aXBsaWVkX2FscGhhX2ZyYWdtZW50OnByZW11bHRpcGxpZWRfYWxwaGFfZnJhZ21lbnQscHJvamVjdF92ZXJ0ZXg6cHJvamVjdF92ZXJ0ZXgsZGl0aGVyaW5nX2ZyYWdtZW50OmRpdGhlcmluZ19mcmFnbWVudCxkaXRoZXJpbmdfcGFyc19mcmFnbWVudDpkaXRoZXJpbmdfcGFyc19mcmFnbWVudCxyb3VnaG5lc3NtYXBfZnJhZ21lbnQ6cm91Z2huZXNzbWFwX2ZyYWdtZW50LHJvdWdobmVzc21hcF9wYXJzX2ZyYWdtZW50OnJvdWdobmVzc21hcF9wYXJzX2ZyYWdtZW50LHNoYWRvd21hcF9wYXJzX2ZyYWdtZW50OnNoYWRvd21hcF9wYXJzX2ZyYWdtZW50LHNoYWRvd21hcF9wYXJzX3ZlcnRleDpzaGFkb3dtYXBfcGFyc192ZXJ0ZXgsc2hhZG93bWFwX3ZlcnRleDpzaGFkb3dtYXBfdmVydGV4LHNoYWRvd21hc2tfcGFyc19mcmFnbWVudDpzaGFkb3dtYXNrX3BhcnNfZnJhZ21lbnQsc2tpbmJhc2VfdmVydGV4OnNraW5iYXNlX3ZlcnRleCxza2lubmluZ19wYXJzX3ZlcnRleDpza2lubmluZ19wYXJzX3ZlcnRleCxza2lubmluZ192ZXJ0ZXg6c2tpbm5pbmdfdmVydGV4LHNraW5ub3JtYWxfdmVydGV4OnNraW5ub3JtYWxfdmVydGV4LHNwZWN1bGFybWFwX2ZyYWdtZW50OnNwZWN1bGFybWFwX2ZyYWdtZW50LHNwZWN1bGFybWFwX3BhcnNfZnJhZ21lbnQ6c3BlY3VsYXJtYXBfcGFyc19mcmFnbWVudCx0b25lbWFwcGluZ19mcmFnbWVudDp0b25lbWFwcGluZ19mcmFnbWVudCx0b25lbWFwcGluZ19wYXJzX2ZyYWdtZW50OnRvbmVtYXBwaW5nX3BhcnNfZnJhZ21lbnQsdHJhbnNtaXNzaW9uX2ZyYWdtZW50OnRyYW5zbWlzc2lvbl9mcmFnbWVudCx0cmFuc21pc3Npb25fcGFyc19mcmFnbWVudDp0cmFuc21pc3Npb25fcGFyc19mcmFnbWVudCx1dl9wYXJzX2ZyYWdtZW50OnV2X3BhcnNfZnJhZ21lbnQsdXZfcGFyc192ZXJ0ZXg6dXZfcGFyc192ZXJ0ZXgsdXZfdmVydGV4OnV2X3ZlcnRleCx1djJfcGFyc19mcmFnbWVudDp1djJfcGFyc19mcmFnbWVudCx1djJfcGFyc192ZXJ0ZXg6dXYyX3BhcnNfdmVydGV4LHV2Ml92ZXJ0ZXg6dXYyX3ZlcnRleCx3b3JsZHBvc192ZXJ0ZXg6d29ybGRwb3NfdmVydGV4LGJhY2tncm91bmRfdmVydDp2ZXJ0ZXgkZyxiYWNrZ3JvdW5kX2ZyYWc6ZnJhZ21lbnQkZyxjdWJlX3ZlcnQ6dmVydGV4JGYsY3ViZV9mcmFnOmZyYWdtZW50JGYsZGVwdGhfdmVydDp2ZXJ0ZXgkZSxkZXB0aF9mcmFnOmZyYWdtZW50JGUsZGlzdGFuY2VSR0JBX3ZlcnQ6dmVydGV4JGQsZGlzdGFuY2VSR0JBX2ZyYWc6ZnJhZ21lbnQkZCxlcXVpcmVjdF92ZXJ0OnZlcnRleCRjLGVxdWlyZWN0X2ZyYWc6ZnJhZ21lbnQkYyxsaW5lZGFzaGVkX3ZlcnQ6dmVydGV4JGIsbGluZWRhc2hlZF9mcmFnOmZyYWdtZW50JGIsbWVzaGJhc2ljX3ZlcnQ6dmVydGV4JGEsbWVzaGJhc2ljX2ZyYWc6ZnJhZ21lbnQkYSxtZXNobGFtYmVydF92ZXJ0OnZlcnRleCQ5LG1lc2hsYW1iZXJ0X2ZyYWc6ZnJhZ21lbnQkOSxtZXNobWF0Y2FwX3ZlcnQ6dmVydGV4JDgsbWVzaG1hdGNhcF9mcmFnOmZyYWdtZW50JDgsbWVzaG5vcm1hbF92ZXJ0OnZlcnRleCQ3LG1lc2hub3JtYWxfZnJhZzpmcmFnbWVudCQ3LG1lc2hwaG9uZ192ZXJ0OnZlcnRleCQ2LG1lc2hwaG9uZ19mcmFnOmZyYWdtZW50JDYsbWVzaHBoeXNpY2FsX3ZlcnQ6dmVydGV4JDUsbWVzaHBoeXNpY2FsX2ZyYWc6ZnJhZ21lbnQkNSxtZXNodG9vbl92ZXJ0OnZlcnRleCQ0LG1lc2h0b29uX2ZyYWc6ZnJhZ21lbnQkNCxwb2ludHNfdmVydDp2ZXJ0ZXgkMyxwb2ludHNfZnJhZzpmcmFnbWVudCQzLHNoYWRvd192ZXJ0OnZlcnRleCQyLHNoYWRvd19mcmFnOmZyYWdtZW50JDIsc3ByaXRlX3ZlcnQ6dmVydGV4JDEsc3ByaXRlX2ZyYWc6ZnJhZ21lbnQkMX07LyoqCgkgKiBVbmlmb3JtcyBsaWJyYXJ5IGZvciBzaGFyZWQgd2ViZ2wgc2hhZGVycwoJICovY29uc3QgVW5pZm9ybXNMaWI9e2NvbW1vbjp7ZGlmZnVzZTp7dmFsdWU6bmV3IENvbG9yKDB4ZmZmZmZmKX0sb3BhY2l0eTp7dmFsdWU6MS4wfSxtYXA6e3ZhbHVlOm51bGx9LHV2VHJhbnNmb3JtOnt2YWx1ZTpuZXcgTWF0cml4MygpfSx1djJUcmFuc2Zvcm06e3ZhbHVlOm5ldyBNYXRyaXgzKCl9LGFscGhhTWFwOnt2YWx1ZTpudWxsfSxhbHBoYVRlc3Q6e3ZhbHVlOjB9fSxzcGVjdWxhcm1hcDp7c3BlY3VsYXJNYXA6e3ZhbHVlOm51bGx9fSxlbnZtYXA6e2Vudk1hcDp7dmFsdWU6bnVsbH0sZmxpcEVudk1hcDp7dmFsdWU6LTF9LHJlZmxlY3Rpdml0eTp7dmFsdWU6MS4wfSwvLyBiYXNpYywgbGFtYmVydCwgcGhvbmcKCWlvcjp7dmFsdWU6MS41fSwvLyBzdGFuZGFyZCwgcGh5c2ljYWwKCXJlZnJhY3Rpb25SYXRpbzp7dmFsdWU6MC45OH19LGFvbWFwOnthb01hcDp7dmFsdWU6bnVsbH0sYW9NYXBJbnRlbnNpdHk6e3ZhbHVlOjF9fSxsaWdodG1hcDp7bGlnaHRNYXA6e3ZhbHVlOm51bGx9LGxpZ2h0TWFwSW50ZW5zaXR5Ont2YWx1ZToxfX0sZW1pc3NpdmVtYXA6e2VtaXNzaXZlTWFwOnt2YWx1ZTpudWxsfX0sYnVtcG1hcDp7YnVtcE1hcDp7dmFsdWU6bnVsbH0sYnVtcFNjYWxlOnt2YWx1ZToxfX0sbm9ybWFsbWFwOntub3JtYWxNYXA6e3ZhbHVlOm51bGx9LG5vcm1hbFNjYWxlOnt2YWx1ZTpuZXcgVmVjdG9yMigxLDEpfX0sZGlzcGxhY2VtZW50bWFwOntkaXNwbGFjZW1lbnRNYXA6e3ZhbHVlOm51bGx9LGRpc3BsYWNlbWVudFNjYWxlOnt2YWx1ZToxfSxkaXNwbGFjZW1lbnRCaWFzOnt2YWx1ZTowfX0scm91Z2huZXNzbWFwOntyb3VnaG5lc3NNYXA6e3ZhbHVlOm51bGx9fSxtZXRhbG5lc3NtYXA6e21ldGFsbmVzc01hcDp7dmFsdWU6bnVsbH19LGdyYWRpZW50bWFwOntncmFkaWVudE1hcDp7dmFsdWU6bnVsbH19LGZvZzp7Zm9nRGVuc2l0eTp7dmFsdWU6MC4wMDAyNX0sZm9nTmVhcjp7dmFsdWU6MX0sZm9nRmFyOnt2YWx1ZToyMDAwfSxmb2dDb2xvcjp7dmFsdWU6bmV3IENvbG9yKDB4ZmZmZmZmKX19LGxpZ2h0czp7YW1iaWVudExpZ2h0Q29sb3I6e3ZhbHVlOltdfSxsaWdodFByb2JlOnt2YWx1ZTpbXX0sZGlyZWN0aW9uYWxMaWdodHM6e3ZhbHVlOltdLHByb3BlcnRpZXM6e2RpcmVjdGlvbjp7fSxjb2xvcjp7fX19LGRpcmVjdGlvbmFsTGlnaHRTaGFkb3dzOnt2YWx1ZTpbXSxwcm9wZXJ0aWVzOntzaGFkb3dCaWFzOnt9LHNoYWRvd05vcm1hbEJpYXM6e30sc2hhZG93UmFkaXVzOnt9LHNoYWRvd01hcFNpemU6e319fSxkaXJlY3Rpb25hbFNoYWRvd01hcDp7dmFsdWU6W119LGRpcmVjdGlvbmFsU2hhZG93TWF0cml4Ont2YWx1ZTpbXX0sc3BvdExpZ2h0czp7dmFsdWU6W10scHJvcGVydGllczp7Y29sb3I6e30scG9zaXRpb246e30sZGlyZWN0aW9uOnt9LGRpc3RhbmNlOnt9LGNvbmVDb3M6e30scGVudW1icmFDb3M6e30sZGVjYXk6e319fSxzcG90TGlnaHRTaGFkb3dzOnt2YWx1ZTpbXSxwcm9wZXJ0aWVzOntzaGFkb3dCaWFzOnt9LHNoYWRvd05vcm1hbEJpYXM6e30sc2hhZG93UmFkaXVzOnt9LHNoYWRvd01hcFNpemU6e319fSxzcG90U2hhZG93TWFwOnt2YWx1ZTpbXX0sc3BvdFNoYWRvd01hdHJpeDp7dmFsdWU6W119LHBvaW50TGlnaHRzOnt2YWx1ZTpbXSxwcm9wZXJ0aWVzOntjb2xvcjp7fSxwb3NpdGlvbjp7fSxkZWNheTp7fSxkaXN0YW5jZTp7fX19LHBvaW50TGlnaHRTaGFkb3dzOnt2YWx1ZTpbXSxwcm9wZXJ0aWVzOntzaGFkb3dCaWFzOnt9LHNoYWRvd05vcm1hbEJpYXM6e30sc2hhZG93UmFkaXVzOnt9LHNoYWRvd01hcFNpemU6e30sc2hhZG93Q2FtZXJhTmVhcjp7fSxzaGFkb3dDYW1lcmFGYXI6e319fSxwb2ludFNoYWRvd01hcDp7dmFsdWU6W119LHBvaW50U2hhZG93TWF0cml4Ont2YWx1ZTpbXX0saGVtaXNwaGVyZUxpZ2h0czp7dmFsdWU6W10scHJvcGVydGllczp7ZGlyZWN0aW9uOnt9LHNreUNvbG9yOnt9LGdyb3VuZENvbG9yOnt9fX0sLy8gVE9ETyAoYWJlbG5hdGlvbik6IFJlY3RBcmVhTGlnaHQgQlJERiBkYXRhIG5lZWRzIHRvIGJlIG1vdmVkIGZyb20gZXhhbXBsZSB0byBtYWluIHNyYwoJcmVjdEFyZWFMaWdodHM6e3ZhbHVlOltdLHByb3BlcnRpZXM6e2NvbG9yOnt9LHBvc2l0aW9uOnt9LHdpZHRoOnt9LGhlaWdodDp7fX19LGx0Y18xOnt2YWx1ZTpudWxsfSxsdGNfMjp7dmFsdWU6bnVsbH19LHBvaW50czp7ZGlmZnVzZTp7dmFsdWU6bmV3IENvbG9yKDB4ZmZmZmZmKX0sb3BhY2l0eTp7dmFsdWU6MS4wfSxzaXplOnt2YWx1ZToxLjB9LHNjYWxlOnt2YWx1ZToxLjB9LG1hcDp7dmFsdWU6bnVsbH0sYWxwaGFNYXA6e3ZhbHVlOm51bGx9LGFscGhhVGVzdDp7dmFsdWU6MH0sdXZUcmFuc2Zvcm06e3ZhbHVlOm5ldyBNYXRyaXgzKCl9fSxzcHJpdGU6e2RpZmZ1c2U6e3ZhbHVlOm5ldyBDb2xvcigweGZmZmZmZil9LG9wYWNpdHk6e3ZhbHVlOjEuMH0sY2VudGVyOnt2YWx1ZTpuZXcgVmVjdG9yMigwLjUsMC41KX0scm90YXRpb246e3ZhbHVlOjAuMH0sbWFwOnt2YWx1ZTpudWxsfSxhbHBoYU1hcDp7dmFsdWU6bnVsbH0sYWxwaGFUZXN0Ont2YWx1ZTowfSx1dlRyYW5zZm9ybTp7dmFsdWU6bmV3IE1hdHJpeDMoKX19fTtjb25zdCBTaGFkZXJMaWI9e2Jhc2ljOnt1bmlmb3JtczptZXJnZVVuaWZvcm1zKFtVbmlmb3Jtc0xpYi5jb21tb24sVW5pZm9ybXNMaWIuc3BlY3VsYXJtYXAsVW5pZm9ybXNMaWIuZW52bWFwLFVuaWZvcm1zTGliLmFvbWFwLFVuaWZvcm1zTGliLmxpZ2h0bWFwLFVuaWZvcm1zTGliLmZvZ10pLHZlcnRleFNoYWRlcjpTaGFkZXJDaHVuay5tZXNoYmFzaWNfdmVydCxmcmFnbWVudFNoYWRlcjpTaGFkZXJDaHVuay5tZXNoYmFzaWNfZnJhZ30sbGFtYmVydDp7dW5pZm9ybXM6bWVyZ2VVbmlmb3JtcyhbVW5pZm9ybXNMaWIuY29tbW9uLFVuaWZvcm1zTGliLnNwZWN1bGFybWFwLFVuaWZvcm1zTGliLmVudm1hcCxVbmlmb3Jtc0xpYi5hb21hcCxVbmlmb3Jtc0xpYi5saWdodG1hcCxVbmlmb3Jtc0xpYi5lbWlzc2l2ZW1hcCxVbmlmb3Jtc0xpYi5mb2csVW5pZm9ybXNMaWIubGlnaHRzLHtlbWlzc2l2ZTp7dmFsdWU6bmV3IENvbG9yKDB4MDAwMDAwKX19XSksdmVydGV4U2hhZGVyOlNoYWRlckNodW5rLm1lc2hsYW1iZXJ0X3ZlcnQsZnJhZ21lbnRTaGFkZXI6U2hhZGVyQ2h1bmsubWVzaGxhbWJlcnRfZnJhZ30scGhvbmc6e3VuaWZvcm1zOm1lcmdlVW5pZm9ybXMoW1VuaWZvcm1zTGliLmNvbW1vbixVbmlmb3Jtc0xpYi5zcGVjdWxhcm1hcCxVbmlmb3Jtc0xpYi5lbnZtYXAsVW5pZm9ybXNMaWIuYW9tYXAsVW5pZm9ybXNMaWIubGlnaHRtYXAsVW5pZm9ybXNMaWIuZW1pc3NpdmVtYXAsVW5pZm9ybXNMaWIuYnVtcG1hcCxVbmlmb3Jtc0xpYi5ub3JtYWxtYXAsVW5pZm9ybXNMaWIuZGlzcGxhY2VtZW50bWFwLFVuaWZvcm1zTGliLmZvZyxVbmlmb3Jtc0xpYi5saWdodHMse2VtaXNzaXZlOnt2YWx1ZTpuZXcgQ29sb3IoMHgwMDAwMDApfSxzcGVjdWxhcjp7dmFsdWU6bmV3IENvbG9yKDB4MTExMTExKX0sc2hpbmluZXNzOnt2YWx1ZTozMH19XSksdmVydGV4U2hhZGVyOlNoYWRlckNodW5rLm1lc2hwaG9uZ192ZXJ0LGZyYWdtZW50U2hhZGVyOlNoYWRlckNodW5rLm1lc2hwaG9uZ19mcmFnfSxzdGFuZGFyZDp7dW5pZm9ybXM6bWVyZ2VVbmlmb3JtcyhbVW5pZm9ybXNMaWIuY29tbW9uLFVuaWZvcm1zTGliLmVudm1hcCxVbmlmb3Jtc0xpYi5hb21hcCxVbmlmb3Jtc0xpYi5saWdodG1hcCxVbmlmb3Jtc0xpYi5lbWlzc2l2ZW1hcCxVbmlmb3Jtc0xpYi5idW1wbWFwLFVuaWZvcm1zTGliLm5vcm1hbG1hcCxVbmlmb3Jtc0xpYi5kaXNwbGFjZW1lbnRtYXAsVW5pZm9ybXNMaWIucm91Z2huZXNzbWFwLFVuaWZvcm1zTGliLm1ldGFsbmVzc21hcCxVbmlmb3Jtc0xpYi5mb2csVW5pZm9ybXNMaWIubGlnaHRzLHtlbWlzc2l2ZTp7dmFsdWU6bmV3IENvbG9yKDB4MDAwMDAwKX0scm91Z2huZXNzOnt2YWx1ZToxLjB9LG1ldGFsbmVzczp7dmFsdWU6MC4wfSxlbnZNYXBJbnRlbnNpdHk6e3ZhbHVlOjF9Ly8gdGVtcG9yYXJ5Cgl9XSksdmVydGV4U2hhZGVyOlNoYWRlckNodW5rLm1lc2hwaHlzaWNhbF92ZXJ0LGZyYWdtZW50U2hhZGVyOlNoYWRlckNodW5rLm1lc2hwaHlzaWNhbF9mcmFnfSx0b29uOnt1bmlmb3JtczptZXJnZVVuaWZvcm1zKFtVbmlmb3Jtc0xpYi5jb21tb24sVW5pZm9ybXNMaWIuYW9tYXAsVW5pZm9ybXNMaWIubGlnaHRtYXAsVW5pZm9ybXNMaWIuZW1pc3NpdmVtYXAsVW5pZm9ybXNMaWIuYnVtcG1hcCxVbmlmb3Jtc0xpYi5ub3JtYWxtYXAsVW5pZm9ybXNMaWIuZGlzcGxhY2VtZW50bWFwLFVuaWZvcm1zTGliLmdyYWRpZW50bWFwLFVuaWZvcm1zTGliLmZvZyxVbmlmb3Jtc0xpYi5saWdodHMse2VtaXNzaXZlOnt2YWx1ZTpuZXcgQ29sb3IoMHgwMDAwMDApfX1dKSx2ZXJ0ZXhTaGFkZXI6U2hhZGVyQ2h1bmsubWVzaHRvb25fdmVydCxmcmFnbWVudFNoYWRlcjpTaGFkZXJDaHVuay5tZXNodG9vbl9mcmFnfSxtYXRjYXA6e3VuaWZvcm1zOm1lcmdlVW5pZm9ybXMoW1VuaWZvcm1zTGliLmNvbW1vbixVbmlmb3Jtc0xpYi5idW1wbWFwLFVuaWZvcm1zTGliLm5vcm1hbG1hcCxVbmlmb3Jtc0xpYi5kaXNwbGFjZW1lbnRtYXAsVW5pZm9ybXNMaWIuZm9nLHttYXRjYXA6e3ZhbHVlOm51bGx9fV0pLHZlcnRleFNoYWRlcjpTaGFkZXJDaHVuay5tZXNobWF0Y2FwX3ZlcnQsZnJhZ21lbnRTaGFkZXI6U2hhZGVyQ2h1bmsubWVzaG1hdGNhcF9mcmFnfSxwb2ludHM6e3VuaWZvcm1zOm1lcmdlVW5pZm9ybXMoW1VuaWZvcm1zTGliLnBvaW50cyxVbmlmb3Jtc0xpYi5mb2ddKSx2ZXJ0ZXhTaGFkZXI6U2hhZGVyQ2h1bmsucG9pbnRzX3ZlcnQsZnJhZ21lbnRTaGFkZXI6U2hhZGVyQ2h1bmsucG9pbnRzX2ZyYWd9LGRhc2hlZDp7dW5pZm9ybXM6bWVyZ2VVbmlmb3JtcyhbVW5pZm9ybXNMaWIuY29tbW9uLFVuaWZvcm1zTGliLmZvZyx7c2NhbGU6e3ZhbHVlOjF9LGRhc2hTaXplOnt2YWx1ZToxfSx0b3RhbFNpemU6e3ZhbHVlOjJ9fV0pLHZlcnRleFNoYWRlcjpTaGFkZXJDaHVuay5saW5lZGFzaGVkX3ZlcnQsZnJhZ21lbnRTaGFkZXI6U2hhZGVyQ2h1bmsubGluZWRhc2hlZF9mcmFnfSxkZXB0aDp7dW5pZm9ybXM6bWVyZ2VVbmlmb3JtcyhbVW5pZm9ybXNMaWIuY29tbW9uLFVuaWZvcm1zTGliLmRpc3BsYWNlbWVudG1hcF0pLHZlcnRleFNoYWRlcjpTaGFkZXJDaHVuay5kZXB0aF92ZXJ0LGZyYWdtZW50U2hhZGVyOlNoYWRlckNodW5rLmRlcHRoX2ZyYWd9LG5vcm1hbDp7dW5pZm9ybXM6bWVyZ2VVbmlmb3JtcyhbVW5pZm9ybXNMaWIuY29tbW9uLFVuaWZvcm1zTGliLmJ1bXBtYXAsVW5pZm9ybXNMaWIubm9ybWFsbWFwLFVuaWZvcm1zTGliLmRpc3BsYWNlbWVudG1hcCx7b3BhY2l0eTp7dmFsdWU6MS4wfX1dKSx2ZXJ0ZXhTaGFkZXI6U2hhZGVyQ2h1bmsubWVzaG5vcm1hbF92ZXJ0LGZyYWdtZW50U2hhZGVyOlNoYWRlckNodW5rLm1lc2hub3JtYWxfZnJhZ30sc3ByaXRlOnt1bmlmb3JtczptZXJnZVVuaWZvcm1zKFtVbmlmb3Jtc0xpYi5zcHJpdGUsVW5pZm9ybXNMaWIuZm9nXSksdmVydGV4U2hhZGVyOlNoYWRlckNodW5rLnNwcml0ZV92ZXJ0LGZyYWdtZW50U2hhZGVyOlNoYWRlckNodW5rLnNwcml0ZV9mcmFnfSxiYWNrZ3JvdW5kOnt1bmlmb3Jtczp7dXZUcmFuc2Zvcm06e3ZhbHVlOm5ldyBNYXRyaXgzKCl9LHQyRDp7dmFsdWU6bnVsbH19LHZlcnRleFNoYWRlcjpTaGFkZXJDaHVuay5iYWNrZ3JvdW5kX3ZlcnQsZnJhZ21lbnRTaGFkZXI6U2hhZGVyQ2h1bmsuYmFja2dyb3VuZF9mcmFnfSwvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJLy8JQ3ViZSBtYXAgc2hhZGVyCgkJIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9jdWJlOnt1bmlmb3JtczptZXJnZVVuaWZvcm1zKFtVbmlmb3Jtc0xpYi5lbnZtYXAse29wYWNpdHk6e3ZhbHVlOjEuMH19XSksdmVydGV4U2hhZGVyOlNoYWRlckNodW5rLmN1YmVfdmVydCxmcmFnbWVudFNoYWRlcjpTaGFkZXJDaHVuay5jdWJlX2ZyYWd9LGVxdWlyZWN0Ont1bmlmb3Jtczp7dEVxdWlyZWN0Ont2YWx1ZTpudWxsfX0sdmVydGV4U2hhZGVyOlNoYWRlckNodW5rLmVxdWlyZWN0X3ZlcnQsZnJhZ21lbnRTaGFkZXI6U2hhZGVyQ2h1bmsuZXF1aXJlY3RfZnJhZ30sZGlzdGFuY2VSR0JBOnt1bmlmb3JtczptZXJnZVVuaWZvcm1zKFtVbmlmb3Jtc0xpYi5jb21tb24sVW5pZm9ybXNMaWIuZGlzcGxhY2VtZW50bWFwLHtyZWZlcmVuY2VQb3NpdGlvbjp7dmFsdWU6bmV3IFZlY3RvcjMoKX0sbmVhckRpc3RhbmNlOnt2YWx1ZToxfSxmYXJEaXN0YW5jZTp7dmFsdWU6MTAwMH19XSksdmVydGV4U2hhZGVyOlNoYWRlckNodW5rLmRpc3RhbmNlUkdCQV92ZXJ0LGZyYWdtZW50U2hhZGVyOlNoYWRlckNodW5rLmRpc3RhbmNlUkdCQV9mcmFnfSxzaGFkb3c6e3VuaWZvcm1zOm1lcmdlVW5pZm9ybXMoW1VuaWZvcm1zTGliLmxpZ2h0cyxVbmlmb3Jtc0xpYi5mb2cse2NvbG9yOnt2YWx1ZTpuZXcgQ29sb3IoMHgwMDAwMCl9LG9wYWNpdHk6e3ZhbHVlOjEuMH19XSksdmVydGV4U2hhZGVyOlNoYWRlckNodW5rLnNoYWRvd192ZXJ0LGZyYWdtZW50U2hhZGVyOlNoYWRlckNodW5rLnNoYWRvd19mcmFnfX07U2hhZGVyTGliLnBoeXNpY2FsPXt1bmlmb3JtczptZXJnZVVuaWZvcm1zKFtTaGFkZXJMaWIuc3RhbmRhcmQudW5pZm9ybXMse2NsZWFyY29hdDp7dmFsdWU6MH0sY2xlYXJjb2F0TWFwOnt2YWx1ZTpudWxsfSxjbGVhcmNvYXRSb3VnaG5lc3M6e3ZhbHVlOjB9LGNsZWFyY29hdFJvdWdobmVzc01hcDp7dmFsdWU6bnVsbH0sY2xlYXJjb2F0Tm9ybWFsU2NhbGU6e3ZhbHVlOm5ldyBWZWN0b3IyKDEsMSl9LGNsZWFyY29hdE5vcm1hbE1hcDp7dmFsdWU6bnVsbH0sc2hlZW46e3ZhbHVlOjB9LHNoZWVuQ29sb3I6e3ZhbHVlOm5ldyBDb2xvcigweDAwMDAwMCl9LHNoZWVuQ29sb3JNYXA6e3ZhbHVlOm51bGx9LHNoZWVuUm91Z2huZXNzOnt2YWx1ZTowfSxzaGVlblJvdWdobmVzc01hcDp7dmFsdWU6bnVsbH0sdHJhbnNtaXNzaW9uOnt2YWx1ZTowfSx0cmFuc21pc3Npb25NYXA6e3ZhbHVlOm51bGx9LHRyYW5zbWlzc2lvblNhbXBsZXJTaXplOnt2YWx1ZTpuZXcgVmVjdG9yMigpfSx0cmFuc21pc3Npb25TYW1wbGVyTWFwOnt2YWx1ZTpudWxsfSx0aGlja25lc3M6e3ZhbHVlOjB9LHRoaWNrbmVzc01hcDp7dmFsdWU6bnVsbH0sYXR0ZW51YXRpb25EaXN0YW5jZTp7dmFsdWU6MH0sYXR0ZW51YXRpb25Db2xvcjp7dmFsdWU6bmV3IENvbG9yKDB4MDAwMDAwKX0sc3BlY3VsYXJJbnRlbnNpdHk6e3ZhbHVlOjB9LHNwZWN1bGFySW50ZW5zaXR5TWFwOnt2YWx1ZTpudWxsfSxzcGVjdWxhckNvbG9yOnt2YWx1ZTpuZXcgQ29sb3IoMSwxLDEpfSxzcGVjdWxhckNvbG9yTWFwOnt2YWx1ZTpudWxsfX1dKSx2ZXJ0ZXhTaGFkZXI6U2hhZGVyQ2h1bmsubWVzaHBoeXNpY2FsX3ZlcnQsZnJhZ21lbnRTaGFkZXI6U2hhZGVyQ2h1bmsubWVzaHBoeXNpY2FsX2ZyYWd9O2Z1bmN0aW9uIFdlYkdMQmFja2dyb3VuZChyZW5kZXJlcixjdWJlbWFwcyxzdGF0ZSxvYmplY3RzLHByZW11bHRpcGxpZWRBbHBoYSl7Y29uc3QgY2xlYXJDb2xvcj1uZXcgQ29sb3IoMHgwMDAwMDApO2xldCBjbGVhckFscGhhPTA7bGV0IHBsYW5lTWVzaDtsZXQgYm94TWVzaDtsZXQgY3VycmVudEJhY2tncm91bmQ9bnVsbDtsZXQgY3VycmVudEJhY2tncm91bmRWZXJzaW9uPTA7bGV0IGN1cnJlbnRUb25lbWFwcGluZz1udWxsO2Z1bmN0aW9uIHJlbmRlcihyZW5kZXJMaXN0LHNjZW5lKXtsZXQgZm9yY2VDbGVhcj1mYWxzZTtsZXQgYmFja2dyb3VuZD1zY2VuZS5pc1NjZW5lPT09dHJ1ZT9zY2VuZS5iYWNrZ3JvdW5kOm51bGw7aWYoYmFja2dyb3VuZCYmYmFja2dyb3VuZC5pc1RleHR1cmUpe2JhY2tncm91bmQ9Y3ViZW1hcHMuZ2V0KGJhY2tncm91bmQpO30vLyBJZ25vcmUgYmFja2dyb3VuZCBpbiBBUgoJLy8gVE9ETzogUmVjb25zaWRlciB0aGlzLgoJY29uc3QgeHI9cmVuZGVyZXIueHI7Y29uc3Qgc2Vzc2lvbj14ci5nZXRTZXNzaW9uJiZ4ci5nZXRTZXNzaW9uKCk7aWYoc2Vzc2lvbiYmc2Vzc2lvbi5lbnZpcm9ubWVudEJsZW5kTW9kZT09PSdhZGRpdGl2ZScpe2JhY2tncm91bmQ9bnVsbDt9aWYoYmFja2dyb3VuZD09PW51bGwpe3NldENsZWFyKGNsZWFyQ29sb3IsY2xlYXJBbHBoYSk7fWVsc2UgaWYoYmFja2dyb3VuZCYmYmFja2dyb3VuZC5pc0NvbG9yKXtzZXRDbGVhcihiYWNrZ3JvdW5kLDEpO2ZvcmNlQ2xlYXI9dHJ1ZTt9aWYocmVuZGVyZXIuYXV0b0NsZWFyfHxmb3JjZUNsZWFyKXtyZW5kZXJlci5jbGVhcihyZW5kZXJlci5hdXRvQ2xlYXJDb2xvcixyZW5kZXJlci5hdXRvQ2xlYXJEZXB0aCxyZW5kZXJlci5hdXRvQ2xlYXJTdGVuY2lsKTt9aWYoYmFja2dyb3VuZCYmKGJhY2tncm91bmQuaXNDdWJlVGV4dHVyZXx8YmFja2dyb3VuZC5tYXBwaW5nPT09Q3ViZVVWUmVmbGVjdGlvbk1hcHBpbmcpKXtpZihib3hNZXNoPT09dW5kZWZpbmVkKXtib3hNZXNoPW5ldyBNZXNoKG5ldyBCb3hHZW9tZXRyeSgxLDEsMSksbmV3IFNoYWRlck1hdGVyaWFsKHtuYW1lOidCYWNrZ3JvdW5kQ3ViZU1hdGVyaWFsJyx1bmlmb3JtczpjbG9uZVVuaWZvcm1zKFNoYWRlckxpYi5jdWJlLnVuaWZvcm1zKSx2ZXJ0ZXhTaGFkZXI6U2hhZGVyTGliLmN1YmUudmVydGV4U2hhZGVyLGZyYWdtZW50U2hhZGVyOlNoYWRlckxpYi5jdWJlLmZyYWdtZW50U2hhZGVyLHNpZGU6QmFja1NpZGUsZGVwdGhUZXN0OmZhbHNlLGRlcHRoV3JpdGU6ZmFsc2UsZm9nOmZhbHNlfSkpO2JveE1lc2guZ2VvbWV0cnkuZGVsZXRlQXR0cmlidXRlKCdub3JtYWwnKTtib3hNZXNoLmdlb21ldHJ5LmRlbGV0ZUF0dHJpYnV0ZSgndXYnKTtib3hNZXNoLm9uQmVmb3JlUmVuZGVyPWZ1bmN0aW9uKHJlbmRlcmVyLHNjZW5lLGNhbWVyYSl7dGhpcy5tYXRyaXhXb3JsZC5jb3B5UG9zaXRpb24oY2FtZXJhLm1hdHJpeFdvcmxkKTt9Oy8vIGVuYWJsZSBjb2RlIGluamVjdGlvbiBmb3Igbm9uLWJ1aWx0LWluIG1hdGVyaWFsCglPYmplY3QuZGVmaW5lUHJvcGVydHkoYm94TWVzaC5tYXRlcmlhbCwnZW52TWFwJyx7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudW5pZm9ybXMuZW52TWFwLnZhbHVlO319KTtvYmplY3RzLnVwZGF0ZShib3hNZXNoKTt9Ym94TWVzaC5tYXRlcmlhbC51bmlmb3Jtcy5lbnZNYXAudmFsdWU9YmFja2dyb3VuZDtib3hNZXNoLm1hdGVyaWFsLnVuaWZvcm1zLmZsaXBFbnZNYXAudmFsdWU9YmFja2dyb3VuZC5pc0N1YmVUZXh0dXJlJiZiYWNrZ3JvdW5kLmlzUmVuZGVyVGFyZ2V0VGV4dHVyZT09PWZhbHNlPy0xOjE7aWYoY3VycmVudEJhY2tncm91bmQhPT1iYWNrZ3JvdW5kfHxjdXJyZW50QmFja2dyb3VuZFZlcnNpb24hPT1iYWNrZ3JvdW5kLnZlcnNpb258fGN1cnJlbnRUb25lbWFwcGluZyE9PXJlbmRlcmVyLnRvbmVNYXBwaW5nKXtib3hNZXNoLm1hdGVyaWFsLm5lZWRzVXBkYXRlPXRydWU7Y3VycmVudEJhY2tncm91bmQ9YmFja2dyb3VuZDtjdXJyZW50QmFja2dyb3VuZFZlcnNpb249YmFja2dyb3VuZC52ZXJzaW9uO2N1cnJlbnRUb25lbWFwcGluZz1yZW5kZXJlci50b25lTWFwcGluZzt9Ly8gcHVzaCB0byB0aGUgcHJlLXNvcnRlZCBvcGFxdWUgcmVuZGVyIGxpc3QKCXJlbmRlckxpc3QudW5zaGlmdChib3hNZXNoLGJveE1lc2guZ2VvbWV0cnksYm94TWVzaC5tYXRlcmlhbCwwLDAsbnVsbCk7fWVsc2UgaWYoYmFja2dyb3VuZCYmYmFja2dyb3VuZC5pc1RleHR1cmUpe2lmKHBsYW5lTWVzaD09PXVuZGVmaW5lZCl7cGxhbmVNZXNoPW5ldyBNZXNoKG5ldyBQbGFuZUdlb21ldHJ5KDIsMiksbmV3IFNoYWRlck1hdGVyaWFsKHtuYW1lOidCYWNrZ3JvdW5kTWF0ZXJpYWwnLHVuaWZvcm1zOmNsb25lVW5pZm9ybXMoU2hhZGVyTGliLmJhY2tncm91bmQudW5pZm9ybXMpLHZlcnRleFNoYWRlcjpTaGFkZXJMaWIuYmFja2dyb3VuZC52ZXJ0ZXhTaGFkZXIsZnJhZ21lbnRTaGFkZXI6U2hhZGVyTGliLmJhY2tncm91bmQuZnJhZ21lbnRTaGFkZXIsc2lkZTpGcm9udFNpZGUsZGVwdGhUZXN0OmZhbHNlLGRlcHRoV3JpdGU6ZmFsc2UsZm9nOmZhbHNlfSkpO3BsYW5lTWVzaC5nZW9tZXRyeS5kZWxldGVBdHRyaWJ1dGUoJ25vcm1hbCcpOy8vIGVuYWJsZSBjb2RlIGluamVjdGlvbiBmb3Igbm9uLWJ1aWx0LWluIG1hdGVyaWFsCglPYmplY3QuZGVmaW5lUHJvcGVydHkocGxhbmVNZXNoLm1hdGVyaWFsLCdtYXAnLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy51bmlmb3Jtcy50MkQudmFsdWU7fX0pO29iamVjdHMudXBkYXRlKHBsYW5lTWVzaCk7fXBsYW5lTWVzaC5tYXRlcmlhbC51bmlmb3Jtcy50MkQudmFsdWU9YmFja2dyb3VuZDtpZihiYWNrZ3JvdW5kLm1hdHJpeEF1dG9VcGRhdGU9PT10cnVlKXtiYWNrZ3JvdW5kLnVwZGF0ZU1hdHJpeCgpO31wbGFuZU1lc2gubWF0ZXJpYWwudW5pZm9ybXMudXZUcmFuc2Zvcm0udmFsdWUuY29weShiYWNrZ3JvdW5kLm1hdHJpeCk7aWYoY3VycmVudEJhY2tncm91bmQhPT1iYWNrZ3JvdW5kfHxjdXJyZW50QmFja2dyb3VuZFZlcnNpb24hPT1iYWNrZ3JvdW5kLnZlcnNpb258fGN1cnJlbnRUb25lbWFwcGluZyE9PXJlbmRlcmVyLnRvbmVNYXBwaW5nKXtwbGFuZU1lc2gubWF0ZXJpYWwubmVlZHNVcGRhdGU9dHJ1ZTtjdXJyZW50QmFja2dyb3VuZD1iYWNrZ3JvdW5kO2N1cnJlbnRCYWNrZ3JvdW5kVmVyc2lvbj1iYWNrZ3JvdW5kLnZlcnNpb247Y3VycmVudFRvbmVtYXBwaW5nPXJlbmRlcmVyLnRvbmVNYXBwaW5nO30vLyBwdXNoIHRvIHRoZSBwcmUtc29ydGVkIG9wYXF1ZSByZW5kZXIgbGlzdAoJcmVuZGVyTGlzdC51bnNoaWZ0KHBsYW5lTWVzaCxwbGFuZU1lc2guZ2VvbWV0cnkscGxhbmVNZXNoLm1hdGVyaWFsLDAsMCxudWxsKTt9fWZ1bmN0aW9uIHNldENsZWFyKGNvbG9yLGFscGhhKXtzdGF0ZS5idWZmZXJzLmNvbG9yLnNldENsZWFyKGNvbG9yLnIsY29sb3IuZyxjb2xvci5iLGFscGhhLHByZW11bHRpcGxpZWRBbHBoYSk7fXJldHVybiB7Z2V0Q2xlYXJDb2xvcjpmdW5jdGlvbigpe3JldHVybiBjbGVhckNvbG9yO30sc2V0Q2xlYXJDb2xvcjpmdW5jdGlvbihjb2xvcixhbHBoYSl7aWYoYWxwaGE9PT12b2lkIDApe2FscGhhPTE7fWNsZWFyQ29sb3Iuc2V0KGNvbG9yKTtjbGVhckFscGhhPWFscGhhO3NldENsZWFyKGNsZWFyQ29sb3IsY2xlYXJBbHBoYSk7fSxnZXRDbGVhckFscGhhOmZ1bmN0aW9uKCl7cmV0dXJuIGNsZWFyQWxwaGE7fSxzZXRDbGVhckFscGhhOmZ1bmN0aW9uKGFscGhhKXtjbGVhckFscGhhPWFscGhhO3NldENsZWFyKGNsZWFyQ29sb3IsY2xlYXJBbHBoYSk7fSxyZW5kZXI6cmVuZGVyfTt9ZnVuY3Rpb24gV2ViR0xCaW5kaW5nU3RhdGVzKGdsLGV4dGVuc2lvbnMsYXR0cmlidXRlcyxjYXBhYmlsaXRpZXMpe2NvbnN0IG1heFZlcnRleEF0dHJpYnV0ZXM9Z2wuZ2V0UGFyYW1ldGVyKDM0OTIxKTtjb25zdCBleHRlbnNpb249Y2FwYWJpbGl0aWVzLmlzV2ViR0wyP251bGw6ZXh0ZW5zaW9ucy5nZXQoJ09FU192ZXJ0ZXhfYXJyYXlfb2JqZWN0Jyk7Y29uc3QgdmFvQXZhaWxhYmxlPWNhcGFiaWxpdGllcy5pc1dlYkdMMnx8ZXh0ZW5zaW9uIT09bnVsbDtjb25zdCBiaW5kaW5nU3RhdGVzPXt9O2NvbnN0IGRlZmF1bHRTdGF0ZT1jcmVhdGVCaW5kaW5nU3RhdGUobnVsbCk7bGV0IGN1cnJlbnRTdGF0ZT1kZWZhdWx0U3RhdGU7ZnVuY3Rpb24gc2V0dXAob2JqZWN0LG1hdGVyaWFsLHByb2dyYW0sZ2VvbWV0cnksaW5kZXgpe2xldCB1cGRhdGVCdWZmZXJzPWZhbHNlO2lmKHZhb0F2YWlsYWJsZSl7Y29uc3Qgc3RhdGU9Z2V0QmluZGluZ1N0YXRlKGdlb21ldHJ5LHByb2dyYW0sbWF0ZXJpYWwpO2lmKGN1cnJlbnRTdGF0ZSE9PXN0YXRlKXtjdXJyZW50U3RhdGU9c3RhdGU7YmluZFZlcnRleEFycmF5T2JqZWN0KGN1cnJlbnRTdGF0ZS5vYmplY3QpO311cGRhdGVCdWZmZXJzPW5lZWRzVXBkYXRlKGdlb21ldHJ5LGluZGV4KTtpZih1cGRhdGVCdWZmZXJzKXNhdmVDYWNoZShnZW9tZXRyeSxpbmRleCk7fWVsc2Uge2NvbnN0IHdpcmVmcmFtZT1tYXRlcmlhbC53aXJlZnJhbWU9PT10cnVlO2lmKGN1cnJlbnRTdGF0ZS5nZW9tZXRyeSE9PWdlb21ldHJ5LmlkfHxjdXJyZW50U3RhdGUucHJvZ3JhbSE9PXByb2dyYW0uaWR8fGN1cnJlbnRTdGF0ZS53aXJlZnJhbWUhPT13aXJlZnJhbWUpe2N1cnJlbnRTdGF0ZS5nZW9tZXRyeT1nZW9tZXRyeS5pZDtjdXJyZW50U3RhdGUucHJvZ3JhbT1wcm9ncmFtLmlkO2N1cnJlbnRTdGF0ZS53aXJlZnJhbWU9d2lyZWZyYW1lO3VwZGF0ZUJ1ZmZlcnM9dHJ1ZTt9fWlmKG9iamVjdC5pc0luc3RhbmNlZE1lc2g9PT10cnVlKXt1cGRhdGVCdWZmZXJzPXRydWU7fWlmKGluZGV4IT09bnVsbCl7YXR0cmlidXRlcy51cGRhdGUoaW5kZXgsMzQ5NjMpO31pZih1cGRhdGVCdWZmZXJzKXtzZXR1cFZlcnRleEF0dHJpYnV0ZXMob2JqZWN0LG1hdGVyaWFsLHByb2dyYW0sZ2VvbWV0cnkpO2lmKGluZGV4IT09bnVsbCl7Z2wuYmluZEJ1ZmZlcigzNDk2MyxhdHRyaWJ1dGVzLmdldChpbmRleCkuYnVmZmVyKTt9fX1mdW5jdGlvbiBjcmVhdGVWZXJ0ZXhBcnJheU9iamVjdCgpe2lmKGNhcGFiaWxpdGllcy5pc1dlYkdMMilyZXR1cm4gZ2wuY3JlYXRlVmVydGV4QXJyYXkoKTtyZXR1cm4gZXh0ZW5zaW9uLmNyZWF0ZVZlcnRleEFycmF5T0VTKCk7fWZ1bmN0aW9uIGJpbmRWZXJ0ZXhBcnJheU9iamVjdCh2YW8pe2lmKGNhcGFiaWxpdGllcy5pc1dlYkdMMilyZXR1cm4gZ2wuYmluZFZlcnRleEFycmF5KHZhbyk7cmV0dXJuIGV4dGVuc2lvbi5iaW5kVmVydGV4QXJyYXlPRVModmFvKTt9ZnVuY3Rpb24gZGVsZXRlVmVydGV4QXJyYXlPYmplY3QodmFvKXtpZihjYXBhYmlsaXRpZXMuaXNXZWJHTDIpcmV0dXJuIGdsLmRlbGV0ZVZlcnRleEFycmF5KHZhbyk7cmV0dXJuIGV4dGVuc2lvbi5kZWxldGVWZXJ0ZXhBcnJheU9FUyh2YW8pO31mdW5jdGlvbiBnZXRCaW5kaW5nU3RhdGUoZ2VvbWV0cnkscHJvZ3JhbSxtYXRlcmlhbCl7Y29uc3Qgd2lyZWZyYW1lPW1hdGVyaWFsLndpcmVmcmFtZT09PXRydWU7bGV0IHByb2dyYW1NYXA9YmluZGluZ1N0YXRlc1tnZW9tZXRyeS5pZF07aWYocHJvZ3JhbU1hcD09PXVuZGVmaW5lZCl7cHJvZ3JhbU1hcD17fTtiaW5kaW5nU3RhdGVzW2dlb21ldHJ5LmlkXT1wcm9ncmFtTWFwO31sZXQgc3RhdGVNYXA9cHJvZ3JhbU1hcFtwcm9ncmFtLmlkXTtpZihzdGF0ZU1hcD09PXVuZGVmaW5lZCl7c3RhdGVNYXA9e307cHJvZ3JhbU1hcFtwcm9ncmFtLmlkXT1zdGF0ZU1hcDt9bGV0IHN0YXRlPXN0YXRlTWFwW3dpcmVmcmFtZV07aWYoc3RhdGU9PT11bmRlZmluZWQpe3N0YXRlPWNyZWF0ZUJpbmRpbmdTdGF0ZShjcmVhdGVWZXJ0ZXhBcnJheU9iamVjdCgpKTtzdGF0ZU1hcFt3aXJlZnJhbWVdPXN0YXRlO31yZXR1cm4gc3RhdGU7fWZ1bmN0aW9uIGNyZWF0ZUJpbmRpbmdTdGF0ZSh2YW8pe2NvbnN0IG5ld0F0dHJpYnV0ZXM9W107Y29uc3QgZW5hYmxlZEF0dHJpYnV0ZXM9W107Y29uc3QgYXR0cmlidXRlRGl2aXNvcnM9W107Zm9yKGxldCBpPTA7aTxtYXhWZXJ0ZXhBdHRyaWJ1dGVzO2krKyl7bmV3QXR0cmlidXRlc1tpXT0wO2VuYWJsZWRBdHRyaWJ1dGVzW2ldPTA7YXR0cmlidXRlRGl2aXNvcnNbaV09MDt9cmV0dXJuIHsvLyBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eSBvbiBub24tVkFPIHN1cHBvcnQgYnJvd3NlcgoJZ2VvbWV0cnk6bnVsbCxwcm9ncmFtOm51bGwsd2lyZWZyYW1lOmZhbHNlLG5ld0F0dHJpYnV0ZXM6bmV3QXR0cmlidXRlcyxlbmFibGVkQXR0cmlidXRlczplbmFibGVkQXR0cmlidXRlcyxhdHRyaWJ1dGVEaXZpc29yczphdHRyaWJ1dGVEaXZpc29ycyxvYmplY3Q6dmFvLGF0dHJpYnV0ZXM6e30saW5kZXg6bnVsbH07fWZ1bmN0aW9uIG5lZWRzVXBkYXRlKGdlb21ldHJ5LGluZGV4KXtjb25zdCBjYWNoZWRBdHRyaWJ1dGVzPWN1cnJlbnRTdGF0ZS5hdHRyaWJ1dGVzO2NvbnN0IGdlb21ldHJ5QXR0cmlidXRlcz1nZW9tZXRyeS5hdHRyaWJ1dGVzO2xldCBhdHRyaWJ1dGVzTnVtPTA7Zm9yKGNvbnN0IGtleSBpbiBnZW9tZXRyeUF0dHJpYnV0ZXMpe2NvbnN0IGNhY2hlZEF0dHJpYnV0ZT1jYWNoZWRBdHRyaWJ1dGVzW2tleV07Y29uc3QgZ2VvbWV0cnlBdHRyaWJ1dGU9Z2VvbWV0cnlBdHRyaWJ1dGVzW2tleV07aWYoY2FjaGVkQXR0cmlidXRlPT09dW5kZWZpbmVkKXJldHVybiB0cnVlO2lmKGNhY2hlZEF0dHJpYnV0ZS5hdHRyaWJ1dGUhPT1nZW9tZXRyeUF0dHJpYnV0ZSlyZXR1cm4gdHJ1ZTtpZihjYWNoZWRBdHRyaWJ1dGUuZGF0YSE9PWdlb21ldHJ5QXR0cmlidXRlLmRhdGEpcmV0dXJuIHRydWU7YXR0cmlidXRlc051bSsrO31pZihjdXJyZW50U3RhdGUuYXR0cmlidXRlc051bSE9PWF0dHJpYnV0ZXNOdW0pcmV0dXJuIHRydWU7aWYoY3VycmVudFN0YXRlLmluZGV4IT09aW5kZXgpcmV0dXJuIHRydWU7cmV0dXJuIGZhbHNlO31mdW5jdGlvbiBzYXZlQ2FjaGUoZ2VvbWV0cnksaW5kZXgpe2NvbnN0IGNhY2hlPXt9O2NvbnN0IGF0dHJpYnV0ZXM9Z2VvbWV0cnkuYXR0cmlidXRlcztsZXQgYXR0cmlidXRlc051bT0wO2Zvcihjb25zdCBrZXkgaW4gYXR0cmlidXRlcyl7Y29uc3QgYXR0cmlidXRlPWF0dHJpYnV0ZXNba2V5XTtjb25zdCBkYXRhPXt9O2RhdGEuYXR0cmlidXRlPWF0dHJpYnV0ZTtpZihhdHRyaWJ1dGUuZGF0YSl7ZGF0YS5kYXRhPWF0dHJpYnV0ZS5kYXRhO31jYWNoZVtrZXldPWRhdGE7YXR0cmlidXRlc051bSsrO31jdXJyZW50U3RhdGUuYXR0cmlidXRlcz1jYWNoZTtjdXJyZW50U3RhdGUuYXR0cmlidXRlc051bT1hdHRyaWJ1dGVzTnVtO2N1cnJlbnRTdGF0ZS5pbmRleD1pbmRleDt9ZnVuY3Rpb24gaW5pdEF0dHJpYnV0ZXMoKXtjb25zdCBuZXdBdHRyaWJ1dGVzPWN1cnJlbnRTdGF0ZS5uZXdBdHRyaWJ1dGVzO2ZvcihsZXQgaT0wLGlsPW5ld0F0dHJpYnV0ZXMubGVuZ3RoO2k8aWw7aSsrKXtuZXdBdHRyaWJ1dGVzW2ldPTA7fX1mdW5jdGlvbiBlbmFibGVBdHRyaWJ1dGUoYXR0cmlidXRlKXtlbmFibGVBdHRyaWJ1dGVBbmREaXZpc29yKGF0dHJpYnV0ZSwwKTt9ZnVuY3Rpb24gZW5hYmxlQXR0cmlidXRlQW5kRGl2aXNvcihhdHRyaWJ1dGUsbWVzaFBlckF0dHJpYnV0ZSl7Y29uc3QgbmV3QXR0cmlidXRlcz1jdXJyZW50U3RhdGUubmV3QXR0cmlidXRlcztjb25zdCBlbmFibGVkQXR0cmlidXRlcz1jdXJyZW50U3RhdGUuZW5hYmxlZEF0dHJpYnV0ZXM7Y29uc3QgYXR0cmlidXRlRGl2aXNvcnM9Y3VycmVudFN0YXRlLmF0dHJpYnV0ZURpdmlzb3JzO25ld0F0dHJpYnV0ZXNbYXR0cmlidXRlXT0xO2lmKGVuYWJsZWRBdHRyaWJ1dGVzW2F0dHJpYnV0ZV09PT0wKXtnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShhdHRyaWJ1dGUpO2VuYWJsZWRBdHRyaWJ1dGVzW2F0dHJpYnV0ZV09MTt9aWYoYXR0cmlidXRlRGl2aXNvcnNbYXR0cmlidXRlXSE9PW1lc2hQZXJBdHRyaWJ1dGUpe2NvbnN0IGV4dGVuc2lvbj1jYXBhYmlsaXRpZXMuaXNXZWJHTDI/Z2w6ZXh0ZW5zaW9ucy5nZXQoJ0FOR0xFX2luc3RhbmNlZF9hcnJheXMnKTtleHRlbnNpb25bY2FwYWJpbGl0aWVzLmlzV2ViR0wyPyd2ZXJ0ZXhBdHRyaWJEaXZpc29yJzondmVydGV4QXR0cmliRGl2aXNvckFOR0xFJ10oYXR0cmlidXRlLG1lc2hQZXJBdHRyaWJ1dGUpO2F0dHJpYnV0ZURpdmlzb3JzW2F0dHJpYnV0ZV09bWVzaFBlckF0dHJpYnV0ZTt9fWZ1bmN0aW9uIGRpc2FibGVVbnVzZWRBdHRyaWJ1dGVzKCl7Y29uc3QgbmV3QXR0cmlidXRlcz1jdXJyZW50U3RhdGUubmV3QXR0cmlidXRlcztjb25zdCBlbmFibGVkQXR0cmlidXRlcz1jdXJyZW50U3RhdGUuZW5hYmxlZEF0dHJpYnV0ZXM7Zm9yKGxldCBpPTAsaWw9ZW5hYmxlZEF0dHJpYnV0ZXMubGVuZ3RoO2k8aWw7aSsrKXtpZihlbmFibGVkQXR0cmlidXRlc1tpXSE9PW5ld0F0dHJpYnV0ZXNbaV0pe2dsLmRpc2FibGVWZXJ0ZXhBdHRyaWJBcnJheShpKTtlbmFibGVkQXR0cmlidXRlc1tpXT0wO319fWZ1bmN0aW9uIHZlcnRleEF0dHJpYlBvaW50ZXIoaW5kZXgsc2l6ZSx0eXBlLG5vcm1hbGl6ZWQsc3RyaWRlLG9mZnNldCl7aWYoY2FwYWJpbGl0aWVzLmlzV2ViR0wyPT09dHJ1ZSYmKHR5cGU9PT01MTI0fHx0eXBlPT09NTEyNSkpe2dsLnZlcnRleEF0dHJpYklQb2ludGVyKGluZGV4LHNpemUsdHlwZSxzdHJpZGUsb2Zmc2V0KTt9ZWxzZSB7Z2wudmVydGV4QXR0cmliUG9pbnRlcihpbmRleCxzaXplLHR5cGUsbm9ybWFsaXplZCxzdHJpZGUsb2Zmc2V0KTt9fWZ1bmN0aW9uIHNldHVwVmVydGV4QXR0cmlidXRlcyhvYmplY3QsbWF0ZXJpYWwscHJvZ3JhbSxnZW9tZXRyeSl7aWYoY2FwYWJpbGl0aWVzLmlzV2ViR0wyPT09ZmFsc2UmJihvYmplY3QuaXNJbnN0YW5jZWRNZXNofHxnZW9tZXRyeS5pc0luc3RhbmNlZEJ1ZmZlckdlb21ldHJ5KSl7aWYoZXh0ZW5zaW9ucy5nZXQoJ0FOR0xFX2luc3RhbmNlZF9hcnJheXMnKT09PW51bGwpcmV0dXJuO31pbml0QXR0cmlidXRlcygpO2NvbnN0IGdlb21ldHJ5QXR0cmlidXRlcz1nZW9tZXRyeS5hdHRyaWJ1dGVzO2NvbnN0IHByb2dyYW1BdHRyaWJ1dGVzPXByb2dyYW0uZ2V0QXR0cmlidXRlcygpO2NvbnN0IG1hdGVyaWFsRGVmYXVsdEF0dHJpYnV0ZVZhbHVlcz1tYXRlcmlhbC5kZWZhdWx0QXR0cmlidXRlVmFsdWVzO2Zvcihjb25zdCBuYW1lIGluIHByb2dyYW1BdHRyaWJ1dGVzKXtjb25zdCBwcm9ncmFtQXR0cmlidXRlPXByb2dyYW1BdHRyaWJ1dGVzW25hbWVdO2lmKHByb2dyYW1BdHRyaWJ1dGUubG9jYXRpb24+PTApe2xldCBnZW9tZXRyeUF0dHJpYnV0ZT1nZW9tZXRyeUF0dHJpYnV0ZXNbbmFtZV07aWYoZ2VvbWV0cnlBdHRyaWJ1dGU9PT11bmRlZmluZWQpe2lmKG5hbWU9PT0naW5zdGFuY2VNYXRyaXgnJiZvYmplY3QuaW5zdGFuY2VNYXRyaXgpZ2VvbWV0cnlBdHRyaWJ1dGU9b2JqZWN0Lmluc3RhbmNlTWF0cml4O2lmKG5hbWU9PT0naW5zdGFuY2VDb2xvcicmJm9iamVjdC5pbnN0YW5jZUNvbG9yKWdlb21ldHJ5QXR0cmlidXRlPW9iamVjdC5pbnN0YW5jZUNvbG9yO31pZihnZW9tZXRyeUF0dHJpYnV0ZSE9PXVuZGVmaW5lZCl7Y29uc3Qgbm9ybWFsaXplZD1nZW9tZXRyeUF0dHJpYnV0ZS5ub3JtYWxpemVkO2NvbnN0IHNpemU9Z2VvbWV0cnlBdHRyaWJ1dGUuaXRlbVNpemU7Y29uc3QgYXR0cmlidXRlPWF0dHJpYnV0ZXMuZ2V0KGdlb21ldHJ5QXR0cmlidXRlKTsvLyBUT0RPIEF0dHJpYnV0ZSBtYXkgbm90IGJlIGF2YWlsYWJsZSBvbiBjb250ZXh0IHJlc3RvcmUKCWlmKGF0dHJpYnV0ZT09PXVuZGVmaW5lZCljb250aW51ZTtjb25zdCBidWZmZXI9YXR0cmlidXRlLmJ1ZmZlcjtjb25zdCB0eXBlPWF0dHJpYnV0ZS50eXBlO2NvbnN0IGJ5dGVzUGVyRWxlbWVudD1hdHRyaWJ1dGUuYnl0ZXNQZXJFbGVtZW50O2lmKGdlb21ldHJ5QXR0cmlidXRlLmlzSW50ZXJsZWF2ZWRCdWZmZXJBdHRyaWJ1dGUpe2NvbnN0IGRhdGE9Z2VvbWV0cnlBdHRyaWJ1dGUuZGF0YTtjb25zdCBzdHJpZGU9ZGF0YS5zdHJpZGU7Y29uc3Qgb2Zmc2V0PWdlb21ldHJ5QXR0cmlidXRlLm9mZnNldDtpZihkYXRhJiZkYXRhLmlzSW5zdGFuY2VkSW50ZXJsZWF2ZWRCdWZmZXIpe2ZvcihsZXQgaT0wO2k8cHJvZ3JhbUF0dHJpYnV0ZS5sb2NhdGlvblNpemU7aSsrKXtlbmFibGVBdHRyaWJ1dGVBbmREaXZpc29yKHByb2dyYW1BdHRyaWJ1dGUubG9jYXRpb24raSxkYXRhLm1lc2hQZXJBdHRyaWJ1dGUpO31pZihvYmplY3QuaXNJbnN0YW5jZWRNZXNoIT09dHJ1ZSYmZ2VvbWV0cnkuX21heEluc3RhbmNlQ291bnQ9PT11bmRlZmluZWQpe2dlb21ldHJ5Ll9tYXhJbnN0YW5jZUNvdW50PWRhdGEubWVzaFBlckF0dHJpYnV0ZSpkYXRhLmNvdW50O319ZWxzZSB7Zm9yKGxldCBpPTA7aTxwcm9ncmFtQXR0cmlidXRlLmxvY2F0aW9uU2l6ZTtpKyspe2VuYWJsZUF0dHJpYnV0ZShwcm9ncmFtQXR0cmlidXRlLmxvY2F0aW9uK2kpO319Z2wuYmluZEJ1ZmZlcigzNDk2MixidWZmZXIpO2ZvcihsZXQgaT0wO2k8cHJvZ3JhbUF0dHJpYnV0ZS5sb2NhdGlvblNpemU7aSsrKXt2ZXJ0ZXhBdHRyaWJQb2ludGVyKHByb2dyYW1BdHRyaWJ1dGUubG9jYXRpb24raSxzaXplL3Byb2dyYW1BdHRyaWJ1dGUubG9jYXRpb25TaXplLHR5cGUsbm9ybWFsaXplZCxzdHJpZGUqYnl0ZXNQZXJFbGVtZW50LChvZmZzZXQrc2l6ZS9wcm9ncmFtQXR0cmlidXRlLmxvY2F0aW9uU2l6ZSppKSpieXRlc1BlckVsZW1lbnQpO319ZWxzZSB7aWYoZ2VvbWV0cnlBdHRyaWJ1dGUuaXNJbnN0YW5jZWRCdWZmZXJBdHRyaWJ1dGUpe2ZvcihsZXQgaT0wO2k8cHJvZ3JhbUF0dHJpYnV0ZS5sb2NhdGlvblNpemU7aSsrKXtlbmFibGVBdHRyaWJ1dGVBbmREaXZpc29yKHByb2dyYW1BdHRyaWJ1dGUubG9jYXRpb24raSxnZW9tZXRyeUF0dHJpYnV0ZS5tZXNoUGVyQXR0cmlidXRlKTt9aWYob2JqZWN0LmlzSW5zdGFuY2VkTWVzaCE9PXRydWUmJmdlb21ldHJ5Ll9tYXhJbnN0YW5jZUNvdW50PT09dW5kZWZpbmVkKXtnZW9tZXRyeS5fbWF4SW5zdGFuY2VDb3VudD1nZW9tZXRyeUF0dHJpYnV0ZS5tZXNoUGVyQXR0cmlidXRlKmdlb21ldHJ5QXR0cmlidXRlLmNvdW50O319ZWxzZSB7Zm9yKGxldCBpPTA7aTxwcm9ncmFtQXR0cmlidXRlLmxvY2F0aW9uU2l6ZTtpKyspe2VuYWJsZUF0dHJpYnV0ZShwcm9ncmFtQXR0cmlidXRlLmxvY2F0aW9uK2kpO319Z2wuYmluZEJ1ZmZlcigzNDk2MixidWZmZXIpO2ZvcihsZXQgaT0wO2k8cHJvZ3JhbUF0dHJpYnV0ZS5sb2NhdGlvblNpemU7aSsrKXt2ZXJ0ZXhBdHRyaWJQb2ludGVyKHByb2dyYW1BdHRyaWJ1dGUubG9jYXRpb24raSxzaXplL3Byb2dyYW1BdHRyaWJ1dGUubG9jYXRpb25TaXplLHR5cGUsbm9ybWFsaXplZCxzaXplKmJ5dGVzUGVyRWxlbWVudCxzaXplL3Byb2dyYW1BdHRyaWJ1dGUubG9jYXRpb25TaXplKmkqYnl0ZXNQZXJFbGVtZW50KTt9fX1lbHNlIGlmKG1hdGVyaWFsRGVmYXVsdEF0dHJpYnV0ZVZhbHVlcyE9PXVuZGVmaW5lZCl7Y29uc3QgdmFsdWU9bWF0ZXJpYWxEZWZhdWx0QXR0cmlidXRlVmFsdWVzW25hbWVdO2lmKHZhbHVlIT09dW5kZWZpbmVkKXtzd2l0Y2godmFsdWUubGVuZ3RoKXtjYXNlIDI6Z2wudmVydGV4QXR0cmliMmZ2KHByb2dyYW1BdHRyaWJ1dGUubG9jYXRpb24sdmFsdWUpO2JyZWFrO2Nhc2UgMzpnbC52ZXJ0ZXhBdHRyaWIzZnYocHJvZ3JhbUF0dHJpYnV0ZS5sb2NhdGlvbix2YWx1ZSk7YnJlYWs7Y2FzZSA0OmdsLnZlcnRleEF0dHJpYjRmdihwcm9ncmFtQXR0cmlidXRlLmxvY2F0aW9uLHZhbHVlKTticmVhaztkZWZhdWx0OmdsLnZlcnRleEF0dHJpYjFmdihwcm9ncmFtQXR0cmlidXRlLmxvY2F0aW9uLHZhbHVlKTt9fX19fWRpc2FibGVVbnVzZWRBdHRyaWJ1dGVzKCk7fWZ1bmN0aW9uIGRpc3Bvc2UoKXtyZXNldCgpO2Zvcihjb25zdCBnZW9tZXRyeUlkIGluIGJpbmRpbmdTdGF0ZXMpe2NvbnN0IHByb2dyYW1NYXA9YmluZGluZ1N0YXRlc1tnZW9tZXRyeUlkXTtmb3IoY29uc3QgcHJvZ3JhbUlkIGluIHByb2dyYW1NYXApe2NvbnN0IHN0YXRlTWFwPXByb2dyYW1NYXBbcHJvZ3JhbUlkXTtmb3IoY29uc3Qgd2lyZWZyYW1lIGluIHN0YXRlTWFwKXtkZWxldGVWZXJ0ZXhBcnJheU9iamVjdChzdGF0ZU1hcFt3aXJlZnJhbWVdLm9iamVjdCk7ZGVsZXRlIHN0YXRlTWFwW3dpcmVmcmFtZV07fWRlbGV0ZSBwcm9ncmFtTWFwW3Byb2dyYW1JZF07fWRlbGV0ZSBiaW5kaW5nU3RhdGVzW2dlb21ldHJ5SWRdO319ZnVuY3Rpb24gcmVsZWFzZVN0YXRlc09mR2VvbWV0cnkoZ2VvbWV0cnkpe2lmKGJpbmRpbmdTdGF0ZXNbZ2VvbWV0cnkuaWRdPT09dW5kZWZpbmVkKXJldHVybjtjb25zdCBwcm9ncmFtTWFwPWJpbmRpbmdTdGF0ZXNbZ2VvbWV0cnkuaWRdO2Zvcihjb25zdCBwcm9ncmFtSWQgaW4gcHJvZ3JhbU1hcCl7Y29uc3Qgc3RhdGVNYXA9cHJvZ3JhbU1hcFtwcm9ncmFtSWRdO2Zvcihjb25zdCB3aXJlZnJhbWUgaW4gc3RhdGVNYXApe2RlbGV0ZVZlcnRleEFycmF5T2JqZWN0KHN0YXRlTWFwW3dpcmVmcmFtZV0ub2JqZWN0KTtkZWxldGUgc3RhdGVNYXBbd2lyZWZyYW1lXTt9ZGVsZXRlIHByb2dyYW1NYXBbcHJvZ3JhbUlkXTt9ZGVsZXRlIGJpbmRpbmdTdGF0ZXNbZ2VvbWV0cnkuaWRdO31mdW5jdGlvbiByZWxlYXNlU3RhdGVzT2ZQcm9ncmFtKHByb2dyYW0pe2Zvcihjb25zdCBnZW9tZXRyeUlkIGluIGJpbmRpbmdTdGF0ZXMpe2NvbnN0IHByb2dyYW1NYXA9YmluZGluZ1N0YXRlc1tnZW9tZXRyeUlkXTtpZihwcm9ncmFtTWFwW3Byb2dyYW0uaWRdPT09dW5kZWZpbmVkKWNvbnRpbnVlO2NvbnN0IHN0YXRlTWFwPXByb2dyYW1NYXBbcHJvZ3JhbS5pZF07Zm9yKGNvbnN0IHdpcmVmcmFtZSBpbiBzdGF0ZU1hcCl7ZGVsZXRlVmVydGV4QXJyYXlPYmplY3Qoc3RhdGVNYXBbd2lyZWZyYW1lXS5vYmplY3QpO2RlbGV0ZSBzdGF0ZU1hcFt3aXJlZnJhbWVdO31kZWxldGUgcHJvZ3JhbU1hcFtwcm9ncmFtLmlkXTt9fWZ1bmN0aW9uIHJlc2V0KCl7cmVzZXREZWZhdWx0U3RhdGUoKTtpZihjdXJyZW50U3RhdGU9PT1kZWZhdWx0U3RhdGUpcmV0dXJuO2N1cnJlbnRTdGF0ZT1kZWZhdWx0U3RhdGU7YmluZFZlcnRleEFycmF5T2JqZWN0KGN1cnJlbnRTdGF0ZS5vYmplY3QpO30vLyBmb3IgYmFja3dhcmQtY29tcGF0aWxpYml0eQoJZnVuY3Rpb24gcmVzZXREZWZhdWx0U3RhdGUoKXtkZWZhdWx0U3RhdGUuZ2VvbWV0cnk9bnVsbDtkZWZhdWx0U3RhdGUucHJvZ3JhbT1udWxsO2RlZmF1bHRTdGF0ZS53aXJlZnJhbWU9ZmFsc2U7fXJldHVybiB7c2V0dXA6c2V0dXAscmVzZXQ6cmVzZXQscmVzZXREZWZhdWx0U3RhdGU6cmVzZXREZWZhdWx0U3RhdGUsZGlzcG9zZTpkaXNwb3NlLHJlbGVhc2VTdGF0ZXNPZkdlb21ldHJ5OnJlbGVhc2VTdGF0ZXNPZkdlb21ldHJ5LHJlbGVhc2VTdGF0ZXNPZlByb2dyYW06cmVsZWFzZVN0YXRlc09mUHJvZ3JhbSxpbml0QXR0cmlidXRlczppbml0QXR0cmlidXRlcyxlbmFibGVBdHRyaWJ1dGU6ZW5hYmxlQXR0cmlidXRlLGRpc2FibGVVbnVzZWRBdHRyaWJ1dGVzOmRpc2FibGVVbnVzZWRBdHRyaWJ1dGVzfTt9ZnVuY3Rpb24gV2ViR0xCdWZmZXJSZW5kZXJlcihnbCxleHRlbnNpb25zLGluZm8sY2FwYWJpbGl0aWVzKXtjb25zdCBpc1dlYkdMMj1jYXBhYmlsaXRpZXMuaXNXZWJHTDI7bGV0IG1vZGU7ZnVuY3Rpb24gc2V0TW9kZSh2YWx1ZSl7bW9kZT12YWx1ZTt9ZnVuY3Rpb24gcmVuZGVyKHN0YXJ0LGNvdW50KXtnbC5kcmF3QXJyYXlzKG1vZGUsc3RhcnQsY291bnQpO2luZm8udXBkYXRlKGNvdW50LG1vZGUsMSk7fWZ1bmN0aW9uIHJlbmRlckluc3RhbmNlcyhzdGFydCxjb3VudCxwcmltY291bnQpe2lmKHByaW1jb3VudD09PTApcmV0dXJuO2xldCBleHRlbnNpb24sbWV0aG9kTmFtZTtpZihpc1dlYkdMMil7ZXh0ZW5zaW9uPWdsO21ldGhvZE5hbWU9J2RyYXdBcnJheXNJbnN0YW5jZWQnO31lbHNlIHtleHRlbnNpb249ZXh0ZW5zaW9ucy5nZXQoJ0FOR0xFX2luc3RhbmNlZF9hcnJheXMnKTttZXRob2ROYW1lPSdkcmF3QXJyYXlzSW5zdGFuY2VkQU5HTEUnO2lmKGV4dGVuc2lvbj09PW51bGwpe2NvbnNvbGUuZXJyb3IoJ1RIUkVFLldlYkdMQnVmZmVyUmVuZGVyZXI6IHVzaW5nIFRIUkVFLkluc3RhbmNlZEJ1ZmZlckdlb21ldHJ5IGJ1dCBoYXJkd2FyZSBkb2VzIG5vdCBzdXBwb3J0IGV4dGVuc2lvbiBBTkdMRV9pbnN0YW5jZWRfYXJyYXlzLicpO3JldHVybjt9fWV4dGVuc2lvblttZXRob2ROYW1lXShtb2RlLHN0YXJ0LGNvdW50LHByaW1jb3VudCk7aW5mby51cGRhdGUoY291bnQsbW9kZSxwcmltY291bnQpO30vLwoJdGhpcy5zZXRNb2RlPXNldE1vZGU7dGhpcy5yZW5kZXI9cmVuZGVyO3RoaXMucmVuZGVySW5zdGFuY2VzPXJlbmRlckluc3RhbmNlczt9ZnVuY3Rpb24gV2ViR0xDYXBhYmlsaXRpZXMoZ2wsZXh0ZW5zaW9ucyxwYXJhbWV0ZXJzKXtsZXQgbWF4QW5pc290cm9weTtmdW5jdGlvbiBnZXRNYXhBbmlzb3Ryb3B5KCl7aWYobWF4QW5pc290cm9weSE9PXVuZGVmaW5lZClyZXR1cm4gbWF4QW5pc290cm9weTtpZihleHRlbnNpb25zLmhhcygnRVhUX3RleHR1cmVfZmlsdGVyX2FuaXNvdHJvcGljJyk9PT10cnVlKXtjb25zdCBleHRlbnNpb249ZXh0ZW5zaW9ucy5nZXQoJ0VYVF90ZXh0dXJlX2ZpbHRlcl9hbmlzb3Ryb3BpYycpO21heEFuaXNvdHJvcHk9Z2wuZ2V0UGFyYW1ldGVyKGV4dGVuc2lvbi5NQVhfVEVYVFVSRV9NQVhfQU5JU09UUk9QWV9FWFQpO31lbHNlIHttYXhBbmlzb3Ryb3B5PTA7fXJldHVybiBtYXhBbmlzb3Ryb3B5O31mdW5jdGlvbiBnZXRNYXhQcmVjaXNpb24ocHJlY2lzaW9uKXtpZihwcmVjaXNpb249PT0naGlnaHAnKXtpZihnbC5nZXRTaGFkZXJQcmVjaXNpb25Gb3JtYXQoMzU2MzMsMzYzMzgpLnByZWNpc2lvbj4wJiZnbC5nZXRTaGFkZXJQcmVjaXNpb25Gb3JtYXQoMzU2MzIsMzYzMzgpLnByZWNpc2lvbj4wKXtyZXR1cm4gJ2hpZ2hwJzt9cHJlY2lzaW9uPSdtZWRpdW1wJzt9aWYocHJlY2lzaW9uPT09J21lZGl1bXAnKXtpZihnbC5nZXRTaGFkZXJQcmVjaXNpb25Gb3JtYXQoMzU2MzMsMzYzMzcpLnByZWNpc2lvbj4wJiZnbC5nZXRTaGFkZXJQcmVjaXNpb25Gb3JtYXQoMzU2MzIsMzYzMzcpLnByZWNpc2lvbj4wKXtyZXR1cm4gJ21lZGl1bXAnO319cmV0dXJuICdsb3dwJzt9LyogZXNsaW50LWRpc2FibGUgbm8tdW5kZWYgKi9jb25zdCBpc1dlYkdMMj10eXBlb2YgV2ViR0wyUmVuZGVyaW5nQ29udGV4dCE9PSd1bmRlZmluZWQnJiZnbCBpbnN0YW5jZW9mIFdlYkdMMlJlbmRlcmluZ0NvbnRleHR8fHR5cGVvZiBXZWJHTDJDb21wdXRlUmVuZGVyaW5nQ29udGV4dCE9PSd1bmRlZmluZWQnJiZnbCBpbnN0YW5jZW9mIFdlYkdMMkNvbXB1dGVSZW5kZXJpbmdDb250ZXh0Oy8qIGVzbGludC1lbmFibGUgbm8tdW5kZWYgKi9sZXQgcHJlY2lzaW9uPXBhcmFtZXRlcnMucHJlY2lzaW9uIT09dW5kZWZpbmVkP3BhcmFtZXRlcnMucHJlY2lzaW9uOidoaWdocCc7Y29uc3QgbWF4UHJlY2lzaW9uPWdldE1heFByZWNpc2lvbihwcmVjaXNpb24pO2lmKG1heFByZWNpc2lvbiE9PXByZWNpc2lvbil7Y29uc29sZS53YXJuKCdUSFJFRS5XZWJHTFJlbmRlcmVyOicscHJlY2lzaW9uLCdub3Qgc3VwcG9ydGVkLCB1c2luZycsbWF4UHJlY2lzaW9uLCdpbnN0ZWFkLicpO3ByZWNpc2lvbj1tYXhQcmVjaXNpb247fWNvbnN0IGRyYXdCdWZmZXJzPWlzV2ViR0wyfHxleHRlbnNpb25zLmhhcygnV0VCR0xfZHJhd19idWZmZXJzJyk7Y29uc3QgbG9nYXJpdGhtaWNEZXB0aEJ1ZmZlcj1wYXJhbWV0ZXJzLmxvZ2FyaXRobWljRGVwdGhCdWZmZXI9PT10cnVlO2NvbnN0IG1heFRleHR1cmVzPWdsLmdldFBhcmFtZXRlcigzNDkzMCk7Y29uc3QgbWF4VmVydGV4VGV4dHVyZXM9Z2wuZ2V0UGFyYW1ldGVyKDM1NjYwKTtjb25zdCBtYXhUZXh0dXJlU2l6ZT1nbC5nZXRQYXJhbWV0ZXIoMzM3OSk7Y29uc3QgbWF4Q3ViZW1hcFNpemU9Z2wuZ2V0UGFyYW1ldGVyKDM0MDc2KTtjb25zdCBtYXhBdHRyaWJ1dGVzPWdsLmdldFBhcmFtZXRlcigzNDkyMSk7Y29uc3QgbWF4VmVydGV4VW5pZm9ybXM9Z2wuZ2V0UGFyYW1ldGVyKDM2MzQ3KTtjb25zdCBtYXhWYXJ5aW5ncz1nbC5nZXRQYXJhbWV0ZXIoMzYzNDgpO2NvbnN0IG1heEZyYWdtZW50VW5pZm9ybXM9Z2wuZ2V0UGFyYW1ldGVyKDM2MzQ5KTtjb25zdCB2ZXJ0ZXhUZXh0dXJlcz1tYXhWZXJ0ZXhUZXh0dXJlcz4wO2NvbnN0IGZsb2F0RnJhZ21lbnRUZXh0dXJlcz1pc1dlYkdMMnx8ZXh0ZW5zaW9ucy5oYXMoJ09FU190ZXh0dXJlX2Zsb2F0Jyk7Y29uc3QgZmxvYXRWZXJ0ZXhUZXh0dXJlcz12ZXJ0ZXhUZXh0dXJlcyYmZmxvYXRGcmFnbWVudFRleHR1cmVzO2NvbnN0IG1heFNhbXBsZXM9aXNXZWJHTDI/Z2wuZ2V0UGFyYW1ldGVyKDM2MTgzKTowO3JldHVybiB7aXNXZWJHTDI6aXNXZWJHTDIsZHJhd0J1ZmZlcnM6ZHJhd0J1ZmZlcnMsZ2V0TWF4QW5pc290cm9weTpnZXRNYXhBbmlzb3Ryb3B5LGdldE1heFByZWNpc2lvbjpnZXRNYXhQcmVjaXNpb24scHJlY2lzaW9uOnByZWNpc2lvbixsb2dhcml0aG1pY0RlcHRoQnVmZmVyOmxvZ2FyaXRobWljRGVwdGhCdWZmZXIsbWF4VGV4dHVyZXM6bWF4VGV4dHVyZXMsbWF4VmVydGV4VGV4dHVyZXM6bWF4VmVydGV4VGV4dHVyZXMsbWF4VGV4dHVyZVNpemU6bWF4VGV4dHVyZVNpemUsbWF4Q3ViZW1hcFNpemU6bWF4Q3ViZW1hcFNpemUsbWF4QXR0cmlidXRlczptYXhBdHRyaWJ1dGVzLG1heFZlcnRleFVuaWZvcm1zOm1heFZlcnRleFVuaWZvcm1zLG1heFZhcnlpbmdzOm1heFZhcnlpbmdzLG1heEZyYWdtZW50VW5pZm9ybXM6bWF4RnJhZ21lbnRVbmlmb3Jtcyx2ZXJ0ZXhUZXh0dXJlczp2ZXJ0ZXhUZXh0dXJlcyxmbG9hdEZyYWdtZW50VGV4dHVyZXM6ZmxvYXRGcmFnbWVudFRleHR1cmVzLGZsb2F0VmVydGV4VGV4dHVyZXM6ZmxvYXRWZXJ0ZXhUZXh0dXJlcyxtYXhTYW1wbGVzOm1heFNhbXBsZXN9O31mdW5jdGlvbiBXZWJHTENsaXBwaW5nKHByb3BlcnRpZXMpe2NvbnN0IHNjb3BlPXRoaXM7bGV0IGdsb2JhbFN0YXRlPW51bGwsbnVtR2xvYmFsUGxhbmVzPTAsbG9jYWxDbGlwcGluZ0VuYWJsZWQ9ZmFsc2UscmVuZGVyaW5nU2hhZG93cz1mYWxzZTtjb25zdCBwbGFuZT1uZXcgUGxhbmUoKSx2aWV3Tm9ybWFsTWF0cml4PW5ldyBNYXRyaXgzKCksdW5pZm9ybT17dmFsdWU6bnVsbCxuZWVkc1VwZGF0ZTpmYWxzZX07dGhpcy51bmlmb3JtPXVuaWZvcm07dGhpcy5udW1QbGFuZXM9MDt0aGlzLm51bUludGVyc2VjdGlvbj0wO3RoaXMuaW5pdD1mdW5jdGlvbihwbGFuZXMsZW5hYmxlTG9jYWxDbGlwcGluZyxjYW1lcmEpe2NvbnN0IGVuYWJsZWQ9cGxhbmVzLmxlbmd0aCE9PTB8fGVuYWJsZUxvY2FsQ2xpcHBpbmd8fC8vIGVuYWJsZSBzdGF0ZSBvZiBwcmV2aW91cyBmcmFtZSAtIHRoZSBjbGlwcGluZyBjb2RlIGhhcyB0bwoJLy8gcnVuIGFub3RoZXIgZnJhbWUgaW4gb3JkZXIgdG8gcmVzZXQgdGhlIHN0YXRlOgoJbnVtR2xvYmFsUGxhbmVzIT09MHx8bG9jYWxDbGlwcGluZ0VuYWJsZWQ7bG9jYWxDbGlwcGluZ0VuYWJsZWQ9ZW5hYmxlTG9jYWxDbGlwcGluZztnbG9iYWxTdGF0ZT1wcm9qZWN0UGxhbmVzKHBsYW5lcyxjYW1lcmEsMCk7bnVtR2xvYmFsUGxhbmVzPXBsYW5lcy5sZW5ndGg7cmV0dXJuIGVuYWJsZWQ7fTt0aGlzLmJlZ2luU2hhZG93cz1mdW5jdGlvbigpe3JlbmRlcmluZ1NoYWRvd3M9dHJ1ZTtwcm9qZWN0UGxhbmVzKG51bGwpO307dGhpcy5lbmRTaGFkb3dzPWZ1bmN0aW9uKCl7cmVuZGVyaW5nU2hhZG93cz1mYWxzZTtyZXNldEdsb2JhbFN0YXRlKCk7fTt0aGlzLnNldFN0YXRlPWZ1bmN0aW9uKG1hdGVyaWFsLGNhbWVyYSx1c2VDYWNoZSl7Y29uc3QgcGxhbmVzPW1hdGVyaWFsLmNsaXBwaW5nUGxhbmVzLGNsaXBJbnRlcnNlY3Rpb249bWF0ZXJpYWwuY2xpcEludGVyc2VjdGlvbixjbGlwU2hhZG93cz1tYXRlcmlhbC5jbGlwU2hhZG93cztjb25zdCBtYXRlcmlhbFByb3BlcnRpZXM9cHJvcGVydGllcy5nZXQobWF0ZXJpYWwpO2lmKCFsb2NhbENsaXBwaW5nRW5hYmxlZHx8cGxhbmVzPT09bnVsbHx8cGxhbmVzLmxlbmd0aD09PTB8fHJlbmRlcmluZ1NoYWRvd3MmJiFjbGlwU2hhZG93cyl7Ly8gdGhlcmUncyBubyBsb2NhbCBjbGlwcGluZwoJaWYocmVuZGVyaW5nU2hhZG93cyl7Ly8gdGhlcmUncyBubyBnbG9iYWwgY2xpcHBpbmcKCXByb2plY3RQbGFuZXMobnVsbCk7fWVsc2Uge3Jlc2V0R2xvYmFsU3RhdGUoKTt9fWVsc2Uge2NvbnN0IG5HbG9iYWw9cmVuZGVyaW5nU2hhZG93cz8wOm51bUdsb2JhbFBsYW5lcyxsR2xvYmFsPW5HbG9iYWwqNDtsZXQgZHN0QXJyYXk9bWF0ZXJpYWxQcm9wZXJ0aWVzLmNsaXBwaW5nU3RhdGV8fG51bGw7dW5pZm9ybS52YWx1ZT1kc3RBcnJheTsvLyBlbnN1cmUgdW5pcXVlIHN0YXRlCglkc3RBcnJheT1wcm9qZWN0UGxhbmVzKHBsYW5lcyxjYW1lcmEsbEdsb2JhbCx1c2VDYWNoZSk7Zm9yKGxldCBpPTA7aSE9PWxHbG9iYWw7KytpKXtkc3RBcnJheVtpXT1nbG9iYWxTdGF0ZVtpXTt9bWF0ZXJpYWxQcm9wZXJ0aWVzLmNsaXBwaW5nU3RhdGU9ZHN0QXJyYXk7dGhpcy5udW1JbnRlcnNlY3Rpb249Y2xpcEludGVyc2VjdGlvbj90aGlzLm51bVBsYW5lczowO3RoaXMubnVtUGxhbmVzKz1uR2xvYmFsO319O2Z1bmN0aW9uIHJlc2V0R2xvYmFsU3RhdGUoKXtpZih1bmlmb3JtLnZhbHVlIT09Z2xvYmFsU3RhdGUpe3VuaWZvcm0udmFsdWU9Z2xvYmFsU3RhdGU7dW5pZm9ybS5uZWVkc1VwZGF0ZT1udW1HbG9iYWxQbGFuZXM+MDt9c2NvcGUubnVtUGxhbmVzPW51bUdsb2JhbFBsYW5lcztzY29wZS5udW1JbnRlcnNlY3Rpb249MDt9ZnVuY3Rpb24gcHJvamVjdFBsYW5lcyhwbGFuZXMsY2FtZXJhLGRzdE9mZnNldCxza2lwVHJhbnNmb3JtKXtjb25zdCBuUGxhbmVzPXBsYW5lcyE9PW51bGw/cGxhbmVzLmxlbmd0aDowO2xldCBkc3RBcnJheT1udWxsO2lmKG5QbGFuZXMhPT0wKXtkc3RBcnJheT11bmlmb3JtLnZhbHVlO2lmKHNraXBUcmFuc2Zvcm0hPT10cnVlfHxkc3RBcnJheT09PW51bGwpe2NvbnN0IGZsYXRTaXplPWRzdE9mZnNldCtuUGxhbmVzKjQsdmlld01hdHJpeD1jYW1lcmEubWF0cml4V29ybGRJbnZlcnNlO3ZpZXdOb3JtYWxNYXRyaXguZ2V0Tm9ybWFsTWF0cml4KHZpZXdNYXRyaXgpO2lmKGRzdEFycmF5PT09bnVsbHx8ZHN0QXJyYXkubGVuZ3RoPGZsYXRTaXplKXtkc3RBcnJheT1uZXcgRmxvYXQzMkFycmF5KGZsYXRTaXplKTt9Zm9yKGxldCBpPTAsaTQ9ZHN0T2Zmc2V0O2khPT1uUGxhbmVzOysraSxpNCs9NCl7cGxhbmUuY29weShwbGFuZXNbaV0pLmFwcGx5TWF0cml4NCh2aWV3TWF0cml4LHZpZXdOb3JtYWxNYXRyaXgpO3BsYW5lLm5vcm1hbC50b0FycmF5KGRzdEFycmF5LGk0KTtkc3RBcnJheVtpNCszXT1wbGFuZS5jb25zdGFudDt9fXVuaWZvcm0udmFsdWU9ZHN0QXJyYXk7dW5pZm9ybS5uZWVkc1VwZGF0ZT10cnVlO31zY29wZS5udW1QbGFuZXM9blBsYW5lcztzY29wZS5udW1JbnRlcnNlY3Rpb249MDtyZXR1cm4gZHN0QXJyYXk7fX1mdW5jdGlvbiBXZWJHTEN1YmVNYXBzKHJlbmRlcmVyKXtsZXQgY3ViZW1hcHM9bmV3IFdlYWtNYXAoKTtmdW5jdGlvbiBtYXBUZXh0dXJlTWFwcGluZyh0ZXh0dXJlLG1hcHBpbmcpe2lmKG1hcHBpbmc9PT1FcXVpcmVjdGFuZ3VsYXJSZWZsZWN0aW9uTWFwcGluZyl7dGV4dHVyZS5tYXBwaW5nPUN1YmVSZWZsZWN0aW9uTWFwcGluZzt9ZWxzZSBpZihtYXBwaW5nPT09RXF1aXJlY3Rhbmd1bGFyUmVmcmFjdGlvbk1hcHBpbmcpe3RleHR1cmUubWFwcGluZz1DdWJlUmVmcmFjdGlvbk1hcHBpbmc7fXJldHVybiB0ZXh0dXJlO31mdW5jdGlvbiBnZXQodGV4dHVyZSl7aWYodGV4dHVyZSYmdGV4dHVyZS5pc1RleHR1cmUmJnRleHR1cmUuaXNSZW5kZXJUYXJnZXRUZXh0dXJlPT09ZmFsc2Upe2NvbnN0IG1hcHBpbmc9dGV4dHVyZS5tYXBwaW5nO2lmKG1hcHBpbmc9PT1FcXVpcmVjdGFuZ3VsYXJSZWZsZWN0aW9uTWFwcGluZ3x8bWFwcGluZz09PUVxdWlyZWN0YW5ndWxhclJlZnJhY3Rpb25NYXBwaW5nKXtpZihjdWJlbWFwcy5oYXModGV4dHVyZSkpe2NvbnN0IGN1YmVtYXA9Y3ViZW1hcHMuZ2V0KHRleHR1cmUpLnRleHR1cmU7cmV0dXJuIG1hcFRleHR1cmVNYXBwaW5nKGN1YmVtYXAsdGV4dHVyZS5tYXBwaW5nKTt9ZWxzZSB7Y29uc3QgaW1hZ2U9dGV4dHVyZS5pbWFnZTtpZihpbWFnZSYmaW1hZ2UuaGVpZ2h0PjApe2NvbnN0IGN1cnJlbnRSZW5kZXJUYXJnZXQ9cmVuZGVyZXIuZ2V0UmVuZGVyVGFyZ2V0KCk7Y29uc3QgcmVuZGVyVGFyZ2V0PW5ldyBXZWJHTEN1YmVSZW5kZXJUYXJnZXQoaW1hZ2UuaGVpZ2h0LzIpO3JlbmRlclRhcmdldC5mcm9tRXF1aXJlY3Rhbmd1bGFyVGV4dHVyZShyZW5kZXJlcix0ZXh0dXJlKTtjdWJlbWFwcy5zZXQodGV4dHVyZSxyZW5kZXJUYXJnZXQpO3JlbmRlcmVyLnNldFJlbmRlclRhcmdldChjdXJyZW50UmVuZGVyVGFyZ2V0KTt0ZXh0dXJlLmFkZEV2ZW50TGlzdGVuZXIoJ2Rpc3Bvc2UnLG9uVGV4dHVyZURpc3Bvc2UpO3JldHVybiBtYXBUZXh0dXJlTWFwcGluZyhyZW5kZXJUYXJnZXQudGV4dHVyZSx0ZXh0dXJlLm1hcHBpbmcpO31lbHNlIHsvLyBpbWFnZSBub3QgeWV0IHJlYWR5LiB0cnkgdGhlIGNvbnZlcnNpb24gbmV4dCBmcmFtZQoJcmV0dXJuIG51bGw7fX19fXJldHVybiB0ZXh0dXJlO31mdW5jdGlvbiBvblRleHR1cmVEaXNwb3NlKGV2ZW50KXtjb25zdCB0ZXh0dXJlPWV2ZW50LnRhcmdldDt0ZXh0dXJlLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Rpc3Bvc2UnLG9uVGV4dHVyZURpc3Bvc2UpO2NvbnN0IGN1YmVtYXA9Y3ViZW1hcHMuZ2V0KHRleHR1cmUpO2lmKGN1YmVtYXAhPT11bmRlZmluZWQpe2N1YmVtYXBzLmRlbGV0ZSh0ZXh0dXJlKTtjdWJlbWFwLmRpc3Bvc2UoKTt9fWZ1bmN0aW9uIGRpc3Bvc2UoKXtjdWJlbWFwcz1uZXcgV2Vha01hcCgpO31yZXR1cm4ge2dldDpnZXQsZGlzcG9zZTpkaXNwb3NlfTt9Y2xhc3MgT3J0aG9ncmFwaGljQ2FtZXJhIGV4dGVuZHMgQ2FtZXJhe2NvbnN0cnVjdG9yKGxlZnQscmlnaHQsdG9wLGJvdHRvbSxuZWFyLGZhcil7aWYobGVmdD09PXZvaWQgMCl7bGVmdD0tMTt9aWYocmlnaHQ9PT12b2lkIDApe3JpZ2h0PTE7fWlmKHRvcD09PXZvaWQgMCl7dG9wPTE7fWlmKGJvdHRvbT09PXZvaWQgMCl7Ym90dG9tPS0xO31pZihuZWFyPT09dm9pZCAwKXtuZWFyPTAuMTt9aWYoZmFyPT09dm9pZCAwKXtmYXI9MjAwMDt9c3VwZXIoKTt0aGlzLnR5cGU9J09ydGhvZ3JhcGhpY0NhbWVyYSc7dGhpcy56b29tPTE7dGhpcy52aWV3PW51bGw7dGhpcy5sZWZ0PWxlZnQ7dGhpcy5yaWdodD1yaWdodDt0aGlzLnRvcD10b3A7dGhpcy5ib3R0b209Ym90dG9tO3RoaXMubmVhcj1uZWFyO3RoaXMuZmFyPWZhcjt0aGlzLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKTt9Y29weShzb3VyY2UscmVjdXJzaXZlKXtzdXBlci5jb3B5KHNvdXJjZSxyZWN1cnNpdmUpO3RoaXMubGVmdD1zb3VyY2UubGVmdDt0aGlzLnJpZ2h0PXNvdXJjZS5yaWdodDt0aGlzLnRvcD1zb3VyY2UudG9wO3RoaXMuYm90dG9tPXNvdXJjZS5ib3R0b207dGhpcy5uZWFyPXNvdXJjZS5uZWFyO3RoaXMuZmFyPXNvdXJjZS5mYXI7dGhpcy56b29tPXNvdXJjZS56b29tO3RoaXMudmlldz1zb3VyY2Uudmlldz09PW51bGw/bnVsbDpPYmplY3QuYXNzaWduKHt9LHNvdXJjZS52aWV3KTtyZXR1cm4gdGhpczt9c2V0Vmlld09mZnNldChmdWxsV2lkdGgsZnVsbEhlaWdodCx4LHksd2lkdGgsaGVpZ2h0KXtpZih0aGlzLnZpZXc9PT1udWxsKXt0aGlzLnZpZXc9e2VuYWJsZWQ6dHJ1ZSxmdWxsV2lkdGg6MSxmdWxsSGVpZ2h0OjEsb2Zmc2V0WDowLG9mZnNldFk6MCx3aWR0aDoxLGhlaWdodDoxfTt9dGhpcy52aWV3LmVuYWJsZWQ9dHJ1ZTt0aGlzLnZpZXcuZnVsbFdpZHRoPWZ1bGxXaWR0aDt0aGlzLnZpZXcuZnVsbEhlaWdodD1mdWxsSGVpZ2h0O3RoaXMudmlldy5vZmZzZXRYPXg7dGhpcy52aWV3Lm9mZnNldFk9eTt0aGlzLnZpZXcud2lkdGg9d2lkdGg7dGhpcy52aWV3LmhlaWdodD1oZWlnaHQ7dGhpcy51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCk7fWNsZWFyVmlld09mZnNldCgpe2lmKHRoaXMudmlldyE9PW51bGwpe3RoaXMudmlldy5lbmFibGVkPWZhbHNlO310aGlzLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKTt9dXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpe2NvbnN0IGR4PSh0aGlzLnJpZ2h0LXRoaXMubGVmdCkvKDIqdGhpcy56b29tKTtjb25zdCBkeT0odGhpcy50b3AtdGhpcy5ib3R0b20pLygyKnRoaXMuem9vbSk7Y29uc3QgY3g9KHRoaXMucmlnaHQrdGhpcy5sZWZ0KS8yO2NvbnN0IGN5PSh0aGlzLnRvcCt0aGlzLmJvdHRvbSkvMjtsZXQgbGVmdD1jeC1keDtsZXQgcmlnaHQ9Y3grZHg7bGV0IHRvcD1jeStkeTtsZXQgYm90dG9tPWN5LWR5O2lmKHRoaXMudmlldyE9PW51bGwmJnRoaXMudmlldy5lbmFibGVkKXtjb25zdCBzY2FsZVc9KHRoaXMucmlnaHQtdGhpcy5sZWZ0KS90aGlzLnZpZXcuZnVsbFdpZHRoL3RoaXMuem9vbTtjb25zdCBzY2FsZUg9KHRoaXMudG9wLXRoaXMuYm90dG9tKS90aGlzLnZpZXcuZnVsbEhlaWdodC90aGlzLnpvb207bGVmdCs9c2NhbGVXKnRoaXMudmlldy5vZmZzZXRYO3JpZ2h0PWxlZnQrc2NhbGVXKnRoaXMudmlldy53aWR0aDt0b3AtPXNjYWxlSCp0aGlzLnZpZXcub2Zmc2V0WTtib3R0b209dG9wLXNjYWxlSCp0aGlzLnZpZXcuaGVpZ2h0O310aGlzLnByb2plY3Rpb25NYXRyaXgubWFrZU9ydGhvZ3JhcGhpYyhsZWZ0LHJpZ2h0LHRvcCxib3R0b20sdGhpcy5uZWFyLHRoaXMuZmFyKTt0aGlzLnByb2plY3Rpb25NYXRyaXhJbnZlcnNlLmNvcHkodGhpcy5wcm9qZWN0aW9uTWF0cml4KS5pbnZlcnQoKTt9dG9KU09OKG1ldGEpe2NvbnN0IGRhdGE9c3VwZXIudG9KU09OKG1ldGEpO2RhdGEub2JqZWN0Lnpvb209dGhpcy56b29tO2RhdGEub2JqZWN0LmxlZnQ9dGhpcy5sZWZ0O2RhdGEub2JqZWN0LnJpZ2h0PXRoaXMucmlnaHQ7ZGF0YS5vYmplY3QudG9wPXRoaXMudG9wO2RhdGEub2JqZWN0LmJvdHRvbT10aGlzLmJvdHRvbTtkYXRhLm9iamVjdC5uZWFyPXRoaXMubmVhcjtkYXRhLm9iamVjdC5mYXI9dGhpcy5mYXI7aWYodGhpcy52aWV3IT09bnVsbClkYXRhLm9iamVjdC52aWV3PU9iamVjdC5hc3NpZ24oe30sdGhpcy52aWV3KTtyZXR1cm4gZGF0YTt9fU9ydGhvZ3JhcGhpY0NhbWVyYS5wcm90b3R5cGUuaXNPcnRob2dyYXBoaWNDYW1lcmE9dHJ1ZTtjbGFzcyBSYXdTaGFkZXJNYXRlcmlhbCBleHRlbmRzIFNoYWRlck1hdGVyaWFse2NvbnN0cnVjdG9yKHBhcmFtZXRlcnMpe3N1cGVyKHBhcmFtZXRlcnMpO3RoaXMudHlwZT0nUmF3U2hhZGVyTWF0ZXJpYWwnO319UmF3U2hhZGVyTWF0ZXJpYWwucHJvdG90eXBlLmlzUmF3U2hhZGVyTWF0ZXJpYWw9dHJ1ZTtjb25zdCBMT0RfTUlOPTQ7Y29uc3QgTE9EX01BWD04O2NvbnN0IFNJWkVfTUFYPU1hdGgucG93KDIsTE9EX01BWCk7Ly8gVGhlIHN0YW5kYXJkIGRldmlhdGlvbnMgKHJhZGlhbnMpIGFzc29jaWF0ZWQgd2l0aCB0aGUgZXh0cmEgbWlwcy4gVGhlc2UgYXJlCgkvLyBjaG9zZW4gdG8gYXBwcm94aW1hdGUgYSBUcm93YnJpZGdlLVJlaXR6IGRpc3RyaWJ1dGlvbiBmdW5jdGlvbiB0aW1lcyB0aGUKCS8vIGdlb21ldHJpYyBzaGFkb3dpbmcgZnVuY3Rpb24uIFRoZXNlIHNpZ21hIHZhbHVlcyBzcXVhcmVkIG11c3QgbWF0Y2ggdGhlCgkvLyB2YXJpYW5jZSAjZGVmaW5lcyBpbiBjdWJlX3V2X3JlZmxlY3Rpb25fZnJhZ21lbnQuZ2xzbC5qcy4KCWNvbnN0IEVYVFJBX0xPRF9TSUdNQT1bMC4xMjUsMC4yMTUsMC4zNSwwLjQ0NiwwLjUyNiwwLjU4Ml07Y29uc3QgVE9UQUxfTE9EUz1MT0RfTUFYLUxPRF9NSU4rMStFWFRSQV9MT0RfU0lHTUEubGVuZ3RoOy8vIFRoZSBtYXhpbXVtIGxlbmd0aCBvZiB0aGUgYmx1ciBmb3IgbG9vcC4gU21hbGxlciBzaWdtYXMgd2lsbCB1c2UgZmV3ZXIKCS8vIHNhbXBsZXMgYW5kIGV4aXQgZWFybHksIGJ1dCBub3QgcmVjb21waWxlIHRoZSBzaGFkZXIuCgljb25zdCBNQVhfU0FNUExFUz0yMDtjb25zdCBFTkNPRElOR1M9e1tMaW5lYXJFbmNvZGluZ106MCxbc1JHQkVuY29kaW5nXToxLFtSR0JFRW5jb2RpbmddOjIsW1JHQk03RW5jb2RpbmddOjMsW1JHQk0xNkVuY29kaW5nXTo0LFtSR0JERW5jb2RpbmddOjUsW0dhbW1hRW5jb2RpbmddOjZ9O2NvbnN0IF9mbGF0Q2FtZXJhPS8qQF9fUFVSRV9fKi9uZXcgT3J0aG9ncmFwaGljQ2FtZXJhKCk7Y29uc3R7X2xvZFBsYW5lcyxfc2l6ZUxvZHMsX3NpZ21hc309LypAX19QVVJFX18qL19jcmVhdGVQbGFuZXMoKTtjb25zdCBfY2xlYXJDb2xvcj0vKkBfX1BVUkVfXyovbmV3IENvbG9yKCk7bGV0IF9vbGRUYXJnZXQ9bnVsbDsvLyBHb2xkZW4gUmF0aW8KCWNvbnN0IFBIST0oMStNYXRoLnNxcnQoNSkpLzI7Y29uc3QgSU5WX1BIST0xL1BISTsvLyBWZXJ0aWNlcyBvZiBhIGRvZGVjYWhlZHJvbiAoZXhjZXB0IHRoZSBvcHBvc2l0ZXMsIHdoaWNoIHJlcHJlc2VudCB0aGUKCS8vIHNhbWUgYXhpcyksIHVzZWQgYXMgYXhpcyBkaXJlY3Rpb25zIGV2ZW5seSBzcHJlYWQgb24gYSBzcGhlcmUuCgljb25zdCBfYXhpc0RpcmVjdGlvbnM9Wy8qQF9fUFVSRV9fKi9uZXcgVmVjdG9yMygxLDEsMSksLypAX19QVVJFX18qL25ldyBWZWN0b3IzKC0xLDEsMSksLypAX19QVVJFX18qL25ldyBWZWN0b3IzKDEsMSwtMSksLypAX19QVVJFX18qL25ldyBWZWN0b3IzKC0xLDEsLTEpLC8qQF9fUFVSRV9fKi9uZXcgVmVjdG9yMygwLFBISSxJTlZfUEhJKSwvKkBfX1BVUkVfXyovbmV3IFZlY3RvcjMoMCxQSEksLUlOVl9QSEkpLC8qQF9fUFVSRV9fKi9uZXcgVmVjdG9yMyhJTlZfUEhJLDAsUEhJKSwvKkBfX1BVUkVfXyovbmV3IFZlY3RvcjMoLUlOVl9QSEksMCxQSEkpLC8qQF9fUFVSRV9fKi9uZXcgVmVjdG9yMyhQSEksSU5WX1BISSwwKSwvKkBfX1BVUkVfXyovbmV3IFZlY3RvcjMoLVBISSxJTlZfUEhJLDApXTsvKioKCSAqIFRoaXMgY2xhc3MgZ2VuZXJhdGVzIGEgUHJlZmlsdGVyZWQsIE1pcG1hcHBlZCBSYWRpYW5jZSBFbnZpcm9ubWVudCBNYXAKCSAqIChQTVJFTSkgZnJvbSBhIGN1YmVNYXAgZW52aXJvbm1lbnQgdGV4dHVyZS4gVGhpcyBhbGxvd3MgZGlmZmVyZW50IGxldmVscyBvZgoJICogYmx1ciB0byBiZSBxdWlja2x5IGFjY2Vzc2VkIGJhc2VkIG9uIG1hdGVyaWFsIHJvdWdobmVzcy4gSXQgaXMgcGFja2VkIGludG8gYQoJICogc3BlY2lhbCBDdWJlVVYgZm9ybWF0IHRoYXQgYWxsb3dzIHVzIHRvIHBlcmZvcm0gY3VzdG9tIGludGVycG9sYXRpb24gc28gdGhhdAoJICogd2UgY2FuIHN1cHBvcnQgbm9ubGluZWFyIGZvcm1hdHMgc3VjaCBhcyBSR0JFLiBVbmxpa2UgYSB0cmFkaXRpb25hbCBtaXBtYXAKCSAqIGNoYWluLCBpdCBvbmx5IGdvZXMgZG93biB0byB0aGUgTE9EX01JTiBsZXZlbCAoYWJvdmUpLCBhbmQgdGhlbiBjcmVhdGVzIGV4dHJhCgkgKiBldmVuIG1vcmUgZmlsdGVyZWQgJ21pcHMnIGF0IHRoZSBzYW1lIExPRF9NSU4gcmVzb2x1dGlvbiwgYXNzb2NpYXRlZCB3aXRoCgkgKiBoaWdoZXIgcm91Z2huZXNzIGxldmVscy4gSW4gdGhpcyB3YXkgd2UgbWFpbnRhaW4gcmVzb2x1dGlvbiB0byBzbW9vdGhseQoJICogaW50ZXJwb2xhdGUgZGlmZnVzZSBsaWdodGluZyB3aGlsZSBsaW1pdGluZyBzYW1wbGluZyBjb21wdXRhdGlvbi4KCSAqCgkgKiBQYXBlcjogRmFzdCwgQWNjdXJhdGUgSW1hZ2UtQmFzZWQgTGlnaHRpbmcKCSAqIGh0dHBzOi8vZHJpdmUuZ29vZ2xlLmNvbS9maWxlL2QvMTV5OHJfVXBLbFU5U3ZWNElMYjBDM3FDUGVjUzhwdkx6L3ZpZXcKCSovY2xhc3MgUE1SRU1HZW5lcmF0b3J7Y29uc3RydWN0b3IocmVuZGVyZXIpe3RoaXMuX3JlbmRlcmVyPXJlbmRlcmVyO3RoaXMuX3BpbmdQb25nUmVuZGVyVGFyZ2V0PW51bGw7dGhpcy5fYmx1ck1hdGVyaWFsPV9nZXRCbHVyU2hhZGVyKE1BWF9TQU1QTEVTKTt0aGlzLl9lcXVpcmVjdFNoYWRlcj1udWxsO3RoaXMuX2N1YmVtYXBTaGFkZXI9bnVsbDt0aGlzLl9jb21waWxlTWF0ZXJpYWwodGhpcy5fYmx1ck1hdGVyaWFsKTt9LyoqCgkJICogR2VuZXJhdGVzIGEgUE1SRU0gZnJvbSBhIHN1cHBsaWVkIFNjZW5lLCB3aGljaCBjYW4gYmUgZmFzdGVyIHRoYW4gdXNpbmcgYW4KCQkgKiBpbWFnZSBpZiBuZXR3b3JraW5nIGJhbmR3aWR0aCBpcyBsb3cuIE9wdGlvbmFsIHNpZ21hIHNwZWNpZmllcyBhIGJsdXIgcmFkaXVzCgkJICogaW4gcmFkaWFucyB0byBiZSBhcHBsaWVkIHRvIHRoZSBzY2VuZSBiZWZvcmUgUE1SRU0gZ2VuZXJhdGlvbi4gT3B0aW9uYWwgbmVhcgoJCSAqIGFuZCBmYXIgcGxhbmVzIGVuc3VyZSB0aGUgc2NlbmUgaXMgcmVuZGVyZWQgaW4gaXRzIGVudGlyZXR5ICh0aGUgY3ViZUNhbWVyYQoJCSAqIGlzIHBsYWNlZCBhdCB0aGUgb3JpZ2luKS4KCQkgKi9mcm9tU2NlbmUoc2NlbmUsc2lnbWEsbmVhcixmYXIpe2lmKHNpZ21hPT09dm9pZCAwKXtzaWdtYT0wO31pZihuZWFyPT09dm9pZCAwKXtuZWFyPTAuMTt9aWYoZmFyPT09dm9pZCAwKXtmYXI9MTAwO31fb2xkVGFyZ2V0PXRoaXMuX3JlbmRlcmVyLmdldFJlbmRlclRhcmdldCgpO2NvbnN0IGN1YmVVVlJlbmRlclRhcmdldD10aGlzLl9hbGxvY2F0ZVRhcmdldHMoKTt0aGlzLl9zY2VuZVRvQ3ViZVVWKHNjZW5lLG5lYXIsZmFyLGN1YmVVVlJlbmRlclRhcmdldCk7aWYoc2lnbWE+MCl7dGhpcy5fYmx1cihjdWJlVVZSZW5kZXJUYXJnZXQsMCwwLHNpZ21hKTt9dGhpcy5fYXBwbHlQTVJFTShjdWJlVVZSZW5kZXJUYXJnZXQpO3RoaXMuX2NsZWFudXAoY3ViZVVWUmVuZGVyVGFyZ2V0KTtyZXR1cm4gY3ViZVVWUmVuZGVyVGFyZ2V0O30vKioKCQkgKiBHZW5lcmF0ZXMgYSBQTVJFTSBmcm9tIGFuIGVxdWlyZWN0YW5ndWxhciB0ZXh0dXJlLCB3aGljaCBjYW4gYmUgZWl0aGVyIExEUgoJCSAqIChSR0JGb3JtYXQpIG9yIEhEUiAoUkdCRUZvcm1hdCkuIFRoZSBpZGVhbCBpbnB1dCBpbWFnZSBzaXplIGlzIDFrICgxMDI0IHggNTEyKSwKCQkgKiBhcyB0aGlzIG1hdGNoZXMgYmVzdCB3aXRoIHRoZSAyNTYgeCAyNTYgY3ViZW1hcCBvdXRwdXQuCgkJICovZnJvbUVxdWlyZWN0YW5ndWxhcihlcXVpcmVjdGFuZ3VsYXIpe3JldHVybiB0aGlzLl9mcm9tVGV4dHVyZShlcXVpcmVjdGFuZ3VsYXIpO30vKioKCQkgKiBHZW5lcmF0ZXMgYSBQTVJFTSBmcm9tIGFuIGN1YmVtYXAgdGV4dHVyZSwgd2hpY2ggY2FuIGJlIGVpdGhlciBMRFIKCQkgKiAoUkdCRm9ybWF0KSBvciBIRFIgKFJHQkVGb3JtYXQpLiBUaGUgaWRlYWwgaW5wdXQgY3ViZSBzaXplIGlzIDI1NiB4IDI1NiwKCQkgKiBhcyB0aGlzIG1hdGNoZXMgYmVzdCB3aXRoIHRoZSAyNTYgeCAyNTYgY3ViZW1hcCBvdXRwdXQuCgkJICovZnJvbUN1YmVtYXAoY3ViZW1hcCl7cmV0dXJuIHRoaXMuX2Zyb21UZXh0dXJlKGN1YmVtYXApO30vKioKCQkgKiBQcmUtY29tcGlsZXMgdGhlIGN1YmVtYXAgc2hhZGVyLiBZb3UgY2FuIGdldCBmYXN0ZXIgc3RhcnQtdXAgYnkgaW52b2tpbmcgdGhpcyBtZXRob2QgZHVyaW5nCgkJICogeW91ciB0ZXh0dXJlJ3MgbmV0d29yayBmZXRjaCBmb3IgaW5jcmVhc2VkIGNvbmN1cnJlbmN5LgoJCSAqL2NvbXBpbGVDdWJlbWFwU2hhZGVyKCl7aWYodGhpcy5fY3ViZW1hcFNoYWRlcj09PW51bGwpe3RoaXMuX2N1YmVtYXBTaGFkZXI9X2dldEN1YmVtYXBTaGFkZXIoKTt0aGlzLl9jb21waWxlTWF0ZXJpYWwodGhpcy5fY3ViZW1hcFNoYWRlcik7fX0vKioKCQkgKiBQcmUtY29tcGlsZXMgdGhlIGVxdWlyZWN0YW5ndWxhciBzaGFkZXIuIFlvdSBjYW4gZ2V0IGZhc3RlciBzdGFydC11cCBieSBpbnZva2luZyB0aGlzIG1ldGhvZCBkdXJpbmcKCQkgKiB5b3VyIHRleHR1cmUncyBuZXR3b3JrIGZldGNoIGZvciBpbmNyZWFzZWQgY29uY3VycmVuY3kuCgkJICovY29tcGlsZUVxdWlyZWN0YW5ndWxhclNoYWRlcigpe2lmKHRoaXMuX2VxdWlyZWN0U2hhZGVyPT09bnVsbCl7dGhpcy5fZXF1aXJlY3RTaGFkZXI9X2dldEVxdWlyZWN0U2hhZGVyKCk7dGhpcy5fY29tcGlsZU1hdGVyaWFsKHRoaXMuX2VxdWlyZWN0U2hhZGVyKTt9fS8qKgoJCSAqIERpc3Bvc2VzIG9mIHRoZSBQTVJFTUdlbmVyYXRvcidzIGludGVybmFsIG1lbW9yeS4gTm90ZSB0aGF0IFBNUkVNR2VuZXJhdG9yIGlzIGEgc3RhdGljIGNsYXNzLAoJCSAqIHNvIHlvdSBzaG91bGQgbm90IG5lZWQgbW9yZSB0aGFuIG9uZSBQTVJFTUdlbmVyYXRvciBvYmplY3QuIElmIHlvdSBkbywgY2FsbGluZyBkaXNwb3NlKCkgb24KCQkgKiBvbmUgb2YgdGhlbSB3aWxsIGNhdXNlIGFueSBvdGhlcnMgdG8gYWxzbyBiZWNvbWUgdW51c2FibGUuCgkJICovZGlzcG9zZSgpe3RoaXMuX2JsdXJNYXRlcmlhbC5kaXNwb3NlKCk7aWYodGhpcy5fY3ViZW1hcFNoYWRlciE9PW51bGwpdGhpcy5fY3ViZW1hcFNoYWRlci5kaXNwb3NlKCk7aWYodGhpcy5fZXF1aXJlY3RTaGFkZXIhPT1udWxsKXRoaXMuX2VxdWlyZWN0U2hhZGVyLmRpc3Bvc2UoKTtmb3IobGV0IGk9MDtpPF9sb2RQbGFuZXMubGVuZ3RoO2krKyl7X2xvZFBsYW5lc1tpXS5kaXNwb3NlKCk7fX0vLyBwcml2YXRlIGludGVyZmFjZQoJX2NsZWFudXAob3V0cHV0VGFyZ2V0KXt0aGlzLl9waW5nUG9uZ1JlbmRlclRhcmdldC5kaXNwb3NlKCk7dGhpcy5fcmVuZGVyZXIuc2V0UmVuZGVyVGFyZ2V0KF9vbGRUYXJnZXQpO291dHB1dFRhcmdldC5zY2lzc29yVGVzdD1mYWxzZTtfc2V0Vmlld3BvcnQob3V0cHV0VGFyZ2V0LDAsMCxvdXRwdXRUYXJnZXQud2lkdGgsb3V0cHV0VGFyZ2V0LmhlaWdodCk7fV9mcm9tVGV4dHVyZSh0ZXh0dXJlKXtfb2xkVGFyZ2V0PXRoaXMuX3JlbmRlcmVyLmdldFJlbmRlclRhcmdldCgpO2NvbnN0IGN1YmVVVlJlbmRlclRhcmdldD10aGlzLl9hbGxvY2F0ZVRhcmdldHModGV4dHVyZSk7dGhpcy5fdGV4dHVyZVRvQ3ViZVVWKHRleHR1cmUsY3ViZVVWUmVuZGVyVGFyZ2V0KTt0aGlzLl9hcHBseVBNUkVNKGN1YmVVVlJlbmRlclRhcmdldCk7dGhpcy5fY2xlYW51cChjdWJlVVZSZW5kZXJUYXJnZXQpO3JldHVybiBjdWJlVVZSZW5kZXJUYXJnZXQ7fV9hbGxvY2F0ZVRhcmdldHModGV4dHVyZSl7Ly8gd2FybmluZzogbnVsbCB0ZXh0dXJlIGlzIHZhbGlkCgljb25zdCBwYXJhbXM9e21hZ0ZpbHRlcjpOZWFyZXN0RmlsdGVyLG1pbkZpbHRlcjpOZWFyZXN0RmlsdGVyLGdlbmVyYXRlTWlwbWFwczpmYWxzZSx0eXBlOlVuc2lnbmVkQnl0ZVR5cGUsZm9ybWF0OlJHQkVGb3JtYXQsZW5jb2Rpbmc6X2lzTERSKHRleHR1cmUpP3RleHR1cmUuZW5jb2Rpbmc6UkdCRUVuY29kaW5nLGRlcHRoQnVmZmVyOmZhbHNlfTtjb25zdCBjdWJlVVZSZW5kZXJUYXJnZXQ9X2NyZWF0ZVJlbmRlclRhcmdldChwYXJhbXMpO2N1YmVVVlJlbmRlclRhcmdldC5kZXB0aEJ1ZmZlcj10ZXh0dXJlP2ZhbHNlOnRydWU7dGhpcy5fcGluZ1BvbmdSZW5kZXJUYXJnZXQ9X2NyZWF0ZVJlbmRlclRhcmdldChwYXJhbXMpO3JldHVybiBjdWJlVVZSZW5kZXJUYXJnZXQ7fV9jb21waWxlTWF0ZXJpYWwobWF0ZXJpYWwpe2NvbnN0IHRtcE1lc2g9bmV3IE1lc2goX2xvZFBsYW5lc1swXSxtYXRlcmlhbCk7dGhpcy5fcmVuZGVyZXIuY29tcGlsZSh0bXBNZXNoLF9mbGF0Q2FtZXJhKTt9X3NjZW5lVG9DdWJlVVYoc2NlbmUsbmVhcixmYXIsY3ViZVVWUmVuZGVyVGFyZ2V0KXtjb25zdCBmb3Y9OTA7Y29uc3QgYXNwZWN0PTE7Y29uc3QgY3ViZUNhbWVyYT1uZXcgUGVyc3BlY3RpdmVDYW1lcmEoZm92LGFzcGVjdCxuZWFyLGZhcik7Y29uc3QgdXBTaWduPVsxLC0xLDEsMSwxLDFdO2NvbnN0IGZvcndhcmRTaWduPVsxLDEsMSwtMSwtMSwtMV07Y29uc3QgcmVuZGVyZXI9dGhpcy5fcmVuZGVyZXI7Y29uc3Qgb3JpZ2luYWxBdXRvQ2xlYXI9cmVuZGVyZXIuYXV0b0NsZWFyO2NvbnN0IG91dHB1dEVuY29kaW5nPXJlbmRlcmVyLm91dHB1dEVuY29kaW5nO2NvbnN0IHRvbmVNYXBwaW5nPXJlbmRlcmVyLnRvbmVNYXBwaW5nO3JlbmRlcmVyLmdldENsZWFyQ29sb3IoX2NsZWFyQ29sb3IpO3JlbmRlcmVyLnRvbmVNYXBwaW5nPU5vVG9uZU1hcHBpbmc7cmVuZGVyZXIub3V0cHV0RW5jb2Rpbmc9TGluZWFyRW5jb2Rpbmc7cmVuZGVyZXIuYXV0b0NsZWFyPWZhbHNlO2NvbnN0IGJhY2tncm91bmRNYXRlcmlhbD1uZXcgTWVzaEJhc2ljTWF0ZXJpYWwoe25hbWU6J1BNUkVNLkJhY2tncm91bmQnLHNpZGU6QmFja1NpZGUsZGVwdGhXcml0ZTpmYWxzZSxkZXB0aFRlc3Q6ZmFsc2V9KTtjb25zdCBiYWNrZ3JvdW5kQm94PW5ldyBNZXNoKG5ldyBCb3hHZW9tZXRyeSgpLGJhY2tncm91bmRNYXRlcmlhbCk7bGV0IHVzZVNvbGlkQ29sb3I9ZmFsc2U7Y29uc3QgYmFja2dyb3VuZD1zY2VuZS5iYWNrZ3JvdW5kO2lmKGJhY2tncm91bmQpe2lmKGJhY2tncm91bmQuaXNDb2xvcil7YmFja2dyb3VuZE1hdGVyaWFsLmNvbG9yLmNvcHkoYmFja2dyb3VuZCk7c2NlbmUuYmFja2dyb3VuZD1udWxsO3VzZVNvbGlkQ29sb3I9dHJ1ZTt9fWVsc2Uge2JhY2tncm91bmRNYXRlcmlhbC5jb2xvci5jb3B5KF9jbGVhckNvbG9yKTt1c2VTb2xpZENvbG9yPXRydWU7fWZvcihsZXQgaT0wO2k8NjtpKyspe2NvbnN0IGNvbD1pJTM7aWYoY29sPT0wKXtjdWJlQ2FtZXJhLnVwLnNldCgwLHVwU2lnbltpXSwwKTtjdWJlQ2FtZXJhLmxvb2tBdChmb3J3YXJkU2lnbltpXSwwLDApO31lbHNlIGlmKGNvbD09MSl7Y3ViZUNhbWVyYS51cC5zZXQoMCwwLHVwU2lnbltpXSk7Y3ViZUNhbWVyYS5sb29rQXQoMCxmb3J3YXJkU2lnbltpXSwwKTt9ZWxzZSB7Y3ViZUNhbWVyYS51cC5zZXQoMCx1cFNpZ25baV0sMCk7Y3ViZUNhbWVyYS5sb29rQXQoMCwwLGZvcndhcmRTaWduW2ldKTt9X3NldFZpZXdwb3J0KGN1YmVVVlJlbmRlclRhcmdldCxjb2wqU0laRV9NQVgsaT4yP1NJWkVfTUFYOjAsU0laRV9NQVgsU0laRV9NQVgpO3JlbmRlcmVyLnNldFJlbmRlclRhcmdldChjdWJlVVZSZW5kZXJUYXJnZXQpO2lmKHVzZVNvbGlkQ29sb3Ipe3JlbmRlcmVyLnJlbmRlcihiYWNrZ3JvdW5kQm94LGN1YmVDYW1lcmEpO31yZW5kZXJlci5yZW5kZXIoc2NlbmUsY3ViZUNhbWVyYSk7fWJhY2tncm91bmRCb3guZ2VvbWV0cnkuZGlzcG9zZSgpO2JhY2tncm91bmRCb3gubWF0ZXJpYWwuZGlzcG9zZSgpO3JlbmRlcmVyLnRvbmVNYXBwaW5nPXRvbmVNYXBwaW5nO3JlbmRlcmVyLm91dHB1dEVuY29kaW5nPW91dHB1dEVuY29kaW5nO3JlbmRlcmVyLmF1dG9DbGVhcj1vcmlnaW5hbEF1dG9DbGVhcjtzY2VuZS5iYWNrZ3JvdW5kPWJhY2tncm91bmQ7fV9zZXRFbmNvZGluZyh1bmlmb3JtLHRleHR1cmUpey8qIGlmICggdGhpcy5fcmVuZGVyZXIuY2FwYWJpbGl0aWVzLmlzV2ViR0wyID09PSB0cnVlICYmIHRleHR1cmUuZm9ybWF0ID09PSBSR0JBRm9ybWF0ICYmIHRleHR1cmUudHlwZSA9PT0gVW5zaWduZWRCeXRlVHlwZSAmJiB0ZXh0dXJlLmVuY29kaW5nID09PSBzUkdCRW5jb2RpbmcgKSB7CgoJCQkJdW5pZm9ybS52YWx1ZSA9IEVOQ09ESU5HU1sgTGluZWFyRW5jb2RpbmcgXTsKCgkJCX0gZWxzZSB7CgoJCQkJdW5pZm9ybS52YWx1ZSA9IEVOQ09ESU5HU1sgdGV4dHVyZS5lbmNvZGluZyBdOwoKCQkJfSAqL3VuaWZvcm0udmFsdWU9RU5DT0RJTkdTW3RleHR1cmUuZW5jb2RpbmddO31fdGV4dHVyZVRvQ3ViZVVWKHRleHR1cmUsY3ViZVVWUmVuZGVyVGFyZ2V0KXtjb25zdCByZW5kZXJlcj10aGlzLl9yZW5kZXJlcjtjb25zdCBpc0N1YmVUZXh0dXJlPXRleHR1cmUubWFwcGluZz09PUN1YmVSZWZsZWN0aW9uTWFwcGluZ3x8dGV4dHVyZS5tYXBwaW5nPT09Q3ViZVJlZnJhY3Rpb25NYXBwaW5nO2lmKGlzQ3ViZVRleHR1cmUpe2lmKHRoaXMuX2N1YmVtYXBTaGFkZXI9PW51bGwpe3RoaXMuX2N1YmVtYXBTaGFkZXI9X2dldEN1YmVtYXBTaGFkZXIoKTt9fWVsc2Uge2lmKHRoaXMuX2VxdWlyZWN0U2hhZGVyPT1udWxsKXt0aGlzLl9lcXVpcmVjdFNoYWRlcj1fZ2V0RXF1aXJlY3RTaGFkZXIoKTt9fWNvbnN0IG1hdGVyaWFsPWlzQ3ViZVRleHR1cmU/dGhpcy5fY3ViZW1hcFNoYWRlcjp0aGlzLl9lcXVpcmVjdFNoYWRlcjtjb25zdCBtZXNoPW5ldyBNZXNoKF9sb2RQbGFuZXNbMF0sbWF0ZXJpYWwpO2NvbnN0IHVuaWZvcm1zPW1hdGVyaWFsLnVuaWZvcm1zO3VuaWZvcm1zWydlbnZNYXAnXS52YWx1ZT10ZXh0dXJlO2lmKCFpc0N1YmVUZXh0dXJlKXt1bmlmb3Jtc1sndGV4ZWxTaXplJ10udmFsdWUuc2V0KDEuMC90ZXh0dXJlLmltYWdlLndpZHRoLDEuMC90ZXh0dXJlLmltYWdlLmhlaWdodCk7fXRoaXMuX3NldEVuY29kaW5nKHVuaWZvcm1zWydpbnB1dEVuY29kaW5nJ10sdGV4dHVyZSk7dGhpcy5fc2V0RW5jb2RpbmcodW5pZm9ybXNbJ291dHB1dEVuY29kaW5nJ10sY3ViZVVWUmVuZGVyVGFyZ2V0LnRleHR1cmUpO19zZXRWaWV3cG9ydChjdWJlVVZSZW5kZXJUYXJnZXQsMCwwLDMqU0laRV9NQVgsMipTSVpFX01BWCk7cmVuZGVyZXIuc2V0UmVuZGVyVGFyZ2V0KGN1YmVVVlJlbmRlclRhcmdldCk7cmVuZGVyZXIucmVuZGVyKG1lc2gsX2ZsYXRDYW1lcmEpO31fYXBwbHlQTVJFTShjdWJlVVZSZW5kZXJUYXJnZXQpe2NvbnN0IHJlbmRlcmVyPXRoaXMuX3JlbmRlcmVyO2NvbnN0IGF1dG9DbGVhcj1yZW5kZXJlci5hdXRvQ2xlYXI7cmVuZGVyZXIuYXV0b0NsZWFyPWZhbHNlO2ZvcihsZXQgaT0xO2k8VE9UQUxfTE9EUztpKyspe2NvbnN0IHNpZ21hPU1hdGguc3FydChfc2lnbWFzW2ldKl9zaWdtYXNbaV0tX3NpZ21hc1tpLTFdKl9zaWdtYXNbaS0xXSk7Y29uc3QgcG9sZUF4aXM9X2F4aXNEaXJlY3Rpb25zWyhpLTEpJV9heGlzRGlyZWN0aW9ucy5sZW5ndGhdO3RoaXMuX2JsdXIoY3ViZVVWUmVuZGVyVGFyZ2V0LGktMSxpLHNpZ21hLHBvbGVBeGlzKTt9cmVuZGVyZXIuYXV0b0NsZWFyPWF1dG9DbGVhcjt9LyoqCgkJICogVGhpcyBpcyBhIHR3by1wYXNzIEdhdXNzaWFuIGJsdXIgZm9yIGEgY3ViZW1hcC4gTm9ybWFsbHkgdGhpcyBpcyBkb25lCgkJICogdmVydGljYWxseSBhbmQgaG9yaXpvbnRhbGx5LCBidXQgdGhpcyBicmVha3MgZG93biBvbiBhIGN1YmUuIEhlcmUgd2UgYXBwbHkKCQkgKiB0aGUgYmx1ciBsYXRpdHVkaW5hbGx5IChhcm91bmQgdGhlIHBvbGVzKSwgYW5kIHRoZW4gbG9uZ2l0dWRpbmFsbHkgKHRvd2FyZHMKCQkgKiB0aGUgcG9sZXMpIHRvIGFwcHJveGltYXRlIHRoZSBvcnRob2dvbmFsbHktc2VwYXJhYmxlIGJsdXIuIEl0IGlzIGxlYXN0CgkJICogYWNjdXJhdGUgYXQgdGhlIHBvbGVzLCBidXQgc3RpbGwgZG9lcyBhIGRlY2VudCBqb2IuCgkJICovX2JsdXIoY3ViZVVWUmVuZGVyVGFyZ2V0LGxvZEluLGxvZE91dCxzaWdtYSxwb2xlQXhpcyl7Y29uc3QgcGluZ1BvbmdSZW5kZXJUYXJnZXQ9dGhpcy5fcGluZ1BvbmdSZW5kZXJUYXJnZXQ7dGhpcy5faGFsZkJsdXIoY3ViZVVWUmVuZGVyVGFyZ2V0LHBpbmdQb25nUmVuZGVyVGFyZ2V0LGxvZEluLGxvZE91dCxzaWdtYSwnbGF0aXR1ZGluYWwnLHBvbGVBeGlzKTt0aGlzLl9oYWxmQmx1cihwaW5nUG9uZ1JlbmRlclRhcmdldCxjdWJlVVZSZW5kZXJUYXJnZXQsbG9kT3V0LGxvZE91dCxzaWdtYSwnbG9uZ2l0dWRpbmFsJyxwb2xlQXhpcyk7fV9oYWxmQmx1cih0YXJnZXRJbix0YXJnZXRPdXQsbG9kSW4sbG9kT3V0LHNpZ21hUmFkaWFucyxkaXJlY3Rpb24scG9sZUF4aXMpe2NvbnN0IHJlbmRlcmVyPXRoaXMuX3JlbmRlcmVyO2NvbnN0IGJsdXJNYXRlcmlhbD10aGlzLl9ibHVyTWF0ZXJpYWw7aWYoZGlyZWN0aW9uIT09J2xhdGl0dWRpbmFsJyYmZGlyZWN0aW9uIT09J2xvbmdpdHVkaW5hbCcpe2NvbnNvbGUuZXJyb3IoJ2JsdXIgZGlyZWN0aW9uIG11c3QgYmUgZWl0aGVyIGxhdGl0dWRpbmFsIG9yIGxvbmdpdHVkaW5hbCEnKTt9Ly8gTnVtYmVyIG9mIHN0YW5kYXJkIGRldmlhdGlvbnMgYXQgd2hpY2ggdG8gY3V0IG9mZiB0aGUgZGlzY3JldGUgYXBwcm94aW1hdGlvbi4KCWNvbnN0IFNUQU5EQVJEX0RFVklBVElPTlM9Mztjb25zdCBibHVyTWVzaD1uZXcgTWVzaChfbG9kUGxhbmVzW2xvZE91dF0sYmx1ck1hdGVyaWFsKTtjb25zdCBibHVyVW5pZm9ybXM9Ymx1ck1hdGVyaWFsLnVuaWZvcm1zO2NvbnN0IHBpeGVscz1fc2l6ZUxvZHNbbG9kSW5dLTE7Y29uc3QgcmFkaWFuc1BlclBpeGVsPWlzRmluaXRlKHNpZ21hUmFkaWFucyk/TWF0aC5QSS8oMipwaXhlbHMpOjIqTWF0aC5QSS8oMipNQVhfU0FNUExFUy0xKTtjb25zdCBzaWdtYVBpeGVscz1zaWdtYVJhZGlhbnMvcmFkaWFuc1BlclBpeGVsO2NvbnN0IHNhbXBsZXM9aXNGaW5pdGUoc2lnbWFSYWRpYW5zKT8xK01hdGguZmxvb3IoU1RBTkRBUkRfREVWSUFUSU9OUypzaWdtYVBpeGVscyk6TUFYX1NBTVBMRVM7aWYoc2FtcGxlcz5NQVhfU0FNUExFUyl7Y29uc29sZS53YXJuKGBzaWdtYVJhZGlhbnMsICR7c2lnbWFSYWRpYW5zfSwgaXMgdG9vIGxhcmdlIGFuZCB3aWxsIGNsaXAsIGFzIGl0IHJlcXVlc3RlZCAke3NhbXBsZXN9IHNhbXBsZXMgd2hlbiB0aGUgbWF4aW11bSBpcyBzZXQgdG8gJHtNQVhfU0FNUExFU31gKTt9Y29uc3Qgd2VpZ2h0cz1bXTtsZXQgc3VtPTA7Zm9yKGxldCBpPTA7aTxNQVhfU0FNUExFUzsrK2kpe2NvbnN0IHg9aS9zaWdtYVBpeGVscztjb25zdCB3ZWlnaHQ9TWF0aC5leHAoLXgqeC8yKTt3ZWlnaHRzLnB1c2god2VpZ2h0KTtpZihpPT0wKXtzdW0rPXdlaWdodDt9ZWxzZSBpZihpPHNhbXBsZXMpe3N1bSs9Mip3ZWlnaHQ7fX1mb3IobGV0IGk9MDtpPHdlaWdodHMubGVuZ3RoO2krKyl7d2VpZ2h0c1tpXT13ZWlnaHRzW2ldL3N1bTt9Ymx1clVuaWZvcm1zWydlbnZNYXAnXS52YWx1ZT10YXJnZXRJbi50ZXh0dXJlO2JsdXJVbmlmb3Jtc1snc2FtcGxlcyddLnZhbHVlPXNhbXBsZXM7Ymx1clVuaWZvcm1zWyd3ZWlnaHRzJ10udmFsdWU9d2VpZ2h0cztibHVyVW5pZm9ybXNbJ2xhdGl0dWRpbmFsJ10udmFsdWU9ZGlyZWN0aW9uPT09J2xhdGl0dWRpbmFsJztpZihwb2xlQXhpcyl7Ymx1clVuaWZvcm1zWydwb2xlQXhpcyddLnZhbHVlPXBvbGVBeGlzO31ibHVyVW5pZm9ybXNbJ2RUaGV0YSddLnZhbHVlPXJhZGlhbnNQZXJQaXhlbDtibHVyVW5pZm9ybXNbJ21pcEludCddLnZhbHVlPUxPRF9NQVgtbG9kSW47dGhpcy5fc2V0RW5jb2RpbmcoYmx1clVuaWZvcm1zWydpbnB1dEVuY29kaW5nJ10sdGFyZ2V0SW4udGV4dHVyZSk7dGhpcy5fc2V0RW5jb2RpbmcoYmx1clVuaWZvcm1zWydvdXRwdXRFbmNvZGluZyddLHRhcmdldEluLnRleHR1cmUpO2NvbnN0IG91dHB1dFNpemU9X3NpemVMb2RzW2xvZE91dF07Y29uc3QgeD0zKk1hdGgubWF4KDAsU0laRV9NQVgtMipvdXRwdXRTaXplKTtjb25zdCB5PShsb2RPdXQ9PT0wPzA6MipTSVpFX01BWCkrMipvdXRwdXRTaXplKihsb2RPdXQ+TE9EX01BWC1MT0RfTUlOP2xvZE91dC1MT0RfTUFYK0xPRF9NSU46MCk7X3NldFZpZXdwb3J0KHRhcmdldE91dCx4LHksMypvdXRwdXRTaXplLDIqb3V0cHV0U2l6ZSk7cmVuZGVyZXIuc2V0UmVuZGVyVGFyZ2V0KHRhcmdldE91dCk7cmVuZGVyZXIucmVuZGVyKGJsdXJNZXNoLF9mbGF0Q2FtZXJhKTt9fWZ1bmN0aW9uIF9pc0xEUih0ZXh0dXJlKXtpZih0ZXh0dXJlPT09dW5kZWZpbmVkfHx0ZXh0dXJlLnR5cGUhPT1VbnNpZ25lZEJ5dGVUeXBlKXJldHVybiBmYWxzZTtyZXR1cm4gdGV4dHVyZS5lbmNvZGluZz09PUxpbmVhckVuY29kaW5nfHx0ZXh0dXJlLmVuY29kaW5nPT09c1JHQkVuY29kaW5nfHx0ZXh0dXJlLmVuY29kaW5nPT09R2FtbWFFbmNvZGluZzt9ZnVuY3Rpb24gX2NyZWF0ZVBsYW5lcygpe2NvbnN0IF9sb2RQbGFuZXM9W107Y29uc3QgX3NpemVMb2RzPVtdO2NvbnN0IF9zaWdtYXM9W107bGV0IGxvZD1MT0RfTUFYO2ZvcihsZXQgaT0wO2k8VE9UQUxfTE9EUztpKyspe2NvbnN0IHNpemVMb2Q9TWF0aC5wb3coMixsb2QpO19zaXplTG9kcy5wdXNoKHNpemVMb2QpO2xldCBzaWdtYT0xLjAvc2l6ZUxvZDtpZihpPkxPRF9NQVgtTE9EX01JTil7c2lnbWE9RVhUUkFfTE9EX1NJR01BW2ktTE9EX01BWCtMT0RfTUlOLTFdO31lbHNlIGlmKGk9PTApe3NpZ21hPTA7fV9zaWdtYXMucHVzaChzaWdtYSk7Y29uc3QgdGV4ZWxTaXplPTEuMC8oc2l6ZUxvZC0xKTtjb25zdCBtaW49LXRleGVsU2l6ZS8yO2NvbnN0IG1heD0xK3RleGVsU2l6ZS8yO2NvbnN0IHV2MT1bbWluLG1pbixtYXgsbWluLG1heCxtYXgsbWluLG1pbixtYXgsbWF4LG1pbixtYXhdO2NvbnN0IGN1YmVGYWNlcz02O2NvbnN0IHZlcnRpY2VzPTY7Y29uc3QgcG9zaXRpb25TaXplPTM7Y29uc3QgdXZTaXplPTI7Y29uc3QgZmFjZUluZGV4U2l6ZT0xO2NvbnN0IHBvc2l0aW9uPW5ldyBGbG9hdDMyQXJyYXkocG9zaXRpb25TaXplKnZlcnRpY2VzKmN1YmVGYWNlcyk7Y29uc3QgdXY9bmV3IEZsb2F0MzJBcnJheSh1dlNpemUqdmVydGljZXMqY3ViZUZhY2VzKTtjb25zdCBmYWNlSW5kZXg9bmV3IEZsb2F0MzJBcnJheShmYWNlSW5kZXhTaXplKnZlcnRpY2VzKmN1YmVGYWNlcyk7Zm9yKGxldCBmYWNlPTA7ZmFjZTxjdWJlRmFjZXM7ZmFjZSsrKXtjb25zdCB4PWZhY2UlMyoyLzMtMTtjb25zdCB5PWZhY2U+Mj8wOi0xO2NvbnN0IGNvb3JkaW5hdGVzPVt4LHksMCx4KzIvMyx5LDAseCsyLzMseSsxLDAseCx5LDAseCsyLzMseSsxLDAseCx5KzEsMF07cG9zaXRpb24uc2V0KGNvb3JkaW5hdGVzLHBvc2l0aW9uU2l6ZSp2ZXJ0aWNlcypmYWNlKTt1di5zZXQodXYxLHV2U2l6ZSp2ZXJ0aWNlcypmYWNlKTtjb25zdCBmaWxsPVtmYWNlLGZhY2UsZmFjZSxmYWNlLGZhY2UsZmFjZV07ZmFjZUluZGV4LnNldChmaWxsLGZhY2VJbmRleFNpemUqdmVydGljZXMqZmFjZSk7fWNvbnN0IHBsYW5lcz1uZXcgQnVmZmVyR2VvbWV0cnkoKTtwbGFuZXMuc2V0QXR0cmlidXRlKCdwb3NpdGlvbicsbmV3IEJ1ZmZlckF0dHJpYnV0ZShwb3NpdGlvbixwb3NpdGlvblNpemUpKTtwbGFuZXMuc2V0QXR0cmlidXRlKCd1dicsbmV3IEJ1ZmZlckF0dHJpYnV0ZSh1dix1dlNpemUpKTtwbGFuZXMuc2V0QXR0cmlidXRlKCdmYWNlSW5kZXgnLG5ldyBCdWZmZXJBdHRyaWJ1dGUoZmFjZUluZGV4LGZhY2VJbmRleFNpemUpKTtfbG9kUGxhbmVzLnB1c2gocGxhbmVzKTtpZihsb2Q+TE9EX01JTil7bG9kLS07fX1yZXR1cm4ge19sb2RQbGFuZXMsX3NpemVMb2RzLF9zaWdtYXN9O31mdW5jdGlvbiBfY3JlYXRlUmVuZGVyVGFyZ2V0KHBhcmFtcyl7Y29uc3QgY3ViZVVWUmVuZGVyVGFyZ2V0PW5ldyBXZWJHTFJlbmRlclRhcmdldCgzKlNJWkVfTUFYLDMqU0laRV9NQVgscGFyYW1zKTtjdWJlVVZSZW5kZXJUYXJnZXQudGV4dHVyZS5tYXBwaW5nPUN1YmVVVlJlZmxlY3Rpb25NYXBwaW5nO2N1YmVVVlJlbmRlclRhcmdldC50ZXh0dXJlLm5hbWU9J1BNUkVNLmN1YmVVdic7Y3ViZVVWUmVuZGVyVGFyZ2V0LnNjaXNzb3JUZXN0PXRydWU7cmV0dXJuIGN1YmVVVlJlbmRlclRhcmdldDt9ZnVuY3Rpb24gX3NldFZpZXdwb3J0KHRhcmdldCx4LHksd2lkdGgsaGVpZ2h0KXt0YXJnZXQudmlld3BvcnQuc2V0KHgseSx3aWR0aCxoZWlnaHQpO3RhcmdldC5zY2lzc29yLnNldCh4LHksd2lkdGgsaGVpZ2h0KTt9ZnVuY3Rpb24gX2dldEJsdXJTaGFkZXIobWF4U2FtcGxlcyl7Y29uc3Qgd2VpZ2h0cz1uZXcgRmxvYXQzMkFycmF5KG1heFNhbXBsZXMpO2NvbnN0IHBvbGVBeGlzPW5ldyBWZWN0b3IzKDAsMSwwKTtjb25zdCBzaGFkZXJNYXRlcmlhbD1uZXcgUmF3U2hhZGVyTWF0ZXJpYWwoe25hbWU6J1NwaGVyaWNhbEdhdXNzaWFuQmx1cicsZGVmaW5lczp7J24nOm1heFNhbXBsZXN9LHVuaWZvcm1zOnsnZW52TWFwJzp7dmFsdWU6bnVsbH0sJ3NhbXBsZXMnOnt2YWx1ZToxfSwnd2VpZ2h0cyc6e3ZhbHVlOndlaWdodHN9LCdsYXRpdHVkaW5hbCc6e3ZhbHVlOmZhbHNlfSwnZFRoZXRhJzp7dmFsdWU6MH0sJ21pcEludCc6e3ZhbHVlOjB9LCdwb2xlQXhpcyc6e3ZhbHVlOnBvbGVBeGlzfSwnaW5wdXRFbmNvZGluZyc6e3ZhbHVlOkVOQ09ESU5HU1tMaW5lYXJFbmNvZGluZ119LCdvdXRwdXRFbmNvZGluZyc6e3ZhbHVlOkVOQ09ESU5HU1tMaW5lYXJFbmNvZGluZ119fSx2ZXJ0ZXhTaGFkZXI6X2dldENvbW1vblZlcnRleFNoYWRlcigpLGZyYWdtZW50U2hhZGVyOi8qIGdsc2wgKi9gCgoJCQlwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDsKCQkJcHJlY2lzaW9uIG1lZGl1bXAgaW50OwoKCQkJdmFyeWluZyB2ZWMzIHZPdXRwdXREaXJlY3Rpb247CgoJCQl1bmlmb3JtIHNhbXBsZXIyRCBlbnZNYXA7CgkJCXVuaWZvcm0gaW50IHNhbXBsZXM7CgkJCXVuaWZvcm0gZmxvYXQgd2VpZ2h0c1sgbiBdOwoJCQl1bmlmb3JtIGJvb2wgbGF0aXR1ZGluYWw7CgkJCXVuaWZvcm0gZmxvYXQgZFRoZXRhOwoJCQl1bmlmb3JtIGZsb2F0IG1pcEludDsKCQkJdW5pZm9ybSB2ZWMzIHBvbGVBeGlzOwoKCQkJJHtfZ2V0RW5jb2RpbmdzKCl9CgoJCQkjZGVmaW5lIEVOVk1BUF9UWVBFX0NVQkVfVVYKCQkJI2luY2x1ZGUgPGN1YmVfdXZfcmVmbGVjdGlvbl9mcmFnbWVudD4KCgkJCXZlYzMgZ2V0U2FtcGxlKCBmbG9hdCB0aGV0YSwgdmVjMyBheGlzICkgewoKCQkJCWZsb2F0IGNvc1RoZXRhID0gY29zKCB0aGV0YSApOwoJCQkJLy8gUm9kcmlndWVzJyBheGlzLWFuZ2xlIHJvdGF0aW9uCgkJCQl2ZWMzIHNhbXBsZURpcmVjdGlvbiA9IHZPdXRwdXREaXJlY3Rpb24gKiBjb3NUaGV0YQoJCQkJCSsgY3Jvc3MoIGF4aXMsIHZPdXRwdXREaXJlY3Rpb24gKSAqIHNpbiggdGhldGEgKQoJCQkJCSsgYXhpcyAqIGRvdCggYXhpcywgdk91dHB1dERpcmVjdGlvbiApICogKCAxLjAgLSBjb3NUaGV0YSApOwoKCQkJCXJldHVybiBiaWxpbmVhckN1YmVVViggZW52TWFwLCBzYW1wbGVEaXJlY3Rpb24sIG1pcEludCApOwoKCQkJfQoKCQkJdm9pZCBtYWluKCkgewoKCQkJCXZlYzMgYXhpcyA9IGxhdGl0dWRpbmFsID8gcG9sZUF4aXMgOiBjcm9zcyggcG9sZUF4aXMsIHZPdXRwdXREaXJlY3Rpb24gKTsKCgkJCQlpZiAoIGFsbCggZXF1YWwoIGF4aXMsIHZlYzMoIDAuMCApICkgKSApIHsKCgkJCQkJYXhpcyA9IHZlYzMoIHZPdXRwdXREaXJlY3Rpb24ueiwgMC4wLCAtIHZPdXRwdXREaXJlY3Rpb24ueCApOwoKCQkJCX0KCgkJCQlheGlzID0gbm9ybWFsaXplKCBheGlzICk7CgoJCQkJZ2xfRnJhZ0NvbG9yID0gdmVjNCggMC4wLCAwLjAsIDAuMCwgMS4wICk7CgkJCQlnbF9GcmFnQ29sb3IucmdiICs9IHdlaWdodHNbIDAgXSAqIGdldFNhbXBsZSggMC4wLCBheGlzICk7CgoJCQkJZm9yICggaW50IGkgPSAxOyBpIDwgbjsgaSsrICkgewoKCQkJCQlpZiAoIGkgPj0gc2FtcGxlcyApIHsKCgkJCQkJCWJyZWFrOwoKCQkJCQl9CgoJCQkJCWZsb2F0IHRoZXRhID0gZFRoZXRhICogZmxvYXQoIGkgKTsKCQkJCQlnbF9GcmFnQ29sb3IucmdiICs9IHdlaWdodHNbIGkgXSAqIGdldFNhbXBsZSggLTEuMCAqIHRoZXRhLCBheGlzICk7CgkJCQkJZ2xfRnJhZ0NvbG9yLnJnYiArPSB3ZWlnaHRzWyBpIF0gKiBnZXRTYW1wbGUoIHRoZXRhLCBheGlzICk7CgoJCQkJfQoKCQkJCWdsX0ZyYWdDb2xvciA9IGxpbmVhclRvT3V0cHV0VGV4ZWwoIGdsX0ZyYWdDb2xvciApOwoKCQkJfQoJCWAsYmxlbmRpbmc6Tm9CbGVuZGluZyxkZXB0aFRlc3Q6ZmFsc2UsZGVwdGhXcml0ZTpmYWxzZX0pO3JldHVybiBzaGFkZXJNYXRlcmlhbDt9ZnVuY3Rpb24gX2dldEVxdWlyZWN0U2hhZGVyKCl7Y29uc3QgdGV4ZWxTaXplPW5ldyBWZWN0b3IyKDEsMSk7Y29uc3Qgc2hhZGVyTWF0ZXJpYWw9bmV3IFJhd1NoYWRlck1hdGVyaWFsKHtuYW1lOidFcXVpcmVjdGFuZ3VsYXJUb0N1YmVVVicsdW5pZm9ybXM6eydlbnZNYXAnOnt2YWx1ZTpudWxsfSwndGV4ZWxTaXplJzp7dmFsdWU6dGV4ZWxTaXplfSwnaW5wdXRFbmNvZGluZyc6e3ZhbHVlOkVOQ09ESU5HU1tMaW5lYXJFbmNvZGluZ119LCdvdXRwdXRFbmNvZGluZyc6e3ZhbHVlOkVOQ09ESU5HU1tMaW5lYXJFbmNvZGluZ119fSx2ZXJ0ZXhTaGFkZXI6X2dldENvbW1vblZlcnRleFNoYWRlcigpLGZyYWdtZW50U2hhZGVyOi8qIGdsc2wgKi9gCgoJCQlwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDsKCQkJcHJlY2lzaW9uIG1lZGl1bXAgaW50OwoKCQkJdmFyeWluZyB2ZWMzIHZPdXRwdXREaXJlY3Rpb247CgoJCQl1bmlmb3JtIHNhbXBsZXIyRCBlbnZNYXA7CgkJCXVuaWZvcm0gdmVjMiB0ZXhlbFNpemU7CgoJCQkke19nZXRFbmNvZGluZ3MoKX0KCgkJCSNpbmNsdWRlIDxjb21tb24+CgoJCQl2b2lkIG1haW4oKSB7CgoJCQkJZ2xfRnJhZ0NvbG9yID0gdmVjNCggMC4wLCAwLjAsIDAuMCwgMS4wICk7CgoJCQkJdmVjMyBvdXRwdXREaXJlY3Rpb24gPSBub3JtYWxpemUoIHZPdXRwdXREaXJlY3Rpb24gKTsKCQkJCXZlYzIgdXYgPSBlcXVpcmVjdFV2KCBvdXRwdXREaXJlY3Rpb24gKTsKCgkJCQl2ZWMyIGYgPSBmcmFjdCggdXYgLyB0ZXhlbFNpemUgLSAwLjUgKTsKCQkJCXV2IC09IGYgKiB0ZXhlbFNpemU7CgkJCQl2ZWMzIHRsID0gZW52TWFwVGV4ZWxUb0xpbmVhciggdGV4dHVyZTJEICggZW52TWFwLCB1diApICkucmdiOwoJCQkJdXYueCArPSB0ZXhlbFNpemUueDsKCQkJCXZlYzMgdHIgPSBlbnZNYXBUZXhlbFRvTGluZWFyKCB0ZXh0dXJlMkQgKCBlbnZNYXAsIHV2ICkgKS5yZ2I7CgkJCQl1di55ICs9IHRleGVsU2l6ZS55OwoJCQkJdmVjMyBiciA9IGVudk1hcFRleGVsVG9MaW5lYXIoIHRleHR1cmUyRCAoIGVudk1hcCwgdXYgKSApLnJnYjsKCQkJCXV2LnggLT0gdGV4ZWxTaXplLng7CgkJCQl2ZWMzIGJsID0gZW52TWFwVGV4ZWxUb0xpbmVhciggdGV4dHVyZTJEICggZW52TWFwLCB1diApICkucmdiOwoKCQkJCXZlYzMgdG0gPSBtaXgoIHRsLCB0ciwgZi54ICk7CgkJCQl2ZWMzIGJtID0gbWl4KCBibCwgYnIsIGYueCApOwoJCQkJZ2xfRnJhZ0NvbG9yLnJnYiA9IG1peCggdG0sIGJtLCBmLnkgKTsKCgkJCQlnbF9GcmFnQ29sb3IgPSBsaW5lYXJUb091dHB1dFRleGVsKCBnbF9GcmFnQ29sb3IgKTsKCgkJCX0KCQlgLGJsZW5kaW5nOk5vQmxlbmRpbmcsZGVwdGhUZXN0OmZhbHNlLGRlcHRoV3JpdGU6ZmFsc2V9KTtyZXR1cm4gc2hhZGVyTWF0ZXJpYWw7fWZ1bmN0aW9uIF9nZXRDdWJlbWFwU2hhZGVyKCl7Y29uc3Qgc2hhZGVyTWF0ZXJpYWw9bmV3IFJhd1NoYWRlck1hdGVyaWFsKHtuYW1lOidDdWJlbWFwVG9DdWJlVVYnLHVuaWZvcm1zOnsnZW52TWFwJzp7dmFsdWU6bnVsbH0sJ2lucHV0RW5jb2RpbmcnOnt2YWx1ZTpFTkNPRElOR1NbTGluZWFyRW5jb2RpbmddfSwnb3V0cHV0RW5jb2RpbmcnOnt2YWx1ZTpFTkNPRElOR1NbTGluZWFyRW5jb2RpbmddfX0sdmVydGV4U2hhZGVyOl9nZXRDb21tb25WZXJ0ZXhTaGFkZXIoKSxmcmFnbWVudFNoYWRlcjovKiBnbHNsICovYAoKCQkJcHJlY2lzaW9uIG1lZGl1bXAgZmxvYXQ7CgkJCXByZWNpc2lvbiBtZWRpdW1wIGludDsKCgkJCXZhcnlpbmcgdmVjMyB2T3V0cHV0RGlyZWN0aW9uOwoKCQkJdW5pZm9ybSBzYW1wbGVyQ3ViZSBlbnZNYXA7CgoJCQkke19nZXRFbmNvZGluZ3MoKX0KCgkJCXZvaWQgbWFpbigpIHsKCgkJCQlnbF9GcmFnQ29sb3IgPSB2ZWM0KCAwLjAsIDAuMCwgMC4wLCAxLjAgKTsKCQkJCWdsX0ZyYWdDb2xvci5yZ2IgPSBlbnZNYXBUZXhlbFRvTGluZWFyKCB0ZXh0dXJlQ3ViZSggZW52TWFwLCB2ZWMzKCAtIHZPdXRwdXREaXJlY3Rpb24ueCwgdk91dHB1dERpcmVjdGlvbi55eiApICkgKS5yZ2I7CgkJCQlnbF9GcmFnQ29sb3IgPSBsaW5lYXJUb091dHB1dFRleGVsKCBnbF9GcmFnQ29sb3IgKTsKCgkJCX0KCQlgLGJsZW5kaW5nOk5vQmxlbmRpbmcsZGVwdGhUZXN0OmZhbHNlLGRlcHRoV3JpdGU6ZmFsc2V9KTtyZXR1cm4gc2hhZGVyTWF0ZXJpYWw7fWZ1bmN0aW9uIF9nZXRDb21tb25WZXJ0ZXhTaGFkZXIoKXtyZXR1cm4oLyogZ2xzbCAqL2AKCgkJcHJlY2lzaW9uIG1lZGl1bXAgZmxvYXQ7CgkJcHJlY2lzaW9uIG1lZGl1bXAgaW50OwoKCQlhdHRyaWJ1dGUgdmVjMyBwb3NpdGlvbjsKCQlhdHRyaWJ1dGUgdmVjMiB1djsKCQlhdHRyaWJ1dGUgZmxvYXQgZmFjZUluZGV4OwoKCQl2YXJ5aW5nIHZlYzMgdk91dHB1dERpcmVjdGlvbjsKCgkJLy8gUkggY29vcmRpbmF0ZSBzeXN0ZW07IFBNUkVNIGZhY2UtaW5kZXhpbmcgY29udmVudGlvbgoJCXZlYzMgZ2V0RGlyZWN0aW9uKCB2ZWMyIHV2LCBmbG9hdCBmYWNlICkgewoKCQkJdXYgPSAyLjAgKiB1diAtIDEuMDsKCgkJCXZlYzMgZGlyZWN0aW9uID0gdmVjMyggdXYsIDEuMCApOwoKCQkJaWYgKCBmYWNlID09IDAuMCApIHsKCgkJCQlkaXJlY3Rpb24gPSBkaXJlY3Rpb24uenl4OyAvLyAoIDEsIHYsIHUgKSBwb3MgeAoKCQkJfSBlbHNlIGlmICggZmFjZSA9PSAxLjAgKSB7CgoJCQkJZGlyZWN0aW9uID0gZGlyZWN0aW9uLnh6eTsKCQkJCWRpcmVjdGlvbi54eiAqPSAtMS4wOyAvLyAoIC11LCAxLCAtdiApIHBvcyB5CgoJCQl9IGVsc2UgaWYgKCBmYWNlID09IDIuMCApIHsKCgkJCQlkaXJlY3Rpb24ueCAqPSAtMS4wOyAvLyAoIC11LCB2LCAxICkgcG9zIHoKCgkJCX0gZWxzZSBpZiAoIGZhY2UgPT0gMy4wICkgewoKCQkJCWRpcmVjdGlvbiA9IGRpcmVjdGlvbi56eXg7CgkJCQlkaXJlY3Rpb24ueHogKj0gLTEuMDsgLy8gKCAtMSwgdiwgLXUgKSBuZWcgeAoKCQkJfSBlbHNlIGlmICggZmFjZSA9PSA0LjAgKSB7CgoJCQkJZGlyZWN0aW9uID0gZGlyZWN0aW9uLnh6eTsKCQkJCWRpcmVjdGlvbi54eSAqPSAtMS4wOyAvLyAoIC11LCAtMSwgdiApIG5lZyB5CgoJCQl9IGVsc2UgaWYgKCBmYWNlID09IDUuMCApIHsKCgkJCQlkaXJlY3Rpb24ueiAqPSAtMS4wOyAvLyAoIHUsIHYsIC0xICkgbmVnIHoKCgkJCX0KCgkJCXJldHVybiBkaXJlY3Rpb247CgoJCX0KCgkJdm9pZCBtYWluKCkgewoKCQkJdk91dHB1dERpcmVjdGlvbiA9IGdldERpcmVjdGlvbiggdXYsIGZhY2VJbmRleCApOwoJCQlnbF9Qb3NpdGlvbiA9IHZlYzQoIHBvc2l0aW9uLCAxLjAgKTsKCgkJfQoJYCk7fWZ1bmN0aW9uIF9nZXRFbmNvZGluZ3MoKXtyZXR1cm4oLyogZ2xzbCAqL2AKCgkJdW5pZm9ybSBpbnQgaW5wdXRFbmNvZGluZzsKCQl1bmlmb3JtIGludCBvdXRwdXRFbmNvZGluZzsKCgkJI2luY2x1ZGUgPGVuY29kaW5nc19wYXJzX2ZyYWdtZW50PgoKCQl2ZWM0IGlucHV0VGV4ZWxUb0xpbmVhciggdmVjNCB2YWx1ZSApIHsKCgkJCWlmICggaW5wdXRFbmNvZGluZyA9PSAwICkgewoKCQkJCXJldHVybiB2YWx1ZTsKCgkJCX0gZWxzZSBpZiAoIGlucHV0RW5jb2RpbmcgPT0gMSApIHsKCgkJCQlyZXR1cm4gc1JHQlRvTGluZWFyKCB2YWx1ZSApOwoKCQkJfSBlbHNlIGlmICggaW5wdXRFbmNvZGluZyA9PSAyICkgewoKCQkJCXJldHVybiBSR0JFVG9MaW5lYXIoIHZhbHVlICk7CgoJCQl9IGVsc2UgaWYgKCBpbnB1dEVuY29kaW5nID09IDMgKSB7CgoJCQkJcmV0dXJuIFJHQk1Ub0xpbmVhciggdmFsdWUsIDcuMCApOwoKCQkJfSBlbHNlIGlmICggaW5wdXRFbmNvZGluZyA9PSA0ICkgewoKCQkJCXJldHVybiBSR0JNVG9MaW5lYXIoIHZhbHVlLCAxNi4wICk7CgoJCQl9IGVsc2UgaWYgKCBpbnB1dEVuY29kaW5nID09IDUgKSB7CgoJCQkJcmV0dXJuIFJHQkRUb0xpbmVhciggdmFsdWUsIDI1Ni4wICk7CgoJCQl9IGVsc2UgewoKCQkJCXJldHVybiBHYW1tYVRvTGluZWFyKCB2YWx1ZSwgMi4yICk7CgoJCQl9CgoJCX0KCgkJdmVjNCBsaW5lYXJUb091dHB1dFRleGVsKCB2ZWM0IHZhbHVlICkgewoKCQkJaWYgKCBvdXRwdXRFbmNvZGluZyA9PSAwICkgewoKCQkJCXJldHVybiB2YWx1ZTsKCgkJCX0gZWxzZSBpZiAoIG91dHB1dEVuY29kaW5nID09IDEgKSB7CgoJCQkJcmV0dXJuIExpbmVhclRvc1JHQiggdmFsdWUgKTsKCgkJCX0gZWxzZSBpZiAoIG91dHB1dEVuY29kaW5nID09IDIgKSB7CgoJCQkJcmV0dXJuIExpbmVhclRvUkdCRSggdmFsdWUgKTsKCgkJCX0gZWxzZSBpZiAoIG91dHB1dEVuY29kaW5nID09IDMgKSB7CgoJCQkJcmV0dXJuIExpbmVhclRvUkdCTSggdmFsdWUsIDcuMCApOwoKCQkJfSBlbHNlIGlmICggb3V0cHV0RW5jb2RpbmcgPT0gNCApIHsKCgkJCQlyZXR1cm4gTGluZWFyVG9SR0JNKCB2YWx1ZSwgMTYuMCApOwoKCQkJfSBlbHNlIGlmICggb3V0cHV0RW5jb2RpbmcgPT0gNSApIHsKCgkJCQlyZXR1cm4gTGluZWFyVG9SR0JEKCB2YWx1ZSwgMjU2LjAgKTsKCgkJCX0gZWxzZSB7CgoJCQkJcmV0dXJuIExpbmVhclRvR2FtbWEoIHZhbHVlLCAyLjIgKTsKCgkJCX0KCgkJfQoKCQl2ZWM0IGVudk1hcFRleGVsVG9MaW5lYXIoIHZlYzQgY29sb3IgKSB7CgoJCQlyZXR1cm4gaW5wdXRUZXhlbFRvTGluZWFyKCBjb2xvciApOwoKCQl9CglgKTt9ZnVuY3Rpb24gV2ViR0xDdWJlVVZNYXBzKHJlbmRlcmVyKXtsZXQgY3ViZVVWbWFwcz1uZXcgV2Vha01hcCgpO2xldCBwbXJlbUdlbmVyYXRvcj1udWxsO2Z1bmN0aW9uIGdldCh0ZXh0dXJlKXtpZih0ZXh0dXJlJiZ0ZXh0dXJlLmlzVGV4dHVyZSYmdGV4dHVyZS5pc1JlbmRlclRhcmdldFRleHR1cmU9PT1mYWxzZSl7Y29uc3QgbWFwcGluZz10ZXh0dXJlLm1hcHBpbmc7Y29uc3QgaXNFcXVpcmVjdE1hcD1tYXBwaW5nPT09RXF1aXJlY3Rhbmd1bGFyUmVmbGVjdGlvbk1hcHBpbmd8fG1hcHBpbmc9PT1FcXVpcmVjdGFuZ3VsYXJSZWZyYWN0aW9uTWFwcGluZztjb25zdCBpc0N1YmVNYXA9bWFwcGluZz09PUN1YmVSZWZsZWN0aW9uTWFwcGluZ3x8bWFwcGluZz09PUN1YmVSZWZyYWN0aW9uTWFwcGluZztpZihpc0VxdWlyZWN0TWFwfHxpc0N1YmVNYXApey8vIGVxdWlyZWN0L2N1YmUgbWFwIHRvIGN1YmVVViBjb252ZXJzaW9uCglpZihjdWJlVVZtYXBzLmhhcyh0ZXh0dXJlKSl7cmV0dXJuIGN1YmVVVm1hcHMuZ2V0KHRleHR1cmUpLnRleHR1cmU7fWVsc2Uge2NvbnN0IGltYWdlPXRleHR1cmUuaW1hZ2U7aWYoaXNFcXVpcmVjdE1hcCYmaW1hZ2UmJmltYWdlLmhlaWdodD4wfHxpc0N1YmVNYXAmJmltYWdlJiZpc0N1YmVUZXh0dXJlQ29tcGxldGUoaW1hZ2UpKXtjb25zdCBjdXJyZW50UmVuZGVyVGFyZ2V0PXJlbmRlcmVyLmdldFJlbmRlclRhcmdldCgpO2lmKHBtcmVtR2VuZXJhdG9yPT09bnVsbClwbXJlbUdlbmVyYXRvcj1uZXcgUE1SRU1HZW5lcmF0b3IocmVuZGVyZXIpO2NvbnN0IHJlbmRlclRhcmdldD1pc0VxdWlyZWN0TWFwP3BtcmVtR2VuZXJhdG9yLmZyb21FcXVpcmVjdGFuZ3VsYXIodGV4dHVyZSk6cG1yZW1HZW5lcmF0b3IuZnJvbUN1YmVtYXAodGV4dHVyZSk7Y3ViZVVWbWFwcy5zZXQodGV4dHVyZSxyZW5kZXJUYXJnZXQpO3JlbmRlcmVyLnNldFJlbmRlclRhcmdldChjdXJyZW50UmVuZGVyVGFyZ2V0KTt0ZXh0dXJlLmFkZEV2ZW50TGlzdGVuZXIoJ2Rpc3Bvc2UnLG9uVGV4dHVyZURpc3Bvc2UpO3JldHVybiByZW5kZXJUYXJnZXQudGV4dHVyZTt9ZWxzZSB7Ly8gaW1hZ2Ugbm90IHlldCByZWFkeS4gdHJ5IHRoZSBjb252ZXJzaW9uIG5leHQgZnJhbWUKCXJldHVybiBudWxsO319fX1yZXR1cm4gdGV4dHVyZTt9ZnVuY3Rpb24gaXNDdWJlVGV4dHVyZUNvbXBsZXRlKGltYWdlKXtsZXQgY291bnQ9MDtjb25zdCBsZW5ndGg9Njtmb3IobGV0IGk9MDtpPGxlbmd0aDtpKyspe2lmKGltYWdlW2ldIT09dW5kZWZpbmVkKWNvdW50Kys7fXJldHVybiBjb3VudD09PWxlbmd0aDt9ZnVuY3Rpb24gb25UZXh0dXJlRGlzcG9zZShldmVudCl7Y29uc3QgdGV4dHVyZT1ldmVudC50YXJnZXQ7dGV4dHVyZS5yZW1vdmVFdmVudExpc3RlbmVyKCdkaXNwb3NlJyxvblRleHR1cmVEaXNwb3NlKTtjb25zdCBjdWJlbWFwVVY9Y3ViZVVWbWFwcy5nZXQodGV4dHVyZSk7aWYoY3ViZW1hcFVWIT09dW5kZWZpbmVkKXtjdWJlVVZtYXBzLmRlbGV0ZSh0ZXh0dXJlKTtjdWJlbWFwVVYuZGlzcG9zZSgpO319ZnVuY3Rpb24gZGlzcG9zZSgpe2N1YmVVVm1hcHM9bmV3IFdlYWtNYXAoKTtpZihwbXJlbUdlbmVyYXRvciE9PW51bGwpe3BtcmVtR2VuZXJhdG9yLmRpc3Bvc2UoKTtwbXJlbUdlbmVyYXRvcj1udWxsO319cmV0dXJuIHtnZXQ6Z2V0LGRpc3Bvc2U6ZGlzcG9zZX07fWZ1bmN0aW9uIFdlYkdMRXh0ZW5zaW9ucyhnbCl7Y29uc3QgZXh0ZW5zaW9ucz17fTtmdW5jdGlvbiBnZXRFeHRlbnNpb24obmFtZSl7aWYoZXh0ZW5zaW9uc1tuYW1lXSE9PXVuZGVmaW5lZCl7cmV0dXJuIGV4dGVuc2lvbnNbbmFtZV07fWxldCBleHRlbnNpb247c3dpdGNoKG5hbWUpe2Nhc2UnV0VCR0xfZGVwdGhfdGV4dHVyZSc6ZXh0ZW5zaW9uPWdsLmdldEV4dGVuc2lvbignV0VCR0xfZGVwdGhfdGV4dHVyZScpfHxnbC5nZXRFeHRlbnNpb24oJ01PWl9XRUJHTF9kZXB0aF90ZXh0dXJlJyl8fGdsLmdldEV4dGVuc2lvbignV0VCS0lUX1dFQkdMX2RlcHRoX3RleHR1cmUnKTticmVhaztjYXNlJ0VYVF90ZXh0dXJlX2ZpbHRlcl9hbmlzb3Ryb3BpYyc6ZXh0ZW5zaW9uPWdsLmdldEV4dGVuc2lvbignRVhUX3RleHR1cmVfZmlsdGVyX2FuaXNvdHJvcGljJyl8fGdsLmdldEV4dGVuc2lvbignTU9aX0VYVF90ZXh0dXJlX2ZpbHRlcl9hbmlzb3Ryb3BpYycpfHxnbC5nZXRFeHRlbnNpb24oJ1dFQktJVF9FWFRfdGV4dHVyZV9maWx0ZXJfYW5pc290cm9waWMnKTticmVhaztjYXNlJ1dFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9zM3RjJzpleHRlbnNpb249Z2wuZ2V0RXh0ZW5zaW9uKCdXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfczN0YycpfHxnbC5nZXRFeHRlbnNpb24oJ01PWl9XRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfczN0YycpfHxnbC5nZXRFeHRlbnNpb24oJ1dFQktJVF9XRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfczN0YycpO2JyZWFrO2Nhc2UnV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3B2cnRjJzpleHRlbnNpb249Z2wuZ2V0RXh0ZW5zaW9uKCdXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfcHZydGMnKXx8Z2wuZ2V0RXh0ZW5zaW9uKCdXRUJLSVRfV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3B2cnRjJyk7YnJlYWs7ZGVmYXVsdDpleHRlbnNpb249Z2wuZ2V0RXh0ZW5zaW9uKG5hbWUpO31leHRlbnNpb25zW25hbWVdPWV4dGVuc2lvbjtyZXR1cm4gZXh0ZW5zaW9uO31yZXR1cm4ge2hhczpmdW5jdGlvbihuYW1lKXtyZXR1cm4gZ2V0RXh0ZW5zaW9uKG5hbWUpIT09bnVsbDt9LGluaXQ6ZnVuY3Rpb24oY2FwYWJpbGl0aWVzKXtpZihjYXBhYmlsaXRpZXMuaXNXZWJHTDIpe2dldEV4dGVuc2lvbignRVhUX2NvbG9yX2J1ZmZlcl9mbG9hdCcpO31lbHNlIHtnZXRFeHRlbnNpb24oJ1dFQkdMX2RlcHRoX3RleHR1cmUnKTtnZXRFeHRlbnNpb24oJ09FU190ZXh0dXJlX2Zsb2F0Jyk7Z2V0RXh0ZW5zaW9uKCdPRVNfdGV4dHVyZV9oYWxmX2Zsb2F0Jyk7Z2V0RXh0ZW5zaW9uKCdPRVNfdGV4dHVyZV9oYWxmX2Zsb2F0X2xpbmVhcicpO2dldEV4dGVuc2lvbignT0VTX3N0YW5kYXJkX2Rlcml2YXRpdmVzJyk7Z2V0RXh0ZW5zaW9uKCdPRVNfZWxlbWVudF9pbmRleF91aW50Jyk7Z2V0RXh0ZW5zaW9uKCdPRVNfdmVydGV4X2FycmF5X29iamVjdCcpO2dldEV4dGVuc2lvbignQU5HTEVfaW5zdGFuY2VkX2FycmF5cycpO31nZXRFeHRlbnNpb24oJ09FU190ZXh0dXJlX2Zsb2F0X2xpbmVhcicpO2dldEV4dGVuc2lvbignRVhUX2NvbG9yX2J1ZmZlcl9oYWxmX2Zsb2F0Jyk7Z2V0RXh0ZW5zaW9uKCdXRUJHTF9tdWx0aXNhbXBsZWRfcmVuZGVyX3RvX3RleHR1cmUnKTt9LGdldDpmdW5jdGlvbihuYW1lKXtjb25zdCBleHRlbnNpb249Z2V0RXh0ZW5zaW9uKG5hbWUpO2lmKGV4dGVuc2lvbj09PW51bGwpe2NvbnNvbGUud2FybignVEhSRUUuV2ViR0xSZW5kZXJlcjogJytuYW1lKycgZXh0ZW5zaW9uIG5vdCBzdXBwb3J0ZWQuJyk7fXJldHVybiBleHRlbnNpb247fX07fWZ1bmN0aW9uIFdlYkdMR2VvbWV0cmllcyhnbCxhdHRyaWJ1dGVzLGluZm8sYmluZGluZ1N0YXRlcyl7Y29uc3QgZ2VvbWV0cmllcz17fTtjb25zdCB3aXJlZnJhbWVBdHRyaWJ1dGVzPW5ldyBXZWFrTWFwKCk7ZnVuY3Rpb24gb25HZW9tZXRyeURpc3Bvc2UoZXZlbnQpe2NvbnN0IGdlb21ldHJ5PWV2ZW50LnRhcmdldDtpZihnZW9tZXRyeS5pbmRleCE9PW51bGwpe2F0dHJpYnV0ZXMucmVtb3ZlKGdlb21ldHJ5LmluZGV4KTt9Zm9yKGNvbnN0IG5hbWUgaW4gZ2VvbWV0cnkuYXR0cmlidXRlcyl7YXR0cmlidXRlcy5yZW1vdmUoZ2VvbWV0cnkuYXR0cmlidXRlc1tuYW1lXSk7fWdlb21ldHJ5LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Rpc3Bvc2UnLG9uR2VvbWV0cnlEaXNwb3NlKTtkZWxldGUgZ2VvbWV0cmllc1tnZW9tZXRyeS5pZF07Y29uc3QgYXR0cmlidXRlPXdpcmVmcmFtZUF0dHJpYnV0ZXMuZ2V0KGdlb21ldHJ5KTtpZihhdHRyaWJ1dGUpe2F0dHJpYnV0ZXMucmVtb3ZlKGF0dHJpYnV0ZSk7d2lyZWZyYW1lQXR0cmlidXRlcy5kZWxldGUoZ2VvbWV0cnkpO31iaW5kaW5nU3RhdGVzLnJlbGVhc2VTdGF0ZXNPZkdlb21ldHJ5KGdlb21ldHJ5KTtpZihnZW9tZXRyeS5pc0luc3RhbmNlZEJ1ZmZlckdlb21ldHJ5PT09dHJ1ZSl7ZGVsZXRlIGdlb21ldHJ5Ll9tYXhJbnN0YW5jZUNvdW50O30vLwoJaW5mby5tZW1vcnkuZ2VvbWV0cmllcy0tO31mdW5jdGlvbiBnZXQob2JqZWN0LGdlb21ldHJ5KXtpZihnZW9tZXRyaWVzW2dlb21ldHJ5LmlkXT09PXRydWUpcmV0dXJuIGdlb21ldHJ5O2dlb21ldHJ5LmFkZEV2ZW50TGlzdGVuZXIoJ2Rpc3Bvc2UnLG9uR2VvbWV0cnlEaXNwb3NlKTtnZW9tZXRyaWVzW2dlb21ldHJ5LmlkXT10cnVlO2luZm8ubWVtb3J5Lmdlb21ldHJpZXMrKztyZXR1cm4gZ2VvbWV0cnk7fWZ1bmN0aW9uIHVwZGF0ZShnZW9tZXRyeSl7Y29uc3QgZ2VvbWV0cnlBdHRyaWJ1dGVzPWdlb21ldHJ5LmF0dHJpYnV0ZXM7Ly8gVXBkYXRpbmcgaW5kZXggYnVmZmVyIGluIFZBTyBub3cuIFNlZSBXZWJHTEJpbmRpbmdTdGF0ZXMuCglmb3IoY29uc3QgbmFtZSBpbiBnZW9tZXRyeUF0dHJpYnV0ZXMpe2F0dHJpYnV0ZXMudXBkYXRlKGdlb21ldHJ5QXR0cmlidXRlc1tuYW1lXSwzNDk2Mik7fS8vIG1vcnBoIHRhcmdldHMKCWNvbnN0IG1vcnBoQXR0cmlidXRlcz1nZW9tZXRyeS5tb3JwaEF0dHJpYnV0ZXM7Zm9yKGNvbnN0IG5hbWUgaW4gbW9ycGhBdHRyaWJ1dGVzKXtjb25zdCBhcnJheT1tb3JwaEF0dHJpYnV0ZXNbbmFtZV07Zm9yKGxldCBpPTAsbD1hcnJheS5sZW5ndGg7aTxsO2krKyl7YXR0cmlidXRlcy51cGRhdGUoYXJyYXlbaV0sMzQ5NjIpO319fWZ1bmN0aW9uIHVwZGF0ZVdpcmVmcmFtZUF0dHJpYnV0ZShnZW9tZXRyeSl7Y29uc3QgaW5kaWNlcz1bXTtjb25zdCBnZW9tZXRyeUluZGV4PWdlb21ldHJ5LmluZGV4O2NvbnN0IGdlb21ldHJ5UG9zaXRpb249Z2VvbWV0cnkuYXR0cmlidXRlcy5wb3NpdGlvbjtsZXQgdmVyc2lvbj0wO2lmKGdlb21ldHJ5SW5kZXghPT1udWxsKXtjb25zdCBhcnJheT1nZW9tZXRyeUluZGV4LmFycmF5O3ZlcnNpb249Z2VvbWV0cnlJbmRleC52ZXJzaW9uO2ZvcihsZXQgaT0wLGw9YXJyYXkubGVuZ3RoO2k8bDtpKz0zKXtjb25zdCBhPWFycmF5W2krMF07Y29uc3QgYj1hcnJheVtpKzFdO2NvbnN0IGM9YXJyYXlbaSsyXTtpbmRpY2VzLnB1c2goYSxiLGIsYyxjLGEpO319ZWxzZSB7Y29uc3QgYXJyYXk9Z2VvbWV0cnlQb3NpdGlvbi5hcnJheTt2ZXJzaW9uPWdlb21ldHJ5UG9zaXRpb24udmVyc2lvbjtmb3IobGV0IGk9MCxsPWFycmF5Lmxlbmd0aC8zLTE7aTxsO2krPTMpe2NvbnN0IGE9aSswO2NvbnN0IGI9aSsxO2NvbnN0IGM9aSsyO2luZGljZXMucHVzaChhLGIsYixjLGMsYSk7fX1jb25zdCBhdHRyaWJ1dGU9bmV3KGFycmF5TWF4KGluZGljZXMpPjY1NTM1P1VpbnQzMkJ1ZmZlckF0dHJpYnV0ZTpVaW50MTZCdWZmZXJBdHRyaWJ1dGUpKGluZGljZXMsMSk7YXR0cmlidXRlLnZlcnNpb249dmVyc2lvbjsvLyBVcGRhdGluZyBpbmRleCBidWZmZXIgaW4gVkFPIG5vdy4gU2VlIFdlYkdMQmluZGluZ1N0YXRlcwoJLy8KCWNvbnN0IHByZXZpb3VzQXR0cmlidXRlPXdpcmVmcmFtZUF0dHJpYnV0ZXMuZ2V0KGdlb21ldHJ5KTtpZihwcmV2aW91c0F0dHJpYnV0ZSlhdHRyaWJ1dGVzLnJlbW92ZShwcmV2aW91c0F0dHJpYnV0ZSk7Ly8KCXdpcmVmcmFtZUF0dHJpYnV0ZXMuc2V0KGdlb21ldHJ5LGF0dHJpYnV0ZSk7fWZ1bmN0aW9uIGdldFdpcmVmcmFtZUF0dHJpYnV0ZShnZW9tZXRyeSl7Y29uc3QgY3VycmVudEF0dHJpYnV0ZT13aXJlZnJhbWVBdHRyaWJ1dGVzLmdldChnZW9tZXRyeSk7aWYoY3VycmVudEF0dHJpYnV0ZSl7Y29uc3QgZ2VvbWV0cnlJbmRleD1nZW9tZXRyeS5pbmRleDtpZihnZW9tZXRyeUluZGV4IT09bnVsbCl7Ly8gaWYgdGhlIGF0dHJpYnV0ZSBpcyBvYnNvbGV0ZSwgY3JlYXRlIGEgbmV3IG9uZQoJaWYoY3VycmVudEF0dHJpYnV0ZS52ZXJzaW9uPGdlb21ldHJ5SW5kZXgudmVyc2lvbil7dXBkYXRlV2lyZWZyYW1lQXR0cmlidXRlKGdlb21ldHJ5KTt9fX1lbHNlIHt1cGRhdGVXaXJlZnJhbWVBdHRyaWJ1dGUoZ2VvbWV0cnkpO31yZXR1cm4gd2lyZWZyYW1lQXR0cmlidXRlcy5nZXQoZ2VvbWV0cnkpO31yZXR1cm4ge2dldDpnZXQsdXBkYXRlOnVwZGF0ZSxnZXRXaXJlZnJhbWVBdHRyaWJ1dGU6Z2V0V2lyZWZyYW1lQXR0cmlidXRlfTt9ZnVuY3Rpb24gV2ViR0xJbmRleGVkQnVmZmVyUmVuZGVyZXIoZ2wsZXh0ZW5zaW9ucyxpbmZvLGNhcGFiaWxpdGllcyl7Y29uc3QgaXNXZWJHTDI9Y2FwYWJpbGl0aWVzLmlzV2ViR0wyO2xldCBtb2RlO2Z1bmN0aW9uIHNldE1vZGUodmFsdWUpe21vZGU9dmFsdWU7fWxldCB0eXBlLGJ5dGVzUGVyRWxlbWVudDtmdW5jdGlvbiBzZXRJbmRleCh2YWx1ZSl7dHlwZT12YWx1ZS50eXBlO2J5dGVzUGVyRWxlbWVudD12YWx1ZS5ieXRlc1BlckVsZW1lbnQ7fWZ1bmN0aW9uIHJlbmRlcihzdGFydCxjb3VudCl7Z2wuZHJhd0VsZW1lbnRzKG1vZGUsY291bnQsdHlwZSxzdGFydCpieXRlc1BlckVsZW1lbnQpO2luZm8udXBkYXRlKGNvdW50LG1vZGUsMSk7fWZ1bmN0aW9uIHJlbmRlckluc3RhbmNlcyhzdGFydCxjb3VudCxwcmltY291bnQpe2lmKHByaW1jb3VudD09PTApcmV0dXJuO2xldCBleHRlbnNpb24sbWV0aG9kTmFtZTtpZihpc1dlYkdMMil7ZXh0ZW5zaW9uPWdsO21ldGhvZE5hbWU9J2RyYXdFbGVtZW50c0luc3RhbmNlZCc7fWVsc2Uge2V4dGVuc2lvbj1leHRlbnNpb25zLmdldCgnQU5HTEVfaW5zdGFuY2VkX2FycmF5cycpO21ldGhvZE5hbWU9J2RyYXdFbGVtZW50c0luc3RhbmNlZEFOR0xFJztpZihleHRlbnNpb249PT1udWxsKXtjb25zb2xlLmVycm9yKCdUSFJFRS5XZWJHTEluZGV4ZWRCdWZmZXJSZW5kZXJlcjogdXNpbmcgVEhSRUUuSW5zdGFuY2VkQnVmZmVyR2VvbWV0cnkgYnV0IGhhcmR3YXJlIGRvZXMgbm90IHN1cHBvcnQgZXh0ZW5zaW9uIEFOR0xFX2luc3RhbmNlZF9hcnJheXMuJyk7cmV0dXJuO319ZXh0ZW5zaW9uW21ldGhvZE5hbWVdKG1vZGUsY291bnQsdHlwZSxzdGFydCpieXRlc1BlckVsZW1lbnQscHJpbWNvdW50KTtpbmZvLnVwZGF0ZShjb3VudCxtb2RlLHByaW1jb3VudCk7fS8vCgl0aGlzLnNldE1vZGU9c2V0TW9kZTt0aGlzLnNldEluZGV4PXNldEluZGV4O3RoaXMucmVuZGVyPXJlbmRlcjt0aGlzLnJlbmRlckluc3RhbmNlcz1yZW5kZXJJbnN0YW5jZXM7fWZ1bmN0aW9uIFdlYkdMSW5mbyhnbCl7Y29uc3QgbWVtb3J5PXtnZW9tZXRyaWVzOjAsdGV4dHVyZXM6MH07Y29uc3QgcmVuZGVyPXtmcmFtZTowLGNhbGxzOjAsdHJpYW5nbGVzOjAscG9pbnRzOjAsbGluZXM6MH07ZnVuY3Rpb24gdXBkYXRlKGNvdW50LG1vZGUsaW5zdGFuY2VDb3VudCl7cmVuZGVyLmNhbGxzKys7c3dpdGNoKG1vZGUpe2Nhc2UgNDpyZW5kZXIudHJpYW5nbGVzKz1pbnN0YW5jZUNvdW50Kihjb3VudC8zKTticmVhaztjYXNlIDE6cmVuZGVyLmxpbmVzKz1pbnN0YW5jZUNvdW50Kihjb3VudC8yKTticmVhaztjYXNlIDM6cmVuZGVyLmxpbmVzKz1pbnN0YW5jZUNvdW50Kihjb3VudC0xKTticmVhaztjYXNlIDI6cmVuZGVyLmxpbmVzKz1pbnN0YW5jZUNvdW50KmNvdW50O2JyZWFrO2Nhc2UgMDpyZW5kZXIucG9pbnRzKz1pbnN0YW5jZUNvdW50KmNvdW50O2JyZWFrO2RlZmF1bHQ6Y29uc29sZS5lcnJvcignVEhSRUUuV2ViR0xJbmZvOiBVbmtub3duIGRyYXcgbW9kZTonLG1vZGUpO2JyZWFrO319ZnVuY3Rpb24gcmVzZXQoKXtyZW5kZXIuZnJhbWUrKztyZW5kZXIuY2FsbHM9MDtyZW5kZXIudHJpYW5nbGVzPTA7cmVuZGVyLnBvaW50cz0wO3JlbmRlci5saW5lcz0wO31yZXR1cm4ge21lbW9yeTptZW1vcnkscmVuZGVyOnJlbmRlcixwcm9ncmFtczpudWxsLGF1dG9SZXNldDp0cnVlLHJlc2V0OnJlc2V0LHVwZGF0ZTp1cGRhdGV9O31jbGFzcyBEYXRhVGV4dHVyZTJEQXJyYXkgZXh0ZW5kcyBUZXh0dXJle2NvbnN0cnVjdG9yKGRhdGEsd2lkdGgsaGVpZ2h0LGRlcHRoKXtpZihkYXRhPT09dm9pZCAwKXtkYXRhPW51bGw7fWlmKHdpZHRoPT09dm9pZCAwKXt3aWR0aD0xO31pZihoZWlnaHQ9PT12b2lkIDApe2hlaWdodD0xO31pZihkZXB0aD09PXZvaWQgMCl7ZGVwdGg9MTt9c3VwZXIobnVsbCk7dGhpcy5pbWFnZT17ZGF0YSx3aWR0aCxoZWlnaHQsZGVwdGh9O3RoaXMubWFnRmlsdGVyPU5lYXJlc3RGaWx0ZXI7dGhpcy5taW5GaWx0ZXI9TmVhcmVzdEZpbHRlcjt0aGlzLndyYXBSPUNsYW1wVG9FZGdlV3JhcHBpbmc7dGhpcy5nZW5lcmF0ZU1pcG1hcHM9ZmFsc2U7dGhpcy5mbGlwWT1mYWxzZTt0aGlzLnVucGFja0FsaWdubWVudD0xO3RoaXMubmVlZHNVcGRhdGU9dHJ1ZTt9fURhdGFUZXh0dXJlMkRBcnJheS5wcm90b3R5cGUuaXNEYXRhVGV4dHVyZTJEQXJyYXk9dHJ1ZTtmdW5jdGlvbiBudW1lcmljYWxTb3J0KGEsYil7cmV0dXJuIGFbMF0tYlswXTt9ZnVuY3Rpb24gYWJzTnVtZXJpY2FsU29ydChhLGIpe3JldHVybiBNYXRoLmFicyhiWzFdKS1NYXRoLmFicyhhWzFdKTt9ZnVuY3Rpb24gZGVub3JtYWxpemUobW9ycGgsYXR0cmlidXRlKXtsZXQgZGVub21pbmF0b3I9MTtjb25zdCBhcnJheT1hdHRyaWJ1dGUuaXNJbnRlcmxlYXZlZEJ1ZmZlckF0dHJpYnV0ZT9hdHRyaWJ1dGUuZGF0YS5hcnJheTphdHRyaWJ1dGUuYXJyYXk7aWYoYXJyYXkgaW5zdGFuY2VvZiBJbnQ4QXJyYXkpZGVub21pbmF0b3I9MTI3O2Vsc2UgaWYoYXJyYXkgaW5zdGFuY2VvZiBJbnQxNkFycmF5KWRlbm9taW5hdG9yPTMyNzY3O2Vsc2UgaWYoYXJyYXkgaW5zdGFuY2VvZiBJbnQzMkFycmF5KWRlbm9taW5hdG9yPTIxNDc0ODM2NDc7ZWxzZSBjb25zb2xlLmVycm9yKCdUSFJFRS5XZWJHTE1vcnBodGFyZ2V0czogVW5zdXBwb3J0ZWQgbW9ycGggYXR0cmlidXRlIGRhdGEgdHlwZTogJyxhcnJheSk7bW9ycGguZGl2aWRlU2NhbGFyKGRlbm9taW5hdG9yKTt9ZnVuY3Rpb24gV2ViR0xNb3JwaHRhcmdldHMoZ2wsY2FwYWJpbGl0aWVzLHRleHR1cmVzKXtjb25zdCBpbmZsdWVuY2VzTGlzdD17fTtjb25zdCBtb3JwaEluZmx1ZW5jZXM9bmV3IEZsb2F0MzJBcnJheSg4KTtjb25zdCBtb3JwaFRleHR1cmVzPW5ldyBXZWFrTWFwKCk7Y29uc3QgbW9ycGg9bmV3IFZlY3RvcjMoKTtjb25zdCB3b3JrSW5mbHVlbmNlcz1bXTtmb3IobGV0IGk9MDtpPDg7aSsrKXt3b3JrSW5mbHVlbmNlc1tpXT1baSwwXTt9ZnVuY3Rpb24gdXBkYXRlKG9iamVjdCxnZW9tZXRyeSxtYXRlcmlhbCxwcm9ncmFtKXtjb25zdCBvYmplY3RJbmZsdWVuY2VzPW9iamVjdC5tb3JwaFRhcmdldEluZmx1ZW5jZXM7aWYoY2FwYWJpbGl0aWVzLmlzV2ViR0wyPT09dHJ1ZSl7Ly8gaW5zdGVhZCBvZiB1c2luZyBhdHRyaWJ1dGVzLCB0aGUgV2ViR0wgMiBjb2RlIHBhdGggZW5jb2RlcyBtb3JwaCB0YXJnZXRzCgkvLyBpbnRvIGFuIGFycmF5IG9mIGRhdGEgdGV4dHVyZXMuIEVhY2ggbGF5ZXIgcmVwcmVzZW50cyBhIHNpbmdsZSBtb3JwaCB0YXJnZXQuCgljb25zdCBudW1iZXJPZk1vcnBoVGFyZ2V0cz1nZW9tZXRyeS5tb3JwaEF0dHJpYnV0ZXMucG9zaXRpb24ubGVuZ3RoO2xldCBlbnRyeT1tb3JwaFRleHR1cmVzLmdldChnZW9tZXRyeSk7aWYoZW50cnk9PT11bmRlZmluZWR8fGVudHJ5LmNvdW50IT09bnVtYmVyT2ZNb3JwaFRhcmdldHMpe2lmKGVudHJ5IT09dW5kZWZpbmVkKWVudHJ5LnRleHR1cmUuZGlzcG9zZSgpO2NvbnN0IGhhc01vcnBoTm9ybWFscz1nZW9tZXRyeS5tb3JwaEF0dHJpYnV0ZXMubm9ybWFsIT09dW5kZWZpbmVkO2NvbnN0IG1vcnBoVGFyZ2V0cz1nZW9tZXRyeS5tb3JwaEF0dHJpYnV0ZXMucG9zaXRpb247Y29uc3QgbW9ycGhOb3JtYWxzPWdlb21ldHJ5Lm1vcnBoQXR0cmlidXRlcy5ub3JtYWx8fFtdO2NvbnN0IG51bWJlck9mVmVydGljZXM9Z2VvbWV0cnkuYXR0cmlidXRlcy5wb3NpdGlvbi5jb3VudDtjb25zdCBudW1iZXJPZlZlcnRleERhdGE9aGFzTW9ycGhOb3JtYWxzPT09dHJ1ZT8yOjE7Ly8gKHYsbikgdnMuICh2KQoJbGV0IHdpZHRoPW51bWJlck9mVmVydGljZXMqbnVtYmVyT2ZWZXJ0ZXhEYXRhO2xldCBoZWlnaHQ9MTtpZih3aWR0aD5jYXBhYmlsaXRpZXMubWF4VGV4dHVyZVNpemUpe2hlaWdodD1NYXRoLmNlaWwod2lkdGgvY2FwYWJpbGl0aWVzLm1heFRleHR1cmVTaXplKTt3aWR0aD1jYXBhYmlsaXRpZXMubWF4VGV4dHVyZVNpemU7fWNvbnN0IGJ1ZmZlcj1uZXcgRmxvYXQzMkFycmF5KHdpZHRoKmhlaWdodCo0Km51bWJlck9mTW9ycGhUYXJnZXRzKTtjb25zdCB0ZXh0dXJlPW5ldyBEYXRhVGV4dHVyZTJEQXJyYXkoYnVmZmVyLHdpZHRoLGhlaWdodCxudW1iZXJPZk1vcnBoVGFyZ2V0cyk7dGV4dHVyZS5mb3JtYXQ9UkdCQUZvcm1hdDsvLyB1c2luZyBSR0JBIHNpbmNlIFJHQiBtaWdodCBiZSBlbXVsYXRlZCAoYW5kIGlzIHRodXMgc2xvd2VyKQoJdGV4dHVyZS50eXBlPUZsb2F0VHlwZTsvLyBmaWxsIGJ1ZmZlcgoJY29uc3QgdmVydGV4RGF0YVN0cmlkZT1udW1iZXJPZlZlcnRleERhdGEqNDtmb3IobGV0IGk9MDtpPG51bWJlck9mTW9ycGhUYXJnZXRzO2krKyl7Y29uc3QgbW9ycGhUYXJnZXQ9bW9ycGhUYXJnZXRzW2ldO2NvbnN0IG1vcnBoTm9ybWFsPW1vcnBoTm9ybWFsc1tpXTtjb25zdCBvZmZzZXQ9d2lkdGgqaGVpZ2h0KjQqaTtmb3IobGV0IGo9MDtqPG1vcnBoVGFyZ2V0LmNvdW50O2orKyl7bW9ycGguZnJvbUJ1ZmZlckF0dHJpYnV0ZShtb3JwaFRhcmdldCxqKTtpZihtb3JwaFRhcmdldC5ub3JtYWxpemVkPT09dHJ1ZSlkZW5vcm1hbGl6ZShtb3JwaCxtb3JwaFRhcmdldCk7Y29uc3Qgc3RyaWRlPWoqdmVydGV4RGF0YVN0cmlkZTtidWZmZXJbb2Zmc2V0K3N0cmlkZSswXT1tb3JwaC54O2J1ZmZlcltvZmZzZXQrc3RyaWRlKzFdPW1vcnBoLnk7YnVmZmVyW29mZnNldCtzdHJpZGUrMl09bW9ycGguejtidWZmZXJbb2Zmc2V0K3N0cmlkZSszXT0wO2lmKGhhc01vcnBoTm9ybWFscz09PXRydWUpe21vcnBoLmZyb21CdWZmZXJBdHRyaWJ1dGUobW9ycGhOb3JtYWwsaik7aWYobW9ycGhOb3JtYWwubm9ybWFsaXplZD09PXRydWUpZGVub3JtYWxpemUobW9ycGgsbW9ycGhOb3JtYWwpO2J1ZmZlcltvZmZzZXQrc3RyaWRlKzRdPW1vcnBoLng7YnVmZmVyW29mZnNldCtzdHJpZGUrNV09bW9ycGgueTtidWZmZXJbb2Zmc2V0K3N0cmlkZSs2XT1tb3JwaC56O2J1ZmZlcltvZmZzZXQrc3RyaWRlKzddPTA7fX19ZW50cnk9e2NvdW50Om51bWJlck9mTW9ycGhUYXJnZXRzLHRleHR1cmU6dGV4dHVyZSxzaXplOm5ldyBWZWN0b3IyKHdpZHRoLGhlaWdodCl9O21vcnBoVGV4dHVyZXMuc2V0KGdlb21ldHJ5LGVudHJ5KTt9Ly8KCWxldCBtb3JwaEluZmx1ZW5jZXNTdW09MDtmb3IobGV0IGk9MDtpPG9iamVjdEluZmx1ZW5jZXMubGVuZ3RoO2krKyl7bW9ycGhJbmZsdWVuY2VzU3VtKz1vYmplY3RJbmZsdWVuY2VzW2ldO31jb25zdCBtb3JwaEJhc2VJbmZsdWVuY2U9Z2VvbWV0cnkubW9ycGhUYXJnZXRzUmVsYXRpdmU/MToxLW1vcnBoSW5mbHVlbmNlc1N1bTtwcm9ncmFtLmdldFVuaWZvcm1zKCkuc2V0VmFsdWUoZ2wsJ21vcnBoVGFyZ2V0QmFzZUluZmx1ZW5jZScsbW9ycGhCYXNlSW5mbHVlbmNlKTtwcm9ncmFtLmdldFVuaWZvcm1zKCkuc2V0VmFsdWUoZ2wsJ21vcnBoVGFyZ2V0SW5mbHVlbmNlcycsb2JqZWN0SW5mbHVlbmNlcyk7cHJvZ3JhbS5nZXRVbmlmb3JtcygpLnNldFZhbHVlKGdsLCdtb3JwaFRhcmdldHNUZXh0dXJlJyxlbnRyeS50ZXh0dXJlLHRleHR1cmVzKTtwcm9ncmFtLmdldFVuaWZvcm1zKCkuc2V0VmFsdWUoZ2wsJ21vcnBoVGFyZ2V0c1RleHR1cmVTaXplJyxlbnRyeS5zaXplKTt9ZWxzZSB7Ly8gV2hlbiBvYmplY3QgZG9lc24ndCBoYXZlIG1vcnBoIHRhcmdldCBpbmZsdWVuY2VzIGRlZmluZWQsIHdlIHRyZWF0IGl0IGFzIGEgMC1sZW5ndGggYXJyYXkKCS8vIFRoaXMgaXMgaW1wb3J0YW50IHRvIG1ha2Ugc3VyZSB3ZSBzZXQgdXAgbW9ycGhUYXJnZXRCYXNlSW5mbHVlbmNlIC8gbW9ycGhUYXJnZXRJbmZsdWVuY2VzCgljb25zdCBsZW5ndGg9b2JqZWN0SW5mbHVlbmNlcz09PXVuZGVmaW5lZD8wOm9iamVjdEluZmx1ZW5jZXMubGVuZ3RoO2xldCBpbmZsdWVuY2VzPWluZmx1ZW5jZXNMaXN0W2dlb21ldHJ5LmlkXTtpZihpbmZsdWVuY2VzPT09dW5kZWZpbmVkfHxpbmZsdWVuY2VzLmxlbmd0aCE9PWxlbmd0aCl7Ly8gaW5pdGlhbGlzZSBsaXN0CglpbmZsdWVuY2VzPVtdO2ZvcihsZXQgaT0wO2k8bGVuZ3RoO2krKyl7aW5mbHVlbmNlc1tpXT1baSwwXTt9aW5mbHVlbmNlc0xpc3RbZ2VvbWV0cnkuaWRdPWluZmx1ZW5jZXM7fS8vIENvbGxlY3QgaW5mbHVlbmNlcwoJZm9yKGxldCBpPTA7aTxsZW5ndGg7aSsrKXtjb25zdCBpbmZsdWVuY2U9aW5mbHVlbmNlc1tpXTtpbmZsdWVuY2VbMF09aTtpbmZsdWVuY2VbMV09b2JqZWN0SW5mbHVlbmNlc1tpXTt9aW5mbHVlbmNlcy5zb3J0KGFic051bWVyaWNhbFNvcnQpO2ZvcihsZXQgaT0wO2k8ODtpKyspe2lmKGk8bGVuZ3RoJiZpbmZsdWVuY2VzW2ldWzFdKXt3b3JrSW5mbHVlbmNlc1tpXVswXT1pbmZsdWVuY2VzW2ldWzBdO3dvcmtJbmZsdWVuY2VzW2ldWzFdPWluZmx1ZW5jZXNbaV1bMV07fWVsc2Uge3dvcmtJbmZsdWVuY2VzW2ldWzBdPU51bWJlci5NQVhfU0FGRV9JTlRFR0VSO3dvcmtJbmZsdWVuY2VzW2ldWzFdPTA7fX13b3JrSW5mbHVlbmNlcy5zb3J0KG51bWVyaWNhbFNvcnQpO2NvbnN0IG1vcnBoVGFyZ2V0cz1nZW9tZXRyeS5tb3JwaEF0dHJpYnV0ZXMucG9zaXRpb247Y29uc3QgbW9ycGhOb3JtYWxzPWdlb21ldHJ5Lm1vcnBoQXR0cmlidXRlcy5ub3JtYWw7bGV0IG1vcnBoSW5mbHVlbmNlc1N1bT0wO2ZvcihsZXQgaT0wO2k8ODtpKyspe2NvbnN0IGluZmx1ZW5jZT13b3JrSW5mbHVlbmNlc1tpXTtjb25zdCBpbmRleD1pbmZsdWVuY2VbMF07Y29uc3QgdmFsdWU9aW5mbHVlbmNlWzFdO2lmKGluZGV4IT09TnVtYmVyLk1BWF9TQUZFX0lOVEVHRVImJnZhbHVlKXtpZihtb3JwaFRhcmdldHMmJmdlb21ldHJ5LmdldEF0dHJpYnV0ZSgnbW9ycGhUYXJnZXQnK2kpIT09bW9ycGhUYXJnZXRzW2luZGV4XSl7Z2VvbWV0cnkuc2V0QXR0cmlidXRlKCdtb3JwaFRhcmdldCcraSxtb3JwaFRhcmdldHNbaW5kZXhdKTt9aWYobW9ycGhOb3JtYWxzJiZnZW9tZXRyeS5nZXRBdHRyaWJ1dGUoJ21vcnBoTm9ybWFsJytpKSE9PW1vcnBoTm9ybWFsc1tpbmRleF0pe2dlb21ldHJ5LnNldEF0dHJpYnV0ZSgnbW9ycGhOb3JtYWwnK2ksbW9ycGhOb3JtYWxzW2luZGV4XSk7fW1vcnBoSW5mbHVlbmNlc1tpXT12YWx1ZTttb3JwaEluZmx1ZW5jZXNTdW0rPXZhbHVlO31lbHNlIHtpZihtb3JwaFRhcmdldHMmJmdlb21ldHJ5Lmhhc0F0dHJpYnV0ZSgnbW9ycGhUYXJnZXQnK2kpPT09dHJ1ZSl7Z2VvbWV0cnkuZGVsZXRlQXR0cmlidXRlKCdtb3JwaFRhcmdldCcraSk7fWlmKG1vcnBoTm9ybWFscyYmZ2VvbWV0cnkuaGFzQXR0cmlidXRlKCdtb3JwaE5vcm1hbCcraSk9PT10cnVlKXtnZW9tZXRyeS5kZWxldGVBdHRyaWJ1dGUoJ21vcnBoTm9ybWFsJytpKTt9bW9ycGhJbmZsdWVuY2VzW2ldPTA7fX0vLyBHTFNMIHNoYWRlciB1c2VzIGZvcm11bGEgYmFzZWluZmx1ZW5jZSAqIGJhc2UgKyBzdW0odGFyZ2V0ICogaW5mbHVlbmNlKQoJLy8gVGhpcyBhbGxvd3MgdXMgdG8gc3dpdGNoIGJldHdlZW4gYWJzb2x1dGUgbW9ycGhzIGFuZCByZWxhdGl2ZSBtb3JwaHMgd2l0aG91dCBjaGFuZ2luZyBzaGFkZXIgY29kZQoJLy8gV2hlbiBiYXNlaW5mbHVlbmNlID0gMSAtIHN1bShpbmZsdWVuY2UpLCB0aGUgYWJvdmUgaXMgZXF1aXZhbGVudCB0byBzdW0oKHRhcmdldCAtIGJhc2UpICogaW5mbHVlbmNlKQoJY29uc3QgbW9ycGhCYXNlSW5mbHVlbmNlPWdlb21ldHJ5Lm1vcnBoVGFyZ2V0c1JlbGF0aXZlPzE6MS1tb3JwaEluZmx1ZW5jZXNTdW07cHJvZ3JhbS5nZXRVbmlmb3JtcygpLnNldFZhbHVlKGdsLCdtb3JwaFRhcmdldEJhc2VJbmZsdWVuY2UnLG1vcnBoQmFzZUluZmx1ZW5jZSk7cHJvZ3JhbS5nZXRVbmlmb3JtcygpLnNldFZhbHVlKGdsLCdtb3JwaFRhcmdldEluZmx1ZW5jZXMnLG1vcnBoSW5mbHVlbmNlcyk7fX1yZXR1cm4ge3VwZGF0ZTp1cGRhdGV9O31mdW5jdGlvbiBXZWJHTE9iamVjdHMoZ2wsZ2VvbWV0cmllcyxhdHRyaWJ1dGVzLGluZm8pe2xldCB1cGRhdGVNYXA9bmV3IFdlYWtNYXAoKTtmdW5jdGlvbiB1cGRhdGUob2JqZWN0KXtjb25zdCBmcmFtZT1pbmZvLnJlbmRlci5mcmFtZTtjb25zdCBnZW9tZXRyeT1vYmplY3QuZ2VvbWV0cnk7Y29uc3QgYnVmZmVyZ2VvbWV0cnk9Z2VvbWV0cmllcy5nZXQob2JqZWN0LGdlb21ldHJ5KTsvLyBVcGRhdGUgb25jZSBwZXIgZnJhbWUKCWlmKHVwZGF0ZU1hcC5nZXQoYnVmZmVyZ2VvbWV0cnkpIT09ZnJhbWUpe2dlb21ldHJpZXMudXBkYXRlKGJ1ZmZlcmdlb21ldHJ5KTt1cGRhdGVNYXAuc2V0KGJ1ZmZlcmdlb21ldHJ5LGZyYW1lKTt9aWYob2JqZWN0LmlzSW5zdGFuY2VkTWVzaCl7aWYob2JqZWN0Lmhhc0V2ZW50TGlzdGVuZXIoJ2Rpc3Bvc2UnLG9uSW5zdGFuY2VkTWVzaERpc3Bvc2UpPT09ZmFsc2Upe29iamVjdC5hZGRFdmVudExpc3RlbmVyKCdkaXNwb3NlJyxvbkluc3RhbmNlZE1lc2hEaXNwb3NlKTt9YXR0cmlidXRlcy51cGRhdGUob2JqZWN0Lmluc3RhbmNlTWF0cml4LDM0OTYyKTtpZihvYmplY3QuaW5zdGFuY2VDb2xvciE9PW51bGwpe2F0dHJpYnV0ZXMudXBkYXRlKG9iamVjdC5pbnN0YW5jZUNvbG9yLDM0OTYyKTt9fXJldHVybiBidWZmZXJnZW9tZXRyeTt9ZnVuY3Rpb24gZGlzcG9zZSgpe3VwZGF0ZU1hcD1uZXcgV2Vha01hcCgpO31mdW5jdGlvbiBvbkluc3RhbmNlZE1lc2hEaXNwb3NlKGV2ZW50KXtjb25zdCBpbnN0YW5jZWRNZXNoPWV2ZW50LnRhcmdldDtpbnN0YW5jZWRNZXNoLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Rpc3Bvc2UnLG9uSW5zdGFuY2VkTWVzaERpc3Bvc2UpO2F0dHJpYnV0ZXMucmVtb3ZlKGluc3RhbmNlZE1lc2guaW5zdGFuY2VNYXRyaXgpO2lmKGluc3RhbmNlZE1lc2guaW5zdGFuY2VDb2xvciE9PW51bGwpYXR0cmlidXRlcy5yZW1vdmUoaW5zdGFuY2VkTWVzaC5pbnN0YW5jZUNvbG9yKTt9cmV0dXJuIHt1cGRhdGU6dXBkYXRlLGRpc3Bvc2U6ZGlzcG9zZX07fWNsYXNzIERhdGFUZXh0dXJlM0QgZXh0ZW5kcyBUZXh0dXJle2NvbnN0cnVjdG9yKGRhdGEsd2lkdGgsaGVpZ2h0LGRlcHRoKXtpZihkYXRhPT09dm9pZCAwKXtkYXRhPW51bGw7fWlmKHdpZHRoPT09dm9pZCAwKXt3aWR0aD0xO31pZihoZWlnaHQ9PT12b2lkIDApe2hlaWdodD0xO31pZihkZXB0aD09PXZvaWQgMCl7ZGVwdGg9MTt9Ly8gV2UncmUgZ29pbmcgdG8gYWRkIC5zZXRYWFgoKSBtZXRob2RzIGZvciBzZXR0aW5nIHByb3BlcnRpZXMgbGF0ZXIuCgkvLyBVc2VycyBjYW4gc3RpbGwgc2V0IGluIERhdGFUZXh0dXJlM0QgZGlyZWN0bHkuCgkvLwoJLy8JY29uc3QgdGV4dHVyZSA9IG5ldyBUSFJFRS5EYXRhVGV4dHVyZTNEKCBkYXRhLCB3aWR0aCwgaGVpZ2h0LCBkZXB0aCApOwoJLy8gCXRleHR1cmUuYW5pc290cm9weSA9IDE2OwoJLy8KCS8vIFNlZSAjMTQ4MzkKCXN1cGVyKG51bGwpO3RoaXMuaW1hZ2U9e2RhdGEsd2lkdGgsaGVpZ2h0LGRlcHRofTt0aGlzLm1hZ0ZpbHRlcj1OZWFyZXN0RmlsdGVyO3RoaXMubWluRmlsdGVyPU5lYXJlc3RGaWx0ZXI7dGhpcy53cmFwUj1DbGFtcFRvRWRnZVdyYXBwaW5nO3RoaXMuZ2VuZXJhdGVNaXBtYXBzPWZhbHNlO3RoaXMuZmxpcFk9ZmFsc2U7dGhpcy51bnBhY2tBbGlnbm1lbnQ9MTt0aGlzLm5lZWRzVXBkYXRlPXRydWU7fX1EYXRhVGV4dHVyZTNELnByb3RvdHlwZS5pc0RhdGFUZXh0dXJlM0Q9dHJ1ZTsvKioKCSAqIFVuaWZvcm1zIG9mIGEgcHJvZ3JhbS4KCSAqIFRob3NlIGZvcm0gYSB0cmVlIHN0cnVjdHVyZSB3aXRoIGEgc3BlY2lhbCB0b3AtbGV2ZWwgY29udGFpbmVyIGZvciB0aGUgcm9vdCwKCSAqIHdoaWNoIHlvdSBnZXQgYnkgY2FsbGluZyAnbmV3IFdlYkdMVW5pZm9ybXMoIGdsLCBwcm9ncmFtICknLgoJICoKCSAqCgkgKiBQcm9wZXJ0aWVzIG9mIGlubmVyIG5vZGVzIGluY2x1ZGluZyB0aGUgdG9wLWxldmVsIGNvbnRhaW5lcjoKCSAqCgkgKiAuc2VxIC0gYXJyYXkgb2YgbmVzdGVkIHVuaWZvcm1zCgkgKiAubWFwIC0gbmVzdGVkIHVuaWZvcm1zIGJ5IG5hbWUKCSAqCgkgKgoJICogTWV0aG9kcyBvZiBhbGwgbm9kZXMgZXhjZXB0IHRoZSB0b3AtbGV2ZWwgY29udGFpbmVyOgoJICoKCSAqIC5zZXRWYWx1ZSggZ2wsIHZhbHVlLCBbdGV4dHVyZXNdICkKCSAqCgkgKiAJCXVwbG9hZHMgYSB1bmlmb3JtIHZhbHVlKHMpCgkgKiAgCXRoZSAndGV4dHVyZXMnIHBhcmFtZXRlciBpcyBuZWVkZWQgZm9yIHNhbXBsZXIgdW5pZm9ybXMKCSAqCgkgKgoJICogU3RhdGljIG1ldGhvZHMgb2YgdGhlIHRvcC1sZXZlbCBjb250YWluZXIgKHRleHR1cmVzIGZhY3Rvcml6YXRpb25zKToKCSAqCgkgKiAudXBsb2FkKCBnbCwgc2VxLCB2YWx1ZXMsIHRleHR1cmVzICkKCSAqCgkgKiAJCXNldHMgdW5pZm9ybXMgaW4gJ3NlcScgdG8gJ3ZhbHVlc1tpZF0udmFsdWUnCgkgKgoJICogLnNlcVdpdGhWYWx1ZSggc2VxLCB2YWx1ZXMgKSA6IGZpbHRlcmVkU2VxCgkgKgoJICogCQlmaWx0ZXJzICdzZXEnIGVudHJpZXMgd2l0aCBjb3JyZXNwb25kaW5nIGVudHJ5IGluIHZhbHVlcwoJICoKCSAqCgkgKiBNZXRob2RzIG9mIHRoZSB0b3AtbGV2ZWwgY29udGFpbmVyICh0ZXh0dXJlcyBmYWN0b3JpemF0aW9ucyk6CgkgKgoJICogLnNldFZhbHVlKCBnbCwgbmFtZSwgdmFsdWUsIHRleHR1cmVzICkKCSAqCgkgKiAJCXNldHMgdW5pZm9ybSB3aXRoICBuYW1lICduYW1lJyB0byAndmFsdWUnCgkgKgoJICogLnNldE9wdGlvbmFsKCBnbCwgb2JqLCBwcm9wICkKCSAqCgkgKiAJCWxpa2UgLnNldCBmb3IgYW4gb3B0aW9uYWwgcHJvcGVydHkgb2YgdGhlIG9iamVjdAoJICoKCSAqL2NvbnN0IGVtcHR5VGV4dHVyZT1uZXcgVGV4dHVyZSgpO2NvbnN0IGVtcHR5VGV4dHVyZTJkQXJyYXk9bmV3IERhdGFUZXh0dXJlMkRBcnJheSgpO2NvbnN0IGVtcHR5VGV4dHVyZTNkPW5ldyBEYXRhVGV4dHVyZTNEKCk7Y29uc3QgZW1wdHlDdWJlVGV4dHVyZT1uZXcgQ3ViZVRleHR1cmUoKTsvLyAtLS0gVXRpbGl0aWVzIC0tLQoJLy8gQXJyYXkgQ2FjaGVzIChwcm92aWRlIHR5cGVkIGFycmF5cyBmb3IgdGVtcG9yYXJ5IGJ5IHNpemUpCgljb25zdCBhcnJheUNhY2hlRjMyPVtdO2NvbnN0IGFycmF5Q2FjaGVJMzI9W107Ly8gRmxvYXQzMkFycmF5IGNhY2hlcyB1c2VkIGZvciB1cGxvYWRpbmcgTWF0cml4IHVuaWZvcm1zCgljb25zdCBtYXQ0YXJyYXk9bmV3IEZsb2F0MzJBcnJheSgxNik7Y29uc3QgbWF0M2FycmF5PW5ldyBGbG9hdDMyQXJyYXkoOSk7Y29uc3QgbWF0MmFycmF5PW5ldyBGbG9hdDMyQXJyYXkoNCk7Ly8gRmxhdHRlbmluZyBmb3IgYXJyYXlzIG9mIHZlY3RvcnMgYW5kIG1hdHJpY2VzCglmdW5jdGlvbiBmbGF0dGVuKGFycmF5LG5CbG9ja3MsYmxvY2tTaXplKXtjb25zdCBmaXJzdEVsZW09YXJyYXlbMF07aWYoZmlyc3RFbGVtPD0wfHxmaXJzdEVsZW0+MClyZXR1cm4gYXJyYXk7Ly8gdW5vcHRpbWl6ZWQ6ICEgaXNOYU4oIGZpcnN0RWxlbSApCgkvLyBzZWUgaHR0cDovL2phY2tzb25kdW5zdGFuLmNvbS9hcnRpY2xlcy85ODMKCWNvbnN0IG49bkJsb2NrcypibG9ja1NpemU7bGV0IHI9YXJyYXlDYWNoZUYzMltuXTtpZihyPT09dW5kZWZpbmVkKXtyPW5ldyBGbG9hdDMyQXJyYXkobik7YXJyYXlDYWNoZUYzMltuXT1yO31pZihuQmxvY2tzIT09MCl7Zmlyc3RFbGVtLnRvQXJyYXkociwwKTtmb3IobGV0IGk9MSxvZmZzZXQ9MDtpIT09bkJsb2NrczsrK2kpe29mZnNldCs9YmxvY2tTaXplO2FycmF5W2ldLnRvQXJyYXkocixvZmZzZXQpO319cmV0dXJuIHI7fWZ1bmN0aW9uIGFycmF5c0VxdWFsKGEsYil7aWYoYS5sZW5ndGghPT1iLmxlbmd0aClyZXR1cm4gZmFsc2U7Zm9yKGxldCBpPTAsbD1hLmxlbmd0aDtpPGw7aSsrKXtpZihhW2ldIT09YltpXSlyZXR1cm4gZmFsc2U7fXJldHVybiB0cnVlO31mdW5jdGlvbiBjb3B5QXJyYXkoYSxiKXtmb3IobGV0IGk9MCxsPWIubGVuZ3RoO2k8bDtpKyspe2FbaV09YltpXTt9fS8vIFRleHR1cmUgdW5pdCBhbGxvY2F0aW9uCglmdW5jdGlvbiBhbGxvY1RleFVuaXRzKHRleHR1cmVzLG4pe2xldCByPWFycmF5Q2FjaGVJMzJbbl07aWYocj09PXVuZGVmaW5lZCl7cj1uZXcgSW50MzJBcnJheShuKTthcnJheUNhY2hlSTMyW25dPXI7fWZvcihsZXQgaT0wO2khPT1uOysraSl7cltpXT10ZXh0dXJlcy5hbGxvY2F0ZVRleHR1cmVVbml0KCk7fXJldHVybiByO30vLyAtLS0gU2V0dGVycyAtLS0KCS8vIE5vdGU6IERlZmluaW5nIHRoZXNlIG1ldGhvZHMgZXh0ZXJuYWxseSwgYmVjYXVzZSB0aGV5IGNvbWUgaW4gYSBidW5jaAoJLy8gYW5kIHRoaXMgd2F5IHRoZWlyIG5hbWVzIG1pbmlmeS4KCS8vIFNpbmdsZSBzY2FsYXIKCWZ1bmN0aW9uIHNldFZhbHVlVjFmKGdsLHYpe2NvbnN0IGNhY2hlPXRoaXMuY2FjaGU7aWYoY2FjaGVbMF09PT12KXJldHVybjtnbC51bmlmb3JtMWYodGhpcy5hZGRyLHYpO2NhY2hlWzBdPXY7fS8vIFNpbmdsZSBmbG9hdCB2ZWN0b3IgKGZyb20gZmxhdCBhcnJheSBvciBUSFJFRS5WZWN0b3JOKQoJZnVuY3Rpb24gc2V0VmFsdWVWMmYoZ2wsdil7Y29uc3QgY2FjaGU9dGhpcy5jYWNoZTtpZih2LnghPT11bmRlZmluZWQpe2lmKGNhY2hlWzBdIT09di54fHxjYWNoZVsxXSE9PXYueSl7Z2wudW5pZm9ybTJmKHRoaXMuYWRkcix2Lngsdi55KTtjYWNoZVswXT12Lng7Y2FjaGVbMV09di55O319ZWxzZSB7aWYoYXJyYXlzRXF1YWwoY2FjaGUsdikpcmV0dXJuO2dsLnVuaWZvcm0yZnYodGhpcy5hZGRyLHYpO2NvcHlBcnJheShjYWNoZSx2KTt9fWZ1bmN0aW9uIHNldFZhbHVlVjNmKGdsLHYpe2NvbnN0IGNhY2hlPXRoaXMuY2FjaGU7aWYodi54IT09dW5kZWZpbmVkKXtpZihjYWNoZVswXSE9PXYueHx8Y2FjaGVbMV0hPT12Lnl8fGNhY2hlWzJdIT09di56KXtnbC51bmlmb3JtM2YodGhpcy5hZGRyLHYueCx2Lnksdi56KTtjYWNoZVswXT12Lng7Y2FjaGVbMV09di55O2NhY2hlWzJdPXYuejt9fWVsc2UgaWYodi5yIT09dW5kZWZpbmVkKXtpZihjYWNoZVswXSE9PXYucnx8Y2FjaGVbMV0hPT12Lmd8fGNhY2hlWzJdIT09di5iKXtnbC51bmlmb3JtM2YodGhpcy5hZGRyLHYucix2Lmcsdi5iKTtjYWNoZVswXT12LnI7Y2FjaGVbMV09di5nO2NhY2hlWzJdPXYuYjt9fWVsc2Uge2lmKGFycmF5c0VxdWFsKGNhY2hlLHYpKXJldHVybjtnbC51bmlmb3JtM2Z2KHRoaXMuYWRkcix2KTtjb3B5QXJyYXkoY2FjaGUsdik7fX1mdW5jdGlvbiBzZXRWYWx1ZVY0ZihnbCx2KXtjb25zdCBjYWNoZT10aGlzLmNhY2hlO2lmKHYueCE9PXVuZGVmaW5lZCl7aWYoY2FjaGVbMF0hPT12Lnh8fGNhY2hlWzFdIT09di55fHxjYWNoZVsyXSE9PXYuenx8Y2FjaGVbM10hPT12Lncpe2dsLnVuaWZvcm00Zih0aGlzLmFkZHIsdi54LHYueSx2Lnosdi53KTtjYWNoZVswXT12Lng7Y2FjaGVbMV09di55O2NhY2hlWzJdPXYuejtjYWNoZVszXT12Lnc7fX1lbHNlIHtpZihhcnJheXNFcXVhbChjYWNoZSx2KSlyZXR1cm47Z2wudW5pZm9ybTRmdih0aGlzLmFkZHIsdik7Y29weUFycmF5KGNhY2hlLHYpO319Ly8gU2luZ2xlIG1hdHJpeCAoZnJvbSBmbGF0IGFycmF5IG9yIFRIUkVFLk1hdHJpeE4pCglmdW5jdGlvbiBzZXRWYWx1ZU0yKGdsLHYpe2NvbnN0IGNhY2hlPXRoaXMuY2FjaGU7Y29uc3QgZWxlbWVudHM9di5lbGVtZW50cztpZihlbGVtZW50cz09PXVuZGVmaW5lZCl7aWYoYXJyYXlzRXF1YWwoY2FjaGUsdikpcmV0dXJuO2dsLnVuaWZvcm1NYXRyaXgyZnYodGhpcy5hZGRyLGZhbHNlLHYpO2NvcHlBcnJheShjYWNoZSx2KTt9ZWxzZSB7aWYoYXJyYXlzRXF1YWwoY2FjaGUsZWxlbWVudHMpKXJldHVybjttYXQyYXJyYXkuc2V0KGVsZW1lbnRzKTtnbC51bmlmb3JtTWF0cml4MmZ2KHRoaXMuYWRkcixmYWxzZSxtYXQyYXJyYXkpO2NvcHlBcnJheShjYWNoZSxlbGVtZW50cyk7fX1mdW5jdGlvbiBzZXRWYWx1ZU0zKGdsLHYpe2NvbnN0IGNhY2hlPXRoaXMuY2FjaGU7Y29uc3QgZWxlbWVudHM9di5lbGVtZW50cztpZihlbGVtZW50cz09PXVuZGVmaW5lZCl7aWYoYXJyYXlzRXF1YWwoY2FjaGUsdikpcmV0dXJuO2dsLnVuaWZvcm1NYXRyaXgzZnYodGhpcy5hZGRyLGZhbHNlLHYpO2NvcHlBcnJheShjYWNoZSx2KTt9ZWxzZSB7aWYoYXJyYXlzRXF1YWwoY2FjaGUsZWxlbWVudHMpKXJldHVybjttYXQzYXJyYXkuc2V0KGVsZW1lbnRzKTtnbC51bmlmb3JtTWF0cml4M2Z2KHRoaXMuYWRkcixmYWxzZSxtYXQzYXJyYXkpO2NvcHlBcnJheShjYWNoZSxlbGVtZW50cyk7fX1mdW5jdGlvbiBzZXRWYWx1ZU00KGdsLHYpe2NvbnN0IGNhY2hlPXRoaXMuY2FjaGU7Y29uc3QgZWxlbWVudHM9di5lbGVtZW50cztpZihlbGVtZW50cz09PXVuZGVmaW5lZCl7aWYoYXJyYXlzRXF1YWwoY2FjaGUsdikpcmV0dXJuO2dsLnVuaWZvcm1NYXRyaXg0ZnYodGhpcy5hZGRyLGZhbHNlLHYpO2NvcHlBcnJheShjYWNoZSx2KTt9ZWxzZSB7aWYoYXJyYXlzRXF1YWwoY2FjaGUsZWxlbWVudHMpKXJldHVybjttYXQ0YXJyYXkuc2V0KGVsZW1lbnRzKTtnbC51bmlmb3JtTWF0cml4NGZ2KHRoaXMuYWRkcixmYWxzZSxtYXQ0YXJyYXkpO2NvcHlBcnJheShjYWNoZSxlbGVtZW50cyk7fX0vLyBTaW5nbGUgaW50ZWdlciAvIGJvb2xlYW4KCWZ1bmN0aW9uIHNldFZhbHVlVjFpKGdsLHYpe2NvbnN0IGNhY2hlPXRoaXMuY2FjaGU7aWYoY2FjaGVbMF09PT12KXJldHVybjtnbC51bmlmb3JtMWkodGhpcy5hZGRyLHYpO2NhY2hlWzBdPXY7fS8vIFNpbmdsZSBpbnRlZ2VyIC8gYm9vbGVhbiB2ZWN0b3IgKGZyb20gZmxhdCBhcnJheSkKCWZ1bmN0aW9uIHNldFZhbHVlVjJpKGdsLHYpe2NvbnN0IGNhY2hlPXRoaXMuY2FjaGU7aWYoYXJyYXlzRXF1YWwoY2FjaGUsdikpcmV0dXJuO2dsLnVuaWZvcm0yaXYodGhpcy5hZGRyLHYpO2NvcHlBcnJheShjYWNoZSx2KTt9ZnVuY3Rpb24gc2V0VmFsdWVWM2koZ2wsdil7Y29uc3QgY2FjaGU9dGhpcy5jYWNoZTtpZihhcnJheXNFcXVhbChjYWNoZSx2KSlyZXR1cm47Z2wudW5pZm9ybTNpdih0aGlzLmFkZHIsdik7Y29weUFycmF5KGNhY2hlLHYpO31mdW5jdGlvbiBzZXRWYWx1ZVY0aShnbCx2KXtjb25zdCBjYWNoZT10aGlzLmNhY2hlO2lmKGFycmF5c0VxdWFsKGNhY2hlLHYpKXJldHVybjtnbC51bmlmb3JtNGl2KHRoaXMuYWRkcix2KTtjb3B5QXJyYXkoY2FjaGUsdik7fS8vIFNpbmdsZSB1bnNpZ25lZCBpbnRlZ2VyCglmdW5jdGlvbiBzZXRWYWx1ZVYxdWkoZ2wsdil7Y29uc3QgY2FjaGU9dGhpcy5jYWNoZTtpZihjYWNoZVswXT09PXYpcmV0dXJuO2dsLnVuaWZvcm0xdWkodGhpcy5hZGRyLHYpO2NhY2hlWzBdPXY7fS8vIFNpbmdsZSB1bnNpZ25lZCBpbnRlZ2VyIHZlY3RvciAoZnJvbSBmbGF0IGFycmF5KQoJZnVuY3Rpb24gc2V0VmFsdWVWMnVpKGdsLHYpe2NvbnN0IGNhY2hlPXRoaXMuY2FjaGU7aWYoYXJyYXlzRXF1YWwoY2FjaGUsdikpcmV0dXJuO2dsLnVuaWZvcm0ydWl2KHRoaXMuYWRkcix2KTtjb3B5QXJyYXkoY2FjaGUsdik7fWZ1bmN0aW9uIHNldFZhbHVlVjN1aShnbCx2KXtjb25zdCBjYWNoZT10aGlzLmNhY2hlO2lmKGFycmF5c0VxdWFsKGNhY2hlLHYpKXJldHVybjtnbC51bmlmb3JtM3Vpdih0aGlzLmFkZHIsdik7Y29weUFycmF5KGNhY2hlLHYpO31mdW5jdGlvbiBzZXRWYWx1ZVY0dWkoZ2wsdil7Y29uc3QgY2FjaGU9dGhpcy5jYWNoZTtpZihhcnJheXNFcXVhbChjYWNoZSx2KSlyZXR1cm47Z2wudW5pZm9ybTR1aXYodGhpcy5hZGRyLHYpO2NvcHlBcnJheShjYWNoZSx2KTt9Ly8gU2luZ2xlIHRleHR1cmUgKDJEIC8gQ3ViZSkKCWZ1bmN0aW9uIHNldFZhbHVlVDEoZ2wsdix0ZXh0dXJlcyl7Y29uc3QgY2FjaGU9dGhpcy5jYWNoZTtjb25zdCB1bml0PXRleHR1cmVzLmFsbG9jYXRlVGV4dHVyZVVuaXQoKTtpZihjYWNoZVswXSE9PXVuaXQpe2dsLnVuaWZvcm0xaSh0aGlzLmFkZHIsdW5pdCk7Y2FjaGVbMF09dW5pdDt9dGV4dHVyZXMuc2FmZVNldFRleHR1cmUyRCh2fHxlbXB0eVRleHR1cmUsdW5pdCk7fWZ1bmN0aW9uIHNldFZhbHVlVDNEMShnbCx2LHRleHR1cmVzKXtjb25zdCBjYWNoZT10aGlzLmNhY2hlO2NvbnN0IHVuaXQ9dGV4dHVyZXMuYWxsb2NhdGVUZXh0dXJlVW5pdCgpO2lmKGNhY2hlWzBdIT09dW5pdCl7Z2wudW5pZm9ybTFpKHRoaXMuYWRkcix1bml0KTtjYWNoZVswXT11bml0O310ZXh0dXJlcy5zZXRUZXh0dXJlM0Qodnx8ZW1wdHlUZXh0dXJlM2QsdW5pdCk7fWZ1bmN0aW9uIHNldFZhbHVlVDYoZ2wsdix0ZXh0dXJlcyl7Y29uc3QgY2FjaGU9dGhpcy5jYWNoZTtjb25zdCB1bml0PXRleHR1cmVzLmFsbG9jYXRlVGV4dHVyZVVuaXQoKTtpZihjYWNoZVswXSE9PXVuaXQpe2dsLnVuaWZvcm0xaSh0aGlzLmFkZHIsdW5pdCk7Y2FjaGVbMF09dW5pdDt9dGV4dHVyZXMuc2FmZVNldFRleHR1cmVDdWJlKHZ8fGVtcHR5Q3ViZVRleHR1cmUsdW5pdCk7fWZ1bmN0aW9uIHNldFZhbHVlVDJEQXJyYXkxKGdsLHYsdGV4dHVyZXMpe2NvbnN0IGNhY2hlPXRoaXMuY2FjaGU7Y29uc3QgdW5pdD10ZXh0dXJlcy5hbGxvY2F0ZVRleHR1cmVVbml0KCk7aWYoY2FjaGVbMF0hPT11bml0KXtnbC51bmlmb3JtMWkodGhpcy5hZGRyLHVuaXQpO2NhY2hlWzBdPXVuaXQ7fXRleHR1cmVzLnNldFRleHR1cmUyREFycmF5KHZ8fGVtcHR5VGV4dHVyZTJkQXJyYXksdW5pdCk7fS8vIEhlbHBlciB0byBwaWNrIHRoZSByaWdodCBzZXR0ZXIgZm9yIHRoZSBzaW5ndWxhciBjYXNlCglmdW5jdGlvbiBnZXRTaW5ndWxhclNldHRlcih0eXBlKXtzd2l0Y2godHlwZSl7Y2FzZSAweDE0MDY6cmV0dXJuIHNldFZhbHVlVjFmOy8vIEZMT0FUCgljYXNlIDB4OGI1MDpyZXR1cm4gc2V0VmFsdWVWMmY7Ly8gX1ZFQzIKCWNhc2UgMHg4YjUxOnJldHVybiBzZXRWYWx1ZVYzZjsvLyBfVkVDMwoJY2FzZSAweDhiNTI6cmV0dXJuIHNldFZhbHVlVjRmOy8vIF9WRUM0CgljYXNlIDB4OGI1YTpyZXR1cm4gc2V0VmFsdWVNMjsvLyBfTUFUMgoJY2FzZSAweDhiNWI6cmV0dXJuIHNldFZhbHVlTTM7Ly8gX01BVDMKCWNhc2UgMHg4YjVjOnJldHVybiBzZXRWYWx1ZU00Oy8vIF9NQVQ0CgljYXNlIDB4MTQwNDpjYXNlIDB4OGI1NjpyZXR1cm4gc2V0VmFsdWVWMWk7Ly8gSU5ULCBCT09MCgljYXNlIDB4OGI1MzpjYXNlIDB4OGI1NzpyZXR1cm4gc2V0VmFsdWVWMmk7Ly8gX1ZFQzIKCWNhc2UgMHg4YjU0OmNhc2UgMHg4YjU4OnJldHVybiBzZXRWYWx1ZVYzaTsvLyBfVkVDMwoJY2FzZSAweDhiNTU6Y2FzZSAweDhiNTk6cmV0dXJuIHNldFZhbHVlVjRpOy8vIF9WRUM0CgljYXNlIDB4MTQwNTpyZXR1cm4gc2V0VmFsdWVWMXVpOy8vIFVJTlQKCWNhc2UgMHg4ZGM2OnJldHVybiBzZXRWYWx1ZVYydWk7Ly8gX1ZFQzIKCWNhc2UgMHg4ZGM3OnJldHVybiBzZXRWYWx1ZVYzdWk7Ly8gX1ZFQzMKCWNhc2UgMHg4ZGM4OnJldHVybiBzZXRWYWx1ZVY0dWk7Ly8gX1ZFQzQKCWNhc2UgMHg4YjVlOi8vIFNBTVBMRVJfMkQKCWNhc2UgMHg4ZDY2Oi8vIFNBTVBMRVJfRVhURVJOQUxfT0VTCgljYXNlIDB4OGRjYTovLyBJTlRfU0FNUExFUl8yRAoJY2FzZSAweDhkZDI6Ly8gVU5TSUdORURfSU5UX1NBTVBMRVJfMkQKCWNhc2UgMHg4YjYyOi8vIFNBTVBMRVJfMkRfU0hBRE9XCglyZXR1cm4gc2V0VmFsdWVUMTtjYXNlIDB4OGI1ZjovLyBTQU1QTEVSXzNECgljYXNlIDB4OGRjYjovLyBJTlRfU0FNUExFUl8zRAoJY2FzZSAweDhkZDM6Ly8gVU5TSUdORURfSU5UX1NBTVBMRVJfM0QKCXJldHVybiBzZXRWYWx1ZVQzRDE7Y2FzZSAweDhiNjA6Ly8gU0FNUExFUl9DVUJFCgljYXNlIDB4OGRjYzovLyBJTlRfU0FNUExFUl9DVUJFCgljYXNlIDB4OGRkNDovLyBVTlNJR05FRF9JTlRfU0FNUExFUl9DVUJFCgljYXNlIDB4OGRjNTovLyBTQU1QTEVSX0NVQkVfU0hBRE9XCglyZXR1cm4gc2V0VmFsdWVUNjtjYXNlIDB4OGRjMTovLyBTQU1QTEVSXzJEX0FSUkFZCgljYXNlIDB4OGRjZjovLyBJTlRfU0FNUExFUl8yRF9BUlJBWQoJY2FzZSAweDhkZDc6Ly8gVU5TSUdORURfSU5UX1NBTVBMRVJfMkRfQVJSQVkKCWNhc2UgMHg4ZGM0Oi8vIFNBTVBMRVJfMkRfQVJSQVlfU0hBRE9XCglyZXR1cm4gc2V0VmFsdWVUMkRBcnJheTE7fX0vLyBBcnJheSBvZiBzY2FsYXJzCglmdW5jdGlvbiBzZXRWYWx1ZVYxZkFycmF5KGdsLHYpe2dsLnVuaWZvcm0xZnYodGhpcy5hZGRyLHYpO30vLyBBcnJheSBvZiB2ZWN0b3JzIChmcm9tIGZsYXQgYXJyYXkgb3IgYXJyYXkgb2YgVEhSRUUuVmVjdG9yTikKCWZ1bmN0aW9uIHNldFZhbHVlVjJmQXJyYXkoZ2wsdil7Y29uc3QgZGF0YT1mbGF0dGVuKHYsdGhpcy5zaXplLDIpO2dsLnVuaWZvcm0yZnYodGhpcy5hZGRyLGRhdGEpO31mdW5jdGlvbiBzZXRWYWx1ZVYzZkFycmF5KGdsLHYpe2NvbnN0IGRhdGE9ZmxhdHRlbih2LHRoaXMuc2l6ZSwzKTtnbC51bmlmb3JtM2Z2KHRoaXMuYWRkcixkYXRhKTt9ZnVuY3Rpb24gc2V0VmFsdWVWNGZBcnJheShnbCx2KXtjb25zdCBkYXRhPWZsYXR0ZW4odix0aGlzLnNpemUsNCk7Z2wudW5pZm9ybTRmdih0aGlzLmFkZHIsZGF0YSk7fS8vIEFycmF5IG9mIG1hdHJpY2VzIChmcm9tIGZsYXQgYXJyYXkgb3IgYXJyYXkgb2YgVEhSRUUuTWF0cml4TikKCWZ1bmN0aW9uIHNldFZhbHVlTTJBcnJheShnbCx2KXtjb25zdCBkYXRhPWZsYXR0ZW4odix0aGlzLnNpemUsNCk7Z2wudW5pZm9ybU1hdHJpeDJmdih0aGlzLmFkZHIsZmFsc2UsZGF0YSk7fWZ1bmN0aW9uIHNldFZhbHVlTTNBcnJheShnbCx2KXtjb25zdCBkYXRhPWZsYXR0ZW4odix0aGlzLnNpemUsOSk7Z2wudW5pZm9ybU1hdHJpeDNmdih0aGlzLmFkZHIsZmFsc2UsZGF0YSk7fWZ1bmN0aW9uIHNldFZhbHVlTTRBcnJheShnbCx2KXtjb25zdCBkYXRhPWZsYXR0ZW4odix0aGlzLnNpemUsMTYpO2dsLnVuaWZvcm1NYXRyaXg0ZnYodGhpcy5hZGRyLGZhbHNlLGRhdGEpO30vLyBBcnJheSBvZiBpbnRlZ2VyIC8gYm9vbGVhbgoJZnVuY3Rpb24gc2V0VmFsdWVWMWlBcnJheShnbCx2KXtnbC51bmlmb3JtMWl2KHRoaXMuYWRkcix2KTt9Ly8gQXJyYXkgb2YgaW50ZWdlciAvIGJvb2xlYW4gdmVjdG9ycyAoZnJvbSBmbGF0IGFycmF5KQoJZnVuY3Rpb24gc2V0VmFsdWVWMmlBcnJheShnbCx2KXtnbC51bmlmb3JtMml2KHRoaXMuYWRkcix2KTt9ZnVuY3Rpb24gc2V0VmFsdWVWM2lBcnJheShnbCx2KXtnbC51bmlmb3JtM2l2KHRoaXMuYWRkcix2KTt9ZnVuY3Rpb24gc2V0VmFsdWVWNGlBcnJheShnbCx2KXtnbC51bmlmb3JtNGl2KHRoaXMuYWRkcix2KTt9Ly8gQXJyYXkgb2YgdW5zaWduZWQgaW50ZWdlcgoJZnVuY3Rpb24gc2V0VmFsdWVWMXVpQXJyYXkoZ2wsdil7Z2wudW5pZm9ybTF1aXYodGhpcy5hZGRyLHYpO30vLyBBcnJheSBvZiB1bnNpZ25lZCBpbnRlZ2VyIHZlY3RvcnMgKGZyb20gZmxhdCBhcnJheSkKCWZ1bmN0aW9uIHNldFZhbHVlVjJ1aUFycmF5KGdsLHYpe2dsLnVuaWZvcm0ydWl2KHRoaXMuYWRkcix2KTt9ZnVuY3Rpb24gc2V0VmFsdWVWM3VpQXJyYXkoZ2wsdil7Z2wudW5pZm9ybTN1aXYodGhpcy5hZGRyLHYpO31mdW5jdGlvbiBzZXRWYWx1ZVY0dWlBcnJheShnbCx2KXtnbC51bmlmb3JtNHVpdih0aGlzLmFkZHIsdik7fS8vIEFycmF5IG9mIHRleHR1cmVzICgyRCAvIDNEIC8gQ3ViZSAvIDJEQXJyYXkpCglmdW5jdGlvbiBzZXRWYWx1ZVQxQXJyYXkoZ2wsdix0ZXh0dXJlcyl7Y29uc3Qgbj12Lmxlbmd0aDtjb25zdCB1bml0cz1hbGxvY1RleFVuaXRzKHRleHR1cmVzLG4pO2dsLnVuaWZvcm0xaXYodGhpcy5hZGRyLHVuaXRzKTtmb3IobGV0IGk9MDtpIT09bjsrK2kpe3RleHR1cmVzLnNhZmVTZXRUZXh0dXJlMkQodltpXXx8ZW1wdHlUZXh0dXJlLHVuaXRzW2ldKTt9fWZ1bmN0aW9uIHNldFZhbHVlVDNEQXJyYXkoZ2wsdix0ZXh0dXJlcyl7Y29uc3Qgbj12Lmxlbmd0aDtjb25zdCB1bml0cz1hbGxvY1RleFVuaXRzKHRleHR1cmVzLG4pO2dsLnVuaWZvcm0xaXYodGhpcy5hZGRyLHVuaXRzKTtmb3IobGV0IGk9MDtpIT09bjsrK2kpe3RleHR1cmVzLnNldFRleHR1cmUzRCh2W2ldfHxlbXB0eVRleHR1cmUzZCx1bml0c1tpXSk7fX1mdW5jdGlvbiBzZXRWYWx1ZVQ2QXJyYXkoZ2wsdix0ZXh0dXJlcyl7Y29uc3Qgbj12Lmxlbmd0aDtjb25zdCB1bml0cz1hbGxvY1RleFVuaXRzKHRleHR1cmVzLG4pO2dsLnVuaWZvcm0xaXYodGhpcy5hZGRyLHVuaXRzKTtmb3IobGV0IGk9MDtpIT09bjsrK2kpe3RleHR1cmVzLnNhZmVTZXRUZXh0dXJlQ3ViZSh2W2ldfHxlbXB0eUN1YmVUZXh0dXJlLHVuaXRzW2ldKTt9fWZ1bmN0aW9uIHNldFZhbHVlVDJEQXJyYXlBcnJheShnbCx2LHRleHR1cmVzKXtjb25zdCBuPXYubGVuZ3RoO2NvbnN0IHVuaXRzPWFsbG9jVGV4VW5pdHModGV4dHVyZXMsbik7Z2wudW5pZm9ybTFpdih0aGlzLmFkZHIsdW5pdHMpO2ZvcihsZXQgaT0wO2khPT1uOysraSl7dGV4dHVyZXMuc2V0VGV4dHVyZTJEQXJyYXkodltpXXx8ZW1wdHlUZXh0dXJlMmRBcnJheSx1bml0c1tpXSk7fX0vLyBIZWxwZXIgdG8gcGljayB0aGUgcmlnaHQgc2V0dGVyIGZvciBhIHB1cmUgKGJvdHRvbS1sZXZlbCkgYXJyYXkKCWZ1bmN0aW9uIGdldFB1cmVBcnJheVNldHRlcih0eXBlKXtzd2l0Y2godHlwZSl7Y2FzZSAweDE0MDY6cmV0dXJuIHNldFZhbHVlVjFmQXJyYXk7Ly8gRkxPQVQKCWNhc2UgMHg4YjUwOnJldHVybiBzZXRWYWx1ZVYyZkFycmF5Oy8vIF9WRUMyCgljYXNlIDB4OGI1MTpyZXR1cm4gc2V0VmFsdWVWM2ZBcnJheTsvLyBfVkVDMwoJY2FzZSAweDhiNTI6cmV0dXJuIHNldFZhbHVlVjRmQXJyYXk7Ly8gX1ZFQzQKCWNhc2UgMHg4YjVhOnJldHVybiBzZXRWYWx1ZU0yQXJyYXk7Ly8gX01BVDIKCWNhc2UgMHg4YjViOnJldHVybiBzZXRWYWx1ZU0zQXJyYXk7Ly8gX01BVDMKCWNhc2UgMHg4YjVjOnJldHVybiBzZXRWYWx1ZU00QXJyYXk7Ly8gX01BVDQKCWNhc2UgMHgxNDA0OmNhc2UgMHg4YjU2OnJldHVybiBzZXRWYWx1ZVYxaUFycmF5Oy8vIElOVCwgQk9PTAoJY2FzZSAweDhiNTM6Y2FzZSAweDhiNTc6cmV0dXJuIHNldFZhbHVlVjJpQXJyYXk7Ly8gX1ZFQzIKCWNhc2UgMHg4YjU0OmNhc2UgMHg4YjU4OnJldHVybiBzZXRWYWx1ZVYzaUFycmF5Oy8vIF9WRUMzCgljYXNlIDB4OGI1NTpjYXNlIDB4OGI1OTpyZXR1cm4gc2V0VmFsdWVWNGlBcnJheTsvLyBfVkVDNAoJY2FzZSAweDE0MDU6cmV0dXJuIHNldFZhbHVlVjF1aUFycmF5Oy8vIFVJTlQKCWNhc2UgMHg4ZGM2OnJldHVybiBzZXRWYWx1ZVYydWlBcnJheTsvLyBfVkVDMgoJY2FzZSAweDhkYzc6cmV0dXJuIHNldFZhbHVlVjN1aUFycmF5Oy8vIF9WRUMzCgljYXNlIDB4OGRjODpyZXR1cm4gc2V0VmFsdWVWNHVpQXJyYXk7Ly8gX1ZFQzQKCWNhc2UgMHg4YjVlOi8vIFNBTVBMRVJfMkQKCWNhc2UgMHg4ZDY2Oi8vIFNBTVBMRVJfRVhURVJOQUxfT0VTCgljYXNlIDB4OGRjYTovLyBJTlRfU0FNUExFUl8yRAoJY2FzZSAweDhkZDI6Ly8gVU5TSUdORURfSU5UX1NBTVBMRVJfMkQKCWNhc2UgMHg4YjYyOi8vIFNBTVBMRVJfMkRfU0hBRE9XCglyZXR1cm4gc2V0VmFsdWVUMUFycmF5O2Nhc2UgMHg4YjVmOi8vIFNBTVBMRVJfM0QKCWNhc2UgMHg4ZGNiOi8vIElOVF9TQU1QTEVSXzNECgljYXNlIDB4OGRkMzovLyBVTlNJR05FRF9JTlRfU0FNUExFUl8zRAoJcmV0dXJuIHNldFZhbHVlVDNEQXJyYXk7Y2FzZSAweDhiNjA6Ly8gU0FNUExFUl9DVUJFCgljYXNlIDB4OGRjYzovLyBJTlRfU0FNUExFUl9DVUJFCgljYXNlIDB4OGRkNDovLyBVTlNJR05FRF9JTlRfU0FNUExFUl9DVUJFCgljYXNlIDB4OGRjNTovLyBTQU1QTEVSX0NVQkVfU0hBRE9XCglyZXR1cm4gc2V0VmFsdWVUNkFycmF5O2Nhc2UgMHg4ZGMxOi8vIFNBTVBMRVJfMkRfQVJSQVkKCWNhc2UgMHg4ZGNmOi8vIElOVF9TQU1QTEVSXzJEX0FSUkFZCgljYXNlIDB4OGRkNzovLyBVTlNJR05FRF9JTlRfU0FNUExFUl8yRF9BUlJBWQoJY2FzZSAweDhkYzQ6Ly8gU0FNUExFUl8yRF9BUlJBWV9TSEFET1cKCXJldHVybiBzZXRWYWx1ZVQyREFycmF5QXJyYXk7fX0vLyAtLS0gVW5pZm9ybSBDbGFzc2VzIC0tLQoJZnVuY3Rpb24gU2luZ2xlVW5pZm9ybShpZCxhY3RpdmVJbmZvLGFkZHIpe3RoaXMuaWQ9aWQ7dGhpcy5hZGRyPWFkZHI7dGhpcy5jYWNoZT1bXTt0aGlzLnNldFZhbHVlPWdldFNpbmd1bGFyU2V0dGVyKGFjdGl2ZUluZm8udHlwZSk7Ly8gdGhpcy5wYXRoID0gYWN0aXZlSW5mby5uYW1lOyAvLyBERUJVRwoJfWZ1bmN0aW9uIFB1cmVBcnJheVVuaWZvcm0oaWQsYWN0aXZlSW5mbyxhZGRyKXt0aGlzLmlkPWlkO3RoaXMuYWRkcj1hZGRyO3RoaXMuY2FjaGU9W107dGhpcy5zaXplPWFjdGl2ZUluZm8uc2l6ZTt0aGlzLnNldFZhbHVlPWdldFB1cmVBcnJheVNldHRlcihhY3RpdmVJbmZvLnR5cGUpOy8vIHRoaXMucGF0aCA9IGFjdGl2ZUluZm8ubmFtZTsgLy8gREVCVUcKCX1QdXJlQXJyYXlVbmlmb3JtLnByb3RvdHlwZS51cGRhdGVDYWNoZT1mdW5jdGlvbihkYXRhKXtjb25zdCBjYWNoZT10aGlzLmNhY2hlO2lmKGRhdGEgaW5zdGFuY2VvZiBGbG9hdDMyQXJyYXkmJmNhY2hlLmxlbmd0aCE9PWRhdGEubGVuZ3RoKXt0aGlzLmNhY2hlPW5ldyBGbG9hdDMyQXJyYXkoZGF0YS5sZW5ndGgpO31jb3B5QXJyYXkoY2FjaGUsZGF0YSk7fTtmdW5jdGlvbiBTdHJ1Y3R1cmVkVW5pZm9ybShpZCl7dGhpcy5pZD1pZDt0aGlzLnNlcT1bXTt0aGlzLm1hcD17fTt9U3RydWN0dXJlZFVuaWZvcm0ucHJvdG90eXBlLnNldFZhbHVlPWZ1bmN0aW9uKGdsLHZhbHVlLHRleHR1cmVzKXtjb25zdCBzZXE9dGhpcy5zZXE7Zm9yKGxldCBpPTAsbj1zZXEubGVuZ3RoO2khPT1uOysraSl7Y29uc3QgdT1zZXFbaV07dS5zZXRWYWx1ZShnbCx2YWx1ZVt1LmlkXSx0ZXh0dXJlcyk7fX07Ly8gLS0tIFRvcC1sZXZlbCAtLS0KCS8vIFBhcnNlciAtIGJ1aWxkcyB1cCB0aGUgcHJvcGVydHkgdHJlZSBmcm9tIHRoZSBwYXRoIHN0cmluZ3MKCWNvbnN0IFJlUGF0aFBhcnQ9LyhcdyspKFxdKT8oXFt8XC4pPy9nOy8vIGV4dHJhY3RzCgkvLyAJLSB0aGUgaWRlbnRpZmllciAobWVtYmVyIG5hbWUgb3IgYXJyYXkgaW5kZXgpCgkvLyAgLSBmb2xsb3dlZCBieSBhbiBvcHRpb25hbCByaWdodCBicmFja2V0IChmb3VuZCB3aGVuIGFycmF5IGluZGV4KQoJLy8gIC0gZm9sbG93ZWQgYnkgYW4gb3B0aW9uYWwgbGVmdCBicmFja2V0IG9yIGRvdCAodHlwZSBvZiBzdWJzY3JpcHQpCgkvLwoJLy8gTm90ZTogVGhlc2UgcG9ydGlvbnMgY2FuIGJlIHJlYWQgaW4gYSBub24tb3ZlcmxhcHBpbmcgZmFzaGlvbiBhbmQKCS8vIGFsbG93IHN0cmFpZ2h0Zm9yd2FyZCBwYXJzaW5nIG9mIHRoZSBoaWVyYXJjaHkgdGhhdCBXZWJHTCBlbmNvZGVzCgkvLyBpbiB0aGUgdW5pZm9ybSBuYW1lcy4KCWZ1bmN0aW9uIGFkZFVuaWZvcm0oY29udGFpbmVyLHVuaWZvcm1PYmplY3Qpe2NvbnRhaW5lci5zZXEucHVzaCh1bmlmb3JtT2JqZWN0KTtjb250YWluZXIubWFwW3VuaWZvcm1PYmplY3QuaWRdPXVuaWZvcm1PYmplY3Q7fWZ1bmN0aW9uIHBhcnNlVW5pZm9ybShhY3RpdmVJbmZvLGFkZHIsY29udGFpbmVyKXtjb25zdCBwYXRoPWFjdGl2ZUluZm8ubmFtZSxwYXRoTGVuZ3RoPXBhdGgubGVuZ3RoOy8vIHJlc2V0IFJlZ0V4cCBvYmplY3QsIGJlY2F1c2Ugb2YgdGhlIGVhcmx5IGV4aXQgb2YgYSBwcmV2aW91cyBydW4KCVJlUGF0aFBhcnQubGFzdEluZGV4PTA7d2hpbGUodHJ1ZSl7Y29uc3QgbWF0Y2g9UmVQYXRoUGFydC5leGVjKHBhdGgpLG1hdGNoRW5kPVJlUGF0aFBhcnQubGFzdEluZGV4O2xldCBpZD1tYXRjaFsxXTtjb25zdCBpZElzSW5kZXg9bWF0Y2hbMl09PT0nXScsc3Vic2NyaXB0PW1hdGNoWzNdO2lmKGlkSXNJbmRleClpZD1pZHwwOy8vIGNvbnZlcnQgdG8gaW50ZWdlcgoJaWYoc3Vic2NyaXB0PT09dW5kZWZpbmVkfHxzdWJzY3JpcHQ9PT0nWycmJm1hdGNoRW5kKzI9PT1wYXRoTGVuZ3RoKXsvLyBiYXJlIG5hbWUgb3IgInB1cmUiIGJvdHRvbS1sZXZlbCBhcnJheSAiWzBdIiBzdWZmaXgKCWFkZFVuaWZvcm0oY29udGFpbmVyLHN1YnNjcmlwdD09PXVuZGVmaW5lZD9uZXcgU2luZ2xlVW5pZm9ybShpZCxhY3RpdmVJbmZvLGFkZHIpOm5ldyBQdXJlQXJyYXlVbmlmb3JtKGlkLGFjdGl2ZUluZm8sYWRkcikpO2JyZWFrO31lbHNlIHsvLyBzdGVwIGludG8gaW5uZXIgbm9kZSAvIGNyZWF0ZSBpdCBpbiBjYXNlIGl0IGRvZXNuJ3QgZXhpc3QKCWNvbnN0IG1hcD1jb250YWluZXIubWFwO2xldCBuZXh0PW1hcFtpZF07aWYobmV4dD09PXVuZGVmaW5lZCl7bmV4dD1uZXcgU3RydWN0dXJlZFVuaWZvcm0oaWQpO2FkZFVuaWZvcm0oY29udGFpbmVyLG5leHQpO31jb250YWluZXI9bmV4dDt9fX0vLyBSb290IENvbnRhaW5lcgoJZnVuY3Rpb24gV2ViR0xVbmlmb3JtcyhnbCxwcm9ncmFtKXt0aGlzLnNlcT1bXTt0aGlzLm1hcD17fTtjb25zdCBuPWdsLmdldFByb2dyYW1QYXJhbWV0ZXIocHJvZ3JhbSwzNTcxOCk7Zm9yKGxldCBpPTA7aTxuOysraSl7Y29uc3QgaW5mbz1nbC5nZXRBY3RpdmVVbmlmb3JtKHByb2dyYW0saSksYWRkcj1nbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSxpbmZvLm5hbWUpO3BhcnNlVW5pZm9ybShpbmZvLGFkZHIsdGhpcyk7fX1XZWJHTFVuaWZvcm1zLnByb3RvdHlwZS5zZXRWYWx1ZT1mdW5jdGlvbihnbCxuYW1lLHZhbHVlLHRleHR1cmVzKXtjb25zdCB1PXRoaXMubWFwW25hbWVdO2lmKHUhPT11bmRlZmluZWQpdS5zZXRWYWx1ZShnbCx2YWx1ZSx0ZXh0dXJlcyk7fTtXZWJHTFVuaWZvcm1zLnByb3RvdHlwZS5zZXRPcHRpb25hbD1mdW5jdGlvbihnbCxvYmplY3QsbmFtZSl7Y29uc3Qgdj1vYmplY3RbbmFtZV07aWYodiE9PXVuZGVmaW5lZCl0aGlzLnNldFZhbHVlKGdsLG5hbWUsdik7fTsvLyBTdGF0aWMgaW50ZXJmYWNlCglXZWJHTFVuaWZvcm1zLnVwbG9hZD1mdW5jdGlvbihnbCxzZXEsdmFsdWVzLHRleHR1cmVzKXtmb3IobGV0IGk9MCxuPXNlcS5sZW5ndGg7aSE9PW47KytpKXtjb25zdCB1PXNlcVtpXSx2PXZhbHVlc1t1LmlkXTtpZih2Lm5lZWRzVXBkYXRlIT09ZmFsc2Upey8vIG5vdGU6IGFsd2F5cyB1cGRhdGluZyB3aGVuIC5uZWVkc1VwZGF0ZSBpcyB1bmRlZmluZWQKCXUuc2V0VmFsdWUoZ2wsdi52YWx1ZSx0ZXh0dXJlcyk7fX19O1dlYkdMVW5pZm9ybXMuc2VxV2l0aFZhbHVlPWZ1bmN0aW9uKHNlcSx2YWx1ZXMpe2NvbnN0IHI9W107Zm9yKGxldCBpPTAsbj1zZXEubGVuZ3RoO2khPT1uOysraSl7Y29uc3QgdT1zZXFbaV07aWYodS5pZCBpbiB2YWx1ZXMpci5wdXNoKHUpO31yZXR1cm4gcjt9O2Z1bmN0aW9uIFdlYkdMU2hhZGVyKGdsLHR5cGUsc3RyaW5nKXtjb25zdCBzaGFkZXI9Z2wuY3JlYXRlU2hhZGVyKHR5cGUpO2dsLnNoYWRlclNvdXJjZShzaGFkZXIsc3RyaW5nKTtnbC5jb21waWxlU2hhZGVyKHNoYWRlcik7cmV0dXJuIHNoYWRlcjt9bGV0IHByb2dyYW1JZENvdW50PTA7ZnVuY3Rpb24gYWRkTGluZU51bWJlcnMoc3RyaW5nKXtjb25zdCBsaW5lcz1zdHJpbmcuc3BsaXQoJ1xuJyk7Zm9yKGxldCBpPTA7aTxsaW5lcy5sZW5ndGg7aSsrKXtsaW5lc1tpXT1pKzErJzogJytsaW5lc1tpXTt9cmV0dXJuIGxpbmVzLmpvaW4oJ1xuJyk7fWZ1bmN0aW9uIGdldEVuY29kaW5nQ29tcG9uZW50cyhlbmNvZGluZyl7c3dpdGNoKGVuY29kaW5nKXtjYXNlIExpbmVhckVuY29kaW5nOnJldHVybiBbJ0xpbmVhcicsJyggdmFsdWUgKSddO2Nhc2Ugc1JHQkVuY29kaW5nOnJldHVybiBbJ3NSR0InLCcoIHZhbHVlICknXTtjYXNlIFJHQkVFbmNvZGluZzpyZXR1cm4gWydSR0JFJywnKCB2YWx1ZSApJ107Y2FzZSBSR0JNN0VuY29kaW5nOnJldHVybiBbJ1JHQk0nLCcoIHZhbHVlLCA3LjAgKSddO2Nhc2UgUkdCTTE2RW5jb2Rpbmc6cmV0dXJuIFsnUkdCTScsJyggdmFsdWUsIDE2LjAgKSddO2Nhc2UgUkdCREVuY29kaW5nOnJldHVybiBbJ1JHQkQnLCcoIHZhbHVlLCAyNTYuMCApJ107Y2FzZSBHYW1tYUVuY29kaW5nOnJldHVybiBbJ0dhbW1hJywnKCB2YWx1ZSwgZmxvYXQoIEdBTU1BX0ZBQ1RPUiApICknXTtkZWZhdWx0OmNvbnNvbGUud2FybignVEhSRUUuV2ViR0xQcm9ncmFtOiBVbnN1cHBvcnRlZCBlbmNvZGluZzonLGVuY29kaW5nKTtyZXR1cm4gWydMaW5lYXInLCcoIHZhbHVlICknXTt9fWZ1bmN0aW9uIGdldFNoYWRlckVycm9ycyhnbCxzaGFkZXIsdHlwZSl7Y29uc3Qgc3RhdHVzPWdsLmdldFNoYWRlclBhcmFtZXRlcihzaGFkZXIsMzU3MTMpO2NvbnN0IGVycm9ycz1nbC5nZXRTaGFkZXJJbmZvTG9nKHNoYWRlcikudHJpbSgpO2lmKHN0YXR1cyYmZXJyb3JzPT09JycpcmV0dXJuICcnOy8vIC0tZW5hYmxlLXByaXZpbGVnZWQtd2ViZ2wtZXh0ZW5zaW9uCgkvLyBjb25zb2xlLmxvZyggJyoqJyArIHR5cGUgKyAnKionLCBnbC5nZXRFeHRlbnNpb24oICdXRUJHTF9kZWJ1Z19zaGFkZXJzJyApLmdldFRyYW5zbGF0ZWRTaGFkZXJTb3VyY2UoIHNoYWRlciApICk7CglyZXR1cm4gdHlwZS50b1VwcGVyQ2FzZSgpKydcblxuJytlcnJvcnMrJ1xuXG4nK2FkZExpbmVOdW1iZXJzKGdsLmdldFNoYWRlclNvdXJjZShzaGFkZXIpKTt9ZnVuY3Rpb24gZ2V0VGV4ZWxEZWNvZGluZ0Z1bmN0aW9uKGZ1bmN0aW9uTmFtZSxlbmNvZGluZyl7Y29uc3QgY29tcG9uZW50cz1nZXRFbmNvZGluZ0NvbXBvbmVudHMoZW5jb2RpbmcpO3JldHVybiAndmVjNCAnK2Z1bmN0aW9uTmFtZSsnKCB2ZWM0IHZhbHVlICkgeyByZXR1cm4gJytjb21wb25lbnRzWzBdKydUb0xpbmVhcicrY29tcG9uZW50c1sxXSsnOyB9Jzt9ZnVuY3Rpb24gZ2V0VGV4ZWxFbmNvZGluZ0Z1bmN0aW9uKGZ1bmN0aW9uTmFtZSxlbmNvZGluZyl7Y29uc3QgY29tcG9uZW50cz1nZXRFbmNvZGluZ0NvbXBvbmVudHMoZW5jb2RpbmcpO3JldHVybiAndmVjNCAnK2Z1bmN0aW9uTmFtZSsnKCB2ZWM0IHZhbHVlICkgeyByZXR1cm4gTGluZWFyVG8nK2NvbXBvbmVudHNbMF0rY29tcG9uZW50c1sxXSsnOyB9Jzt9ZnVuY3Rpb24gZ2V0VG9uZU1hcHBpbmdGdW5jdGlvbihmdW5jdGlvbk5hbWUsdG9uZU1hcHBpbmcpe2xldCB0b25lTWFwcGluZ05hbWU7c3dpdGNoKHRvbmVNYXBwaW5nKXtjYXNlIExpbmVhclRvbmVNYXBwaW5nOnRvbmVNYXBwaW5nTmFtZT0nTGluZWFyJzticmVhaztjYXNlIFJlaW5oYXJkVG9uZU1hcHBpbmc6dG9uZU1hcHBpbmdOYW1lPSdSZWluaGFyZCc7YnJlYWs7Y2FzZSBDaW5lb25Ub25lTWFwcGluZzp0b25lTWFwcGluZ05hbWU9J09wdGltaXplZENpbmVvbic7YnJlYWs7Y2FzZSBBQ0VTRmlsbWljVG9uZU1hcHBpbmc6dG9uZU1hcHBpbmdOYW1lPSdBQ0VTRmlsbWljJzticmVhaztjYXNlIEN1c3RvbVRvbmVNYXBwaW5nOnRvbmVNYXBwaW5nTmFtZT0nQ3VzdG9tJzticmVhaztkZWZhdWx0OmNvbnNvbGUud2FybignVEhSRUUuV2ViR0xQcm9ncmFtOiBVbnN1cHBvcnRlZCB0b25lTWFwcGluZzonLHRvbmVNYXBwaW5nKTt0b25lTWFwcGluZ05hbWU9J0xpbmVhcic7fXJldHVybiAndmVjMyAnK2Z1bmN0aW9uTmFtZSsnKCB2ZWMzIGNvbG9yICkgeyByZXR1cm4gJyt0b25lTWFwcGluZ05hbWUrJ1RvbmVNYXBwaW5nKCBjb2xvciApOyB9Jzt9ZnVuY3Rpb24gZ2VuZXJhdGVFeHRlbnNpb25zKHBhcmFtZXRlcnMpe2NvbnN0IGNodW5rcz1bcGFyYW1ldGVycy5leHRlbnNpb25EZXJpdmF0aXZlc3x8cGFyYW1ldGVycy5lbnZNYXBDdWJlVVZ8fHBhcmFtZXRlcnMuYnVtcE1hcHx8cGFyYW1ldGVycy50YW5nZW50U3BhY2VOb3JtYWxNYXB8fHBhcmFtZXRlcnMuY2xlYXJjb2F0Tm9ybWFsTWFwfHxwYXJhbWV0ZXJzLmZsYXRTaGFkaW5nfHxwYXJhbWV0ZXJzLnNoYWRlcklEPT09J3BoeXNpY2FsJz8nI2V4dGVuc2lvbiBHTF9PRVNfc3RhbmRhcmRfZGVyaXZhdGl2ZXMgOiBlbmFibGUnOicnLChwYXJhbWV0ZXJzLmV4dGVuc2lvbkZyYWdEZXB0aHx8cGFyYW1ldGVycy5sb2dhcml0aG1pY0RlcHRoQnVmZmVyKSYmcGFyYW1ldGVycy5yZW5kZXJlckV4dGVuc2lvbkZyYWdEZXB0aD8nI2V4dGVuc2lvbiBHTF9FWFRfZnJhZ19kZXB0aCA6IGVuYWJsZSc6JycscGFyYW1ldGVycy5leHRlbnNpb25EcmF3QnVmZmVycyYmcGFyYW1ldGVycy5yZW5kZXJlckV4dGVuc2lvbkRyYXdCdWZmZXJzPycjZXh0ZW5zaW9uIEdMX0VYVF9kcmF3X2J1ZmZlcnMgOiByZXF1aXJlJzonJywocGFyYW1ldGVycy5leHRlbnNpb25TaGFkZXJUZXh0dXJlTE9EfHxwYXJhbWV0ZXJzLmVudk1hcHx8cGFyYW1ldGVycy50cmFuc21pc3Npb24pJiZwYXJhbWV0ZXJzLnJlbmRlcmVyRXh0ZW5zaW9uU2hhZGVyVGV4dHVyZUxvZD8nI2V4dGVuc2lvbiBHTF9FWFRfc2hhZGVyX3RleHR1cmVfbG9kIDogZW5hYmxlJzonJ107cmV0dXJuIGNodW5rcy5maWx0ZXIoZmlsdGVyRW1wdHlMaW5lKS5qb2luKCdcbicpO31mdW5jdGlvbiBnZW5lcmF0ZURlZmluZXMoZGVmaW5lcyl7Y29uc3QgY2h1bmtzPVtdO2Zvcihjb25zdCBuYW1lIGluIGRlZmluZXMpe2NvbnN0IHZhbHVlPWRlZmluZXNbbmFtZV07aWYodmFsdWU9PT1mYWxzZSljb250aW51ZTtjaHVua3MucHVzaCgnI2RlZmluZSAnK25hbWUrJyAnK3ZhbHVlKTt9cmV0dXJuIGNodW5rcy5qb2luKCdcbicpO31mdW5jdGlvbiBmZXRjaEF0dHJpYnV0ZUxvY2F0aW9ucyhnbCxwcm9ncmFtKXtjb25zdCBhdHRyaWJ1dGVzPXt9O2NvbnN0IG49Z2wuZ2V0UHJvZ3JhbVBhcmFtZXRlcihwcm9ncmFtLDM1NzIxKTtmb3IobGV0IGk9MDtpPG47aSsrKXtjb25zdCBpbmZvPWdsLmdldEFjdGl2ZUF0dHJpYihwcm9ncmFtLGkpO2NvbnN0IG5hbWU9aW5mby5uYW1lO2xldCBsb2NhdGlvblNpemU9MTtpZihpbmZvLnR5cGU9PT0zNTY3NClsb2NhdGlvblNpemU9MjtpZihpbmZvLnR5cGU9PT0zNTY3NSlsb2NhdGlvblNpemU9MztpZihpbmZvLnR5cGU9PT0zNTY3Nilsb2NhdGlvblNpemU9NDsvLyBjb25zb2xlLmxvZyggJ1RIUkVFLldlYkdMUHJvZ3JhbTogQUNUSVZFIFZFUlRFWCBBVFRSSUJVVEU6JywgbmFtZSwgaSApOwoJYXR0cmlidXRlc1tuYW1lXT17dHlwZTppbmZvLnR5cGUsbG9jYXRpb246Z2wuZ2V0QXR0cmliTG9jYXRpb24ocHJvZ3JhbSxuYW1lKSxsb2NhdGlvblNpemU6bG9jYXRpb25TaXplfTt9cmV0dXJuIGF0dHJpYnV0ZXM7fWZ1bmN0aW9uIGZpbHRlckVtcHR5TGluZShzdHJpbmcpe3JldHVybiBzdHJpbmchPT0nJzt9ZnVuY3Rpb24gcmVwbGFjZUxpZ2h0TnVtcyhzdHJpbmcscGFyYW1ldGVycyl7cmV0dXJuIHN0cmluZy5yZXBsYWNlKC9OVU1fRElSX0xJR0hUUy9nLHBhcmFtZXRlcnMubnVtRGlyTGlnaHRzKS5yZXBsYWNlKC9OVU1fU1BPVF9MSUdIVFMvZyxwYXJhbWV0ZXJzLm51bVNwb3RMaWdodHMpLnJlcGxhY2UoL05VTV9SRUNUX0FSRUFfTElHSFRTL2cscGFyYW1ldGVycy5udW1SZWN0QXJlYUxpZ2h0cykucmVwbGFjZSgvTlVNX1BPSU5UX0xJR0hUUy9nLHBhcmFtZXRlcnMubnVtUG9pbnRMaWdodHMpLnJlcGxhY2UoL05VTV9IRU1JX0xJR0hUUy9nLHBhcmFtZXRlcnMubnVtSGVtaUxpZ2h0cykucmVwbGFjZSgvTlVNX0RJUl9MSUdIVF9TSEFET1dTL2cscGFyYW1ldGVycy5udW1EaXJMaWdodFNoYWRvd3MpLnJlcGxhY2UoL05VTV9TUE9UX0xJR0hUX1NIQURPV1MvZyxwYXJhbWV0ZXJzLm51bVNwb3RMaWdodFNoYWRvd3MpLnJlcGxhY2UoL05VTV9QT0lOVF9MSUdIVF9TSEFET1dTL2cscGFyYW1ldGVycy5udW1Qb2ludExpZ2h0U2hhZG93cyk7fWZ1bmN0aW9uIHJlcGxhY2VDbGlwcGluZ1BsYW5lTnVtcyhzdHJpbmcscGFyYW1ldGVycyl7cmV0dXJuIHN0cmluZy5yZXBsYWNlKC9OVU1fQ0xJUFBJTkdfUExBTkVTL2cscGFyYW1ldGVycy5udW1DbGlwcGluZ1BsYW5lcykucmVwbGFjZSgvVU5JT05fQ0xJUFBJTkdfUExBTkVTL2cscGFyYW1ldGVycy5udW1DbGlwcGluZ1BsYW5lcy1wYXJhbWV0ZXJzLm51bUNsaXBJbnRlcnNlY3Rpb24pO30vLyBSZXNvbHZlIEluY2x1ZGVzCgljb25zdCBpbmNsdWRlUGF0dGVybj0vXlsgXHRdKiNpbmNsdWRlICs8KFtcd1xkLi9dKyk+L2dtO2Z1bmN0aW9uIHJlc29sdmVJbmNsdWRlcyhzdHJpbmcpe3JldHVybiBzdHJpbmcucmVwbGFjZShpbmNsdWRlUGF0dGVybixpbmNsdWRlUmVwbGFjZXIpO31mdW5jdGlvbiBpbmNsdWRlUmVwbGFjZXIobWF0Y2gsaW5jbHVkZSl7Y29uc3Qgc3RyaW5nPVNoYWRlckNodW5rW2luY2x1ZGVdO2lmKHN0cmluZz09PXVuZGVmaW5lZCl7dGhyb3cgbmV3IEVycm9yKCdDYW4gbm90IHJlc29sdmUgI2luY2x1ZGUgPCcraW5jbHVkZSsnPicpO31yZXR1cm4gcmVzb2x2ZUluY2x1ZGVzKHN0cmluZyk7fS8vIFVucm9sbCBMb29wcwoJY29uc3QgZGVwcmVjYXRlZFVucm9sbExvb3BQYXR0ZXJuPS8jcHJhZ21hIHVucm9sbF9sb29wW1xzXSs/Zm9yIFwoIGludCBpIFw9IChcZCspXDsgaSA8IChcZCspXDsgaSBcK1wrIFwpIFx7KFtcc1xTXSs/KSg/PVx9KVx9L2c7Y29uc3QgdW5yb2xsTG9vcFBhdHRlcm49LyNwcmFnbWEgdW5yb2xsX2xvb3Bfc3RhcnRccytmb3JccypcKFxzKmludFxzK2lccyo9XHMqKFxkKylccyo7XHMqaVxzKjxccyooXGQrKVxzKjtccyppXHMqXCtcK1xzKlwpXHMqeyhbXHNcU10rPyl9XHMrI3ByYWdtYSB1bnJvbGxfbG9vcF9lbmQvZztmdW5jdGlvbiB1bnJvbGxMb29wcyhzdHJpbmcpe3JldHVybiBzdHJpbmcucmVwbGFjZSh1bnJvbGxMb29wUGF0dGVybixsb29wUmVwbGFjZXIpLnJlcGxhY2UoZGVwcmVjYXRlZFVucm9sbExvb3BQYXR0ZXJuLGRlcHJlY2F0ZWRMb29wUmVwbGFjZXIpO31mdW5jdGlvbiBkZXByZWNhdGVkTG9vcFJlcGxhY2VyKG1hdGNoLHN0YXJ0LGVuZCxzbmlwcGV0KXtjb25zb2xlLndhcm4oJ1dlYkdMUHJvZ3JhbTogI3ByYWdtYSB1bnJvbGxfbG9vcCBzaGFkZXIgc3ludGF4IGlzIGRlcHJlY2F0ZWQuIFBsZWFzZSB1c2UgI3ByYWdtYSB1bnJvbGxfbG9vcF9zdGFydCBzeW50YXggaW5zdGVhZC4nKTtyZXR1cm4gbG9vcFJlcGxhY2VyKG1hdGNoLHN0YXJ0LGVuZCxzbmlwcGV0KTt9ZnVuY3Rpb24gbG9vcFJlcGxhY2VyKG1hdGNoLHN0YXJ0LGVuZCxzbmlwcGV0KXtsZXQgc3RyaW5nPScnO2ZvcihsZXQgaT1wYXJzZUludChzdGFydCk7aTxwYXJzZUludChlbmQpO2krKyl7c3RyaW5nKz1zbmlwcGV0LnJlcGxhY2UoL1xbXHMqaVxzKlxdL2csJ1sgJytpKycgXScpLnJlcGxhY2UoL1VOUk9MTEVEX0xPT1BfSU5ERVgvZyxpKTt9cmV0dXJuIHN0cmluZzt9Ly8KCWZ1bmN0aW9uIGdlbmVyYXRlUHJlY2lzaW9uKHBhcmFtZXRlcnMpe2xldCBwcmVjaXNpb25zdHJpbmc9J3ByZWNpc2lvbiAnK3BhcmFtZXRlcnMucHJlY2lzaW9uKycgZmxvYXQ7XG5wcmVjaXNpb24gJytwYXJhbWV0ZXJzLnByZWNpc2lvbisnIGludDsnO2lmKHBhcmFtZXRlcnMucHJlY2lzaW9uPT09J2hpZ2hwJyl7cHJlY2lzaW9uc3RyaW5nKz0nXG4jZGVmaW5lIEhJR0hfUFJFQ0lTSU9OJzt9ZWxzZSBpZihwYXJhbWV0ZXJzLnByZWNpc2lvbj09PSdtZWRpdW1wJyl7cHJlY2lzaW9uc3RyaW5nKz0nXG4jZGVmaW5lIE1FRElVTV9QUkVDSVNJT04nO31lbHNlIGlmKHBhcmFtZXRlcnMucHJlY2lzaW9uPT09J2xvd3AnKXtwcmVjaXNpb25zdHJpbmcrPSdcbiNkZWZpbmUgTE9XX1BSRUNJU0lPTic7fXJldHVybiBwcmVjaXNpb25zdHJpbmc7fWZ1bmN0aW9uIGdlbmVyYXRlU2hhZG93TWFwVHlwZURlZmluZShwYXJhbWV0ZXJzKXtsZXQgc2hhZG93TWFwVHlwZURlZmluZT0nU0hBRE9XTUFQX1RZUEVfQkFTSUMnO2lmKHBhcmFtZXRlcnMuc2hhZG93TWFwVHlwZT09PVBDRlNoYWRvd01hcCl7c2hhZG93TWFwVHlwZURlZmluZT0nU0hBRE9XTUFQX1RZUEVfUENGJzt9ZWxzZSBpZihwYXJhbWV0ZXJzLnNoYWRvd01hcFR5cGU9PT1QQ0ZTb2Z0U2hhZG93TWFwKXtzaGFkb3dNYXBUeXBlRGVmaW5lPSdTSEFET1dNQVBfVFlQRV9QQ0ZfU09GVCc7fWVsc2UgaWYocGFyYW1ldGVycy5zaGFkb3dNYXBUeXBlPT09VlNNU2hhZG93TWFwKXtzaGFkb3dNYXBUeXBlRGVmaW5lPSdTSEFET1dNQVBfVFlQRV9WU00nO31yZXR1cm4gc2hhZG93TWFwVHlwZURlZmluZTt9ZnVuY3Rpb24gZ2VuZXJhdGVFbnZNYXBUeXBlRGVmaW5lKHBhcmFtZXRlcnMpe2xldCBlbnZNYXBUeXBlRGVmaW5lPSdFTlZNQVBfVFlQRV9DVUJFJztpZihwYXJhbWV0ZXJzLmVudk1hcCl7c3dpdGNoKHBhcmFtZXRlcnMuZW52TWFwTW9kZSl7Y2FzZSBDdWJlUmVmbGVjdGlvbk1hcHBpbmc6Y2FzZSBDdWJlUmVmcmFjdGlvbk1hcHBpbmc6ZW52TWFwVHlwZURlZmluZT0nRU5WTUFQX1RZUEVfQ1VCRSc7YnJlYWs7Y2FzZSBDdWJlVVZSZWZsZWN0aW9uTWFwcGluZzpjYXNlIEN1YmVVVlJlZnJhY3Rpb25NYXBwaW5nOmVudk1hcFR5cGVEZWZpbmU9J0VOVk1BUF9UWVBFX0NVQkVfVVYnO2JyZWFrO319cmV0dXJuIGVudk1hcFR5cGVEZWZpbmU7fWZ1bmN0aW9uIGdlbmVyYXRlRW52TWFwTW9kZURlZmluZShwYXJhbWV0ZXJzKXtsZXQgZW52TWFwTW9kZURlZmluZT0nRU5WTUFQX01PREVfUkVGTEVDVElPTic7aWYocGFyYW1ldGVycy5lbnZNYXApe3N3aXRjaChwYXJhbWV0ZXJzLmVudk1hcE1vZGUpe2Nhc2UgQ3ViZVJlZnJhY3Rpb25NYXBwaW5nOmNhc2UgQ3ViZVVWUmVmcmFjdGlvbk1hcHBpbmc6ZW52TWFwTW9kZURlZmluZT0nRU5WTUFQX01PREVfUkVGUkFDVElPTic7YnJlYWs7fX1yZXR1cm4gZW52TWFwTW9kZURlZmluZTt9ZnVuY3Rpb24gZ2VuZXJhdGVFbnZNYXBCbGVuZGluZ0RlZmluZShwYXJhbWV0ZXJzKXtsZXQgZW52TWFwQmxlbmRpbmdEZWZpbmU9J0VOVk1BUF9CTEVORElOR19OT05FJztpZihwYXJhbWV0ZXJzLmVudk1hcCl7c3dpdGNoKHBhcmFtZXRlcnMuY29tYmluZSl7Y2FzZSBNdWx0aXBseU9wZXJhdGlvbjplbnZNYXBCbGVuZGluZ0RlZmluZT0nRU5WTUFQX0JMRU5ESU5HX01VTFRJUExZJzticmVhaztjYXNlIE1peE9wZXJhdGlvbjplbnZNYXBCbGVuZGluZ0RlZmluZT0nRU5WTUFQX0JMRU5ESU5HX01JWCc7YnJlYWs7Y2FzZSBBZGRPcGVyYXRpb246ZW52TWFwQmxlbmRpbmdEZWZpbmU9J0VOVk1BUF9CTEVORElOR19BREQnO2JyZWFrO319cmV0dXJuIGVudk1hcEJsZW5kaW5nRGVmaW5lO31mdW5jdGlvbiBXZWJHTFByb2dyYW0ocmVuZGVyZXIsY2FjaGVLZXkscGFyYW1ldGVycyxiaW5kaW5nU3RhdGVzKXsvLyBUT0RPIFNlbmQgdGhpcyBldmVudCB0byBUaHJlZS5qcyBEZXZUb29scwoJLy8gY29uc29sZS5sb2coICdXZWJHTFByb2dyYW0nLCBjYWNoZUtleSApOwoJY29uc3QgZ2w9cmVuZGVyZXIuZ2V0Q29udGV4dCgpO2NvbnN0IGRlZmluZXM9cGFyYW1ldGVycy5kZWZpbmVzO2xldCB2ZXJ0ZXhTaGFkZXI9cGFyYW1ldGVycy52ZXJ0ZXhTaGFkZXI7bGV0IGZyYWdtZW50U2hhZGVyPXBhcmFtZXRlcnMuZnJhZ21lbnRTaGFkZXI7Y29uc3Qgc2hhZG93TWFwVHlwZURlZmluZT1nZW5lcmF0ZVNoYWRvd01hcFR5cGVEZWZpbmUocGFyYW1ldGVycyk7Y29uc3QgZW52TWFwVHlwZURlZmluZT1nZW5lcmF0ZUVudk1hcFR5cGVEZWZpbmUocGFyYW1ldGVycyk7Y29uc3QgZW52TWFwTW9kZURlZmluZT1nZW5lcmF0ZUVudk1hcE1vZGVEZWZpbmUocGFyYW1ldGVycyk7Y29uc3QgZW52TWFwQmxlbmRpbmdEZWZpbmU9Z2VuZXJhdGVFbnZNYXBCbGVuZGluZ0RlZmluZShwYXJhbWV0ZXJzKTtjb25zdCBnYW1tYUZhY3RvckRlZmluZT1yZW5kZXJlci5nYW1tYUZhY3Rvcj4wP3JlbmRlcmVyLmdhbW1hRmFjdG9yOjEuMDtjb25zdCBjdXN0b21FeHRlbnNpb25zPXBhcmFtZXRlcnMuaXNXZWJHTDI/Jyc6Z2VuZXJhdGVFeHRlbnNpb25zKHBhcmFtZXRlcnMpO2NvbnN0IGN1c3RvbURlZmluZXM9Z2VuZXJhdGVEZWZpbmVzKGRlZmluZXMpO2NvbnN0IHByb2dyYW09Z2wuY3JlYXRlUHJvZ3JhbSgpO2xldCBwcmVmaXhWZXJ0ZXgscHJlZml4RnJhZ21lbnQ7bGV0IHZlcnNpb25TdHJpbmc9cGFyYW1ldGVycy5nbHNsVmVyc2lvbj8nI3ZlcnNpb24gJytwYXJhbWV0ZXJzLmdsc2xWZXJzaW9uKydcbic6Jyc7aWYocGFyYW1ldGVycy5pc1Jhd1NoYWRlck1hdGVyaWFsKXtwcmVmaXhWZXJ0ZXg9W2N1c3RvbURlZmluZXNdLmZpbHRlcihmaWx0ZXJFbXB0eUxpbmUpLmpvaW4oJ1xuJyk7aWYocHJlZml4VmVydGV4Lmxlbmd0aD4wKXtwcmVmaXhWZXJ0ZXgrPSdcbic7fXByZWZpeEZyYWdtZW50PVtjdXN0b21FeHRlbnNpb25zLGN1c3RvbURlZmluZXNdLmZpbHRlcihmaWx0ZXJFbXB0eUxpbmUpLmpvaW4oJ1xuJyk7aWYocHJlZml4RnJhZ21lbnQubGVuZ3RoPjApe3ByZWZpeEZyYWdtZW50Kz0nXG4nO319ZWxzZSB7cHJlZml4VmVydGV4PVtnZW5lcmF0ZVByZWNpc2lvbihwYXJhbWV0ZXJzKSwnI2RlZmluZSBTSEFERVJfTkFNRSAnK3BhcmFtZXRlcnMuc2hhZGVyTmFtZSxjdXN0b21EZWZpbmVzLHBhcmFtZXRlcnMuaW5zdGFuY2luZz8nI2RlZmluZSBVU0VfSU5TVEFOQ0lORyc6JycscGFyYW1ldGVycy5pbnN0YW5jaW5nQ29sb3I/JyNkZWZpbmUgVVNFX0lOU1RBTkNJTkdfQ09MT1InOicnLHBhcmFtZXRlcnMuc3VwcG9ydHNWZXJ0ZXhUZXh0dXJlcz8nI2RlZmluZSBWRVJURVhfVEVYVFVSRVMnOicnLCcjZGVmaW5lIEdBTU1BX0ZBQ1RPUiAnK2dhbW1hRmFjdG9yRGVmaW5lLCcjZGVmaW5lIE1BWF9CT05FUyAnK3BhcmFtZXRlcnMubWF4Qm9uZXMscGFyYW1ldGVycy51c2VGb2cmJnBhcmFtZXRlcnMuZm9nPycjZGVmaW5lIFVTRV9GT0cnOicnLHBhcmFtZXRlcnMudXNlRm9nJiZwYXJhbWV0ZXJzLmZvZ0V4cDI/JyNkZWZpbmUgRk9HX0VYUDInOicnLHBhcmFtZXRlcnMubWFwPycjZGVmaW5lIFVTRV9NQVAnOicnLHBhcmFtZXRlcnMuZW52TWFwPycjZGVmaW5lIFVTRV9FTlZNQVAnOicnLHBhcmFtZXRlcnMuZW52TWFwPycjZGVmaW5lICcrZW52TWFwTW9kZURlZmluZTonJyxwYXJhbWV0ZXJzLmxpZ2h0TWFwPycjZGVmaW5lIFVTRV9MSUdIVE1BUCc6JycscGFyYW1ldGVycy5hb01hcD8nI2RlZmluZSBVU0VfQU9NQVAnOicnLHBhcmFtZXRlcnMuZW1pc3NpdmVNYXA/JyNkZWZpbmUgVVNFX0VNSVNTSVZFTUFQJzonJyxwYXJhbWV0ZXJzLmJ1bXBNYXA/JyNkZWZpbmUgVVNFX0JVTVBNQVAnOicnLHBhcmFtZXRlcnMubm9ybWFsTWFwPycjZGVmaW5lIFVTRV9OT1JNQUxNQVAnOicnLHBhcmFtZXRlcnMubm9ybWFsTWFwJiZwYXJhbWV0ZXJzLm9iamVjdFNwYWNlTm9ybWFsTWFwPycjZGVmaW5lIE9CSkVDVFNQQUNFX05PUk1BTE1BUCc6JycscGFyYW1ldGVycy5ub3JtYWxNYXAmJnBhcmFtZXRlcnMudGFuZ2VudFNwYWNlTm9ybWFsTWFwPycjZGVmaW5lIFRBTkdFTlRTUEFDRV9OT1JNQUxNQVAnOicnLHBhcmFtZXRlcnMuY2xlYXJjb2F0TWFwPycjZGVmaW5lIFVTRV9DTEVBUkNPQVRNQVAnOicnLHBhcmFtZXRlcnMuY2xlYXJjb2F0Um91Z2huZXNzTWFwPycjZGVmaW5lIFVTRV9DTEVBUkNPQVRfUk9VR0hORVNTTUFQJzonJyxwYXJhbWV0ZXJzLmNsZWFyY29hdE5vcm1hbE1hcD8nI2RlZmluZSBVU0VfQ0xFQVJDT0FUX05PUk1BTE1BUCc6JycscGFyYW1ldGVycy5kaXNwbGFjZW1lbnRNYXAmJnBhcmFtZXRlcnMuc3VwcG9ydHNWZXJ0ZXhUZXh0dXJlcz8nI2RlZmluZSBVU0VfRElTUExBQ0VNRU5UTUFQJzonJyxwYXJhbWV0ZXJzLnNwZWN1bGFyTWFwPycjZGVmaW5lIFVTRV9TUEVDVUxBUk1BUCc6JycscGFyYW1ldGVycy5zcGVjdWxhckludGVuc2l0eU1hcD8nI2RlZmluZSBVU0VfU1BFQ1VMQVJJTlRFTlNJVFlNQVAnOicnLHBhcmFtZXRlcnMuc3BlY3VsYXJDb2xvck1hcD8nI2RlZmluZSBVU0VfU1BFQ1VMQVJDT0xPUk1BUCc6JycscGFyYW1ldGVycy5yb3VnaG5lc3NNYXA/JyNkZWZpbmUgVVNFX1JPVUdITkVTU01BUCc6JycscGFyYW1ldGVycy5tZXRhbG5lc3NNYXA/JyNkZWZpbmUgVVNFX01FVEFMTkVTU01BUCc6JycscGFyYW1ldGVycy5hbHBoYU1hcD8nI2RlZmluZSBVU0VfQUxQSEFNQVAnOicnLHBhcmFtZXRlcnMudHJhbnNtaXNzaW9uPycjZGVmaW5lIFVTRV9UUkFOU01JU1NJT04nOicnLHBhcmFtZXRlcnMudHJhbnNtaXNzaW9uTWFwPycjZGVmaW5lIFVTRV9UUkFOU01JU1NJT05NQVAnOicnLHBhcmFtZXRlcnMudGhpY2tuZXNzTWFwPycjZGVmaW5lIFVTRV9USElDS05FU1NNQVAnOicnLHBhcmFtZXRlcnMuc2hlZW5Db2xvck1hcD8nI2RlZmluZSBVU0VfU0hFRU5DT0xPUk1BUCc6JycscGFyYW1ldGVycy5zaGVlblJvdWdobmVzc01hcD8nI2RlZmluZSBVU0VfU0hFRU5ST1VHSE5FU1NNQVAnOicnLHBhcmFtZXRlcnMudmVydGV4VGFuZ2VudHM/JyNkZWZpbmUgVVNFX1RBTkdFTlQnOicnLHBhcmFtZXRlcnMudmVydGV4Q29sb3JzPycjZGVmaW5lIFVTRV9DT0xPUic6JycscGFyYW1ldGVycy52ZXJ0ZXhBbHBoYXM/JyNkZWZpbmUgVVNFX0NPTE9SX0FMUEhBJzonJyxwYXJhbWV0ZXJzLnZlcnRleFV2cz8nI2RlZmluZSBVU0VfVVYnOicnLHBhcmFtZXRlcnMudXZzVmVydGV4T25seT8nI2RlZmluZSBVVlNfVkVSVEVYX09OTFknOicnLHBhcmFtZXRlcnMuZmxhdFNoYWRpbmc/JyNkZWZpbmUgRkxBVF9TSEFERUQnOicnLHBhcmFtZXRlcnMuc2tpbm5pbmc/JyNkZWZpbmUgVVNFX1NLSU5OSU5HJzonJyxwYXJhbWV0ZXJzLnVzZVZlcnRleFRleHR1cmU/JyNkZWZpbmUgQk9ORV9URVhUVVJFJzonJyxwYXJhbWV0ZXJzLm1vcnBoVGFyZ2V0cz8nI2RlZmluZSBVU0VfTU9SUEhUQVJHRVRTJzonJyxwYXJhbWV0ZXJzLm1vcnBoTm9ybWFscyYmcGFyYW1ldGVycy5mbGF0U2hhZGluZz09PWZhbHNlPycjZGVmaW5lIFVTRV9NT1JQSE5PUk1BTFMnOicnLHBhcmFtZXRlcnMubW9ycGhUYXJnZXRzJiZwYXJhbWV0ZXJzLmlzV2ViR0wyPycjZGVmaW5lIE1PUlBIVEFSR0VUU19URVhUVVJFJzonJyxwYXJhbWV0ZXJzLm1vcnBoVGFyZ2V0cyYmcGFyYW1ldGVycy5pc1dlYkdMMj8nI2RlZmluZSBNT1JQSFRBUkdFVFNfQ09VTlQgJytwYXJhbWV0ZXJzLm1vcnBoVGFyZ2V0c0NvdW50OicnLHBhcmFtZXRlcnMuZG91YmxlU2lkZWQ/JyNkZWZpbmUgRE9VQkxFX1NJREVEJzonJyxwYXJhbWV0ZXJzLmZsaXBTaWRlZD8nI2RlZmluZSBGTElQX1NJREVEJzonJyxwYXJhbWV0ZXJzLnNoYWRvd01hcEVuYWJsZWQ/JyNkZWZpbmUgVVNFX1NIQURPV01BUCc6JycscGFyYW1ldGVycy5zaGFkb3dNYXBFbmFibGVkPycjZGVmaW5lICcrc2hhZG93TWFwVHlwZURlZmluZTonJyxwYXJhbWV0ZXJzLnNpemVBdHRlbnVhdGlvbj8nI2RlZmluZSBVU0VfU0laRUFUVEVOVUFUSU9OJzonJyxwYXJhbWV0ZXJzLmxvZ2FyaXRobWljRGVwdGhCdWZmZXI/JyNkZWZpbmUgVVNFX0xPR0RFUFRIQlVGJzonJyxwYXJhbWV0ZXJzLmxvZ2FyaXRobWljRGVwdGhCdWZmZXImJnBhcmFtZXRlcnMucmVuZGVyZXJFeHRlbnNpb25GcmFnRGVwdGg/JyNkZWZpbmUgVVNFX0xPR0RFUFRIQlVGX0VYVCc6JycsJ3VuaWZvcm0gbWF0NCBtb2RlbE1hdHJpeDsnLCd1bmlmb3JtIG1hdDQgbW9kZWxWaWV3TWF0cml4OycsJ3VuaWZvcm0gbWF0NCBwcm9qZWN0aW9uTWF0cml4OycsJ3VuaWZvcm0gbWF0NCB2aWV3TWF0cml4OycsJ3VuaWZvcm0gbWF0MyBub3JtYWxNYXRyaXg7JywndW5pZm9ybSB2ZWMzIGNhbWVyYVBvc2l0aW9uOycsJ3VuaWZvcm0gYm9vbCBpc09ydGhvZ3JhcGhpYzsnLCcjaWZkZWYgVVNFX0lOU1RBTkNJTkcnLCcJYXR0cmlidXRlIG1hdDQgaW5zdGFuY2VNYXRyaXg7JywnI2VuZGlmJywnI2lmZGVmIFVTRV9JTlNUQU5DSU5HX0NPTE9SJywnCWF0dHJpYnV0ZSB2ZWMzIGluc3RhbmNlQ29sb3I7JywnI2VuZGlmJywnYXR0cmlidXRlIHZlYzMgcG9zaXRpb247JywnYXR0cmlidXRlIHZlYzMgbm9ybWFsOycsJ2F0dHJpYnV0ZSB2ZWMyIHV2OycsJyNpZmRlZiBVU0VfVEFOR0VOVCcsJwlhdHRyaWJ1dGUgdmVjNCB0YW5nZW50OycsJyNlbmRpZicsJyNpZiBkZWZpbmVkKCBVU0VfQ09MT1JfQUxQSEEgKScsJwlhdHRyaWJ1dGUgdmVjNCBjb2xvcjsnLCcjZWxpZiBkZWZpbmVkKCBVU0VfQ09MT1IgKScsJwlhdHRyaWJ1dGUgdmVjMyBjb2xvcjsnLCcjZW5kaWYnLCcjaWYgKCBkZWZpbmVkKCBVU0VfTU9SUEhUQVJHRVRTICkgJiYgISBkZWZpbmVkKCBNT1JQSFRBUkdFVFNfVEVYVFVSRSApICknLCcJYXR0cmlidXRlIHZlYzMgbW9ycGhUYXJnZXQwOycsJwlhdHRyaWJ1dGUgdmVjMyBtb3JwaFRhcmdldDE7JywnCWF0dHJpYnV0ZSB2ZWMzIG1vcnBoVGFyZ2V0MjsnLCcJYXR0cmlidXRlIHZlYzMgbW9ycGhUYXJnZXQzOycsJwkjaWZkZWYgVVNFX01PUlBITk9STUFMUycsJwkJYXR0cmlidXRlIHZlYzMgbW9ycGhOb3JtYWwwOycsJwkJYXR0cmlidXRlIHZlYzMgbW9ycGhOb3JtYWwxOycsJwkJYXR0cmlidXRlIHZlYzMgbW9ycGhOb3JtYWwyOycsJwkJYXR0cmlidXRlIHZlYzMgbW9ycGhOb3JtYWwzOycsJwkjZWxzZScsJwkJYXR0cmlidXRlIHZlYzMgbW9ycGhUYXJnZXQ0OycsJwkJYXR0cmlidXRlIHZlYzMgbW9ycGhUYXJnZXQ1OycsJwkJYXR0cmlidXRlIHZlYzMgbW9ycGhUYXJnZXQ2OycsJwkJYXR0cmlidXRlIHZlYzMgbW9ycGhUYXJnZXQ3OycsJwkjZW5kaWYnLCcjZW5kaWYnLCcjaWZkZWYgVVNFX1NLSU5OSU5HJywnCWF0dHJpYnV0ZSB2ZWM0IHNraW5JbmRleDsnLCcJYXR0cmlidXRlIHZlYzQgc2tpbldlaWdodDsnLCcjZW5kaWYnLCdcbiddLmZpbHRlcihmaWx0ZXJFbXB0eUxpbmUpLmpvaW4oJ1xuJyk7cHJlZml4RnJhZ21lbnQ9W2N1c3RvbUV4dGVuc2lvbnMsZ2VuZXJhdGVQcmVjaXNpb24ocGFyYW1ldGVycyksJyNkZWZpbmUgU0hBREVSX05BTUUgJytwYXJhbWV0ZXJzLnNoYWRlck5hbWUsY3VzdG9tRGVmaW5lcywnI2RlZmluZSBHQU1NQV9GQUNUT1IgJytnYW1tYUZhY3RvckRlZmluZSxwYXJhbWV0ZXJzLnVzZUZvZyYmcGFyYW1ldGVycy5mb2c/JyNkZWZpbmUgVVNFX0ZPRyc6JycscGFyYW1ldGVycy51c2VGb2cmJnBhcmFtZXRlcnMuZm9nRXhwMj8nI2RlZmluZSBGT0dfRVhQMic6JycscGFyYW1ldGVycy5tYXA/JyNkZWZpbmUgVVNFX01BUCc6JycscGFyYW1ldGVycy5tYXRjYXA/JyNkZWZpbmUgVVNFX01BVENBUCc6JycscGFyYW1ldGVycy5lbnZNYXA/JyNkZWZpbmUgVVNFX0VOVk1BUCc6JycscGFyYW1ldGVycy5lbnZNYXA/JyNkZWZpbmUgJytlbnZNYXBUeXBlRGVmaW5lOicnLHBhcmFtZXRlcnMuZW52TWFwPycjZGVmaW5lICcrZW52TWFwTW9kZURlZmluZTonJyxwYXJhbWV0ZXJzLmVudk1hcD8nI2RlZmluZSAnK2Vudk1hcEJsZW5kaW5nRGVmaW5lOicnLHBhcmFtZXRlcnMubGlnaHRNYXA/JyNkZWZpbmUgVVNFX0xJR0hUTUFQJzonJyxwYXJhbWV0ZXJzLmFvTWFwPycjZGVmaW5lIFVTRV9BT01BUCc6JycscGFyYW1ldGVycy5lbWlzc2l2ZU1hcD8nI2RlZmluZSBVU0VfRU1JU1NJVkVNQVAnOicnLHBhcmFtZXRlcnMuYnVtcE1hcD8nI2RlZmluZSBVU0VfQlVNUE1BUCc6JycscGFyYW1ldGVycy5ub3JtYWxNYXA/JyNkZWZpbmUgVVNFX05PUk1BTE1BUCc6JycscGFyYW1ldGVycy5ub3JtYWxNYXAmJnBhcmFtZXRlcnMub2JqZWN0U3BhY2VOb3JtYWxNYXA/JyNkZWZpbmUgT0JKRUNUU1BBQ0VfTk9STUFMTUFQJzonJyxwYXJhbWV0ZXJzLm5vcm1hbE1hcCYmcGFyYW1ldGVycy50YW5nZW50U3BhY2VOb3JtYWxNYXA/JyNkZWZpbmUgVEFOR0VOVFNQQUNFX05PUk1BTE1BUCc6JycscGFyYW1ldGVycy5jbGVhcmNvYXQ/JyNkZWZpbmUgVVNFX0NMRUFSQ09BVCc6JycscGFyYW1ldGVycy5jbGVhcmNvYXRNYXA/JyNkZWZpbmUgVVNFX0NMRUFSQ09BVE1BUCc6JycscGFyYW1ldGVycy5jbGVhcmNvYXRSb3VnaG5lc3NNYXA/JyNkZWZpbmUgVVNFX0NMRUFSQ09BVF9ST1VHSE5FU1NNQVAnOicnLHBhcmFtZXRlcnMuY2xlYXJjb2F0Tm9ybWFsTWFwPycjZGVmaW5lIFVTRV9DTEVBUkNPQVRfTk9STUFMTUFQJzonJyxwYXJhbWV0ZXJzLnNwZWN1bGFyTWFwPycjZGVmaW5lIFVTRV9TUEVDVUxBUk1BUCc6JycscGFyYW1ldGVycy5zcGVjdWxhckludGVuc2l0eU1hcD8nI2RlZmluZSBVU0VfU1BFQ1VMQVJJTlRFTlNJVFlNQVAnOicnLHBhcmFtZXRlcnMuc3BlY3VsYXJDb2xvck1hcD8nI2RlZmluZSBVU0VfU1BFQ1VMQVJDT0xPUk1BUCc6JycscGFyYW1ldGVycy5yb3VnaG5lc3NNYXA/JyNkZWZpbmUgVVNFX1JPVUdITkVTU01BUCc6JycscGFyYW1ldGVycy5tZXRhbG5lc3NNYXA/JyNkZWZpbmUgVVNFX01FVEFMTkVTU01BUCc6JycscGFyYW1ldGVycy5hbHBoYU1hcD8nI2RlZmluZSBVU0VfQUxQSEFNQVAnOicnLHBhcmFtZXRlcnMuYWxwaGFUZXN0PycjZGVmaW5lIFVTRV9BTFBIQVRFU1QnOicnLHBhcmFtZXRlcnMuc2hlZW4/JyNkZWZpbmUgVVNFX1NIRUVOJzonJyxwYXJhbWV0ZXJzLnNoZWVuQ29sb3JNYXA/JyNkZWZpbmUgVVNFX1NIRUVOQ09MT1JNQVAnOicnLHBhcmFtZXRlcnMuc2hlZW5Sb3VnaG5lc3NNYXA/JyNkZWZpbmUgVVNFX1NIRUVOUk9VR0hORVNTTUFQJzonJyxwYXJhbWV0ZXJzLnRyYW5zbWlzc2lvbj8nI2RlZmluZSBVU0VfVFJBTlNNSVNTSU9OJzonJyxwYXJhbWV0ZXJzLnRyYW5zbWlzc2lvbk1hcD8nI2RlZmluZSBVU0VfVFJBTlNNSVNTSU9OTUFQJzonJyxwYXJhbWV0ZXJzLnRoaWNrbmVzc01hcD8nI2RlZmluZSBVU0VfVEhJQ0tORVNTTUFQJzonJyxwYXJhbWV0ZXJzLnZlcnRleFRhbmdlbnRzPycjZGVmaW5lIFVTRV9UQU5HRU5UJzonJyxwYXJhbWV0ZXJzLnZlcnRleENvbG9yc3x8cGFyYW1ldGVycy5pbnN0YW5jaW5nQ29sb3I/JyNkZWZpbmUgVVNFX0NPTE9SJzonJyxwYXJhbWV0ZXJzLnZlcnRleEFscGhhcz8nI2RlZmluZSBVU0VfQ09MT1JfQUxQSEEnOicnLHBhcmFtZXRlcnMudmVydGV4VXZzPycjZGVmaW5lIFVTRV9VVic6JycscGFyYW1ldGVycy51dnNWZXJ0ZXhPbmx5PycjZGVmaW5lIFVWU19WRVJURVhfT05MWSc6JycscGFyYW1ldGVycy5ncmFkaWVudE1hcD8nI2RlZmluZSBVU0VfR1JBRElFTlRNQVAnOicnLHBhcmFtZXRlcnMuZmxhdFNoYWRpbmc/JyNkZWZpbmUgRkxBVF9TSEFERUQnOicnLHBhcmFtZXRlcnMuZG91YmxlU2lkZWQ/JyNkZWZpbmUgRE9VQkxFX1NJREVEJzonJyxwYXJhbWV0ZXJzLmZsaXBTaWRlZD8nI2RlZmluZSBGTElQX1NJREVEJzonJyxwYXJhbWV0ZXJzLnNoYWRvd01hcEVuYWJsZWQ/JyNkZWZpbmUgVVNFX1NIQURPV01BUCc6JycscGFyYW1ldGVycy5zaGFkb3dNYXBFbmFibGVkPycjZGVmaW5lICcrc2hhZG93TWFwVHlwZURlZmluZTonJyxwYXJhbWV0ZXJzLnByZW11bHRpcGxpZWRBbHBoYT8nI2RlZmluZSBQUkVNVUxUSVBMSUVEX0FMUEhBJzonJyxwYXJhbWV0ZXJzLnBoeXNpY2FsbHlDb3JyZWN0TGlnaHRzPycjZGVmaW5lIFBIWVNJQ0FMTFlfQ09SUkVDVF9MSUdIVFMnOicnLHBhcmFtZXRlcnMubG9nYXJpdGhtaWNEZXB0aEJ1ZmZlcj8nI2RlZmluZSBVU0VfTE9HREVQVEhCVUYnOicnLHBhcmFtZXRlcnMubG9nYXJpdGhtaWNEZXB0aEJ1ZmZlciYmcGFyYW1ldGVycy5yZW5kZXJlckV4dGVuc2lvbkZyYWdEZXB0aD8nI2RlZmluZSBVU0VfTE9HREVQVEhCVUZfRVhUJzonJywocGFyYW1ldGVycy5leHRlbnNpb25TaGFkZXJUZXh0dXJlTE9EfHxwYXJhbWV0ZXJzLmVudk1hcCkmJnBhcmFtZXRlcnMucmVuZGVyZXJFeHRlbnNpb25TaGFkZXJUZXh0dXJlTG9kPycjZGVmaW5lIFRFWFRVUkVfTE9EX0VYVCc6JycsJ3VuaWZvcm0gbWF0NCB2aWV3TWF0cml4OycsJ3VuaWZvcm0gdmVjMyBjYW1lcmFQb3NpdGlvbjsnLCd1bmlmb3JtIGJvb2wgaXNPcnRob2dyYXBoaWM7JyxwYXJhbWV0ZXJzLnRvbmVNYXBwaW5nIT09Tm9Ub25lTWFwcGluZz8nI2RlZmluZSBUT05FX01BUFBJTkcnOicnLHBhcmFtZXRlcnMudG9uZU1hcHBpbmchPT1Ob1RvbmVNYXBwaW5nP1NoYWRlckNodW5rWyd0b25lbWFwcGluZ19wYXJzX2ZyYWdtZW50J106JycsLy8gdGhpcyBjb2RlIGlzIHJlcXVpcmVkIGhlcmUgYmVjYXVzZSBpdCBpcyB1c2VkIGJ5IHRoZSB0b25lTWFwcGluZygpIGZ1bmN0aW9uIGRlZmluZWQgYmVsb3cKCXBhcmFtZXRlcnMudG9uZU1hcHBpbmchPT1Ob1RvbmVNYXBwaW5nP2dldFRvbmVNYXBwaW5nRnVuY3Rpb24oJ3RvbmVNYXBwaW5nJyxwYXJhbWV0ZXJzLnRvbmVNYXBwaW5nKTonJyxwYXJhbWV0ZXJzLmRpdGhlcmluZz8nI2RlZmluZSBESVRIRVJJTkcnOicnLHBhcmFtZXRlcnMuZm9ybWF0PT09UkdCRm9ybWF0PycjZGVmaW5lIE9QQVFVRSc6JycsU2hhZGVyQ2h1bmtbJ2VuY29kaW5nc19wYXJzX2ZyYWdtZW50J10sLy8gdGhpcyBjb2RlIGlzIHJlcXVpcmVkIGhlcmUgYmVjYXVzZSBpdCBpcyB1c2VkIGJ5IHRoZSB2YXJpb3VzIGVuY29kaW5nL2RlY29kaW5nIGZ1bmN0aW9uIGRlZmluZWQgYmVsb3cKCXBhcmFtZXRlcnMubWFwP2dldFRleGVsRGVjb2RpbmdGdW5jdGlvbignbWFwVGV4ZWxUb0xpbmVhcicscGFyYW1ldGVycy5tYXBFbmNvZGluZyk6JycscGFyYW1ldGVycy5tYXRjYXA/Z2V0VGV4ZWxEZWNvZGluZ0Z1bmN0aW9uKCdtYXRjYXBUZXhlbFRvTGluZWFyJyxwYXJhbWV0ZXJzLm1hdGNhcEVuY29kaW5nKTonJyxwYXJhbWV0ZXJzLmVudk1hcD9nZXRUZXhlbERlY29kaW5nRnVuY3Rpb24oJ2Vudk1hcFRleGVsVG9MaW5lYXInLHBhcmFtZXRlcnMuZW52TWFwRW5jb2RpbmcpOicnLHBhcmFtZXRlcnMuZW1pc3NpdmVNYXA/Z2V0VGV4ZWxEZWNvZGluZ0Z1bmN0aW9uKCdlbWlzc2l2ZU1hcFRleGVsVG9MaW5lYXInLHBhcmFtZXRlcnMuZW1pc3NpdmVNYXBFbmNvZGluZyk6JycscGFyYW1ldGVycy5zcGVjdWxhckNvbG9yTWFwP2dldFRleGVsRGVjb2RpbmdGdW5jdGlvbignc3BlY3VsYXJDb2xvck1hcFRleGVsVG9MaW5lYXInLHBhcmFtZXRlcnMuc3BlY3VsYXJDb2xvck1hcEVuY29kaW5nKTonJyxwYXJhbWV0ZXJzLnNoZWVuQ29sb3JNYXA/Z2V0VGV4ZWxEZWNvZGluZ0Z1bmN0aW9uKCdzaGVlbkNvbG9yTWFwVGV4ZWxUb0xpbmVhcicscGFyYW1ldGVycy5zaGVlbkNvbG9yTWFwRW5jb2RpbmcpOicnLHBhcmFtZXRlcnMubGlnaHRNYXA/Z2V0VGV4ZWxEZWNvZGluZ0Z1bmN0aW9uKCdsaWdodE1hcFRleGVsVG9MaW5lYXInLHBhcmFtZXRlcnMubGlnaHRNYXBFbmNvZGluZyk6JycsZ2V0VGV4ZWxFbmNvZGluZ0Z1bmN0aW9uKCdsaW5lYXJUb091dHB1dFRleGVsJyxwYXJhbWV0ZXJzLm91dHB1dEVuY29kaW5nKSxwYXJhbWV0ZXJzLmRlcHRoUGFja2luZz8nI2RlZmluZSBERVBUSF9QQUNLSU5HICcrcGFyYW1ldGVycy5kZXB0aFBhY2tpbmc6JycsJ1xuJ10uZmlsdGVyKGZpbHRlckVtcHR5TGluZSkuam9pbignXG4nKTt9dmVydGV4U2hhZGVyPXJlc29sdmVJbmNsdWRlcyh2ZXJ0ZXhTaGFkZXIpO3ZlcnRleFNoYWRlcj1yZXBsYWNlTGlnaHROdW1zKHZlcnRleFNoYWRlcixwYXJhbWV0ZXJzKTt2ZXJ0ZXhTaGFkZXI9cmVwbGFjZUNsaXBwaW5nUGxhbmVOdW1zKHZlcnRleFNoYWRlcixwYXJhbWV0ZXJzKTtmcmFnbWVudFNoYWRlcj1yZXNvbHZlSW5jbHVkZXMoZnJhZ21lbnRTaGFkZXIpO2ZyYWdtZW50U2hhZGVyPXJlcGxhY2VMaWdodE51bXMoZnJhZ21lbnRTaGFkZXIscGFyYW1ldGVycyk7ZnJhZ21lbnRTaGFkZXI9cmVwbGFjZUNsaXBwaW5nUGxhbmVOdW1zKGZyYWdtZW50U2hhZGVyLHBhcmFtZXRlcnMpO3ZlcnRleFNoYWRlcj11bnJvbGxMb29wcyh2ZXJ0ZXhTaGFkZXIpO2ZyYWdtZW50U2hhZGVyPXVucm9sbExvb3BzKGZyYWdtZW50U2hhZGVyKTtpZihwYXJhbWV0ZXJzLmlzV2ViR0wyJiZwYXJhbWV0ZXJzLmlzUmF3U2hhZGVyTWF0ZXJpYWwhPT10cnVlKXsvLyBHTFNMIDMuMCBjb252ZXJzaW9uIGZvciBidWlsdC1pbiBtYXRlcmlhbHMgYW5kIFNoYWRlck1hdGVyaWFsCgl2ZXJzaW9uU3RyaW5nPScjdmVyc2lvbiAzMDAgZXNcbic7cHJlZml4VmVydGV4PVsncHJlY2lzaW9uIG1lZGl1bXAgc2FtcGxlcjJEQXJyYXk7JywnI2RlZmluZSBhdHRyaWJ1dGUgaW4nLCcjZGVmaW5lIHZhcnlpbmcgb3V0JywnI2RlZmluZSB0ZXh0dXJlMkQgdGV4dHVyZSddLmpvaW4oJ1xuJykrJ1xuJytwcmVmaXhWZXJ0ZXg7cHJlZml4RnJhZ21lbnQ9WycjZGVmaW5lIHZhcnlpbmcgaW4nLHBhcmFtZXRlcnMuZ2xzbFZlcnNpb249PT1HTFNMMz8nJzonb3V0IGhpZ2hwIHZlYzQgcGNfZnJhZ0NvbG9yOycscGFyYW1ldGVycy5nbHNsVmVyc2lvbj09PUdMU0wzPycnOicjZGVmaW5lIGdsX0ZyYWdDb2xvciBwY19mcmFnQ29sb3InLCcjZGVmaW5lIGdsX0ZyYWdEZXB0aEVYVCBnbF9GcmFnRGVwdGgnLCcjZGVmaW5lIHRleHR1cmUyRCB0ZXh0dXJlJywnI2RlZmluZSB0ZXh0dXJlQ3ViZSB0ZXh0dXJlJywnI2RlZmluZSB0ZXh0dXJlMkRQcm9qIHRleHR1cmVQcm9qJywnI2RlZmluZSB0ZXh0dXJlMkRMb2RFWFQgdGV4dHVyZUxvZCcsJyNkZWZpbmUgdGV4dHVyZTJEUHJvakxvZEVYVCB0ZXh0dXJlUHJvakxvZCcsJyNkZWZpbmUgdGV4dHVyZUN1YmVMb2RFWFQgdGV4dHVyZUxvZCcsJyNkZWZpbmUgdGV4dHVyZTJER3JhZEVYVCB0ZXh0dXJlR3JhZCcsJyNkZWZpbmUgdGV4dHVyZTJEUHJvakdyYWRFWFQgdGV4dHVyZVByb2pHcmFkJywnI2RlZmluZSB0ZXh0dXJlQ3ViZUdyYWRFWFQgdGV4dHVyZUdyYWQnXS5qb2luKCdcbicpKydcbicrcHJlZml4RnJhZ21lbnQ7fWNvbnN0IHZlcnRleEdsc2w9dmVyc2lvblN0cmluZytwcmVmaXhWZXJ0ZXgrdmVydGV4U2hhZGVyO2NvbnN0IGZyYWdtZW50R2xzbD12ZXJzaW9uU3RyaW5nK3ByZWZpeEZyYWdtZW50K2ZyYWdtZW50U2hhZGVyOy8vIGNvbnNvbGUubG9nKCAnKlZFUlRFWConLCB2ZXJ0ZXhHbHNsICk7CgkvLyBjb25zb2xlLmxvZyggJypGUkFHTUVOVConLCBmcmFnbWVudEdsc2wgKTsKCWNvbnN0IGdsVmVydGV4U2hhZGVyPVdlYkdMU2hhZGVyKGdsLDM1NjMzLHZlcnRleEdsc2wpO2NvbnN0IGdsRnJhZ21lbnRTaGFkZXI9V2ViR0xTaGFkZXIoZ2wsMzU2MzIsZnJhZ21lbnRHbHNsKTtnbC5hdHRhY2hTaGFkZXIocHJvZ3JhbSxnbFZlcnRleFNoYWRlcik7Z2wuYXR0YWNoU2hhZGVyKHByb2dyYW0sZ2xGcmFnbWVudFNoYWRlcik7Ly8gRm9yY2UgYSBwYXJ0aWN1bGFyIGF0dHJpYnV0ZSB0byBpbmRleCAwLgoJaWYocGFyYW1ldGVycy5pbmRleDBBdHRyaWJ1dGVOYW1lIT09dW5kZWZpbmVkKXtnbC5iaW5kQXR0cmliTG9jYXRpb24ocHJvZ3JhbSwwLHBhcmFtZXRlcnMuaW5kZXgwQXR0cmlidXRlTmFtZSk7fWVsc2UgaWYocGFyYW1ldGVycy5tb3JwaFRhcmdldHM9PT10cnVlKXsvLyBwcm9ncmFtcyB3aXRoIG1vcnBoVGFyZ2V0cyBkaXNwbGFjZSBwb3NpdGlvbiBvdXQgb2YgYXR0cmlidXRlIDAKCWdsLmJpbmRBdHRyaWJMb2NhdGlvbihwcm9ncmFtLDAsJ3Bvc2l0aW9uJyk7fWdsLmxpbmtQcm9ncmFtKHByb2dyYW0pOy8vIGNoZWNrIGZvciBsaW5rIGVycm9ycwoJaWYocmVuZGVyZXIuZGVidWcuY2hlY2tTaGFkZXJFcnJvcnMpe2NvbnN0IHByb2dyYW1Mb2c9Z2wuZ2V0UHJvZ3JhbUluZm9Mb2cocHJvZ3JhbSkudHJpbSgpO2NvbnN0IHZlcnRleExvZz1nbC5nZXRTaGFkZXJJbmZvTG9nKGdsVmVydGV4U2hhZGVyKS50cmltKCk7Y29uc3QgZnJhZ21lbnRMb2c9Z2wuZ2V0U2hhZGVySW5mb0xvZyhnbEZyYWdtZW50U2hhZGVyKS50cmltKCk7bGV0IHJ1bm5hYmxlPXRydWU7bGV0IGhhdmVEaWFnbm9zdGljcz10cnVlO2lmKGdsLmdldFByb2dyYW1QYXJhbWV0ZXIocHJvZ3JhbSwzNTcxNCk9PT1mYWxzZSl7cnVubmFibGU9ZmFsc2U7Y29uc3QgdmVydGV4RXJyb3JzPWdldFNoYWRlckVycm9ycyhnbCxnbFZlcnRleFNoYWRlciwndmVydGV4Jyk7Y29uc3QgZnJhZ21lbnRFcnJvcnM9Z2V0U2hhZGVyRXJyb3JzKGdsLGdsRnJhZ21lbnRTaGFkZXIsJ2ZyYWdtZW50Jyk7Y29uc29sZS5lcnJvcignVEhSRUUuV2ViR0xQcm9ncmFtOiBTaGFkZXIgRXJyb3IgJytnbC5nZXRFcnJvcigpKycgLSAnKydWQUxJREFURV9TVEFUVVMgJytnbC5nZXRQcm9ncmFtUGFyYW1ldGVyKHByb2dyYW0sMzU3MTUpKydcblxuJysnUHJvZ3JhbSBJbmZvIExvZzogJytwcm9ncmFtTG9nKydcbicrdmVydGV4RXJyb3JzKydcbicrZnJhZ21lbnRFcnJvcnMpO31lbHNlIGlmKHByb2dyYW1Mb2chPT0nJyl7Y29uc29sZS53YXJuKCdUSFJFRS5XZWJHTFByb2dyYW06IFByb2dyYW0gSW5mbyBMb2c6Jyxwcm9ncmFtTG9nKTt9ZWxzZSBpZih2ZXJ0ZXhMb2c9PT0nJ3x8ZnJhZ21lbnRMb2c9PT0nJyl7aGF2ZURpYWdub3N0aWNzPWZhbHNlO31pZihoYXZlRGlhZ25vc3RpY3Mpe3RoaXMuZGlhZ25vc3RpY3M9e3J1bm5hYmxlOnJ1bm5hYmxlLHByb2dyYW1Mb2c6cHJvZ3JhbUxvZyx2ZXJ0ZXhTaGFkZXI6e2xvZzp2ZXJ0ZXhMb2cscHJlZml4OnByZWZpeFZlcnRleH0sZnJhZ21lbnRTaGFkZXI6e2xvZzpmcmFnbWVudExvZyxwcmVmaXg6cHJlZml4RnJhZ21lbnR9fTt9fS8vIENsZWFuIHVwCgkvLyBDcmFzaGVzIGluIGlPUzkgYW5kIGlPUzEwLiAjMTg0MDIKCS8vIGdsLmRldGFjaFNoYWRlciggcHJvZ3JhbSwgZ2xWZXJ0ZXhTaGFkZXIgKTsKCS8vIGdsLmRldGFjaFNoYWRlciggcHJvZ3JhbSwgZ2xGcmFnbWVudFNoYWRlciApOwoJZ2wuZGVsZXRlU2hhZGVyKGdsVmVydGV4U2hhZGVyKTtnbC5kZWxldGVTaGFkZXIoZ2xGcmFnbWVudFNoYWRlcik7Ly8gc2V0IHVwIGNhY2hpbmcgZm9yIHVuaWZvcm0gbG9jYXRpb25zCglsZXQgY2FjaGVkVW5pZm9ybXM7dGhpcy5nZXRVbmlmb3Jtcz1mdW5jdGlvbigpe2lmKGNhY2hlZFVuaWZvcm1zPT09dW5kZWZpbmVkKXtjYWNoZWRVbmlmb3Jtcz1uZXcgV2ViR0xVbmlmb3JtcyhnbCxwcm9ncmFtKTt9cmV0dXJuIGNhY2hlZFVuaWZvcm1zO307Ly8gc2V0IHVwIGNhY2hpbmcgZm9yIGF0dHJpYnV0ZSBsb2NhdGlvbnMKCWxldCBjYWNoZWRBdHRyaWJ1dGVzO3RoaXMuZ2V0QXR0cmlidXRlcz1mdW5jdGlvbigpe2lmKGNhY2hlZEF0dHJpYnV0ZXM9PT11bmRlZmluZWQpe2NhY2hlZEF0dHJpYnV0ZXM9ZmV0Y2hBdHRyaWJ1dGVMb2NhdGlvbnMoZ2wscHJvZ3JhbSk7fXJldHVybiBjYWNoZWRBdHRyaWJ1dGVzO307Ly8gZnJlZSByZXNvdXJjZQoJdGhpcy5kZXN0cm95PWZ1bmN0aW9uKCl7YmluZGluZ1N0YXRlcy5yZWxlYXNlU3RhdGVzT2ZQcm9ncmFtKHRoaXMpO2dsLmRlbGV0ZVByb2dyYW0ocHJvZ3JhbSk7dGhpcy5wcm9ncmFtPXVuZGVmaW5lZDt9Oy8vCgl0aGlzLm5hbWU9cGFyYW1ldGVycy5zaGFkZXJOYW1lO3RoaXMuaWQ9cHJvZ3JhbUlkQ291bnQrKzt0aGlzLmNhY2hlS2V5PWNhY2hlS2V5O3RoaXMudXNlZFRpbWVzPTE7dGhpcy5wcm9ncmFtPXByb2dyYW07dGhpcy52ZXJ0ZXhTaGFkZXI9Z2xWZXJ0ZXhTaGFkZXI7dGhpcy5mcmFnbWVudFNoYWRlcj1nbEZyYWdtZW50U2hhZGVyO3JldHVybiB0aGlzO31mdW5jdGlvbiBXZWJHTFByb2dyYW1zKHJlbmRlcmVyLGN1YmVtYXBzLGN1YmV1dm1hcHMsZXh0ZW5zaW9ucyxjYXBhYmlsaXRpZXMsYmluZGluZ1N0YXRlcyxjbGlwcGluZyl7Y29uc3QgcHJvZ3JhbXM9W107Y29uc3QgaXNXZWJHTDI9Y2FwYWJpbGl0aWVzLmlzV2ViR0wyO2NvbnN0IGxvZ2FyaXRobWljRGVwdGhCdWZmZXI9Y2FwYWJpbGl0aWVzLmxvZ2FyaXRobWljRGVwdGhCdWZmZXI7Y29uc3QgZmxvYXRWZXJ0ZXhUZXh0dXJlcz1jYXBhYmlsaXRpZXMuZmxvYXRWZXJ0ZXhUZXh0dXJlcztjb25zdCBtYXhWZXJ0ZXhVbmlmb3Jtcz1jYXBhYmlsaXRpZXMubWF4VmVydGV4VW5pZm9ybXM7Y29uc3QgdmVydGV4VGV4dHVyZXM9Y2FwYWJpbGl0aWVzLnZlcnRleFRleHR1cmVzO2xldCBwcmVjaXNpb249Y2FwYWJpbGl0aWVzLnByZWNpc2lvbjtjb25zdCBzaGFkZXJJRHM9e01lc2hEZXB0aE1hdGVyaWFsOidkZXB0aCcsTWVzaERpc3RhbmNlTWF0ZXJpYWw6J2Rpc3RhbmNlUkdCQScsTWVzaE5vcm1hbE1hdGVyaWFsOidub3JtYWwnLE1lc2hCYXNpY01hdGVyaWFsOidiYXNpYycsTWVzaExhbWJlcnRNYXRlcmlhbDonbGFtYmVydCcsTWVzaFBob25nTWF0ZXJpYWw6J3Bob25nJyxNZXNoVG9vbk1hdGVyaWFsOid0b29uJyxNZXNoU3RhbmRhcmRNYXRlcmlhbDoncGh5c2ljYWwnLE1lc2hQaHlzaWNhbE1hdGVyaWFsOidwaHlzaWNhbCcsTWVzaE1hdGNhcE1hdGVyaWFsOidtYXRjYXAnLExpbmVCYXNpY01hdGVyaWFsOidiYXNpYycsTGluZURhc2hlZE1hdGVyaWFsOidkYXNoZWQnLFBvaW50c01hdGVyaWFsOidwb2ludHMnLFNoYWRvd01hdGVyaWFsOidzaGFkb3cnLFNwcml0ZU1hdGVyaWFsOidzcHJpdGUnfTtjb25zdCBwYXJhbWV0ZXJOYW1lcz1bJ3ByZWNpc2lvbicsJ2lzV2ViR0wyJywnc3VwcG9ydHNWZXJ0ZXhUZXh0dXJlcycsJ291dHB1dEVuY29kaW5nJywnaW5zdGFuY2luZycsJ2luc3RhbmNpbmdDb2xvcicsJ21hcCcsJ21hcEVuY29kaW5nJywnbWF0Y2FwJywnbWF0Y2FwRW5jb2RpbmcnLCdlbnZNYXAnLCdlbnZNYXBNb2RlJywnZW52TWFwRW5jb2RpbmcnLCdlbnZNYXBDdWJlVVYnLCdsaWdodE1hcCcsJ2xpZ2h0TWFwRW5jb2RpbmcnLCdhb01hcCcsJ2VtaXNzaXZlTWFwJywnZW1pc3NpdmVNYXBFbmNvZGluZycsJ2J1bXBNYXAnLCdub3JtYWxNYXAnLCdvYmplY3RTcGFjZU5vcm1hbE1hcCcsJ3RhbmdlbnRTcGFjZU5vcm1hbE1hcCcsJ2NsZWFyY29hdCcsJ2NsZWFyY29hdE1hcCcsJ2NsZWFyY29hdFJvdWdobmVzc01hcCcsJ2NsZWFyY29hdE5vcm1hbE1hcCcsJ2Rpc3BsYWNlbWVudE1hcCcsJ3NwZWN1bGFyTWFwJywsJ3JvdWdobmVzc01hcCcsJ21ldGFsbmVzc01hcCcsJ2dyYWRpZW50TWFwJywnYWxwaGFNYXAnLCdhbHBoYVRlc3QnLCdjb21iaW5lJywndmVydGV4Q29sb3JzJywndmVydGV4QWxwaGFzJywndmVydGV4VGFuZ2VudHMnLCd2ZXJ0ZXhVdnMnLCd1dnNWZXJ0ZXhPbmx5JywnZm9nJywndXNlRm9nJywnZm9nRXhwMicsJ2ZsYXRTaGFkaW5nJywnc2l6ZUF0dGVudWF0aW9uJywnbG9nYXJpdGhtaWNEZXB0aEJ1ZmZlcicsJ3NraW5uaW5nJywnbWF4Qm9uZXMnLCd1c2VWZXJ0ZXhUZXh0dXJlJywnbW9ycGhUYXJnZXRzJywnbW9ycGhOb3JtYWxzJywnbW9ycGhUYXJnZXRzQ291bnQnLCdwcmVtdWx0aXBsaWVkQWxwaGEnLCdudW1EaXJMaWdodHMnLCdudW1Qb2ludExpZ2h0cycsJ251bVNwb3RMaWdodHMnLCdudW1IZW1pTGlnaHRzJywnbnVtUmVjdEFyZWFMaWdodHMnLCdudW1EaXJMaWdodFNoYWRvd3MnLCdudW1Qb2ludExpZ2h0U2hhZG93cycsJ251bVNwb3RMaWdodFNoYWRvd3MnLCdzaGFkb3dNYXBFbmFibGVkJywnc2hhZG93TWFwVHlwZScsJ3RvbmVNYXBwaW5nJywncGh5c2ljYWxseUNvcnJlY3RMaWdodHMnLCdkb3VibGVTaWRlZCcsJ2ZsaXBTaWRlZCcsJ251bUNsaXBwaW5nUGxhbmVzJywnbnVtQ2xpcEludGVyc2VjdGlvbicsJ2RlcHRoUGFja2luZycsJ2RpdGhlcmluZycsJ2Zvcm1hdCcsJ3NwZWN1bGFySW50ZW5zaXR5TWFwJywnc3BlY3VsYXJDb2xvck1hcCcsJ3NwZWN1bGFyQ29sb3JNYXBFbmNvZGluZycsJ3RyYW5zbWlzc2lvbicsJ3RyYW5zbWlzc2lvbk1hcCcsJ3RoaWNrbmVzc01hcCcsJ3NoZWVuJywnc2hlZW5Db2xvck1hcCcsJ3NoZWVuQ29sb3JNYXBFbmNvZGluZycsJ3NoZWVuUm91Z2huZXNzTWFwJ107ZnVuY3Rpb24gZ2V0TWF4Qm9uZXMob2JqZWN0KXtjb25zdCBza2VsZXRvbj1vYmplY3Quc2tlbGV0b247Y29uc3QgYm9uZXM9c2tlbGV0b24uYm9uZXM7aWYoZmxvYXRWZXJ0ZXhUZXh0dXJlcyl7cmV0dXJuIDEwMjQ7fWVsc2Ugey8vIGRlZmF1bHQgZm9yIHdoZW4gb2JqZWN0IGlzIG5vdCBzcGVjaWZpZWQKCS8vICggZm9yIGV4YW1wbGUgd2hlbiBwcmVidWlsZGluZyBzaGFkZXIgdG8gYmUgdXNlZCB3aXRoIG11bHRpcGxlIG9iamVjdHMgKQoJLy8KCS8vICAtIGxlYXZlIHNvbWUgZXh0cmEgc3BhY2UgZm9yIG90aGVyIHVuaWZvcm1zCgkvLyAgLSBsaW1pdCBoZXJlIGlzIEFOR0xFJ3MgMjU0IG1heCB1bmlmb3JtIHZlY3RvcnMKCS8vICAgICh1cCB0byA1NCBzaG91bGQgYmUgc2FmZSkKCWNvbnN0IG5WZXJ0ZXhVbmlmb3Jtcz1tYXhWZXJ0ZXhVbmlmb3Jtcztjb25zdCBuVmVydGV4TWF0cmljZXM9TWF0aC5mbG9vcigoblZlcnRleFVuaWZvcm1zLTIwKS80KTtjb25zdCBtYXhCb25lcz1NYXRoLm1pbihuVmVydGV4TWF0cmljZXMsYm9uZXMubGVuZ3RoKTtpZihtYXhCb25lczxib25lcy5sZW5ndGgpe2NvbnNvbGUud2FybignVEhSRUUuV2ViR0xSZW5kZXJlcjogU2tlbGV0b24gaGFzICcrYm9uZXMubGVuZ3RoKycgYm9uZXMuIFRoaXMgR1BVIHN1cHBvcnRzICcrbWF4Qm9uZXMrJy4nKTtyZXR1cm4gMDt9cmV0dXJuIG1heEJvbmVzO319ZnVuY3Rpb24gZ2V0VGV4dHVyZUVuY29kaW5nRnJvbU1hcChtYXApe2xldCBlbmNvZGluZztpZihtYXAmJm1hcC5pc1RleHR1cmUpe2VuY29kaW5nPW1hcC5lbmNvZGluZzt9ZWxzZSBpZihtYXAmJm1hcC5pc1dlYkdMUmVuZGVyVGFyZ2V0KXtjb25zb2xlLndhcm4oJ1RIUkVFLldlYkdMUHJvZ3JhbXMuZ2V0VGV4dHVyZUVuY29kaW5nRnJvbU1hcDogZG9uXCd0IHVzZSByZW5kZXIgdGFyZ2V0cyBhcyB0ZXh0dXJlcy4gVXNlIHRoZWlyIC50ZXh0dXJlIHByb3BlcnR5IGluc3RlYWQuJyk7ZW5jb2Rpbmc9bWFwLnRleHR1cmUuZW5jb2Rpbmc7fWVsc2Uge2VuY29kaW5nPUxpbmVhckVuY29kaW5nO30vKiBpZiAoIGlzV2ViR0wyICYmIG1hcCAmJiBtYXAuaXNUZXh0dXJlICYmIG1hcC5mb3JtYXQgPT09IFJHQkFGb3JtYXQgJiYgbWFwLnR5cGUgPT09IFVuc2lnbmVkQnl0ZVR5cGUgJiYgbWFwLmVuY29kaW5nID09PSBzUkdCRW5jb2RpbmcgKSB7CgoJCQkJZW5jb2RpbmcgPSBMaW5lYXJFbmNvZGluZzsgLy8gZGlzYWJsZSBpbmxpbmUgZGVjb2RlIGZvciBzUkdCIHRleHR1cmVzIGluIFdlYkdMIDIKCgkJCX0gKi9yZXR1cm4gZW5jb2Rpbmc7fWZ1bmN0aW9uIGdldFBhcmFtZXRlcnMobWF0ZXJpYWwsbGlnaHRzLHNoYWRvd3Msc2NlbmUsb2JqZWN0KXtjb25zdCBmb2c9c2NlbmUuZm9nO2NvbnN0IGVudmlyb25tZW50PW1hdGVyaWFsLmlzTWVzaFN0YW5kYXJkTWF0ZXJpYWw/c2NlbmUuZW52aXJvbm1lbnQ6bnVsbDtjb25zdCBlbnZNYXA9KG1hdGVyaWFsLmlzTWVzaFN0YW5kYXJkTWF0ZXJpYWw/Y3ViZXV2bWFwczpjdWJlbWFwcykuZ2V0KG1hdGVyaWFsLmVudk1hcHx8ZW52aXJvbm1lbnQpO2NvbnN0IHNoYWRlcklEPXNoYWRlcklEc1ttYXRlcmlhbC50eXBlXTsvLyBoZXVyaXN0aWNzIHRvIGNyZWF0ZSBzaGFkZXIgcGFyYW1ldGVycyBhY2NvcmRpbmcgdG8gbGlnaHRzIGluIHRoZSBzY2VuZQoJLy8gKG5vdCB0byBibG93IG92ZXIgbWF4TGlnaHRzIGJ1ZGdldCkKCWNvbnN0IG1heEJvbmVzPW9iamVjdC5pc1NraW5uZWRNZXNoP2dldE1heEJvbmVzKG9iamVjdCk6MDtpZihtYXRlcmlhbC5wcmVjaXNpb24hPT1udWxsKXtwcmVjaXNpb249Y2FwYWJpbGl0aWVzLmdldE1heFByZWNpc2lvbihtYXRlcmlhbC5wcmVjaXNpb24pO2lmKHByZWNpc2lvbiE9PW1hdGVyaWFsLnByZWNpc2lvbil7Y29uc29sZS53YXJuKCdUSFJFRS5XZWJHTFByb2dyYW0uZ2V0UGFyYW1ldGVyczonLG1hdGVyaWFsLnByZWNpc2lvbiwnbm90IHN1cHBvcnRlZCwgdXNpbmcnLHByZWNpc2lvbiwnaW5zdGVhZC4nKTt9fWxldCB2ZXJ0ZXhTaGFkZXIsZnJhZ21lbnRTaGFkZXI7aWYoc2hhZGVySUQpe2NvbnN0IHNoYWRlcj1TaGFkZXJMaWJbc2hhZGVySURdO3ZlcnRleFNoYWRlcj1zaGFkZXIudmVydGV4U2hhZGVyO2ZyYWdtZW50U2hhZGVyPXNoYWRlci5mcmFnbWVudFNoYWRlcjt9ZWxzZSB7dmVydGV4U2hhZGVyPW1hdGVyaWFsLnZlcnRleFNoYWRlcjtmcmFnbWVudFNoYWRlcj1tYXRlcmlhbC5mcmFnbWVudFNoYWRlcjt9Y29uc3QgY3VycmVudFJlbmRlclRhcmdldD1yZW5kZXJlci5nZXRSZW5kZXJUYXJnZXQoKTtjb25zdCB1c2VBbHBoYVRlc3Q9bWF0ZXJpYWwuYWxwaGFUZXN0PjA7Y29uc3QgdXNlQ2xlYXJjb2F0PW1hdGVyaWFsLmNsZWFyY29hdD4wO2NvbnN0IHBhcmFtZXRlcnM9e2lzV2ViR0wyOmlzV2ViR0wyLHNoYWRlcklEOnNoYWRlcklELHNoYWRlck5hbWU6bWF0ZXJpYWwudHlwZSx2ZXJ0ZXhTaGFkZXI6dmVydGV4U2hhZGVyLGZyYWdtZW50U2hhZGVyOmZyYWdtZW50U2hhZGVyLGRlZmluZXM6bWF0ZXJpYWwuZGVmaW5lcyxpc1Jhd1NoYWRlck1hdGVyaWFsOm1hdGVyaWFsLmlzUmF3U2hhZGVyTWF0ZXJpYWw9PT10cnVlLGdsc2xWZXJzaW9uOm1hdGVyaWFsLmdsc2xWZXJzaW9uLHByZWNpc2lvbjpwcmVjaXNpb24saW5zdGFuY2luZzpvYmplY3QuaXNJbnN0YW5jZWRNZXNoPT09dHJ1ZSxpbnN0YW5jaW5nQ29sb3I6b2JqZWN0LmlzSW5zdGFuY2VkTWVzaD09PXRydWUmJm9iamVjdC5pbnN0YW5jZUNvbG9yIT09bnVsbCxzdXBwb3J0c1ZlcnRleFRleHR1cmVzOnZlcnRleFRleHR1cmVzLG91dHB1dEVuY29kaW5nOmN1cnJlbnRSZW5kZXJUYXJnZXQhPT1udWxsP2dldFRleHR1cmVFbmNvZGluZ0Zyb21NYXAoY3VycmVudFJlbmRlclRhcmdldC50ZXh0dXJlKTpyZW5kZXJlci5vdXRwdXRFbmNvZGluZyxtYXA6ISFtYXRlcmlhbC5tYXAsbWFwRW5jb2Rpbmc6Z2V0VGV4dHVyZUVuY29kaW5nRnJvbU1hcChtYXRlcmlhbC5tYXApLG1hdGNhcDohIW1hdGVyaWFsLm1hdGNhcCxtYXRjYXBFbmNvZGluZzpnZXRUZXh0dXJlRW5jb2RpbmdGcm9tTWFwKG1hdGVyaWFsLm1hdGNhcCksZW52TWFwOiEhZW52TWFwLGVudk1hcE1vZGU6ZW52TWFwJiZlbnZNYXAubWFwcGluZyxlbnZNYXBFbmNvZGluZzpnZXRUZXh0dXJlRW5jb2RpbmdGcm9tTWFwKGVudk1hcCksZW52TWFwQ3ViZVVWOiEhZW52TWFwJiYoZW52TWFwLm1hcHBpbmc9PT1DdWJlVVZSZWZsZWN0aW9uTWFwcGluZ3x8ZW52TWFwLm1hcHBpbmc9PT1DdWJlVVZSZWZyYWN0aW9uTWFwcGluZyksbGlnaHRNYXA6ISFtYXRlcmlhbC5saWdodE1hcCxsaWdodE1hcEVuY29kaW5nOmdldFRleHR1cmVFbmNvZGluZ0Zyb21NYXAobWF0ZXJpYWwubGlnaHRNYXApLGFvTWFwOiEhbWF0ZXJpYWwuYW9NYXAsZW1pc3NpdmVNYXA6ISFtYXRlcmlhbC5lbWlzc2l2ZU1hcCxlbWlzc2l2ZU1hcEVuY29kaW5nOmdldFRleHR1cmVFbmNvZGluZ0Zyb21NYXAobWF0ZXJpYWwuZW1pc3NpdmVNYXApLGJ1bXBNYXA6ISFtYXRlcmlhbC5idW1wTWFwLG5vcm1hbE1hcDohIW1hdGVyaWFsLm5vcm1hbE1hcCxvYmplY3RTcGFjZU5vcm1hbE1hcDptYXRlcmlhbC5ub3JtYWxNYXBUeXBlPT09T2JqZWN0U3BhY2VOb3JtYWxNYXAsdGFuZ2VudFNwYWNlTm9ybWFsTWFwOm1hdGVyaWFsLm5vcm1hbE1hcFR5cGU9PT1UYW5nZW50U3BhY2VOb3JtYWxNYXAsY2xlYXJjb2F0OnVzZUNsZWFyY29hdCxjbGVhcmNvYXRNYXA6dXNlQ2xlYXJjb2F0JiYhIW1hdGVyaWFsLmNsZWFyY29hdE1hcCxjbGVhcmNvYXRSb3VnaG5lc3NNYXA6dXNlQ2xlYXJjb2F0JiYhIW1hdGVyaWFsLmNsZWFyY29hdFJvdWdobmVzc01hcCxjbGVhcmNvYXROb3JtYWxNYXA6dXNlQ2xlYXJjb2F0JiYhIW1hdGVyaWFsLmNsZWFyY29hdE5vcm1hbE1hcCxkaXNwbGFjZW1lbnRNYXA6ISFtYXRlcmlhbC5kaXNwbGFjZW1lbnRNYXAscm91Z2huZXNzTWFwOiEhbWF0ZXJpYWwucm91Z2huZXNzTWFwLG1ldGFsbmVzc01hcDohIW1hdGVyaWFsLm1ldGFsbmVzc01hcCxzcGVjdWxhck1hcDohIW1hdGVyaWFsLnNwZWN1bGFyTWFwLHNwZWN1bGFySW50ZW5zaXR5TWFwOiEhbWF0ZXJpYWwuc3BlY3VsYXJJbnRlbnNpdHlNYXAsc3BlY3VsYXJDb2xvck1hcDohIW1hdGVyaWFsLnNwZWN1bGFyQ29sb3JNYXAsc3BlY3VsYXJDb2xvck1hcEVuY29kaW5nOmdldFRleHR1cmVFbmNvZGluZ0Zyb21NYXAobWF0ZXJpYWwuc3BlY3VsYXJDb2xvck1hcCksYWxwaGFNYXA6ISFtYXRlcmlhbC5hbHBoYU1hcCxhbHBoYVRlc3Q6dXNlQWxwaGFUZXN0LGdyYWRpZW50TWFwOiEhbWF0ZXJpYWwuZ3JhZGllbnRNYXAsc2hlZW46bWF0ZXJpYWwuc2hlZW4+MCxzaGVlbkNvbG9yTWFwOiEhbWF0ZXJpYWwuc2hlZW5Db2xvck1hcCxzaGVlbkNvbG9yTWFwRW5jb2Rpbmc6Z2V0VGV4dHVyZUVuY29kaW5nRnJvbU1hcChtYXRlcmlhbC5zaGVlbkNvbG9yTWFwKSxzaGVlblJvdWdobmVzc01hcDohIW1hdGVyaWFsLnNoZWVuUm91Z2huZXNzTWFwLHRyYW5zbWlzc2lvbjptYXRlcmlhbC50cmFuc21pc3Npb24+MCx0cmFuc21pc3Npb25NYXA6ISFtYXRlcmlhbC50cmFuc21pc3Npb25NYXAsdGhpY2tuZXNzTWFwOiEhbWF0ZXJpYWwudGhpY2tuZXNzTWFwLGNvbWJpbmU6bWF0ZXJpYWwuY29tYmluZSx2ZXJ0ZXhUYW5nZW50czohIW1hdGVyaWFsLm5vcm1hbE1hcCYmISFvYmplY3QuZ2VvbWV0cnkmJiEhb2JqZWN0Lmdlb21ldHJ5LmF0dHJpYnV0ZXMudGFuZ2VudCx2ZXJ0ZXhDb2xvcnM6bWF0ZXJpYWwudmVydGV4Q29sb3JzLHZlcnRleEFscGhhczptYXRlcmlhbC52ZXJ0ZXhDb2xvcnM9PT10cnVlJiYhIW9iamVjdC5nZW9tZXRyeSYmISFvYmplY3QuZ2VvbWV0cnkuYXR0cmlidXRlcy5jb2xvciYmb2JqZWN0Lmdlb21ldHJ5LmF0dHJpYnV0ZXMuY29sb3IuaXRlbVNpemU9PT00LHZlcnRleFV2czohIW1hdGVyaWFsLm1hcHx8ISFtYXRlcmlhbC5idW1wTWFwfHwhIW1hdGVyaWFsLm5vcm1hbE1hcHx8ISFtYXRlcmlhbC5zcGVjdWxhck1hcHx8ISFtYXRlcmlhbC5hbHBoYU1hcHx8ISFtYXRlcmlhbC5lbWlzc2l2ZU1hcHx8ISFtYXRlcmlhbC5yb3VnaG5lc3NNYXB8fCEhbWF0ZXJpYWwubWV0YWxuZXNzTWFwfHwhIW1hdGVyaWFsLmNsZWFyY29hdE1hcHx8ISFtYXRlcmlhbC5jbGVhcmNvYXRSb3VnaG5lc3NNYXB8fCEhbWF0ZXJpYWwuY2xlYXJjb2F0Tm9ybWFsTWFwfHwhIW1hdGVyaWFsLmRpc3BsYWNlbWVudE1hcHx8ISFtYXRlcmlhbC50cmFuc21pc3Npb25NYXB8fCEhbWF0ZXJpYWwudGhpY2tuZXNzTWFwfHwhIW1hdGVyaWFsLnNwZWN1bGFySW50ZW5zaXR5TWFwfHwhIW1hdGVyaWFsLnNwZWN1bGFyQ29sb3JNYXB8fCEhbWF0ZXJpYWwuc2hlZW5Db2xvck1hcHx8bWF0ZXJpYWwuc2hlZW5Sb3VnaG5lc3NNYXAsdXZzVmVydGV4T25seTohKCEhbWF0ZXJpYWwubWFwfHwhIW1hdGVyaWFsLmJ1bXBNYXB8fCEhbWF0ZXJpYWwubm9ybWFsTWFwfHwhIW1hdGVyaWFsLnNwZWN1bGFyTWFwfHwhIW1hdGVyaWFsLmFscGhhTWFwfHwhIW1hdGVyaWFsLmVtaXNzaXZlTWFwfHwhIW1hdGVyaWFsLnJvdWdobmVzc01hcHx8ISFtYXRlcmlhbC5tZXRhbG5lc3NNYXB8fCEhbWF0ZXJpYWwuY2xlYXJjb2F0Tm9ybWFsTWFwfHxtYXRlcmlhbC50cmFuc21pc3Npb24+MHx8ISFtYXRlcmlhbC50cmFuc21pc3Npb25NYXB8fCEhbWF0ZXJpYWwudGhpY2tuZXNzTWFwfHwhIW1hdGVyaWFsLnNwZWN1bGFySW50ZW5zaXR5TWFwfHwhIW1hdGVyaWFsLnNwZWN1bGFyQ29sb3JNYXB8fG1hdGVyaWFsLnNoZWVuPjB8fCEhbWF0ZXJpYWwuc2hlZW5Db2xvck1hcHx8ISFtYXRlcmlhbC5zaGVlblJvdWdobmVzc01hcCkmJiEhbWF0ZXJpYWwuZGlzcGxhY2VtZW50TWFwLGZvZzohIWZvZyx1c2VGb2c6bWF0ZXJpYWwuZm9nLGZvZ0V4cDI6Zm9nJiZmb2cuaXNGb2dFeHAyLGZsYXRTaGFkaW5nOiEhbWF0ZXJpYWwuZmxhdFNoYWRpbmcsc2l6ZUF0dGVudWF0aW9uOm1hdGVyaWFsLnNpemVBdHRlbnVhdGlvbixsb2dhcml0aG1pY0RlcHRoQnVmZmVyOmxvZ2FyaXRobWljRGVwdGhCdWZmZXIsc2tpbm5pbmc6b2JqZWN0LmlzU2tpbm5lZE1lc2g9PT10cnVlJiZtYXhCb25lcz4wLG1heEJvbmVzOm1heEJvbmVzLHVzZVZlcnRleFRleHR1cmU6ZmxvYXRWZXJ0ZXhUZXh0dXJlcyxtb3JwaFRhcmdldHM6ISFvYmplY3QuZ2VvbWV0cnkmJiEhb2JqZWN0Lmdlb21ldHJ5Lm1vcnBoQXR0cmlidXRlcy5wb3NpdGlvbixtb3JwaE5vcm1hbHM6ISFvYmplY3QuZ2VvbWV0cnkmJiEhb2JqZWN0Lmdlb21ldHJ5Lm1vcnBoQXR0cmlidXRlcy5ub3JtYWwsbW9ycGhUYXJnZXRzQ291bnQ6ISFvYmplY3QuZ2VvbWV0cnkmJiEhb2JqZWN0Lmdlb21ldHJ5Lm1vcnBoQXR0cmlidXRlcy5wb3NpdGlvbj9vYmplY3QuZ2VvbWV0cnkubW9ycGhBdHRyaWJ1dGVzLnBvc2l0aW9uLmxlbmd0aDowLG51bURpckxpZ2h0czpsaWdodHMuZGlyZWN0aW9uYWwubGVuZ3RoLG51bVBvaW50TGlnaHRzOmxpZ2h0cy5wb2ludC5sZW5ndGgsbnVtU3BvdExpZ2h0czpsaWdodHMuc3BvdC5sZW5ndGgsbnVtUmVjdEFyZWFMaWdodHM6bGlnaHRzLnJlY3RBcmVhLmxlbmd0aCxudW1IZW1pTGlnaHRzOmxpZ2h0cy5oZW1pLmxlbmd0aCxudW1EaXJMaWdodFNoYWRvd3M6bGlnaHRzLmRpcmVjdGlvbmFsU2hhZG93TWFwLmxlbmd0aCxudW1Qb2ludExpZ2h0U2hhZG93czpsaWdodHMucG9pbnRTaGFkb3dNYXAubGVuZ3RoLG51bVNwb3RMaWdodFNoYWRvd3M6bGlnaHRzLnNwb3RTaGFkb3dNYXAubGVuZ3RoLG51bUNsaXBwaW5nUGxhbmVzOmNsaXBwaW5nLm51bVBsYW5lcyxudW1DbGlwSW50ZXJzZWN0aW9uOmNsaXBwaW5nLm51bUludGVyc2VjdGlvbixmb3JtYXQ6bWF0ZXJpYWwuZm9ybWF0LGRpdGhlcmluZzptYXRlcmlhbC5kaXRoZXJpbmcsc2hhZG93TWFwRW5hYmxlZDpyZW5kZXJlci5zaGFkb3dNYXAuZW5hYmxlZCYmc2hhZG93cy5sZW5ndGg+MCxzaGFkb3dNYXBUeXBlOnJlbmRlcmVyLnNoYWRvd01hcC50eXBlLHRvbmVNYXBwaW5nOm1hdGVyaWFsLnRvbmVNYXBwZWQ/cmVuZGVyZXIudG9uZU1hcHBpbmc6Tm9Ub25lTWFwcGluZyxwaHlzaWNhbGx5Q29ycmVjdExpZ2h0czpyZW5kZXJlci5waHlzaWNhbGx5Q29ycmVjdExpZ2h0cyxwcmVtdWx0aXBsaWVkQWxwaGE6bWF0ZXJpYWwucHJlbXVsdGlwbGllZEFscGhhLGRvdWJsZVNpZGVkOm1hdGVyaWFsLnNpZGU9PT1Eb3VibGVTaWRlLGZsaXBTaWRlZDptYXRlcmlhbC5zaWRlPT09QmFja1NpZGUsZGVwdGhQYWNraW5nOm1hdGVyaWFsLmRlcHRoUGFja2luZyE9PXVuZGVmaW5lZD9tYXRlcmlhbC5kZXB0aFBhY2tpbmc6ZmFsc2UsaW5kZXgwQXR0cmlidXRlTmFtZTptYXRlcmlhbC5pbmRleDBBdHRyaWJ1dGVOYW1lLGV4dGVuc2lvbkRlcml2YXRpdmVzOm1hdGVyaWFsLmV4dGVuc2lvbnMmJm1hdGVyaWFsLmV4dGVuc2lvbnMuZGVyaXZhdGl2ZXMsZXh0ZW5zaW9uRnJhZ0RlcHRoOm1hdGVyaWFsLmV4dGVuc2lvbnMmJm1hdGVyaWFsLmV4dGVuc2lvbnMuZnJhZ0RlcHRoLGV4dGVuc2lvbkRyYXdCdWZmZXJzOm1hdGVyaWFsLmV4dGVuc2lvbnMmJm1hdGVyaWFsLmV4dGVuc2lvbnMuZHJhd0J1ZmZlcnMsZXh0ZW5zaW9uU2hhZGVyVGV4dHVyZUxPRDptYXRlcmlhbC5leHRlbnNpb25zJiZtYXRlcmlhbC5leHRlbnNpb25zLnNoYWRlclRleHR1cmVMT0QscmVuZGVyZXJFeHRlbnNpb25GcmFnRGVwdGg6aXNXZWJHTDJ8fGV4dGVuc2lvbnMuaGFzKCdFWFRfZnJhZ19kZXB0aCcpLHJlbmRlcmVyRXh0ZW5zaW9uRHJhd0J1ZmZlcnM6aXNXZWJHTDJ8fGV4dGVuc2lvbnMuaGFzKCdXRUJHTF9kcmF3X2J1ZmZlcnMnKSxyZW5kZXJlckV4dGVuc2lvblNoYWRlclRleHR1cmVMb2Q6aXNXZWJHTDJ8fGV4dGVuc2lvbnMuaGFzKCdFWFRfc2hhZGVyX3RleHR1cmVfbG9kJyksY3VzdG9tUHJvZ3JhbUNhY2hlS2V5Om1hdGVyaWFsLmN1c3RvbVByb2dyYW1DYWNoZUtleSgpfTtyZXR1cm4gcGFyYW1ldGVyczt9ZnVuY3Rpb24gZ2V0UHJvZ3JhbUNhY2hlS2V5KHBhcmFtZXRlcnMpe2NvbnN0IGFycmF5PVtdO2lmKHBhcmFtZXRlcnMuc2hhZGVySUQpe2FycmF5LnB1c2gocGFyYW1ldGVycy5zaGFkZXJJRCk7fWVsc2Uge2FycmF5LnB1c2goaGFzaFN0cmluZyhwYXJhbWV0ZXJzLmZyYWdtZW50U2hhZGVyKSk7YXJyYXkucHVzaChoYXNoU3RyaW5nKHBhcmFtZXRlcnMudmVydGV4U2hhZGVyKSk7fWlmKHBhcmFtZXRlcnMuZGVmaW5lcyE9PXVuZGVmaW5lZCl7Zm9yKGNvbnN0IG5hbWUgaW4gcGFyYW1ldGVycy5kZWZpbmVzKXthcnJheS5wdXNoKG5hbWUpO2FycmF5LnB1c2gocGFyYW1ldGVycy5kZWZpbmVzW25hbWVdKTt9fWlmKHBhcmFtZXRlcnMuaXNSYXdTaGFkZXJNYXRlcmlhbD09PWZhbHNlKXtmb3IobGV0IGk9MDtpPHBhcmFtZXRlck5hbWVzLmxlbmd0aDtpKyspe2FycmF5LnB1c2gocGFyYW1ldGVyc1twYXJhbWV0ZXJOYW1lc1tpXV0pO31hcnJheS5wdXNoKHJlbmRlcmVyLm91dHB1dEVuY29kaW5nKTthcnJheS5wdXNoKHJlbmRlcmVyLmdhbW1hRmFjdG9yKTt9YXJyYXkucHVzaChwYXJhbWV0ZXJzLmN1c3RvbVByb2dyYW1DYWNoZUtleSk7cmV0dXJuIGFycmF5LmpvaW4oKTt9ZnVuY3Rpb24gZ2V0VW5pZm9ybXMobWF0ZXJpYWwpe2NvbnN0IHNoYWRlcklEPXNoYWRlcklEc1ttYXRlcmlhbC50eXBlXTtsZXQgdW5pZm9ybXM7aWYoc2hhZGVySUQpe2NvbnN0IHNoYWRlcj1TaGFkZXJMaWJbc2hhZGVySURdO3VuaWZvcm1zPVVuaWZvcm1zVXRpbHMuY2xvbmUoc2hhZGVyLnVuaWZvcm1zKTt9ZWxzZSB7dW5pZm9ybXM9bWF0ZXJpYWwudW5pZm9ybXM7fXJldHVybiB1bmlmb3Jtczt9ZnVuY3Rpb24gYWNxdWlyZVByb2dyYW0ocGFyYW1ldGVycyxjYWNoZUtleSl7bGV0IHByb2dyYW07Ly8gQ2hlY2sgaWYgY29kZSBoYXMgYmVlbiBhbHJlYWR5IGNvbXBpbGVkCglmb3IobGV0IHA9MCxwbD1wcm9ncmFtcy5sZW5ndGg7cDxwbDtwKyspe2NvbnN0IHByZWV4aXN0aW5nUHJvZ3JhbT1wcm9ncmFtc1twXTtpZihwcmVleGlzdGluZ1Byb2dyYW0uY2FjaGVLZXk9PT1jYWNoZUtleSl7cHJvZ3JhbT1wcmVleGlzdGluZ1Byb2dyYW07Kytwcm9ncmFtLnVzZWRUaW1lczticmVhazt9fWlmKHByb2dyYW09PT11bmRlZmluZWQpe3Byb2dyYW09bmV3IFdlYkdMUHJvZ3JhbShyZW5kZXJlcixjYWNoZUtleSxwYXJhbWV0ZXJzLGJpbmRpbmdTdGF0ZXMpO3Byb2dyYW1zLnB1c2gocHJvZ3JhbSk7fXJldHVybiBwcm9ncmFtO31mdW5jdGlvbiByZWxlYXNlUHJvZ3JhbShwcm9ncmFtKXtpZigtLXByb2dyYW0udXNlZFRpbWVzPT09MCl7Ly8gUmVtb3ZlIGZyb20gdW5vcmRlcmVkIHNldAoJY29uc3QgaT1wcm9ncmFtcy5pbmRleE9mKHByb2dyYW0pO3Byb2dyYW1zW2ldPXByb2dyYW1zW3Byb2dyYW1zLmxlbmd0aC0xXTtwcm9ncmFtcy5wb3AoKTsvLyBGcmVlIFdlYkdMIHJlc291cmNlcwoJcHJvZ3JhbS5kZXN0cm95KCk7fX1yZXR1cm4ge2dldFBhcmFtZXRlcnM6Z2V0UGFyYW1ldGVycyxnZXRQcm9ncmFtQ2FjaGVLZXk6Z2V0UHJvZ3JhbUNhY2hlS2V5LGdldFVuaWZvcm1zOmdldFVuaWZvcm1zLGFjcXVpcmVQcm9ncmFtOmFjcXVpcmVQcm9ncmFtLHJlbGVhc2VQcm9ncmFtOnJlbGVhc2VQcm9ncmFtLC8vIEV4cG9zZWQgZm9yIHJlc291cmNlIG1vbml0b3JpbmcgJiBlcnJvciBmZWVkYmFjayB2aWEgcmVuZGVyZXIuaW5mbzoKCXByb2dyYW1zOnByb2dyYW1zfTt9ZnVuY3Rpb24gV2ViR0xQcm9wZXJ0aWVzKCl7bGV0IHByb3BlcnRpZXM9bmV3IFdlYWtNYXAoKTtmdW5jdGlvbiBnZXQob2JqZWN0KXtsZXQgbWFwPXByb3BlcnRpZXMuZ2V0KG9iamVjdCk7aWYobWFwPT09dW5kZWZpbmVkKXttYXA9e307cHJvcGVydGllcy5zZXQob2JqZWN0LG1hcCk7fXJldHVybiBtYXA7fWZ1bmN0aW9uIHJlbW92ZShvYmplY3Qpe3Byb3BlcnRpZXMuZGVsZXRlKG9iamVjdCk7fWZ1bmN0aW9uIHVwZGF0ZShvYmplY3Qsa2V5LHZhbHVlKXtwcm9wZXJ0aWVzLmdldChvYmplY3QpW2tleV09dmFsdWU7fWZ1bmN0aW9uIGRpc3Bvc2UoKXtwcm9wZXJ0aWVzPW5ldyBXZWFrTWFwKCk7fXJldHVybiB7Z2V0OmdldCxyZW1vdmU6cmVtb3ZlLHVwZGF0ZTp1cGRhdGUsZGlzcG9zZTpkaXNwb3NlfTt9ZnVuY3Rpb24gcGFpbnRlclNvcnRTdGFibGUoYSxiKXtpZihhLmdyb3VwT3JkZXIhPT1iLmdyb3VwT3JkZXIpe3JldHVybiBhLmdyb3VwT3JkZXItYi5ncm91cE9yZGVyO31lbHNlIGlmKGEucmVuZGVyT3JkZXIhPT1iLnJlbmRlck9yZGVyKXtyZXR1cm4gYS5yZW5kZXJPcmRlci1iLnJlbmRlck9yZGVyO31lbHNlIGlmKGEucHJvZ3JhbSE9PWIucHJvZ3JhbSl7cmV0dXJuIGEucHJvZ3JhbS5pZC1iLnByb2dyYW0uaWQ7fWVsc2UgaWYoYS5tYXRlcmlhbC5pZCE9PWIubWF0ZXJpYWwuaWQpe3JldHVybiBhLm1hdGVyaWFsLmlkLWIubWF0ZXJpYWwuaWQ7fWVsc2UgaWYoYS56IT09Yi56KXtyZXR1cm4gYS56LWIuejt9ZWxzZSB7cmV0dXJuIGEuaWQtYi5pZDt9fWZ1bmN0aW9uIHJldmVyc2VQYWludGVyU29ydFN0YWJsZShhLGIpe2lmKGEuZ3JvdXBPcmRlciE9PWIuZ3JvdXBPcmRlcil7cmV0dXJuIGEuZ3JvdXBPcmRlci1iLmdyb3VwT3JkZXI7fWVsc2UgaWYoYS5yZW5kZXJPcmRlciE9PWIucmVuZGVyT3JkZXIpe3JldHVybiBhLnJlbmRlck9yZGVyLWIucmVuZGVyT3JkZXI7fWVsc2UgaWYoYS56IT09Yi56KXtyZXR1cm4gYi56LWEuejt9ZWxzZSB7cmV0dXJuIGEuaWQtYi5pZDt9fWZ1bmN0aW9uIFdlYkdMUmVuZGVyTGlzdChwcm9wZXJ0aWVzKXtjb25zdCByZW5kZXJJdGVtcz1bXTtsZXQgcmVuZGVySXRlbXNJbmRleD0wO2NvbnN0IG9wYXF1ZT1bXTtjb25zdCB0cmFuc21pc3NpdmU9W107Y29uc3QgdHJhbnNwYXJlbnQ9W107Y29uc3QgZGVmYXVsdFByb2dyYW09e2lkOi0xfTtmdW5jdGlvbiBpbml0KCl7cmVuZGVySXRlbXNJbmRleD0wO29wYXF1ZS5sZW5ndGg9MDt0cmFuc21pc3NpdmUubGVuZ3RoPTA7dHJhbnNwYXJlbnQubGVuZ3RoPTA7fWZ1bmN0aW9uIGdldE5leHRSZW5kZXJJdGVtKG9iamVjdCxnZW9tZXRyeSxtYXRlcmlhbCxncm91cE9yZGVyLHosZ3JvdXApe2xldCByZW5kZXJJdGVtPXJlbmRlckl0ZW1zW3JlbmRlckl0ZW1zSW5kZXhdO2NvbnN0IG1hdGVyaWFsUHJvcGVydGllcz1wcm9wZXJ0aWVzLmdldChtYXRlcmlhbCk7aWYocmVuZGVySXRlbT09PXVuZGVmaW5lZCl7cmVuZGVySXRlbT17aWQ6b2JqZWN0LmlkLG9iamVjdDpvYmplY3QsZ2VvbWV0cnk6Z2VvbWV0cnksbWF0ZXJpYWw6bWF0ZXJpYWwscHJvZ3JhbTptYXRlcmlhbFByb3BlcnRpZXMucHJvZ3JhbXx8ZGVmYXVsdFByb2dyYW0sZ3JvdXBPcmRlcjpncm91cE9yZGVyLHJlbmRlck9yZGVyOm9iamVjdC5yZW5kZXJPcmRlcix6OnosZ3JvdXA6Z3JvdXB9O3JlbmRlckl0ZW1zW3JlbmRlckl0ZW1zSW5kZXhdPXJlbmRlckl0ZW07fWVsc2Uge3JlbmRlckl0ZW0uaWQ9b2JqZWN0LmlkO3JlbmRlckl0ZW0ub2JqZWN0PW9iamVjdDtyZW5kZXJJdGVtLmdlb21ldHJ5PWdlb21ldHJ5O3JlbmRlckl0ZW0ubWF0ZXJpYWw9bWF0ZXJpYWw7cmVuZGVySXRlbS5wcm9ncmFtPW1hdGVyaWFsUHJvcGVydGllcy5wcm9ncmFtfHxkZWZhdWx0UHJvZ3JhbTtyZW5kZXJJdGVtLmdyb3VwT3JkZXI9Z3JvdXBPcmRlcjtyZW5kZXJJdGVtLnJlbmRlck9yZGVyPW9iamVjdC5yZW5kZXJPcmRlcjtyZW5kZXJJdGVtLno9ejtyZW5kZXJJdGVtLmdyb3VwPWdyb3VwO31yZW5kZXJJdGVtc0luZGV4Kys7cmV0dXJuIHJlbmRlckl0ZW07fWZ1bmN0aW9uIHB1c2gob2JqZWN0LGdlb21ldHJ5LG1hdGVyaWFsLGdyb3VwT3JkZXIseixncm91cCl7Y29uc3QgcmVuZGVySXRlbT1nZXROZXh0UmVuZGVySXRlbShvYmplY3QsZ2VvbWV0cnksbWF0ZXJpYWwsZ3JvdXBPcmRlcix6LGdyb3VwKTtpZihtYXRlcmlhbC50cmFuc21pc3Npb24+MC4wKXt0cmFuc21pc3NpdmUucHVzaChyZW5kZXJJdGVtKTt9ZWxzZSBpZihtYXRlcmlhbC50cmFuc3BhcmVudD09PXRydWUpe3RyYW5zcGFyZW50LnB1c2gocmVuZGVySXRlbSk7fWVsc2Uge29wYXF1ZS5wdXNoKHJlbmRlckl0ZW0pO319ZnVuY3Rpb24gdW5zaGlmdChvYmplY3QsZ2VvbWV0cnksbWF0ZXJpYWwsZ3JvdXBPcmRlcix6LGdyb3VwKXtjb25zdCByZW5kZXJJdGVtPWdldE5leHRSZW5kZXJJdGVtKG9iamVjdCxnZW9tZXRyeSxtYXRlcmlhbCxncm91cE9yZGVyLHosZ3JvdXApO2lmKG1hdGVyaWFsLnRyYW5zbWlzc2lvbj4wLjApe3RyYW5zbWlzc2l2ZS51bnNoaWZ0KHJlbmRlckl0ZW0pO31lbHNlIGlmKG1hdGVyaWFsLnRyYW5zcGFyZW50PT09dHJ1ZSl7dHJhbnNwYXJlbnQudW5zaGlmdChyZW5kZXJJdGVtKTt9ZWxzZSB7b3BhcXVlLnVuc2hpZnQocmVuZGVySXRlbSk7fX1mdW5jdGlvbiBzb3J0KGN1c3RvbU9wYXF1ZVNvcnQsY3VzdG9tVHJhbnNwYXJlbnRTb3J0KXtpZihvcGFxdWUubGVuZ3RoPjEpb3BhcXVlLnNvcnQoY3VzdG9tT3BhcXVlU29ydHx8cGFpbnRlclNvcnRTdGFibGUpO2lmKHRyYW5zbWlzc2l2ZS5sZW5ndGg+MSl0cmFuc21pc3NpdmUuc29ydChjdXN0b21UcmFuc3BhcmVudFNvcnR8fHJldmVyc2VQYWludGVyU29ydFN0YWJsZSk7aWYodHJhbnNwYXJlbnQubGVuZ3RoPjEpdHJhbnNwYXJlbnQuc29ydChjdXN0b21UcmFuc3BhcmVudFNvcnR8fHJldmVyc2VQYWludGVyU29ydFN0YWJsZSk7fWZ1bmN0aW9uIGZpbmlzaCgpey8vIENsZWFyIHJlZmVyZW5jZXMgZnJvbSBpbmFjdGl2ZSByZW5kZXJJdGVtcyBpbiB0aGUgbGlzdAoJZm9yKGxldCBpPXJlbmRlckl0ZW1zSW5kZXgsaWw9cmVuZGVySXRlbXMubGVuZ3RoO2k8aWw7aSsrKXtjb25zdCByZW5kZXJJdGVtPXJlbmRlckl0ZW1zW2ldO2lmKHJlbmRlckl0ZW0uaWQ9PT1udWxsKWJyZWFrO3JlbmRlckl0ZW0uaWQ9bnVsbDtyZW5kZXJJdGVtLm9iamVjdD1udWxsO3JlbmRlckl0ZW0uZ2VvbWV0cnk9bnVsbDtyZW5kZXJJdGVtLm1hdGVyaWFsPW51bGw7cmVuZGVySXRlbS5wcm9ncmFtPW51bGw7cmVuZGVySXRlbS5ncm91cD1udWxsO319cmV0dXJuIHtvcGFxdWU6b3BhcXVlLHRyYW5zbWlzc2l2ZTp0cmFuc21pc3NpdmUsdHJhbnNwYXJlbnQ6dHJhbnNwYXJlbnQsaW5pdDppbml0LHB1c2g6cHVzaCx1bnNoaWZ0OnVuc2hpZnQsZmluaXNoOmZpbmlzaCxzb3J0OnNvcnR9O31mdW5jdGlvbiBXZWJHTFJlbmRlckxpc3RzKHByb3BlcnRpZXMpe2xldCBsaXN0cz1uZXcgV2Vha01hcCgpO2Z1bmN0aW9uIGdldChzY2VuZSxyZW5kZXJDYWxsRGVwdGgpe2xldCBsaXN0O2lmKGxpc3RzLmhhcyhzY2VuZSk9PT1mYWxzZSl7bGlzdD1uZXcgV2ViR0xSZW5kZXJMaXN0KHByb3BlcnRpZXMpO2xpc3RzLnNldChzY2VuZSxbbGlzdF0pO31lbHNlIHtpZihyZW5kZXJDYWxsRGVwdGg+PWxpc3RzLmdldChzY2VuZSkubGVuZ3RoKXtsaXN0PW5ldyBXZWJHTFJlbmRlckxpc3QocHJvcGVydGllcyk7bGlzdHMuZ2V0KHNjZW5lKS5wdXNoKGxpc3QpO31lbHNlIHtsaXN0PWxpc3RzLmdldChzY2VuZSlbcmVuZGVyQ2FsbERlcHRoXTt9fXJldHVybiBsaXN0O31mdW5jdGlvbiBkaXNwb3NlKCl7bGlzdHM9bmV3IFdlYWtNYXAoKTt9cmV0dXJuIHtnZXQ6Z2V0LGRpc3Bvc2U6ZGlzcG9zZX07fWZ1bmN0aW9uIFVuaWZvcm1zQ2FjaGUoKXtjb25zdCBsaWdodHM9e307cmV0dXJuIHtnZXQ6ZnVuY3Rpb24obGlnaHQpe2lmKGxpZ2h0c1tsaWdodC5pZF0hPT11bmRlZmluZWQpe3JldHVybiBsaWdodHNbbGlnaHQuaWRdO31sZXQgdW5pZm9ybXM7c3dpdGNoKGxpZ2h0LnR5cGUpe2Nhc2UnRGlyZWN0aW9uYWxMaWdodCc6dW5pZm9ybXM9e2RpcmVjdGlvbjpuZXcgVmVjdG9yMygpLGNvbG9yOm5ldyBDb2xvcigpfTticmVhaztjYXNlJ1Nwb3RMaWdodCc6dW5pZm9ybXM9e3Bvc2l0aW9uOm5ldyBWZWN0b3IzKCksZGlyZWN0aW9uOm5ldyBWZWN0b3IzKCksY29sb3I6bmV3IENvbG9yKCksZGlzdGFuY2U6MCxjb25lQ29zOjAscGVudW1icmFDb3M6MCxkZWNheTowfTticmVhaztjYXNlJ1BvaW50TGlnaHQnOnVuaWZvcm1zPXtwb3NpdGlvbjpuZXcgVmVjdG9yMygpLGNvbG9yOm5ldyBDb2xvcigpLGRpc3RhbmNlOjAsZGVjYXk6MH07YnJlYWs7Y2FzZSdIZW1pc3BoZXJlTGlnaHQnOnVuaWZvcm1zPXtkaXJlY3Rpb246bmV3IFZlY3RvcjMoKSxza3lDb2xvcjpuZXcgQ29sb3IoKSxncm91bmRDb2xvcjpuZXcgQ29sb3IoKX07YnJlYWs7Y2FzZSdSZWN0QXJlYUxpZ2h0Jzp1bmlmb3Jtcz17Y29sb3I6bmV3IENvbG9yKCkscG9zaXRpb246bmV3IFZlY3RvcjMoKSxoYWxmV2lkdGg6bmV3IFZlY3RvcjMoKSxoYWxmSGVpZ2h0Om5ldyBWZWN0b3IzKCl9O2JyZWFrO31saWdodHNbbGlnaHQuaWRdPXVuaWZvcm1zO3JldHVybiB1bmlmb3Jtczt9fTt9ZnVuY3Rpb24gU2hhZG93VW5pZm9ybXNDYWNoZSgpe2NvbnN0IGxpZ2h0cz17fTtyZXR1cm4ge2dldDpmdW5jdGlvbihsaWdodCl7aWYobGlnaHRzW2xpZ2h0LmlkXSE9PXVuZGVmaW5lZCl7cmV0dXJuIGxpZ2h0c1tsaWdodC5pZF07fWxldCB1bmlmb3Jtcztzd2l0Y2gobGlnaHQudHlwZSl7Y2FzZSdEaXJlY3Rpb25hbExpZ2h0Jzp1bmlmb3Jtcz17c2hhZG93QmlhczowLHNoYWRvd05vcm1hbEJpYXM6MCxzaGFkb3dSYWRpdXM6MSxzaGFkb3dNYXBTaXplOm5ldyBWZWN0b3IyKCl9O2JyZWFrO2Nhc2UnU3BvdExpZ2h0Jzp1bmlmb3Jtcz17c2hhZG93QmlhczowLHNoYWRvd05vcm1hbEJpYXM6MCxzaGFkb3dSYWRpdXM6MSxzaGFkb3dNYXBTaXplOm5ldyBWZWN0b3IyKCl9O2JyZWFrO2Nhc2UnUG9pbnRMaWdodCc6dW5pZm9ybXM9e3NoYWRvd0JpYXM6MCxzaGFkb3dOb3JtYWxCaWFzOjAsc2hhZG93UmFkaXVzOjEsc2hhZG93TWFwU2l6ZTpuZXcgVmVjdG9yMigpLHNoYWRvd0NhbWVyYU5lYXI6MSxzaGFkb3dDYW1lcmFGYXI6MTAwMH07YnJlYWs7Ly8gVE9ETyAoYWJlbG5hdGlvbik6IHNldCBSZWN0QXJlYUxpZ2h0IHNoYWRvdyB1bmlmb3JtcwoJfWxpZ2h0c1tsaWdodC5pZF09dW5pZm9ybXM7cmV0dXJuIHVuaWZvcm1zO319O31sZXQgbmV4dFZlcnNpb249MDtmdW5jdGlvbiBzaGFkb3dDYXN0aW5nTGlnaHRzRmlyc3QobGlnaHRBLGxpZ2h0Qil7cmV0dXJuIChsaWdodEIuY2FzdFNoYWRvdz8xOjApLShsaWdodEEuY2FzdFNoYWRvdz8xOjApO31mdW5jdGlvbiBXZWJHTExpZ2h0cyhleHRlbnNpb25zLGNhcGFiaWxpdGllcyl7Y29uc3QgY2FjaGU9bmV3IFVuaWZvcm1zQ2FjaGUoKTtjb25zdCBzaGFkb3dDYWNoZT1TaGFkb3dVbmlmb3Jtc0NhY2hlKCk7Y29uc3Qgc3RhdGU9e3ZlcnNpb246MCxoYXNoOntkaXJlY3Rpb25hbExlbmd0aDotMSxwb2ludExlbmd0aDotMSxzcG90TGVuZ3RoOi0xLHJlY3RBcmVhTGVuZ3RoOi0xLGhlbWlMZW5ndGg6LTEsbnVtRGlyZWN0aW9uYWxTaGFkb3dzOi0xLG51bVBvaW50U2hhZG93czotMSxudW1TcG90U2hhZG93czotMX0sYW1iaWVudDpbMCwwLDBdLHByb2JlOltdLGRpcmVjdGlvbmFsOltdLGRpcmVjdGlvbmFsU2hhZG93OltdLGRpcmVjdGlvbmFsU2hhZG93TWFwOltdLGRpcmVjdGlvbmFsU2hhZG93TWF0cml4OltdLHNwb3Q6W10sc3BvdFNoYWRvdzpbXSxzcG90U2hhZG93TWFwOltdLHNwb3RTaGFkb3dNYXRyaXg6W10scmVjdEFyZWE6W10scmVjdEFyZWFMVEMxOm51bGwscmVjdEFyZWFMVEMyOm51bGwscG9pbnQ6W10scG9pbnRTaGFkb3c6W10scG9pbnRTaGFkb3dNYXA6W10scG9pbnRTaGFkb3dNYXRyaXg6W10saGVtaTpbXX07Zm9yKGxldCBpPTA7aTw5O2krKylzdGF0ZS5wcm9iZS5wdXNoKG5ldyBWZWN0b3IzKCkpO2NvbnN0IHZlY3RvcjM9bmV3IFZlY3RvcjMoKTtjb25zdCBtYXRyaXg0PW5ldyBNYXRyaXg0KCk7Y29uc3QgbWF0cml4NDI9bmV3IE1hdHJpeDQoKTtmdW5jdGlvbiBzZXR1cChsaWdodHMscGh5c2ljYWxseUNvcnJlY3RMaWdodHMpe2xldCByPTAsZz0wLGI9MDtmb3IobGV0IGk9MDtpPDk7aSsrKXN0YXRlLnByb2JlW2ldLnNldCgwLDAsMCk7bGV0IGRpcmVjdGlvbmFsTGVuZ3RoPTA7bGV0IHBvaW50TGVuZ3RoPTA7bGV0IHNwb3RMZW5ndGg9MDtsZXQgcmVjdEFyZWFMZW5ndGg9MDtsZXQgaGVtaUxlbmd0aD0wO2xldCBudW1EaXJlY3Rpb25hbFNoYWRvd3M9MDtsZXQgbnVtUG9pbnRTaGFkb3dzPTA7bGV0IG51bVNwb3RTaGFkb3dzPTA7bGlnaHRzLnNvcnQoc2hhZG93Q2FzdGluZ0xpZ2h0c0ZpcnN0KTsvLyBhcnRpc3QtZnJpZW5kbHkgbGlnaHQgaW50ZW5zaXR5IHNjYWxpbmcgZmFjdG9yCgljb25zdCBzY2FsZUZhY3Rvcj1waHlzaWNhbGx5Q29ycmVjdExpZ2h0cyE9PXRydWU/TWF0aC5QSToxO2ZvcihsZXQgaT0wLGw9bGlnaHRzLmxlbmd0aDtpPGw7aSsrKXtjb25zdCBsaWdodD1saWdodHNbaV07Y29uc3QgY29sb3I9bGlnaHQuY29sb3I7Y29uc3QgaW50ZW5zaXR5PWxpZ2h0LmludGVuc2l0eTtjb25zdCBkaXN0YW5jZT1saWdodC5kaXN0YW5jZTtjb25zdCBzaGFkb3dNYXA9bGlnaHQuc2hhZG93JiZsaWdodC5zaGFkb3cubWFwP2xpZ2h0LnNoYWRvdy5tYXAudGV4dHVyZTpudWxsO2lmKGxpZ2h0LmlzQW1iaWVudExpZ2h0KXtyKz1jb2xvci5yKmludGVuc2l0eSpzY2FsZUZhY3RvcjtnKz1jb2xvci5nKmludGVuc2l0eSpzY2FsZUZhY3RvcjtiKz1jb2xvci5iKmludGVuc2l0eSpzY2FsZUZhY3Rvcjt9ZWxzZSBpZihsaWdodC5pc0xpZ2h0UHJvYmUpe2ZvcihsZXQgaj0wO2o8OTtqKyspe3N0YXRlLnByb2JlW2pdLmFkZFNjYWxlZFZlY3RvcihsaWdodC5zaC5jb2VmZmljaWVudHNbal0saW50ZW5zaXR5KTt9fWVsc2UgaWYobGlnaHQuaXNEaXJlY3Rpb25hbExpZ2h0KXtjb25zdCB1bmlmb3Jtcz1jYWNoZS5nZXQobGlnaHQpO3VuaWZvcm1zLmNvbG9yLmNvcHkobGlnaHQuY29sb3IpLm11bHRpcGx5U2NhbGFyKGxpZ2h0LmludGVuc2l0eSpzY2FsZUZhY3Rvcik7aWYobGlnaHQuY2FzdFNoYWRvdyl7Y29uc3Qgc2hhZG93PWxpZ2h0LnNoYWRvdztjb25zdCBzaGFkb3dVbmlmb3Jtcz1zaGFkb3dDYWNoZS5nZXQobGlnaHQpO3NoYWRvd1VuaWZvcm1zLnNoYWRvd0JpYXM9c2hhZG93LmJpYXM7c2hhZG93VW5pZm9ybXMuc2hhZG93Tm9ybWFsQmlhcz1zaGFkb3cubm9ybWFsQmlhcztzaGFkb3dVbmlmb3Jtcy5zaGFkb3dSYWRpdXM9c2hhZG93LnJhZGl1cztzaGFkb3dVbmlmb3Jtcy5zaGFkb3dNYXBTaXplPXNoYWRvdy5tYXBTaXplO3N0YXRlLmRpcmVjdGlvbmFsU2hhZG93W2RpcmVjdGlvbmFsTGVuZ3RoXT1zaGFkb3dVbmlmb3JtcztzdGF0ZS5kaXJlY3Rpb25hbFNoYWRvd01hcFtkaXJlY3Rpb25hbExlbmd0aF09c2hhZG93TWFwO3N0YXRlLmRpcmVjdGlvbmFsU2hhZG93TWF0cml4W2RpcmVjdGlvbmFsTGVuZ3RoXT1saWdodC5zaGFkb3cubWF0cml4O251bURpcmVjdGlvbmFsU2hhZG93cysrO31zdGF0ZS5kaXJlY3Rpb25hbFtkaXJlY3Rpb25hbExlbmd0aF09dW5pZm9ybXM7ZGlyZWN0aW9uYWxMZW5ndGgrKzt9ZWxzZSBpZihsaWdodC5pc1Nwb3RMaWdodCl7Y29uc3QgdW5pZm9ybXM9Y2FjaGUuZ2V0KGxpZ2h0KTt1bmlmb3Jtcy5wb3NpdGlvbi5zZXRGcm9tTWF0cml4UG9zaXRpb24obGlnaHQubWF0cml4V29ybGQpO3VuaWZvcm1zLmNvbG9yLmNvcHkoY29sb3IpLm11bHRpcGx5U2NhbGFyKGludGVuc2l0eSpzY2FsZUZhY3Rvcik7dW5pZm9ybXMuZGlzdGFuY2U9ZGlzdGFuY2U7dW5pZm9ybXMuY29uZUNvcz1NYXRoLmNvcyhsaWdodC5hbmdsZSk7dW5pZm9ybXMucGVudW1icmFDb3M9TWF0aC5jb3MobGlnaHQuYW5nbGUqKDEtbGlnaHQucGVudW1icmEpKTt1bmlmb3Jtcy5kZWNheT1saWdodC5kZWNheTtpZihsaWdodC5jYXN0U2hhZG93KXtjb25zdCBzaGFkb3c9bGlnaHQuc2hhZG93O2NvbnN0IHNoYWRvd1VuaWZvcm1zPXNoYWRvd0NhY2hlLmdldChsaWdodCk7c2hhZG93VW5pZm9ybXMuc2hhZG93Qmlhcz1zaGFkb3cuYmlhcztzaGFkb3dVbmlmb3Jtcy5zaGFkb3dOb3JtYWxCaWFzPXNoYWRvdy5ub3JtYWxCaWFzO3NoYWRvd1VuaWZvcm1zLnNoYWRvd1JhZGl1cz1zaGFkb3cucmFkaXVzO3NoYWRvd1VuaWZvcm1zLnNoYWRvd01hcFNpemU9c2hhZG93Lm1hcFNpemU7c3RhdGUuc3BvdFNoYWRvd1tzcG90TGVuZ3RoXT1zaGFkb3dVbmlmb3JtcztzdGF0ZS5zcG90U2hhZG93TWFwW3Nwb3RMZW5ndGhdPXNoYWRvd01hcDtzdGF0ZS5zcG90U2hhZG93TWF0cml4W3Nwb3RMZW5ndGhdPWxpZ2h0LnNoYWRvdy5tYXRyaXg7bnVtU3BvdFNoYWRvd3MrKzt9c3RhdGUuc3BvdFtzcG90TGVuZ3RoXT11bmlmb3JtcztzcG90TGVuZ3RoKys7fWVsc2UgaWYobGlnaHQuaXNSZWN0QXJlYUxpZ2h0KXtjb25zdCB1bmlmb3Jtcz1jYWNoZS5nZXQobGlnaHQpOy8vIChhKSBpbnRlbnNpdHkgaXMgdGhlIHRvdGFsIHZpc2libGUgbGlnaHQgZW1pdHRlZAoJLy91bmlmb3Jtcy5jb2xvci5jb3B5KCBjb2xvciApLm11bHRpcGx5U2NhbGFyKCBpbnRlbnNpdHkgLyAoIGxpZ2h0LndpZHRoICogbGlnaHQuaGVpZ2h0ICogTWF0aC5QSSApICk7CgkvLyAoYikgaW50ZW5zaXR5IGlzIHRoZSBicmlnaHRuZXNzIG9mIHRoZSBsaWdodAoJdW5pZm9ybXMuY29sb3IuY29weShjb2xvcikubXVsdGlwbHlTY2FsYXIoaW50ZW5zaXR5KTt1bmlmb3Jtcy5oYWxmV2lkdGguc2V0KGxpZ2h0LndpZHRoKjAuNSwwLjAsMC4wKTt1bmlmb3Jtcy5oYWxmSGVpZ2h0LnNldCgwLjAsbGlnaHQuaGVpZ2h0KjAuNSwwLjApO3N0YXRlLnJlY3RBcmVhW3JlY3RBcmVhTGVuZ3RoXT11bmlmb3JtcztyZWN0QXJlYUxlbmd0aCsrO31lbHNlIGlmKGxpZ2h0LmlzUG9pbnRMaWdodCl7Y29uc3QgdW5pZm9ybXM9Y2FjaGUuZ2V0KGxpZ2h0KTt1bmlmb3Jtcy5jb2xvci5jb3B5KGxpZ2h0LmNvbG9yKS5tdWx0aXBseVNjYWxhcihsaWdodC5pbnRlbnNpdHkqc2NhbGVGYWN0b3IpO3VuaWZvcm1zLmRpc3RhbmNlPWxpZ2h0LmRpc3RhbmNlO3VuaWZvcm1zLmRlY2F5PWxpZ2h0LmRlY2F5O2lmKGxpZ2h0LmNhc3RTaGFkb3cpe2NvbnN0IHNoYWRvdz1saWdodC5zaGFkb3c7Y29uc3Qgc2hhZG93VW5pZm9ybXM9c2hhZG93Q2FjaGUuZ2V0KGxpZ2h0KTtzaGFkb3dVbmlmb3Jtcy5zaGFkb3dCaWFzPXNoYWRvdy5iaWFzO3NoYWRvd1VuaWZvcm1zLnNoYWRvd05vcm1hbEJpYXM9c2hhZG93Lm5vcm1hbEJpYXM7c2hhZG93VW5pZm9ybXMuc2hhZG93UmFkaXVzPXNoYWRvdy5yYWRpdXM7c2hhZG93VW5pZm9ybXMuc2hhZG93TWFwU2l6ZT1zaGFkb3cubWFwU2l6ZTtzaGFkb3dVbmlmb3Jtcy5zaGFkb3dDYW1lcmFOZWFyPXNoYWRvdy5jYW1lcmEubmVhcjtzaGFkb3dVbmlmb3Jtcy5zaGFkb3dDYW1lcmFGYXI9c2hhZG93LmNhbWVyYS5mYXI7c3RhdGUucG9pbnRTaGFkb3dbcG9pbnRMZW5ndGhdPXNoYWRvd1VuaWZvcm1zO3N0YXRlLnBvaW50U2hhZG93TWFwW3BvaW50TGVuZ3RoXT1zaGFkb3dNYXA7c3RhdGUucG9pbnRTaGFkb3dNYXRyaXhbcG9pbnRMZW5ndGhdPWxpZ2h0LnNoYWRvdy5tYXRyaXg7bnVtUG9pbnRTaGFkb3dzKys7fXN0YXRlLnBvaW50W3BvaW50TGVuZ3RoXT11bmlmb3Jtcztwb2ludExlbmd0aCsrO31lbHNlIGlmKGxpZ2h0LmlzSGVtaXNwaGVyZUxpZ2h0KXtjb25zdCB1bmlmb3Jtcz1jYWNoZS5nZXQobGlnaHQpO3VuaWZvcm1zLnNreUNvbG9yLmNvcHkobGlnaHQuY29sb3IpLm11bHRpcGx5U2NhbGFyKGludGVuc2l0eSpzY2FsZUZhY3Rvcik7dW5pZm9ybXMuZ3JvdW5kQ29sb3IuY29weShsaWdodC5ncm91bmRDb2xvcikubXVsdGlwbHlTY2FsYXIoaW50ZW5zaXR5KnNjYWxlRmFjdG9yKTtzdGF0ZS5oZW1pW2hlbWlMZW5ndGhdPXVuaWZvcm1zO2hlbWlMZW5ndGgrKzt9fWlmKHJlY3RBcmVhTGVuZ3RoPjApe2lmKGNhcGFiaWxpdGllcy5pc1dlYkdMMil7Ly8gV2ViR0wgMgoJc3RhdGUucmVjdEFyZWFMVEMxPVVuaWZvcm1zTGliLkxUQ19GTE9BVF8xO3N0YXRlLnJlY3RBcmVhTFRDMj1Vbmlmb3Jtc0xpYi5MVENfRkxPQVRfMjt9ZWxzZSB7Ly8gV2ViR0wgMQoJaWYoZXh0ZW5zaW9ucy5oYXMoJ09FU190ZXh0dXJlX2Zsb2F0X2xpbmVhcicpPT09dHJ1ZSl7c3RhdGUucmVjdEFyZWFMVEMxPVVuaWZvcm1zTGliLkxUQ19GTE9BVF8xO3N0YXRlLnJlY3RBcmVhTFRDMj1Vbmlmb3Jtc0xpYi5MVENfRkxPQVRfMjt9ZWxzZSBpZihleHRlbnNpb25zLmhhcygnT0VTX3RleHR1cmVfaGFsZl9mbG9hdF9saW5lYXInKT09PXRydWUpe3N0YXRlLnJlY3RBcmVhTFRDMT1Vbmlmb3Jtc0xpYi5MVENfSEFMRl8xO3N0YXRlLnJlY3RBcmVhTFRDMj1Vbmlmb3Jtc0xpYi5MVENfSEFMRl8yO31lbHNlIHtjb25zb2xlLmVycm9yKCdUSFJFRS5XZWJHTFJlbmRlcmVyOiBVbmFibGUgdG8gdXNlIFJlY3RBcmVhTGlnaHQuIE1pc3NpbmcgV2ViR0wgZXh0ZW5zaW9ucy4nKTt9fX1zdGF0ZS5hbWJpZW50WzBdPXI7c3RhdGUuYW1iaWVudFsxXT1nO3N0YXRlLmFtYmllbnRbMl09Yjtjb25zdCBoYXNoPXN0YXRlLmhhc2g7aWYoaGFzaC5kaXJlY3Rpb25hbExlbmd0aCE9PWRpcmVjdGlvbmFsTGVuZ3RofHxoYXNoLnBvaW50TGVuZ3RoIT09cG9pbnRMZW5ndGh8fGhhc2guc3BvdExlbmd0aCE9PXNwb3RMZW5ndGh8fGhhc2gucmVjdEFyZWFMZW5ndGghPT1yZWN0QXJlYUxlbmd0aHx8aGFzaC5oZW1pTGVuZ3RoIT09aGVtaUxlbmd0aHx8aGFzaC5udW1EaXJlY3Rpb25hbFNoYWRvd3MhPT1udW1EaXJlY3Rpb25hbFNoYWRvd3N8fGhhc2gubnVtUG9pbnRTaGFkb3dzIT09bnVtUG9pbnRTaGFkb3dzfHxoYXNoLm51bVNwb3RTaGFkb3dzIT09bnVtU3BvdFNoYWRvd3Mpe3N0YXRlLmRpcmVjdGlvbmFsLmxlbmd0aD1kaXJlY3Rpb25hbExlbmd0aDtzdGF0ZS5zcG90Lmxlbmd0aD1zcG90TGVuZ3RoO3N0YXRlLnJlY3RBcmVhLmxlbmd0aD1yZWN0QXJlYUxlbmd0aDtzdGF0ZS5wb2ludC5sZW5ndGg9cG9pbnRMZW5ndGg7c3RhdGUuaGVtaS5sZW5ndGg9aGVtaUxlbmd0aDtzdGF0ZS5kaXJlY3Rpb25hbFNoYWRvdy5sZW5ndGg9bnVtRGlyZWN0aW9uYWxTaGFkb3dzO3N0YXRlLmRpcmVjdGlvbmFsU2hhZG93TWFwLmxlbmd0aD1udW1EaXJlY3Rpb25hbFNoYWRvd3M7c3RhdGUucG9pbnRTaGFkb3cubGVuZ3RoPW51bVBvaW50U2hhZG93cztzdGF0ZS5wb2ludFNoYWRvd01hcC5sZW5ndGg9bnVtUG9pbnRTaGFkb3dzO3N0YXRlLnNwb3RTaGFkb3cubGVuZ3RoPW51bVNwb3RTaGFkb3dzO3N0YXRlLnNwb3RTaGFkb3dNYXAubGVuZ3RoPW51bVNwb3RTaGFkb3dzO3N0YXRlLmRpcmVjdGlvbmFsU2hhZG93TWF0cml4Lmxlbmd0aD1udW1EaXJlY3Rpb25hbFNoYWRvd3M7c3RhdGUucG9pbnRTaGFkb3dNYXRyaXgubGVuZ3RoPW51bVBvaW50U2hhZG93cztzdGF0ZS5zcG90U2hhZG93TWF0cml4Lmxlbmd0aD1udW1TcG90U2hhZG93cztoYXNoLmRpcmVjdGlvbmFsTGVuZ3RoPWRpcmVjdGlvbmFsTGVuZ3RoO2hhc2gucG9pbnRMZW5ndGg9cG9pbnRMZW5ndGg7aGFzaC5zcG90TGVuZ3RoPXNwb3RMZW5ndGg7aGFzaC5yZWN0QXJlYUxlbmd0aD1yZWN0QXJlYUxlbmd0aDtoYXNoLmhlbWlMZW5ndGg9aGVtaUxlbmd0aDtoYXNoLm51bURpcmVjdGlvbmFsU2hhZG93cz1udW1EaXJlY3Rpb25hbFNoYWRvd3M7aGFzaC5udW1Qb2ludFNoYWRvd3M9bnVtUG9pbnRTaGFkb3dzO2hhc2gubnVtU3BvdFNoYWRvd3M9bnVtU3BvdFNoYWRvd3M7c3RhdGUudmVyc2lvbj1uZXh0VmVyc2lvbisrO319ZnVuY3Rpb24gc2V0dXBWaWV3KGxpZ2h0cyxjYW1lcmEpe2xldCBkaXJlY3Rpb25hbExlbmd0aD0wO2xldCBwb2ludExlbmd0aD0wO2xldCBzcG90TGVuZ3RoPTA7bGV0IHJlY3RBcmVhTGVuZ3RoPTA7bGV0IGhlbWlMZW5ndGg9MDtjb25zdCB2aWV3TWF0cml4PWNhbWVyYS5tYXRyaXhXb3JsZEludmVyc2U7Zm9yKGxldCBpPTAsbD1saWdodHMubGVuZ3RoO2k8bDtpKyspe2NvbnN0IGxpZ2h0PWxpZ2h0c1tpXTtpZihsaWdodC5pc0RpcmVjdGlvbmFsTGlnaHQpe2NvbnN0IHVuaWZvcm1zPXN0YXRlLmRpcmVjdGlvbmFsW2RpcmVjdGlvbmFsTGVuZ3RoXTt1bmlmb3Jtcy5kaXJlY3Rpb24uc2V0RnJvbU1hdHJpeFBvc2l0aW9uKGxpZ2h0Lm1hdHJpeFdvcmxkKTt2ZWN0b3IzLnNldEZyb21NYXRyaXhQb3NpdGlvbihsaWdodC50YXJnZXQubWF0cml4V29ybGQpO3VuaWZvcm1zLmRpcmVjdGlvbi5zdWIodmVjdG9yMyk7dW5pZm9ybXMuZGlyZWN0aW9uLnRyYW5zZm9ybURpcmVjdGlvbih2aWV3TWF0cml4KTtkaXJlY3Rpb25hbExlbmd0aCsrO31lbHNlIGlmKGxpZ2h0LmlzU3BvdExpZ2h0KXtjb25zdCB1bmlmb3Jtcz1zdGF0ZS5zcG90W3Nwb3RMZW5ndGhdO3VuaWZvcm1zLnBvc2l0aW9uLnNldEZyb21NYXRyaXhQb3NpdGlvbihsaWdodC5tYXRyaXhXb3JsZCk7dW5pZm9ybXMucG9zaXRpb24uYXBwbHlNYXRyaXg0KHZpZXdNYXRyaXgpO3VuaWZvcm1zLmRpcmVjdGlvbi5zZXRGcm9tTWF0cml4UG9zaXRpb24obGlnaHQubWF0cml4V29ybGQpO3ZlY3RvcjMuc2V0RnJvbU1hdHJpeFBvc2l0aW9uKGxpZ2h0LnRhcmdldC5tYXRyaXhXb3JsZCk7dW5pZm9ybXMuZGlyZWN0aW9uLnN1Yih2ZWN0b3IzKTt1bmlmb3Jtcy5kaXJlY3Rpb24udHJhbnNmb3JtRGlyZWN0aW9uKHZpZXdNYXRyaXgpO3Nwb3RMZW5ndGgrKzt9ZWxzZSBpZihsaWdodC5pc1JlY3RBcmVhTGlnaHQpe2NvbnN0IHVuaWZvcm1zPXN0YXRlLnJlY3RBcmVhW3JlY3RBcmVhTGVuZ3RoXTt1bmlmb3Jtcy5wb3NpdGlvbi5zZXRGcm9tTWF0cml4UG9zaXRpb24obGlnaHQubWF0cml4V29ybGQpO3VuaWZvcm1zLnBvc2l0aW9uLmFwcGx5TWF0cml4NCh2aWV3TWF0cml4KTsvLyBleHRyYWN0IGxvY2FsIHJvdGF0aW9uIG9mIGxpZ2h0IHRvIGRlcml2ZSB3aWR0aC9oZWlnaHQgaGFsZiB2ZWN0b3JzCgltYXRyaXg0Mi5pZGVudGl0eSgpO21hdHJpeDQuY29weShsaWdodC5tYXRyaXhXb3JsZCk7bWF0cml4NC5wcmVtdWx0aXBseSh2aWV3TWF0cml4KTttYXRyaXg0Mi5leHRyYWN0Um90YXRpb24obWF0cml4NCk7dW5pZm9ybXMuaGFsZldpZHRoLnNldChsaWdodC53aWR0aCowLjUsMC4wLDAuMCk7dW5pZm9ybXMuaGFsZkhlaWdodC5zZXQoMC4wLGxpZ2h0LmhlaWdodCowLjUsMC4wKTt1bmlmb3Jtcy5oYWxmV2lkdGguYXBwbHlNYXRyaXg0KG1hdHJpeDQyKTt1bmlmb3Jtcy5oYWxmSGVpZ2h0LmFwcGx5TWF0cml4NChtYXRyaXg0Mik7cmVjdEFyZWFMZW5ndGgrKzt9ZWxzZSBpZihsaWdodC5pc1BvaW50TGlnaHQpe2NvbnN0IHVuaWZvcm1zPXN0YXRlLnBvaW50W3BvaW50TGVuZ3RoXTt1bmlmb3Jtcy5wb3NpdGlvbi5zZXRGcm9tTWF0cml4UG9zaXRpb24obGlnaHQubWF0cml4V29ybGQpO3VuaWZvcm1zLnBvc2l0aW9uLmFwcGx5TWF0cml4NCh2aWV3TWF0cml4KTtwb2ludExlbmd0aCsrO31lbHNlIGlmKGxpZ2h0LmlzSGVtaXNwaGVyZUxpZ2h0KXtjb25zdCB1bmlmb3Jtcz1zdGF0ZS5oZW1pW2hlbWlMZW5ndGhdO3VuaWZvcm1zLmRpcmVjdGlvbi5zZXRGcm9tTWF0cml4UG9zaXRpb24obGlnaHQubWF0cml4V29ybGQpO3VuaWZvcm1zLmRpcmVjdGlvbi50cmFuc2Zvcm1EaXJlY3Rpb24odmlld01hdHJpeCk7dW5pZm9ybXMuZGlyZWN0aW9uLm5vcm1hbGl6ZSgpO2hlbWlMZW5ndGgrKzt9fX1yZXR1cm4ge3NldHVwOnNldHVwLHNldHVwVmlldzpzZXR1cFZpZXcsc3RhdGU6c3RhdGV9O31mdW5jdGlvbiBXZWJHTFJlbmRlclN0YXRlKGV4dGVuc2lvbnMsY2FwYWJpbGl0aWVzKXtjb25zdCBsaWdodHM9bmV3IFdlYkdMTGlnaHRzKGV4dGVuc2lvbnMsY2FwYWJpbGl0aWVzKTtjb25zdCBsaWdodHNBcnJheT1bXTtjb25zdCBzaGFkb3dzQXJyYXk9W107ZnVuY3Rpb24gaW5pdCgpe2xpZ2h0c0FycmF5Lmxlbmd0aD0wO3NoYWRvd3NBcnJheS5sZW5ndGg9MDt9ZnVuY3Rpb24gcHVzaExpZ2h0KGxpZ2h0KXtsaWdodHNBcnJheS5wdXNoKGxpZ2h0KTt9ZnVuY3Rpb24gcHVzaFNoYWRvdyhzaGFkb3dMaWdodCl7c2hhZG93c0FycmF5LnB1c2goc2hhZG93TGlnaHQpO31mdW5jdGlvbiBzZXR1cExpZ2h0cyhwaHlzaWNhbGx5Q29ycmVjdExpZ2h0cyl7bGlnaHRzLnNldHVwKGxpZ2h0c0FycmF5LHBoeXNpY2FsbHlDb3JyZWN0TGlnaHRzKTt9ZnVuY3Rpb24gc2V0dXBMaWdodHNWaWV3KGNhbWVyYSl7bGlnaHRzLnNldHVwVmlldyhsaWdodHNBcnJheSxjYW1lcmEpO31jb25zdCBzdGF0ZT17bGlnaHRzQXJyYXk6bGlnaHRzQXJyYXksc2hhZG93c0FycmF5OnNoYWRvd3NBcnJheSxsaWdodHM6bGlnaHRzfTtyZXR1cm4ge2luaXQ6aW5pdCxzdGF0ZTpzdGF0ZSxzZXR1cExpZ2h0czpzZXR1cExpZ2h0cyxzZXR1cExpZ2h0c1ZpZXc6c2V0dXBMaWdodHNWaWV3LHB1c2hMaWdodDpwdXNoTGlnaHQscHVzaFNoYWRvdzpwdXNoU2hhZG93fTt9ZnVuY3Rpb24gV2ViR0xSZW5kZXJTdGF0ZXMoZXh0ZW5zaW9ucyxjYXBhYmlsaXRpZXMpe2xldCByZW5kZXJTdGF0ZXM9bmV3IFdlYWtNYXAoKTtmdW5jdGlvbiBnZXQoc2NlbmUscmVuZGVyQ2FsbERlcHRoKXtpZihyZW5kZXJDYWxsRGVwdGg9PT12b2lkIDApe3JlbmRlckNhbGxEZXB0aD0wO31sZXQgcmVuZGVyU3RhdGU7aWYocmVuZGVyU3RhdGVzLmhhcyhzY2VuZSk9PT1mYWxzZSl7cmVuZGVyU3RhdGU9bmV3IFdlYkdMUmVuZGVyU3RhdGUoZXh0ZW5zaW9ucyxjYXBhYmlsaXRpZXMpO3JlbmRlclN0YXRlcy5zZXQoc2NlbmUsW3JlbmRlclN0YXRlXSk7fWVsc2Uge2lmKHJlbmRlckNhbGxEZXB0aD49cmVuZGVyU3RhdGVzLmdldChzY2VuZSkubGVuZ3RoKXtyZW5kZXJTdGF0ZT1uZXcgV2ViR0xSZW5kZXJTdGF0ZShleHRlbnNpb25zLGNhcGFiaWxpdGllcyk7cmVuZGVyU3RhdGVzLmdldChzY2VuZSkucHVzaChyZW5kZXJTdGF0ZSk7fWVsc2Uge3JlbmRlclN0YXRlPXJlbmRlclN0YXRlcy5nZXQoc2NlbmUpW3JlbmRlckNhbGxEZXB0aF07fX1yZXR1cm4gcmVuZGVyU3RhdGU7fWZ1bmN0aW9uIGRpc3Bvc2UoKXtyZW5kZXJTdGF0ZXM9bmV3IFdlYWtNYXAoKTt9cmV0dXJuIHtnZXQ6Z2V0LGRpc3Bvc2U6ZGlzcG9zZX07fS8qKgoJICogcGFyYW1ldGVycyA9IHsKCSAqCgkgKiAgb3BhY2l0eTogPGZsb2F0PiwKCSAqCgkgKiAgbWFwOiBuZXcgVEhSRUUuVGV4dHVyZSggPEltYWdlPiApLAoJICoKCSAqICBhbHBoYU1hcDogbmV3IFRIUkVFLlRleHR1cmUoIDxJbWFnZT4gKSwKCSAqCgkgKiAgZGlzcGxhY2VtZW50TWFwOiBuZXcgVEhSRUUuVGV4dHVyZSggPEltYWdlPiApLAoJICogIGRpc3BsYWNlbWVudFNjYWxlOiA8ZmxvYXQ+LAoJICogIGRpc3BsYWNlbWVudEJpYXM6IDxmbG9hdD4sCgkgKgoJICogIHdpcmVmcmFtZTogPGJvb2xlYW4+LAoJICogIHdpcmVmcmFtZUxpbmV3aWR0aDogPGZsb2F0PgoJICogfQoJICovY2xhc3MgTWVzaERlcHRoTWF0ZXJpYWwgZXh0ZW5kcyBNYXRlcmlhbHtjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzKXtzdXBlcigpO3RoaXMudHlwZT0nTWVzaERlcHRoTWF0ZXJpYWwnO3RoaXMuZGVwdGhQYWNraW5nPUJhc2ljRGVwdGhQYWNraW5nO3RoaXMubWFwPW51bGw7dGhpcy5hbHBoYU1hcD1udWxsO3RoaXMuZGlzcGxhY2VtZW50TWFwPW51bGw7dGhpcy5kaXNwbGFjZW1lbnRTY2FsZT0xO3RoaXMuZGlzcGxhY2VtZW50Qmlhcz0wO3RoaXMud2lyZWZyYW1lPWZhbHNlO3RoaXMud2lyZWZyYW1lTGluZXdpZHRoPTE7dGhpcy5mb2c9ZmFsc2U7dGhpcy5zZXRWYWx1ZXMocGFyYW1ldGVycyk7fWNvcHkoc291cmNlKXtzdXBlci5jb3B5KHNvdXJjZSk7dGhpcy5kZXB0aFBhY2tpbmc9c291cmNlLmRlcHRoUGFja2luZzt0aGlzLm1hcD1zb3VyY2UubWFwO3RoaXMuYWxwaGFNYXA9c291cmNlLmFscGhhTWFwO3RoaXMuZGlzcGxhY2VtZW50TWFwPXNvdXJjZS5kaXNwbGFjZW1lbnRNYXA7dGhpcy5kaXNwbGFjZW1lbnRTY2FsZT1zb3VyY2UuZGlzcGxhY2VtZW50U2NhbGU7dGhpcy5kaXNwbGFjZW1lbnRCaWFzPXNvdXJjZS5kaXNwbGFjZW1lbnRCaWFzO3RoaXMud2lyZWZyYW1lPXNvdXJjZS53aXJlZnJhbWU7dGhpcy53aXJlZnJhbWVMaW5ld2lkdGg9c291cmNlLndpcmVmcmFtZUxpbmV3aWR0aDtyZXR1cm4gdGhpczt9fU1lc2hEZXB0aE1hdGVyaWFsLnByb3RvdHlwZS5pc01lc2hEZXB0aE1hdGVyaWFsPXRydWU7LyoqCgkgKiBwYXJhbWV0ZXJzID0gewoJICoKCSAqICByZWZlcmVuY2VQb3NpdGlvbjogPGZsb2F0PiwKCSAqICBuZWFyRGlzdGFuY2U6IDxmbG9hdD4sCgkgKiAgZmFyRGlzdGFuY2U6IDxmbG9hdD4sCgkgKgoJICogIG1hcDogbmV3IFRIUkVFLlRleHR1cmUoIDxJbWFnZT4gKSwKCSAqCgkgKiAgYWxwaGFNYXA6IG5ldyBUSFJFRS5UZXh0dXJlKCA8SW1hZ2U+ICksCgkgKgoJICogIGRpc3BsYWNlbWVudE1hcDogbmV3IFRIUkVFLlRleHR1cmUoIDxJbWFnZT4gKSwKCSAqICBkaXNwbGFjZW1lbnRTY2FsZTogPGZsb2F0PiwKCSAqICBkaXNwbGFjZW1lbnRCaWFzOiA8ZmxvYXQ+CgkgKgoJICogfQoJICovY2xhc3MgTWVzaERpc3RhbmNlTWF0ZXJpYWwgZXh0ZW5kcyBNYXRlcmlhbHtjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzKXtzdXBlcigpO3RoaXMudHlwZT0nTWVzaERpc3RhbmNlTWF0ZXJpYWwnO3RoaXMucmVmZXJlbmNlUG9zaXRpb249bmV3IFZlY3RvcjMoKTt0aGlzLm5lYXJEaXN0YW5jZT0xO3RoaXMuZmFyRGlzdGFuY2U9MTAwMDt0aGlzLm1hcD1udWxsO3RoaXMuYWxwaGFNYXA9bnVsbDt0aGlzLmRpc3BsYWNlbWVudE1hcD1udWxsO3RoaXMuZGlzcGxhY2VtZW50U2NhbGU9MTt0aGlzLmRpc3BsYWNlbWVudEJpYXM9MDt0aGlzLmZvZz1mYWxzZTt0aGlzLnNldFZhbHVlcyhwYXJhbWV0ZXJzKTt9Y29weShzb3VyY2Upe3N1cGVyLmNvcHkoc291cmNlKTt0aGlzLnJlZmVyZW5jZVBvc2l0aW9uLmNvcHkoc291cmNlLnJlZmVyZW5jZVBvc2l0aW9uKTt0aGlzLm5lYXJEaXN0YW5jZT1zb3VyY2UubmVhckRpc3RhbmNlO3RoaXMuZmFyRGlzdGFuY2U9c291cmNlLmZhckRpc3RhbmNlO3RoaXMubWFwPXNvdXJjZS5tYXA7dGhpcy5hbHBoYU1hcD1zb3VyY2UuYWxwaGFNYXA7dGhpcy5kaXNwbGFjZW1lbnRNYXA9c291cmNlLmRpc3BsYWNlbWVudE1hcDt0aGlzLmRpc3BsYWNlbWVudFNjYWxlPXNvdXJjZS5kaXNwbGFjZW1lbnRTY2FsZTt0aGlzLmRpc3BsYWNlbWVudEJpYXM9c291cmNlLmRpc3BsYWNlbWVudEJpYXM7cmV0dXJuIHRoaXM7fX1NZXNoRGlzdGFuY2VNYXRlcmlhbC5wcm90b3R5cGUuaXNNZXNoRGlzdGFuY2VNYXRlcmlhbD10cnVlO2NvbnN0IHZlcnRleD0idm9pZCBtYWluKCkge1xuXHRnbF9Qb3NpdGlvbiA9IHZlYzQoIHBvc2l0aW9uLCAxLjAgKTtcbn0iO2NvbnN0IGZyYWdtZW50PSJ1bmlmb3JtIHNhbXBsZXIyRCBzaGFkb3dfcGFzcztcbnVuaWZvcm0gdmVjMiByZXNvbHV0aW9uO1xudW5pZm9ybSBmbG9hdCByYWRpdXM7XG4jaW5jbHVkZSA8cGFja2luZz5cbnZvaWQgbWFpbigpIHtcblx0Y29uc3QgZmxvYXQgc2FtcGxlcyA9IGZsb2F0KCBWU01fU0FNUExFUyApO1xuXHRmbG9hdCBtZWFuID0gMC4wO1xuXHRmbG9hdCBzcXVhcmVkX21lYW4gPSAwLjA7XG5cdGZsb2F0IHV2U3RyaWRlID0gc2FtcGxlcyA8PSAxLjAgPyAwLjAgOiAyLjAgLyAoIHNhbXBsZXMgLSAxLjAgKTtcblx0ZmxvYXQgdXZTdGFydCA9IHNhbXBsZXMgPD0gMS4wID8gMC4wIDogLSAxLjA7XG5cdGZvciAoIGZsb2F0IGkgPSAwLjA7IGkgPCBzYW1wbGVzOyBpICsrICkge1xuXHRcdGZsb2F0IHV2T2Zmc2V0ID0gdXZTdGFydCArIGkgKiB1dlN0cmlkZTtcblx0XHQjaWZkZWYgSE9SSVpPTlRBTF9QQVNTXG5cdFx0XHR2ZWMyIGRpc3RyaWJ1dGlvbiA9IHVucGFja1JHQkFUbzJIYWxmKCB0ZXh0dXJlMkQoIHNoYWRvd19wYXNzLCAoIGdsX0ZyYWdDb29yZC54eSArIHZlYzIoIHV2T2Zmc2V0LCAwLjAgKSAqIHJhZGl1cyApIC8gcmVzb2x1dGlvbiApICk7XG5cdFx0XHRtZWFuICs9IGRpc3RyaWJ1dGlvbi54O1xuXHRcdFx0c3F1YXJlZF9tZWFuICs9IGRpc3RyaWJ1dGlvbi55ICogZGlzdHJpYnV0aW9uLnkgKyBkaXN0cmlidXRpb24ueCAqIGRpc3RyaWJ1dGlvbi54O1xuXHRcdCNlbHNlXG5cdFx0XHRmbG9hdCBkZXB0aCA9IHVucGFja1JHQkFUb0RlcHRoKCB0ZXh0dXJlMkQoIHNoYWRvd19wYXNzLCAoIGdsX0ZyYWdDb29yZC54eSArIHZlYzIoIDAuMCwgdXZPZmZzZXQgKSAqIHJhZGl1cyApIC8gcmVzb2x1dGlvbiApICk7XG5cdFx0XHRtZWFuICs9IGRlcHRoO1xuXHRcdFx0c3F1YXJlZF9tZWFuICs9IGRlcHRoICogZGVwdGg7XG5cdFx0I2VuZGlmXG5cdH1cblx0bWVhbiA9IG1lYW4gLyBzYW1wbGVzO1xuXHRzcXVhcmVkX21lYW4gPSBzcXVhcmVkX21lYW4gLyBzYW1wbGVzO1xuXHRmbG9hdCBzdGRfZGV2ID0gc3FydCggc3F1YXJlZF9tZWFuIC0gbWVhbiAqIG1lYW4gKTtcblx0Z2xfRnJhZ0NvbG9yID0gcGFjazJIYWxmVG9SR0JBKCB2ZWMyKCBtZWFuLCBzdGRfZGV2ICkgKTtcbn0iO2Z1bmN0aW9uIFdlYkdMU2hhZG93TWFwKF9yZW5kZXJlcixfb2JqZWN0cyxfY2FwYWJpbGl0aWVzKXtsZXQgX2ZydXN0dW09bmV3IEZydXN0dW0oKTtjb25zdCBfc2hhZG93TWFwU2l6ZT1uZXcgVmVjdG9yMigpLF92aWV3cG9ydFNpemU9bmV3IFZlY3RvcjIoKSxfdmlld3BvcnQ9bmV3IFZlY3RvcjQoKSxfZGVwdGhNYXRlcmlhbD1uZXcgTWVzaERlcHRoTWF0ZXJpYWwoe2RlcHRoUGFja2luZzpSR0JBRGVwdGhQYWNraW5nfSksX2Rpc3RhbmNlTWF0ZXJpYWw9bmV3IE1lc2hEaXN0YW5jZU1hdGVyaWFsKCksX21hdGVyaWFsQ2FjaGU9e30sX21heFRleHR1cmVTaXplPV9jYXBhYmlsaXRpZXMubWF4VGV4dHVyZVNpemU7Y29uc3Qgc2hhZG93U2lkZT17MDpCYWNrU2lkZSwxOkZyb250U2lkZSwyOkRvdWJsZVNpZGV9O2NvbnN0IHNoYWRvd01hdGVyaWFsVmVydGljYWw9bmV3IFNoYWRlck1hdGVyaWFsKHtkZWZpbmVzOntWU01fU0FNUExFUzo4fSx1bmlmb3Jtczp7c2hhZG93X3Bhc3M6e3ZhbHVlOm51bGx9LHJlc29sdXRpb246e3ZhbHVlOm5ldyBWZWN0b3IyKCl9LHJhZGl1czp7dmFsdWU6NC4wfX0sdmVydGV4U2hhZGVyOnZlcnRleCxmcmFnbWVudFNoYWRlcjpmcmFnbWVudH0pO2NvbnN0IHNoYWRvd01hdGVyaWFsSG9yaXpvbnRhbD1zaGFkb3dNYXRlcmlhbFZlcnRpY2FsLmNsb25lKCk7c2hhZG93TWF0ZXJpYWxIb3Jpem9udGFsLmRlZmluZXMuSE9SSVpPTlRBTF9QQVNTPTE7Y29uc3QgZnVsbFNjcmVlblRyaT1uZXcgQnVmZmVyR2VvbWV0cnkoKTtmdWxsU2NyZWVuVHJpLnNldEF0dHJpYnV0ZSgncG9zaXRpb24nLG5ldyBCdWZmZXJBdHRyaWJ1dGUobmV3IEZsb2F0MzJBcnJheShbLTEsLTEsMC41LDMsLTEsMC41LC0xLDMsMC41XSksMykpO2NvbnN0IGZ1bGxTY3JlZW5NZXNoPW5ldyBNZXNoKGZ1bGxTY3JlZW5Ucmksc2hhZG93TWF0ZXJpYWxWZXJ0aWNhbCk7Y29uc3Qgc2NvcGU9dGhpczt0aGlzLmVuYWJsZWQ9ZmFsc2U7dGhpcy5hdXRvVXBkYXRlPXRydWU7dGhpcy5uZWVkc1VwZGF0ZT1mYWxzZTt0aGlzLnR5cGU9UENGU2hhZG93TWFwO3RoaXMucmVuZGVyPWZ1bmN0aW9uKGxpZ2h0cyxzY2VuZSxjYW1lcmEpe2lmKHNjb3BlLmVuYWJsZWQ9PT1mYWxzZSlyZXR1cm47aWYoc2NvcGUuYXV0b1VwZGF0ZT09PWZhbHNlJiZzY29wZS5uZWVkc1VwZGF0ZT09PWZhbHNlKXJldHVybjtpZihsaWdodHMubGVuZ3RoPT09MClyZXR1cm47Y29uc3QgY3VycmVudFJlbmRlclRhcmdldD1fcmVuZGVyZXIuZ2V0UmVuZGVyVGFyZ2V0KCk7Y29uc3QgYWN0aXZlQ3ViZUZhY2U9X3JlbmRlcmVyLmdldEFjdGl2ZUN1YmVGYWNlKCk7Y29uc3QgYWN0aXZlTWlwbWFwTGV2ZWw9X3JlbmRlcmVyLmdldEFjdGl2ZU1pcG1hcExldmVsKCk7Y29uc3QgX3N0YXRlPV9yZW5kZXJlci5zdGF0ZTsvLyBTZXQgR0wgc3RhdGUgZm9yIGRlcHRoIG1hcC4KCV9zdGF0ZS5zZXRCbGVuZGluZyhOb0JsZW5kaW5nKTtfc3RhdGUuYnVmZmVycy5jb2xvci5zZXRDbGVhcigxLDEsMSwxKTtfc3RhdGUuYnVmZmVycy5kZXB0aC5zZXRUZXN0KHRydWUpO19zdGF0ZS5zZXRTY2lzc29yVGVzdChmYWxzZSk7Ly8gcmVuZGVyIGRlcHRoIG1hcAoJZm9yKGxldCBpPTAsaWw9bGlnaHRzLmxlbmd0aDtpPGlsO2krKyl7Y29uc3QgbGlnaHQ9bGlnaHRzW2ldO2NvbnN0IHNoYWRvdz1saWdodC5zaGFkb3c7aWYoc2hhZG93PT09dW5kZWZpbmVkKXtjb25zb2xlLndhcm4oJ1RIUkVFLldlYkdMU2hhZG93TWFwOicsbGlnaHQsJ2hhcyBubyBzaGFkb3cuJyk7Y29udGludWU7fWlmKHNoYWRvdy5hdXRvVXBkYXRlPT09ZmFsc2UmJnNoYWRvdy5uZWVkc1VwZGF0ZT09PWZhbHNlKWNvbnRpbnVlO19zaGFkb3dNYXBTaXplLmNvcHkoc2hhZG93Lm1hcFNpemUpO2NvbnN0IHNoYWRvd0ZyYW1lRXh0ZW50cz1zaGFkb3cuZ2V0RnJhbWVFeHRlbnRzKCk7X3NoYWRvd01hcFNpemUubXVsdGlwbHkoc2hhZG93RnJhbWVFeHRlbnRzKTtfdmlld3BvcnRTaXplLmNvcHkoc2hhZG93Lm1hcFNpemUpO2lmKF9zaGFkb3dNYXBTaXplLng+X21heFRleHR1cmVTaXplfHxfc2hhZG93TWFwU2l6ZS55Pl9tYXhUZXh0dXJlU2l6ZSl7aWYoX3NoYWRvd01hcFNpemUueD5fbWF4VGV4dHVyZVNpemUpe192aWV3cG9ydFNpemUueD1NYXRoLmZsb29yKF9tYXhUZXh0dXJlU2l6ZS9zaGFkb3dGcmFtZUV4dGVudHMueCk7X3NoYWRvd01hcFNpemUueD1fdmlld3BvcnRTaXplLngqc2hhZG93RnJhbWVFeHRlbnRzLng7c2hhZG93Lm1hcFNpemUueD1fdmlld3BvcnRTaXplLng7fWlmKF9zaGFkb3dNYXBTaXplLnk+X21heFRleHR1cmVTaXplKXtfdmlld3BvcnRTaXplLnk9TWF0aC5mbG9vcihfbWF4VGV4dHVyZVNpemUvc2hhZG93RnJhbWVFeHRlbnRzLnkpO19zaGFkb3dNYXBTaXplLnk9X3ZpZXdwb3J0U2l6ZS55KnNoYWRvd0ZyYW1lRXh0ZW50cy55O3NoYWRvdy5tYXBTaXplLnk9X3ZpZXdwb3J0U2l6ZS55O319aWYoc2hhZG93Lm1hcD09PW51bGwmJiFzaGFkb3cuaXNQb2ludExpZ2h0U2hhZG93JiZ0aGlzLnR5cGU9PT1WU01TaGFkb3dNYXApe2NvbnN0IHBhcnM9e21pbkZpbHRlcjpMaW5lYXJGaWx0ZXIsbWFnRmlsdGVyOkxpbmVhckZpbHRlcixmb3JtYXQ6UkdCQUZvcm1hdH07c2hhZG93Lm1hcD1uZXcgV2ViR0xSZW5kZXJUYXJnZXQoX3NoYWRvd01hcFNpemUueCxfc2hhZG93TWFwU2l6ZS55LHBhcnMpO3NoYWRvdy5tYXAudGV4dHVyZS5uYW1lPWxpZ2h0Lm5hbWUrJy5zaGFkb3dNYXAnO3NoYWRvdy5tYXBQYXNzPW5ldyBXZWJHTFJlbmRlclRhcmdldChfc2hhZG93TWFwU2l6ZS54LF9zaGFkb3dNYXBTaXplLnkscGFycyk7c2hhZG93LmNhbWVyYS51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCk7fWlmKHNoYWRvdy5tYXA9PT1udWxsKXtjb25zdCBwYXJzPXttaW5GaWx0ZXI6TmVhcmVzdEZpbHRlcixtYWdGaWx0ZXI6TmVhcmVzdEZpbHRlcixmb3JtYXQ6UkdCQUZvcm1hdH07c2hhZG93Lm1hcD1uZXcgV2ViR0xSZW5kZXJUYXJnZXQoX3NoYWRvd01hcFNpemUueCxfc2hhZG93TWFwU2l6ZS55LHBhcnMpO3NoYWRvdy5tYXAudGV4dHVyZS5uYW1lPWxpZ2h0Lm5hbWUrJy5zaGFkb3dNYXAnO3NoYWRvdy5jYW1lcmEudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpO31fcmVuZGVyZXIuc2V0UmVuZGVyVGFyZ2V0KHNoYWRvdy5tYXApO19yZW5kZXJlci5jbGVhcigpO2NvbnN0IHZpZXdwb3J0Q291bnQ9c2hhZG93LmdldFZpZXdwb3J0Q291bnQoKTtmb3IobGV0IHZwPTA7dnA8dmlld3BvcnRDb3VudDt2cCsrKXtjb25zdCB2aWV3cG9ydD1zaGFkb3cuZ2V0Vmlld3BvcnQodnApO192aWV3cG9ydC5zZXQoX3ZpZXdwb3J0U2l6ZS54KnZpZXdwb3J0LngsX3ZpZXdwb3J0U2l6ZS55KnZpZXdwb3J0LnksX3ZpZXdwb3J0U2l6ZS54KnZpZXdwb3J0LnosX3ZpZXdwb3J0U2l6ZS55KnZpZXdwb3J0LncpO19zdGF0ZS52aWV3cG9ydChfdmlld3BvcnQpO3NoYWRvdy51cGRhdGVNYXRyaWNlcyhsaWdodCx2cCk7X2ZydXN0dW09c2hhZG93LmdldEZydXN0dW0oKTtyZW5kZXJPYmplY3Qoc2NlbmUsY2FtZXJhLHNoYWRvdy5jYW1lcmEsbGlnaHQsdGhpcy50eXBlKTt9Ly8gZG8gYmx1ciBwYXNzIGZvciBWU00KCWlmKCFzaGFkb3cuaXNQb2ludExpZ2h0U2hhZG93JiZ0aGlzLnR5cGU9PT1WU01TaGFkb3dNYXApe1ZTTVBhc3Moc2hhZG93LGNhbWVyYSk7fXNoYWRvdy5uZWVkc1VwZGF0ZT1mYWxzZTt9c2NvcGUubmVlZHNVcGRhdGU9ZmFsc2U7X3JlbmRlcmVyLnNldFJlbmRlclRhcmdldChjdXJyZW50UmVuZGVyVGFyZ2V0LGFjdGl2ZUN1YmVGYWNlLGFjdGl2ZU1pcG1hcExldmVsKTt9O2Z1bmN0aW9uIFZTTVBhc3Moc2hhZG93LGNhbWVyYSl7Y29uc3QgZ2VvbWV0cnk9X29iamVjdHMudXBkYXRlKGZ1bGxTY3JlZW5NZXNoKTtpZihzaGFkb3dNYXRlcmlhbFZlcnRpY2FsLmRlZmluZXMuVlNNX1NBTVBMRVMhPT1zaGFkb3cuYmx1clNhbXBsZXMpe3NoYWRvd01hdGVyaWFsVmVydGljYWwuZGVmaW5lcy5WU01fU0FNUExFUz1zaGFkb3cuYmx1clNhbXBsZXM7c2hhZG93TWF0ZXJpYWxIb3Jpem9udGFsLmRlZmluZXMuVlNNX1NBTVBMRVM9c2hhZG93LmJsdXJTYW1wbGVzO3NoYWRvd01hdGVyaWFsVmVydGljYWwubmVlZHNVcGRhdGU9dHJ1ZTtzaGFkb3dNYXRlcmlhbEhvcml6b250YWwubmVlZHNVcGRhdGU9dHJ1ZTt9Ly8gdmVydGljYWwgcGFzcwoJc2hhZG93TWF0ZXJpYWxWZXJ0aWNhbC51bmlmb3Jtcy5zaGFkb3dfcGFzcy52YWx1ZT1zaGFkb3cubWFwLnRleHR1cmU7c2hhZG93TWF0ZXJpYWxWZXJ0aWNhbC51bmlmb3Jtcy5yZXNvbHV0aW9uLnZhbHVlPXNoYWRvdy5tYXBTaXplO3NoYWRvd01hdGVyaWFsVmVydGljYWwudW5pZm9ybXMucmFkaXVzLnZhbHVlPXNoYWRvdy5yYWRpdXM7X3JlbmRlcmVyLnNldFJlbmRlclRhcmdldChzaGFkb3cubWFwUGFzcyk7X3JlbmRlcmVyLmNsZWFyKCk7X3JlbmRlcmVyLnJlbmRlckJ1ZmZlckRpcmVjdChjYW1lcmEsbnVsbCxnZW9tZXRyeSxzaGFkb3dNYXRlcmlhbFZlcnRpY2FsLGZ1bGxTY3JlZW5NZXNoLG51bGwpOy8vIGhvcml6b250YWwgcGFzcwoJc2hhZG93TWF0ZXJpYWxIb3Jpem9udGFsLnVuaWZvcm1zLnNoYWRvd19wYXNzLnZhbHVlPXNoYWRvdy5tYXBQYXNzLnRleHR1cmU7c2hhZG93TWF0ZXJpYWxIb3Jpem9udGFsLnVuaWZvcm1zLnJlc29sdXRpb24udmFsdWU9c2hhZG93Lm1hcFNpemU7c2hhZG93TWF0ZXJpYWxIb3Jpem9udGFsLnVuaWZvcm1zLnJhZGl1cy52YWx1ZT1zaGFkb3cucmFkaXVzO19yZW5kZXJlci5zZXRSZW5kZXJUYXJnZXQoc2hhZG93Lm1hcCk7X3JlbmRlcmVyLmNsZWFyKCk7X3JlbmRlcmVyLnJlbmRlckJ1ZmZlckRpcmVjdChjYW1lcmEsbnVsbCxnZW9tZXRyeSxzaGFkb3dNYXRlcmlhbEhvcml6b250YWwsZnVsbFNjcmVlbk1lc2gsbnVsbCk7fWZ1bmN0aW9uIGdldERlcHRoTWF0ZXJpYWwob2JqZWN0LGdlb21ldHJ5LG1hdGVyaWFsLGxpZ2h0LHNoYWRvd0NhbWVyYU5lYXIsc2hhZG93Q2FtZXJhRmFyLHR5cGUpe2xldCByZXN1bHQ9bnVsbDtjb25zdCBjdXN0b21NYXRlcmlhbD1saWdodC5pc1BvaW50TGlnaHQ9PT10cnVlP29iamVjdC5jdXN0b21EaXN0YW5jZU1hdGVyaWFsOm9iamVjdC5jdXN0b21EZXB0aE1hdGVyaWFsO2lmKGN1c3RvbU1hdGVyaWFsIT09dW5kZWZpbmVkKXtyZXN1bHQ9Y3VzdG9tTWF0ZXJpYWw7fWVsc2Uge3Jlc3VsdD1saWdodC5pc1BvaW50TGlnaHQ9PT10cnVlP19kaXN0YW5jZU1hdGVyaWFsOl9kZXB0aE1hdGVyaWFsO31pZihfcmVuZGVyZXIubG9jYWxDbGlwcGluZ0VuYWJsZWQmJm1hdGVyaWFsLmNsaXBTaGFkb3dzPT09dHJ1ZSYmbWF0ZXJpYWwuY2xpcHBpbmdQbGFuZXMubGVuZ3RoIT09MHx8bWF0ZXJpYWwuZGlzcGxhY2VtZW50TWFwJiZtYXRlcmlhbC5kaXNwbGFjZW1lbnRTY2FsZSE9PTB8fG1hdGVyaWFsLmFscGhhTWFwJiZtYXRlcmlhbC5hbHBoYVRlc3Q+MCl7Ly8gaW4gdGhpcyBjYXNlIHdlIG5lZWQgYSB1bmlxdWUgbWF0ZXJpYWwgaW5zdGFuY2UgcmVmbGVjdGluZyB0aGUKCS8vIGFwcHJvcHJpYXRlIHN0YXRlCgljb25zdCBrZXlBPXJlc3VsdC51dWlkLGtleUI9bWF0ZXJpYWwudXVpZDtsZXQgbWF0ZXJpYWxzRm9yVmFyaWFudD1fbWF0ZXJpYWxDYWNoZVtrZXlBXTtpZihtYXRlcmlhbHNGb3JWYXJpYW50PT09dW5kZWZpbmVkKXttYXRlcmlhbHNGb3JWYXJpYW50PXt9O19tYXRlcmlhbENhY2hlW2tleUFdPW1hdGVyaWFsc0ZvclZhcmlhbnQ7fWxldCBjYWNoZWRNYXRlcmlhbD1tYXRlcmlhbHNGb3JWYXJpYW50W2tleUJdO2lmKGNhY2hlZE1hdGVyaWFsPT09dW5kZWZpbmVkKXtjYWNoZWRNYXRlcmlhbD1yZXN1bHQuY2xvbmUoKTttYXRlcmlhbHNGb3JWYXJpYW50W2tleUJdPWNhY2hlZE1hdGVyaWFsO31yZXN1bHQ9Y2FjaGVkTWF0ZXJpYWw7fXJlc3VsdC52aXNpYmxlPW1hdGVyaWFsLnZpc2libGU7cmVzdWx0LndpcmVmcmFtZT1tYXRlcmlhbC53aXJlZnJhbWU7aWYodHlwZT09PVZTTVNoYWRvd01hcCl7cmVzdWx0LnNpZGU9bWF0ZXJpYWwuc2hhZG93U2lkZSE9PW51bGw/bWF0ZXJpYWwuc2hhZG93U2lkZTptYXRlcmlhbC5zaWRlO31lbHNlIHtyZXN1bHQuc2lkZT1tYXRlcmlhbC5zaGFkb3dTaWRlIT09bnVsbD9tYXRlcmlhbC5zaGFkb3dTaWRlOnNoYWRvd1NpZGVbbWF0ZXJpYWwuc2lkZV07fXJlc3VsdC5hbHBoYU1hcD1tYXRlcmlhbC5hbHBoYU1hcDtyZXN1bHQuYWxwaGFUZXN0PW1hdGVyaWFsLmFscGhhVGVzdDtyZXN1bHQuY2xpcFNoYWRvd3M9bWF0ZXJpYWwuY2xpcFNoYWRvd3M7cmVzdWx0LmNsaXBwaW5nUGxhbmVzPW1hdGVyaWFsLmNsaXBwaW5nUGxhbmVzO3Jlc3VsdC5jbGlwSW50ZXJzZWN0aW9uPW1hdGVyaWFsLmNsaXBJbnRlcnNlY3Rpb247cmVzdWx0LmRpc3BsYWNlbWVudE1hcD1tYXRlcmlhbC5kaXNwbGFjZW1lbnRNYXA7cmVzdWx0LmRpc3BsYWNlbWVudFNjYWxlPW1hdGVyaWFsLmRpc3BsYWNlbWVudFNjYWxlO3Jlc3VsdC5kaXNwbGFjZW1lbnRCaWFzPW1hdGVyaWFsLmRpc3BsYWNlbWVudEJpYXM7cmVzdWx0LndpcmVmcmFtZUxpbmV3aWR0aD1tYXRlcmlhbC53aXJlZnJhbWVMaW5ld2lkdGg7cmVzdWx0LmxpbmV3aWR0aD1tYXRlcmlhbC5saW5ld2lkdGg7aWYobGlnaHQuaXNQb2ludExpZ2h0PT09dHJ1ZSYmcmVzdWx0LmlzTWVzaERpc3RhbmNlTWF0ZXJpYWw9PT10cnVlKXtyZXN1bHQucmVmZXJlbmNlUG9zaXRpb24uc2V0RnJvbU1hdHJpeFBvc2l0aW9uKGxpZ2h0Lm1hdHJpeFdvcmxkKTtyZXN1bHQubmVhckRpc3RhbmNlPXNoYWRvd0NhbWVyYU5lYXI7cmVzdWx0LmZhckRpc3RhbmNlPXNoYWRvd0NhbWVyYUZhcjt9cmV0dXJuIHJlc3VsdDt9ZnVuY3Rpb24gcmVuZGVyT2JqZWN0KG9iamVjdCxjYW1lcmEsc2hhZG93Q2FtZXJhLGxpZ2h0LHR5cGUpe2lmKG9iamVjdC52aXNpYmxlPT09ZmFsc2UpcmV0dXJuO2NvbnN0IHZpc2libGU9b2JqZWN0LmxheWVycy50ZXN0KGNhbWVyYS5sYXllcnMpO2lmKHZpc2libGUmJihvYmplY3QuaXNNZXNofHxvYmplY3QuaXNMaW5lfHxvYmplY3QuaXNQb2ludHMpKXtpZigob2JqZWN0LmNhc3RTaGFkb3d8fG9iamVjdC5yZWNlaXZlU2hhZG93JiZ0eXBlPT09VlNNU2hhZG93TWFwKSYmKCFvYmplY3QuZnJ1c3R1bUN1bGxlZHx8X2ZydXN0dW0uaW50ZXJzZWN0c09iamVjdChvYmplY3QpKSl7b2JqZWN0Lm1vZGVsVmlld01hdHJpeC5tdWx0aXBseU1hdHJpY2VzKHNoYWRvd0NhbWVyYS5tYXRyaXhXb3JsZEludmVyc2Usb2JqZWN0Lm1hdHJpeFdvcmxkKTtjb25zdCBnZW9tZXRyeT1fb2JqZWN0cy51cGRhdGUob2JqZWN0KTtjb25zdCBtYXRlcmlhbD1vYmplY3QubWF0ZXJpYWw7aWYoQXJyYXkuaXNBcnJheShtYXRlcmlhbCkpe2NvbnN0IGdyb3Vwcz1nZW9tZXRyeS5ncm91cHM7Zm9yKGxldCBrPTAsa2w9Z3JvdXBzLmxlbmd0aDtrPGtsO2srKyl7Y29uc3QgZ3JvdXA9Z3JvdXBzW2tdO2NvbnN0IGdyb3VwTWF0ZXJpYWw9bWF0ZXJpYWxbZ3JvdXAubWF0ZXJpYWxJbmRleF07aWYoZ3JvdXBNYXRlcmlhbCYmZ3JvdXBNYXRlcmlhbC52aXNpYmxlKXtjb25zdCBkZXB0aE1hdGVyaWFsPWdldERlcHRoTWF0ZXJpYWwob2JqZWN0LGdlb21ldHJ5LGdyb3VwTWF0ZXJpYWwsbGlnaHQsc2hhZG93Q2FtZXJhLm5lYXIsc2hhZG93Q2FtZXJhLmZhcix0eXBlKTtfcmVuZGVyZXIucmVuZGVyQnVmZmVyRGlyZWN0KHNoYWRvd0NhbWVyYSxudWxsLGdlb21ldHJ5LGRlcHRoTWF0ZXJpYWwsb2JqZWN0LGdyb3VwKTt9fX1lbHNlIGlmKG1hdGVyaWFsLnZpc2libGUpe2NvbnN0IGRlcHRoTWF0ZXJpYWw9Z2V0RGVwdGhNYXRlcmlhbChvYmplY3QsZ2VvbWV0cnksbWF0ZXJpYWwsbGlnaHQsc2hhZG93Q2FtZXJhLm5lYXIsc2hhZG93Q2FtZXJhLmZhcix0eXBlKTtfcmVuZGVyZXIucmVuZGVyQnVmZmVyRGlyZWN0KHNoYWRvd0NhbWVyYSxudWxsLGdlb21ldHJ5LGRlcHRoTWF0ZXJpYWwsb2JqZWN0LG51bGwpO319fWNvbnN0IGNoaWxkcmVuPW9iamVjdC5jaGlsZHJlbjtmb3IobGV0IGk9MCxsPWNoaWxkcmVuLmxlbmd0aDtpPGw7aSsrKXtyZW5kZXJPYmplY3QoY2hpbGRyZW5baV0sY2FtZXJhLHNoYWRvd0NhbWVyYSxsaWdodCx0eXBlKTt9fX1mdW5jdGlvbiBXZWJHTFN0YXRlKGdsLGV4dGVuc2lvbnMsY2FwYWJpbGl0aWVzKXtjb25zdCBpc1dlYkdMMj1jYXBhYmlsaXRpZXMuaXNXZWJHTDI7ZnVuY3Rpb24gQ29sb3JCdWZmZXIoKXtsZXQgbG9ja2VkPWZhbHNlO2NvbnN0IGNvbG9yPW5ldyBWZWN0b3I0KCk7bGV0IGN1cnJlbnRDb2xvck1hc2s9bnVsbDtjb25zdCBjdXJyZW50Q29sb3JDbGVhcj1uZXcgVmVjdG9yNCgwLDAsMCwwKTtyZXR1cm4ge3NldE1hc2s6ZnVuY3Rpb24oY29sb3JNYXNrKXtpZihjdXJyZW50Q29sb3JNYXNrIT09Y29sb3JNYXNrJiYhbG9ja2VkKXtnbC5jb2xvck1hc2soY29sb3JNYXNrLGNvbG9yTWFzayxjb2xvck1hc2ssY29sb3JNYXNrKTtjdXJyZW50Q29sb3JNYXNrPWNvbG9yTWFzazt9fSxzZXRMb2NrZWQ6ZnVuY3Rpb24obG9jayl7bG9ja2VkPWxvY2s7fSxzZXRDbGVhcjpmdW5jdGlvbihyLGcsYixhLHByZW11bHRpcGxpZWRBbHBoYSl7aWYocHJlbXVsdGlwbGllZEFscGhhPT09dHJ1ZSl7cio9YTtnKj1hO2IqPWE7fWNvbG9yLnNldChyLGcsYixhKTtpZihjdXJyZW50Q29sb3JDbGVhci5lcXVhbHMoY29sb3IpPT09ZmFsc2Upe2dsLmNsZWFyQ29sb3IocixnLGIsYSk7Y3VycmVudENvbG9yQ2xlYXIuY29weShjb2xvcik7fX0scmVzZXQ6ZnVuY3Rpb24oKXtsb2NrZWQ9ZmFsc2U7Y3VycmVudENvbG9yTWFzaz1udWxsO2N1cnJlbnRDb2xvckNsZWFyLnNldCgtMSwwLDAsMCk7Ly8gc2V0IHRvIGludmFsaWQgc3RhdGUKCX19O31mdW5jdGlvbiBEZXB0aEJ1ZmZlcigpe2xldCBsb2NrZWQ9ZmFsc2U7bGV0IGN1cnJlbnREZXB0aE1hc2s9bnVsbDtsZXQgY3VycmVudERlcHRoRnVuYz1udWxsO2xldCBjdXJyZW50RGVwdGhDbGVhcj1udWxsO3JldHVybiB7c2V0VGVzdDpmdW5jdGlvbihkZXB0aFRlc3Qpe2lmKGRlcHRoVGVzdCl7ZW5hYmxlKDI5MjkpO31lbHNlIHtkaXNhYmxlKDI5MjkpO319LHNldE1hc2s6ZnVuY3Rpb24oZGVwdGhNYXNrKXtpZihjdXJyZW50RGVwdGhNYXNrIT09ZGVwdGhNYXNrJiYhbG9ja2VkKXtnbC5kZXB0aE1hc2soZGVwdGhNYXNrKTtjdXJyZW50RGVwdGhNYXNrPWRlcHRoTWFzazt9fSxzZXRGdW5jOmZ1bmN0aW9uKGRlcHRoRnVuYyl7aWYoY3VycmVudERlcHRoRnVuYyE9PWRlcHRoRnVuYyl7aWYoZGVwdGhGdW5jKXtzd2l0Y2goZGVwdGhGdW5jKXtjYXNlIE5ldmVyRGVwdGg6Z2wuZGVwdGhGdW5jKDUxMik7YnJlYWs7Y2FzZSBBbHdheXNEZXB0aDpnbC5kZXB0aEZ1bmMoNTE5KTticmVhaztjYXNlIExlc3NEZXB0aDpnbC5kZXB0aEZ1bmMoNTEzKTticmVhaztjYXNlIExlc3NFcXVhbERlcHRoOmdsLmRlcHRoRnVuYyg1MTUpO2JyZWFrO2Nhc2UgRXF1YWxEZXB0aDpnbC5kZXB0aEZ1bmMoNTE0KTticmVhaztjYXNlIEdyZWF0ZXJFcXVhbERlcHRoOmdsLmRlcHRoRnVuYyg1MTgpO2JyZWFrO2Nhc2UgR3JlYXRlckRlcHRoOmdsLmRlcHRoRnVuYyg1MTYpO2JyZWFrO2Nhc2UgTm90RXF1YWxEZXB0aDpnbC5kZXB0aEZ1bmMoNTE3KTticmVhaztkZWZhdWx0OmdsLmRlcHRoRnVuYyg1MTUpO319ZWxzZSB7Z2wuZGVwdGhGdW5jKDUxNSk7fWN1cnJlbnREZXB0aEZ1bmM9ZGVwdGhGdW5jO319LHNldExvY2tlZDpmdW5jdGlvbihsb2NrKXtsb2NrZWQ9bG9jazt9LHNldENsZWFyOmZ1bmN0aW9uKGRlcHRoKXtpZihjdXJyZW50RGVwdGhDbGVhciE9PWRlcHRoKXtnbC5jbGVhckRlcHRoKGRlcHRoKTtjdXJyZW50RGVwdGhDbGVhcj1kZXB0aDt9fSxyZXNldDpmdW5jdGlvbigpe2xvY2tlZD1mYWxzZTtjdXJyZW50RGVwdGhNYXNrPW51bGw7Y3VycmVudERlcHRoRnVuYz1udWxsO2N1cnJlbnREZXB0aENsZWFyPW51bGw7fX07fWZ1bmN0aW9uIFN0ZW5jaWxCdWZmZXIoKXtsZXQgbG9ja2VkPWZhbHNlO2xldCBjdXJyZW50U3RlbmNpbE1hc2s9bnVsbDtsZXQgY3VycmVudFN0ZW5jaWxGdW5jPW51bGw7bGV0IGN1cnJlbnRTdGVuY2lsUmVmPW51bGw7bGV0IGN1cnJlbnRTdGVuY2lsRnVuY01hc2s9bnVsbDtsZXQgY3VycmVudFN0ZW5jaWxGYWlsPW51bGw7bGV0IGN1cnJlbnRTdGVuY2lsWkZhaWw9bnVsbDtsZXQgY3VycmVudFN0ZW5jaWxaUGFzcz1udWxsO2xldCBjdXJyZW50U3RlbmNpbENsZWFyPW51bGw7cmV0dXJuIHtzZXRUZXN0OmZ1bmN0aW9uKHN0ZW5jaWxUZXN0KXtpZighbG9ja2VkKXtpZihzdGVuY2lsVGVzdCl7ZW5hYmxlKDI5NjApO31lbHNlIHtkaXNhYmxlKDI5NjApO319fSxzZXRNYXNrOmZ1bmN0aW9uKHN0ZW5jaWxNYXNrKXtpZihjdXJyZW50U3RlbmNpbE1hc2shPT1zdGVuY2lsTWFzayYmIWxvY2tlZCl7Z2wuc3RlbmNpbE1hc2soc3RlbmNpbE1hc2spO2N1cnJlbnRTdGVuY2lsTWFzaz1zdGVuY2lsTWFzazt9fSxzZXRGdW5jOmZ1bmN0aW9uKHN0ZW5jaWxGdW5jLHN0ZW5jaWxSZWYsc3RlbmNpbE1hc2spe2lmKGN1cnJlbnRTdGVuY2lsRnVuYyE9PXN0ZW5jaWxGdW5jfHxjdXJyZW50U3RlbmNpbFJlZiE9PXN0ZW5jaWxSZWZ8fGN1cnJlbnRTdGVuY2lsRnVuY01hc2shPT1zdGVuY2lsTWFzayl7Z2wuc3RlbmNpbEZ1bmMoc3RlbmNpbEZ1bmMsc3RlbmNpbFJlZixzdGVuY2lsTWFzayk7Y3VycmVudFN0ZW5jaWxGdW5jPXN0ZW5jaWxGdW5jO2N1cnJlbnRTdGVuY2lsUmVmPXN0ZW5jaWxSZWY7Y3VycmVudFN0ZW5jaWxGdW5jTWFzaz1zdGVuY2lsTWFzazt9fSxzZXRPcDpmdW5jdGlvbihzdGVuY2lsRmFpbCxzdGVuY2lsWkZhaWwsc3RlbmNpbFpQYXNzKXtpZihjdXJyZW50U3RlbmNpbEZhaWwhPT1zdGVuY2lsRmFpbHx8Y3VycmVudFN0ZW5jaWxaRmFpbCE9PXN0ZW5jaWxaRmFpbHx8Y3VycmVudFN0ZW5jaWxaUGFzcyE9PXN0ZW5jaWxaUGFzcyl7Z2wuc3RlbmNpbE9wKHN0ZW5jaWxGYWlsLHN0ZW5jaWxaRmFpbCxzdGVuY2lsWlBhc3MpO2N1cnJlbnRTdGVuY2lsRmFpbD1zdGVuY2lsRmFpbDtjdXJyZW50U3RlbmNpbFpGYWlsPXN0ZW5jaWxaRmFpbDtjdXJyZW50U3RlbmNpbFpQYXNzPXN0ZW5jaWxaUGFzczt9fSxzZXRMb2NrZWQ6ZnVuY3Rpb24obG9jayl7bG9ja2VkPWxvY2s7fSxzZXRDbGVhcjpmdW5jdGlvbihzdGVuY2lsKXtpZihjdXJyZW50U3RlbmNpbENsZWFyIT09c3RlbmNpbCl7Z2wuY2xlYXJTdGVuY2lsKHN0ZW5jaWwpO2N1cnJlbnRTdGVuY2lsQ2xlYXI9c3RlbmNpbDt9fSxyZXNldDpmdW5jdGlvbigpe2xvY2tlZD1mYWxzZTtjdXJyZW50U3RlbmNpbE1hc2s9bnVsbDtjdXJyZW50U3RlbmNpbEZ1bmM9bnVsbDtjdXJyZW50U3RlbmNpbFJlZj1udWxsO2N1cnJlbnRTdGVuY2lsRnVuY01hc2s9bnVsbDtjdXJyZW50U3RlbmNpbEZhaWw9bnVsbDtjdXJyZW50U3RlbmNpbFpGYWlsPW51bGw7Y3VycmVudFN0ZW5jaWxaUGFzcz1udWxsO2N1cnJlbnRTdGVuY2lsQ2xlYXI9bnVsbDt9fTt9Ly8KCWNvbnN0IGNvbG9yQnVmZmVyPW5ldyBDb2xvckJ1ZmZlcigpO2NvbnN0IGRlcHRoQnVmZmVyPW5ldyBEZXB0aEJ1ZmZlcigpO2NvbnN0IHN0ZW5jaWxCdWZmZXI9bmV3IFN0ZW5jaWxCdWZmZXIoKTtsZXQgZW5hYmxlZENhcGFiaWxpdGllcz17fTtsZXQgY3VycmVudEJvdW5kRnJhbWVidWZmZXJzPXt9O2xldCBjdXJyZW50UHJvZ3JhbT1udWxsO2xldCBjdXJyZW50QmxlbmRpbmdFbmFibGVkPWZhbHNlO2xldCBjdXJyZW50QmxlbmRpbmc9bnVsbDtsZXQgY3VycmVudEJsZW5kRXF1YXRpb249bnVsbDtsZXQgY3VycmVudEJsZW5kU3JjPW51bGw7bGV0IGN1cnJlbnRCbGVuZERzdD1udWxsO2xldCBjdXJyZW50QmxlbmRFcXVhdGlvbkFscGhhPW51bGw7bGV0IGN1cnJlbnRCbGVuZFNyY0FscGhhPW51bGw7bGV0IGN1cnJlbnRCbGVuZERzdEFscGhhPW51bGw7bGV0IGN1cnJlbnRQcmVtdWx0aXBsZWRBbHBoYT1mYWxzZTtsZXQgY3VycmVudEZsaXBTaWRlZD1udWxsO2xldCBjdXJyZW50Q3VsbEZhY2U9bnVsbDtsZXQgY3VycmVudExpbmVXaWR0aD1udWxsO2xldCBjdXJyZW50UG9seWdvbk9mZnNldEZhY3Rvcj1udWxsO2xldCBjdXJyZW50UG9seWdvbk9mZnNldFVuaXRzPW51bGw7Y29uc3QgbWF4VGV4dHVyZXM9Z2wuZ2V0UGFyYW1ldGVyKDM1NjYxKTtsZXQgbGluZVdpZHRoQXZhaWxhYmxlPWZhbHNlO2xldCB2ZXJzaW9uPTA7Y29uc3QgZ2xWZXJzaW9uPWdsLmdldFBhcmFtZXRlcig3OTM4KTtpZihnbFZlcnNpb24uaW5kZXhPZignV2ViR0wnKSE9PS0xKXt2ZXJzaW9uPXBhcnNlRmxvYXQoL15XZWJHTCAoXGQpLy5leGVjKGdsVmVyc2lvbilbMV0pO2xpbmVXaWR0aEF2YWlsYWJsZT12ZXJzaW9uPj0xLjA7fWVsc2UgaWYoZ2xWZXJzaW9uLmluZGV4T2YoJ09wZW5HTCBFUycpIT09LTEpe3ZlcnNpb249cGFyc2VGbG9hdCgvXk9wZW5HTCBFUyAoXGQpLy5leGVjKGdsVmVyc2lvbilbMV0pO2xpbmVXaWR0aEF2YWlsYWJsZT12ZXJzaW9uPj0yLjA7fWxldCBjdXJyZW50VGV4dHVyZVNsb3Q9bnVsbDtsZXQgY3VycmVudEJvdW5kVGV4dHVyZXM9e307Y29uc3Qgc2Npc3NvclBhcmFtPWdsLmdldFBhcmFtZXRlcigzMDg4KTtjb25zdCB2aWV3cG9ydFBhcmFtPWdsLmdldFBhcmFtZXRlcigyOTc4KTtjb25zdCBjdXJyZW50U2Npc3Nvcj1uZXcgVmVjdG9yNCgpLmZyb21BcnJheShzY2lzc29yUGFyYW0pO2NvbnN0IGN1cnJlbnRWaWV3cG9ydD1uZXcgVmVjdG9yNCgpLmZyb21BcnJheSh2aWV3cG9ydFBhcmFtKTtmdW5jdGlvbiBjcmVhdGVUZXh0dXJlKHR5cGUsdGFyZ2V0LGNvdW50KXtjb25zdCBkYXRhPW5ldyBVaW50OEFycmF5KDQpOy8vIDQgaXMgcmVxdWlyZWQgdG8gbWF0Y2ggZGVmYXVsdCB1bnBhY2sgYWxpZ25tZW50IG9mIDQuCgljb25zdCB0ZXh0dXJlPWdsLmNyZWF0ZVRleHR1cmUoKTtnbC5iaW5kVGV4dHVyZSh0eXBlLHRleHR1cmUpO2dsLnRleFBhcmFtZXRlcmkodHlwZSwxMDI0MSw5NzI4KTtnbC50ZXhQYXJhbWV0ZXJpKHR5cGUsMTAyNDAsOTcyOCk7Zm9yKGxldCBpPTA7aTxjb3VudDtpKyspe2dsLnRleEltYWdlMkQodGFyZ2V0K2ksMCw2NDA4LDEsMSwwLDY0MDgsNTEyMSxkYXRhKTt9cmV0dXJuIHRleHR1cmU7fWNvbnN0IGVtcHR5VGV4dHVyZXM9e307ZW1wdHlUZXh0dXJlc1szNTUzXT1jcmVhdGVUZXh0dXJlKDM1NTMsMzU1MywxKTtlbXB0eVRleHR1cmVzWzM0MDY3XT1jcmVhdGVUZXh0dXJlKDM0MDY3LDM0MDY5LDYpOy8vIGluaXQKCWNvbG9yQnVmZmVyLnNldENsZWFyKDAsMCwwLDEpO2RlcHRoQnVmZmVyLnNldENsZWFyKDEpO3N0ZW5jaWxCdWZmZXIuc2V0Q2xlYXIoMCk7ZW5hYmxlKDI5MjkpO2RlcHRoQnVmZmVyLnNldEZ1bmMoTGVzc0VxdWFsRGVwdGgpO3NldEZsaXBTaWRlZChmYWxzZSk7c2V0Q3VsbEZhY2UoQ3VsbEZhY2VCYWNrKTtlbmFibGUoMjg4NCk7c2V0QmxlbmRpbmcoTm9CbGVuZGluZyk7Ly8KCWZ1bmN0aW9uIGVuYWJsZShpZCl7aWYoZW5hYmxlZENhcGFiaWxpdGllc1tpZF0hPT10cnVlKXtnbC5lbmFibGUoaWQpO2VuYWJsZWRDYXBhYmlsaXRpZXNbaWRdPXRydWU7fX1mdW5jdGlvbiBkaXNhYmxlKGlkKXtpZihlbmFibGVkQ2FwYWJpbGl0aWVzW2lkXSE9PWZhbHNlKXtnbC5kaXNhYmxlKGlkKTtlbmFibGVkQ2FwYWJpbGl0aWVzW2lkXT1mYWxzZTt9fWZ1bmN0aW9uIGJpbmRGcmFtZWJ1ZmZlcih0YXJnZXQsZnJhbWVidWZmZXIpe2lmKGN1cnJlbnRCb3VuZEZyYW1lYnVmZmVyc1t0YXJnZXRdIT09ZnJhbWVidWZmZXIpe2dsLmJpbmRGcmFtZWJ1ZmZlcih0YXJnZXQsZnJhbWVidWZmZXIpO2N1cnJlbnRCb3VuZEZyYW1lYnVmZmVyc1t0YXJnZXRdPWZyYW1lYnVmZmVyO2lmKGlzV2ViR0wyKXsvLyAzNjAwOSBpcyBlcXVpdmFsZW50IHRvIDM2MTYwCglpZih0YXJnZXQ9PT0zNjAwOSl7Y3VycmVudEJvdW5kRnJhbWVidWZmZXJzWzM2MTYwXT1mcmFtZWJ1ZmZlcjt9aWYodGFyZ2V0PT09MzYxNjApe2N1cnJlbnRCb3VuZEZyYW1lYnVmZmVyc1szNjAwOV09ZnJhbWVidWZmZXI7fX1yZXR1cm4gdHJ1ZTt9cmV0dXJuIGZhbHNlO31mdW5jdGlvbiB1c2VQcm9ncmFtKHByb2dyYW0pe2lmKGN1cnJlbnRQcm9ncmFtIT09cHJvZ3JhbSl7Z2wudXNlUHJvZ3JhbShwcm9ncmFtKTtjdXJyZW50UHJvZ3JhbT1wcm9ncmFtO3JldHVybiB0cnVlO31yZXR1cm4gZmFsc2U7fWNvbnN0IGVxdWF0aW9uVG9HTD17W0FkZEVxdWF0aW9uXTozMjc3NCxbU3VidHJhY3RFcXVhdGlvbl06MzI3NzgsW1JldmVyc2VTdWJ0cmFjdEVxdWF0aW9uXTozMjc3OX07aWYoaXNXZWJHTDIpe2VxdWF0aW9uVG9HTFtNaW5FcXVhdGlvbl09MzI3NzU7ZXF1YXRpb25Ub0dMW01heEVxdWF0aW9uXT0zMjc3Njt9ZWxzZSB7Y29uc3QgZXh0ZW5zaW9uPWV4dGVuc2lvbnMuZ2V0KCdFWFRfYmxlbmRfbWlubWF4Jyk7aWYoZXh0ZW5zaW9uIT09bnVsbCl7ZXF1YXRpb25Ub0dMW01pbkVxdWF0aW9uXT1leHRlbnNpb24uTUlOX0VYVDtlcXVhdGlvblRvR0xbTWF4RXF1YXRpb25dPWV4dGVuc2lvbi5NQVhfRVhUO319Y29uc3QgZmFjdG9yVG9HTD17W1plcm9GYWN0b3JdOjAsW09uZUZhY3Rvcl06MSxbU3JjQ29sb3JGYWN0b3JdOjc2OCxbU3JjQWxwaGFGYWN0b3JdOjc3MCxbU3JjQWxwaGFTYXR1cmF0ZUZhY3Rvcl06Nzc2LFtEc3RDb2xvckZhY3Rvcl06Nzc0LFtEc3RBbHBoYUZhY3Rvcl06NzcyLFtPbmVNaW51c1NyY0NvbG9yRmFjdG9yXTo3NjksW09uZU1pbnVzU3JjQWxwaGFGYWN0b3JdOjc3MSxbT25lTWludXNEc3RDb2xvckZhY3Rvcl06Nzc1LFtPbmVNaW51c0RzdEFscGhhRmFjdG9yXTo3NzN9O2Z1bmN0aW9uIHNldEJsZW5kaW5nKGJsZW5kaW5nLGJsZW5kRXF1YXRpb24sYmxlbmRTcmMsYmxlbmREc3QsYmxlbmRFcXVhdGlvbkFscGhhLGJsZW5kU3JjQWxwaGEsYmxlbmREc3RBbHBoYSxwcmVtdWx0aXBsaWVkQWxwaGEpe2lmKGJsZW5kaW5nPT09Tm9CbGVuZGluZyl7aWYoY3VycmVudEJsZW5kaW5nRW5hYmxlZD09PXRydWUpe2Rpc2FibGUoMzA0Mik7Y3VycmVudEJsZW5kaW5nRW5hYmxlZD1mYWxzZTt9cmV0dXJuO31pZihjdXJyZW50QmxlbmRpbmdFbmFibGVkPT09ZmFsc2Upe2VuYWJsZSgzMDQyKTtjdXJyZW50QmxlbmRpbmdFbmFibGVkPXRydWU7fWlmKGJsZW5kaW5nIT09Q3VzdG9tQmxlbmRpbmcpe2lmKGJsZW5kaW5nIT09Y3VycmVudEJsZW5kaW5nfHxwcmVtdWx0aXBsaWVkQWxwaGEhPT1jdXJyZW50UHJlbXVsdGlwbGVkQWxwaGEpe2lmKGN1cnJlbnRCbGVuZEVxdWF0aW9uIT09QWRkRXF1YXRpb258fGN1cnJlbnRCbGVuZEVxdWF0aW9uQWxwaGEhPT1BZGRFcXVhdGlvbil7Z2wuYmxlbmRFcXVhdGlvbigzMjc3NCk7Y3VycmVudEJsZW5kRXF1YXRpb249QWRkRXF1YXRpb247Y3VycmVudEJsZW5kRXF1YXRpb25BbHBoYT1BZGRFcXVhdGlvbjt9aWYocHJlbXVsdGlwbGllZEFscGhhKXtzd2l0Y2goYmxlbmRpbmcpe2Nhc2UgTm9ybWFsQmxlbmRpbmc6Z2wuYmxlbmRGdW5jU2VwYXJhdGUoMSw3NzEsMSw3NzEpO2JyZWFrO2Nhc2UgQWRkaXRpdmVCbGVuZGluZzpnbC5ibGVuZEZ1bmMoMSwxKTticmVhaztjYXNlIFN1YnRyYWN0aXZlQmxlbmRpbmc6Z2wuYmxlbmRGdW5jU2VwYXJhdGUoMCwwLDc2OSw3NzEpO2JyZWFrO2Nhc2UgTXVsdGlwbHlCbGVuZGluZzpnbC5ibGVuZEZ1bmNTZXBhcmF0ZSgwLDc2OCwwLDc3MCk7YnJlYWs7ZGVmYXVsdDpjb25zb2xlLmVycm9yKCdUSFJFRS5XZWJHTFN0YXRlOiBJbnZhbGlkIGJsZW5kaW5nOiAnLGJsZW5kaW5nKTticmVhazt9fWVsc2Uge3N3aXRjaChibGVuZGluZyl7Y2FzZSBOb3JtYWxCbGVuZGluZzpnbC5ibGVuZEZ1bmNTZXBhcmF0ZSg3NzAsNzcxLDEsNzcxKTticmVhaztjYXNlIEFkZGl0aXZlQmxlbmRpbmc6Z2wuYmxlbmRGdW5jKDc3MCwxKTticmVhaztjYXNlIFN1YnRyYWN0aXZlQmxlbmRpbmc6Z2wuYmxlbmRGdW5jKDAsNzY5KTticmVhaztjYXNlIE11bHRpcGx5QmxlbmRpbmc6Z2wuYmxlbmRGdW5jKDAsNzY4KTticmVhaztkZWZhdWx0OmNvbnNvbGUuZXJyb3IoJ1RIUkVFLldlYkdMU3RhdGU6IEludmFsaWQgYmxlbmRpbmc6ICcsYmxlbmRpbmcpO2JyZWFrO319Y3VycmVudEJsZW5kU3JjPW51bGw7Y3VycmVudEJsZW5kRHN0PW51bGw7Y3VycmVudEJsZW5kU3JjQWxwaGE9bnVsbDtjdXJyZW50QmxlbmREc3RBbHBoYT1udWxsO2N1cnJlbnRCbGVuZGluZz1ibGVuZGluZztjdXJyZW50UHJlbXVsdGlwbGVkQWxwaGE9cHJlbXVsdGlwbGllZEFscGhhO31yZXR1cm47fS8vIGN1c3RvbSBibGVuZGluZwoJYmxlbmRFcXVhdGlvbkFscGhhPWJsZW5kRXF1YXRpb25BbHBoYXx8YmxlbmRFcXVhdGlvbjtibGVuZFNyY0FscGhhPWJsZW5kU3JjQWxwaGF8fGJsZW5kU3JjO2JsZW5kRHN0QWxwaGE9YmxlbmREc3RBbHBoYXx8YmxlbmREc3Q7aWYoYmxlbmRFcXVhdGlvbiE9PWN1cnJlbnRCbGVuZEVxdWF0aW9ufHxibGVuZEVxdWF0aW9uQWxwaGEhPT1jdXJyZW50QmxlbmRFcXVhdGlvbkFscGhhKXtnbC5ibGVuZEVxdWF0aW9uU2VwYXJhdGUoZXF1YXRpb25Ub0dMW2JsZW5kRXF1YXRpb25dLGVxdWF0aW9uVG9HTFtibGVuZEVxdWF0aW9uQWxwaGFdKTtjdXJyZW50QmxlbmRFcXVhdGlvbj1ibGVuZEVxdWF0aW9uO2N1cnJlbnRCbGVuZEVxdWF0aW9uQWxwaGE9YmxlbmRFcXVhdGlvbkFscGhhO31pZihibGVuZFNyYyE9PWN1cnJlbnRCbGVuZFNyY3x8YmxlbmREc3QhPT1jdXJyZW50QmxlbmREc3R8fGJsZW5kU3JjQWxwaGEhPT1jdXJyZW50QmxlbmRTcmNBbHBoYXx8YmxlbmREc3RBbHBoYSE9PWN1cnJlbnRCbGVuZERzdEFscGhhKXtnbC5ibGVuZEZ1bmNTZXBhcmF0ZShmYWN0b3JUb0dMW2JsZW5kU3JjXSxmYWN0b3JUb0dMW2JsZW5kRHN0XSxmYWN0b3JUb0dMW2JsZW5kU3JjQWxwaGFdLGZhY3RvclRvR0xbYmxlbmREc3RBbHBoYV0pO2N1cnJlbnRCbGVuZFNyYz1ibGVuZFNyYztjdXJyZW50QmxlbmREc3Q9YmxlbmREc3Q7Y3VycmVudEJsZW5kU3JjQWxwaGE9YmxlbmRTcmNBbHBoYTtjdXJyZW50QmxlbmREc3RBbHBoYT1ibGVuZERzdEFscGhhO31jdXJyZW50QmxlbmRpbmc9YmxlbmRpbmc7Y3VycmVudFByZW11bHRpcGxlZEFscGhhPW51bGw7fWZ1bmN0aW9uIHNldE1hdGVyaWFsKG1hdGVyaWFsLGZyb250RmFjZUNXKXttYXRlcmlhbC5zaWRlPT09RG91YmxlU2lkZT9kaXNhYmxlKDI4ODQpOmVuYWJsZSgyODg0KTtsZXQgZmxpcFNpZGVkPW1hdGVyaWFsLnNpZGU9PT1CYWNrU2lkZTtpZihmcm9udEZhY2VDVylmbGlwU2lkZWQ9IWZsaXBTaWRlZDtzZXRGbGlwU2lkZWQoZmxpcFNpZGVkKTttYXRlcmlhbC5ibGVuZGluZz09PU5vcm1hbEJsZW5kaW5nJiZtYXRlcmlhbC50cmFuc3BhcmVudD09PWZhbHNlP3NldEJsZW5kaW5nKE5vQmxlbmRpbmcpOnNldEJsZW5kaW5nKG1hdGVyaWFsLmJsZW5kaW5nLG1hdGVyaWFsLmJsZW5kRXF1YXRpb24sbWF0ZXJpYWwuYmxlbmRTcmMsbWF0ZXJpYWwuYmxlbmREc3QsbWF0ZXJpYWwuYmxlbmRFcXVhdGlvbkFscGhhLG1hdGVyaWFsLmJsZW5kU3JjQWxwaGEsbWF0ZXJpYWwuYmxlbmREc3RBbHBoYSxtYXRlcmlhbC5wcmVtdWx0aXBsaWVkQWxwaGEpO2RlcHRoQnVmZmVyLnNldEZ1bmMobWF0ZXJpYWwuZGVwdGhGdW5jKTtkZXB0aEJ1ZmZlci5zZXRUZXN0KG1hdGVyaWFsLmRlcHRoVGVzdCk7ZGVwdGhCdWZmZXIuc2V0TWFzayhtYXRlcmlhbC5kZXB0aFdyaXRlKTtjb2xvckJ1ZmZlci5zZXRNYXNrKG1hdGVyaWFsLmNvbG9yV3JpdGUpO2NvbnN0IHN0ZW5jaWxXcml0ZT1tYXRlcmlhbC5zdGVuY2lsV3JpdGU7c3RlbmNpbEJ1ZmZlci5zZXRUZXN0KHN0ZW5jaWxXcml0ZSk7aWYoc3RlbmNpbFdyaXRlKXtzdGVuY2lsQnVmZmVyLnNldE1hc2sobWF0ZXJpYWwuc3RlbmNpbFdyaXRlTWFzayk7c3RlbmNpbEJ1ZmZlci5zZXRGdW5jKG1hdGVyaWFsLnN0ZW5jaWxGdW5jLG1hdGVyaWFsLnN0ZW5jaWxSZWYsbWF0ZXJpYWwuc3RlbmNpbEZ1bmNNYXNrKTtzdGVuY2lsQnVmZmVyLnNldE9wKG1hdGVyaWFsLnN0ZW5jaWxGYWlsLG1hdGVyaWFsLnN0ZW5jaWxaRmFpbCxtYXRlcmlhbC5zdGVuY2lsWlBhc3MpO31zZXRQb2x5Z29uT2Zmc2V0KG1hdGVyaWFsLnBvbHlnb25PZmZzZXQsbWF0ZXJpYWwucG9seWdvbk9mZnNldEZhY3RvcixtYXRlcmlhbC5wb2x5Z29uT2Zmc2V0VW5pdHMpO21hdGVyaWFsLmFscGhhVG9Db3ZlcmFnZT09PXRydWU/ZW5hYmxlKDMyOTI2KTpkaXNhYmxlKDMyOTI2KTt9Ly8KCWZ1bmN0aW9uIHNldEZsaXBTaWRlZChmbGlwU2lkZWQpe2lmKGN1cnJlbnRGbGlwU2lkZWQhPT1mbGlwU2lkZWQpe2lmKGZsaXBTaWRlZCl7Z2wuZnJvbnRGYWNlKDIzMDQpO31lbHNlIHtnbC5mcm9udEZhY2UoMjMwNSk7fWN1cnJlbnRGbGlwU2lkZWQ9ZmxpcFNpZGVkO319ZnVuY3Rpb24gc2V0Q3VsbEZhY2UoY3VsbEZhY2Upe2lmKGN1bGxGYWNlIT09Q3VsbEZhY2VOb25lKXtlbmFibGUoMjg4NCk7aWYoY3VsbEZhY2UhPT1jdXJyZW50Q3VsbEZhY2Upe2lmKGN1bGxGYWNlPT09Q3VsbEZhY2VCYWNrKXtnbC5jdWxsRmFjZSgxMDI5KTt9ZWxzZSBpZihjdWxsRmFjZT09PUN1bGxGYWNlRnJvbnQpe2dsLmN1bGxGYWNlKDEwMjgpO31lbHNlIHtnbC5jdWxsRmFjZSgxMDMyKTt9fX1lbHNlIHtkaXNhYmxlKDI4ODQpO31jdXJyZW50Q3VsbEZhY2U9Y3VsbEZhY2U7fWZ1bmN0aW9uIHNldExpbmVXaWR0aCh3aWR0aCl7aWYod2lkdGghPT1jdXJyZW50TGluZVdpZHRoKXtpZihsaW5lV2lkdGhBdmFpbGFibGUpZ2wubGluZVdpZHRoKHdpZHRoKTtjdXJyZW50TGluZVdpZHRoPXdpZHRoO319ZnVuY3Rpb24gc2V0UG9seWdvbk9mZnNldChwb2x5Z29uT2Zmc2V0LGZhY3Rvcix1bml0cyl7aWYocG9seWdvbk9mZnNldCl7ZW5hYmxlKDMyODIzKTtpZihjdXJyZW50UG9seWdvbk9mZnNldEZhY3RvciE9PWZhY3Rvcnx8Y3VycmVudFBvbHlnb25PZmZzZXRVbml0cyE9PXVuaXRzKXtnbC5wb2x5Z29uT2Zmc2V0KGZhY3Rvcix1bml0cyk7Y3VycmVudFBvbHlnb25PZmZzZXRGYWN0b3I9ZmFjdG9yO2N1cnJlbnRQb2x5Z29uT2Zmc2V0VW5pdHM9dW5pdHM7fX1lbHNlIHtkaXNhYmxlKDMyODIzKTt9fWZ1bmN0aW9uIHNldFNjaXNzb3JUZXN0KHNjaXNzb3JUZXN0KXtpZihzY2lzc29yVGVzdCl7ZW5hYmxlKDMwODkpO31lbHNlIHtkaXNhYmxlKDMwODkpO319Ly8gdGV4dHVyZQoJZnVuY3Rpb24gYWN0aXZlVGV4dHVyZSh3ZWJnbFNsb3Qpe2lmKHdlYmdsU2xvdD09PXVuZGVmaW5lZCl3ZWJnbFNsb3Q9MzM5ODQrbWF4VGV4dHVyZXMtMTtpZihjdXJyZW50VGV4dHVyZVNsb3QhPT13ZWJnbFNsb3Qpe2dsLmFjdGl2ZVRleHR1cmUod2ViZ2xTbG90KTtjdXJyZW50VGV4dHVyZVNsb3Q9d2ViZ2xTbG90O319ZnVuY3Rpb24gYmluZFRleHR1cmUod2ViZ2xUeXBlLHdlYmdsVGV4dHVyZSl7aWYoY3VycmVudFRleHR1cmVTbG90PT09bnVsbCl7YWN0aXZlVGV4dHVyZSgpO31sZXQgYm91bmRUZXh0dXJlPWN1cnJlbnRCb3VuZFRleHR1cmVzW2N1cnJlbnRUZXh0dXJlU2xvdF07aWYoYm91bmRUZXh0dXJlPT09dW5kZWZpbmVkKXtib3VuZFRleHR1cmU9e3R5cGU6dW5kZWZpbmVkLHRleHR1cmU6dW5kZWZpbmVkfTtjdXJyZW50Qm91bmRUZXh0dXJlc1tjdXJyZW50VGV4dHVyZVNsb3RdPWJvdW5kVGV4dHVyZTt9aWYoYm91bmRUZXh0dXJlLnR5cGUhPT13ZWJnbFR5cGV8fGJvdW5kVGV4dHVyZS50ZXh0dXJlIT09d2ViZ2xUZXh0dXJlKXtnbC5iaW5kVGV4dHVyZSh3ZWJnbFR5cGUsd2ViZ2xUZXh0dXJlfHxlbXB0eVRleHR1cmVzW3dlYmdsVHlwZV0pO2JvdW5kVGV4dHVyZS50eXBlPXdlYmdsVHlwZTtib3VuZFRleHR1cmUudGV4dHVyZT13ZWJnbFRleHR1cmU7fX1mdW5jdGlvbiB1bmJpbmRUZXh0dXJlKCl7Y29uc3QgYm91bmRUZXh0dXJlPWN1cnJlbnRCb3VuZFRleHR1cmVzW2N1cnJlbnRUZXh0dXJlU2xvdF07aWYoYm91bmRUZXh0dXJlIT09dW5kZWZpbmVkJiZib3VuZFRleHR1cmUudHlwZSE9PXVuZGVmaW5lZCl7Z2wuYmluZFRleHR1cmUoYm91bmRUZXh0dXJlLnR5cGUsbnVsbCk7Ym91bmRUZXh0dXJlLnR5cGU9dW5kZWZpbmVkO2JvdW5kVGV4dHVyZS50ZXh0dXJlPXVuZGVmaW5lZDt9fWZ1bmN0aW9uIGNvbXByZXNzZWRUZXhJbWFnZTJEKCl7dHJ5e2dsLmNvbXByZXNzZWRUZXhJbWFnZTJELmFwcGx5KGdsLGFyZ3VtZW50cyk7fWNhdGNoKGVycm9yKXtjb25zb2xlLmVycm9yKCdUSFJFRS5XZWJHTFN0YXRlOicsZXJyb3IpO319ZnVuY3Rpb24gdGV4U3ViSW1hZ2UyRCgpe3RyeXtnbC50ZXhTdWJJbWFnZTJELmFwcGx5KGdsLGFyZ3VtZW50cyk7fWNhdGNoKGVycm9yKXtjb25zb2xlLmVycm9yKCdUSFJFRS5XZWJHTFN0YXRlOicsZXJyb3IpO319ZnVuY3Rpb24gdGV4U3RvcmFnZTJEKCl7dHJ5e2dsLnRleFN0b3JhZ2UyRC5hcHBseShnbCxhcmd1bWVudHMpO31jYXRjaChlcnJvcil7Y29uc29sZS5lcnJvcignVEhSRUUuV2ViR0xTdGF0ZTonLGVycm9yKTt9fWZ1bmN0aW9uIHRleEltYWdlMkQoKXt0cnl7Z2wudGV4SW1hZ2UyRC5hcHBseShnbCxhcmd1bWVudHMpO31jYXRjaChlcnJvcil7Y29uc29sZS5lcnJvcignVEhSRUUuV2ViR0xTdGF0ZTonLGVycm9yKTt9fWZ1bmN0aW9uIHRleEltYWdlM0QoKXt0cnl7Z2wudGV4SW1hZ2UzRC5hcHBseShnbCxhcmd1bWVudHMpO31jYXRjaChlcnJvcil7Y29uc29sZS5lcnJvcignVEhSRUUuV2ViR0xTdGF0ZTonLGVycm9yKTt9fS8vCglmdW5jdGlvbiBzY2lzc29yKHNjaXNzb3Ipe2lmKGN1cnJlbnRTY2lzc29yLmVxdWFscyhzY2lzc29yKT09PWZhbHNlKXtnbC5zY2lzc29yKHNjaXNzb3IueCxzY2lzc29yLnksc2Npc3Nvci56LHNjaXNzb3Iudyk7Y3VycmVudFNjaXNzb3IuY29weShzY2lzc29yKTt9fWZ1bmN0aW9uIHZpZXdwb3J0KHZpZXdwb3J0KXtpZihjdXJyZW50Vmlld3BvcnQuZXF1YWxzKHZpZXdwb3J0KT09PWZhbHNlKXtnbC52aWV3cG9ydCh2aWV3cG9ydC54LHZpZXdwb3J0Lnksdmlld3BvcnQueix2aWV3cG9ydC53KTtjdXJyZW50Vmlld3BvcnQuY29weSh2aWV3cG9ydCk7fX0vLwoJZnVuY3Rpb24gcmVzZXQoKXsvLyByZXNldCBzdGF0ZQoJZ2wuZGlzYWJsZSgzMDQyKTtnbC5kaXNhYmxlKDI4ODQpO2dsLmRpc2FibGUoMjkyOSk7Z2wuZGlzYWJsZSgzMjgyMyk7Z2wuZGlzYWJsZSgzMDg5KTtnbC5kaXNhYmxlKDI5NjApO2dsLmRpc2FibGUoMzI5MjYpO2dsLmJsZW5kRXF1YXRpb24oMzI3NzQpO2dsLmJsZW5kRnVuYygxLDApO2dsLmJsZW5kRnVuY1NlcGFyYXRlKDEsMCwxLDApO2dsLmNvbG9yTWFzayh0cnVlLHRydWUsdHJ1ZSx0cnVlKTtnbC5jbGVhckNvbG9yKDAsMCwwLDApO2dsLmRlcHRoTWFzayh0cnVlKTtnbC5kZXB0aEZ1bmMoNTEzKTtnbC5jbGVhckRlcHRoKDEpO2dsLnN0ZW5jaWxNYXNrKDB4ZmZmZmZmZmYpO2dsLnN0ZW5jaWxGdW5jKDUxOSwwLDB4ZmZmZmZmZmYpO2dsLnN0ZW5jaWxPcCg3NjgwLDc2ODAsNzY4MCk7Z2wuY2xlYXJTdGVuY2lsKDApO2dsLmN1bGxGYWNlKDEwMjkpO2dsLmZyb250RmFjZSgyMzA1KTtnbC5wb2x5Z29uT2Zmc2V0KDAsMCk7Z2wuYWN0aXZlVGV4dHVyZSgzMzk4NCk7Z2wuYmluZEZyYW1lYnVmZmVyKDM2MTYwLG51bGwpO2lmKGlzV2ViR0wyPT09dHJ1ZSl7Z2wuYmluZEZyYW1lYnVmZmVyKDM2MDA5LG51bGwpO2dsLmJpbmRGcmFtZWJ1ZmZlcigzNjAwOCxudWxsKTt9Z2wudXNlUHJvZ3JhbShudWxsKTtnbC5saW5lV2lkdGgoMSk7Z2wuc2Npc3NvcigwLDAsZ2wuY2FudmFzLndpZHRoLGdsLmNhbnZhcy5oZWlnaHQpO2dsLnZpZXdwb3J0KDAsMCxnbC5jYW52YXMud2lkdGgsZ2wuY2FudmFzLmhlaWdodCk7Ly8gcmVzZXQgaW50ZXJuYWxzCgllbmFibGVkQ2FwYWJpbGl0aWVzPXt9O2N1cnJlbnRUZXh0dXJlU2xvdD1udWxsO2N1cnJlbnRCb3VuZFRleHR1cmVzPXt9O2N1cnJlbnRCb3VuZEZyYW1lYnVmZmVycz17fTtjdXJyZW50UHJvZ3JhbT1udWxsO2N1cnJlbnRCbGVuZGluZ0VuYWJsZWQ9ZmFsc2U7Y3VycmVudEJsZW5kaW5nPW51bGw7Y3VycmVudEJsZW5kRXF1YXRpb249bnVsbDtjdXJyZW50QmxlbmRTcmM9bnVsbDtjdXJyZW50QmxlbmREc3Q9bnVsbDtjdXJyZW50QmxlbmRFcXVhdGlvbkFscGhhPW51bGw7Y3VycmVudEJsZW5kU3JjQWxwaGE9bnVsbDtjdXJyZW50QmxlbmREc3RBbHBoYT1udWxsO2N1cnJlbnRQcmVtdWx0aXBsZWRBbHBoYT1mYWxzZTtjdXJyZW50RmxpcFNpZGVkPW51bGw7Y3VycmVudEN1bGxGYWNlPW51bGw7Y3VycmVudExpbmVXaWR0aD1udWxsO2N1cnJlbnRQb2x5Z29uT2Zmc2V0RmFjdG9yPW51bGw7Y3VycmVudFBvbHlnb25PZmZzZXRVbml0cz1udWxsO2N1cnJlbnRTY2lzc29yLnNldCgwLDAsZ2wuY2FudmFzLndpZHRoLGdsLmNhbnZhcy5oZWlnaHQpO2N1cnJlbnRWaWV3cG9ydC5zZXQoMCwwLGdsLmNhbnZhcy53aWR0aCxnbC5jYW52YXMuaGVpZ2h0KTtjb2xvckJ1ZmZlci5yZXNldCgpO2RlcHRoQnVmZmVyLnJlc2V0KCk7c3RlbmNpbEJ1ZmZlci5yZXNldCgpO31yZXR1cm4ge2J1ZmZlcnM6e2NvbG9yOmNvbG9yQnVmZmVyLGRlcHRoOmRlcHRoQnVmZmVyLHN0ZW5jaWw6c3RlbmNpbEJ1ZmZlcn0sZW5hYmxlOmVuYWJsZSxkaXNhYmxlOmRpc2FibGUsYmluZEZyYW1lYnVmZmVyOmJpbmRGcmFtZWJ1ZmZlcix1c2VQcm9ncmFtOnVzZVByb2dyYW0sc2V0QmxlbmRpbmc6c2V0QmxlbmRpbmcsc2V0TWF0ZXJpYWw6c2V0TWF0ZXJpYWwsc2V0RmxpcFNpZGVkOnNldEZsaXBTaWRlZCxzZXRDdWxsRmFjZTpzZXRDdWxsRmFjZSxzZXRMaW5lV2lkdGg6c2V0TGluZVdpZHRoLHNldFBvbHlnb25PZmZzZXQ6c2V0UG9seWdvbk9mZnNldCxzZXRTY2lzc29yVGVzdDpzZXRTY2lzc29yVGVzdCxhY3RpdmVUZXh0dXJlOmFjdGl2ZVRleHR1cmUsYmluZFRleHR1cmU6YmluZFRleHR1cmUsdW5iaW5kVGV4dHVyZTp1bmJpbmRUZXh0dXJlLGNvbXByZXNzZWRUZXhJbWFnZTJEOmNvbXByZXNzZWRUZXhJbWFnZTJELHRleEltYWdlMkQ6dGV4SW1hZ2UyRCx0ZXhJbWFnZTNEOnRleEltYWdlM0QsdGV4U3RvcmFnZTJEOnRleFN0b3JhZ2UyRCx0ZXhTdWJJbWFnZTJEOnRleFN1YkltYWdlMkQsc2Npc3NvcjpzY2lzc29yLHZpZXdwb3J0OnZpZXdwb3J0LHJlc2V0OnJlc2V0fTt9ZnVuY3Rpb24gV2ViR0xUZXh0dXJlcyhfZ2wsZXh0ZW5zaW9ucyxzdGF0ZSxwcm9wZXJ0aWVzLGNhcGFiaWxpdGllcyx1dGlscyxpbmZvKXtjb25zdCBpc1dlYkdMMj1jYXBhYmlsaXRpZXMuaXNXZWJHTDI7Y29uc3QgbWF4VGV4dHVyZXM9Y2FwYWJpbGl0aWVzLm1heFRleHR1cmVzO2NvbnN0IG1heEN1YmVtYXBTaXplPWNhcGFiaWxpdGllcy5tYXhDdWJlbWFwU2l6ZTtjb25zdCBtYXhUZXh0dXJlU2l6ZT1jYXBhYmlsaXRpZXMubWF4VGV4dHVyZVNpemU7Y29uc3QgbWF4U2FtcGxlcz1jYXBhYmlsaXRpZXMubWF4U2FtcGxlcztjb25zdCBoYXNNdWx0aXNhbXBsZWRSZW5kZXJUb1RleHR1cmU9ZXh0ZW5zaW9ucy5oYXMoJ1dFQkdMX211bHRpc2FtcGxlZF9yZW5kZXJfdG9fdGV4dHVyZScpO2NvbnN0IE11bHRpc2FtcGxlZFJlbmRlclRvVGV4dHVyZUV4dGVuc2lvbj1oYXNNdWx0aXNhbXBsZWRSZW5kZXJUb1RleHR1cmU/ZXh0ZW5zaW9ucy5nZXQoJ1dFQkdMX211bHRpc2FtcGxlZF9yZW5kZXJfdG9fdGV4dHVyZScpOnVuZGVmaW5lZDtjb25zdCBfdmlkZW9UZXh0dXJlcz1uZXcgV2Vha01hcCgpO2xldCBfY2FudmFzOy8vIGNvcmRvdmEgaU9TIChhcyBvZiA1LjApIHN0aWxsIHVzZXMgVUlXZWJWaWV3LCB3aGljaCBwcm92aWRlcyBPZmZzY3JlZW5DYW52YXMsCgkvLyBhbHNvIE9mZnNjcmVlbkNhbnZhcy5nZXRDb250ZXh0KCJ3ZWJnbCIpLCBidXQgbm90IE9mZnNjcmVlbkNhbnZhcy5nZXRDb250ZXh0KCIyZCIpIQoJLy8gU29tZSBpbXBsZW1lbnRhdGlvbnMgbWF5IG9ubHkgaW1wbGVtZW50IE9mZnNjcmVlbkNhbnZhcyBwYXJ0aWFsbHkgKGUuZy4gbGFja2luZyAyZCkuCglsZXQgdXNlT2Zmc2NyZWVuQ2FudmFzPWZhbHNlO3RyeXt1c2VPZmZzY3JlZW5DYW52YXM9dHlwZW9mIE9mZnNjcmVlbkNhbnZhcyE9PSd1bmRlZmluZWQnJiZuZXcgT2Zmc2NyZWVuQ2FudmFzKDEsMSkuZ2V0Q29udGV4dCgnMmQnKSE9PW51bGw7fWNhdGNoKGVycil7Ly8gSWdub3JlIGFueSBlcnJvcnMKCX1mdW5jdGlvbiBjcmVhdGVDYW52YXMod2lkdGgsaGVpZ2h0KXsvLyBVc2UgT2Zmc2NyZWVuQ2FudmFzIHdoZW4gYXZhaWxhYmxlLiBTcGVjaWFsbHkgbmVlZGVkIGluIHdlYiB3b3JrZXJzCglyZXR1cm4gdXNlT2Zmc2NyZWVuQ2FudmFzP25ldyBPZmZzY3JlZW5DYW52YXMod2lkdGgsaGVpZ2h0KTpjcmVhdGVFbGVtZW50TlMoJ2NhbnZhcycpO31mdW5jdGlvbiByZXNpemVJbWFnZShpbWFnZSxuZWVkc1Bvd2VyT2ZUd28sbmVlZHNOZXdDYW52YXMsbWF4U2l6ZSl7bGV0IHNjYWxlPTE7Ly8gaGFuZGxlIGNhc2UgaWYgdGV4dHVyZSBleGNlZWRzIG1heCBzaXplCglpZihpbWFnZS53aWR0aD5tYXhTaXplfHxpbWFnZS5oZWlnaHQ+bWF4U2l6ZSl7c2NhbGU9bWF4U2l6ZS9NYXRoLm1heChpbWFnZS53aWR0aCxpbWFnZS5oZWlnaHQpO30vLyBvbmx5IHBlcmZvcm0gcmVzaXplIGlmIG5lY2Vzc2FyeQoJaWYoc2NhbGU8MXx8bmVlZHNQb3dlck9mVHdvPT09dHJ1ZSl7Ly8gb25seSBwZXJmb3JtIHJlc2l6ZSBmb3IgY2VydGFpbiBpbWFnZSB0eXBlcwoJaWYodHlwZW9mIEhUTUxJbWFnZUVsZW1lbnQhPT0ndW5kZWZpbmVkJyYmaW1hZ2UgaW5zdGFuY2VvZiBIVE1MSW1hZ2VFbGVtZW50fHx0eXBlb2YgSFRNTENhbnZhc0VsZW1lbnQhPT0ndW5kZWZpbmVkJyYmaW1hZ2UgaW5zdGFuY2VvZiBIVE1MQ2FudmFzRWxlbWVudHx8dHlwZW9mIEltYWdlQml0bWFwIT09J3VuZGVmaW5lZCcmJmltYWdlIGluc3RhbmNlb2YgSW1hZ2VCaXRtYXApe2NvbnN0IGZsb29yPW5lZWRzUG93ZXJPZlR3bz9mbG9vclBvd2VyT2ZUd286TWF0aC5mbG9vcjtjb25zdCB3aWR0aD1mbG9vcihzY2FsZSppbWFnZS53aWR0aCk7Y29uc3QgaGVpZ2h0PWZsb29yKHNjYWxlKmltYWdlLmhlaWdodCk7aWYoX2NhbnZhcz09PXVuZGVmaW5lZClfY2FudmFzPWNyZWF0ZUNhbnZhcyh3aWR0aCxoZWlnaHQpOy8vIGN1YmUgdGV4dHVyZXMgY2FuJ3QgcmV1c2UgdGhlIHNhbWUgY2FudmFzCgljb25zdCBjYW52YXM9bmVlZHNOZXdDYW52YXM/Y3JlYXRlQ2FudmFzKHdpZHRoLGhlaWdodCk6X2NhbnZhcztjYW52YXMud2lkdGg9d2lkdGg7Y2FudmFzLmhlaWdodD1oZWlnaHQ7Y29uc3QgY29udGV4dD1jYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtjb250ZXh0LmRyYXdJbWFnZShpbWFnZSwwLDAsd2lkdGgsaGVpZ2h0KTtjb25zb2xlLndhcm4oJ1RIUkVFLldlYkdMUmVuZGVyZXI6IFRleHR1cmUgaGFzIGJlZW4gcmVzaXplZCBmcm9tICgnK2ltYWdlLndpZHRoKyd4JytpbWFnZS5oZWlnaHQrJykgdG8gKCcrd2lkdGgrJ3gnK2hlaWdodCsnKS4nKTtyZXR1cm4gY2FudmFzO31lbHNlIHtpZignZGF0YSdpbiBpbWFnZSl7Y29uc29sZS53YXJuKCdUSFJFRS5XZWJHTFJlbmRlcmVyOiBJbWFnZSBpbiBEYXRhVGV4dHVyZSBpcyB0b28gYmlnICgnK2ltYWdlLndpZHRoKyd4JytpbWFnZS5oZWlnaHQrJykuJyk7fXJldHVybiBpbWFnZTt9fXJldHVybiBpbWFnZTt9ZnVuY3Rpb24gaXNQb3dlck9mVHdvJDEoaW1hZ2Upe3JldHVybiBpc1Bvd2VyT2ZUd28oaW1hZ2Uud2lkdGgpJiZpc1Bvd2VyT2ZUd28oaW1hZ2UuaGVpZ2h0KTt9ZnVuY3Rpb24gdGV4dHVyZU5lZWRzUG93ZXJPZlR3byh0ZXh0dXJlKXtpZihpc1dlYkdMMilyZXR1cm4gZmFsc2U7cmV0dXJuIHRleHR1cmUud3JhcFMhPT1DbGFtcFRvRWRnZVdyYXBwaW5nfHx0ZXh0dXJlLndyYXBUIT09Q2xhbXBUb0VkZ2VXcmFwcGluZ3x8dGV4dHVyZS5taW5GaWx0ZXIhPT1OZWFyZXN0RmlsdGVyJiZ0ZXh0dXJlLm1pbkZpbHRlciE9PUxpbmVhckZpbHRlcjt9ZnVuY3Rpb24gdGV4dHVyZU5lZWRzR2VuZXJhdGVNaXBtYXBzKHRleHR1cmUsc3VwcG9ydHNNaXBzKXtyZXR1cm4gdGV4dHVyZS5nZW5lcmF0ZU1pcG1hcHMmJnN1cHBvcnRzTWlwcyYmdGV4dHVyZS5taW5GaWx0ZXIhPT1OZWFyZXN0RmlsdGVyJiZ0ZXh0dXJlLm1pbkZpbHRlciE9PUxpbmVhckZpbHRlcjt9ZnVuY3Rpb24gZ2VuZXJhdGVNaXBtYXAodGFyZ2V0KXtfZ2wuZ2VuZXJhdGVNaXBtYXAodGFyZ2V0KTt9ZnVuY3Rpb24gZ2V0SW50ZXJuYWxGb3JtYXQoaW50ZXJuYWxGb3JtYXROYW1lLGdsRm9ybWF0LGdsVHlwZS8qLCBlbmNvZGluZyovKXtpZihpc1dlYkdMMj09PWZhbHNlKXJldHVybiBnbEZvcm1hdDtpZihpbnRlcm5hbEZvcm1hdE5hbWUhPT1udWxsKXtpZihfZ2xbaW50ZXJuYWxGb3JtYXROYW1lXSE9PXVuZGVmaW5lZClyZXR1cm4gX2dsW2ludGVybmFsRm9ybWF0TmFtZV07Y29uc29sZS53YXJuKCdUSFJFRS5XZWJHTFJlbmRlcmVyOiBBdHRlbXB0IHRvIHVzZSBub24tZXhpc3RpbmcgV2ViR0wgaW50ZXJuYWwgZm9ybWF0IFwnJytpbnRlcm5hbEZvcm1hdE5hbWUrJ1wnJyk7fWxldCBpbnRlcm5hbEZvcm1hdD1nbEZvcm1hdDtpZihnbEZvcm1hdD09PTY0MDMpe2lmKGdsVHlwZT09PTUxMjYpaW50ZXJuYWxGb3JtYXQ9MzMzMjY7aWYoZ2xUeXBlPT09NTEzMSlpbnRlcm5hbEZvcm1hdD0zMzMyNTtpZihnbFR5cGU9PT01MTIxKWludGVybmFsRm9ybWF0PTMzMzIxO31pZihnbEZvcm1hdD09PTY0MDcpe2lmKGdsVHlwZT09PTUxMjYpaW50ZXJuYWxGb3JtYXQ9MzQ4Mzc7aWYoZ2xUeXBlPT09NTEzMSlpbnRlcm5hbEZvcm1hdD0zNDg0MztpZihnbFR5cGU9PT01MTIxKWludGVybmFsRm9ybWF0PTMyODQ5O31pZihnbEZvcm1hdD09PTY0MDgpe2lmKGdsVHlwZT09PTUxMjYpaW50ZXJuYWxGb3JtYXQ9MzQ4MzY7aWYoZ2xUeXBlPT09NTEzMSlpbnRlcm5hbEZvcm1hdD0zNDg0MjsvL2lmICggZ2xUeXBlID09PSA1MTIxICkgaW50ZXJuYWxGb3JtYXQgPSAoIGVuY29kaW5nID09PSBzUkdCRW5jb2RpbmcgKSA/IDM1OTA3IDogMzI4NTY7CglpZihnbFR5cGU9PT01MTIxKWludGVybmFsRm9ybWF0PTMyODU2O31pZihpbnRlcm5hbEZvcm1hdD09PTMzMzI1fHxpbnRlcm5hbEZvcm1hdD09PTMzMzI2fHxpbnRlcm5hbEZvcm1hdD09PTM0ODQyfHxpbnRlcm5hbEZvcm1hdD09PTM0ODM2KXtleHRlbnNpb25zLmdldCgnRVhUX2NvbG9yX2J1ZmZlcl9mbG9hdCcpO31yZXR1cm4gaW50ZXJuYWxGb3JtYXQ7fWZ1bmN0aW9uIGdldE1pcExldmVscyh0ZXh0dXJlLGltYWdlLHN1cHBvcnRzTWlwcyl7aWYodGV4dHVyZU5lZWRzR2VuZXJhdGVNaXBtYXBzKHRleHR1cmUsc3VwcG9ydHNNaXBzKT09PXRydWUpey8vIGdlbmVyYXRlZCBtaXBtYXBzIHZpYSBnbC5nZW5lcmF0ZU1pcG1hcCgpCglyZXR1cm4gTWF0aC5sb2cyKE1hdGgubWF4KGltYWdlLndpZHRoLGltYWdlLmhlaWdodCkpKzE7fWVsc2UgaWYodGV4dHVyZS5taXBtYXBzLmxlbmd0aD4wKXsvLyB1c2VyLWRlZmluZWQgbWlwbWFwcwoJcmV0dXJuIHRleHR1cmUubWlwbWFwcy5sZW5ndGg7fWVsc2Ugey8vIHRleHR1cmUgd2l0aG91dCBtaXBtYXBzIChvbmx5IGJhc2UgbGV2ZWwpCglyZXR1cm4gMTt9fS8vIEZhbGxiYWNrIGZpbHRlcnMgZm9yIG5vbi1wb3dlci1vZi0yIHRleHR1cmVzCglmdW5jdGlvbiBmaWx0ZXJGYWxsYmFjayhmKXtpZihmPT09TmVhcmVzdEZpbHRlcnx8Zj09PU5lYXJlc3RNaXBtYXBOZWFyZXN0RmlsdGVyfHxmPT09TmVhcmVzdE1pcG1hcExpbmVhckZpbHRlcil7cmV0dXJuIDk3Mjg7fXJldHVybiA5NzI5O30vLwoJZnVuY3Rpb24gb25UZXh0dXJlRGlzcG9zZShldmVudCl7Y29uc3QgdGV4dHVyZT1ldmVudC50YXJnZXQ7dGV4dHVyZS5yZW1vdmVFdmVudExpc3RlbmVyKCdkaXNwb3NlJyxvblRleHR1cmVEaXNwb3NlKTtkZWFsbG9jYXRlVGV4dHVyZSh0ZXh0dXJlKTtpZih0ZXh0dXJlLmlzVmlkZW9UZXh0dXJlKXtfdmlkZW9UZXh0dXJlcy5kZWxldGUodGV4dHVyZSk7fWluZm8ubWVtb3J5LnRleHR1cmVzLS07fWZ1bmN0aW9uIG9uUmVuZGVyVGFyZ2V0RGlzcG9zZShldmVudCl7Y29uc3QgcmVuZGVyVGFyZ2V0PWV2ZW50LnRhcmdldDtyZW5kZXJUYXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcignZGlzcG9zZScsb25SZW5kZXJUYXJnZXREaXNwb3NlKTtkZWFsbG9jYXRlUmVuZGVyVGFyZ2V0KHJlbmRlclRhcmdldCk7fS8vCglmdW5jdGlvbiBkZWFsbG9jYXRlVGV4dHVyZSh0ZXh0dXJlKXtjb25zdCB0ZXh0dXJlUHJvcGVydGllcz1wcm9wZXJ0aWVzLmdldCh0ZXh0dXJlKTtpZih0ZXh0dXJlUHJvcGVydGllcy5fX3dlYmdsSW5pdD09PXVuZGVmaW5lZClyZXR1cm47X2dsLmRlbGV0ZVRleHR1cmUodGV4dHVyZVByb3BlcnRpZXMuX193ZWJnbFRleHR1cmUpO3Byb3BlcnRpZXMucmVtb3ZlKHRleHR1cmUpO31mdW5jdGlvbiBkZWFsbG9jYXRlUmVuZGVyVGFyZ2V0KHJlbmRlclRhcmdldCl7Y29uc3QgdGV4dHVyZT1yZW5kZXJUYXJnZXQudGV4dHVyZTtjb25zdCByZW5kZXJUYXJnZXRQcm9wZXJ0aWVzPXByb3BlcnRpZXMuZ2V0KHJlbmRlclRhcmdldCk7Y29uc3QgdGV4dHVyZVByb3BlcnRpZXM9cHJvcGVydGllcy5nZXQodGV4dHVyZSk7aWYoIXJlbmRlclRhcmdldClyZXR1cm47aWYodGV4dHVyZVByb3BlcnRpZXMuX193ZWJnbFRleHR1cmUhPT11bmRlZmluZWQpe19nbC5kZWxldGVUZXh0dXJlKHRleHR1cmVQcm9wZXJ0aWVzLl9fd2ViZ2xUZXh0dXJlKTtpbmZvLm1lbW9yeS50ZXh0dXJlcy0tO31pZihyZW5kZXJUYXJnZXQuZGVwdGhUZXh0dXJlKXtyZW5kZXJUYXJnZXQuZGVwdGhUZXh0dXJlLmRpc3Bvc2UoKTt9aWYocmVuZGVyVGFyZ2V0LmlzV2ViR0xDdWJlUmVuZGVyVGFyZ2V0KXtmb3IobGV0IGk9MDtpPDY7aSsrKXtfZ2wuZGVsZXRlRnJhbWVidWZmZXIocmVuZGVyVGFyZ2V0UHJvcGVydGllcy5fX3dlYmdsRnJhbWVidWZmZXJbaV0pO2lmKHJlbmRlclRhcmdldFByb3BlcnRpZXMuX193ZWJnbERlcHRoYnVmZmVyKV9nbC5kZWxldGVSZW5kZXJidWZmZXIocmVuZGVyVGFyZ2V0UHJvcGVydGllcy5fX3dlYmdsRGVwdGhidWZmZXJbaV0pO319ZWxzZSB7X2dsLmRlbGV0ZUZyYW1lYnVmZmVyKHJlbmRlclRhcmdldFByb3BlcnRpZXMuX193ZWJnbEZyYW1lYnVmZmVyKTtpZihyZW5kZXJUYXJnZXRQcm9wZXJ0aWVzLl9fd2ViZ2xEZXB0aGJ1ZmZlcilfZ2wuZGVsZXRlUmVuZGVyYnVmZmVyKHJlbmRlclRhcmdldFByb3BlcnRpZXMuX193ZWJnbERlcHRoYnVmZmVyKTtpZihyZW5kZXJUYXJnZXRQcm9wZXJ0aWVzLl9fd2ViZ2xNdWx0aXNhbXBsZWRGcmFtZWJ1ZmZlcilfZ2wuZGVsZXRlRnJhbWVidWZmZXIocmVuZGVyVGFyZ2V0UHJvcGVydGllcy5fX3dlYmdsTXVsdGlzYW1wbGVkRnJhbWVidWZmZXIpO2lmKHJlbmRlclRhcmdldFByb3BlcnRpZXMuX193ZWJnbENvbG9yUmVuZGVyYnVmZmVyKV9nbC5kZWxldGVSZW5kZXJidWZmZXIocmVuZGVyVGFyZ2V0UHJvcGVydGllcy5fX3dlYmdsQ29sb3JSZW5kZXJidWZmZXIpO2lmKHJlbmRlclRhcmdldFByb3BlcnRpZXMuX193ZWJnbERlcHRoUmVuZGVyYnVmZmVyKV9nbC5kZWxldGVSZW5kZXJidWZmZXIocmVuZGVyVGFyZ2V0UHJvcGVydGllcy5fX3dlYmdsRGVwdGhSZW5kZXJidWZmZXIpO31pZihyZW5kZXJUYXJnZXQuaXNXZWJHTE11bHRpcGxlUmVuZGVyVGFyZ2V0cyl7Zm9yKGxldCBpPTAsaWw9dGV4dHVyZS5sZW5ndGg7aTxpbDtpKyspe2NvbnN0IGF0dGFjaG1lbnRQcm9wZXJ0aWVzPXByb3BlcnRpZXMuZ2V0KHRleHR1cmVbaV0pO2lmKGF0dGFjaG1lbnRQcm9wZXJ0aWVzLl9fd2ViZ2xUZXh0dXJlKXtfZ2wuZGVsZXRlVGV4dHVyZShhdHRhY2htZW50UHJvcGVydGllcy5fX3dlYmdsVGV4dHVyZSk7aW5mby5tZW1vcnkudGV4dHVyZXMtLTt9cHJvcGVydGllcy5yZW1vdmUodGV4dHVyZVtpXSk7fX1wcm9wZXJ0aWVzLnJlbW92ZSh0ZXh0dXJlKTtwcm9wZXJ0aWVzLnJlbW92ZShyZW5kZXJUYXJnZXQpO30vLwoJbGV0IHRleHR1cmVVbml0cz0wO2Z1bmN0aW9uIHJlc2V0VGV4dHVyZVVuaXRzKCl7dGV4dHVyZVVuaXRzPTA7fWZ1bmN0aW9uIGFsbG9jYXRlVGV4dHVyZVVuaXQoKXtjb25zdCB0ZXh0dXJlVW5pdD10ZXh0dXJlVW5pdHM7aWYodGV4dHVyZVVuaXQ+PW1heFRleHR1cmVzKXtjb25zb2xlLndhcm4oJ1RIUkVFLldlYkdMVGV4dHVyZXM6IFRyeWluZyB0byB1c2UgJyt0ZXh0dXJlVW5pdCsnIHRleHR1cmUgdW5pdHMgd2hpbGUgdGhpcyBHUFUgc3VwcG9ydHMgb25seSAnK21heFRleHR1cmVzKTt9dGV4dHVyZVVuaXRzKz0xO3JldHVybiB0ZXh0dXJlVW5pdDt9Ly8KCWZ1bmN0aW9uIHNldFRleHR1cmUyRCh0ZXh0dXJlLHNsb3Qpe2NvbnN0IHRleHR1cmVQcm9wZXJ0aWVzPXByb3BlcnRpZXMuZ2V0KHRleHR1cmUpO2lmKHRleHR1cmUuaXNWaWRlb1RleHR1cmUpdXBkYXRlVmlkZW9UZXh0dXJlKHRleHR1cmUpO2lmKHRleHR1cmUudmVyc2lvbj4wJiZ0ZXh0dXJlUHJvcGVydGllcy5fX3ZlcnNpb24hPT10ZXh0dXJlLnZlcnNpb24pe2NvbnN0IGltYWdlPXRleHR1cmUuaW1hZ2U7aWYoaW1hZ2U9PT11bmRlZmluZWQpe2NvbnNvbGUud2FybignVEhSRUUuV2ViR0xSZW5kZXJlcjogVGV4dHVyZSBtYXJrZWQgZm9yIHVwZGF0ZSBidXQgaW1hZ2UgaXMgdW5kZWZpbmVkJyk7fWVsc2UgaWYoaW1hZ2UuY29tcGxldGU9PT1mYWxzZSl7Y29uc29sZS53YXJuKCdUSFJFRS5XZWJHTFJlbmRlcmVyOiBUZXh0dXJlIG1hcmtlZCBmb3IgdXBkYXRlIGJ1dCBpbWFnZSBpcyBpbmNvbXBsZXRlJyk7fWVsc2Uge3VwbG9hZFRleHR1cmUodGV4dHVyZVByb3BlcnRpZXMsdGV4dHVyZSxzbG90KTtyZXR1cm47fX1zdGF0ZS5hY3RpdmVUZXh0dXJlKDMzOTg0K3Nsb3QpO3N0YXRlLmJpbmRUZXh0dXJlKDM1NTMsdGV4dHVyZVByb3BlcnRpZXMuX193ZWJnbFRleHR1cmUpO31mdW5jdGlvbiBzZXRUZXh0dXJlMkRBcnJheSh0ZXh0dXJlLHNsb3Qpe2NvbnN0IHRleHR1cmVQcm9wZXJ0aWVzPXByb3BlcnRpZXMuZ2V0KHRleHR1cmUpO2lmKHRleHR1cmUudmVyc2lvbj4wJiZ0ZXh0dXJlUHJvcGVydGllcy5fX3ZlcnNpb24hPT10ZXh0dXJlLnZlcnNpb24pe3VwbG9hZFRleHR1cmUodGV4dHVyZVByb3BlcnRpZXMsdGV4dHVyZSxzbG90KTtyZXR1cm47fXN0YXRlLmFjdGl2ZVRleHR1cmUoMzM5ODQrc2xvdCk7c3RhdGUuYmluZFRleHR1cmUoMzU4NjYsdGV4dHVyZVByb3BlcnRpZXMuX193ZWJnbFRleHR1cmUpO31mdW5jdGlvbiBzZXRUZXh0dXJlM0QodGV4dHVyZSxzbG90KXtjb25zdCB0ZXh0dXJlUHJvcGVydGllcz1wcm9wZXJ0aWVzLmdldCh0ZXh0dXJlKTtpZih0ZXh0dXJlLnZlcnNpb24+MCYmdGV4dHVyZVByb3BlcnRpZXMuX192ZXJzaW9uIT09dGV4dHVyZS52ZXJzaW9uKXt1cGxvYWRUZXh0dXJlKHRleHR1cmVQcm9wZXJ0aWVzLHRleHR1cmUsc2xvdCk7cmV0dXJuO31zdGF0ZS5hY3RpdmVUZXh0dXJlKDMzOTg0K3Nsb3QpO3N0YXRlLmJpbmRUZXh0dXJlKDMyODc5LHRleHR1cmVQcm9wZXJ0aWVzLl9fd2ViZ2xUZXh0dXJlKTt9ZnVuY3Rpb24gc2V0VGV4dHVyZUN1YmUodGV4dHVyZSxzbG90KXtjb25zdCB0ZXh0dXJlUHJvcGVydGllcz1wcm9wZXJ0aWVzLmdldCh0ZXh0dXJlKTtpZih0ZXh0dXJlLnZlcnNpb24+MCYmdGV4dHVyZVByb3BlcnRpZXMuX192ZXJzaW9uIT09dGV4dHVyZS52ZXJzaW9uKXt1cGxvYWRDdWJlVGV4dHVyZSh0ZXh0dXJlUHJvcGVydGllcyx0ZXh0dXJlLHNsb3QpO3JldHVybjt9c3RhdGUuYWN0aXZlVGV4dHVyZSgzMzk4NCtzbG90KTtzdGF0ZS5iaW5kVGV4dHVyZSgzNDA2Nyx0ZXh0dXJlUHJvcGVydGllcy5fX3dlYmdsVGV4dHVyZSk7fWNvbnN0IHdyYXBwaW5nVG9HTD17W1JlcGVhdFdyYXBwaW5nXToxMDQ5NyxbQ2xhbXBUb0VkZ2VXcmFwcGluZ106MzMwNzEsW01pcnJvcmVkUmVwZWF0V3JhcHBpbmddOjMzNjQ4fTtjb25zdCBmaWx0ZXJUb0dMPXtbTmVhcmVzdEZpbHRlcl06OTcyOCxbTmVhcmVzdE1pcG1hcE5lYXJlc3RGaWx0ZXJdOjk5ODQsW05lYXJlc3RNaXBtYXBMaW5lYXJGaWx0ZXJdOjk5ODYsW0xpbmVhckZpbHRlcl06OTcyOSxbTGluZWFyTWlwbWFwTmVhcmVzdEZpbHRlcl06OTk4NSxbTGluZWFyTWlwbWFwTGluZWFyRmlsdGVyXTo5OTg3fTtmdW5jdGlvbiBzZXRUZXh0dXJlUGFyYW1ldGVycyh0ZXh0dXJlVHlwZSx0ZXh0dXJlLHN1cHBvcnRzTWlwcyl7aWYoc3VwcG9ydHNNaXBzKXtfZ2wudGV4UGFyYW1ldGVyaSh0ZXh0dXJlVHlwZSwxMDI0Mix3cmFwcGluZ1RvR0xbdGV4dHVyZS53cmFwU10pO19nbC50ZXhQYXJhbWV0ZXJpKHRleHR1cmVUeXBlLDEwMjQzLHdyYXBwaW5nVG9HTFt0ZXh0dXJlLndyYXBUXSk7aWYodGV4dHVyZVR5cGU9PT0zMjg3OXx8dGV4dHVyZVR5cGU9PT0zNTg2Nil7X2dsLnRleFBhcmFtZXRlcmkodGV4dHVyZVR5cGUsMzI4ODIsd3JhcHBpbmdUb0dMW3RleHR1cmUud3JhcFJdKTt9X2dsLnRleFBhcmFtZXRlcmkodGV4dHVyZVR5cGUsMTAyNDAsZmlsdGVyVG9HTFt0ZXh0dXJlLm1hZ0ZpbHRlcl0pO19nbC50ZXhQYXJhbWV0ZXJpKHRleHR1cmVUeXBlLDEwMjQxLGZpbHRlclRvR0xbdGV4dHVyZS5taW5GaWx0ZXJdKTt9ZWxzZSB7X2dsLnRleFBhcmFtZXRlcmkodGV4dHVyZVR5cGUsMTAyNDIsMzMwNzEpO19nbC50ZXhQYXJhbWV0ZXJpKHRleHR1cmVUeXBlLDEwMjQzLDMzMDcxKTtpZih0ZXh0dXJlVHlwZT09PTMyODc5fHx0ZXh0dXJlVHlwZT09PTM1ODY2KXtfZ2wudGV4UGFyYW1ldGVyaSh0ZXh0dXJlVHlwZSwzMjg4MiwzMzA3MSk7fWlmKHRleHR1cmUud3JhcFMhPT1DbGFtcFRvRWRnZVdyYXBwaW5nfHx0ZXh0dXJlLndyYXBUIT09Q2xhbXBUb0VkZ2VXcmFwcGluZyl7Y29uc29sZS53YXJuKCdUSFJFRS5XZWJHTFJlbmRlcmVyOiBUZXh0dXJlIGlzIG5vdCBwb3dlciBvZiB0d28uIFRleHR1cmUud3JhcFMgYW5kIFRleHR1cmUud3JhcFQgc2hvdWxkIGJlIHNldCB0byBUSFJFRS5DbGFtcFRvRWRnZVdyYXBwaW5nLicpO31fZ2wudGV4UGFyYW1ldGVyaSh0ZXh0dXJlVHlwZSwxMDI0MCxmaWx0ZXJGYWxsYmFjayh0ZXh0dXJlLm1hZ0ZpbHRlcikpO19nbC50ZXhQYXJhbWV0ZXJpKHRleHR1cmVUeXBlLDEwMjQxLGZpbHRlckZhbGxiYWNrKHRleHR1cmUubWluRmlsdGVyKSk7aWYodGV4dHVyZS5taW5GaWx0ZXIhPT1OZWFyZXN0RmlsdGVyJiZ0ZXh0dXJlLm1pbkZpbHRlciE9PUxpbmVhckZpbHRlcil7Y29uc29sZS53YXJuKCdUSFJFRS5XZWJHTFJlbmRlcmVyOiBUZXh0dXJlIGlzIG5vdCBwb3dlciBvZiB0d28uIFRleHR1cmUubWluRmlsdGVyIHNob3VsZCBiZSBzZXQgdG8gVEhSRUUuTmVhcmVzdEZpbHRlciBvciBUSFJFRS5MaW5lYXJGaWx0ZXIuJyk7fX1pZihleHRlbnNpb25zLmhhcygnRVhUX3RleHR1cmVfZmlsdGVyX2FuaXNvdHJvcGljJyk9PT10cnVlKXtjb25zdCBleHRlbnNpb249ZXh0ZW5zaW9ucy5nZXQoJ0VYVF90ZXh0dXJlX2ZpbHRlcl9hbmlzb3Ryb3BpYycpO2lmKHRleHR1cmUudHlwZT09PUZsb2F0VHlwZSYmZXh0ZW5zaW9ucy5oYXMoJ09FU190ZXh0dXJlX2Zsb2F0X2xpbmVhcicpPT09ZmFsc2UpcmV0dXJuOy8vIHZlcmlmeSBleHRlbnNpb24gZm9yIFdlYkdMIDEgYW5kIFdlYkdMIDIKCWlmKGlzV2ViR0wyPT09ZmFsc2UmJnRleHR1cmUudHlwZT09PUhhbGZGbG9hdFR5cGUmJmV4dGVuc2lvbnMuaGFzKCdPRVNfdGV4dHVyZV9oYWxmX2Zsb2F0X2xpbmVhcicpPT09ZmFsc2UpcmV0dXJuOy8vIHZlcmlmeSBleHRlbnNpb24gZm9yIFdlYkdMIDEgb25seQoJaWYodGV4dHVyZS5hbmlzb3Ryb3B5PjF8fHByb3BlcnRpZXMuZ2V0KHRleHR1cmUpLl9fY3VycmVudEFuaXNvdHJvcHkpe19nbC50ZXhQYXJhbWV0ZXJmKHRleHR1cmVUeXBlLGV4dGVuc2lvbi5URVhUVVJFX01BWF9BTklTT1RST1BZX0VYVCxNYXRoLm1pbih0ZXh0dXJlLmFuaXNvdHJvcHksY2FwYWJpbGl0aWVzLmdldE1heEFuaXNvdHJvcHkoKSkpO3Byb3BlcnRpZXMuZ2V0KHRleHR1cmUpLl9fY3VycmVudEFuaXNvdHJvcHk9dGV4dHVyZS5hbmlzb3Ryb3B5O319fWZ1bmN0aW9uIGluaXRUZXh0dXJlKHRleHR1cmVQcm9wZXJ0aWVzLHRleHR1cmUpe2lmKHRleHR1cmVQcm9wZXJ0aWVzLl9fd2ViZ2xJbml0PT09dW5kZWZpbmVkKXt0ZXh0dXJlUHJvcGVydGllcy5fX3dlYmdsSW5pdD10cnVlO3RleHR1cmUuYWRkRXZlbnRMaXN0ZW5lcignZGlzcG9zZScsb25UZXh0dXJlRGlzcG9zZSk7dGV4dHVyZVByb3BlcnRpZXMuX193ZWJnbFRleHR1cmU9X2dsLmNyZWF0ZVRleHR1cmUoKTtpbmZvLm1lbW9yeS50ZXh0dXJlcysrO319ZnVuY3Rpb24gdXBsb2FkVGV4dHVyZSh0ZXh0dXJlUHJvcGVydGllcyx0ZXh0dXJlLHNsb3Qpe2xldCB0ZXh0dXJlVHlwZT0zNTUzO2lmKHRleHR1cmUuaXNEYXRhVGV4dHVyZTJEQXJyYXkpdGV4dHVyZVR5cGU9MzU4NjY7aWYodGV4dHVyZS5pc0RhdGFUZXh0dXJlM0QpdGV4dHVyZVR5cGU9MzI4Nzk7aW5pdFRleHR1cmUodGV4dHVyZVByb3BlcnRpZXMsdGV4dHVyZSk7c3RhdGUuYWN0aXZlVGV4dHVyZSgzMzk4NCtzbG90KTtzdGF0ZS5iaW5kVGV4dHVyZSh0ZXh0dXJlVHlwZSx0ZXh0dXJlUHJvcGVydGllcy5fX3dlYmdsVGV4dHVyZSk7X2dsLnBpeGVsU3RvcmVpKDM3NDQwLHRleHR1cmUuZmxpcFkpO19nbC5waXhlbFN0b3JlaSgzNzQ0MSx0ZXh0dXJlLnByZW11bHRpcGx5QWxwaGEpO19nbC5waXhlbFN0b3JlaSgzMzE3LHRleHR1cmUudW5wYWNrQWxpZ25tZW50KTtfZ2wucGl4ZWxTdG9yZWkoMzc0NDMsMCk7Y29uc3QgbmVlZHNQb3dlck9mVHdvPXRleHR1cmVOZWVkc1Bvd2VyT2ZUd28odGV4dHVyZSkmJmlzUG93ZXJPZlR3byQxKHRleHR1cmUuaW1hZ2UpPT09ZmFsc2U7Y29uc3QgaW1hZ2U9cmVzaXplSW1hZ2UodGV4dHVyZS5pbWFnZSxuZWVkc1Bvd2VyT2ZUd28sZmFsc2UsbWF4VGV4dHVyZVNpemUpO2NvbnN0IHN1cHBvcnRzTWlwcz1pc1Bvd2VyT2ZUd28kMShpbWFnZSl8fGlzV2ViR0wyLGdsRm9ybWF0PXV0aWxzLmNvbnZlcnQodGV4dHVyZS5mb3JtYXQpO2xldCBnbFR5cGU9dXRpbHMuY29udmVydCh0ZXh0dXJlLnR5cGUpLGdsSW50ZXJuYWxGb3JtYXQ9Z2V0SW50ZXJuYWxGb3JtYXQodGV4dHVyZS5pbnRlcm5hbEZvcm1hdCxnbEZvcm1hdCxnbFR5cGUsdGV4dHVyZS5lbmNvZGluZyk7c2V0VGV4dHVyZVBhcmFtZXRlcnModGV4dHVyZVR5cGUsdGV4dHVyZSxzdXBwb3J0c01pcHMpO2xldCBtaXBtYXA7Y29uc3QgbWlwbWFwcz10ZXh0dXJlLm1pcG1hcHM7aWYodGV4dHVyZS5pc0RlcHRoVGV4dHVyZSl7Ly8gcG9wdWxhdGUgZGVwdGggdGV4dHVyZSB3aXRoIGR1bW15IGRhdGEKCWdsSW50ZXJuYWxGb3JtYXQ9NjQwMjtpZihpc1dlYkdMMil7aWYodGV4dHVyZS50eXBlPT09RmxvYXRUeXBlKXtnbEludGVybmFsRm9ybWF0PTM2MDEyO31lbHNlIGlmKHRleHR1cmUudHlwZT09PVVuc2lnbmVkSW50VHlwZSl7Z2xJbnRlcm5hbEZvcm1hdD0zMzE5MDt9ZWxzZSBpZih0ZXh0dXJlLnR5cGU9PT1VbnNpZ25lZEludDI0OFR5cGUpe2dsSW50ZXJuYWxGb3JtYXQ9MzUwNTY7fWVsc2Uge2dsSW50ZXJuYWxGb3JtYXQ9MzMxODk7Ly8gV2ViR0wyIHJlcXVpcmVzIHNpemVkIGludGVybmFsZm9ybWF0IGZvciBnbFRleEltYWdlMkQKCX19ZWxzZSB7aWYodGV4dHVyZS50eXBlPT09RmxvYXRUeXBlKXtjb25zb2xlLmVycm9yKCdXZWJHTFJlbmRlcmVyOiBGbG9hdGluZyBwb2ludCBkZXB0aCB0ZXh0dXJlIHJlcXVpcmVzIFdlYkdMMi4nKTt9fS8vIHZhbGlkYXRpb24gY2hlY2tzIGZvciBXZWJHTCAxCglpZih0ZXh0dXJlLmZvcm1hdD09PURlcHRoRm9ybWF0JiZnbEludGVybmFsRm9ybWF0PT09NjQwMil7Ly8gVGhlIGVycm9yIElOVkFMSURfT1BFUkFUSU9OIGlzIGdlbmVyYXRlZCBieSB0ZXhJbWFnZTJEIGlmIGZvcm1hdCBhbmQgaW50ZXJuYWxmb3JtYXQgYXJlCgkvLyBERVBUSF9DT01QT05FTlQgYW5kIHR5cGUgaXMgbm90IFVOU0lHTkVEX1NIT1JUIG9yIFVOU0lHTkVEX0lOVAoJLy8gKGh0dHBzOi8vd3d3Lmtocm9ub3Mub3JnL3JlZ2lzdHJ5L3dlYmdsL2V4dGVuc2lvbnMvV0VCR0xfZGVwdGhfdGV4dHVyZS8pCglpZih0ZXh0dXJlLnR5cGUhPT1VbnNpZ25lZFNob3J0VHlwZSYmdGV4dHVyZS50eXBlIT09VW5zaWduZWRJbnRUeXBlKXtjb25zb2xlLndhcm4oJ1RIUkVFLldlYkdMUmVuZGVyZXI6IFVzZSBVbnNpZ25lZFNob3J0VHlwZSBvciBVbnNpZ25lZEludFR5cGUgZm9yIERlcHRoRm9ybWF0IERlcHRoVGV4dHVyZS4nKTt0ZXh0dXJlLnR5cGU9VW5zaWduZWRTaG9ydFR5cGU7Z2xUeXBlPXV0aWxzLmNvbnZlcnQodGV4dHVyZS50eXBlKTt9fWlmKHRleHR1cmUuZm9ybWF0PT09RGVwdGhTdGVuY2lsRm9ybWF0JiZnbEludGVybmFsRm9ybWF0PT09NjQwMil7Ly8gRGVwdGggc3RlbmNpbCB0ZXh0dXJlcyBuZWVkIHRoZSBERVBUSF9TVEVOQ0lMIGludGVybmFsIGZvcm1hdAoJLy8gKGh0dHBzOi8vd3d3Lmtocm9ub3Mub3JnL3JlZ2lzdHJ5L3dlYmdsL2V4dGVuc2lvbnMvV0VCR0xfZGVwdGhfdGV4dHVyZS8pCglnbEludGVybmFsRm9ybWF0PTM0MDQxOy8vIFRoZSBlcnJvciBJTlZBTElEX09QRVJBVElPTiBpcyBnZW5lcmF0ZWQgYnkgdGV4SW1hZ2UyRCBpZiBmb3JtYXQgYW5kIGludGVybmFsZm9ybWF0IGFyZQoJLy8gREVQVEhfU1RFTkNJTCBhbmQgdHlwZSBpcyBub3QgVU5TSUdORURfSU5UXzI0XzhfV0VCR0wuCgkvLyAoaHR0cHM6Ly93d3cua2hyb25vcy5vcmcvcmVnaXN0cnkvd2ViZ2wvZXh0ZW5zaW9ucy9XRUJHTF9kZXB0aF90ZXh0dXJlLykKCWlmKHRleHR1cmUudHlwZSE9PVVuc2lnbmVkSW50MjQ4VHlwZSl7Y29uc29sZS53YXJuKCdUSFJFRS5XZWJHTFJlbmRlcmVyOiBVc2UgVW5zaWduZWRJbnQyNDhUeXBlIGZvciBEZXB0aFN0ZW5jaWxGb3JtYXQgRGVwdGhUZXh0dXJlLicpO3RleHR1cmUudHlwZT1VbnNpZ25lZEludDI0OFR5cGU7Z2xUeXBlPXV0aWxzLmNvbnZlcnQodGV4dHVyZS50eXBlKTt9fS8vCglzdGF0ZS50ZXhJbWFnZTJEKDM1NTMsMCxnbEludGVybmFsRm9ybWF0LGltYWdlLndpZHRoLGltYWdlLmhlaWdodCwwLGdsRm9ybWF0LGdsVHlwZSxudWxsKTt9ZWxzZSBpZih0ZXh0dXJlLmlzRGF0YVRleHR1cmUpey8vIHVzZSBtYW51YWxseSBjcmVhdGVkIG1pcG1hcHMgaWYgYXZhaWxhYmxlCgkvLyBpZiB0aGVyZSBhcmUgbm8gbWFudWFsIG1pcG1hcHMKCS8vIHNldCAwIGxldmVsIG1pcG1hcCBhbmQgdGhlbiB1c2UgR0wgdG8gZ2VuZXJhdGUgb3RoZXIgbWlwbWFwIGxldmVscwoJaWYobWlwbWFwcy5sZW5ndGg+MCYmc3VwcG9ydHNNaXBzKXtmb3IobGV0IGk9MCxpbD1taXBtYXBzLmxlbmd0aDtpPGlsO2krKyl7bWlwbWFwPW1pcG1hcHNbaV07c3RhdGUudGV4SW1hZ2UyRCgzNTUzLGksZ2xJbnRlcm5hbEZvcm1hdCxtaXBtYXAud2lkdGgsbWlwbWFwLmhlaWdodCwwLGdsRm9ybWF0LGdsVHlwZSxtaXBtYXAuZGF0YSk7fXRleHR1cmUuZ2VuZXJhdGVNaXBtYXBzPWZhbHNlO31lbHNlIHtzdGF0ZS50ZXhJbWFnZTJEKDM1NTMsMCxnbEludGVybmFsRm9ybWF0LGltYWdlLndpZHRoLGltYWdlLmhlaWdodCwwLGdsRm9ybWF0LGdsVHlwZSxpbWFnZS5kYXRhKTt9fWVsc2UgaWYodGV4dHVyZS5pc0NvbXByZXNzZWRUZXh0dXJlKXtmb3IobGV0IGk9MCxpbD1taXBtYXBzLmxlbmd0aDtpPGlsO2krKyl7bWlwbWFwPW1pcG1hcHNbaV07aWYodGV4dHVyZS5mb3JtYXQhPT1SR0JBRm9ybWF0JiZ0ZXh0dXJlLmZvcm1hdCE9PVJHQkZvcm1hdCl7aWYoZ2xGb3JtYXQhPT1udWxsKXtzdGF0ZS5jb21wcmVzc2VkVGV4SW1hZ2UyRCgzNTUzLGksZ2xJbnRlcm5hbEZvcm1hdCxtaXBtYXAud2lkdGgsbWlwbWFwLmhlaWdodCwwLG1pcG1hcC5kYXRhKTt9ZWxzZSB7Y29uc29sZS53YXJuKCdUSFJFRS5XZWJHTFJlbmRlcmVyOiBBdHRlbXB0IHRvIGxvYWQgdW5zdXBwb3J0ZWQgY29tcHJlc3NlZCB0ZXh0dXJlIGZvcm1hdCBpbiAudXBsb2FkVGV4dHVyZSgpJyk7fX1lbHNlIHtzdGF0ZS50ZXhJbWFnZTJEKDM1NTMsaSxnbEludGVybmFsRm9ybWF0LG1pcG1hcC53aWR0aCxtaXBtYXAuaGVpZ2h0LDAsZ2xGb3JtYXQsZ2xUeXBlLG1pcG1hcC5kYXRhKTt9fX1lbHNlIGlmKHRleHR1cmUuaXNEYXRhVGV4dHVyZTJEQXJyYXkpe3N0YXRlLnRleEltYWdlM0QoMzU4NjYsMCxnbEludGVybmFsRm9ybWF0LGltYWdlLndpZHRoLGltYWdlLmhlaWdodCxpbWFnZS5kZXB0aCwwLGdsRm9ybWF0LGdsVHlwZSxpbWFnZS5kYXRhKTt9ZWxzZSBpZih0ZXh0dXJlLmlzRGF0YVRleHR1cmUzRCl7c3RhdGUudGV4SW1hZ2UzRCgzMjg3OSwwLGdsSW50ZXJuYWxGb3JtYXQsaW1hZ2Uud2lkdGgsaW1hZ2UuaGVpZ2h0LGltYWdlLmRlcHRoLDAsZ2xGb3JtYXQsZ2xUeXBlLGltYWdlLmRhdGEpO31lbHNlIHsvLyByZWd1bGFyIFRleHR1cmUgKGltYWdlLCB2aWRlbywgY2FudmFzKQoJLy8gdXNlIG1hbnVhbGx5IGNyZWF0ZWQgbWlwbWFwcyBpZiBhdmFpbGFibGUKCS8vIGlmIHRoZXJlIGFyZSBubyBtYW51YWwgbWlwbWFwcwoJLy8gc2V0IDAgbGV2ZWwgbWlwbWFwIGFuZCB0aGVuIHVzZSBHTCB0byBnZW5lcmF0ZSBvdGhlciBtaXBtYXAgbGV2ZWxzCgljb25zdCBsZXZlbHM9Z2V0TWlwTGV2ZWxzKHRleHR1cmUsaW1hZ2Usc3VwcG9ydHNNaXBzKTtjb25zdCB1c2VUZXhTdG9yYWdlPWlzV2ViR0wyJiZ0ZXh0dXJlLmlzVmlkZW9UZXh0dXJlIT09dHJ1ZTtjb25zdCBhbGxvY2F0ZU1lbW9yeT10ZXh0dXJlUHJvcGVydGllcy5fX3ZlcnNpb249PT11bmRlZmluZWQ7aWYobWlwbWFwcy5sZW5ndGg+MCYmc3VwcG9ydHNNaXBzKXtpZih1c2VUZXhTdG9yYWdlJiZhbGxvY2F0ZU1lbW9yeSl7c3RhdGUudGV4U3RvcmFnZTJEKDM1NTMsbGV2ZWxzLGdsSW50ZXJuYWxGb3JtYXQsbWlwbWFwc1swXS53aWR0aCxtaXBtYXBzWzBdLmhlaWdodCk7fWZvcihsZXQgaT0wLGlsPW1pcG1hcHMubGVuZ3RoO2k8aWw7aSsrKXttaXBtYXA9bWlwbWFwc1tpXTtpZih1c2VUZXhTdG9yYWdlKXtzdGF0ZS50ZXhTdWJJbWFnZTJEKDM1NTMsaSwwLDAsZ2xGb3JtYXQsZ2xUeXBlLG1pcG1hcCk7fWVsc2Uge3N0YXRlLnRleEltYWdlMkQoMzU1MyxpLGdsSW50ZXJuYWxGb3JtYXQsZ2xGb3JtYXQsZ2xUeXBlLG1pcG1hcCk7fX10ZXh0dXJlLmdlbmVyYXRlTWlwbWFwcz1mYWxzZTt9ZWxzZSB7aWYodXNlVGV4U3RvcmFnZSl7aWYoYWxsb2NhdGVNZW1vcnkpe3N0YXRlLnRleFN0b3JhZ2UyRCgzNTUzLGxldmVscyxnbEludGVybmFsRm9ybWF0LGltYWdlLndpZHRoLGltYWdlLmhlaWdodCk7fXN0YXRlLnRleFN1YkltYWdlMkQoMzU1MywwLDAsMCxnbEZvcm1hdCxnbFR5cGUsaW1hZ2UpO31lbHNlIHtzdGF0ZS50ZXhJbWFnZTJEKDM1NTMsMCxnbEludGVybmFsRm9ybWF0LGdsRm9ybWF0LGdsVHlwZSxpbWFnZSk7fX19aWYodGV4dHVyZU5lZWRzR2VuZXJhdGVNaXBtYXBzKHRleHR1cmUsc3VwcG9ydHNNaXBzKSl7Z2VuZXJhdGVNaXBtYXAodGV4dHVyZVR5cGUpO310ZXh0dXJlUHJvcGVydGllcy5fX3ZlcnNpb249dGV4dHVyZS52ZXJzaW9uO2lmKHRleHR1cmUub25VcGRhdGUpdGV4dHVyZS5vblVwZGF0ZSh0ZXh0dXJlKTt9ZnVuY3Rpb24gdXBsb2FkQ3ViZVRleHR1cmUodGV4dHVyZVByb3BlcnRpZXMsdGV4dHVyZSxzbG90KXtpZih0ZXh0dXJlLmltYWdlLmxlbmd0aCE9PTYpcmV0dXJuO2luaXRUZXh0dXJlKHRleHR1cmVQcm9wZXJ0aWVzLHRleHR1cmUpO3N0YXRlLmFjdGl2ZVRleHR1cmUoMzM5ODQrc2xvdCk7c3RhdGUuYmluZFRleHR1cmUoMzQwNjcsdGV4dHVyZVByb3BlcnRpZXMuX193ZWJnbFRleHR1cmUpO19nbC5waXhlbFN0b3JlaSgzNzQ0MCx0ZXh0dXJlLmZsaXBZKTtfZ2wucGl4ZWxTdG9yZWkoMzc0NDEsdGV4dHVyZS5wcmVtdWx0aXBseUFscGhhKTtfZ2wucGl4ZWxTdG9yZWkoMzMxNyx0ZXh0dXJlLnVucGFja0FsaWdubWVudCk7X2dsLnBpeGVsU3RvcmVpKDM3NDQzLDApO2NvbnN0IGlzQ29tcHJlc3NlZD10ZXh0dXJlJiYodGV4dHVyZS5pc0NvbXByZXNzZWRUZXh0dXJlfHx0ZXh0dXJlLmltYWdlWzBdLmlzQ29tcHJlc3NlZFRleHR1cmUpO2NvbnN0IGlzRGF0YVRleHR1cmU9dGV4dHVyZS5pbWFnZVswXSYmdGV4dHVyZS5pbWFnZVswXS5pc0RhdGFUZXh0dXJlO2NvbnN0IGN1YmVJbWFnZT1bXTtmb3IobGV0IGk9MDtpPDY7aSsrKXtpZighaXNDb21wcmVzc2VkJiYhaXNEYXRhVGV4dHVyZSl7Y3ViZUltYWdlW2ldPXJlc2l6ZUltYWdlKHRleHR1cmUuaW1hZ2VbaV0sZmFsc2UsdHJ1ZSxtYXhDdWJlbWFwU2l6ZSk7fWVsc2Uge2N1YmVJbWFnZVtpXT1pc0RhdGFUZXh0dXJlP3RleHR1cmUuaW1hZ2VbaV0uaW1hZ2U6dGV4dHVyZS5pbWFnZVtpXTt9fWNvbnN0IGltYWdlPWN1YmVJbWFnZVswXSxzdXBwb3J0c01pcHM9aXNQb3dlck9mVHdvJDEoaW1hZ2UpfHxpc1dlYkdMMixnbEZvcm1hdD11dGlscy5jb252ZXJ0KHRleHR1cmUuZm9ybWF0KSxnbFR5cGU9dXRpbHMuY29udmVydCh0ZXh0dXJlLnR5cGUpLGdsSW50ZXJuYWxGb3JtYXQ9Z2V0SW50ZXJuYWxGb3JtYXQodGV4dHVyZS5pbnRlcm5hbEZvcm1hdCxnbEZvcm1hdCxnbFR5cGUsdGV4dHVyZS5lbmNvZGluZyk7c2V0VGV4dHVyZVBhcmFtZXRlcnMoMzQwNjcsdGV4dHVyZSxzdXBwb3J0c01pcHMpO2xldCBtaXBtYXBzO2lmKGlzQ29tcHJlc3NlZCl7Zm9yKGxldCBpPTA7aTw2O2krKyl7bWlwbWFwcz1jdWJlSW1hZ2VbaV0ubWlwbWFwcztmb3IobGV0IGo9MDtqPG1pcG1hcHMubGVuZ3RoO2orKyl7Y29uc3QgbWlwbWFwPW1pcG1hcHNbal07aWYodGV4dHVyZS5mb3JtYXQhPT1SR0JBRm9ybWF0JiZ0ZXh0dXJlLmZvcm1hdCE9PVJHQkZvcm1hdCl7aWYoZ2xGb3JtYXQhPT1udWxsKXtzdGF0ZS5jb21wcmVzc2VkVGV4SW1hZ2UyRCgzNDA2OStpLGosZ2xJbnRlcm5hbEZvcm1hdCxtaXBtYXAud2lkdGgsbWlwbWFwLmhlaWdodCwwLG1pcG1hcC5kYXRhKTt9ZWxzZSB7Y29uc29sZS53YXJuKCdUSFJFRS5XZWJHTFJlbmRlcmVyOiBBdHRlbXB0IHRvIGxvYWQgdW5zdXBwb3J0ZWQgY29tcHJlc3NlZCB0ZXh0dXJlIGZvcm1hdCBpbiAuc2V0VGV4dHVyZUN1YmUoKScpO319ZWxzZSB7c3RhdGUudGV4SW1hZ2UyRCgzNDA2OStpLGosZ2xJbnRlcm5hbEZvcm1hdCxtaXBtYXAud2lkdGgsbWlwbWFwLmhlaWdodCwwLGdsRm9ybWF0LGdsVHlwZSxtaXBtYXAuZGF0YSk7fX19fWVsc2Uge21pcG1hcHM9dGV4dHVyZS5taXBtYXBzO2ZvcihsZXQgaT0wO2k8NjtpKyspe2lmKGlzRGF0YVRleHR1cmUpe3N0YXRlLnRleEltYWdlMkQoMzQwNjkraSwwLGdsSW50ZXJuYWxGb3JtYXQsY3ViZUltYWdlW2ldLndpZHRoLGN1YmVJbWFnZVtpXS5oZWlnaHQsMCxnbEZvcm1hdCxnbFR5cGUsY3ViZUltYWdlW2ldLmRhdGEpO2ZvcihsZXQgaj0wO2o8bWlwbWFwcy5sZW5ndGg7aisrKXtjb25zdCBtaXBtYXA9bWlwbWFwc1tqXTtjb25zdCBtaXBtYXBJbWFnZT1taXBtYXAuaW1hZ2VbaV0uaW1hZ2U7c3RhdGUudGV4SW1hZ2UyRCgzNDA2OStpLGorMSxnbEludGVybmFsRm9ybWF0LG1pcG1hcEltYWdlLndpZHRoLG1pcG1hcEltYWdlLmhlaWdodCwwLGdsRm9ybWF0LGdsVHlwZSxtaXBtYXBJbWFnZS5kYXRhKTt9fWVsc2Uge3N0YXRlLnRleEltYWdlMkQoMzQwNjkraSwwLGdsSW50ZXJuYWxGb3JtYXQsZ2xGb3JtYXQsZ2xUeXBlLGN1YmVJbWFnZVtpXSk7Zm9yKGxldCBqPTA7ajxtaXBtYXBzLmxlbmd0aDtqKyspe2NvbnN0IG1pcG1hcD1taXBtYXBzW2pdO3N0YXRlLnRleEltYWdlMkQoMzQwNjkraSxqKzEsZ2xJbnRlcm5hbEZvcm1hdCxnbEZvcm1hdCxnbFR5cGUsbWlwbWFwLmltYWdlW2ldKTt9fX19aWYodGV4dHVyZU5lZWRzR2VuZXJhdGVNaXBtYXBzKHRleHR1cmUsc3VwcG9ydHNNaXBzKSl7Ly8gV2UgYXNzdW1lIGltYWdlcyBmb3IgY3ViZSBtYXAgaGF2ZSB0aGUgc2FtZSBzaXplLgoJZ2VuZXJhdGVNaXBtYXAoMzQwNjcpO310ZXh0dXJlUHJvcGVydGllcy5fX3ZlcnNpb249dGV4dHVyZS52ZXJzaW9uO2lmKHRleHR1cmUub25VcGRhdGUpdGV4dHVyZS5vblVwZGF0ZSh0ZXh0dXJlKTt9Ly8gUmVuZGVyIHRhcmdldHMKCS8vIFNldHVwIHN0b3JhZ2UgZm9yIHRhcmdldCB0ZXh0dXJlIGFuZCBiaW5kIGl0IHRvIGNvcnJlY3QgZnJhbWVidWZmZXIKCWZ1bmN0aW9uIHNldHVwRnJhbWVCdWZmZXJUZXh0dXJlKGZyYW1lYnVmZmVyLHJlbmRlclRhcmdldCx0ZXh0dXJlLGF0dGFjaG1lbnQsdGV4dHVyZVRhcmdldCl7Y29uc3QgZ2xGb3JtYXQ9dXRpbHMuY29udmVydCh0ZXh0dXJlLmZvcm1hdCk7Y29uc3QgZ2xUeXBlPXV0aWxzLmNvbnZlcnQodGV4dHVyZS50eXBlKTtjb25zdCBnbEludGVybmFsRm9ybWF0PWdldEludGVybmFsRm9ybWF0KHRleHR1cmUuaW50ZXJuYWxGb3JtYXQsZ2xGb3JtYXQsZ2xUeXBlLHRleHR1cmUuZW5jb2RpbmcpO2NvbnN0IHJlbmRlclRhcmdldFByb3BlcnRpZXM9cHJvcGVydGllcy5nZXQocmVuZGVyVGFyZ2V0KTtpZighcmVuZGVyVGFyZ2V0UHJvcGVydGllcy5fX2hhc0V4dGVybmFsVGV4dHVyZXMpe2lmKHRleHR1cmVUYXJnZXQ9PT0zMjg3OXx8dGV4dHVyZVRhcmdldD09PTM1ODY2KXtzdGF0ZS50ZXhJbWFnZTNEKHRleHR1cmVUYXJnZXQsMCxnbEludGVybmFsRm9ybWF0LHJlbmRlclRhcmdldC53aWR0aCxyZW5kZXJUYXJnZXQuaGVpZ2h0LHJlbmRlclRhcmdldC5kZXB0aCwwLGdsRm9ybWF0LGdsVHlwZSxudWxsKTt9ZWxzZSB7c3RhdGUudGV4SW1hZ2UyRCh0ZXh0dXJlVGFyZ2V0LDAsZ2xJbnRlcm5hbEZvcm1hdCxyZW5kZXJUYXJnZXQud2lkdGgscmVuZGVyVGFyZ2V0LmhlaWdodCwwLGdsRm9ybWF0LGdsVHlwZSxudWxsKTt9fXN0YXRlLmJpbmRGcmFtZWJ1ZmZlcigzNjE2MCxmcmFtZWJ1ZmZlcik7aWYocmVuZGVyVGFyZ2V0LnVzZVJlbmRlclRvVGV4dHVyZSl7TXVsdGlzYW1wbGVkUmVuZGVyVG9UZXh0dXJlRXh0ZW5zaW9uLmZyYW1lYnVmZmVyVGV4dHVyZTJETXVsdGlzYW1wbGVFWFQoMzYxNjAsYXR0YWNobWVudCx0ZXh0dXJlVGFyZ2V0LHByb3BlcnRpZXMuZ2V0KHRleHR1cmUpLl9fd2ViZ2xUZXh0dXJlLDAsZ2V0UmVuZGVyVGFyZ2V0U2FtcGxlcyhyZW5kZXJUYXJnZXQpKTt9ZWxzZSB7X2dsLmZyYW1lYnVmZmVyVGV4dHVyZTJEKDM2MTYwLGF0dGFjaG1lbnQsdGV4dHVyZVRhcmdldCxwcm9wZXJ0aWVzLmdldCh0ZXh0dXJlKS5fX3dlYmdsVGV4dHVyZSwwKTt9c3RhdGUuYmluZEZyYW1lYnVmZmVyKDM2MTYwLG51bGwpO30vLyBTZXR1cCBzdG9yYWdlIGZvciBpbnRlcm5hbCBkZXB0aC9zdGVuY2lsIGJ1ZmZlcnMgYW5kIGJpbmQgdG8gY29ycmVjdCBmcmFtZWJ1ZmZlcgoJZnVuY3Rpb24gc2V0dXBSZW5kZXJCdWZmZXJTdG9yYWdlKHJlbmRlcmJ1ZmZlcixyZW5kZXJUYXJnZXQsaXNNdWx0aXNhbXBsZSl7X2dsLmJpbmRSZW5kZXJidWZmZXIoMzYxNjEscmVuZGVyYnVmZmVyKTtpZihyZW5kZXJUYXJnZXQuZGVwdGhCdWZmZXImJiFyZW5kZXJUYXJnZXQuc3RlbmNpbEJ1ZmZlcil7bGV0IGdsSW50ZXJuYWxGb3JtYXQ9MzMxODk7aWYoaXNNdWx0aXNhbXBsZXx8cmVuZGVyVGFyZ2V0LnVzZVJlbmRlclRvVGV4dHVyZSl7Y29uc3QgZGVwdGhUZXh0dXJlPXJlbmRlclRhcmdldC5kZXB0aFRleHR1cmU7aWYoZGVwdGhUZXh0dXJlJiZkZXB0aFRleHR1cmUuaXNEZXB0aFRleHR1cmUpe2lmKGRlcHRoVGV4dHVyZS50eXBlPT09RmxvYXRUeXBlKXtnbEludGVybmFsRm9ybWF0PTM2MDEyO31lbHNlIGlmKGRlcHRoVGV4dHVyZS50eXBlPT09VW5zaWduZWRJbnRUeXBlKXtnbEludGVybmFsRm9ybWF0PTMzMTkwO319Y29uc3Qgc2FtcGxlcz1nZXRSZW5kZXJUYXJnZXRTYW1wbGVzKHJlbmRlclRhcmdldCk7aWYocmVuZGVyVGFyZ2V0LnVzZVJlbmRlclRvVGV4dHVyZSl7TXVsdGlzYW1wbGVkUmVuZGVyVG9UZXh0dXJlRXh0ZW5zaW9uLnJlbmRlcmJ1ZmZlclN0b3JhZ2VNdWx0aXNhbXBsZUVYVCgzNjE2MSxzYW1wbGVzLGdsSW50ZXJuYWxGb3JtYXQscmVuZGVyVGFyZ2V0LndpZHRoLHJlbmRlclRhcmdldC5oZWlnaHQpO31lbHNlIHtfZ2wucmVuZGVyYnVmZmVyU3RvcmFnZU11bHRpc2FtcGxlKDM2MTYxLHNhbXBsZXMsZ2xJbnRlcm5hbEZvcm1hdCxyZW5kZXJUYXJnZXQud2lkdGgscmVuZGVyVGFyZ2V0LmhlaWdodCk7fX1lbHNlIHtfZ2wucmVuZGVyYnVmZmVyU3RvcmFnZSgzNjE2MSxnbEludGVybmFsRm9ybWF0LHJlbmRlclRhcmdldC53aWR0aCxyZW5kZXJUYXJnZXQuaGVpZ2h0KTt9X2dsLmZyYW1lYnVmZmVyUmVuZGVyYnVmZmVyKDM2MTYwLDM2MDk2LDM2MTYxLHJlbmRlcmJ1ZmZlcik7fWVsc2UgaWYocmVuZGVyVGFyZ2V0LmRlcHRoQnVmZmVyJiZyZW5kZXJUYXJnZXQuc3RlbmNpbEJ1ZmZlcil7Y29uc3Qgc2FtcGxlcz1nZXRSZW5kZXJUYXJnZXRTYW1wbGVzKHJlbmRlclRhcmdldCk7aWYoaXNNdWx0aXNhbXBsZSYmcmVuZGVyVGFyZ2V0LnVzZVJlbmRlcmJ1ZmZlcil7X2dsLnJlbmRlcmJ1ZmZlclN0b3JhZ2VNdWx0aXNhbXBsZSgzNjE2MSxzYW1wbGVzLDM1MDU2LHJlbmRlclRhcmdldC53aWR0aCxyZW5kZXJUYXJnZXQuaGVpZ2h0KTt9ZWxzZSBpZihyZW5kZXJUYXJnZXQudXNlUmVuZGVyVG9UZXh0dXJlKXtNdWx0aXNhbXBsZWRSZW5kZXJUb1RleHR1cmVFeHRlbnNpb24ucmVuZGVyYnVmZmVyU3RvcmFnZU11bHRpc2FtcGxlRVhUKDM2MTYxLHNhbXBsZXMsMzUwNTYscmVuZGVyVGFyZ2V0LndpZHRoLHJlbmRlclRhcmdldC5oZWlnaHQpO31lbHNlIHtfZ2wucmVuZGVyYnVmZmVyU3RvcmFnZSgzNjE2MSwzNDA0MSxyZW5kZXJUYXJnZXQud2lkdGgscmVuZGVyVGFyZ2V0LmhlaWdodCk7fV9nbC5mcmFtZWJ1ZmZlclJlbmRlcmJ1ZmZlcigzNjE2MCwzMzMwNiwzNjE2MSxyZW5kZXJidWZmZXIpO31lbHNlIHsvLyBVc2UgdGhlIGZpcnN0IHRleHR1cmUgZm9yIE1SVCBzbyBmYXIKCWNvbnN0IHRleHR1cmU9cmVuZGVyVGFyZ2V0LmlzV2ViR0xNdWx0aXBsZVJlbmRlclRhcmdldHM9PT10cnVlP3JlbmRlclRhcmdldC50ZXh0dXJlWzBdOnJlbmRlclRhcmdldC50ZXh0dXJlO2NvbnN0IGdsRm9ybWF0PXV0aWxzLmNvbnZlcnQodGV4dHVyZS5mb3JtYXQpO2NvbnN0IGdsVHlwZT11dGlscy5jb252ZXJ0KHRleHR1cmUudHlwZSk7Y29uc3QgZ2xJbnRlcm5hbEZvcm1hdD1nZXRJbnRlcm5hbEZvcm1hdCh0ZXh0dXJlLmludGVybmFsRm9ybWF0LGdsRm9ybWF0LGdsVHlwZSx0ZXh0dXJlLmVuY29kaW5nKTtjb25zdCBzYW1wbGVzPWdldFJlbmRlclRhcmdldFNhbXBsZXMocmVuZGVyVGFyZ2V0KTtpZihpc011bHRpc2FtcGxlJiZyZW5kZXJUYXJnZXQudXNlUmVuZGVyYnVmZmVyKXtfZ2wucmVuZGVyYnVmZmVyU3RvcmFnZU11bHRpc2FtcGxlKDM2MTYxLHNhbXBsZXMsZ2xJbnRlcm5hbEZvcm1hdCxyZW5kZXJUYXJnZXQud2lkdGgscmVuZGVyVGFyZ2V0LmhlaWdodCk7fWVsc2UgaWYocmVuZGVyVGFyZ2V0LnVzZVJlbmRlclRvVGV4dHVyZSl7TXVsdGlzYW1wbGVkUmVuZGVyVG9UZXh0dXJlRXh0ZW5zaW9uLnJlbmRlcmJ1ZmZlclN0b3JhZ2VNdWx0aXNhbXBsZUVYVCgzNjE2MSxzYW1wbGVzLGdsSW50ZXJuYWxGb3JtYXQscmVuZGVyVGFyZ2V0LndpZHRoLHJlbmRlclRhcmdldC5oZWlnaHQpO31lbHNlIHtfZ2wucmVuZGVyYnVmZmVyU3RvcmFnZSgzNjE2MSxnbEludGVybmFsRm9ybWF0LHJlbmRlclRhcmdldC53aWR0aCxyZW5kZXJUYXJnZXQuaGVpZ2h0KTt9fV9nbC5iaW5kUmVuZGVyYnVmZmVyKDM2MTYxLG51bGwpO30vLyBTZXR1cCByZXNvdXJjZXMgZm9yIGEgRGVwdGggVGV4dHVyZSBmb3IgYSBGQk8gKG5lZWRzIGFuIGV4dGVuc2lvbikKCWZ1bmN0aW9uIHNldHVwRGVwdGhUZXh0dXJlKGZyYW1lYnVmZmVyLHJlbmRlclRhcmdldCl7Y29uc3QgaXNDdWJlPXJlbmRlclRhcmdldCYmcmVuZGVyVGFyZ2V0LmlzV2ViR0xDdWJlUmVuZGVyVGFyZ2V0O2lmKGlzQ3ViZSl0aHJvdyBuZXcgRXJyb3IoJ0RlcHRoIFRleHR1cmUgd2l0aCBjdWJlIHJlbmRlciB0YXJnZXRzIGlzIG5vdCBzdXBwb3J0ZWQnKTtzdGF0ZS5iaW5kRnJhbWVidWZmZXIoMzYxNjAsZnJhbWVidWZmZXIpO2lmKCEocmVuZGVyVGFyZ2V0LmRlcHRoVGV4dHVyZSYmcmVuZGVyVGFyZ2V0LmRlcHRoVGV4dHVyZS5pc0RlcHRoVGV4dHVyZSkpe3Rocm93IG5ldyBFcnJvcigncmVuZGVyVGFyZ2V0LmRlcHRoVGV4dHVyZSBtdXN0IGJlIGFuIGluc3RhbmNlIG9mIFRIUkVFLkRlcHRoVGV4dHVyZScpO30vLyB1cGxvYWQgYW4gZW1wdHkgZGVwdGggdGV4dHVyZSB3aXRoIGZyYW1lYnVmZmVyIHNpemUKCWlmKCFwcm9wZXJ0aWVzLmdldChyZW5kZXJUYXJnZXQuZGVwdGhUZXh0dXJlKS5fX3dlYmdsVGV4dHVyZXx8cmVuZGVyVGFyZ2V0LmRlcHRoVGV4dHVyZS5pbWFnZS53aWR0aCE9PXJlbmRlclRhcmdldC53aWR0aHx8cmVuZGVyVGFyZ2V0LmRlcHRoVGV4dHVyZS5pbWFnZS5oZWlnaHQhPT1yZW5kZXJUYXJnZXQuaGVpZ2h0KXtyZW5kZXJUYXJnZXQuZGVwdGhUZXh0dXJlLmltYWdlLndpZHRoPXJlbmRlclRhcmdldC53aWR0aDtyZW5kZXJUYXJnZXQuZGVwdGhUZXh0dXJlLmltYWdlLmhlaWdodD1yZW5kZXJUYXJnZXQuaGVpZ2h0O3JlbmRlclRhcmdldC5kZXB0aFRleHR1cmUubmVlZHNVcGRhdGU9dHJ1ZTt9c2V0VGV4dHVyZTJEKHJlbmRlclRhcmdldC5kZXB0aFRleHR1cmUsMCk7Y29uc3Qgd2ViZ2xEZXB0aFRleHR1cmU9cHJvcGVydGllcy5nZXQocmVuZGVyVGFyZ2V0LmRlcHRoVGV4dHVyZSkuX193ZWJnbFRleHR1cmU7Y29uc3Qgc2FtcGxlcz1nZXRSZW5kZXJUYXJnZXRTYW1wbGVzKHJlbmRlclRhcmdldCk7aWYocmVuZGVyVGFyZ2V0LmRlcHRoVGV4dHVyZS5mb3JtYXQ9PT1EZXB0aEZvcm1hdCl7aWYocmVuZGVyVGFyZ2V0LnVzZVJlbmRlclRvVGV4dHVyZSl7TXVsdGlzYW1wbGVkUmVuZGVyVG9UZXh0dXJlRXh0ZW5zaW9uLmZyYW1lYnVmZmVyVGV4dHVyZTJETXVsdGlzYW1wbGVFWFQoMzYxNjAsMzYwOTYsMzU1Myx3ZWJnbERlcHRoVGV4dHVyZSwwLHNhbXBsZXMpO31lbHNlIHtfZ2wuZnJhbWVidWZmZXJUZXh0dXJlMkQoMzYxNjAsMzYwOTYsMzU1Myx3ZWJnbERlcHRoVGV4dHVyZSwwKTt9fWVsc2UgaWYocmVuZGVyVGFyZ2V0LmRlcHRoVGV4dHVyZS5mb3JtYXQ9PT1EZXB0aFN0ZW5jaWxGb3JtYXQpe2lmKHJlbmRlclRhcmdldC51c2VSZW5kZXJUb1RleHR1cmUpe011bHRpc2FtcGxlZFJlbmRlclRvVGV4dHVyZUV4dGVuc2lvbi5mcmFtZWJ1ZmZlclRleHR1cmUyRE11bHRpc2FtcGxlRVhUKDM2MTYwLDMzMzA2LDM1NTMsd2ViZ2xEZXB0aFRleHR1cmUsMCxzYW1wbGVzKTt9ZWxzZSB7X2dsLmZyYW1lYnVmZmVyVGV4dHVyZTJEKDM2MTYwLDMzMzA2LDM1NTMsd2ViZ2xEZXB0aFRleHR1cmUsMCk7fX1lbHNlIHt0aHJvdyBuZXcgRXJyb3IoJ1Vua25vd24gZGVwdGhUZXh0dXJlIGZvcm1hdCcpO319Ly8gU2V0dXAgR0wgcmVzb3VyY2VzIGZvciBhIG5vbi10ZXh0dXJlIGRlcHRoIGJ1ZmZlcgoJZnVuY3Rpb24gc2V0dXBEZXB0aFJlbmRlcmJ1ZmZlcihyZW5kZXJUYXJnZXQpe2NvbnN0IHJlbmRlclRhcmdldFByb3BlcnRpZXM9cHJvcGVydGllcy5nZXQocmVuZGVyVGFyZ2V0KTtjb25zdCBpc0N1YmU9cmVuZGVyVGFyZ2V0LmlzV2ViR0xDdWJlUmVuZGVyVGFyZ2V0PT09dHJ1ZTtpZihyZW5kZXJUYXJnZXQuZGVwdGhUZXh0dXJlJiYhcmVuZGVyVGFyZ2V0UHJvcGVydGllcy5fX2F1dG9BbGxvY2F0ZURlcHRoQnVmZmVyKXtpZihpc0N1YmUpdGhyb3cgbmV3IEVycm9yKCd0YXJnZXQuZGVwdGhUZXh0dXJlIG5vdCBzdXBwb3J0ZWQgaW4gQ3ViZSByZW5kZXIgdGFyZ2V0cycpO3NldHVwRGVwdGhUZXh0dXJlKHJlbmRlclRhcmdldFByb3BlcnRpZXMuX193ZWJnbEZyYW1lYnVmZmVyLHJlbmRlclRhcmdldCk7fWVsc2Uge2lmKGlzQ3ViZSl7cmVuZGVyVGFyZ2V0UHJvcGVydGllcy5fX3dlYmdsRGVwdGhidWZmZXI9W107Zm9yKGxldCBpPTA7aTw2O2krKyl7c3RhdGUuYmluZEZyYW1lYnVmZmVyKDM2MTYwLHJlbmRlclRhcmdldFByb3BlcnRpZXMuX193ZWJnbEZyYW1lYnVmZmVyW2ldKTtyZW5kZXJUYXJnZXRQcm9wZXJ0aWVzLl9fd2ViZ2xEZXB0aGJ1ZmZlcltpXT1fZ2wuY3JlYXRlUmVuZGVyYnVmZmVyKCk7c2V0dXBSZW5kZXJCdWZmZXJTdG9yYWdlKHJlbmRlclRhcmdldFByb3BlcnRpZXMuX193ZWJnbERlcHRoYnVmZmVyW2ldLHJlbmRlclRhcmdldCxmYWxzZSk7fX1lbHNlIHtzdGF0ZS5iaW5kRnJhbWVidWZmZXIoMzYxNjAscmVuZGVyVGFyZ2V0UHJvcGVydGllcy5fX3dlYmdsRnJhbWVidWZmZXIpO3JlbmRlclRhcmdldFByb3BlcnRpZXMuX193ZWJnbERlcHRoYnVmZmVyPV9nbC5jcmVhdGVSZW5kZXJidWZmZXIoKTtzZXR1cFJlbmRlckJ1ZmZlclN0b3JhZ2UocmVuZGVyVGFyZ2V0UHJvcGVydGllcy5fX3dlYmdsRGVwdGhidWZmZXIscmVuZGVyVGFyZ2V0LGZhbHNlKTt9fXN0YXRlLmJpbmRGcmFtZWJ1ZmZlcigzNjE2MCxudWxsKTt9Ly8gcmViaW5kIGZyYW1lYnVmZmVyIHdpdGggZXh0ZXJuYWwgdGV4dHVyZXMKCWZ1bmN0aW9uIHJlYmluZFRleHR1cmVzKHJlbmRlclRhcmdldCxjb2xvclRleHR1cmUsZGVwdGhUZXh0dXJlKXtjb25zdCByZW5kZXJUYXJnZXRQcm9wZXJ0aWVzPXByb3BlcnRpZXMuZ2V0KHJlbmRlclRhcmdldCk7aWYoY29sb3JUZXh0dXJlIT09dW5kZWZpbmVkKXtzZXR1cEZyYW1lQnVmZmVyVGV4dHVyZShyZW5kZXJUYXJnZXRQcm9wZXJ0aWVzLl9fd2ViZ2xGcmFtZWJ1ZmZlcixyZW5kZXJUYXJnZXQscmVuZGVyVGFyZ2V0LnRleHR1cmUsMzYwNjQsMzU1Myk7fWlmKGRlcHRoVGV4dHVyZSE9PXVuZGVmaW5lZCl7c2V0dXBEZXB0aFJlbmRlcmJ1ZmZlcihyZW5kZXJUYXJnZXQpO319Ly8gU2V0IHVwIEdMIHJlc291cmNlcyBmb3IgdGhlIHJlbmRlciB0YXJnZXQKCWZ1bmN0aW9uIHNldHVwUmVuZGVyVGFyZ2V0KHJlbmRlclRhcmdldCl7Y29uc3QgdGV4dHVyZT1yZW5kZXJUYXJnZXQudGV4dHVyZTtjb25zdCByZW5kZXJUYXJnZXRQcm9wZXJ0aWVzPXByb3BlcnRpZXMuZ2V0KHJlbmRlclRhcmdldCk7Y29uc3QgdGV4dHVyZVByb3BlcnRpZXM9cHJvcGVydGllcy5nZXQodGV4dHVyZSk7cmVuZGVyVGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoJ2Rpc3Bvc2UnLG9uUmVuZGVyVGFyZ2V0RGlzcG9zZSk7aWYocmVuZGVyVGFyZ2V0LmlzV2ViR0xNdWx0aXBsZVJlbmRlclRhcmdldHMhPT10cnVlKXtpZih0ZXh0dXJlUHJvcGVydGllcy5fX3dlYmdsVGV4dHVyZT09PXVuZGVmaW5lZCl7dGV4dHVyZVByb3BlcnRpZXMuX193ZWJnbFRleHR1cmU9X2dsLmNyZWF0ZVRleHR1cmUoKTt9dGV4dHVyZVByb3BlcnRpZXMuX192ZXJzaW9uPXRleHR1cmUudmVyc2lvbjtpbmZvLm1lbW9yeS50ZXh0dXJlcysrO31jb25zdCBpc0N1YmU9cmVuZGVyVGFyZ2V0LmlzV2ViR0xDdWJlUmVuZGVyVGFyZ2V0PT09dHJ1ZTtjb25zdCBpc011bHRpcGxlUmVuZGVyVGFyZ2V0cz1yZW5kZXJUYXJnZXQuaXNXZWJHTE11bHRpcGxlUmVuZGVyVGFyZ2V0cz09PXRydWU7Y29uc3QgaXNSZW5kZXJUYXJnZXQzRD10ZXh0dXJlLmlzRGF0YVRleHR1cmUzRHx8dGV4dHVyZS5pc0RhdGFUZXh0dXJlMkRBcnJheTtjb25zdCBzdXBwb3J0c01pcHM9aXNQb3dlck9mVHdvJDEocmVuZGVyVGFyZ2V0KXx8aXNXZWJHTDI7Ly8gSGFuZGxlcyBXZWJHTDIgUkdCRm9ybWF0IGZhbGxiYWNrIC0gIzE4ODU4CglpZihpc1dlYkdMMiYmdGV4dHVyZS5mb3JtYXQ9PT1SR0JGb3JtYXQmJih0ZXh0dXJlLnR5cGU9PT1GbG9hdFR5cGV8fHRleHR1cmUudHlwZT09PUhhbGZGbG9hdFR5cGUpKXt0ZXh0dXJlLmZvcm1hdD1SR0JBRm9ybWF0O2NvbnNvbGUud2FybignVEhSRUUuV2ViR0xSZW5kZXJlcjogUmVuZGVyaW5nIHRvIHRleHR1cmVzIHdpdGggUkdCIGZvcm1hdCBpcyBub3Qgc3VwcG9ydGVkLiBVc2luZyBSR0JBIGZvcm1hdCBpbnN0ZWFkLicpO30vLyBTZXR1cCBmcmFtZWJ1ZmZlcgoJaWYoaXNDdWJlKXtyZW5kZXJUYXJnZXRQcm9wZXJ0aWVzLl9fd2ViZ2xGcmFtZWJ1ZmZlcj1bXTtmb3IobGV0IGk9MDtpPDY7aSsrKXtyZW5kZXJUYXJnZXRQcm9wZXJ0aWVzLl9fd2ViZ2xGcmFtZWJ1ZmZlcltpXT1fZ2wuY3JlYXRlRnJhbWVidWZmZXIoKTt9fWVsc2Uge3JlbmRlclRhcmdldFByb3BlcnRpZXMuX193ZWJnbEZyYW1lYnVmZmVyPV9nbC5jcmVhdGVGcmFtZWJ1ZmZlcigpO2lmKGlzTXVsdGlwbGVSZW5kZXJUYXJnZXRzKXtpZihjYXBhYmlsaXRpZXMuZHJhd0J1ZmZlcnMpe2NvbnN0IHRleHR1cmVzPXJlbmRlclRhcmdldC50ZXh0dXJlO2ZvcihsZXQgaT0wLGlsPXRleHR1cmVzLmxlbmd0aDtpPGlsO2krKyl7Y29uc3QgYXR0YWNobWVudFByb3BlcnRpZXM9cHJvcGVydGllcy5nZXQodGV4dHVyZXNbaV0pO2lmKGF0dGFjaG1lbnRQcm9wZXJ0aWVzLl9fd2ViZ2xUZXh0dXJlPT09dW5kZWZpbmVkKXthdHRhY2htZW50UHJvcGVydGllcy5fX3dlYmdsVGV4dHVyZT1fZ2wuY3JlYXRlVGV4dHVyZSgpO2luZm8ubWVtb3J5LnRleHR1cmVzKys7fX19ZWxzZSB7Y29uc29sZS53YXJuKCdUSFJFRS5XZWJHTFJlbmRlcmVyOiBXZWJHTE11bHRpcGxlUmVuZGVyVGFyZ2V0cyBjYW4gb25seSBiZSB1c2VkIHdpdGggV2ViR0wyIG9yIFdFQkdMX2RyYXdfYnVmZmVycyBleHRlbnNpb24uJyk7fX1lbHNlIGlmKHJlbmRlclRhcmdldC51c2VSZW5kZXJidWZmZXIpe2lmKGlzV2ViR0wyKXtyZW5kZXJUYXJnZXRQcm9wZXJ0aWVzLl9fd2ViZ2xNdWx0aXNhbXBsZWRGcmFtZWJ1ZmZlcj1fZ2wuY3JlYXRlRnJhbWVidWZmZXIoKTtyZW5kZXJUYXJnZXRQcm9wZXJ0aWVzLl9fd2ViZ2xDb2xvclJlbmRlcmJ1ZmZlcj1fZ2wuY3JlYXRlUmVuZGVyYnVmZmVyKCk7X2dsLmJpbmRSZW5kZXJidWZmZXIoMzYxNjEscmVuZGVyVGFyZ2V0UHJvcGVydGllcy5fX3dlYmdsQ29sb3JSZW5kZXJidWZmZXIpO2NvbnN0IGdsRm9ybWF0PXV0aWxzLmNvbnZlcnQodGV4dHVyZS5mb3JtYXQpO2NvbnN0IGdsVHlwZT11dGlscy5jb252ZXJ0KHRleHR1cmUudHlwZSk7Y29uc3QgZ2xJbnRlcm5hbEZvcm1hdD1nZXRJbnRlcm5hbEZvcm1hdCh0ZXh0dXJlLmludGVybmFsRm9ybWF0LGdsRm9ybWF0LGdsVHlwZSx0ZXh0dXJlLmVuY29kaW5nKTtjb25zdCBzYW1wbGVzPWdldFJlbmRlclRhcmdldFNhbXBsZXMocmVuZGVyVGFyZ2V0KTtfZ2wucmVuZGVyYnVmZmVyU3RvcmFnZU11bHRpc2FtcGxlKDM2MTYxLHNhbXBsZXMsZ2xJbnRlcm5hbEZvcm1hdCxyZW5kZXJUYXJnZXQud2lkdGgscmVuZGVyVGFyZ2V0LmhlaWdodCk7c3RhdGUuYmluZEZyYW1lYnVmZmVyKDM2MTYwLHJlbmRlclRhcmdldFByb3BlcnRpZXMuX193ZWJnbE11bHRpc2FtcGxlZEZyYW1lYnVmZmVyKTtfZ2wuZnJhbWVidWZmZXJSZW5kZXJidWZmZXIoMzYxNjAsMzYwNjQsMzYxNjEscmVuZGVyVGFyZ2V0UHJvcGVydGllcy5fX3dlYmdsQ29sb3JSZW5kZXJidWZmZXIpO19nbC5iaW5kUmVuZGVyYnVmZmVyKDM2MTYxLG51bGwpO2lmKHJlbmRlclRhcmdldC5kZXB0aEJ1ZmZlcil7cmVuZGVyVGFyZ2V0UHJvcGVydGllcy5fX3dlYmdsRGVwdGhSZW5kZXJidWZmZXI9X2dsLmNyZWF0ZVJlbmRlcmJ1ZmZlcigpO3NldHVwUmVuZGVyQnVmZmVyU3RvcmFnZShyZW5kZXJUYXJnZXRQcm9wZXJ0aWVzLl9fd2ViZ2xEZXB0aFJlbmRlcmJ1ZmZlcixyZW5kZXJUYXJnZXQsdHJ1ZSk7fXN0YXRlLmJpbmRGcmFtZWJ1ZmZlcigzNjE2MCxudWxsKTt9ZWxzZSB7Y29uc29sZS53YXJuKCdUSFJFRS5XZWJHTFJlbmRlcmVyOiBXZWJHTE11bHRpc2FtcGxlUmVuZGVyVGFyZ2V0IGNhbiBvbmx5IGJlIHVzZWQgd2l0aCBXZWJHTDIuJyk7fX19Ly8gU2V0dXAgY29sb3IgYnVmZmVyCglpZihpc0N1YmUpe3N0YXRlLmJpbmRUZXh0dXJlKDM0MDY3LHRleHR1cmVQcm9wZXJ0aWVzLl9fd2ViZ2xUZXh0dXJlKTtzZXRUZXh0dXJlUGFyYW1ldGVycygzNDA2Nyx0ZXh0dXJlLHN1cHBvcnRzTWlwcyk7Zm9yKGxldCBpPTA7aTw2O2krKyl7c2V0dXBGcmFtZUJ1ZmZlclRleHR1cmUocmVuZGVyVGFyZ2V0UHJvcGVydGllcy5fX3dlYmdsRnJhbWVidWZmZXJbaV0scmVuZGVyVGFyZ2V0LHRleHR1cmUsMzYwNjQsMzQwNjkraSk7fWlmKHRleHR1cmVOZWVkc0dlbmVyYXRlTWlwbWFwcyh0ZXh0dXJlLHN1cHBvcnRzTWlwcykpe2dlbmVyYXRlTWlwbWFwKDM0MDY3KTt9c3RhdGUudW5iaW5kVGV4dHVyZSgpO31lbHNlIGlmKGlzTXVsdGlwbGVSZW5kZXJUYXJnZXRzKXtjb25zdCB0ZXh0dXJlcz1yZW5kZXJUYXJnZXQudGV4dHVyZTtmb3IobGV0IGk9MCxpbD10ZXh0dXJlcy5sZW5ndGg7aTxpbDtpKyspe2NvbnN0IGF0dGFjaG1lbnQ9dGV4dHVyZXNbaV07Y29uc3QgYXR0YWNobWVudFByb3BlcnRpZXM9cHJvcGVydGllcy5nZXQoYXR0YWNobWVudCk7c3RhdGUuYmluZFRleHR1cmUoMzU1MyxhdHRhY2htZW50UHJvcGVydGllcy5fX3dlYmdsVGV4dHVyZSk7c2V0VGV4dHVyZVBhcmFtZXRlcnMoMzU1MyxhdHRhY2htZW50LHN1cHBvcnRzTWlwcyk7c2V0dXBGcmFtZUJ1ZmZlclRleHR1cmUocmVuZGVyVGFyZ2V0UHJvcGVydGllcy5fX3dlYmdsRnJhbWVidWZmZXIscmVuZGVyVGFyZ2V0LGF0dGFjaG1lbnQsMzYwNjQraSwzNTUzKTtpZih0ZXh0dXJlTmVlZHNHZW5lcmF0ZU1pcG1hcHMoYXR0YWNobWVudCxzdXBwb3J0c01pcHMpKXtnZW5lcmF0ZU1pcG1hcCgzNTUzKTt9fXN0YXRlLnVuYmluZFRleHR1cmUoKTt9ZWxzZSB7bGV0IGdsVGV4dHVyZVR5cGU9MzU1MztpZihpc1JlbmRlclRhcmdldDNEKXsvLyBSZW5kZXIgdGFyZ2V0cyBjb250YWluaW5nIGxheWVycywgaS5lOiBUZXh0dXJlIDNEIGFuZCAyZCBhcnJheXMKCWlmKGlzV2ViR0wyKXtjb25zdCBpc1RleHR1cmUzRD10ZXh0dXJlLmlzRGF0YVRleHR1cmUzRDtnbFRleHR1cmVUeXBlPWlzVGV4dHVyZTNEPzMyODc5OjM1ODY2O31lbHNlIHtjb25zb2xlLndhcm4oJ1RIUkVFLkRhdGFUZXh0dXJlM0QgYW5kIFRIUkVFLkRhdGFUZXh0dXJlMkRBcnJheSBvbmx5IHN1cHBvcnRlZCB3aXRoIFdlYkdMMi4nKTt9fXN0YXRlLmJpbmRUZXh0dXJlKGdsVGV4dHVyZVR5cGUsdGV4dHVyZVByb3BlcnRpZXMuX193ZWJnbFRleHR1cmUpO3NldFRleHR1cmVQYXJhbWV0ZXJzKGdsVGV4dHVyZVR5cGUsdGV4dHVyZSxzdXBwb3J0c01pcHMpO3NldHVwRnJhbWVCdWZmZXJUZXh0dXJlKHJlbmRlclRhcmdldFByb3BlcnRpZXMuX193ZWJnbEZyYW1lYnVmZmVyLHJlbmRlclRhcmdldCx0ZXh0dXJlLDM2MDY0LGdsVGV4dHVyZVR5cGUpO2lmKHRleHR1cmVOZWVkc0dlbmVyYXRlTWlwbWFwcyh0ZXh0dXJlLHN1cHBvcnRzTWlwcykpe2dlbmVyYXRlTWlwbWFwKGdsVGV4dHVyZVR5cGUpO31zdGF0ZS51bmJpbmRUZXh0dXJlKCk7fS8vIFNldHVwIGRlcHRoIGFuZCBzdGVuY2lsIGJ1ZmZlcnMKCWlmKHJlbmRlclRhcmdldC5kZXB0aEJ1ZmZlcil7c2V0dXBEZXB0aFJlbmRlcmJ1ZmZlcihyZW5kZXJUYXJnZXQpO319ZnVuY3Rpb24gdXBkYXRlUmVuZGVyVGFyZ2V0TWlwbWFwKHJlbmRlclRhcmdldCl7Y29uc3Qgc3VwcG9ydHNNaXBzPWlzUG93ZXJPZlR3byQxKHJlbmRlclRhcmdldCl8fGlzV2ViR0wyO2NvbnN0IHRleHR1cmVzPXJlbmRlclRhcmdldC5pc1dlYkdMTXVsdGlwbGVSZW5kZXJUYXJnZXRzPT09dHJ1ZT9yZW5kZXJUYXJnZXQudGV4dHVyZTpbcmVuZGVyVGFyZ2V0LnRleHR1cmVdO2ZvcihsZXQgaT0wLGlsPXRleHR1cmVzLmxlbmd0aDtpPGlsO2krKyl7Y29uc3QgdGV4dHVyZT10ZXh0dXJlc1tpXTtpZih0ZXh0dXJlTmVlZHNHZW5lcmF0ZU1pcG1hcHModGV4dHVyZSxzdXBwb3J0c01pcHMpKXtjb25zdCB0YXJnZXQ9cmVuZGVyVGFyZ2V0LmlzV2ViR0xDdWJlUmVuZGVyVGFyZ2V0PzM0MDY3OjM1NTM7Y29uc3Qgd2ViZ2xUZXh0dXJlPXByb3BlcnRpZXMuZ2V0KHRleHR1cmUpLl9fd2ViZ2xUZXh0dXJlO3N0YXRlLmJpbmRUZXh0dXJlKHRhcmdldCx3ZWJnbFRleHR1cmUpO2dlbmVyYXRlTWlwbWFwKHRhcmdldCk7c3RhdGUudW5iaW5kVGV4dHVyZSgpO319fWZ1bmN0aW9uIHVwZGF0ZU11bHRpc2FtcGxlUmVuZGVyVGFyZ2V0KHJlbmRlclRhcmdldCl7aWYocmVuZGVyVGFyZ2V0LnVzZVJlbmRlcmJ1ZmZlcil7aWYoaXNXZWJHTDIpe2NvbnN0IHdpZHRoPXJlbmRlclRhcmdldC53aWR0aDtjb25zdCBoZWlnaHQ9cmVuZGVyVGFyZ2V0LmhlaWdodDtsZXQgbWFzaz0xNjM4NDtjb25zdCBpbnZhbGlkYXRpb25BcnJheT1bMzYwNjRdO2NvbnN0IGRlcHRoU3R5bGU9cmVuZGVyVGFyZ2V0LnN0ZW5jaWxCdWZmZXI/MzMzMDY6MzYwOTY7aWYocmVuZGVyVGFyZ2V0LmRlcHRoQnVmZmVyKXtpbnZhbGlkYXRpb25BcnJheS5wdXNoKGRlcHRoU3R5bGUpO31pZighcmVuZGVyVGFyZ2V0Lmlnbm9yZURlcHRoRm9yTXVsdGlzYW1wbGVDb3B5KXtpZihyZW5kZXJUYXJnZXQuZGVwdGhCdWZmZXIpbWFza3w9MjU2O2lmKHJlbmRlclRhcmdldC5zdGVuY2lsQnVmZmVyKW1hc2t8PTEwMjQ7fWNvbnN0IHJlbmRlclRhcmdldFByb3BlcnRpZXM9cHJvcGVydGllcy5nZXQocmVuZGVyVGFyZ2V0KTtzdGF0ZS5iaW5kRnJhbWVidWZmZXIoMzYwMDgscmVuZGVyVGFyZ2V0UHJvcGVydGllcy5fX3dlYmdsTXVsdGlzYW1wbGVkRnJhbWVidWZmZXIpO3N0YXRlLmJpbmRGcmFtZWJ1ZmZlcigzNjAwOSxyZW5kZXJUYXJnZXRQcm9wZXJ0aWVzLl9fd2ViZ2xGcmFtZWJ1ZmZlcik7aWYocmVuZGVyVGFyZ2V0Lmlnbm9yZURlcHRoRm9yTXVsdGlzYW1wbGVDb3B5KXtfZ2wuaW52YWxpZGF0ZUZyYW1lYnVmZmVyKDM2MDA4LFtkZXB0aFN0eWxlXSk7X2dsLmludmFsaWRhdGVGcmFtZWJ1ZmZlcigzNjAwOSxbZGVwdGhTdHlsZV0pO31fZ2wuYmxpdEZyYW1lYnVmZmVyKDAsMCx3aWR0aCxoZWlnaHQsMCwwLHdpZHRoLGhlaWdodCxtYXNrLDk3MjgpO19nbC5pbnZhbGlkYXRlRnJhbWVidWZmZXIoMzYwMDgsaW52YWxpZGF0aW9uQXJyYXkpO3N0YXRlLmJpbmRGcmFtZWJ1ZmZlcigzNjAwOCxudWxsKTtzdGF0ZS5iaW5kRnJhbWVidWZmZXIoMzYwMDkscmVuZGVyVGFyZ2V0UHJvcGVydGllcy5fX3dlYmdsTXVsdGlzYW1wbGVkRnJhbWVidWZmZXIpO31lbHNlIHtjb25zb2xlLndhcm4oJ1RIUkVFLldlYkdMUmVuZGVyZXI6IFdlYkdMTXVsdGlzYW1wbGVSZW5kZXJUYXJnZXQgY2FuIG9ubHkgYmUgdXNlZCB3aXRoIFdlYkdMMi4nKTt9fX1mdW5jdGlvbiBnZXRSZW5kZXJUYXJnZXRTYW1wbGVzKHJlbmRlclRhcmdldCl7cmV0dXJuIGlzV2ViR0wyJiYocmVuZGVyVGFyZ2V0LnVzZVJlbmRlcmJ1ZmZlcnx8cmVuZGVyVGFyZ2V0LnVzZVJlbmRlclRvVGV4dHVyZSk/TWF0aC5taW4obWF4U2FtcGxlcyxyZW5kZXJUYXJnZXQuc2FtcGxlcyk6MDt9ZnVuY3Rpb24gdXBkYXRlVmlkZW9UZXh0dXJlKHRleHR1cmUpe2NvbnN0IGZyYW1lPWluZm8ucmVuZGVyLmZyYW1lOy8vIENoZWNrIHRoZSBsYXN0IGZyYW1lIHdlIHVwZGF0ZWQgdGhlIFZpZGVvVGV4dHVyZQoJaWYoX3ZpZGVvVGV4dHVyZXMuZ2V0KHRleHR1cmUpIT09ZnJhbWUpe192aWRlb1RleHR1cmVzLnNldCh0ZXh0dXJlLGZyYW1lKTt0ZXh0dXJlLnVwZGF0ZSgpO319Ly8gYmFja3dhcmRzIGNvbXBhdGliaWxpdHkKCWxldCB3YXJuZWRUZXh0dXJlMkQ9ZmFsc2U7bGV0IHdhcm5lZFRleHR1cmVDdWJlPWZhbHNlO2Z1bmN0aW9uIHNhZmVTZXRUZXh0dXJlMkQodGV4dHVyZSxzbG90KXtpZih0ZXh0dXJlJiZ0ZXh0dXJlLmlzV2ViR0xSZW5kZXJUYXJnZXQpe2lmKHdhcm5lZFRleHR1cmUyRD09PWZhbHNlKXtjb25zb2xlLndhcm4oJ1RIUkVFLldlYkdMVGV4dHVyZXMuc2FmZVNldFRleHR1cmUyRDogZG9uXCd0IHVzZSByZW5kZXIgdGFyZ2V0cyBhcyB0ZXh0dXJlcy4gVXNlIHRoZWlyIC50ZXh0dXJlIHByb3BlcnR5IGluc3RlYWQuJyk7d2FybmVkVGV4dHVyZTJEPXRydWU7fXRleHR1cmU9dGV4dHVyZS50ZXh0dXJlO31zZXRUZXh0dXJlMkQodGV4dHVyZSxzbG90KTt9ZnVuY3Rpb24gc2FmZVNldFRleHR1cmVDdWJlKHRleHR1cmUsc2xvdCl7aWYodGV4dHVyZSYmdGV4dHVyZS5pc1dlYkdMQ3ViZVJlbmRlclRhcmdldCl7aWYod2FybmVkVGV4dHVyZUN1YmU9PT1mYWxzZSl7Y29uc29sZS53YXJuKCdUSFJFRS5XZWJHTFRleHR1cmVzLnNhZmVTZXRUZXh0dXJlQ3ViZTogZG9uXCd0IHVzZSBjdWJlIHJlbmRlciB0YXJnZXRzIGFzIHRleHR1cmVzLiBVc2UgdGhlaXIgLnRleHR1cmUgcHJvcGVydHkgaW5zdGVhZC4nKTt3YXJuZWRUZXh0dXJlQ3ViZT10cnVlO310ZXh0dXJlPXRleHR1cmUudGV4dHVyZTt9c2V0VGV4dHVyZUN1YmUodGV4dHVyZSxzbG90KTt9Ly8KCXRoaXMuYWxsb2NhdGVUZXh0dXJlVW5pdD1hbGxvY2F0ZVRleHR1cmVVbml0O3RoaXMucmVzZXRUZXh0dXJlVW5pdHM9cmVzZXRUZXh0dXJlVW5pdHM7dGhpcy5zZXRUZXh0dXJlMkQ9c2V0VGV4dHVyZTJEO3RoaXMuc2V0VGV4dHVyZTJEQXJyYXk9c2V0VGV4dHVyZTJEQXJyYXk7dGhpcy5zZXRUZXh0dXJlM0Q9c2V0VGV4dHVyZTNEO3RoaXMuc2V0VGV4dHVyZUN1YmU9c2V0VGV4dHVyZUN1YmU7dGhpcy5yZWJpbmRUZXh0dXJlcz1yZWJpbmRUZXh0dXJlczt0aGlzLnNldHVwUmVuZGVyVGFyZ2V0PXNldHVwUmVuZGVyVGFyZ2V0O3RoaXMudXBkYXRlUmVuZGVyVGFyZ2V0TWlwbWFwPXVwZGF0ZVJlbmRlclRhcmdldE1pcG1hcDt0aGlzLnVwZGF0ZU11bHRpc2FtcGxlUmVuZGVyVGFyZ2V0PXVwZGF0ZU11bHRpc2FtcGxlUmVuZGVyVGFyZ2V0O3RoaXMuc2V0dXBEZXB0aFJlbmRlcmJ1ZmZlcj1zZXR1cERlcHRoUmVuZGVyYnVmZmVyO3RoaXMuc2V0dXBGcmFtZUJ1ZmZlclRleHR1cmU9c2V0dXBGcmFtZUJ1ZmZlclRleHR1cmU7dGhpcy5zYWZlU2V0VGV4dHVyZTJEPXNhZmVTZXRUZXh0dXJlMkQ7dGhpcy5zYWZlU2V0VGV4dHVyZUN1YmU9c2FmZVNldFRleHR1cmVDdWJlO31mdW5jdGlvbiBXZWJHTFV0aWxzKGdsLGV4dGVuc2lvbnMsY2FwYWJpbGl0aWVzKXtjb25zdCBpc1dlYkdMMj1jYXBhYmlsaXRpZXMuaXNXZWJHTDI7ZnVuY3Rpb24gY29udmVydChwKXtsZXQgZXh0ZW5zaW9uO2lmKHA9PT1VbnNpZ25lZEJ5dGVUeXBlKXJldHVybiA1MTIxO2lmKHA9PT1VbnNpZ25lZFNob3J0NDQ0NFR5cGUpcmV0dXJuIDMyODE5O2lmKHA9PT1VbnNpZ25lZFNob3J0NTU1MVR5cGUpcmV0dXJuIDMyODIwO2lmKHA9PT1VbnNpZ25lZFNob3J0NTY1VHlwZSlyZXR1cm4gMzM2MzU7aWYocD09PUJ5dGVUeXBlKXJldHVybiA1MTIwO2lmKHA9PT1TaG9ydFR5cGUpcmV0dXJuIDUxMjI7aWYocD09PVVuc2lnbmVkU2hvcnRUeXBlKXJldHVybiA1MTIzO2lmKHA9PT1JbnRUeXBlKXJldHVybiA1MTI0O2lmKHA9PT1VbnNpZ25lZEludFR5cGUpcmV0dXJuIDUxMjU7aWYocD09PUZsb2F0VHlwZSlyZXR1cm4gNTEyNjtpZihwPT09SGFsZkZsb2F0VHlwZSl7aWYoaXNXZWJHTDIpcmV0dXJuIDUxMzE7ZXh0ZW5zaW9uPWV4dGVuc2lvbnMuZ2V0KCdPRVNfdGV4dHVyZV9oYWxmX2Zsb2F0Jyk7aWYoZXh0ZW5zaW9uIT09bnVsbCl7cmV0dXJuIGV4dGVuc2lvbi5IQUxGX0ZMT0FUX09FUzt9ZWxzZSB7cmV0dXJuIG51bGw7fX1pZihwPT09QWxwaGFGb3JtYXQpcmV0dXJuIDY0MDY7aWYocD09PVJHQkZvcm1hdClyZXR1cm4gNjQwNztpZihwPT09UkdCQUZvcm1hdClyZXR1cm4gNjQwODtpZihwPT09THVtaW5hbmNlRm9ybWF0KXJldHVybiA2NDA5O2lmKHA9PT1MdW1pbmFuY2VBbHBoYUZvcm1hdClyZXR1cm4gNjQxMDtpZihwPT09RGVwdGhGb3JtYXQpcmV0dXJuIDY0MDI7aWYocD09PURlcHRoU3RlbmNpbEZvcm1hdClyZXR1cm4gMzQwNDE7aWYocD09PVJlZEZvcm1hdClyZXR1cm4gNjQwMzsvLyBXZWJHTDIgZm9ybWF0cy4KCWlmKHA9PT1SZWRJbnRlZ2VyRm9ybWF0KXJldHVybiAzNjI0NDtpZihwPT09UkdGb3JtYXQpcmV0dXJuIDMzMzE5O2lmKHA9PT1SR0ludGVnZXJGb3JtYXQpcmV0dXJuIDMzMzIwO2lmKHA9PT1SR0JJbnRlZ2VyRm9ybWF0KXJldHVybiAzNjI0ODtpZihwPT09UkdCQUludGVnZXJGb3JtYXQpcmV0dXJuIDM2MjQ5O2lmKHA9PT1SR0JfUzNUQ19EWFQxX0Zvcm1hdHx8cD09PVJHQkFfUzNUQ19EWFQxX0Zvcm1hdHx8cD09PVJHQkFfUzNUQ19EWFQzX0Zvcm1hdHx8cD09PVJHQkFfUzNUQ19EWFQ1X0Zvcm1hdCl7ZXh0ZW5zaW9uPWV4dGVuc2lvbnMuZ2V0KCdXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfczN0YycpO2lmKGV4dGVuc2lvbiE9PW51bGwpe2lmKHA9PT1SR0JfUzNUQ19EWFQxX0Zvcm1hdClyZXR1cm4gZXh0ZW5zaW9uLkNPTVBSRVNTRURfUkdCX1MzVENfRFhUMV9FWFQ7aWYocD09PVJHQkFfUzNUQ19EWFQxX0Zvcm1hdClyZXR1cm4gZXh0ZW5zaW9uLkNPTVBSRVNTRURfUkdCQV9TM1RDX0RYVDFfRVhUO2lmKHA9PT1SR0JBX1MzVENfRFhUM19Gb3JtYXQpcmV0dXJuIGV4dGVuc2lvbi5DT01QUkVTU0VEX1JHQkFfUzNUQ19EWFQzX0VYVDtpZihwPT09UkdCQV9TM1RDX0RYVDVfRm9ybWF0KXJldHVybiBleHRlbnNpb24uQ09NUFJFU1NFRF9SR0JBX1MzVENfRFhUNV9FWFQ7fWVsc2Uge3JldHVybiBudWxsO319aWYocD09PVJHQl9QVlJUQ180QlBQVjFfRm9ybWF0fHxwPT09UkdCX1BWUlRDXzJCUFBWMV9Gb3JtYXR8fHA9PT1SR0JBX1BWUlRDXzRCUFBWMV9Gb3JtYXR8fHA9PT1SR0JBX1BWUlRDXzJCUFBWMV9Gb3JtYXQpe2V4dGVuc2lvbj1leHRlbnNpb25zLmdldCgnV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3B2cnRjJyk7aWYoZXh0ZW5zaW9uIT09bnVsbCl7aWYocD09PVJHQl9QVlJUQ180QlBQVjFfRm9ybWF0KXJldHVybiBleHRlbnNpb24uQ09NUFJFU1NFRF9SR0JfUFZSVENfNEJQUFYxX0lNRztpZihwPT09UkdCX1BWUlRDXzJCUFBWMV9Gb3JtYXQpcmV0dXJuIGV4dGVuc2lvbi5DT01QUkVTU0VEX1JHQl9QVlJUQ18yQlBQVjFfSU1HO2lmKHA9PT1SR0JBX1BWUlRDXzRCUFBWMV9Gb3JtYXQpcmV0dXJuIGV4dGVuc2lvbi5DT01QUkVTU0VEX1JHQkFfUFZSVENfNEJQUFYxX0lNRztpZihwPT09UkdCQV9QVlJUQ18yQlBQVjFfRm9ybWF0KXJldHVybiBleHRlbnNpb24uQ09NUFJFU1NFRF9SR0JBX1BWUlRDXzJCUFBWMV9JTUc7fWVsc2Uge3JldHVybiBudWxsO319aWYocD09PVJHQl9FVEMxX0Zvcm1hdCl7ZXh0ZW5zaW9uPWV4dGVuc2lvbnMuZ2V0KCdXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfZXRjMScpO2lmKGV4dGVuc2lvbiE9PW51bGwpe3JldHVybiBleHRlbnNpb24uQ09NUFJFU1NFRF9SR0JfRVRDMV9XRUJHTDt9ZWxzZSB7cmV0dXJuIG51bGw7fX1pZihwPT09UkdCX0VUQzJfRm9ybWF0fHxwPT09UkdCQV9FVEMyX0VBQ19Gb3JtYXQpe2V4dGVuc2lvbj1leHRlbnNpb25zLmdldCgnV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX2V0YycpO2lmKGV4dGVuc2lvbiE9PW51bGwpe2lmKHA9PT1SR0JfRVRDMl9Gb3JtYXQpcmV0dXJuIGV4dGVuc2lvbi5DT01QUkVTU0VEX1JHQjhfRVRDMjtpZihwPT09UkdCQV9FVEMyX0VBQ19Gb3JtYXQpcmV0dXJuIGV4dGVuc2lvbi5DT01QUkVTU0VEX1JHQkE4X0VUQzJfRUFDO319aWYocD09PVJHQkFfQVNUQ180eDRfRm9ybWF0fHxwPT09UkdCQV9BU1RDXzV4NF9Gb3JtYXR8fHA9PT1SR0JBX0FTVENfNXg1X0Zvcm1hdHx8cD09PVJHQkFfQVNUQ182eDVfRm9ybWF0fHxwPT09UkdCQV9BU1RDXzZ4Nl9Gb3JtYXR8fHA9PT1SR0JBX0FTVENfOHg1X0Zvcm1hdHx8cD09PVJHQkFfQVNUQ184eDZfRm9ybWF0fHxwPT09UkdCQV9BU1RDXzh4OF9Gb3JtYXR8fHA9PT1SR0JBX0FTVENfMTB4NV9Gb3JtYXR8fHA9PT1SR0JBX0FTVENfMTB4Nl9Gb3JtYXR8fHA9PT1SR0JBX0FTVENfMTB4OF9Gb3JtYXR8fHA9PT1SR0JBX0FTVENfMTB4MTBfRm9ybWF0fHxwPT09UkdCQV9BU1RDXzEyeDEwX0Zvcm1hdHx8cD09PVJHQkFfQVNUQ18xMngxMl9Gb3JtYXR8fHA9PT1TUkdCOF9BTFBIQThfQVNUQ180eDRfRm9ybWF0fHxwPT09U1JHQjhfQUxQSEE4X0FTVENfNXg0X0Zvcm1hdHx8cD09PVNSR0I4X0FMUEhBOF9BU1RDXzV4NV9Gb3JtYXR8fHA9PT1TUkdCOF9BTFBIQThfQVNUQ182eDVfRm9ybWF0fHxwPT09U1JHQjhfQUxQSEE4X0FTVENfNng2X0Zvcm1hdHx8cD09PVNSR0I4X0FMUEhBOF9BU1RDXzh4NV9Gb3JtYXR8fHA9PT1TUkdCOF9BTFBIQThfQVNUQ184eDZfRm9ybWF0fHxwPT09U1JHQjhfQUxQSEE4X0FTVENfOHg4X0Zvcm1hdHx8cD09PVNSR0I4X0FMUEhBOF9BU1RDXzEweDVfRm9ybWF0fHxwPT09U1JHQjhfQUxQSEE4X0FTVENfMTB4Nl9Gb3JtYXR8fHA9PT1TUkdCOF9BTFBIQThfQVNUQ18xMHg4X0Zvcm1hdHx8cD09PVNSR0I4X0FMUEhBOF9BU1RDXzEweDEwX0Zvcm1hdHx8cD09PVNSR0I4X0FMUEhBOF9BU1RDXzEyeDEwX0Zvcm1hdHx8cD09PVNSR0I4X0FMUEhBOF9BU1RDXzEyeDEyX0Zvcm1hdCl7ZXh0ZW5zaW9uPWV4dGVuc2lvbnMuZ2V0KCdXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfYXN0YycpO2lmKGV4dGVuc2lvbiE9PW51bGwpey8vIFRPRE8gQ29tcGxldGU/CglyZXR1cm4gcDt9ZWxzZSB7cmV0dXJuIG51bGw7fX1pZihwPT09UkdCQV9CUFRDX0Zvcm1hdCl7ZXh0ZW5zaW9uPWV4dGVuc2lvbnMuZ2V0KCdFWFRfdGV4dHVyZV9jb21wcmVzc2lvbl9icHRjJyk7aWYoZXh0ZW5zaW9uIT09bnVsbCl7Ly8gVE9ETyBDb21wbGV0ZT8KCXJldHVybiBwO31lbHNlIHtyZXR1cm4gbnVsbDt9fWlmKHA9PT1VbnNpZ25lZEludDI0OFR5cGUpe2lmKGlzV2ViR0wyKXJldHVybiAzNDA0MjtleHRlbnNpb249ZXh0ZW5zaW9ucy5nZXQoJ1dFQkdMX2RlcHRoX3RleHR1cmUnKTtpZihleHRlbnNpb24hPT1udWxsKXtyZXR1cm4gZXh0ZW5zaW9uLlVOU0lHTkVEX0lOVF8yNF84X1dFQkdMO31lbHNlIHtyZXR1cm4gbnVsbDt9fX1yZXR1cm4ge2NvbnZlcnQ6Y29udmVydH07fWNsYXNzIEFycmF5Q2FtZXJhIGV4dGVuZHMgUGVyc3BlY3RpdmVDYW1lcmF7Y29uc3RydWN0b3IoYXJyYXkpe2lmKGFycmF5PT09dm9pZCAwKXthcnJheT1bXTt9c3VwZXIoKTt0aGlzLmNhbWVyYXM9YXJyYXk7fX1BcnJheUNhbWVyYS5wcm90b3R5cGUuaXNBcnJheUNhbWVyYT10cnVlO2NsYXNzIEdyb3VwIGV4dGVuZHMgT2JqZWN0M0R7Y29uc3RydWN0b3IoKXtzdXBlcigpO3RoaXMudHlwZT0nR3JvdXAnO319R3JvdXAucHJvdG90eXBlLmlzR3JvdXA9dHJ1ZTtjb25zdCBfbW92ZUV2ZW50PXt0eXBlOidtb3ZlJ307Y2xhc3MgV2ViWFJDb250cm9sbGVye2NvbnN0cnVjdG9yKCl7dGhpcy5fdGFyZ2V0UmF5PW51bGw7dGhpcy5fZ3JpcD1udWxsO3RoaXMuX2hhbmQ9bnVsbDt9Z2V0SGFuZFNwYWNlKCl7aWYodGhpcy5faGFuZD09PW51bGwpe3RoaXMuX2hhbmQ9bmV3IEdyb3VwKCk7dGhpcy5faGFuZC5tYXRyaXhBdXRvVXBkYXRlPWZhbHNlO3RoaXMuX2hhbmQudmlzaWJsZT1mYWxzZTt0aGlzLl9oYW5kLmpvaW50cz17fTt0aGlzLl9oYW5kLmlucHV0U3RhdGU9e3BpbmNoaW5nOmZhbHNlfTt9cmV0dXJuIHRoaXMuX2hhbmQ7fWdldFRhcmdldFJheVNwYWNlKCl7aWYodGhpcy5fdGFyZ2V0UmF5PT09bnVsbCl7dGhpcy5fdGFyZ2V0UmF5PW5ldyBHcm91cCgpO3RoaXMuX3RhcmdldFJheS5tYXRyaXhBdXRvVXBkYXRlPWZhbHNlO3RoaXMuX3RhcmdldFJheS52aXNpYmxlPWZhbHNlO3RoaXMuX3RhcmdldFJheS5oYXNMaW5lYXJWZWxvY2l0eT1mYWxzZTt0aGlzLl90YXJnZXRSYXkubGluZWFyVmVsb2NpdHk9bmV3IFZlY3RvcjMoKTt0aGlzLl90YXJnZXRSYXkuaGFzQW5ndWxhclZlbG9jaXR5PWZhbHNlO3RoaXMuX3RhcmdldFJheS5hbmd1bGFyVmVsb2NpdHk9bmV3IFZlY3RvcjMoKTt9cmV0dXJuIHRoaXMuX3RhcmdldFJheTt9Z2V0R3JpcFNwYWNlKCl7aWYodGhpcy5fZ3JpcD09PW51bGwpe3RoaXMuX2dyaXA9bmV3IEdyb3VwKCk7dGhpcy5fZ3JpcC5tYXRyaXhBdXRvVXBkYXRlPWZhbHNlO3RoaXMuX2dyaXAudmlzaWJsZT1mYWxzZTt0aGlzLl9ncmlwLmhhc0xpbmVhclZlbG9jaXR5PWZhbHNlO3RoaXMuX2dyaXAubGluZWFyVmVsb2NpdHk9bmV3IFZlY3RvcjMoKTt0aGlzLl9ncmlwLmhhc0FuZ3VsYXJWZWxvY2l0eT1mYWxzZTt0aGlzLl9ncmlwLmFuZ3VsYXJWZWxvY2l0eT1uZXcgVmVjdG9yMygpO31yZXR1cm4gdGhpcy5fZ3JpcDt9ZGlzcGF0Y2hFdmVudChldmVudCl7aWYodGhpcy5fdGFyZ2V0UmF5IT09bnVsbCl7dGhpcy5fdGFyZ2V0UmF5LmRpc3BhdGNoRXZlbnQoZXZlbnQpO31pZih0aGlzLl9ncmlwIT09bnVsbCl7dGhpcy5fZ3JpcC5kaXNwYXRjaEV2ZW50KGV2ZW50KTt9aWYodGhpcy5faGFuZCE9PW51bGwpe3RoaXMuX2hhbmQuZGlzcGF0Y2hFdmVudChldmVudCk7fXJldHVybiB0aGlzO31kaXNjb25uZWN0KGlucHV0U291cmNlKXt0aGlzLmRpc3BhdGNoRXZlbnQoe3R5cGU6J2Rpc2Nvbm5lY3RlZCcsZGF0YTppbnB1dFNvdXJjZX0pO2lmKHRoaXMuX3RhcmdldFJheSE9PW51bGwpe3RoaXMuX3RhcmdldFJheS52aXNpYmxlPWZhbHNlO31pZih0aGlzLl9ncmlwIT09bnVsbCl7dGhpcy5fZ3JpcC52aXNpYmxlPWZhbHNlO31pZih0aGlzLl9oYW5kIT09bnVsbCl7dGhpcy5faGFuZC52aXNpYmxlPWZhbHNlO31yZXR1cm4gdGhpczt9dXBkYXRlKGlucHV0U291cmNlLGZyYW1lLHJlZmVyZW5jZVNwYWNlKXtsZXQgaW5wdXRQb3NlPW51bGw7bGV0IGdyaXBQb3NlPW51bGw7bGV0IGhhbmRQb3NlPW51bGw7Y29uc3QgdGFyZ2V0UmF5PXRoaXMuX3RhcmdldFJheTtjb25zdCBncmlwPXRoaXMuX2dyaXA7Y29uc3QgaGFuZD10aGlzLl9oYW5kO2lmKGlucHV0U291cmNlJiZmcmFtZS5zZXNzaW9uLnZpc2liaWxpdHlTdGF0ZSE9PSd2aXNpYmxlLWJsdXJyZWQnKXtpZih0YXJnZXRSYXkhPT1udWxsKXtpbnB1dFBvc2U9ZnJhbWUuZ2V0UG9zZShpbnB1dFNvdXJjZS50YXJnZXRSYXlTcGFjZSxyZWZlcmVuY2VTcGFjZSk7aWYoaW5wdXRQb3NlIT09bnVsbCl7dGFyZ2V0UmF5Lm1hdHJpeC5mcm9tQXJyYXkoaW5wdXRQb3NlLnRyYW5zZm9ybS5tYXRyaXgpO3RhcmdldFJheS5tYXRyaXguZGVjb21wb3NlKHRhcmdldFJheS5wb3NpdGlvbix0YXJnZXRSYXkucm90YXRpb24sdGFyZ2V0UmF5LnNjYWxlKTtpZihpbnB1dFBvc2UubGluZWFyVmVsb2NpdHkpe3RhcmdldFJheS5oYXNMaW5lYXJWZWxvY2l0eT10cnVlO3RhcmdldFJheS5saW5lYXJWZWxvY2l0eS5jb3B5KGlucHV0UG9zZS5saW5lYXJWZWxvY2l0eSk7fWVsc2Uge3RhcmdldFJheS5oYXNMaW5lYXJWZWxvY2l0eT1mYWxzZTt9aWYoaW5wdXRQb3NlLmFuZ3VsYXJWZWxvY2l0eSl7dGFyZ2V0UmF5Lmhhc0FuZ3VsYXJWZWxvY2l0eT10cnVlO3RhcmdldFJheS5hbmd1bGFyVmVsb2NpdHkuY29weShpbnB1dFBvc2UuYW5ndWxhclZlbG9jaXR5KTt9ZWxzZSB7dGFyZ2V0UmF5Lmhhc0FuZ3VsYXJWZWxvY2l0eT1mYWxzZTt9dGhpcy5kaXNwYXRjaEV2ZW50KF9tb3ZlRXZlbnQpO319aWYoaGFuZCYmaW5wdXRTb3VyY2UuaGFuZCl7aGFuZFBvc2U9dHJ1ZTtmb3IoY29uc3QgaW5wdXRqb2ludCBvZiBpbnB1dFNvdXJjZS5oYW5kLnZhbHVlcygpKXsvLyBVcGRhdGUgdGhlIGpvaW50cyBncm91cHMgd2l0aCB0aGUgWFJKb2ludCBwb3NlcwoJY29uc3Qgam9pbnRQb3NlPWZyYW1lLmdldEpvaW50UG9zZShpbnB1dGpvaW50LHJlZmVyZW5jZVNwYWNlKTtpZihoYW5kLmpvaW50c1tpbnB1dGpvaW50LmpvaW50TmFtZV09PT11bmRlZmluZWQpey8vIFRoZSB0cmFuc2Zvcm0gb2YgdGhpcyBqb2ludCB3aWxsIGJlIHVwZGF0ZWQgd2l0aCB0aGUgam9pbnQgcG9zZSBvbiBlYWNoIGZyYW1lCgljb25zdCBqb2ludD1uZXcgR3JvdXAoKTtqb2ludC5tYXRyaXhBdXRvVXBkYXRlPWZhbHNlO2pvaW50LnZpc2libGU9ZmFsc2U7aGFuZC5qb2ludHNbaW5wdXRqb2ludC5qb2ludE5hbWVdPWpvaW50Oy8vID8/CgloYW5kLmFkZChqb2ludCk7fWNvbnN0IGpvaW50PWhhbmQuam9pbnRzW2lucHV0am9pbnQuam9pbnROYW1lXTtpZihqb2ludFBvc2UhPT1udWxsKXtqb2ludC5tYXRyaXguZnJvbUFycmF5KGpvaW50UG9zZS50cmFuc2Zvcm0ubWF0cml4KTtqb2ludC5tYXRyaXguZGVjb21wb3NlKGpvaW50LnBvc2l0aW9uLGpvaW50LnJvdGF0aW9uLGpvaW50LnNjYWxlKTtqb2ludC5qb2ludFJhZGl1cz1qb2ludFBvc2UucmFkaXVzO31qb2ludC52aXNpYmxlPWpvaW50UG9zZSE9PW51bGw7fS8vIEN1c3RvbSBldmVudHMKCS8vIENoZWNrIHBpbmNoegoJY29uc3QgaW5kZXhUaXA9aGFuZC5qb2ludHNbJ2luZGV4LWZpbmdlci10aXAnXTtjb25zdCB0aHVtYlRpcD1oYW5kLmpvaW50c1sndGh1bWItdGlwJ107Y29uc3QgZGlzdGFuY2U9aW5kZXhUaXAucG9zaXRpb24uZGlzdGFuY2VUbyh0aHVtYlRpcC5wb3NpdGlvbik7Y29uc3QgZGlzdGFuY2VUb1BpbmNoPTAuMDI7Y29uc3QgdGhyZXNob2xkPTAuMDA1O2lmKGhhbmQuaW5wdXRTdGF0ZS5waW5jaGluZyYmZGlzdGFuY2U+ZGlzdGFuY2VUb1BpbmNoK3RocmVzaG9sZCl7aGFuZC5pbnB1dFN0YXRlLnBpbmNoaW5nPWZhbHNlO3RoaXMuZGlzcGF0Y2hFdmVudCh7dHlwZToncGluY2hlbmQnLGhhbmRlZG5lc3M6aW5wdXRTb3VyY2UuaGFuZGVkbmVzcyx0YXJnZXQ6dGhpc30pO31lbHNlIGlmKCFoYW5kLmlucHV0U3RhdGUucGluY2hpbmcmJmRpc3RhbmNlPD1kaXN0YW5jZVRvUGluY2gtdGhyZXNob2xkKXtoYW5kLmlucHV0U3RhdGUucGluY2hpbmc9dHJ1ZTt0aGlzLmRpc3BhdGNoRXZlbnQoe3R5cGU6J3BpbmNoc3RhcnQnLGhhbmRlZG5lc3M6aW5wdXRTb3VyY2UuaGFuZGVkbmVzcyx0YXJnZXQ6dGhpc30pO319ZWxzZSB7aWYoZ3JpcCE9PW51bGwmJmlucHV0U291cmNlLmdyaXBTcGFjZSl7Z3JpcFBvc2U9ZnJhbWUuZ2V0UG9zZShpbnB1dFNvdXJjZS5ncmlwU3BhY2UscmVmZXJlbmNlU3BhY2UpO2lmKGdyaXBQb3NlIT09bnVsbCl7Z3JpcC5tYXRyaXguZnJvbUFycmF5KGdyaXBQb3NlLnRyYW5zZm9ybS5tYXRyaXgpO2dyaXAubWF0cml4LmRlY29tcG9zZShncmlwLnBvc2l0aW9uLGdyaXAucm90YXRpb24sZ3JpcC5zY2FsZSk7aWYoZ3JpcFBvc2UubGluZWFyVmVsb2NpdHkpe2dyaXAuaGFzTGluZWFyVmVsb2NpdHk9dHJ1ZTtncmlwLmxpbmVhclZlbG9jaXR5LmNvcHkoZ3JpcFBvc2UubGluZWFyVmVsb2NpdHkpO31lbHNlIHtncmlwLmhhc0xpbmVhclZlbG9jaXR5PWZhbHNlO31pZihncmlwUG9zZS5hbmd1bGFyVmVsb2NpdHkpe2dyaXAuaGFzQW5ndWxhclZlbG9jaXR5PXRydWU7Z3JpcC5hbmd1bGFyVmVsb2NpdHkuY29weShncmlwUG9zZS5hbmd1bGFyVmVsb2NpdHkpO31lbHNlIHtncmlwLmhhc0FuZ3VsYXJWZWxvY2l0eT1mYWxzZTt9fX19fWlmKHRhcmdldFJheSE9PW51bGwpe3RhcmdldFJheS52aXNpYmxlPWlucHV0UG9zZSE9PW51bGw7fWlmKGdyaXAhPT1udWxsKXtncmlwLnZpc2libGU9Z3JpcFBvc2UhPT1udWxsO31pZihoYW5kIT09bnVsbCl7aGFuZC52aXNpYmxlPWhhbmRQb3NlIT09bnVsbDt9cmV0dXJuIHRoaXM7fX1jbGFzcyBEZXB0aFRleHR1cmUgZXh0ZW5kcyBUZXh0dXJle2NvbnN0cnVjdG9yKHdpZHRoLGhlaWdodCx0eXBlLG1hcHBpbmcsd3JhcFMsd3JhcFQsbWFnRmlsdGVyLG1pbkZpbHRlcixhbmlzb3Ryb3B5LGZvcm1hdCl7Zm9ybWF0PWZvcm1hdCE9PXVuZGVmaW5lZD9mb3JtYXQ6RGVwdGhGb3JtYXQ7aWYoZm9ybWF0IT09RGVwdGhGb3JtYXQmJmZvcm1hdCE9PURlcHRoU3RlbmNpbEZvcm1hdCl7dGhyb3cgbmV3IEVycm9yKCdEZXB0aFRleHR1cmUgZm9ybWF0IG11c3QgYmUgZWl0aGVyIFRIUkVFLkRlcHRoRm9ybWF0IG9yIFRIUkVFLkRlcHRoU3RlbmNpbEZvcm1hdCcpO31pZih0eXBlPT09dW5kZWZpbmVkJiZmb3JtYXQ9PT1EZXB0aEZvcm1hdCl0eXBlPVVuc2lnbmVkU2hvcnRUeXBlO2lmKHR5cGU9PT11bmRlZmluZWQmJmZvcm1hdD09PURlcHRoU3RlbmNpbEZvcm1hdCl0eXBlPVVuc2lnbmVkSW50MjQ4VHlwZTtzdXBlcihudWxsLG1hcHBpbmcsd3JhcFMsd3JhcFQsbWFnRmlsdGVyLG1pbkZpbHRlcixmb3JtYXQsdHlwZSxhbmlzb3Ryb3B5KTt0aGlzLmltYWdlPXt3aWR0aDp3aWR0aCxoZWlnaHQ6aGVpZ2h0fTt0aGlzLm1hZ0ZpbHRlcj1tYWdGaWx0ZXIhPT11bmRlZmluZWQ/bWFnRmlsdGVyOk5lYXJlc3RGaWx0ZXI7dGhpcy5taW5GaWx0ZXI9bWluRmlsdGVyIT09dW5kZWZpbmVkP21pbkZpbHRlcjpOZWFyZXN0RmlsdGVyO3RoaXMuZmxpcFk9ZmFsc2U7dGhpcy5nZW5lcmF0ZU1pcG1hcHM9ZmFsc2U7fX1EZXB0aFRleHR1cmUucHJvdG90eXBlLmlzRGVwdGhUZXh0dXJlPXRydWU7Y2xhc3MgV2ViWFJNYW5hZ2VyIGV4dGVuZHMgRXZlbnREaXNwYXRjaGVye2NvbnN0cnVjdG9yKHJlbmRlcmVyLGdsKXtzdXBlcigpO2NvbnN0IHNjb3BlPXRoaXM7bGV0IHNlc3Npb249bnVsbDtsZXQgZnJhbWVidWZmZXJTY2FsZUZhY3Rvcj0xLjA7bGV0IHJlZmVyZW5jZVNwYWNlPW51bGw7bGV0IHJlZmVyZW5jZVNwYWNlVHlwZT0nbG9jYWwtZmxvb3InO2NvbnN0IGhhc011bHRpc2FtcGxlZFJlbmRlclRvVGV4dHVyZT1yZW5kZXJlci5leHRlbnNpb25zLmhhcygnV0VCR0xfbXVsdGlzYW1wbGVkX3JlbmRlcl90b190ZXh0dXJlJyk7bGV0IHBvc2U9bnVsbDtsZXQgZ2xCaW5kaW5nPW51bGw7bGV0IGdsUHJvakxheWVyPW51bGw7bGV0IGdsQmFzZUxheWVyPW51bGw7bGV0IGlzTXVsdGlzYW1wbGU9ZmFsc2U7bGV0IHhyRnJhbWU9bnVsbDtjb25zdCBhdHRyaWJ1dGVzPWdsLmdldENvbnRleHRBdHRyaWJ1dGVzKCk7bGV0IGluaXRpYWxSZW5kZXJUYXJnZXQ9bnVsbDtsZXQgbmV3UmVuZGVyVGFyZ2V0PW51bGw7Y29uc3QgY29udHJvbGxlcnM9W107Y29uc3QgaW5wdXRTb3VyY2VzTWFwPW5ldyBNYXAoKTsvLwoJY29uc3QgY2FtZXJhTD1uZXcgUGVyc3BlY3RpdmVDYW1lcmEoKTtjYW1lcmFMLmxheWVycy5lbmFibGUoMSk7Y2FtZXJhTC52aWV3cG9ydD1uZXcgVmVjdG9yNCgpO2NvbnN0IGNhbWVyYVI9bmV3IFBlcnNwZWN0aXZlQ2FtZXJhKCk7Y2FtZXJhUi5sYXllcnMuZW5hYmxlKDIpO2NhbWVyYVIudmlld3BvcnQ9bmV3IFZlY3RvcjQoKTtjb25zdCBjYW1lcmFzPVtjYW1lcmFMLGNhbWVyYVJdO2NvbnN0IGNhbWVyYVZSPW5ldyBBcnJheUNhbWVyYSgpO2NhbWVyYVZSLmxheWVycy5lbmFibGUoMSk7Y2FtZXJhVlIubGF5ZXJzLmVuYWJsZSgyKTtsZXQgX2N1cnJlbnREZXB0aE5lYXI9bnVsbDtsZXQgX2N1cnJlbnREZXB0aEZhcj1udWxsOy8vCgl0aGlzLmNhbWVyYUF1dG9VcGRhdGU9dHJ1ZTt0aGlzLmVuYWJsZWQ9ZmFsc2U7dGhpcy5pc1ByZXNlbnRpbmc9ZmFsc2U7dGhpcy5nZXRDb250cm9sbGVyPWZ1bmN0aW9uKGluZGV4KXtsZXQgY29udHJvbGxlcj1jb250cm9sbGVyc1tpbmRleF07aWYoY29udHJvbGxlcj09PXVuZGVmaW5lZCl7Y29udHJvbGxlcj1uZXcgV2ViWFJDb250cm9sbGVyKCk7Y29udHJvbGxlcnNbaW5kZXhdPWNvbnRyb2xsZXI7fXJldHVybiBjb250cm9sbGVyLmdldFRhcmdldFJheVNwYWNlKCk7fTt0aGlzLmdldENvbnRyb2xsZXJHcmlwPWZ1bmN0aW9uKGluZGV4KXtsZXQgY29udHJvbGxlcj1jb250cm9sbGVyc1tpbmRleF07aWYoY29udHJvbGxlcj09PXVuZGVmaW5lZCl7Y29udHJvbGxlcj1uZXcgV2ViWFJDb250cm9sbGVyKCk7Y29udHJvbGxlcnNbaW5kZXhdPWNvbnRyb2xsZXI7fXJldHVybiBjb250cm9sbGVyLmdldEdyaXBTcGFjZSgpO307dGhpcy5nZXRIYW5kPWZ1bmN0aW9uKGluZGV4KXtsZXQgY29udHJvbGxlcj1jb250cm9sbGVyc1tpbmRleF07aWYoY29udHJvbGxlcj09PXVuZGVmaW5lZCl7Y29udHJvbGxlcj1uZXcgV2ViWFJDb250cm9sbGVyKCk7Y29udHJvbGxlcnNbaW5kZXhdPWNvbnRyb2xsZXI7fXJldHVybiBjb250cm9sbGVyLmdldEhhbmRTcGFjZSgpO307Ly8KCWZ1bmN0aW9uIG9uU2Vzc2lvbkV2ZW50KGV2ZW50KXtjb25zdCBjb250cm9sbGVyPWlucHV0U291cmNlc01hcC5nZXQoZXZlbnQuaW5wdXRTb3VyY2UpO2lmKGNvbnRyb2xsZXIpe2NvbnRyb2xsZXIuZGlzcGF0Y2hFdmVudCh7dHlwZTpldmVudC50eXBlLGRhdGE6ZXZlbnQuaW5wdXRTb3VyY2V9KTt9fWZ1bmN0aW9uIG9uU2Vzc2lvbkVuZCgpe2lucHV0U291cmNlc01hcC5mb3JFYWNoKGZ1bmN0aW9uKGNvbnRyb2xsZXIsaW5wdXRTb3VyY2Upe2NvbnRyb2xsZXIuZGlzY29ubmVjdChpbnB1dFNvdXJjZSk7fSk7aW5wdXRTb3VyY2VzTWFwLmNsZWFyKCk7X2N1cnJlbnREZXB0aE5lYXI9bnVsbDtfY3VycmVudERlcHRoRmFyPW51bGw7Ly8gcmVzdG9yZSBmcmFtZWJ1ZmZlci9yZW5kZXJpbmcgc3RhdGUKCXJlbmRlcmVyLnNldFJlbmRlclRhcmdldChpbml0aWFsUmVuZGVyVGFyZ2V0KTtnbEJhc2VMYXllcj1udWxsO2dsUHJvakxheWVyPW51bGw7Z2xCaW5kaW5nPW51bGw7c2Vzc2lvbj1udWxsO25ld1JlbmRlclRhcmdldD1udWxsOy8vCglhbmltYXRpb24uc3RvcCgpO3Njb3BlLmlzUHJlc2VudGluZz1mYWxzZTtzY29wZS5kaXNwYXRjaEV2ZW50KHt0eXBlOidzZXNzaW9uZW5kJ30pO310aGlzLnNldEZyYW1lYnVmZmVyU2NhbGVGYWN0b3I9ZnVuY3Rpb24odmFsdWUpe2ZyYW1lYnVmZmVyU2NhbGVGYWN0b3I9dmFsdWU7aWYoc2NvcGUuaXNQcmVzZW50aW5nPT09dHJ1ZSl7Y29uc29sZS53YXJuKCdUSFJFRS5XZWJYUk1hbmFnZXI6IENhbm5vdCBjaGFuZ2UgZnJhbWVidWZmZXIgc2NhbGUgd2hpbGUgcHJlc2VudGluZy4nKTt9fTt0aGlzLnNldFJlZmVyZW5jZVNwYWNlVHlwZT1mdW5jdGlvbih2YWx1ZSl7cmVmZXJlbmNlU3BhY2VUeXBlPXZhbHVlO2lmKHNjb3BlLmlzUHJlc2VudGluZz09PXRydWUpe2NvbnNvbGUud2FybignVEhSRUUuV2ViWFJNYW5hZ2VyOiBDYW5ub3QgY2hhbmdlIHJlZmVyZW5jZSBzcGFjZSB0eXBlIHdoaWxlIHByZXNlbnRpbmcuJyk7fX07dGhpcy5nZXRSZWZlcmVuY2VTcGFjZT1mdW5jdGlvbigpe3JldHVybiByZWZlcmVuY2VTcGFjZTt9O3RoaXMuZ2V0QmFzZUxheWVyPWZ1bmN0aW9uKCl7cmV0dXJuIGdsUHJvakxheWVyIT09bnVsbD9nbFByb2pMYXllcjpnbEJhc2VMYXllcjt9O3RoaXMuZ2V0QmluZGluZz1mdW5jdGlvbigpe3JldHVybiBnbEJpbmRpbmc7fTt0aGlzLmdldEZyYW1lPWZ1bmN0aW9uKCl7cmV0dXJuIHhyRnJhbWU7fTt0aGlzLmdldFNlc3Npb249ZnVuY3Rpb24oKXtyZXR1cm4gc2Vzc2lvbjt9O3RoaXMuc2V0U2Vzc2lvbj1hc3luYyBmdW5jdGlvbih2YWx1ZSl7c2Vzc2lvbj12YWx1ZTtpZihzZXNzaW9uIT09bnVsbCl7aW5pdGlhbFJlbmRlclRhcmdldD1yZW5kZXJlci5nZXRSZW5kZXJUYXJnZXQoKTtzZXNzaW9uLmFkZEV2ZW50TGlzdGVuZXIoJ3NlbGVjdCcsb25TZXNzaW9uRXZlbnQpO3Nlc3Npb24uYWRkRXZlbnRMaXN0ZW5lcignc2VsZWN0c3RhcnQnLG9uU2Vzc2lvbkV2ZW50KTtzZXNzaW9uLmFkZEV2ZW50TGlzdGVuZXIoJ3NlbGVjdGVuZCcsb25TZXNzaW9uRXZlbnQpO3Nlc3Npb24uYWRkRXZlbnRMaXN0ZW5lcignc3F1ZWV6ZScsb25TZXNzaW9uRXZlbnQpO3Nlc3Npb24uYWRkRXZlbnRMaXN0ZW5lcignc3F1ZWV6ZXN0YXJ0JyxvblNlc3Npb25FdmVudCk7c2Vzc2lvbi5hZGRFdmVudExpc3RlbmVyKCdzcXVlZXplZW5kJyxvblNlc3Npb25FdmVudCk7c2Vzc2lvbi5hZGRFdmVudExpc3RlbmVyKCdlbmQnLG9uU2Vzc2lvbkVuZCk7c2Vzc2lvbi5hZGRFdmVudExpc3RlbmVyKCdpbnB1dHNvdXJjZXNjaGFuZ2UnLG9uSW5wdXRTb3VyY2VzQ2hhbmdlKTtpZihhdHRyaWJ1dGVzLnhyQ29tcGF0aWJsZSE9PXRydWUpe2F3YWl0IGdsLm1ha2VYUkNvbXBhdGlibGUoKTt9aWYoc2Vzc2lvbi5yZW5kZXJTdGF0ZS5sYXllcnM9PT11bmRlZmluZWR8fHJlbmRlcmVyLmNhcGFiaWxpdGllcy5pc1dlYkdMMj09PWZhbHNlKXtjb25zdCBsYXllckluaXQ9e2FudGlhbGlhczpzZXNzaW9uLnJlbmRlclN0YXRlLmxheWVycz09PXVuZGVmaW5lZD9hdHRyaWJ1dGVzLmFudGlhbGlhczp0cnVlLGFscGhhOmF0dHJpYnV0ZXMuYWxwaGEsZGVwdGg6YXR0cmlidXRlcy5kZXB0aCxzdGVuY2lsOmF0dHJpYnV0ZXMuc3RlbmNpbCxmcmFtZWJ1ZmZlclNjYWxlRmFjdG9yOmZyYW1lYnVmZmVyU2NhbGVGYWN0b3J9O2dsQmFzZUxheWVyPW5ldyBYUldlYkdMTGF5ZXIoc2Vzc2lvbixnbCxsYXllckluaXQpO3Nlc3Npb24udXBkYXRlUmVuZGVyU3RhdGUoe2Jhc2VMYXllcjpnbEJhc2VMYXllcn0pO25ld1JlbmRlclRhcmdldD1uZXcgV2ViR0xSZW5kZXJUYXJnZXQoZ2xCYXNlTGF5ZXIuZnJhbWVidWZmZXJXaWR0aCxnbEJhc2VMYXllci5mcmFtZWJ1ZmZlckhlaWdodCk7fWVsc2Uge2lzTXVsdGlzYW1wbGU9YXR0cmlidXRlcy5hbnRpYWxpYXM7bGV0IGRlcHRoRm9ybWF0PW51bGw7bGV0IGRlcHRoVHlwZT1udWxsO2xldCBnbERlcHRoRm9ybWF0PW51bGw7aWYoYXR0cmlidXRlcy5kZXB0aCl7Z2xEZXB0aEZvcm1hdD1hdHRyaWJ1dGVzLnN0ZW5jaWw/MzUwNTY6MzMxODk7ZGVwdGhGb3JtYXQ9YXR0cmlidXRlcy5zdGVuY2lsP0RlcHRoU3RlbmNpbEZvcm1hdDpEZXB0aEZvcm1hdDtkZXB0aFR5cGU9YXR0cmlidXRlcy5zdGVuY2lsP1Vuc2lnbmVkSW50MjQ4VHlwZTpVbnNpZ25lZFNob3J0VHlwZTt9Y29uc3QgcHJvamVjdGlvbmxheWVySW5pdD17Y29sb3JGb3JtYXQ6YXR0cmlidXRlcy5hbHBoYXx8aXNNdWx0aXNhbXBsZT8zMjg1NjozMjg0OSxkZXB0aEZvcm1hdDpnbERlcHRoRm9ybWF0LHNjYWxlRmFjdG9yOmZyYW1lYnVmZmVyU2NhbGVGYWN0b3J9O2dsQmluZGluZz1uZXcgWFJXZWJHTEJpbmRpbmcoc2Vzc2lvbixnbCk7Z2xQcm9qTGF5ZXI9Z2xCaW5kaW5nLmNyZWF0ZVByb2plY3Rpb25MYXllcihwcm9qZWN0aW9ubGF5ZXJJbml0KTtzZXNzaW9uLnVwZGF0ZVJlbmRlclN0YXRlKHtsYXllcnM6W2dsUHJvakxheWVyXX0pO2lmKGlzTXVsdGlzYW1wbGUpe25ld1JlbmRlclRhcmdldD1uZXcgV2ViR0xNdWx0aXNhbXBsZVJlbmRlclRhcmdldChnbFByb2pMYXllci50ZXh0dXJlV2lkdGgsZ2xQcm9qTGF5ZXIudGV4dHVyZUhlaWdodCx7Zm9ybWF0OlJHQkFGb3JtYXQsdHlwZTpVbnNpZ25lZEJ5dGVUeXBlLGRlcHRoVGV4dHVyZTpuZXcgRGVwdGhUZXh0dXJlKGdsUHJvakxheWVyLnRleHR1cmVXaWR0aCxnbFByb2pMYXllci50ZXh0dXJlSGVpZ2h0LGRlcHRoVHlwZSx1bmRlZmluZWQsdW5kZWZpbmVkLHVuZGVmaW5lZCx1bmRlZmluZWQsdW5kZWZpbmVkLHVuZGVmaW5lZCxkZXB0aEZvcm1hdCksc3RlbmNpbEJ1ZmZlcjphdHRyaWJ1dGVzLnN0ZW5jaWwsaWdub3JlRGVwdGg6Z2xQcm9qTGF5ZXIuaWdub3JlRGVwdGhWYWx1ZXMsdXNlUmVuZGVyVG9UZXh0dXJlOmhhc011bHRpc2FtcGxlZFJlbmRlclRvVGV4dHVyZX0pO31lbHNlIHtuZXdSZW5kZXJUYXJnZXQ9bmV3IFdlYkdMUmVuZGVyVGFyZ2V0KGdsUHJvakxheWVyLnRleHR1cmVXaWR0aCxnbFByb2pMYXllci50ZXh0dXJlSGVpZ2h0LHtmb3JtYXQ6YXR0cmlidXRlcy5hbHBoYT9SR0JBRm9ybWF0OlJHQkZvcm1hdCx0eXBlOlVuc2lnbmVkQnl0ZVR5cGUsZGVwdGhUZXh0dXJlOm5ldyBEZXB0aFRleHR1cmUoZ2xQcm9qTGF5ZXIudGV4dHVyZVdpZHRoLGdsUHJvakxheWVyLnRleHR1cmVIZWlnaHQsZGVwdGhUeXBlLHVuZGVmaW5lZCx1bmRlZmluZWQsdW5kZWZpbmVkLHVuZGVmaW5lZCx1bmRlZmluZWQsdW5kZWZpbmVkLGRlcHRoRm9ybWF0KSxzdGVuY2lsQnVmZmVyOmF0dHJpYnV0ZXMuc3RlbmNpbCxpZ25vcmVEZXB0aDpnbFByb2pMYXllci5pZ25vcmVEZXB0aFZhbHVlc30pO319Ly8gU2V0IGZvdmVhdGlvbiB0byBtYXhpbXVtLgoJdGhpcy5zZXRGb3ZlYXRpb24oMCk7cmVmZXJlbmNlU3BhY2U9YXdhaXQgc2Vzc2lvbi5yZXF1ZXN0UmVmZXJlbmNlU3BhY2UocmVmZXJlbmNlU3BhY2VUeXBlKTthbmltYXRpb24uc2V0Q29udGV4dChzZXNzaW9uKTthbmltYXRpb24uc3RhcnQoKTtzY29wZS5pc1ByZXNlbnRpbmc9dHJ1ZTtzY29wZS5kaXNwYXRjaEV2ZW50KHt0eXBlOidzZXNzaW9uc3RhcnQnfSk7fX07ZnVuY3Rpb24gb25JbnB1dFNvdXJjZXNDaGFuZ2UoZXZlbnQpe2NvbnN0IGlucHV0U291cmNlcz1zZXNzaW9uLmlucHV0U291cmNlczsvLyBBc3NpZ24gaW5wdXRTb3VyY2VzIHRvIGF2YWlsYWJsZSBjb250cm9sbGVycwoJZm9yKGxldCBpPTA7aTxjb250cm9sbGVycy5sZW5ndGg7aSsrKXtpbnB1dFNvdXJjZXNNYXAuc2V0KGlucHV0U291cmNlc1tpXSxjb250cm9sbGVyc1tpXSk7fS8vIE5vdGlmeSBkaXNjb25uZWN0ZWQKCWZvcihsZXQgaT0wO2k8ZXZlbnQucmVtb3ZlZC5sZW5ndGg7aSsrKXtjb25zdCBpbnB1dFNvdXJjZT1ldmVudC5yZW1vdmVkW2ldO2NvbnN0IGNvbnRyb2xsZXI9aW5wdXRTb3VyY2VzTWFwLmdldChpbnB1dFNvdXJjZSk7aWYoY29udHJvbGxlcil7Y29udHJvbGxlci5kaXNwYXRjaEV2ZW50KHt0eXBlOidkaXNjb25uZWN0ZWQnLGRhdGE6aW5wdXRTb3VyY2V9KTtpbnB1dFNvdXJjZXNNYXAuZGVsZXRlKGlucHV0U291cmNlKTt9fS8vIE5vdGlmeSBjb25uZWN0ZWQKCWZvcihsZXQgaT0wO2k8ZXZlbnQuYWRkZWQubGVuZ3RoO2krKyl7Y29uc3QgaW5wdXRTb3VyY2U9ZXZlbnQuYWRkZWRbaV07Y29uc3QgY29udHJvbGxlcj1pbnB1dFNvdXJjZXNNYXAuZ2V0KGlucHV0U291cmNlKTtpZihjb250cm9sbGVyKXtjb250cm9sbGVyLmRpc3BhdGNoRXZlbnQoe3R5cGU6J2Nvbm5lY3RlZCcsZGF0YTppbnB1dFNvdXJjZX0pO319fS8vCgljb25zdCBjYW1lcmFMUG9zPW5ldyBWZWN0b3IzKCk7Y29uc3QgY2FtZXJhUlBvcz1uZXcgVmVjdG9yMygpOy8qKgoJCQkgKiBBc3N1bWVzIDIgY2FtZXJhcyB0aGF0IGFyZSBwYXJhbGxlbCBhbmQgc2hhcmUgYW4gWC1heGlzLCBhbmQgdGhhdAoJCQkgKiB0aGUgY2FtZXJhcycgcHJvamVjdGlvbiBhbmQgd29ybGQgbWF0cmljZXMgaGF2ZSBhbHJlYWR5IGJlZW4gc2V0LgoJCQkgKiBBbmQgdGhhdCBuZWFyIGFuZCBmYXIgcGxhbmVzIGFyZSBpZGVudGljYWwgZm9yIGJvdGggY2FtZXJhcy4KCQkJICogVmlzdWFsaXphdGlvbiBvZiB0aGlzIHRlY2huaXF1ZTogaHR0cHM6Ly9jb21wdXRlcmdyYXBoaWNzLnN0YWNrZXhjaGFuZ2UuY29tL2EvNDc2NQoJCQkgKi9mdW5jdGlvbiBzZXRQcm9qZWN0aW9uRnJvbVVuaW9uKGNhbWVyYSxjYW1lcmFMLGNhbWVyYVIpe2NhbWVyYUxQb3Muc2V0RnJvbU1hdHJpeFBvc2l0aW9uKGNhbWVyYUwubWF0cml4V29ybGQpO2NhbWVyYVJQb3Muc2V0RnJvbU1hdHJpeFBvc2l0aW9uKGNhbWVyYVIubWF0cml4V29ybGQpO2NvbnN0IGlwZD1jYW1lcmFMUG9zLmRpc3RhbmNlVG8oY2FtZXJhUlBvcyk7Y29uc3QgcHJvakw9Y2FtZXJhTC5wcm9qZWN0aW9uTWF0cml4LmVsZW1lbnRzO2NvbnN0IHByb2pSPWNhbWVyYVIucHJvamVjdGlvbk1hdHJpeC5lbGVtZW50czsvLyBWUiBzeXN0ZW1zIHdpbGwgaGF2ZSBpZGVudGljYWwgZmFyIGFuZCBuZWFyIHBsYW5lcywgYW5kCgkvLyBtb3N0IGxpa2VseSBpZGVudGljYWwgdG9wIGFuZCBib3R0b20gZnJ1c3R1bSBleHRlbnRzLgoJLy8gVXNlIHRoZSBsZWZ0IGNhbWVyYSBmb3IgdGhlc2UgdmFsdWVzLgoJY29uc3QgbmVhcj1wcm9qTFsxNF0vKHByb2pMWzEwXS0xKTtjb25zdCBmYXI9cHJvakxbMTRdLyhwcm9qTFsxMF0rMSk7Y29uc3QgdG9wRm92PShwcm9qTFs5XSsxKS9wcm9qTFs1XTtjb25zdCBib3R0b21Gb3Y9KHByb2pMWzldLTEpL3Byb2pMWzVdO2NvbnN0IGxlZnRGb3Y9KHByb2pMWzhdLTEpL3Byb2pMWzBdO2NvbnN0IHJpZ2h0Rm92PShwcm9qUls4XSsxKS9wcm9qUlswXTtjb25zdCBsZWZ0PW5lYXIqbGVmdEZvdjtjb25zdCByaWdodD1uZWFyKnJpZ2h0Rm92Oy8vIENhbGN1bGF0ZSB0aGUgbmV3IGNhbWVyYSdzIHBvc2l0aW9uIG9mZnNldCBmcm9tIHRoZQoJLy8gbGVmdCBjYW1lcmEuIHhPZmZzZXQgc2hvdWxkIGJlIHJvdWdobHkgaGFsZiBgaXBkYC4KCWNvbnN0IHpPZmZzZXQ9aXBkLygtbGVmdEZvdityaWdodEZvdik7Y29uc3QgeE9mZnNldD16T2Zmc2V0Ki1sZWZ0Rm92Oy8vIFRPRE86IEJldHRlciB3YXkgdG8gYXBwbHkgdGhpcyBvZmZzZXQ/CgljYW1lcmFMLm1hdHJpeFdvcmxkLmRlY29tcG9zZShjYW1lcmEucG9zaXRpb24sY2FtZXJhLnF1YXRlcm5pb24sY2FtZXJhLnNjYWxlKTtjYW1lcmEudHJhbnNsYXRlWCh4T2Zmc2V0KTtjYW1lcmEudHJhbnNsYXRlWih6T2Zmc2V0KTtjYW1lcmEubWF0cml4V29ybGQuY29tcG9zZShjYW1lcmEucG9zaXRpb24sY2FtZXJhLnF1YXRlcm5pb24sY2FtZXJhLnNjYWxlKTtjYW1lcmEubWF0cml4V29ybGRJbnZlcnNlLmNvcHkoY2FtZXJhLm1hdHJpeFdvcmxkKS5pbnZlcnQoKTsvLyBGaW5kIHRoZSB1bmlvbiBvZiB0aGUgZnJ1c3R1bSB2YWx1ZXMgb2YgdGhlIGNhbWVyYXMgYW5kIHNjYWxlCgkvLyB0aGUgdmFsdWVzIHNvIHRoYXQgdGhlIG5lYXIgcGxhbmUncyBwb3NpdGlvbiBkb2VzIG5vdCBjaGFuZ2UgaW4gd29ybGQgc3BhY2UsCgkvLyBhbHRob3VnaCBtdXN0IG5vdyBiZSByZWxhdGl2ZSB0byB0aGUgbmV3IHVuaW9uIGNhbWVyYS4KCWNvbnN0IG5lYXIyPW5lYXIrek9mZnNldDtjb25zdCBmYXIyPWZhcit6T2Zmc2V0O2NvbnN0IGxlZnQyPWxlZnQteE9mZnNldDtjb25zdCByaWdodDI9cmlnaHQrKGlwZC14T2Zmc2V0KTtjb25zdCB0b3AyPXRvcEZvdipmYXIvZmFyMipuZWFyMjtjb25zdCBib3R0b20yPWJvdHRvbUZvdipmYXIvZmFyMipuZWFyMjtjYW1lcmEucHJvamVjdGlvbk1hdHJpeC5tYWtlUGVyc3BlY3RpdmUobGVmdDIscmlnaHQyLHRvcDIsYm90dG9tMixuZWFyMixmYXIyKTt9ZnVuY3Rpb24gdXBkYXRlQ2FtZXJhKGNhbWVyYSxwYXJlbnQpe2lmKHBhcmVudD09PW51bGwpe2NhbWVyYS5tYXRyaXhXb3JsZC5jb3B5KGNhbWVyYS5tYXRyaXgpO31lbHNlIHtjYW1lcmEubWF0cml4V29ybGQubXVsdGlwbHlNYXRyaWNlcyhwYXJlbnQubWF0cml4V29ybGQsY2FtZXJhLm1hdHJpeCk7fWNhbWVyYS5tYXRyaXhXb3JsZEludmVyc2UuY29weShjYW1lcmEubWF0cml4V29ybGQpLmludmVydCgpO310aGlzLnVwZGF0ZUNhbWVyYT1mdW5jdGlvbihjYW1lcmEpe2lmKHNlc3Npb249PT1udWxsKXJldHVybjtjYW1lcmFWUi5uZWFyPWNhbWVyYVIubmVhcj1jYW1lcmFMLm5lYXI9Y2FtZXJhLm5lYXI7Y2FtZXJhVlIuZmFyPWNhbWVyYVIuZmFyPWNhbWVyYUwuZmFyPWNhbWVyYS5mYXI7aWYoX2N1cnJlbnREZXB0aE5lYXIhPT1jYW1lcmFWUi5uZWFyfHxfY3VycmVudERlcHRoRmFyIT09Y2FtZXJhVlIuZmFyKXsvLyBOb3RlIHRoYXQgdGhlIG5ldyByZW5kZXJTdGF0ZSB3b24ndCBhcHBseSB1bnRpbCB0aGUgbmV4dCBmcmFtZS4gU2VlICMxODMyMAoJc2Vzc2lvbi51cGRhdGVSZW5kZXJTdGF0ZSh7ZGVwdGhOZWFyOmNhbWVyYVZSLm5lYXIsZGVwdGhGYXI6Y2FtZXJhVlIuZmFyfSk7X2N1cnJlbnREZXB0aE5lYXI9Y2FtZXJhVlIubmVhcjtfY3VycmVudERlcHRoRmFyPWNhbWVyYVZSLmZhcjt9Y29uc3QgcGFyZW50PWNhbWVyYS5wYXJlbnQ7Y29uc3QgY2FtZXJhcz1jYW1lcmFWUi5jYW1lcmFzO3VwZGF0ZUNhbWVyYShjYW1lcmFWUixwYXJlbnQpO2ZvcihsZXQgaT0wO2k8Y2FtZXJhcy5sZW5ndGg7aSsrKXt1cGRhdGVDYW1lcmEoY2FtZXJhc1tpXSxwYXJlbnQpO31jYW1lcmFWUi5tYXRyaXhXb3JsZC5kZWNvbXBvc2UoY2FtZXJhVlIucG9zaXRpb24sY2FtZXJhVlIucXVhdGVybmlvbixjYW1lcmFWUi5zY2FsZSk7Ly8gdXBkYXRlIHVzZXIgY2FtZXJhIGFuZCBpdHMgY2hpbGRyZW4KCWNhbWVyYS5wb3NpdGlvbi5jb3B5KGNhbWVyYVZSLnBvc2l0aW9uKTtjYW1lcmEucXVhdGVybmlvbi5jb3B5KGNhbWVyYVZSLnF1YXRlcm5pb24pO2NhbWVyYS5zY2FsZS5jb3B5KGNhbWVyYVZSLnNjYWxlKTtjYW1lcmEubWF0cml4LmNvcHkoY2FtZXJhVlIubWF0cml4KTtjYW1lcmEubWF0cml4V29ybGQuY29weShjYW1lcmFWUi5tYXRyaXhXb3JsZCk7Y29uc3QgY2hpbGRyZW49Y2FtZXJhLmNoaWxkcmVuO2ZvcihsZXQgaT0wLGw9Y2hpbGRyZW4ubGVuZ3RoO2k8bDtpKyspe2NoaWxkcmVuW2ldLnVwZGF0ZU1hdHJpeFdvcmxkKHRydWUpO30vLyB1cGRhdGUgcHJvamVjdGlvbiBtYXRyaXggZm9yIHByb3BlciB2aWV3IGZydXN0dW0gY3VsbGluZwoJaWYoY2FtZXJhcy5sZW5ndGg9PT0yKXtzZXRQcm9qZWN0aW9uRnJvbVVuaW9uKGNhbWVyYVZSLGNhbWVyYUwsY2FtZXJhUik7fWVsc2Ugey8vIGFzc3VtZSBzaW5nbGUgY2FtZXJhIHNldHVwIChBUikKCWNhbWVyYVZSLnByb2plY3Rpb25NYXRyaXguY29weShjYW1lcmFMLnByb2plY3Rpb25NYXRyaXgpO319O3RoaXMuZ2V0Q2FtZXJhPWZ1bmN0aW9uKCl7cmV0dXJuIGNhbWVyYVZSO307dGhpcy5nZXRGb3ZlYXRpb249ZnVuY3Rpb24oKXtpZihnbFByb2pMYXllciE9PW51bGwpe3JldHVybiBnbFByb2pMYXllci5maXhlZEZvdmVhdGlvbjt9aWYoZ2xCYXNlTGF5ZXIhPT1udWxsKXtyZXR1cm4gZ2xCYXNlTGF5ZXIuZml4ZWRGb3ZlYXRpb247fXJldHVybiB1bmRlZmluZWQ7fTt0aGlzLnNldEZvdmVhdGlvbj1mdW5jdGlvbihmb3ZlYXRpb24pey8vIDAgPSBubyBmb3ZlYXRpb24gPSBmdWxsIHJlc29sdXRpb24KCS8vIDEgPSBtYXhpbXVtIGZvdmVhdGlvbiA9IHRoZSBlZGdlcyByZW5kZXIgYXQgbG93ZXIgcmVzb2x1dGlvbgoJaWYoZ2xQcm9qTGF5ZXIhPT1udWxsKXtnbFByb2pMYXllci5maXhlZEZvdmVhdGlvbj1mb3ZlYXRpb247fWlmKGdsQmFzZUxheWVyIT09bnVsbCYmZ2xCYXNlTGF5ZXIuZml4ZWRGb3ZlYXRpb24hPT11bmRlZmluZWQpe2dsQmFzZUxheWVyLmZpeGVkRm92ZWF0aW9uPWZvdmVhdGlvbjt9fTsvLyBBbmltYXRpb24gTG9vcAoJbGV0IG9uQW5pbWF0aW9uRnJhbWVDYWxsYmFjaz1udWxsO2Z1bmN0aW9uIG9uQW5pbWF0aW9uRnJhbWUodGltZSxmcmFtZSl7cG9zZT1mcmFtZS5nZXRWaWV3ZXJQb3NlKHJlZmVyZW5jZVNwYWNlKTt4ckZyYW1lPWZyYW1lO2lmKHBvc2UhPT1udWxsKXtjb25zdCB2aWV3cz1wb3NlLnZpZXdzO2lmKGdsQmFzZUxheWVyIT09bnVsbCl7cmVuZGVyZXIuc2V0UmVuZGVyVGFyZ2V0RnJhbWVidWZmZXIobmV3UmVuZGVyVGFyZ2V0LGdsQmFzZUxheWVyLmZyYW1lYnVmZmVyKTtyZW5kZXJlci5zZXRSZW5kZXJUYXJnZXQobmV3UmVuZGVyVGFyZ2V0KTt9bGV0IGNhbWVyYVZSTmVlZHNVcGRhdGU9ZmFsc2U7Ly8gY2hlY2sgaWYgaXQncyBuZWNlc3NhcnkgdG8gcmVidWlsZCBjYW1lcmFWUidzIGNhbWVyYSBsaXN0CglpZih2aWV3cy5sZW5ndGghPT1jYW1lcmFWUi5jYW1lcmFzLmxlbmd0aCl7Y2FtZXJhVlIuY2FtZXJhcy5sZW5ndGg9MDtjYW1lcmFWUk5lZWRzVXBkYXRlPXRydWU7fWZvcihsZXQgaT0wO2k8dmlld3MubGVuZ3RoO2krKyl7Y29uc3Qgdmlldz12aWV3c1tpXTtsZXQgdmlld3BvcnQ9bnVsbDtpZihnbEJhc2VMYXllciE9PW51bGwpe3ZpZXdwb3J0PWdsQmFzZUxheWVyLmdldFZpZXdwb3J0KHZpZXcpO31lbHNlIHtjb25zdCBnbFN1YkltYWdlPWdsQmluZGluZy5nZXRWaWV3U3ViSW1hZ2UoZ2xQcm9qTGF5ZXIsdmlldyk7dmlld3BvcnQ9Z2xTdWJJbWFnZS52aWV3cG9ydDsvLyBGb3Igc2lkZS1ieS1zaWRlIHByb2plY3Rpb24sIHdlIG9ubHkgcHJvZHVjZSBhIHNpbmdsZSB0ZXh0dXJlIGZvciBib3RoIGV5ZXMuCglpZihpPT09MCl7cmVuZGVyZXIuc2V0UmVuZGVyVGFyZ2V0VGV4dHVyZXMobmV3UmVuZGVyVGFyZ2V0LGdsU3ViSW1hZ2UuY29sb3JUZXh0dXJlLGdsUHJvakxheWVyLmlnbm9yZURlcHRoVmFsdWVzP3VuZGVmaW5lZDpnbFN1YkltYWdlLmRlcHRoU3RlbmNpbFRleHR1cmUpO3JlbmRlcmVyLnNldFJlbmRlclRhcmdldChuZXdSZW5kZXJUYXJnZXQpO319Y29uc3QgY2FtZXJhPWNhbWVyYXNbaV07Y2FtZXJhLm1hdHJpeC5mcm9tQXJyYXkodmlldy50cmFuc2Zvcm0ubWF0cml4KTtjYW1lcmEucHJvamVjdGlvbk1hdHJpeC5mcm9tQXJyYXkodmlldy5wcm9qZWN0aW9uTWF0cml4KTtjYW1lcmEudmlld3BvcnQuc2V0KHZpZXdwb3J0Lngsdmlld3BvcnQueSx2aWV3cG9ydC53aWR0aCx2aWV3cG9ydC5oZWlnaHQpO2lmKGk9PT0wKXtjYW1lcmFWUi5tYXRyaXguY29weShjYW1lcmEubWF0cml4KTt9aWYoY2FtZXJhVlJOZWVkc1VwZGF0ZT09PXRydWUpe2NhbWVyYVZSLmNhbWVyYXMucHVzaChjYW1lcmEpO319fS8vCgljb25zdCBpbnB1dFNvdXJjZXM9c2Vzc2lvbi5pbnB1dFNvdXJjZXM7Zm9yKGxldCBpPTA7aTxjb250cm9sbGVycy5sZW5ndGg7aSsrKXtjb25zdCBjb250cm9sbGVyPWNvbnRyb2xsZXJzW2ldO2NvbnN0IGlucHV0U291cmNlPWlucHV0U291cmNlc1tpXTtjb250cm9sbGVyLnVwZGF0ZShpbnB1dFNvdXJjZSxmcmFtZSxyZWZlcmVuY2VTcGFjZSk7fWlmKG9uQW5pbWF0aW9uRnJhbWVDYWxsYmFjaylvbkFuaW1hdGlvbkZyYW1lQ2FsbGJhY2sodGltZSxmcmFtZSk7eHJGcmFtZT1udWxsO31jb25zdCBhbmltYXRpb249bmV3IFdlYkdMQW5pbWF0aW9uKCk7YW5pbWF0aW9uLnNldEFuaW1hdGlvbkxvb3Aob25BbmltYXRpb25GcmFtZSk7dGhpcy5zZXRBbmltYXRpb25Mb29wPWZ1bmN0aW9uKGNhbGxiYWNrKXtvbkFuaW1hdGlvbkZyYW1lQ2FsbGJhY2s9Y2FsbGJhY2s7fTt0aGlzLmRpc3Bvc2U9ZnVuY3Rpb24oKXt9O319ZnVuY3Rpb24gV2ViR0xNYXRlcmlhbHMocHJvcGVydGllcyl7ZnVuY3Rpb24gcmVmcmVzaEZvZ1VuaWZvcm1zKHVuaWZvcm1zLGZvZyl7dW5pZm9ybXMuZm9nQ29sb3IudmFsdWUuY29weShmb2cuY29sb3IpO2lmKGZvZy5pc0ZvZyl7dW5pZm9ybXMuZm9nTmVhci52YWx1ZT1mb2cubmVhcjt1bmlmb3Jtcy5mb2dGYXIudmFsdWU9Zm9nLmZhcjt9ZWxzZSBpZihmb2cuaXNGb2dFeHAyKXt1bmlmb3Jtcy5mb2dEZW5zaXR5LnZhbHVlPWZvZy5kZW5zaXR5O319ZnVuY3Rpb24gcmVmcmVzaE1hdGVyaWFsVW5pZm9ybXModW5pZm9ybXMsbWF0ZXJpYWwscGl4ZWxSYXRpbyxoZWlnaHQsdHJhbnNtaXNzaW9uUmVuZGVyVGFyZ2V0KXtpZihtYXRlcmlhbC5pc01lc2hCYXNpY01hdGVyaWFsKXtyZWZyZXNoVW5pZm9ybXNDb21tb24odW5pZm9ybXMsbWF0ZXJpYWwpO31lbHNlIGlmKG1hdGVyaWFsLmlzTWVzaExhbWJlcnRNYXRlcmlhbCl7cmVmcmVzaFVuaWZvcm1zQ29tbW9uKHVuaWZvcm1zLG1hdGVyaWFsKTtyZWZyZXNoVW5pZm9ybXNMYW1iZXJ0KHVuaWZvcm1zLG1hdGVyaWFsKTt9ZWxzZSBpZihtYXRlcmlhbC5pc01lc2hUb29uTWF0ZXJpYWwpe3JlZnJlc2hVbmlmb3Jtc0NvbW1vbih1bmlmb3JtcyxtYXRlcmlhbCk7cmVmcmVzaFVuaWZvcm1zVG9vbih1bmlmb3JtcyxtYXRlcmlhbCk7fWVsc2UgaWYobWF0ZXJpYWwuaXNNZXNoUGhvbmdNYXRlcmlhbCl7cmVmcmVzaFVuaWZvcm1zQ29tbW9uKHVuaWZvcm1zLG1hdGVyaWFsKTtyZWZyZXNoVW5pZm9ybXNQaG9uZyh1bmlmb3JtcyxtYXRlcmlhbCk7fWVsc2UgaWYobWF0ZXJpYWwuaXNNZXNoU3RhbmRhcmRNYXRlcmlhbCl7cmVmcmVzaFVuaWZvcm1zQ29tbW9uKHVuaWZvcm1zLG1hdGVyaWFsKTtpZihtYXRlcmlhbC5pc01lc2hQaHlzaWNhbE1hdGVyaWFsKXtyZWZyZXNoVW5pZm9ybXNQaHlzaWNhbCh1bmlmb3JtcyxtYXRlcmlhbCx0cmFuc21pc3Npb25SZW5kZXJUYXJnZXQpO31lbHNlIHtyZWZyZXNoVW5pZm9ybXNTdGFuZGFyZCh1bmlmb3JtcyxtYXRlcmlhbCk7fX1lbHNlIGlmKG1hdGVyaWFsLmlzTWVzaE1hdGNhcE1hdGVyaWFsKXtyZWZyZXNoVW5pZm9ybXNDb21tb24odW5pZm9ybXMsbWF0ZXJpYWwpO3JlZnJlc2hVbmlmb3Jtc01hdGNhcCh1bmlmb3JtcyxtYXRlcmlhbCk7fWVsc2UgaWYobWF0ZXJpYWwuaXNNZXNoRGVwdGhNYXRlcmlhbCl7cmVmcmVzaFVuaWZvcm1zQ29tbW9uKHVuaWZvcm1zLG1hdGVyaWFsKTtyZWZyZXNoVW5pZm9ybXNEZXB0aCh1bmlmb3JtcyxtYXRlcmlhbCk7fWVsc2UgaWYobWF0ZXJpYWwuaXNNZXNoRGlzdGFuY2VNYXRlcmlhbCl7cmVmcmVzaFVuaWZvcm1zQ29tbW9uKHVuaWZvcm1zLG1hdGVyaWFsKTtyZWZyZXNoVW5pZm9ybXNEaXN0YW5jZSh1bmlmb3JtcyxtYXRlcmlhbCk7fWVsc2UgaWYobWF0ZXJpYWwuaXNNZXNoTm9ybWFsTWF0ZXJpYWwpe3JlZnJlc2hVbmlmb3Jtc0NvbW1vbih1bmlmb3JtcyxtYXRlcmlhbCk7cmVmcmVzaFVuaWZvcm1zTm9ybWFsKHVuaWZvcm1zLG1hdGVyaWFsKTt9ZWxzZSBpZihtYXRlcmlhbC5pc0xpbmVCYXNpY01hdGVyaWFsKXtyZWZyZXNoVW5pZm9ybXNMaW5lKHVuaWZvcm1zLG1hdGVyaWFsKTtpZihtYXRlcmlhbC5pc0xpbmVEYXNoZWRNYXRlcmlhbCl7cmVmcmVzaFVuaWZvcm1zRGFzaCh1bmlmb3JtcyxtYXRlcmlhbCk7fX1lbHNlIGlmKG1hdGVyaWFsLmlzUG9pbnRzTWF0ZXJpYWwpe3JlZnJlc2hVbmlmb3Jtc1BvaW50cyh1bmlmb3JtcyxtYXRlcmlhbCxwaXhlbFJhdGlvLGhlaWdodCk7fWVsc2UgaWYobWF0ZXJpYWwuaXNTcHJpdGVNYXRlcmlhbCl7cmVmcmVzaFVuaWZvcm1zU3ByaXRlcyh1bmlmb3JtcyxtYXRlcmlhbCk7fWVsc2UgaWYobWF0ZXJpYWwuaXNTaGFkb3dNYXRlcmlhbCl7dW5pZm9ybXMuY29sb3IudmFsdWUuY29weShtYXRlcmlhbC5jb2xvcik7dW5pZm9ybXMub3BhY2l0eS52YWx1ZT1tYXRlcmlhbC5vcGFjaXR5O31lbHNlIGlmKG1hdGVyaWFsLmlzU2hhZGVyTWF0ZXJpYWwpe21hdGVyaWFsLnVuaWZvcm1zTmVlZFVwZGF0ZT1mYWxzZTsvLyAjMTU1ODEKCX19ZnVuY3Rpb24gcmVmcmVzaFVuaWZvcm1zQ29tbW9uKHVuaWZvcm1zLG1hdGVyaWFsKXt1bmlmb3Jtcy5vcGFjaXR5LnZhbHVlPW1hdGVyaWFsLm9wYWNpdHk7aWYobWF0ZXJpYWwuY29sb3Ipe3VuaWZvcm1zLmRpZmZ1c2UudmFsdWUuY29weShtYXRlcmlhbC5jb2xvcik7fWlmKG1hdGVyaWFsLmVtaXNzaXZlKXt1bmlmb3Jtcy5lbWlzc2l2ZS52YWx1ZS5jb3B5KG1hdGVyaWFsLmVtaXNzaXZlKS5tdWx0aXBseVNjYWxhcihtYXRlcmlhbC5lbWlzc2l2ZUludGVuc2l0eSk7fWlmKG1hdGVyaWFsLm1hcCl7dW5pZm9ybXMubWFwLnZhbHVlPW1hdGVyaWFsLm1hcDt9aWYobWF0ZXJpYWwuYWxwaGFNYXApe3VuaWZvcm1zLmFscGhhTWFwLnZhbHVlPW1hdGVyaWFsLmFscGhhTWFwO31pZihtYXRlcmlhbC5zcGVjdWxhck1hcCl7dW5pZm9ybXMuc3BlY3VsYXJNYXAudmFsdWU9bWF0ZXJpYWwuc3BlY3VsYXJNYXA7fWlmKG1hdGVyaWFsLmFscGhhVGVzdD4wKXt1bmlmb3Jtcy5hbHBoYVRlc3QudmFsdWU9bWF0ZXJpYWwuYWxwaGFUZXN0O31jb25zdCBlbnZNYXA9cHJvcGVydGllcy5nZXQobWF0ZXJpYWwpLmVudk1hcDtpZihlbnZNYXApe3VuaWZvcm1zLmVudk1hcC52YWx1ZT1lbnZNYXA7dW5pZm9ybXMuZmxpcEVudk1hcC52YWx1ZT1lbnZNYXAuaXNDdWJlVGV4dHVyZSYmZW52TWFwLmlzUmVuZGVyVGFyZ2V0VGV4dHVyZT09PWZhbHNlPy0xOjE7dW5pZm9ybXMucmVmbGVjdGl2aXR5LnZhbHVlPW1hdGVyaWFsLnJlZmxlY3Rpdml0eTt1bmlmb3Jtcy5pb3IudmFsdWU9bWF0ZXJpYWwuaW9yO3VuaWZvcm1zLnJlZnJhY3Rpb25SYXRpby52YWx1ZT1tYXRlcmlhbC5yZWZyYWN0aW9uUmF0aW87fWlmKG1hdGVyaWFsLmxpZ2h0TWFwKXt1bmlmb3Jtcy5saWdodE1hcC52YWx1ZT1tYXRlcmlhbC5saWdodE1hcDt1bmlmb3Jtcy5saWdodE1hcEludGVuc2l0eS52YWx1ZT1tYXRlcmlhbC5saWdodE1hcEludGVuc2l0eTt9aWYobWF0ZXJpYWwuYW9NYXApe3VuaWZvcm1zLmFvTWFwLnZhbHVlPW1hdGVyaWFsLmFvTWFwO3VuaWZvcm1zLmFvTWFwSW50ZW5zaXR5LnZhbHVlPW1hdGVyaWFsLmFvTWFwSW50ZW5zaXR5O30vLyB1diByZXBlYXQgYW5kIG9mZnNldCBzZXR0aW5nIHByaW9yaXRpZXMKCS8vIDEuIGNvbG9yIG1hcAoJLy8gMi4gc3BlY3VsYXIgbWFwCgkvLyAzLiBkaXNwbGFjZW1lbnRNYXAgbWFwCgkvLyA0LiBub3JtYWwgbWFwCgkvLyA1LiBidW1wIG1hcAoJLy8gNi4gcm91Z2huZXNzTWFwIG1hcAoJLy8gNy4gbWV0YWxuZXNzTWFwIG1hcAoJLy8gOC4gYWxwaGFNYXAgbWFwCgkvLyA5LiBlbWlzc2l2ZU1hcCBtYXAKCS8vIDEwLiBjbGVhcmNvYXQgbWFwCgkvLyAxMS4gY2xlYXJjb2F0IG5vcm1hbCBtYXAKCS8vIDEyLiBjbGVhcmNvYXQgcm91Z2huZXNzTWFwIG1hcAoJLy8gMTMuIHNwZWN1bGFyIGludGVuc2l0eSBtYXAKCS8vIDE0LiBzcGVjdWxhciB0aW50IG1hcAoJLy8gMTUuIHRyYW5zbWlzc2lvbiBtYXAKCS8vIDE2LiB0aGlja25lc3MgbWFwCglsZXQgdXZTY2FsZU1hcDtpZihtYXRlcmlhbC5tYXApe3V2U2NhbGVNYXA9bWF0ZXJpYWwubWFwO31lbHNlIGlmKG1hdGVyaWFsLnNwZWN1bGFyTWFwKXt1dlNjYWxlTWFwPW1hdGVyaWFsLnNwZWN1bGFyTWFwO31lbHNlIGlmKG1hdGVyaWFsLmRpc3BsYWNlbWVudE1hcCl7dXZTY2FsZU1hcD1tYXRlcmlhbC5kaXNwbGFjZW1lbnRNYXA7fWVsc2UgaWYobWF0ZXJpYWwubm9ybWFsTWFwKXt1dlNjYWxlTWFwPW1hdGVyaWFsLm5vcm1hbE1hcDt9ZWxzZSBpZihtYXRlcmlhbC5idW1wTWFwKXt1dlNjYWxlTWFwPW1hdGVyaWFsLmJ1bXBNYXA7fWVsc2UgaWYobWF0ZXJpYWwucm91Z2huZXNzTWFwKXt1dlNjYWxlTWFwPW1hdGVyaWFsLnJvdWdobmVzc01hcDt9ZWxzZSBpZihtYXRlcmlhbC5tZXRhbG5lc3NNYXApe3V2U2NhbGVNYXA9bWF0ZXJpYWwubWV0YWxuZXNzTWFwO31lbHNlIGlmKG1hdGVyaWFsLmFscGhhTWFwKXt1dlNjYWxlTWFwPW1hdGVyaWFsLmFscGhhTWFwO31lbHNlIGlmKG1hdGVyaWFsLmVtaXNzaXZlTWFwKXt1dlNjYWxlTWFwPW1hdGVyaWFsLmVtaXNzaXZlTWFwO31lbHNlIGlmKG1hdGVyaWFsLmNsZWFyY29hdE1hcCl7dXZTY2FsZU1hcD1tYXRlcmlhbC5jbGVhcmNvYXRNYXA7fWVsc2UgaWYobWF0ZXJpYWwuY2xlYXJjb2F0Tm9ybWFsTWFwKXt1dlNjYWxlTWFwPW1hdGVyaWFsLmNsZWFyY29hdE5vcm1hbE1hcDt9ZWxzZSBpZihtYXRlcmlhbC5jbGVhcmNvYXRSb3VnaG5lc3NNYXApe3V2U2NhbGVNYXA9bWF0ZXJpYWwuY2xlYXJjb2F0Um91Z2huZXNzTWFwO31lbHNlIGlmKG1hdGVyaWFsLnNwZWN1bGFySW50ZW5zaXR5TWFwKXt1dlNjYWxlTWFwPW1hdGVyaWFsLnNwZWN1bGFySW50ZW5zaXR5TWFwO31lbHNlIGlmKG1hdGVyaWFsLnNwZWN1bGFyQ29sb3JNYXApe3V2U2NhbGVNYXA9bWF0ZXJpYWwuc3BlY3VsYXJDb2xvck1hcDt9ZWxzZSBpZihtYXRlcmlhbC50cmFuc21pc3Npb25NYXApe3V2U2NhbGVNYXA9bWF0ZXJpYWwudHJhbnNtaXNzaW9uTWFwO31lbHNlIGlmKG1hdGVyaWFsLnRoaWNrbmVzc01hcCl7dXZTY2FsZU1hcD1tYXRlcmlhbC50aGlja25lc3NNYXA7fWVsc2UgaWYobWF0ZXJpYWwuc2hlZW5Db2xvck1hcCl7dXZTY2FsZU1hcD1tYXRlcmlhbC5zaGVlbkNvbG9yTWFwO31lbHNlIGlmKG1hdGVyaWFsLnNoZWVuUm91Z2huZXNzTWFwKXt1dlNjYWxlTWFwPW1hdGVyaWFsLnNoZWVuUm91Z2huZXNzTWFwO31pZih1dlNjYWxlTWFwIT09dW5kZWZpbmVkKXsvLyBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eQoJaWYodXZTY2FsZU1hcC5pc1dlYkdMUmVuZGVyVGFyZ2V0KXt1dlNjYWxlTWFwPXV2U2NhbGVNYXAudGV4dHVyZTt9aWYodXZTY2FsZU1hcC5tYXRyaXhBdXRvVXBkYXRlPT09dHJ1ZSl7dXZTY2FsZU1hcC51cGRhdGVNYXRyaXgoKTt9dW5pZm9ybXMudXZUcmFuc2Zvcm0udmFsdWUuY29weSh1dlNjYWxlTWFwLm1hdHJpeCk7fS8vIHV2IHJlcGVhdCBhbmQgb2Zmc2V0IHNldHRpbmcgcHJpb3JpdGllcyBmb3IgdXYyCgkvLyAxLiBhbyBtYXAKCS8vIDIuIGxpZ2h0IG1hcAoJbGV0IHV2MlNjYWxlTWFwO2lmKG1hdGVyaWFsLmFvTWFwKXt1djJTY2FsZU1hcD1tYXRlcmlhbC5hb01hcDt9ZWxzZSBpZihtYXRlcmlhbC5saWdodE1hcCl7dXYyU2NhbGVNYXA9bWF0ZXJpYWwubGlnaHRNYXA7fWlmKHV2MlNjYWxlTWFwIT09dW5kZWZpbmVkKXsvLyBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eQoJaWYodXYyU2NhbGVNYXAuaXNXZWJHTFJlbmRlclRhcmdldCl7dXYyU2NhbGVNYXA9dXYyU2NhbGVNYXAudGV4dHVyZTt9aWYodXYyU2NhbGVNYXAubWF0cml4QXV0b1VwZGF0ZT09PXRydWUpe3V2MlNjYWxlTWFwLnVwZGF0ZU1hdHJpeCgpO311bmlmb3Jtcy51djJUcmFuc2Zvcm0udmFsdWUuY29weSh1djJTY2FsZU1hcC5tYXRyaXgpO319ZnVuY3Rpb24gcmVmcmVzaFVuaWZvcm1zTGluZSh1bmlmb3JtcyxtYXRlcmlhbCl7dW5pZm9ybXMuZGlmZnVzZS52YWx1ZS5jb3B5KG1hdGVyaWFsLmNvbG9yKTt1bmlmb3Jtcy5vcGFjaXR5LnZhbHVlPW1hdGVyaWFsLm9wYWNpdHk7fWZ1bmN0aW9uIHJlZnJlc2hVbmlmb3Jtc0Rhc2godW5pZm9ybXMsbWF0ZXJpYWwpe3VuaWZvcm1zLmRhc2hTaXplLnZhbHVlPW1hdGVyaWFsLmRhc2hTaXplO3VuaWZvcm1zLnRvdGFsU2l6ZS52YWx1ZT1tYXRlcmlhbC5kYXNoU2l6ZSttYXRlcmlhbC5nYXBTaXplO3VuaWZvcm1zLnNjYWxlLnZhbHVlPW1hdGVyaWFsLnNjYWxlO31mdW5jdGlvbiByZWZyZXNoVW5pZm9ybXNQb2ludHModW5pZm9ybXMsbWF0ZXJpYWwscGl4ZWxSYXRpbyxoZWlnaHQpe3VuaWZvcm1zLmRpZmZ1c2UudmFsdWUuY29weShtYXRlcmlhbC5jb2xvcik7dW5pZm9ybXMub3BhY2l0eS52YWx1ZT1tYXRlcmlhbC5vcGFjaXR5O3VuaWZvcm1zLnNpemUudmFsdWU9bWF0ZXJpYWwuc2l6ZSpwaXhlbFJhdGlvO3VuaWZvcm1zLnNjYWxlLnZhbHVlPWhlaWdodCowLjU7aWYobWF0ZXJpYWwubWFwKXt1bmlmb3Jtcy5tYXAudmFsdWU9bWF0ZXJpYWwubWFwO31pZihtYXRlcmlhbC5hbHBoYU1hcCl7dW5pZm9ybXMuYWxwaGFNYXAudmFsdWU9bWF0ZXJpYWwuYWxwaGFNYXA7fWlmKG1hdGVyaWFsLmFscGhhVGVzdD4wKXt1bmlmb3Jtcy5hbHBoYVRlc3QudmFsdWU9bWF0ZXJpYWwuYWxwaGFUZXN0O30vLyB1diByZXBlYXQgYW5kIG9mZnNldCBzZXR0aW5nIHByaW9yaXRpZXMKCS8vIDEuIGNvbG9yIG1hcAoJLy8gMi4gYWxwaGEgbWFwCglsZXQgdXZTY2FsZU1hcDtpZihtYXRlcmlhbC5tYXApe3V2U2NhbGVNYXA9bWF0ZXJpYWwubWFwO31lbHNlIGlmKG1hdGVyaWFsLmFscGhhTWFwKXt1dlNjYWxlTWFwPW1hdGVyaWFsLmFscGhhTWFwO31pZih1dlNjYWxlTWFwIT09dW5kZWZpbmVkKXtpZih1dlNjYWxlTWFwLm1hdHJpeEF1dG9VcGRhdGU9PT10cnVlKXt1dlNjYWxlTWFwLnVwZGF0ZU1hdHJpeCgpO311bmlmb3Jtcy51dlRyYW5zZm9ybS52YWx1ZS5jb3B5KHV2U2NhbGVNYXAubWF0cml4KTt9fWZ1bmN0aW9uIHJlZnJlc2hVbmlmb3Jtc1Nwcml0ZXModW5pZm9ybXMsbWF0ZXJpYWwpe3VuaWZvcm1zLmRpZmZ1c2UudmFsdWUuY29weShtYXRlcmlhbC5jb2xvcik7dW5pZm9ybXMub3BhY2l0eS52YWx1ZT1tYXRlcmlhbC5vcGFjaXR5O3VuaWZvcm1zLnJvdGF0aW9uLnZhbHVlPW1hdGVyaWFsLnJvdGF0aW9uO2lmKG1hdGVyaWFsLm1hcCl7dW5pZm9ybXMubWFwLnZhbHVlPW1hdGVyaWFsLm1hcDt9aWYobWF0ZXJpYWwuYWxwaGFNYXApe3VuaWZvcm1zLmFscGhhTWFwLnZhbHVlPW1hdGVyaWFsLmFscGhhTWFwO31pZihtYXRlcmlhbC5hbHBoYVRlc3Q+MCl7dW5pZm9ybXMuYWxwaGFUZXN0LnZhbHVlPW1hdGVyaWFsLmFscGhhVGVzdDt9Ly8gdXYgcmVwZWF0IGFuZCBvZmZzZXQgc2V0dGluZyBwcmlvcml0aWVzCgkvLyAxLiBjb2xvciBtYXAKCS8vIDIuIGFscGhhIG1hcAoJbGV0IHV2U2NhbGVNYXA7aWYobWF0ZXJpYWwubWFwKXt1dlNjYWxlTWFwPW1hdGVyaWFsLm1hcDt9ZWxzZSBpZihtYXRlcmlhbC5hbHBoYU1hcCl7dXZTY2FsZU1hcD1tYXRlcmlhbC5hbHBoYU1hcDt9aWYodXZTY2FsZU1hcCE9PXVuZGVmaW5lZCl7aWYodXZTY2FsZU1hcC5tYXRyaXhBdXRvVXBkYXRlPT09dHJ1ZSl7dXZTY2FsZU1hcC51cGRhdGVNYXRyaXgoKTt9dW5pZm9ybXMudXZUcmFuc2Zvcm0udmFsdWUuY29weSh1dlNjYWxlTWFwLm1hdHJpeCk7fX1mdW5jdGlvbiByZWZyZXNoVW5pZm9ybXNMYW1iZXJ0KHVuaWZvcm1zLG1hdGVyaWFsKXtpZihtYXRlcmlhbC5lbWlzc2l2ZU1hcCl7dW5pZm9ybXMuZW1pc3NpdmVNYXAudmFsdWU9bWF0ZXJpYWwuZW1pc3NpdmVNYXA7fX1mdW5jdGlvbiByZWZyZXNoVW5pZm9ybXNQaG9uZyh1bmlmb3JtcyxtYXRlcmlhbCl7dW5pZm9ybXMuc3BlY3VsYXIudmFsdWUuY29weShtYXRlcmlhbC5zcGVjdWxhcik7dW5pZm9ybXMuc2hpbmluZXNzLnZhbHVlPU1hdGgubWF4KG1hdGVyaWFsLnNoaW5pbmVzcywxZS00KTsvLyB0byBwcmV2ZW50IHBvdyggMC4wLCAwLjAgKQoJaWYobWF0ZXJpYWwuZW1pc3NpdmVNYXApe3VuaWZvcm1zLmVtaXNzaXZlTWFwLnZhbHVlPW1hdGVyaWFsLmVtaXNzaXZlTWFwO31pZihtYXRlcmlhbC5idW1wTWFwKXt1bmlmb3Jtcy5idW1wTWFwLnZhbHVlPW1hdGVyaWFsLmJ1bXBNYXA7dW5pZm9ybXMuYnVtcFNjYWxlLnZhbHVlPW1hdGVyaWFsLmJ1bXBTY2FsZTtpZihtYXRlcmlhbC5zaWRlPT09QmFja1NpZGUpdW5pZm9ybXMuYnVtcFNjYWxlLnZhbHVlKj0tMTt9aWYobWF0ZXJpYWwubm9ybWFsTWFwKXt1bmlmb3Jtcy5ub3JtYWxNYXAudmFsdWU9bWF0ZXJpYWwubm9ybWFsTWFwO3VuaWZvcm1zLm5vcm1hbFNjYWxlLnZhbHVlLmNvcHkobWF0ZXJpYWwubm9ybWFsU2NhbGUpO2lmKG1hdGVyaWFsLnNpZGU9PT1CYWNrU2lkZSl1bmlmb3Jtcy5ub3JtYWxTY2FsZS52YWx1ZS5uZWdhdGUoKTt9aWYobWF0ZXJpYWwuZGlzcGxhY2VtZW50TWFwKXt1bmlmb3Jtcy5kaXNwbGFjZW1lbnRNYXAudmFsdWU9bWF0ZXJpYWwuZGlzcGxhY2VtZW50TWFwO3VuaWZvcm1zLmRpc3BsYWNlbWVudFNjYWxlLnZhbHVlPW1hdGVyaWFsLmRpc3BsYWNlbWVudFNjYWxlO3VuaWZvcm1zLmRpc3BsYWNlbWVudEJpYXMudmFsdWU9bWF0ZXJpYWwuZGlzcGxhY2VtZW50Qmlhczt9fWZ1bmN0aW9uIHJlZnJlc2hVbmlmb3Jtc1Rvb24odW5pZm9ybXMsbWF0ZXJpYWwpe2lmKG1hdGVyaWFsLmdyYWRpZW50TWFwKXt1bmlmb3Jtcy5ncmFkaWVudE1hcC52YWx1ZT1tYXRlcmlhbC5ncmFkaWVudE1hcDt9aWYobWF0ZXJpYWwuZW1pc3NpdmVNYXApe3VuaWZvcm1zLmVtaXNzaXZlTWFwLnZhbHVlPW1hdGVyaWFsLmVtaXNzaXZlTWFwO31pZihtYXRlcmlhbC5idW1wTWFwKXt1bmlmb3Jtcy5idW1wTWFwLnZhbHVlPW1hdGVyaWFsLmJ1bXBNYXA7dW5pZm9ybXMuYnVtcFNjYWxlLnZhbHVlPW1hdGVyaWFsLmJ1bXBTY2FsZTtpZihtYXRlcmlhbC5zaWRlPT09QmFja1NpZGUpdW5pZm9ybXMuYnVtcFNjYWxlLnZhbHVlKj0tMTt9aWYobWF0ZXJpYWwubm9ybWFsTWFwKXt1bmlmb3Jtcy5ub3JtYWxNYXAudmFsdWU9bWF0ZXJpYWwubm9ybWFsTWFwO3VuaWZvcm1zLm5vcm1hbFNjYWxlLnZhbHVlLmNvcHkobWF0ZXJpYWwubm9ybWFsU2NhbGUpO2lmKG1hdGVyaWFsLnNpZGU9PT1CYWNrU2lkZSl1bmlmb3Jtcy5ub3JtYWxTY2FsZS52YWx1ZS5uZWdhdGUoKTt9aWYobWF0ZXJpYWwuZGlzcGxhY2VtZW50TWFwKXt1bmlmb3Jtcy5kaXNwbGFjZW1lbnRNYXAudmFsdWU9bWF0ZXJpYWwuZGlzcGxhY2VtZW50TWFwO3VuaWZvcm1zLmRpc3BsYWNlbWVudFNjYWxlLnZhbHVlPW1hdGVyaWFsLmRpc3BsYWNlbWVudFNjYWxlO3VuaWZvcm1zLmRpc3BsYWNlbWVudEJpYXMudmFsdWU9bWF0ZXJpYWwuZGlzcGxhY2VtZW50Qmlhczt9fWZ1bmN0aW9uIHJlZnJlc2hVbmlmb3Jtc1N0YW5kYXJkKHVuaWZvcm1zLG1hdGVyaWFsKXt1bmlmb3Jtcy5yb3VnaG5lc3MudmFsdWU9bWF0ZXJpYWwucm91Z2huZXNzO3VuaWZvcm1zLm1ldGFsbmVzcy52YWx1ZT1tYXRlcmlhbC5tZXRhbG5lc3M7aWYobWF0ZXJpYWwucm91Z2huZXNzTWFwKXt1bmlmb3Jtcy5yb3VnaG5lc3NNYXAudmFsdWU9bWF0ZXJpYWwucm91Z2huZXNzTWFwO31pZihtYXRlcmlhbC5tZXRhbG5lc3NNYXApe3VuaWZvcm1zLm1ldGFsbmVzc01hcC52YWx1ZT1tYXRlcmlhbC5tZXRhbG5lc3NNYXA7fWlmKG1hdGVyaWFsLmVtaXNzaXZlTWFwKXt1bmlmb3Jtcy5lbWlzc2l2ZU1hcC52YWx1ZT1tYXRlcmlhbC5lbWlzc2l2ZU1hcDt9aWYobWF0ZXJpYWwuYnVtcE1hcCl7dW5pZm9ybXMuYnVtcE1hcC52YWx1ZT1tYXRlcmlhbC5idW1wTWFwO3VuaWZvcm1zLmJ1bXBTY2FsZS52YWx1ZT1tYXRlcmlhbC5idW1wU2NhbGU7aWYobWF0ZXJpYWwuc2lkZT09PUJhY2tTaWRlKXVuaWZvcm1zLmJ1bXBTY2FsZS52YWx1ZSo9LTE7fWlmKG1hdGVyaWFsLm5vcm1hbE1hcCl7dW5pZm9ybXMubm9ybWFsTWFwLnZhbHVlPW1hdGVyaWFsLm5vcm1hbE1hcDt1bmlmb3Jtcy5ub3JtYWxTY2FsZS52YWx1ZS5jb3B5KG1hdGVyaWFsLm5vcm1hbFNjYWxlKTtpZihtYXRlcmlhbC5zaWRlPT09QmFja1NpZGUpdW5pZm9ybXMubm9ybWFsU2NhbGUudmFsdWUubmVnYXRlKCk7fWlmKG1hdGVyaWFsLmRpc3BsYWNlbWVudE1hcCl7dW5pZm9ybXMuZGlzcGxhY2VtZW50TWFwLnZhbHVlPW1hdGVyaWFsLmRpc3BsYWNlbWVudE1hcDt1bmlmb3Jtcy5kaXNwbGFjZW1lbnRTY2FsZS52YWx1ZT1tYXRlcmlhbC5kaXNwbGFjZW1lbnRTY2FsZTt1bmlmb3Jtcy5kaXNwbGFjZW1lbnRCaWFzLnZhbHVlPW1hdGVyaWFsLmRpc3BsYWNlbWVudEJpYXM7fWNvbnN0IGVudk1hcD1wcm9wZXJ0aWVzLmdldChtYXRlcmlhbCkuZW52TWFwO2lmKGVudk1hcCl7Ly91bmlmb3Jtcy5lbnZNYXAudmFsdWUgPSBtYXRlcmlhbC5lbnZNYXA7IC8vIHBhcnQgb2YgdW5pZm9ybXMgY29tbW9uCgl1bmlmb3Jtcy5lbnZNYXBJbnRlbnNpdHkudmFsdWU9bWF0ZXJpYWwuZW52TWFwSW50ZW5zaXR5O319ZnVuY3Rpb24gcmVmcmVzaFVuaWZvcm1zUGh5c2ljYWwodW5pZm9ybXMsbWF0ZXJpYWwsdHJhbnNtaXNzaW9uUmVuZGVyVGFyZ2V0KXtyZWZyZXNoVW5pZm9ybXNTdGFuZGFyZCh1bmlmb3JtcyxtYXRlcmlhbCk7dW5pZm9ybXMuaW9yLnZhbHVlPW1hdGVyaWFsLmlvcjsvLyBhbHNvIHBhcnQgb2YgdW5pZm9ybXMgY29tbW9uCglpZihtYXRlcmlhbC5zaGVlbj4wKXt1bmlmb3Jtcy5zaGVlbkNvbG9yLnZhbHVlLmNvcHkobWF0ZXJpYWwuc2hlZW5Db2xvcikubXVsdGlwbHlTY2FsYXIobWF0ZXJpYWwuc2hlZW4pO3VuaWZvcm1zLnNoZWVuUm91Z2huZXNzLnZhbHVlPW1hdGVyaWFsLnNoZWVuUm91Z2huZXNzO2lmKG1hdGVyaWFsLnNoZWVuQ29sb3JNYXApe3VuaWZvcm1zLnNoZWVuQ29sb3JNYXAudmFsdWU9bWF0ZXJpYWwuc2hlZW5Db2xvck1hcDt9aWYobWF0ZXJpYWwuc2hlZW5Sb3VnaG5lc3NNYXApe3VuaWZvcm1zLnNoZWVuUm91Z2huZXNzTWFwLnZhbHVlPW1hdGVyaWFsLnNoZWVuUm91Z2huZXNzTWFwO319aWYobWF0ZXJpYWwuY2xlYXJjb2F0PjApe3VuaWZvcm1zLmNsZWFyY29hdC52YWx1ZT1tYXRlcmlhbC5jbGVhcmNvYXQ7dW5pZm9ybXMuY2xlYXJjb2F0Um91Z2huZXNzLnZhbHVlPW1hdGVyaWFsLmNsZWFyY29hdFJvdWdobmVzcztpZihtYXRlcmlhbC5jbGVhcmNvYXRNYXApe3VuaWZvcm1zLmNsZWFyY29hdE1hcC52YWx1ZT1tYXRlcmlhbC5jbGVhcmNvYXRNYXA7fWlmKG1hdGVyaWFsLmNsZWFyY29hdFJvdWdobmVzc01hcCl7dW5pZm9ybXMuY2xlYXJjb2F0Um91Z2huZXNzTWFwLnZhbHVlPW1hdGVyaWFsLmNsZWFyY29hdFJvdWdobmVzc01hcDt9aWYobWF0ZXJpYWwuY2xlYXJjb2F0Tm9ybWFsTWFwKXt1bmlmb3Jtcy5jbGVhcmNvYXROb3JtYWxTY2FsZS52YWx1ZS5jb3B5KG1hdGVyaWFsLmNsZWFyY29hdE5vcm1hbFNjYWxlKTt1bmlmb3Jtcy5jbGVhcmNvYXROb3JtYWxNYXAudmFsdWU9bWF0ZXJpYWwuY2xlYXJjb2F0Tm9ybWFsTWFwO2lmKG1hdGVyaWFsLnNpZGU9PT1CYWNrU2lkZSl7dW5pZm9ybXMuY2xlYXJjb2F0Tm9ybWFsU2NhbGUudmFsdWUubmVnYXRlKCk7fX19aWYobWF0ZXJpYWwudHJhbnNtaXNzaW9uPjApe3VuaWZvcm1zLnRyYW5zbWlzc2lvbi52YWx1ZT1tYXRlcmlhbC50cmFuc21pc3Npb247dW5pZm9ybXMudHJhbnNtaXNzaW9uU2FtcGxlck1hcC52YWx1ZT10cmFuc21pc3Npb25SZW5kZXJUYXJnZXQudGV4dHVyZTt1bmlmb3Jtcy50cmFuc21pc3Npb25TYW1wbGVyU2l6ZS52YWx1ZS5zZXQodHJhbnNtaXNzaW9uUmVuZGVyVGFyZ2V0LndpZHRoLHRyYW5zbWlzc2lvblJlbmRlclRhcmdldC5oZWlnaHQpO2lmKG1hdGVyaWFsLnRyYW5zbWlzc2lvbk1hcCl7dW5pZm9ybXMudHJhbnNtaXNzaW9uTWFwLnZhbHVlPW1hdGVyaWFsLnRyYW5zbWlzc2lvbk1hcDt9dW5pZm9ybXMudGhpY2tuZXNzLnZhbHVlPW1hdGVyaWFsLnRoaWNrbmVzcztpZihtYXRlcmlhbC50aGlja25lc3NNYXApe3VuaWZvcm1zLnRoaWNrbmVzc01hcC52YWx1ZT1tYXRlcmlhbC50aGlja25lc3NNYXA7fXVuaWZvcm1zLmF0dGVudWF0aW9uRGlzdGFuY2UudmFsdWU9bWF0ZXJpYWwuYXR0ZW51YXRpb25EaXN0YW5jZTt1bmlmb3Jtcy5hdHRlbnVhdGlvbkNvbG9yLnZhbHVlLmNvcHkobWF0ZXJpYWwuYXR0ZW51YXRpb25Db2xvcik7fXVuaWZvcm1zLnNwZWN1bGFySW50ZW5zaXR5LnZhbHVlPW1hdGVyaWFsLnNwZWN1bGFySW50ZW5zaXR5O3VuaWZvcm1zLnNwZWN1bGFyQ29sb3IudmFsdWUuY29weShtYXRlcmlhbC5zcGVjdWxhckNvbG9yKTtpZihtYXRlcmlhbC5zcGVjdWxhckludGVuc2l0eU1hcCl7dW5pZm9ybXMuc3BlY3VsYXJJbnRlbnNpdHlNYXAudmFsdWU9bWF0ZXJpYWwuc3BlY3VsYXJJbnRlbnNpdHlNYXA7fWlmKG1hdGVyaWFsLnNwZWN1bGFyQ29sb3JNYXApe3VuaWZvcm1zLnNwZWN1bGFyQ29sb3JNYXAudmFsdWU9bWF0ZXJpYWwuc3BlY3VsYXJDb2xvck1hcDt9fWZ1bmN0aW9uIHJlZnJlc2hVbmlmb3Jtc01hdGNhcCh1bmlmb3JtcyxtYXRlcmlhbCl7aWYobWF0ZXJpYWwubWF0Y2FwKXt1bmlmb3Jtcy5tYXRjYXAudmFsdWU9bWF0ZXJpYWwubWF0Y2FwO31pZihtYXRlcmlhbC5idW1wTWFwKXt1bmlmb3Jtcy5idW1wTWFwLnZhbHVlPW1hdGVyaWFsLmJ1bXBNYXA7dW5pZm9ybXMuYnVtcFNjYWxlLnZhbHVlPW1hdGVyaWFsLmJ1bXBTY2FsZTtpZihtYXRlcmlhbC5zaWRlPT09QmFja1NpZGUpdW5pZm9ybXMuYnVtcFNjYWxlLnZhbHVlKj0tMTt9aWYobWF0ZXJpYWwubm9ybWFsTWFwKXt1bmlmb3Jtcy5ub3JtYWxNYXAudmFsdWU9bWF0ZXJpYWwubm9ybWFsTWFwO3VuaWZvcm1zLm5vcm1hbFNjYWxlLnZhbHVlLmNvcHkobWF0ZXJpYWwubm9ybWFsU2NhbGUpO2lmKG1hdGVyaWFsLnNpZGU9PT1CYWNrU2lkZSl1bmlmb3Jtcy5ub3JtYWxTY2FsZS52YWx1ZS5uZWdhdGUoKTt9aWYobWF0ZXJpYWwuZGlzcGxhY2VtZW50TWFwKXt1bmlmb3Jtcy5kaXNwbGFjZW1lbnRNYXAudmFsdWU9bWF0ZXJpYWwuZGlzcGxhY2VtZW50TWFwO3VuaWZvcm1zLmRpc3BsYWNlbWVudFNjYWxlLnZhbHVlPW1hdGVyaWFsLmRpc3BsYWNlbWVudFNjYWxlO3VuaWZvcm1zLmRpc3BsYWNlbWVudEJpYXMudmFsdWU9bWF0ZXJpYWwuZGlzcGxhY2VtZW50Qmlhczt9fWZ1bmN0aW9uIHJlZnJlc2hVbmlmb3Jtc0RlcHRoKHVuaWZvcm1zLG1hdGVyaWFsKXtpZihtYXRlcmlhbC5kaXNwbGFjZW1lbnRNYXApe3VuaWZvcm1zLmRpc3BsYWNlbWVudE1hcC52YWx1ZT1tYXRlcmlhbC5kaXNwbGFjZW1lbnRNYXA7dW5pZm9ybXMuZGlzcGxhY2VtZW50U2NhbGUudmFsdWU9bWF0ZXJpYWwuZGlzcGxhY2VtZW50U2NhbGU7dW5pZm9ybXMuZGlzcGxhY2VtZW50Qmlhcy52YWx1ZT1tYXRlcmlhbC5kaXNwbGFjZW1lbnRCaWFzO319ZnVuY3Rpb24gcmVmcmVzaFVuaWZvcm1zRGlzdGFuY2UodW5pZm9ybXMsbWF0ZXJpYWwpe2lmKG1hdGVyaWFsLmRpc3BsYWNlbWVudE1hcCl7dW5pZm9ybXMuZGlzcGxhY2VtZW50TWFwLnZhbHVlPW1hdGVyaWFsLmRpc3BsYWNlbWVudE1hcDt1bmlmb3Jtcy5kaXNwbGFjZW1lbnRTY2FsZS52YWx1ZT1tYXRlcmlhbC5kaXNwbGFjZW1lbnRTY2FsZTt1bmlmb3Jtcy5kaXNwbGFjZW1lbnRCaWFzLnZhbHVlPW1hdGVyaWFsLmRpc3BsYWNlbWVudEJpYXM7fXVuaWZvcm1zLnJlZmVyZW5jZVBvc2l0aW9uLnZhbHVlLmNvcHkobWF0ZXJpYWwucmVmZXJlbmNlUG9zaXRpb24pO3VuaWZvcm1zLm5lYXJEaXN0YW5jZS52YWx1ZT1tYXRlcmlhbC5uZWFyRGlzdGFuY2U7dW5pZm9ybXMuZmFyRGlzdGFuY2UudmFsdWU9bWF0ZXJpYWwuZmFyRGlzdGFuY2U7fWZ1bmN0aW9uIHJlZnJlc2hVbmlmb3Jtc05vcm1hbCh1bmlmb3JtcyxtYXRlcmlhbCl7aWYobWF0ZXJpYWwuYnVtcE1hcCl7dW5pZm9ybXMuYnVtcE1hcC52YWx1ZT1tYXRlcmlhbC5idW1wTWFwO3VuaWZvcm1zLmJ1bXBTY2FsZS52YWx1ZT1tYXRlcmlhbC5idW1wU2NhbGU7aWYobWF0ZXJpYWwuc2lkZT09PUJhY2tTaWRlKXVuaWZvcm1zLmJ1bXBTY2FsZS52YWx1ZSo9LTE7fWlmKG1hdGVyaWFsLm5vcm1hbE1hcCl7dW5pZm9ybXMubm9ybWFsTWFwLnZhbHVlPW1hdGVyaWFsLm5vcm1hbE1hcDt1bmlmb3Jtcy5ub3JtYWxTY2FsZS52YWx1ZS5jb3B5KG1hdGVyaWFsLm5vcm1hbFNjYWxlKTtpZihtYXRlcmlhbC5zaWRlPT09QmFja1NpZGUpdW5pZm9ybXMubm9ybWFsU2NhbGUudmFsdWUubmVnYXRlKCk7fWlmKG1hdGVyaWFsLmRpc3BsYWNlbWVudE1hcCl7dW5pZm9ybXMuZGlzcGxhY2VtZW50TWFwLnZhbHVlPW1hdGVyaWFsLmRpc3BsYWNlbWVudE1hcDt1bmlmb3Jtcy5kaXNwbGFjZW1lbnRTY2FsZS52YWx1ZT1tYXRlcmlhbC5kaXNwbGFjZW1lbnRTY2FsZTt1bmlmb3Jtcy5kaXNwbGFjZW1lbnRCaWFzLnZhbHVlPW1hdGVyaWFsLmRpc3BsYWNlbWVudEJpYXM7fX1yZXR1cm4ge3JlZnJlc2hGb2dVbmlmb3JtczpyZWZyZXNoRm9nVW5pZm9ybXMscmVmcmVzaE1hdGVyaWFsVW5pZm9ybXM6cmVmcmVzaE1hdGVyaWFsVW5pZm9ybXN9O31mdW5jdGlvbiBjcmVhdGVDYW52YXNFbGVtZW50KCl7Y29uc3QgY2FudmFzPWNyZWF0ZUVsZW1lbnROUygnY2FudmFzJyk7Y2FudmFzLnN0eWxlLmRpc3BsYXk9J2Jsb2NrJztyZXR1cm4gY2FudmFzO31mdW5jdGlvbiBXZWJHTFJlbmRlcmVyKHBhcmFtZXRlcnMpe2lmKHBhcmFtZXRlcnM9PT12b2lkIDApe3BhcmFtZXRlcnM9e307fWNvbnN0IF9jYW52YXM9cGFyYW1ldGVycy5jYW52YXMhPT11bmRlZmluZWQ/cGFyYW1ldGVycy5jYW52YXM6Y3JlYXRlQ2FudmFzRWxlbWVudCgpLF9jb250ZXh0PXBhcmFtZXRlcnMuY29udGV4dCE9PXVuZGVmaW5lZD9wYXJhbWV0ZXJzLmNvbnRleHQ6bnVsbCxfYWxwaGE9cGFyYW1ldGVycy5hbHBoYSE9PXVuZGVmaW5lZD9wYXJhbWV0ZXJzLmFscGhhOmZhbHNlLF9kZXB0aD1wYXJhbWV0ZXJzLmRlcHRoIT09dW5kZWZpbmVkP3BhcmFtZXRlcnMuZGVwdGg6dHJ1ZSxfc3RlbmNpbD1wYXJhbWV0ZXJzLnN0ZW5jaWwhPT11bmRlZmluZWQ/cGFyYW1ldGVycy5zdGVuY2lsOnRydWUsX2FudGlhbGlhcz1wYXJhbWV0ZXJzLmFudGlhbGlhcyE9PXVuZGVmaW5lZD9wYXJhbWV0ZXJzLmFudGlhbGlhczpmYWxzZSxfcHJlbXVsdGlwbGllZEFscGhhPXBhcmFtZXRlcnMucHJlbXVsdGlwbGllZEFscGhhIT09dW5kZWZpbmVkP3BhcmFtZXRlcnMucHJlbXVsdGlwbGllZEFscGhhOnRydWUsX3ByZXNlcnZlRHJhd2luZ0J1ZmZlcj1wYXJhbWV0ZXJzLnByZXNlcnZlRHJhd2luZ0J1ZmZlciE9PXVuZGVmaW5lZD9wYXJhbWV0ZXJzLnByZXNlcnZlRHJhd2luZ0J1ZmZlcjpmYWxzZSxfcG93ZXJQcmVmZXJlbmNlPXBhcmFtZXRlcnMucG93ZXJQcmVmZXJlbmNlIT09dW5kZWZpbmVkP3BhcmFtZXRlcnMucG93ZXJQcmVmZXJlbmNlOidkZWZhdWx0JyxfZmFpbElmTWFqb3JQZXJmb3JtYW5jZUNhdmVhdD1wYXJhbWV0ZXJzLmZhaWxJZk1ham9yUGVyZm9ybWFuY2VDYXZlYXQhPT11bmRlZmluZWQ/cGFyYW1ldGVycy5mYWlsSWZNYWpvclBlcmZvcm1hbmNlQ2F2ZWF0OmZhbHNlO2xldCBjdXJyZW50UmVuZGVyTGlzdD1udWxsO2xldCBjdXJyZW50UmVuZGVyU3RhdGU9bnVsbDsvLyByZW5kZXIoKSBjYW4gYmUgY2FsbGVkIGZyb20gd2l0aGluIGEgY2FsbGJhY2sgdHJpZ2dlcmVkIGJ5IGFub3RoZXIgcmVuZGVyLgoJLy8gV2UgdHJhY2sgdGhpcyBzbyB0aGF0IHRoZSBuZXN0ZWQgcmVuZGVyIGNhbGwgZ2V0cyBpdHMgbGlzdCBhbmQgc3RhdGUgaXNvbGF0ZWQgZnJvbSB0aGUgcGFyZW50IHJlbmRlciBjYWxsLgoJY29uc3QgcmVuZGVyTGlzdFN0YWNrPVtdO2NvbnN0IHJlbmRlclN0YXRlU3RhY2s9W107Ly8gcHVibGljIHByb3BlcnRpZXMKCXRoaXMuZG9tRWxlbWVudD1fY2FudmFzOy8vIERlYnVnIGNvbmZpZ3VyYXRpb24gY29udGFpbmVyCgl0aGlzLmRlYnVnPXsvKioKCQkJICogRW5hYmxlcyBlcnJvciBjaGVja2luZyBhbmQgcmVwb3J0aW5nIHdoZW4gc2hhZGVyIHByb2dyYW1zIGFyZSBiZWluZyBjb21waWxlZAoJCQkgKiBAdHlwZSB7Ym9vbGVhbn0KCQkJICovY2hlY2tTaGFkZXJFcnJvcnM6dHJ1ZX07Ly8gY2xlYXJpbmcKCXRoaXMuYXV0b0NsZWFyPXRydWU7dGhpcy5hdXRvQ2xlYXJDb2xvcj10cnVlO3RoaXMuYXV0b0NsZWFyRGVwdGg9dHJ1ZTt0aGlzLmF1dG9DbGVhclN0ZW5jaWw9dHJ1ZTsvLyBzY2VuZSBncmFwaAoJdGhpcy5zb3J0T2JqZWN0cz10cnVlOy8vIHVzZXItZGVmaW5lZCBjbGlwcGluZwoJdGhpcy5jbGlwcGluZ1BsYW5lcz1bXTt0aGlzLmxvY2FsQ2xpcHBpbmdFbmFibGVkPWZhbHNlOy8vIHBoeXNpY2FsbHkgYmFzZWQgc2hhZGluZwoJdGhpcy5nYW1tYUZhY3Rvcj0yLjA7Ly8gZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5Cgl0aGlzLm91dHB1dEVuY29kaW5nPUxpbmVhckVuY29kaW5nOy8vIHBoeXNpY2FsIGxpZ2h0cwoJdGhpcy5waHlzaWNhbGx5Q29ycmVjdExpZ2h0cz1mYWxzZTsvLyB0b25lIG1hcHBpbmcKCXRoaXMudG9uZU1hcHBpbmc9Tm9Ub25lTWFwcGluZzt0aGlzLnRvbmVNYXBwaW5nRXhwb3N1cmU9MS4wOy8vIGludGVybmFsIHByb3BlcnRpZXMKCWNvbnN0IF90aGlzPXRoaXM7bGV0IF9pc0NvbnRleHRMb3N0PWZhbHNlOy8vIGludGVybmFsIHN0YXRlIGNhY2hlCglsZXQgX2N1cnJlbnRBY3RpdmVDdWJlRmFjZT0wO2xldCBfY3VycmVudEFjdGl2ZU1pcG1hcExldmVsPTA7bGV0IF9jdXJyZW50UmVuZGVyVGFyZ2V0PW51bGw7bGV0IF9jdXJyZW50TWF0ZXJpYWxJZD0tMTtsZXQgX2N1cnJlbnRDYW1lcmE9bnVsbDtjb25zdCBfY3VycmVudFZpZXdwb3J0PW5ldyBWZWN0b3I0KCk7Y29uc3QgX2N1cnJlbnRTY2lzc29yPW5ldyBWZWN0b3I0KCk7bGV0IF9jdXJyZW50U2Npc3NvclRlc3Q9bnVsbDsvLwoJbGV0IF93aWR0aD1fY2FudmFzLndpZHRoO2xldCBfaGVpZ2h0PV9jYW52YXMuaGVpZ2h0O2xldCBfcGl4ZWxSYXRpbz0xO2xldCBfb3BhcXVlU29ydD1udWxsO2xldCBfdHJhbnNwYXJlbnRTb3J0PW51bGw7Y29uc3QgX3ZpZXdwb3J0PW5ldyBWZWN0b3I0KDAsMCxfd2lkdGgsX2hlaWdodCk7Y29uc3QgX3NjaXNzb3I9bmV3IFZlY3RvcjQoMCwwLF93aWR0aCxfaGVpZ2h0KTtsZXQgX3NjaXNzb3JUZXN0PWZhbHNlOy8vCgljb25zdCBfY3VycmVudERyYXdCdWZmZXJzPVtdOy8vIGZydXN0dW0KCWNvbnN0IF9mcnVzdHVtPW5ldyBGcnVzdHVtKCk7Ly8gY2xpcHBpbmcKCWxldCBfY2xpcHBpbmdFbmFibGVkPWZhbHNlO2xldCBfbG9jYWxDbGlwcGluZ0VuYWJsZWQ9ZmFsc2U7Ly8gdHJhbnNtaXNzaW9uCglsZXQgX3RyYW5zbWlzc2lvblJlbmRlclRhcmdldD1udWxsOy8vIGNhbWVyYSBtYXRyaWNlcyBjYWNoZQoJY29uc3QgX3Byb2pTY3JlZW5NYXRyaXg9bmV3IE1hdHJpeDQoKTtjb25zdCBfdmVjdG9yMz1uZXcgVmVjdG9yMygpO2NvbnN0IF9lbXB0eVNjZW5lPXtiYWNrZ3JvdW5kOm51bGwsZm9nOm51bGwsZW52aXJvbm1lbnQ6bnVsbCxvdmVycmlkZU1hdGVyaWFsOm51bGwsaXNTY2VuZTp0cnVlfTtmdW5jdGlvbiBnZXRUYXJnZXRQaXhlbFJhdGlvKCl7cmV0dXJuIF9jdXJyZW50UmVuZGVyVGFyZ2V0PT09bnVsbD9fcGl4ZWxSYXRpbzoxO30vLyBpbml0aWFsaXplCglsZXQgX2dsPV9jb250ZXh0O2Z1bmN0aW9uIGdldENvbnRleHQoY29udGV4dE5hbWVzLGNvbnRleHRBdHRyaWJ1dGVzKXtmb3IobGV0IGk9MDtpPGNvbnRleHROYW1lcy5sZW5ndGg7aSsrKXtjb25zdCBjb250ZXh0TmFtZT1jb250ZXh0TmFtZXNbaV07Y29uc3QgY29udGV4dD1fY2FudmFzLmdldENvbnRleHQoY29udGV4dE5hbWUsY29udGV4dEF0dHJpYnV0ZXMpO2lmKGNvbnRleHQhPT1udWxsKXJldHVybiBjb250ZXh0O31yZXR1cm4gbnVsbDt9dHJ5e2NvbnN0IGNvbnRleHRBdHRyaWJ1dGVzPXthbHBoYTpfYWxwaGEsZGVwdGg6X2RlcHRoLHN0ZW5jaWw6X3N0ZW5jaWwsYW50aWFsaWFzOl9hbnRpYWxpYXMscHJlbXVsdGlwbGllZEFscGhhOl9wcmVtdWx0aXBsaWVkQWxwaGEscHJlc2VydmVEcmF3aW5nQnVmZmVyOl9wcmVzZXJ2ZURyYXdpbmdCdWZmZXIscG93ZXJQcmVmZXJlbmNlOl9wb3dlclByZWZlcmVuY2UsZmFpbElmTWFqb3JQZXJmb3JtYW5jZUNhdmVhdDpfZmFpbElmTWFqb3JQZXJmb3JtYW5jZUNhdmVhdH07Ly8gT2Zmc2NyZWVuQ2FudmFzIGRvZXMgbm90IGhhdmUgc2V0QXR0cmlidXRlLCBzZWUgIzIyODExCglpZignc2V0QXR0cmlidXRlJ2luIF9jYW52YXMpX2NhbnZhcy5zZXRBdHRyaWJ1dGUoJ2RhdGEtZW5naW5lJyxgdGhyZWUuanMgciR7UkVWSVNJT059YCk7Ly8gZXZlbnQgbGlzdGVuZXJzIG11c3QgYmUgcmVnaXN0ZXJlZCBiZWZvcmUgV2ViR0wgY29udGV4dCBpcyBjcmVhdGVkLCBzZWUgIzEyNzUzCglfY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ3dlYmdsY29udGV4dGxvc3QnLG9uQ29udGV4dExvc3QsZmFsc2UpO19jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignd2ViZ2xjb250ZXh0cmVzdG9yZWQnLG9uQ29udGV4dFJlc3RvcmUsZmFsc2UpO2lmKF9nbD09PW51bGwpe2NvbnN0IGNvbnRleHROYW1lcz1bJ3dlYmdsMicsJ3dlYmdsJywnZXhwZXJpbWVudGFsLXdlYmdsJ107aWYoX3RoaXMuaXNXZWJHTDFSZW5kZXJlcj09PXRydWUpe2NvbnRleHROYW1lcy5zaGlmdCgpO31fZ2w9Z2V0Q29udGV4dChjb250ZXh0TmFtZXMsY29udGV4dEF0dHJpYnV0ZXMpO2lmKF9nbD09PW51bGwpe2lmKGdldENvbnRleHQoY29udGV4dE5hbWVzKSl7dGhyb3cgbmV3IEVycm9yKCdFcnJvciBjcmVhdGluZyBXZWJHTCBjb250ZXh0IHdpdGggeW91ciBzZWxlY3RlZCBhdHRyaWJ1dGVzLicpO31lbHNlIHt0aHJvdyBuZXcgRXJyb3IoJ0Vycm9yIGNyZWF0aW5nIFdlYkdMIGNvbnRleHQuJyk7fX19Ly8gU29tZSBleHBlcmltZW50YWwtd2ViZ2wgaW1wbGVtZW50YXRpb25zIGRvIG5vdCBoYXZlIGdldFNoYWRlclByZWNpc2lvbkZvcm1hdAoJaWYoX2dsLmdldFNoYWRlclByZWNpc2lvbkZvcm1hdD09PXVuZGVmaW5lZCl7X2dsLmdldFNoYWRlclByZWNpc2lvbkZvcm1hdD1mdW5jdGlvbigpe3JldHVybiB7J3JhbmdlTWluJzoxLCdyYW5nZU1heCc6MSwncHJlY2lzaW9uJzoxfTt9O319Y2F0Y2goZXJyb3Ipe2NvbnNvbGUuZXJyb3IoJ1RIUkVFLldlYkdMUmVuZGVyZXI6ICcrZXJyb3IubWVzc2FnZSk7dGhyb3cgZXJyb3I7fWxldCBleHRlbnNpb25zLGNhcGFiaWxpdGllcyxzdGF0ZSxpbmZvO2xldCBwcm9wZXJ0aWVzLHRleHR1cmVzLGN1YmVtYXBzLGN1YmV1dm1hcHMsYXR0cmlidXRlcyxnZW9tZXRyaWVzLG9iamVjdHM7bGV0IHByb2dyYW1DYWNoZSxtYXRlcmlhbHMscmVuZGVyTGlzdHMscmVuZGVyU3RhdGVzLGNsaXBwaW5nLHNoYWRvd01hcDtsZXQgYmFja2dyb3VuZCxtb3JwaHRhcmdldHMsYnVmZmVyUmVuZGVyZXIsaW5kZXhlZEJ1ZmZlclJlbmRlcmVyO2xldCB1dGlscyxiaW5kaW5nU3RhdGVzO2Z1bmN0aW9uIGluaXRHTENvbnRleHQoKXtleHRlbnNpb25zPW5ldyBXZWJHTEV4dGVuc2lvbnMoX2dsKTtjYXBhYmlsaXRpZXM9bmV3IFdlYkdMQ2FwYWJpbGl0aWVzKF9nbCxleHRlbnNpb25zLHBhcmFtZXRlcnMpO2V4dGVuc2lvbnMuaW5pdChjYXBhYmlsaXRpZXMpO3V0aWxzPW5ldyBXZWJHTFV0aWxzKF9nbCxleHRlbnNpb25zLGNhcGFiaWxpdGllcyk7c3RhdGU9bmV3IFdlYkdMU3RhdGUoX2dsLGV4dGVuc2lvbnMsY2FwYWJpbGl0aWVzKTtfY3VycmVudERyYXdCdWZmZXJzWzBdPTEwMjk7aW5mbz1uZXcgV2ViR0xJbmZvKF9nbCk7cHJvcGVydGllcz1uZXcgV2ViR0xQcm9wZXJ0aWVzKCk7dGV4dHVyZXM9bmV3IFdlYkdMVGV4dHVyZXMoX2dsLGV4dGVuc2lvbnMsc3RhdGUscHJvcGVydGllcyxjYXBhYmlsaXRpZXMsdXRpbHMsaW5mbyk7Y3ViZW1hcHM9bmV3IFdlYkdMQ3ViZU1hcHMoX3RoaXMpO2N1YmV1dm1hcHM9bmV3IFdlYkdMQ3ViZVVWTWFwcyhfdGhpcyk7YXR0cmlidXRlcz1uZXcgV2ViR0xBdHRyaWJ1dGVzKF9nbCxjYXBhYmlsaXRpZXMpO2JpbmRpbmdTdGF0ZXM9bmV3IFdlYkdMQmluZGluZ1N0YXRlcyhfZ2wsZXh0ZW5zaW9ucyxhdHRyaWJ1dGVzLGNhcGFiaWxpdGllcyk7Z2VvbWV0cmllcz1uZXcgV2ViR0xHZW9tZXRyaWVzKF9nbCxhdHRyaWJ1dGVzLGluZm8sYmluZGluZ1N0YXRlcyk7b2JqZWN0cz1uZXcgV2ViR0xPYmplY3RzKF9nbCxnZW9tZXRyaWVzLGF0dHJpYnV0ZXMsaW5mbyk7bW9ycGh0YXJnZXRzPW5ldyBXZWJHTE1vcnBodGFyZ2V0cyhfZ2wsY2FwYWJpbGl0aWVzLHRleHR1cmVzKTtjbGlwcGluZz1uZXcgV2ViR0xDbGlwcGluZyhwcm9wZXJ0aWVzKTtwcm9ncmFtQ2FjaGU9bmV3IFdlYkdMUHJvZ3JhbXMoX3RoaXMsY3ViZW1hcHMsY3ViZXV2bWFwcyxleHRlbnNpb25zLGNhcGFiaWxpdGllcyxiaW5kaW5nU3RhdGVzLGNsaXBwaW5nKTttYXRlcmlhbHM9bmV3IFdlYkdMTWF0ZXJpYWxzKHByb3BlcnRpZXMpO3JlbmRlckxpc3RzPW5ldyBXZWJHTFJlbmRlckxpc3RzKHByb3BlcnRpZXMpO3JlbmRlclN0YXRlcz1uZXcgV2ViR0xSZW5kZXJTdGF0ZXMoZXh0ZW5zaW9ucyxjYXBhYmlsaXRpZXMpO2JhY2tncm91bmQ9bmV3IFdlYkdMQmFja2dyb3VuZChfdGhpcyxjdWJlbWFwcyxzdGF0ZSxvYmplY3RzLF9wcmVtdWx0aXBsaWVkQWxwaGEpO3NoYWRvd01hcD1uZXcgV2ViR0xTaGFkb3dNYXAoX3RoaXMsb2JqZWN0cyxjYXBhYmlsaXRpZXMpO2J1ZmZlclJlbmRlcmVyPW5ldyBXZWJHTEJ1ZmZlclJlbmRlcmVyKF9nbCxleHRlbnNpb25zLGluZm8sY2FwYWJpbGl0aWVzKTtpbmRleGVkQnVmZmVyUmVuZGVyZXI9bmV3IFdlYkdMSW5kZXhlZEJ1ZmZlclJlbmRlcmVyKF9nbCxleHRlbnNpb25zLGluZm8sY2FwYWJpbGl0aWVzKTtpbmZvLnByb2dyYW1zPXByb2dyYW1DYWNoZS5wcm9ncmFtcztfdGhpcy5jYXBhYmlsaXRpZXM9Y2FwYWJpbGl0aWVzO190aGlzLmV4dGVuc2lvbnM9ZXh0ZW5zaW9ucztfdGhpcy5wcm9wZXJ0aWVzPXByb3BlcnRpZXM7X3RoaXMucmVuZGVyTGlzdHM9cmVuZGVyTGlzdHM7X3RoaXMuc2hhZG93TWFwPXNoYWRvd01hcDtfdGhpcy5zdGF0ZT1zdGF0ZTtfdGhpcy5pbmZvPWluZm87fWluaXRHTENvbnRleHQoKTsvLyB4cgoJY29uc3QgeHI9bmV3IFdlYlhSTWFuYWdlcihfdGhpcyxfZ2wpO3RoaXMueHI9eHI7Ly8gQVBJCgl0aGlzLmdldENvbnRleHQ9ZnVuY3Rpb24oKXtyZXR1cm4gX2dsO307dGhpcy5nZXRDb250ZXh0QXR0cmlidXRlcz1mdW5jdGlvbigpe3JldHVybiBfZ2wuZ2V0Q29udGV4dEF0dHJpYnV0ZXMoKTt9O3RoaXMuZm9yY2VDb250ZXh0TG9zcz1mdW5jdGlvbigpe2NvbnN0IGV4dGVuc2lvbj1leHRlbnNpb25zLmdldCgnV0VCR0xfbG9zZV9jb250ZXh0Jyk7aWYoZXh0ZW5zaW9uKWV4dGVuc2lvbi5sb3NlQ29udGV4dCgpO307dGhpcy5mb3JjZUNvbnRleHRSZXN0b3JlPWZ1bmN0aW9uKCl7Y29uc3QgZXh0ZW5zaW9uPWV4dGVuc2lvbnMuZ2V0KCdXRUJHTF9sb3NlX2NvbnRleHQnKTtpZihleHRlbnNpb24pZXh0ZW5zaW9uLnJlc3RvcmVDb250ZXh0KCk7fTt0aGlzLmdldFBpeGVsUmF0aW89ZnVuY3Rpb24oKXtyZXR1cm4gX3BpeGVsUmF0aW87fTt0aGlzLnNldFBpeGVsUmF0aW89ZnVuY3Rpb24odmFsdWUpe2lmKHZhbHVlPT09dW5kZWZpbmVkKXJldHVybjtfcGl4ZWxSYXRpbz12YWx1ZTt0aGlzLnNldFNpemUoX3dpZHRoLF9oZWlnaHQsZmFsc2UpO307dGhpcy5nZXRTaXplPWZ1bmN0aW9uKHRhcmdldCl7cmV0dXJuIHRhcmdldC5zZXQoX3dpZHRoLF9oZWlnaHQpO307dGhpcy5zZXRTaXplPWZ1bmN0aW9uKHdpZHRoLGhlaWdodCx1cGRhdGVTdHlsZSl7aWYoeHIuaXNQcmVzZW50aW5nKXtjb25zb2xlLndhcm4oJ1RIUkVFLldlYkdMUmVuZGVyZXI6IENhblwndCBjaGFuZ2Ugc2l6ZSB3aGlsZSBWUiBkZXZpY2UgaXMgcHJlc2VudGluZy4nKTtyZXR1cm47fV93aWR0aD13aWR0aDtfaGVpZ2h0PWhlaWdodDtfY2FudmFzLndpZHRoPU1hdGguZmxvb3Iod2lkdGgqX3BpeGVsUmF0aW8pO19jYW52YXMuaGVpZ2h0PU1hdGguZmxvb3IoaGVpZ2h0Kl9waXhlbFJhdGlvKTtpZih1cGRhdGVTdHlsZSE9PWZhbHNlKXtfY2FudmFzLnN0eWxlLndpZHRoPXdpZHRoKydweCc7X2NhbnZhcy5zdHlsZS5oZWlnaHQ9aGVpZ2h0KydweCc7fXRoaXMuc2V0Vmlld3BvcnQoMCwwLHdpZHRoLGhlaWdodCk7fTt0aGlzLmdldERyYXdpbmdCdWZmZXJTaXplPWZ1bmN0aW9uKHRhcmdldCl7cmV0dXJuIHRhcmdldC5zZXQoX3dpZHRoKl9waXhlbFJhdGlvLF9oZWlnaHQqX3BpeGVsUmF0aW8pLmZsb29yKCk7fTt0aGlzLnNldERyYXdpbmdCdWZmZXJTaXplPWZ1bmN0aW9uKHdpZHRoLGhlaWdodCxwaXhlbFJhdGlvKXtfd2lkdGg9d2lkdGg7X2hlaWdodD1oZWlnaHQ7X3BpeGVsUmF0aW89cGl4ZWxSYXRpbztfY2FudmFzLndpZHRoPU1hdGguZmxvb3Iod2lkdGgqcGl4ZWxSYXRpbyk7X2NhbnZhcy5oZWlnaHQ9TWF0aC5mbG9vcihoZWlnaHQqcGl4ZWxSYXRpbyk7dGhpcy5zZXRWaWV3cG9ydCgwLDAsd2lkdGgsaGVpZ2h0KTt9O3RoaXMuZ2V0Q3VycmVudFZpZXdwb3J0PWZ1bmN0aW9uKHRhcmdldCl7cmV0dXJuIHRhcmdldC5jb3B5KF9jdXJyZW50Vmlld3BvcnQpO307dGhpcy5nZXRWaWV3cG9ydD1mdW5jdGlvbih0YXJnZXQpe3JldHVybiB0YXJnZXQuY29weShfdmlld3BvcnQpO307dGhpcy5zZXRWaWV3cG9ydD1mdW5jdGlvbih4LHksd2lkdGgsaGVpZ2h0KXtpZih4LmlzVmVjdG9yNCl7X3ZpZXdwb3J0LnNldCh4LngseC55LHgueix4LncpO31lbHNlIHtfdmlld3BvcnQuc2V0KHgseSx3aWR0aCxoZWlnaHQpO31zdGF0ZS52aWV3cG9ydChfY3VycmVudFZpZXdwb3J0LmNvcHkoX3ZpZXdwb3J0KS5tdWx0aXBseVNjYWxhcihfcGl4ZWxSYXRpbykuZmxvb3IoKSk7fTt0aGlzLmdldFNjaXNzb3I9ZnVuY3Rpb24odGFyZ2V0KXtyZXR1cm4gdGFyZ2V0LmNvcHkoX3NjaXNzb3IpO307dGhpcy5zZXRTY2lzc29yPWZ1bmN0aW9uKHgseSx3aWR0aCxoZWlnaHQpe2lmKHguaXNWZWN0b3I0KXtfc2Npc3Nvci5zZXQoeC54LHgueSx4LnoseC53KTt9ZWxzZSB7X3NjaXNzb3Iuc2V0KHgseSx3aWR0aCxoZWlnaHQpO31zdGF0ZS5zY2lzc29yKF9jdXJyZW50U2Npc3Nvci5jb3B5KF9zY2lzc29yKS5tdWx0aXBseVNjYWxhcihfcGl4ZWxSYXRpbykuZmxvb3IoKSk7fTt0aGlzLmdldFNjaXNzb3JUZXN0PWZ1bmN0aW9uKCl7cmV0dXJuIF9zY2lzc29yVGVzdDt9O3RoaXMuc2V0U2Npc3NvclRlc3Q9ZnVuY3Rpb24oYm9vbGVhbil7c3RhdGUuc2V0U2Npc3NvclRlc3QoX3NjaXNzb3JUZXN0PWJvb2xlYW4pO307dGhpcy5zZXRPcGFxdWVTb3J0PWZ1bmN0aW9uKG1ldGhvZCl7X29wYXF1ZVNvcnQ9bWV0aG9kO307dGhpcy5zZXRUcmFuc3BhcmVudFNvcnQ9ZnVuY3Rpb24obWV0aG9kKXtfdHJhbnNwYXJlbnRTb3J0PW1ldGhvZDt9Oy8vIENsZWFyaW5nCgl0aGlzLmdldENsZWFyQ29sb3I9ZnVuY3Rpb24odGFyZ2V0KXtyZXR1cm4gdGFyZ2V0LmNvcHkoYmFja2dyb3VuZC5nZXRDbGVhckNvbG9yKCkpO307dGhpcy5zZXRDbGVhckNvbG9yPWZ1bmN0aW9uKCl7YmFja2dyb3VuZC5zZXRDbGVhckNvbG9yLmFwcGx5KGJhY2tncm91bmQsYXJndW1lbnRzKTt9O3RoaXMuZ2V0Q2xlYXJBbHBoYT1mdW5jdGlvbigpe3JldHVybiBiYWNrZ3JvdW5kLmdldENsZWFyQWxwaGEoKTt9O3RoaXMuc2V0Q2xlYXJBbHBoYT1mdW5jdGlvbigpe2JhY2tncm91bmQuc2V0Q2xlYXJBbHBoYS5hcHBseShiYWNrZ3JvdW5kLGFyZ3VtZW50cyk7fTt0aGlzLmNsZWFyPWZ1bmN0aW9uKGNvbG9yLGRlcHRoLHN0ZW5jaWwpe2xldCBiaXRzPTA7aWYoY29sb3I9PT11bmRlZmluZWR8fGNvbG9yKWJpdHN8PTE2Mzg0O2lmKGRlcHRoPT09dW5kZWZpbmVkfHxkZXB0aCliaXRzfD0yNTY7aWYoc3RlbmNpbD09PXVuZGVmaW5lZHx8c3RlbmNpbCliaXRzfD0xMDI0O19nbC5jbGVhcihiaXRzKTt9O3RoaXMuY2xlYXJDb2xvcj1mdW5jdGlvbigpe3RoaXMuY2xlYXIodHJ1ZSxmYWxzZSxmYWxzZSk7fTt0aGlzLmNsZWFyRGVwdGg9ZnVuY3Rpb24oKXt0aGlzLmNsZWFyKGZhbHNlLHRydWUsZmFsc2UpO307dGhpcy5jbGVhclN0ZW5jaWw9ZnVuY3Rpb24oKXt0aGlzLmNsZWFyKGZhbHNlLGZhbHNlLHRydWUpO307Ly8KCXRoaXMuZGlzcG9zZT1mdW5jdGlvbigpe19jYW52YXMucmVtb3ZlRXZlbnRMaXN0ZW5lcignd2ViZ2xjb250ZXh0bG9zdCcsb25Db250ZXh0TG9zdCxmYWxzZSk7X2NhbnZhcy5yZW1vdmVFdmVudExpc3RlbmVyKCd3ZWJnbGNvbnRleHRyZXN0b3JlZCcsb25Db250ZXh0UmVzdG9yZSxmYWxzZSk7cmVuZGVyTGlzdHMuZGlzcG9zZSgpO3JlbmRlclN0YXRlcy5kaXNwb3NlKCk7cHJvcGVydGllcy5kaXNwb3NlKCk7Y3ViZW1hcHMuZGlzcG9zZSgpO2N1YmV1dm1hcHMuZGlzcG9zZSgpO29iamVjdHMuZGlzcG9zZSgpO2JpbmRpbmdTdGF0ZXMuZGlzcG9zZSgpO3hyLmRpc3Bvc2UoKTt4ci5yZW1vdmVFdmVudExpc3RlbmVyKCdzZXNzaW9uc3RhcnQnLG9uWFJTZXNzaW9uU3RhcnQpO3hyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Nlc3Npb25lbmQnLG9uWFJTZXNzaW9uRW5kKTtpZihfdHJhbnNtaXNzaW9uUmVuZGVyVGFyZ2V0KXtfdHJhbnNtaXNzaW9uUmVuZGVyVGFyZ2V0LmRpc3Bvc2UoKTtfdHJhbnNtaXNzaW9uUmVuZGVyVGFyZ2V0PW51bGw7fWFuaW1hdGlvbi5zdG9wKCk7fTsvLyBFdmVudHMKCWZ1bmN0aW9uIG9uQ29udGV4dExvc3QoZXZlbnQpe2V2ZW50LnByZXZlbnREZWZhdWx0KCk7Y29uc29sZS5sb2coJ1RIUkVFLldlYkdMUmVuZGVyZXI6IENvbnRleHQgTG9zdC4nKTtfaXNDb250ZXh0TG9zdD10cnVlO31mdW5jdGlvbi8qIGV2ZW50ICovb25Db250ZXh0UmVzdG9yZSgpe2NvbnNvbGUubG9nKCdUSFJFRS5XZWJHTFJlbmRlcmVyOiBDb250ZXh0IFJlc3RvcmVkLicpO19pc0NvbnRleHRMb3N0PWZhbHNlO2NvbnN0IGluZm9BdXRvUmVzZXQ9aW5mby5hdXRvUmVzZXQ7Y29uc3Qgc2hhZG93TWFwRW5hYmxlZD1zaGFkb3dNYXAuZW5hYmxlZDtjb25zdCBzaGFkb3dNYXBBdXRvVXBkYXRlPXNoYWRvd01hcC5hdXRvVXBkYXRlO2NvbnN0IHNoYWRvd01hcE5lZWRzVXBkYXRlPXNoYWRvd01hcC5uZWVkc1VwZGF0ZTtjb25zdCBzaGFkb3dNYXBUeXBlPXNoYWRvd01hcC50eXBlO2luaXRHTENvbnRleHQoKTtpbmZvLmF1dG9SZXNldD1pbmZvQXV0b1Jlc2V0O3NoYWRvd01hcC5lbmFibGVkPXNoYWRvd01hcEVuYWJsZWQ7c2hhZG93TWFwLmF1dG9VcGRhdGU9c2hhZG93TWFwQXV0b1VwZGF0ZTtzaGFkb3dNYXAubmVlZHNVcGRhdGU9c2hhZG93TWFwTmVlZHNVcGRhdGU7c2hhZG93TWFwLnR5cGU9c2hhZG93TWFwVHlwZTt9ZnVuY3Rpb24gb25NYXRlcmlhbERpc3Bvc2UoZXZlbnQpe2NvbnN0IG1hdGVyaWFsPWV2ZW50LnRhcmdldDttYXRlcmlhbC5yZW1vdmVFdmVudExpc3RlbmVyKCdkaXNwb3NlJyxvbk1hdGVyaWFsRGlzcG9zZSk7ZGVhbGxvY2F0ZU1hdGVyaWFsKG1hdGVyaWFsKTt9Ly8gQnVmZmVyIGRlYWxsb2NhdGlvbgoJZnVuY3Rpb24gZGVhbGxvY2F0ZU1hdGVyaWFsKG1hdGVyaWFsKXtyZWxlYXNlTWF0ZXJpYWxQcm9ncmFtUmVmZXJlbmNlcyhtYXRlcmlhbCk7cHJvcGVydGllcy5yZW1vdmUobWF0ZXJpYWwpO31mdW5jdGlvbiByZWxlYXNlTWF0ZXJpYWxQcm9ncmFtUmVmZXJlbmNlcyhtYXRlcmlhbCl7Y29uc3QgcHJvZ3JhbXM9cHJvcGVydGllcy5nZXQobWF0ZXJpYWwpLnByb2dyYW1zO2lmKHByb2dyYW1zIT09dW5kZWZpbmVkKXtwcm9ncmFtcy5mb3JFYWNoKGZ1bmN0aW9uKHByb2dyYW0pe3Byb2dyYW1DYWNoZS5yZWxlYXNlUHJvZ3JhbShwcm9ncmFtKTt9KTt9fS8vIEJ1ZmZlciByZW5kZXJpbmcKCXRoaXMucmVuZGVyQnVmZmVyRGlyZWN0PWZ1bmN0aW9uKGNhbWVyYSxzY2VuZSxnZW9tZXRyeSxtYXRlcmlhbCxvYmplY3QsZ3JvdXApe2lmKHNjZW5lPT09bnVsbClzY2VuZT1fZW1wdHlTY2VuZTsvLyByZW5kZXJCdWZmZXJEaXJlY3Qgc2Vjb25kIHBhcmFtZXRlciB1c2VkIHRvIGJlIGZvZyAoY291bGQgYmUgbnVsbCkKCWNvbnN0IGZyb250RmFjZUNXPW9iamVjdC5pc01lc2gmJm9iamVjdC5tYXRyaXhXb3JsZC5kZXRlcm1pbmFudCgpPDA7Y29uc3QgcHJvZ3JhbT1zZXRQcm9ncmFtKGNhbWVyYSxzY2VuZSxnZW9tZXRyeSxtYXRlcmlhbCxvYmplY3QpO3N0YXRlLnNldE1hdGVyaWFsKG1hdGVyaWFsLGZyb250RmFjZUNXKTsvLwoJbGV0IGluZGV4PWdlb21ldHJ5LmluZGV4O2NvbnN0IHBvc2l0aW9uPWdlb21ldHJ5LmF0dHJpYnV0ZXMucG9zaXRpb247Ly8KCWlmKGluZGV4PT09bnVsbCl7aWYocG9zaXRpb249PT11bmRlZmluZWR8fHBvc2l0aW9uLmNvdW50PT09MClyZXR1cm47fWVsc2UgaWYoaW5kZXguY291bnQ9PT0wKXtyZXR1cm47fS8vCglsZXQgcmFuZ2VGYWN0b3I9MTtpZihtYXRlcmlhbC53aXJlZnJhbWU9PT10cnVlKXtpbmRleD1nZW9tZXRyaWVzLmdldFdpcmVmcmFtZUF0dHJpYnV0ZShnZW9tZXRyeSk7cmFuZ2VGYWN0b3I9Mjt9YmluZGluZ1N0YXRlcy5zZXR1cChvYmplY3QsbWF0ZXJpYWwscHJvZ3JhbSxnZW9tZXRyeSxpbmRleCk7bGV0IGF0dHJpYnV0ZTtsZXQgcmVuZGVyZXI9YnVmZmVyUmVuZGVyZXI7aWYoaW5kZXghPT1udWxsKXthdHRyaWJ1dGU9YXR0cmlidXRlcy5nZXQoaW5kZXgpO3JlbmRlcmVyPWluZGV4ZWRCdWZmZXJSZW5kZXJlcjtyZW5kZXJlci5zZXRJbmRleChhdHRyaWJ1dGUpO30vLwoJY29uc3QgZGF0YUNvdW50PWluZGV4IT09bnVsbD9pbmRleC5jb3VudDpwb3NpdGlvbi5jb3VudDtjb25zdCByYW5nZVN0YXJ0PWdlb21ldHJ5LmRyYXdSYW5nZS5zdGFydCpyYW5nZUZhY3Rvcjtjb25zdCByYW5nZUNvdW50PWdlb21ldHJ5LmRyYXdSYW5nZS5jb3VudCpyYW5nZUZhY3Rvcjtjb25zdCBncm91cFN0YXJ0PWdyb3VwIT09bnVsbD9ncm91cC5zdGFydCpyYW5nZUZhY3RvcjowO2NvbnN0IGdyb3VwQ291bnQ9Z3JvdXAhPT1udWxsP2dyb3VwLmNvdW50KnJhbmdlRmFjdG9yOkluZmluaXR5O2NvbnN0IGRyYXdTdGFydD1NYXRoLm1heChyYW5nZVN0YXJ0LGdyb3VwU3RhcnQpO2NvbnN0IGRyYXdFbmQ9TWF0aC5taW4oZGF0YUNvdW50LHJhbmdlU3RhcnQrcmFuZ2VDb3VudCxncm91cFN0YXJ0K2dyb3VwQ291bnQpLTE7Y29uc3QgZHJhd0NvdW50PU1hdGgubWF4KDAsZHJhd0VuZC1kcmF3U3RhcnQrMSk7aWYoZHJhd0NvdW50PT09MClyZXR1cm47Ly8KCWlmKG9iamVjdC5pc01lc2gpe2lmKG1hdGVyaWFsLndpcmVmcmFtZT09PXRydWUpe3N0YXRlLnNldExpbmVXaWR0aChtYXRlcmlhbC53aXJlZnJhbWVMaW5ld2lkdGgqZ2V0VGFyZ2V0UGl4ZWxSYXRpbygpKTtyZW5kZXJlci5zZXRNb2RlKDEpO31lbHNlIHtyZW5kZXJlci5zZXRNb2RlKDQpO319ZWxzZSBpZihvYmplY3QuaXNMaW5lKXtsZXQgbGluZVdpZHRoPW1hdGVyaWFsLmxpbmV3aWR0aDtpZihsaW5lV2lkdGg9PT11bmRlZmluZWQpbGluZVdpZHRoPTE7Ly8gTm90IHVzaW5nIExpbmUqTWF0ZXJpYWwKCXN0YXRlLnNldExpbmVXaWR0aChsaW5lV2lkdGgqZ2V0VGFyZ2V0UGl4ZWxSYXRpbygpKTtpZihvYmplY3QuaXNMaW5lU2VnbWVudHMpe3JlbmRlcmVyLnNldE1vZGUoMSk7fWVsc2UgaWYob2JqZWN0LmlzTGluZUxvb3Ape3JlbmRlcmVyLnNldE1vZGUoMik7fWVsc2Uge3JlbmRlcmVyLnNldE1vZGUoMyk7fX1lbHNlIGlmKG9iamVjdC5pc1BvaW50cyl7cmVuZGVyZXIuc2V0TW9kZSgwKTt9ZWxzZSBpZihvYmplY3QuaXNTcHJpdGUpe3JlbmRlcmVyLnNldE1vZGUoNCk7fWlmKG9iamVjdC5pc0luc3RhbmNlZE1lc2gpe3JlbmRlcmVyLnJlbmRlckluc3RhbmNlcyhkcmF3U3RhcnQsZHJhd0NvdW50LG9iamVjdC5jb3VudCk7fWVsc2UgaWYoZ2VvbWV0cnkuaXNJbnN0YW5jZWRCdWZmZXJHZW9tZXRyeSl7Y29uc3QgaW5zdGFuY2VDb3VudD1NYXRoLm1pbihnZW9tZXRyeS5pbnN0YW5jZUNvdW50LGdlb21ldHJ5Ll9tYXhJbnN0YW5jZUNvdW50KTtyZW5kZXJlci5yZW5kZXJJbnN0YW5jZXMoZHJhd1N0YXJ0LGRyYXdDb3VudCxpbnN0YW5jZUNvdW50KTt9ZWxzZSB7cmVuZGVyZXIucmVuZGVyKGRyYXdTdGFydCxkcmF3Q291bnQpO319Oy8vIENvbXBpbGUKCXRoaXMuY29tcGlsZT1mdW5jdGlvbihzY2VuZSxjYW1lcmEpe2N1cnJlbnRSZW5kZXJTdGF0ZT1yZW5kZXJTdGF0ZXMuZ2V0KHNjZW5lKTtjdXJyZW50UmVuZGVyU3RhdGUuaW5pdCgpO3JlbmRlclN0YXRlU3RhY2sucHVzaChjdXJyZW50UmVuZGVyU3RhdGUpO3NjZW5lLnRyYXZlcnNlVmlzaWJsZShmdW5jdGlvbihvYmplY3Qpe2lmKG9iamVjdC5pc0xpZ2h0JiZvYmplY3QubGF5ZXJzLnRlc3QoY2FtZXJhLmxheWVycykpe2N1cnJlbnRSZW5kZXJTdGF0ZS5wdXNoTGlnaHQob2JqZWN0KTtpZihvYmplY3QuY2FzdFNoYWRvdyl7Y3VycmVudFJlbmRlclN0YXRlLnB1c2hTaGFkb3cob2JqZWN0KTt9fX0pO2N1cnJlbnRSZW5kZXJTdGF0ZS5zZXR1cExpZ2h0cyhfdGhpcy5waHlzaWNhbGx5Q29ycmVjdExpZ2h0cyk7c2NlbmUudHJhdmVyc2UoZnVuY3Rpb24ob2JqZWN0KXtjb25zdCBtYXRlcmlhbD1vYmplY3QubWF0ZXJpYWw7aWYobWF0ZXJpYWwpe2lmKEFycmF5LmlzQXJyYXkobWF0ZXJpYWwpKXtmb3IobGV0IGk9MDtpPG1hdGVyaWFsLmxlbmd0aDtpKyspe2NvbnN0IG1hdGVyaWFsMj1tYXRlcmlhbFtpXTtnZXRQcm9ncmFtKG1hdGVyaWFsMixzY2VuZSxvYmplY3QpO319ZWxzZSB7Z2V0UHJvZ3JhbShtYXRlcmlhbCxzY2VuZSxvYmplY3QpO319fSk7cmVuZGVyU3RhdGVTdGFjay5wb3AoKTtjdXJyZW50UmVuZGVyU3RhdGU9bnVsbDt9Oy8vIEFuaW1hdGlvbiBMb29wCglsZXQgb25BbmltYXRpb25GcmFtZUNhbGxiYWNrPW51bGw7ZnVuY3Rpb24gb25BbmltYXRpb25GcmFtZSh0aW1lKXtpZihvbkFuaW1hdGlvbkZyYW1lQ2FsbGJhY2spb25BbmltYXRpb25GcmFtZUNhbGxiYWNrKHRpbWUpO31mdW5jdGlvbiBvblhSU2Vzc2lvblN0YXJ0KCl7YW5pbWF0aW9uLnN0b3AoKTt9ZnVuY3Rpb24gb25YUlNlc3Npb25FbmQoKXthbmltYXRpb24uc3RhcnQoKTt9Y29uc3QgYW5pbWF0aW9uPW5ldyBXZWJHTEFuaW1hdGlvbigpO2FuaW1hdGlvbi5zZXRBbmltYXRpb25Mb29wKG9uQW5pbWF0aW9uRnJhbWUpO2lmKHR5cGVvZiB3aW5kb3chPT0ndW5kZWZpbmVkJylhbmltYXRpb24uc2V0Q29udGV4dCh3aW5kb3cpO3RoaXMuc2V0QW5pbWF0aW9uTG9vcD1mdW5jdGlvbihjYWxsYmFjayl7b25BbmltYXRpb25GcmFtZUNhbGxiYWNrPWNhbGxiYWNrO3hyLnNldEFuaW1hdGlvbkxvb3AoY2FsbGJhY2spO2NhbGxiYWNrPT09bnVsbD9hbmltYXRpb24uc3RvcCgpOmFuaW1hdGlvbi5zdGFydCgpO307eHIuYWRkRXZlbnRMaXN0ZW5lcignc2Vzc2lvbnN0YXJ0JyxvblhSU2Vzc2lvblN0YXJ0KTt4ci5hZGRFdmVudExpc3RlbmVyKCdzZXNzaW9uZW5kJyxvblhSU2Vzc2lvbkVuZCk7Ly8gUmVuZGVyaW5nCgl0aGlzLnJlbmRlcj1mdW5jdGlvbihzY2VuZSxjYW1lcmEpe2lmKGNhbWVyYSE9PXVuZGVmaW5lZCYmY2FtZXJhLmlzQ2FtZXJhIT09dHJ1ZSl7Y29uc29sZS5lcnJvcignVEhSRUUuV2ViR0xSZW5kZXJlci5yZW5kZXI6IGNhbWVyYSBpcyBub3QgYW4gaW5zdGFuY2Ugb2YgVEhSRUUuQ2FtZXJhLicpO3JldHVybjt9aWYoX2lzQ29udGV4dExvc3Q9PT10cnVlKXJldHVybjsvLyB1cGRhdGUgc2NlbmUgZ3JhcGgKCWlmKHNjZW5lLmF1dG9VcGRhdGU9PT10cnVlKXNjZW5lLnVwZGF0ZU1hdHJpeFdvcmxkKCk7Ly8gdXBkYXRlIGNhbWVyYSBtYXRyaWNlcyBhbmQgZnJ1c3R1bQoJaWYoY2FtZXJhLnBhcmVudD09PW51bGwpY2FtZXJhLnVwZGF0ZU1hdHJpeFdvcmxkKCk7aWYoeHIuZW5hYmxlZD09PXRydWUmJnhyLmlzUHJlc2VudGluZz09PXRydWUpe2lmKHhyLmNhbWVyYUF1dG9VcGRhdGU9PT10cnVlKXhyLnVwZGF0ZUNhbWVyYShjYW1lcmEpO2NhbWVyYT14ci5nZXRDYW1lcmEoKTsvLyB1c2UgWFIgY2FtZXJhIGZvciByZW5kZXJpbmcKCX0vLwoJaWYoc2NlbmUuaXNTY2VuZT09PXRydWUpc2NlbmUub25CZWZvcmVSZW5kZXIoX3RoaXMsc2NlbmUsY2FtZXJhLF9jdXJyZW50UmVuZGVyVGFyZ2V0KTtjdXJyZW50UmVuZGVyU3RhdGU9cmVuZGVyU3RhdGVzLmdldChzY2VuZSxyZW5kZXJTdGF0ZVN0YWNrLmxlbmd0aCk7Y3VycmVudFJlbmRlclN0YXRlLmluaXQoKTtyZW5kZXJTdGF0ZVN0YWNrLnB1c2goY3VycmVudFJlbmRlclN0YXRlKTtfcHJvalNjcmVlbk1hdHJpeC5tdWx0aXBseU1hdHJpY2VzKGNhbWVyYS5wcm9qZWN0aW9uTWF0cml4LGNhbWVyYS5tYXRyaXhXb3JsZEludmVyc2UpO19mcnVzdHVtLnNldEZyb21Qcm9qZWN0aW9uTWF0cml4KF9wcm9qU2NyZWVuTWF0cml4KTtfbG9jYWxDbGlwcGluZ0VuYWJsZWQ9dGhpcy5sb2NhbENsaXBwaW5nRW5hYmxlZDtfY2xpcHBpbmdFbmFibGVkPWNsaXBwaW5nLmluaXQodGhpcy5jbGlwcGluZ1BsYW5lcyxfbG9jYWxDbGlwcGluZ0VuYWJsZWQsY2FtZXJhKTtjdXJyZW50UmVuZGVyTGlzdD1yZW5kZXJMaXN0cy5nZXQoc2NlbmUscmVuZGVyTGlzdFN0YWNrLmxlbmd0aCk7Y3VycmVudFJlbmRlckxpc3QuaW5pdCgpO3JlbmRlckxpc3RTdGFjay5wdXNoKGN1cnJlbnRSZW5kZXJMaXN0KTtwcm9qZWN0T2JqZWN0KHNjZW5lLGNhbWVyYSwwLF90aGlzLnNvcnRPYmplY3RzKTtjdXJyZW50UmVuZGVyTGlzdC5maW5pc2goKTtpZihfdGhpcy5zb3J0T2JqZWN0cz09PXRydWUpe2N1cnJlbnRSZW5kZXJMaXN0LnNvcnQoX29wYXF1ZVNvcnQsX3RyYW5zcGFyZW50U29ydCk7fS8vCglpZihfY2xpcHBpbmdFbmFibGVkPT09dHJ1ZSljbGlwcGluZy5iZWdpblNoYWRvd3MoKTtjb25zdCBzaGFkb3dzQXJyYXk9Y3VycmVudFJlbmRlclN0YXRlLnN0YXRlLnNoYWRvd3NBcnJheTtzaGFkb3dNYXAucmVuZGVyKHNoYWRvd3NBcnJheSxzY2VuZSxjYW1lcmEpO2lmKF9jbGlwcGluZ0VuYWJsZWQ9PT10cnVlKWNsaXBwaW5nLmVuZFNoYWRvd3MoKTsvLwoJaWYodGhpcy5pbmZvLmF1dG9SZXNldD09PXRydWUpdGhpcy5pbmZvLnJlc2V0KCk7Ly8KCWJhY2tncm91bmQucmVuZGVyKGN1cnJlbnRSZW5kZXJMaXN0LHNjZW5lKTsvLyByZW5kZXIgc2NlbmUKCWN1cnJlbnRSZW5kZXJTdGF0ZS5zZXR1cExpZ2h0cyhfdGhpcy5waHlzaWNhbGx5Q29ycmVjdExpZ2h0cyk7aWYoY2FtZXJhLmlzQXJyYXlDYW1lcmEpe2NvbnN0IGNhbWVyYXM9Y2FtZXJhLmNhbWVyYXM7Zm9yKGxldCBpPTAsbD1jYW1lcmFzLmxlbmd0aDtpPGw7aSsrKXtjb25zdCBjYW1lcmEyPWNhbWVyYXNbaV07cmVuZGVyU2NlbmUoY3VycmVudFJlbmRlckxpc3Qsc2NlbmUsY2FtZXJhMixjYW1lcmEyLnZpZXdwb3J0KTt9fWVsc2Uge3JlbmRlclNjZW5lKGN1cnJlbnRSZW5kZXJMaXN0LHNjZW5lLGNhbWVyYSk7fS8vCglpZihfY3VycmVudFJlbmRlclRhcmdldCE9PW51bGwpey8vIHJlc29sdmUgbXVsdGlzYW1wbGUgcmVuZGVyYnVmZmVycyB0byBhIHNpbmdsZS1zYW1wbGUgdGV4dHVyZSBpZiBuZWNlc3NhcnkKCXRleHR1cmVzLnVwZGF0ZU11bHRpc2FtcGxlUmVuZGVyVGFyZ2V0KF9jdXJyZW50UmVuZGVyVGFyZ2V0KTsvLyBHZW5lcmF0ZSBtaXBtYXAgaWYgd2UncmUgdXNpbmcgYW55IGtpbmQgb2YgbWlwbWFwIGZpbHRlcmluZwoJdGV4dHVyZXMudXBkYXRlUmVuZGVyVGFyZ2V0TWlwbWFwKF9jdXJyZW50UmVuZGVyVGFyZ2V0KTt9Ly8KCWlmKHNjZW5lLmlzU2NlbmU9PT10cnVlKXNjZW5lLm9uQWZ0ZXJSZW5kZXIoX3RoaXMsc2NlbmUsY2FtZXJhKTsvLyBFbnN1cmUgZGVwdGggYnVmZmVyIHdyaXRpbmcgaXMgZW5hYmxlZCBzbyBpdCBjYW4gYmUgY2xlYXJlZCBvbiBuZXh0IHJlbmRlcgoJc3RhdGUuYnVmZmVycy5kZXB0aC5zZXRUZXN0KHRydWUpO3N0YXRlLmJ1ZmZlcnMuZGVwdGguc2V0TWFzayh0cnVlKTtzdGF0ZS5idWZmZXJzLmNvbG9yLnNldE1hc2sodHJ1ZSk7c3RhdGUuc2V0UG9seWdvbk9mZnNldChmYWxzZSk7Ly8gX2dsLmZpbmlzaCgpOwoJYmluZGluZ1N0YXRlcy5yZXNldERlZmF1bHRTdGF0ZSgpO19jdXJyZW50TWF0ZXJpYWxJZD0tMTtfY3VycmVudENhbWVyYT1udWxsO3JlbmRlclN0YXRlU3RhY2sucG9wKCk7aWYocmVuZGVyU3RhdGVTdGFjay5sZW5ndGg+MCl7Y3VycmVudFJlbmRlclN0YXRlPXJlbmRlclN0YXRlU3RhY2tbcmVuZGVyU3RhdGVTdGFjay5sZW5ndGgtMV07fWVsc2Uge2N1cnJlbnRSZW5kZXJTdGF0ZT1udWxsO31yZW5kZXJMaXN0U3RhY2sucG9wKCk7aWYocmVuZGVyTGlzdFN0YWNrLmxlbmd0aD4wKXtjdXJyZW50UmVuZGVyTGlzdD1yZW5kZXJMaXN0U3RhY2tbcmVuZGVyTGlzdFN0YWNrLmxlbmd0aC0xXTt9ZWxzZSB7Y3VycmVudFJlbmRlckxpc3Q9bnVsbDt9fTtmdW5jdGlvbiBwcm9qZWN0T2JqZWN0KG9iamVjdCxjYW1lcmEsZ3JvdXBPcmRlcixzb3J0T2JqZWN0cyl7aWYob2JqZWN0LnZpc2libGU9PT1mYWxzZSlyZXR1cm47Y29uc3QgdmlzaWJsZT1vYmplY3QubGF5ZXJzLnRlc3QoY2FtZXJhLmxheWVycyk7aWYodmlzaWJsZSl7aWYob2JqZWN0LmlzR3JvdXApe2dyb3VwT3JkZXI9b2JqZWN0LnJlbmRlck9yZGVyO31lbHNlIGlmKG9iamVjdC5pc0xPRCl7aWYob2JqZWN0LmF1dG9VcGRhdGU9PT10cnVlKW9iamVjdC51cGRhdGUoY2FtZXJhKTt9ZWxzZSBpZihvYmplY3QuaXNMaWdodCl7Y3VycmVudFJlbmRlclN0YXRlLnB1c2hMaWdodChvYmplY3QpO2lmKG9iamVjdC5jYXN0U2hhZG93KXtjdXJyZW50UmVuZGVyU3RhdGUucHVzaFNoYWRvdyhvYmplY3QpO319ZWxzZSBpZihvYmplY3QuaXNTcHJpdGUpe2lmKCFvYmplY3QuZnJ1c3R1bUN1bGxlZHx8X2ZydXN0dW0uaW50ZXJzZWN0c1Nwcml0ZShvYmplY3QpKXtpZihzb3J0T2JqZWN0cyl7X3ZlY3RvcjMuc2V0RnJvbU1hdHJpeFBvc2l0aW9uKG9iamVjdC5tYXRyaXhXb3JsZCkuYXBwbHlNYXRyaXg0KF9wcm9qU2NyZWVuTWF0cml4KTt9Y29uc3QgZ2VvbWV0cnk9b2JqZWN0cy51cGRhdGUob2JqZWN0KTtjb25zdCBtYXRlcmlhbD1vYmplY3QubWF0ZXJpYWw7aWYobWF0ZXJpYWwudmlzaWJsZSl7Y3VycmVudFJlbmRlckxpc3QucHVzaChvYmplY3QsZ2VvbWV0cnksbWF0ZXJpYWwsZ3JvdXBPcmRlcixfdmVjdG9yMy56LG51bGwpO319fWVsc2UgaWYob2JqZWN0LmlzTWVzaHx8b2JqZWN0LmlzTGluZXx8b2JqZWN0LmlzUG9pbnRzKXtpZihvYmplY3QuaXNTa2lubmVkTWVzaCl7Ly8gdXBkYXRlIHNrZWxldG9uIG9ubHkgb25jZSBpbiBhIGZyYW1lCglpZihvYmplY3Quc2tlbGV0b24uZnJhbWUhPT1pbmZvLnJlbmRlci5mcmFtZSl7b2JqZWN0LnNrZWxldG9uLnVwZGF0ZSgpO29iamVjdC5za2VsZXRvbi5mcmFtZT1pbmZvLnJlbmRlci5mcmFtZTt9fWlmKCFvYmplY3QuZnJ1c3R1bUN1bGxlZHx8X2ZydXN0dW0uaW50ZXJzZWN0c09iamVjdChvYmplY3QpKXtpZihzb3J0T2JqZWN0cyl7X3ZlY3RvcjMuc2V0RnJvbU1hdHJpeFBvc2l0aW9uKG9iamVjdC5tYXRyaXhXb3JsZCkuYXBwbHlNYXRyaXg0KF9wcm9qU2NyZWVuTWF0cml4KTt9Y29uc3QgZ2VvbWV0cnk9b2JqZWN0cy51cGRhdGUob2JqZWN0KTtjb25zdCBtYXRlcmlhbD1vYmplY3QubWF0ZXJpYWw7aWYoQXJyYXkuaXNBcnJheShtYXRlcmlhbCkpe2NvbnN0IGdyb3Vwcz1nZW9tZXRyeS5ncm91cHM7Zm9yKGxldCBpPTAsbD1ncm91cHMubGVuZ3RoO2k8bDtpKyspe2NvbnN0IGdyb3VwPWdyb3Vwc1tpXTtjb25zdCBncm91cE1hdGVyaWFsPW1hdGVyaWFsW2dyb3VwLm1hdGVyaWFsSW5kZXhdO2lmKGdyb3VwTWF0ZXJpYWwmJmdyb3VwTWF0ZXJpYWwudmlzaWJsZSl7Y3VycmVudFJlbmRlckxpc3QucHVzaChvYmplY3QsZ2VvbWV0cnksZ3JvdXBNYXRlcmlhbCxncm91cE9yZGVyLF92ZWN0b3IzLnosZ3JvdXApO319fWVsc2UgaWYobWF0ZXJpYWwudmlzaWJsZSl7Y3VycmVudFJlbmRlckxpc3QucHVzaChvYmplY3QsZ2VvbWV0cnksbWF0ZXJpYWwsZ3JvdXBPcmRlcixfdmVjdG9yMy56LG51bGwpO319fX1jb25zdCBjaGlsZHJlbj1vYmplY3QuY2hpbGRyZW47Zm9yKGxldCBpPTAsbD1jaGlsZHJlbi5sZW5ndGg7aTxsO2krKyl7cHJvamVjdE9iamVjdChjaGlsZHJlbltpXSxjYW1lcmEsZ3JvdXBPcmRlcixzb3J0T2JqZWN0cyk7fX1mdW5jdGlvbiByZW5kZXJTY2VuZShjdXJyZW50UmVuZGVyTGlzdCxzY2VuZSxjYW1lcmEsdmlld3BvcnQpe2NvbnN0IG9wYXF1ZU9iamVjdHM9Y3VycmVudFJlbmRlckxpc3Qub3BhcXVlO2NvbnN0IHRyYW5zbWlzc2l2ZU9iamVjdHM9Y3VycmVudFJlbmRlckxpc3QudHJhbnNtaXNzaXZlO2NvbnN0IHRyYW5zcGFyZW50T2JqZWN0cz1jdXJyZW50UmVuZGVyTGlzdC50cmFuc3BhcmVudDtjdXJyZW50UmVuZGVyU3RhdGUuc2V0dXBMaWdodHNWaWV3KGNhbWVyYSk7aWYodHJhbnNtaXNzaXZlT2JqZWN0cy5sZW5ndGg+MClyZW5kZXJUcmFuc21pc3Npb25QYXNzKG9wYXF1ZU9iamVjdHMsc2NlbmUsY2FtZXJhKTtpZih2aWV3cG9ydClzdGF0ZS52aWV3cG9ydChfY3VycmVudFZpZXdwb3J0LmNvcHkodmlld3BvcnQpKTtpZihvcGFxdWVPYmplY3RzLmxlbmd0aD4wKXJlbmRlck9iamVjdHMob3BhcXVlT2JqZWN0cyxzY2VuZSxjYW1lcmEpO2lmKHRyYW5zbWlzc2l2ZU9iamVjdHMubGVuZ3RoPjApcmVuZGVyT2JqZWN0cyh0cmFuc21pc3NpdmVPYmplY3RzLHNjZW5lLGNhbWVyYSk7aWYodHJhbnNwYXJlbnRPYmplY3RzLmxlbmd0aD4wKXJlbmRlck9iamVjdHModHJhbnNwYXJlbnRPYmplY3RzLHNjZW5lLGNhbWVyYSk7fWZ1bmN0aW9uIHJlbmRlclRyYW5zbWlzc2lvblBhc3Mob3BhcXVlT2JqZWN0cyxzY2VuZSxjYW1lcmEpe2lmKF90cmFuc21pc3Npb25SZW5kZXJUYXJnZXQ9PT1udWxsKXtjb25zdCBuZWVkc0FudGlhbGlhcz1fYW50aWFsaWFzPT09dHJ1ZSYmY2FwYWJpbGl0aWVzLmlzV2ViR0wyPT09dHJ1ZTtjb25zdCByZW5kZXJUYXJnZXRUeXBlPW5lZWRzQW50aWFsaWFzP1dlYkdMTXVsdGlzYW1wbGVSZW5kZXJUYXJnZXQ6V2ViR0xSZW5kZXJUYXJnZXQ7X3RyYW5zbWlzc2lvblJlbmRlclRhcmdldD1uZXcgcmVuZGVyVGFyZ2V0VHlwZSgxMDI0LDEwMjQse2dlbmVyYXRlTWlwbWFwczp0cnVlLHR5cGU6dXRpbHMuY29udmVydChIYWxmRmxvYXRUeXBlKSE9PW51bGw/SGFsZkZsb2F0VHlwZTpVbnNpZ25lZEJ5dGVUeXBlLG1pbkZpbHRlcjpMaW5lYXJNaXBtYXBMaW5lYXJGaWx0ZXIsbWFnRmlsdGVyOk5lYXJlc3RGaWx0ZXIsd3JhcFM6Q2xhbXBUb0VkZ2VXcmFwcGluZyx3cmFwVDpDbGFtcFRvRWRnZVdyYXBwaW5nLHVzZVJlbmRlclRvVGV4dHVyZTpleHRlbnNpb25zLmhhcygnV0VCR0xfbXVsdGlzYW1wbGVkX3JlbmRlcl90b190ZXh0dXJlJyl9KTt9Y29uc3QgY3VycmVudFJlbmRlclRhcmdldD1fdGhpcy5nZXRSZW5kZXJUYXJnZXQoKTtfdGhpcy5zZXRSZW5kZXJUYXJnZXQoX3RyYW5zbWlzc2lvblJlbmRlclRhcmdldCk7X3RoaXMuY2xlYXIoKTsvLyBUdXJuIG9mZiB0aGUgZmVhdHVyZXMgd2hpY2ggY2FuIGFmZmVjdCB0aGUgZnJhZyBjb2xvciBmb3Igb3BhcXVlIG9iamVjdHMgcGFzcy4KCS8vIE90aGVyd2lzZSB0aGV5IGFyZSBhcHBsaWVkIHR3aWNlIGluIG9wYXF1ZSBvYmplY3RzIHBhc3MgYW5kIHRyYW5zbWlzc2lvbiBvYmplY3RzIHBhc3MuCgljb25zdCBjdXJyZW50VG9uZU1hcHBpbmc9X3RoaXMudG9uZU1hcHBpbmc7X3RoaXMudG9uZU1hcHBpbmc9Tm9Ub25lTWFwcGluZztyZW5kZXJPYmplY3RzKG9wYXF1ZU9iamVjdHMsc2NlbmUsY2FtZXJhKTtfdGhpcy50b25lTWFwcGluZz1jdXJyZW50VG9uZU1hcHBpbmc7dGV4dHVyZXMudXBkYXRlTXVsdGlzYW1wbGVSZW5kZXJUYXJnZXQoX3RyYW5zbWlzc2lvblJlbmRlclRhcmdldCk7dGV4dHVyZXMudXBkYXRlUmVuZGVyVGFyZ2V0TWlwbWFwKF90cmFuc21pc3Npb25SZW5kZXJUYXJnZXQpO190aGlzLnNldFJlbmRlclRhcmdldChjdXJyZW50UmVuZGVyVGFyZ2V0KTt9ZnVuY3Rpb24gcmVuZGVyT2JqZWN0cyhyZW5kZXJMaXN0LHNjZW5lLGNhbWVyYSl7Y29uc3Qgb3ZlcnJpZGVNYXRlcmlhbD1zY2VuZS5pc1NjZW5lPT09dHJ1ZT9zY2VuZS5vdmVycmlkZU1hdGVyaWFsOm51bGw7Zm9yKGxldCBpPTAsbD1yZW5kZXJMaXN0Lmxlbmd0aDtpPGw7aSsrKXtjb25zdCByZW5kZXJJdGVtPXJlbmRlckxpc3RbaV07Y29uc3Qgb2JqZWN0PXJlbmRlckl0ZW0ub2JqZWN0O2NvbnN0IGdlb21ldHJ5PXJlbmRlckl0ZW0uZ2VvbWV0cnk7Y29uc3QgbWF0ZXJpYWw9b3ZlcnJpZGVNYXRlcmlhbD09PW51bGw/cmVuZGVySXRlbS5tYXRlcmlhbDpvdmVycmlkZU1hdGVyaWFsO2NvbnN0IGdyb3VwPXJlbmRlckl0ZW0uZ3JvdXA7aWYob2JqZWN0LmxheWVycy50ZXN0KGNhbWVyYS5sYXllcnMpKXtyZW5kZXJPYmplY3Qob2JqZWN0LHNjZW5lLGNhbWVyYSxnZW9tZXRyeSxtYXRlcmlhbCxncm91cCk7fX19ZnVuY3Rpb24gcmVuZGVyT2JqZWN0KG9iamVjdCxzY2VuZSxjYW1lcmEsZ2VvbWV0cnksbWF0ZXJpYWwsZ3JvdXApe29iamVjdC5vbkJlZm9yZVJlbmRlcihfdGhpcyxzY2VuZSxjYW1lcmEsZ2VvbWV0cnksbWF0ZXJpYWwsZ3JvdXApO29iamVjdC5tb2RlbFZpZXdNYXRyaXgubXVsdGlwbHlNYXRyaWNlcyhjYW1lcmEubWF0cml4V29ybGRJbnZlcnNlLG9iamVjdC5tYXRyaXhXb3JsZCk7b2JqZWN0Lm5vcm1hbE1hdHJpeC5nZXROb3JtYWxNYXRyaXgob2JqZWN0Lm1vZGVsVmlld01hdHJpeCk7bWF0ZXJpYWwub25CZWZvcmVSZW5kZXIoX3RoaXMsc2NlbmUsY2FtZXJhLGdlb21ldHJ5LG9iamVjdCxncm91cCk7aWYobWF0ZXJpYWwudHJhbnNwYXJlbnQ9PT10cnVlJiZtYXRlcmlhbC5zaWRlPT09RG91YmxlU2lkZSl7bWF0ZXJpYWwuc2lkZT1CYWNrU2lkZTttYXRlcmlhbC5uZWVkc1VwZGF0ZT10cnVlO190aGlzLnJlbmRlckJ1ZmZlckRpcmVjdChjYW1lcmEsc2NlbmUsZ2VvbWV0cnksbWF0ZXJpYWwsb2JqZWN0LGdyb3VwKTttYXRlcmlhbC5zaWRlPUZyb250U2lkZTttYXRlcmlhbC5uZWVkc1VwZGF0ZT10cnVlO190aGlzLnJlbmRlckJ1ZmZlckRpcmVjdChjYW1lcmEsc2NlbmUsZ2VvbWV0cnksbWF0ZXJpYWwsb2JqZWN0LGdyb3VwKTttYXRlcmlhbC5zaWRlPURvdWJsZVNpZGU7fWVsc2Uge190aGlzLnJlbmRlckJ1ZmZlckRpcmVjdChjYW1lcmEsc2NlbmUsZ2VvbWV0cnksbWF0ZXJpYWwsb2JqZWN0LGdyb3VwKTt9b2JqZWN0Lm9uQWZ0ZXJSZW5kZXIoX3RoaXMsc2NlbmUsY2FtZXJhLGdlb21ldHJ5LG1hdGVyaWFsLGdyb3VwKTt9ZnVuY3Rpb24gZ2V0UHJvZ3JhbShtYXRlcmlhbCxzY2VuZSxvYmplY3Qpe2lmKHNjZW5lLmlzU2NlbmUhPT10cnVlKXNjZW5lPV9lbXB0eVNjZW5lOy8vIHNjZW5lIGNvdWxkIGJlIGEgTWVzaCwgTGluZSwgUG9pbnRzLCAuLi4KCWNvbnN0IG1hdGVyaWFsUHJvcGVydGllcz1wcm9wZXJ0aWVzLmdldChtYXRlcmlhbCk7Y29uc3QgbGlnaHRzPWN1cnJlbnRSZW5kZXJTdGF0ZS5zdGF0ZS5saWdodHM7Y29uc3Qgc2hhZG93c0FycmF5PWN1cnJlbnRSZW5kZXJTdGF0ZS5zdGF0ZS5zaGFkb3dzQXJyYXk7Y29uc3QgbGlnaHRzU3RhdGVWZXJzaW9uPWxpZ2h0cy5zdGF0ZS52ZXJzaW9uO2NvbnN0IHBhcmFtZXRlcnM9cHJvZ3JhbUNhY2hlLmdldFBhcmFtZXRlcnMobWF0ZXJpYWwsbGlnaHRzLnN0YXRlLHNoYWRvd3NBcnJheSxzY2VuZSxvYmplY3QpO2NvbnN0IHByb2dyYW1DYWNoZUtleT1wcm9ncmFtQ2FjaGUuZ2V0UHJvZ3JhbUNhY2hlS2V5KHBhcmFtZXRlcnMpO2xldCBwcm9ncmFtcz1tYXRlcmlhbFByb3BlcnRpZXMucHJvZ3JhbXM7Ly8gYWx3YXlzIHVwZGF0ZSBlbnZpcm9ubWVudCBhbmQgZm9nIC0gY2hhbmdpbmcgdGhlc2UgdHJpZ2dlciBhbiBnZXRQcm9ncmFtIGNhbGwsIGJ1dCBpdCdzIHBvc3NpYmxlIHRoYXQgdGhlIHByb2dyYW0gZG9lc24ndCBjaGFuZ2UKCW1hdGVyaWFsUHJvcGVydGllcy5lbnZpcm9ubWVudD1tYXRlcmlhbC5pc01lc2hTdGFuZGFyZE1hdGVyaWFsP3NjZW5lLmVudmlyb25tZW50Om51bGw7bWF0ZXJpYWxQcm9wZXJ0aWVzLmZvZz1zY2VuZS5mb2c7bWF0ZXJpYWxQcm9wZXJ0aWVzLmVudk1hcD0obWF0ZXJpYWwuaXNNZXNoU3RhbmRhcmRNYXRlcmlhbD9jdWJldXZtYXBzOmN1YmVtYXBzKS5nZXQobWF0ZXJpYWwuZW52TWFwfHxtYXRlcmlhbFByb3BlcnRpZXMuZW52aXJvbm1lbnQpO2lmKHByb2dyYW1zPT09dW5kZWZpbmVkKXsvLyBuZXcgbWF0ZXJpYWwKCW1hdGVyaWFsLmFkZEV2ZW50TGlzdGVuZXIoJ2Rpc3Bvc2UnLG9uTWF0ZXJpYWxEaXNwb3NlKTtwcm9ncmFtcz1uZXcgTWFwKCk7bWF0ZXJpYWxQcm9wZXJ0aWVzLnByb2dyYW1zPXByb2dyYW1zO31sZXQgcHJvZ3JhbT1wcm9ncmFtcy5nZXQocHJvZ3JhbUNhY2hlS2V5KTtpZihwcm9ncmFtIT09dW5kZWZpbmVkKXsvLyBlYXJseSBvdXQgaWYgcHJvZ3JhbSBhbmQgbGlnaHQgc3RhdGUgaXMgaWRlbnRpY2FsCglpZihtYXRlcmlhbFByb3BlcnRpZXMuY3VycmVudFByb2dyYW09PT1wcm9ncmFtJiZtYXRlcmlhbFByb3BlcnRpZXMubGlnaHRzU3RhdGVWZXJzaW9uPT09bGlnaHRzU3RhdGVWZXJzaW9uKXt1cGRhdGVDb21tb25NYXRlcmlhbFByb3BlcnRpZXMobWF0ZXJpYWwscGFyYW1ldGVycyk7cmV0dXJuIHByb2dyYW07fX1lbHNlIHtwYXJhbWV0ZXJzLnVuaWZvcm1zPXByb2dyYW1DYWNoZS5nZXRVbmlmb3JtcyhtYXRlcmlhbCk7bWF0ZXJpYWwub25CdWlsZChvYmplY3QscGFyYW1ldGVycyxfdGhpcyk7bWF0ZXJpYWwub25CZWZvcmVDb21waWxlKHBhcmFtZXRlcnMsX3RoaXMpO3Byb2dyYW09cHJvZ3JhbUNhY2hlLmFjcXVpcmVQcm9ncmFtKHBhcmFtZXRlcnMscHJvZ3JhbUNhY2hlS2V5KTtwcm9ncmFtcy5zZXQocHJvZ3JhbUNhY2hlS2V5LHByb2dyYW0pO21hdGVyaWFsUHJvcGVydGllcy51bmlmb3Jtcz1wYXJhbWV0ZXJzLnVuaWZvcm1zO31jb25zdCB1bmlmb3Jtcz1tYXRlcmlhbFByb3BlcnRpZXMudW5pZm9ybXM7aWYoIW1hdGVyaWFsLmlzU2hhZGVyTWF0ZXJpYWwmJiFtYXRlcmlhbC5pc1Jhd1NoYWRlck1hdGVyaWFsfHxtYXRlcmlhbC5jbGlwcGluZz09PXRydWUpe3VuaWZvcm1zLmNsaXBwaW5nUGxhbmVzPWNsaXBwaW5nLnVuaWZvcm07fXVwZGF0ZUNvbW1vbk1hdGVyaWFsUHJvcGVydGllcyhtYXRlcmlhbCxwYXJhbWV0ZXJzKTsvLyBzdG9yZSB0aGUgbGlnaHQgc2V0dXAgaXQgd2FzIGNyZWF0ZWQgZm9yCgltYXRlcmlhbFByb3BlcnRpZXMubmVlZHNMaWdodHM9bWF0ZXJpYWxOZWVkc0xpZ2h0cyhtYXRlcmlhbCk7bWF0ZXJpYWxQcm9wZXJ0aWVzLmxpZ2h0c1N0YXRlVmVyc2lvbj1saWdodHNTdGF0ZVZlcnNpb247aWYobWF0ZXJpYWxQcm9wZXJ0aWVzLm5lZWRzTGlnaHRzKXsvLyB3aXJlIHVwIHRoZSBtYXRlcmlhbCB0byB0aGlzIHJlbmRlcmVyJ3MgbGlnaHRpbmcgc3RhdGUKCXVuaWZvcm1zLmFtYmllbnRMaWdodENvbG9yLnZhbHVlPWxpZ2h0cy5zdGF0ZS5hbWJpZW50O3VuaWZvcm1zLmxpZ2h0UHJvYmUudmFsdWU9bGlnaHRzLnN0YXRlLnByb2JlO3VuaWZvcm1zLmRpcmVjdGlvbmFsTGlnaHRzLnZhbHVlPWxpZ2h0cy5zdGF0ZS5kaXJlY3Rpb25hbDt1bmlmb3Jtcy5kaXJlY3Rpb25hbExpZ2h0U2hhZG93cy52YWx1ZT1saWdodHMuc3RhdGUuZGlyZWN0aW9uYWxTaGFkb3c7dW5pZm9ybXMuc3BvdExpZ2h0cy52YWx1ZT1saWdodHMuc3RhdGUuc3BvdDt1bmlmb3Jtcy5zcG90TGlnaHRTaGFkb3dzLnZhbHVlPWxpZ2h0cy5zdGF0ZS5zcG90U2hhZG93O3VuaWZvcm1zLnJlY3RBcmVhTGlnaHRzLnZhbHVlPWxpZ2h0cy5zdGF0ZS5yZWN0QXJlYTt1bmlmb3Jtcy5sdGNfMS52YWx1ZT1saWdodHMuc3RhdGUucmVjdEFyZWFMVEMxO3VuaWZvcm1zLmx0Y18yLnZhbHVlPWxpZ2h0cy5zdGF0ZS5yZWN0QXJlYUxUQzI7dW5pZm9ybXMucG9pbnRMaWdodHMudmFsdWU9bGlnaHRzLnN0YXRlLnBvaW50O3VuaWZvcm1zLnBvaW50TGlnaHRTaGFkb3dzLnZhbHVlPWxpZ2h0cy5zdGF0ZS5wb2ludFNoYWRvdzt1bmlmb3Jtcy5oZW1pc3BoZXJlTGlnaHRzLnZhbHVlPWxpZ2h0cy5zdGF0ZS5oZW1pO3VuaWZvcm1zLmRpcmVjdGlvbmFsU2hhZG93TWFwLnZhbHVlPWxpZ2h0cy5zdGF0ZS5kaXJlY3Rpb25hbFNoYWRvd01hcDt1bmlmb3Jtcy5kaXJlY3Rpb25hbFNoYWRvd01hdHJpeC52YWx1ZT1saWdodHMuc3RhdGUuZGlyZWN0aW9uYWxTaGFkb3dNYXRyaXg7dW5pZm9ybXMuc3BvdFNoYWRvd01hcC52YWx1ZT1saWdodHMuc3RhdGUuc3BvdFNoYWRvd01hcDt1bmlmb3Jtcy5zcG90U2hhZG93TWF0cml4LnZhbHVlPWxpZ2h0cy5zdGF0ZS5zcG90U2hhZG93TWF0cml4O3VuaWZvcm1zLnBvaW50U2hhZG93TWFwLnZhbHVlPWxpZ2h0cy5zdGF0ZS5wb2ludFNoYWRvd01hcDt1bmlmb3Jtcy5wb2ludFNoYWRvd01hdHJpeC52YWx1ZT1saWdodHMuc3RhdGUucG9pbnRTaGFkb3dNYXRyaXg7Ly8gVE9ETyAoYWJlbG5hdGlvbik6IGFkZCBhcmVhIGxpZ2h0cyBzaGFkb3cgaW5mbyB0byB1bmlmb3JtcwoJfWNvbnN0IHByb2dVbmlmb3Jtcz1wcm9ncmFtLmdldFVuaWZvcm1zKCk7Y29uc3QgdW5pZm9ybXNMaXN0PVdlYkdMVW5pZm9ybXMuc2VxV2l0aFZhbHVlKHByb2dVbmlmb3Jtcy5zZXEsdW5pZm9ybXMpO21hdGVyaWFsUHJvcGVydGllcy5jdXJyZW50UHJvZ3JhbT1wcm9ncmFtO21hdGVyaWFsUHJvcGVydGllcy51bmlmb3Jtc0xpc3Q9dW5pZm9ybXNMaXN0O3JldHVybiBwcm9ncmFtO31mdW5jdGlvbiB1cGRhdGVDb21tb25NYXRlcmlhbFByb3BlcnRpZXMobWF0ZXJpYWwscGFyYW1ldGVycyl7Y29uc3QgbWF0ZXJpYWxQcm9wZXJ0aWVzPXByb3BlcnRpZXMuZ2V0KG1hdGVyaWFsKTttYXRlcmlhbFByb3BlcnRpZXMub3V0cHV0RW5jb2Rpbmc9cGFyYW1ldGVycy5vdXRwdXRFbmNvZGluZzttYXRlcmlhbFByb3BlcnRpZXMuaW5zdGFuY2luZz1wYXJhbWV0ZXJzLmluc3RhbmNpbmc7bWF0ZXJpYWxQcm9wZXJ0aWVzLnNraW5uaW5nPXBhcmFtZXRlcnMuc2tpbm5pbmc7bWF0ZXJpYWxQcm9wZXJ0aWVzLm1vcnBoVGFyZ2V0cz1wYXJhbWV0ZXJzLm1vcnBoVGFyZ2V0czttYXRlcmlhbFByb3BlcnRpZXMubW9ycGhOb3JtYWxzPXBhcmFtZXRlcnMubW9ycGhOb3JtYWxzO21hdGVyaWFsUHJvcGVydGllcy5tb3JwaFRhcmdldHNDb3VudD1wYXJhbWV0ZXJzLm1vcnBoVGFyZ2V0c0NvdW50O21hdGVyaWFsUHJvcGVydGllcy5udW1DbGlwcGluZ1BsYW5lcz1wYXJhbWV0ZXJzLm51bUNsaXBwaW5nUGxhbmVzO21hdGVyaWFsUHJvcGVydGllcy5udW1JbnRlcnNlY3Rpb249cGFyYW1ldGVycy5udW1DbGlwSW50ZXJzZWN0aW9uO21hdGVyaWFsUHJvcGVydGllcy52ZXJ0ZXhBbHBoYXM9cGFyYW1ldGVycy52ZXJ0ZXhBbHBoYXM7bWF0ZXJpYWxQcm9wZXJ0aWVzLnZlcnRleFRhbmdlbnRzPXBhcmFtZXRlcnMudmVydGV4VGFuZ2VudHM7fWZ1bmN0aW9uIHNldFByb2dyYW0oY2FtZXJhLHNjZW5lLGdlb21ldHJ5LG1hdGVyaWFsLG9iamVjdCl7aWYoc2NlbmUuaXNTY2VuZSE9PXRydWUpc2NlbmU9X2VtcHR5U2NlbmU7Ly8gc2NlbmUgY291bGQgYmUgYSBNZXNoLCBMaW5lLCBQb2ludHMsIC4uLgoJdGV4dHVyZXMucmVzZXRUZXh0dXJlVW5pdHMoKTtjb25zdCBmb2c9c2NlbmUuZm9nO2NvbnN0IGVudmlyb25tZW50PW1hdGVyaWFsLmlzTWVzaFN0YW5kYXJkTWF0ZXJpYWw/c2NlbmUuZW52aXJvbm1lbnQ6bnVsbDtjb25zdCBlbmNvZGluZz1fY3VycmVudFJlbmRlclRhcmdldD09PW51bGw/X3RoaXMub3V0cHV0RW5jb2Rpbmc6X2N1cnJlbnRSZW5kZXJUYXJnZXQudGV4dHVyZS5lbmNvZGluZztjb25zdCBlbnZNYXA9KG1hdGVyaWFsLmlzTWVzaFN0YW5kYXJkTWF0ZXJpYWw/Y3ViZXV2bWFwczpjdWJlbWFwcykuZ2V0KG1hdGVyaWFsLmVudk1hcHx8ZW52aXJvbm1lbnQpO2NvbnN0IHZlcnRleEFscGhhcz1tYXRlcmlhbC52ZXJ0ZXhDb2xvcnM9PT10cnVlJiYhIWdlb21ldHJ5LmF0dHJpYnV0ZXMuY29sb3ImJmdlb21ldHJ5LmF0dHJpYnV0ZXMuY29sb3IuaXRlbVNpemU9PT00O2NvbnN0IHZlcnRleFRhbmdlbnRzPSEhbWF0ZXJpYWwubm9ybWFsTWFwJiYhIWdlb21ldHJ5LmF0dHJpYnV0ZXMudGFuZ2VudDtjb25zdCBtb3JwaFRhcmdldHM9ISFnZW9tZXRyeS5tb3JwaEF0dHJpYnV0ZXMucG9zaXRpb247Y29uc3QgbW9ycGhOb3JtYWxzPSEhZ2VvbWV0cnkubW9ycGhBdHRyaWJ1dGVzLm5vcm1hbDtjb25zdCBtb3JwaFRhcmdldHNDb3VudD0hIWdlb21ldHJ5Lm1vcnBoQXR0cmlidXRlcy5wb3NpdGlvbj9nZW9tZXRyeS5tb3JwaEF0dHJpYnV0ZXMucG9zaXRpb24ubGVuZ3RoOjA7Y29uc3QgbWF0ZXJpYWxQcm9wZXJ0aWVzPXByb3BlcnRpZXMuZ2V0KG1hdGVyaWFsKTtjb25zdCBsaWdodHM9Y3VycmVudFJlbmRlclN0YXRlLnN0YXRlLmxpZ2h0cztpZihfY2xpcHBpbmdFbmFibGVkPT09dHJ1ZSl7aWYoX2xvY2FsQ2xpcHBpbmdFbmFibGVkPT09dHJ1ZXx8Y2FtZXJhIT09X2N1cnJlbnRDYW1lcmEpe2NvbnN0IHVzZUNhY2hlPWNhbWVyYT09PV9jdXJyZW50Q2FtZXJhJiZtYXRlcmlhbC5pZD09PV9jdXJyZW50TWF0ZXJpYWxJZDsvLyB3ZSBtaWdodCB3YW50IHRvIGNhbGwgdGhpcyBmdW5jdGlvbiB3aXRoIHNvbWUgQ2xpcHBpbmdHcm91cAoJLy8gb2JqZWN0IGluc3RlYWQgb2YgdGhlIG1hdGVyaWFsLCBvbmNlIGl0IGJlY29tZXMgZmVhc2libGUKCS8vICgjODQ2NSwgIzgzNzkpCgljbGlwcGluZy5zZXRTdGF0ZShtYXRlcmlhbCxjYW1lcmEsdXNlQ2FjaGUpO319Ly8KCWxldCBuZWVkc1Byb2dyYW1DaGFuZ2U9ZmFsc2U7aWYobWF0ZXJpYWwudmVyc2lvbj09PW1hdGVyaWFsUHJvcGVydGllcy5fX3ZlcnNpb24pe2lmKG1hdGVyaWFsUHJvcGVydGllcy5uZWVkc0xpZ2h0cyYmbWF0ZXJpYWxQcm9wZXJ0aWVzLmxpZ2h0c1N0YXRlVmVyc2lvbiE9PWxpZ2h0cy5zdGF0ZS52ZXJzaW9uKXtuZWVkc1Byb2dyYW1DaGFuZ2U9dHJ1ZTt9ZWxzZSBpZihtYXRlcmlhbFByb3BlcnRpZXMub3V0cHV0RW5jb2RpbmchPT1lbmNvZGluZyl7bmVlZHNQcm9ncmFtQ2hhbmdlPXRydWU7fWVsc2UgaWYob2JqZWN0LmlzSW5zdGFuY2VkTWVzaCYmbWF0ZXJpYWxQcm9wZXJ0aWVzLmluc3RhbmNpbmc9PT1mYWxzZSl7bmVlZHNQcm9ncmFtQ2hhbmdlPXRydWU7fWVsc2UgaWYoIW9iamVjdC5pc0luc3RhbmNlZE1lc2gmJm1hdGVyaWFsUHJvcGVydGllcy5pbnN0YW5jaW5nPT09dHJ1ZSl7bmVlZHNQcm9ncmFtQ2hhbmdlPXRydWU7fWVsc2UgaWYob2JqZWN0LmlzU2tpbm5lZE1lc2gmJm1hdGVyaWFsUHJvcGVydGllcy5za2lubmluZz09PWZhbHNlKXtuZWVkc1Byb2dyYW1DaGFuZ2U9dHJ1ZTt9ZWxzZSBpZighb2JqZWN0LmlzU2tpbm5lZE1lc2gmJm1hdGVyaWFsUHJvcGVydGllcy5za2lubmluZz09PXRydWUpe25lZWRzUHJvZ3JhbUNoYW5nZT10cnVlO31lbHNlIGlmKG1hdGVyaWFsUHJvcGVydGllcy5lbnZNYXAhPT1lbnZNYXApe25lZWRzUHJvZ3JhbUNoYW5nZT10cnVlO31lbHNlIGlmKG1hdGVyaWFsLmZvZyYmbWF0ZXJpYWxQcm9wZXJ0aWVzLmZvZyE9PWZvZyl7bmVlZHNQcm9ncmFtQ2hhbmdlPXRydWU7fWVsc2UgaWYobWF0ZXJpYWxQcm9wZXJ0aWVzLm51bUNsaXBwaW5nUGxhbmVzIT09dW5kZWZpbmVkJiYobWF0ZXJpYWxQcm9wZXJ0aWVzLm51bUNsaXBwaW5nUGxhbmVzIT09Y2xpcHBpbmcubnVtUGxhbmVzfHxtYXRlcmlhbFByb3BlcnRpZXMubnVtSW50ZXJzZWN0aW9uIT09Y2xpcHBpbmcubnVtSW50ZXJzZWN0aW9uKSl7bmVlZHNQcm9ncmFtQ2hhbmdlPXRydWU7fWVsc2UgaWYobWF0ZXJpYWxQcm9wZXJ0aWVzLnZlcnRleEFscGhhcyE9PXZlcnRleEFscGhhcyl7bmVlZHNQcm9ncmFtQ2hhbmdlPXRydWU7fWVsc2UgaWYobWF0ZXJpYWxQcm9wZXJ0aWVzLnZlcnRleFRhbmdlbnRzIT09dmVydGV4VGFuZ2VudHMpe25lZWRzUHJvZ3JhbUNoYW5nZT10cnVlO31lbHNlIGlmKG1hdGVyaWFsUHJvcGVydGllcy5tb3JwaFRhcmdldHMhPT1tb3JwaFRhcmdldHMpe25lZWRzUHJvZ3JhbUNoYW5nZT10cnVlO31lbHNlIGlmKG1hdGVyaWFsUHJvcGVydGllcy5tb3JwaE5vcm1hbHMhPT1tb3JwaE5vcm1hbHMpe25lZWRzUHJvZ3JhbUNoYW5nZT10cnVlO31lbHNlIGlmKGNhcGFiaWxpdGllcy5pc1dlYkdMMj09PXRydWUmJm1hdGVyaWFsUHJvcGVydGllcy5tb3JwaFRhcmdldHNDb3VudCE9PW1vcnBoVGFyZ2V0c0NvdW50KXtuZWVkc1Byb2dyYW1DaGFuZ2U9dHJ1ZTt9fWVsc2Uge25lZWRzUHJvZ3JhbUNoYW5nZT10cnVlO21hdGVyaWFsUHJvcGVydGllcy5fX3ZlcnNpb249bWF0ZXJpYWwudmVyc2lvbjt9Ly8KCWxldCBwcm9ncmFtPW1hdGVyaWFsUHJvcGVydGllcy5jdXJyZW50UHJvZ3JhbTtpZihuZWVkc1Byb2dyYW1DaGFuZ2U9PT10cnVlKXtwcm9ncmFtPWdldFByb2dyYW0obWF0ZXJpYWwsc2NlbmUsb2JqZWN0KTt9bGV0IHJlZnJlc2hQcm9ncmFtPWZhbHNlO2xldCByZWZyZXNoTWF0ZXJpYWw9ZmFsc2U7bGV0IHJlZnJlc2hMaWdodHM9ZmFsc2U7Y29uc3QgcF91bmlmb3Jtcz1wcm9ncmFtLmdldFVuaWZvcm1zKCksbV91bmlmb3Jtcz1tYXRlcmlhbFByb3BlcnRpZXMudW5pZm9ybXM7aWYoc3RhdGUudXNlUHJvZ3JhbShwcm9ncmFtLnByb2dyYW0pKXtyZWZyZXNoUHJvZ3JhbT10cnVlO3JlZnJlc2hNYXRlcmlhbD10cnVlO3JlZnJlc2hMaWdodHM9dHJ1ZTt9aWYobWF0ZXJpYWwuaWQhPT1fY3VycmVudE1hdGVyaWFsSWQpe19jdXJyZW50TWF0ZXJpYWxJZD1tYXRlcmlhbC5pZDtyZWZyZXNoTWF0ZXJpYWw9dHJ1ZTt9aWYocmVmcmVzaFByb2dyYW18fF9jdXJyZW50Q2FtZXJhIT09Y2FtZXJhKXtwX3VuaWZvcm1zLnNldFZhbHVlKF9nbCwncHJvamVjdGlvbk1hdHJpeCcsY2FtZXJhLnByb2plY3Rpb25NYXRyaXgpO2lmKGNhcGFiaWxpdGllcy5sb2dhcml0aG1pY0RlcHRoQnVmZmVyKXtwX3VuaWZvcm1zLnNldFZhbHVlKF9nbCwnbG9nRGVwdGhCdWZGQycsMi4wLyhNYXRoLmxvZyhjYW1lcmEuZmFyKzEuMCkvTWF0aC5MTjIpKTt9aWYoX2N1cnJlbnRDYW1lcmEhPT1jYW1lcmEpe19jdXJyZW50Q2FtZXJhPWNhbWVyYTsvLyBsaWdodGluZyB1bmlmb3JtcyBkZXBlbmQgb24gdGhlIGNhbWVyYSBzbyBlbmZvcmNlIGFuIHVwZGF0ZQoJLy8gbm93LCBpbiBjYXNlIHRoaXMgbWF0ZXJpYWwgc3VwcG9ydHMgbGlnaHRzIC0gb3IgbGF0ZXIsIHdoZW4KCS8vIHRoZSBuZXh0IG1hdGVyaWFsIHRoYXQgZG9lcyBnZXRzIGFjdGl2YXRlZDoKCXJlZnJlc2hNYXRlcmlhbD10cnVlOy8vIHNldCB0byB0cnVlIG9uIG1hdGVyaWFsIGNoYW5nZQoJcmVmcmVzaExpZ2h0cz10cnVlOy8vIHJlbWFpbnMgc2V0IHVudGlsIHVwZGF0ZSBkb25lCgl9Ly8gbG9hZCBtYXRlcmlhbCBzcGVjaWZpYyB1bmlmb3JtcwoJLy8gKHNoYWRlciBtYXRlcmlhbCBhbHNvIGdldHMgdGhlbSBmb3IgdGhlIHNha2Ugb2YgZ2VuZXJpY2l0eSkKCWlmKG1hdGVyaWFsLmlzU2hhZGVyTWF0ZXJpYWx8fG1hdGVyaWFsLmlzTWVzaFBob25nTWF0ZXJpYWx8fG1hdGVyaWFsLmlzTWVzaFRvb25NYXRlcmlhbHx8bWF0ZXJpYWwuaXNNZXNoU3RhbmRhcmRNYXRlcmlhbHx8bWF0ZXJpYWwuZW52TWFwKXtjb25zdCB1Q2FtUG9zPXBfdW5pZm9ybXMubWFwLmNhbWVyYVBvc2l0aW9uO2lmKHVDYW1Qb3MhPT11bmRlZmluZWQpe3VDYW1Qb3Muc2V0VmFsdWUoX2dsLF92ZWN0b3IzLnNldEZyb21NYXRyaXhQb3NpdGlvbihjYW1lcmEubWF0cml4V29ybGQpKTt9fWlmKG1hdGVyaWFsLmlzTWVzaFBob25nTWF0ZXJpYWx8fG1hdGVyaWFsLmlzTWVzaFRvb25NYXRlcmlhbHx8bWF0ZXJpYWwuaXNNZXNoTGFtYmVydE1hdGVyaWFsfHxtYXRlcmlhbC5pc01lc2hCYXNpY01hdGVyaWFsfHxtYXRlcmlhbC5pc01lc2hTdGFuZGFyZE1hdGVyaWFsfHxtYXRlcmlhbC5pc1NoYWRlck1hdGVyaWFsKXtwX3VuaWZvcm1zLnNldFZhbHVlKF9nbCwnaXNPcnRob2dyYXBoaWMnLGNhbWVyYS5pc09ydGhvZ3JhcGhpY0NhbWVyYT09PXRydWUpO31pZihtYXRlcmlhbC5pc01lc2hQaG9uZ01hdGVyaWFsfHxtYXRlcmlhbC5pc01lc2hUb29uTWF0ZXJpYWx8fG1hdGVyaWFsLmlzTWVzaExhbWJlcnRNYXRlcmlhbHx8bWF0ZXJpYWwuaXNNZXNoQmFzaWNNYXRlcmlhbHx8bWF0ZXJpYWwuaXNNZXNoU3RhbmRhcmRNYXRlcmlhbHx8bWF0ZXJpYWwuaXNTaGFkZXJNYXRlcmlhbHx8bWF0ZXJpYWwuaXNTaGFkb3dNYXRlcmlhbHx8b2JqZWN0LmlzU2tpbm5lZE1lc2gpe3BfdW5pZm9ybXMuc2V0VmFsdWUoX2dsLCd2aWV3TWF0cml4JyxjYW1lcmEubWF0cml4V29ybGRJbnZlcnNlKTt9fS8vIHNraW5uaW5nIGFuZCBtb3JwaCB0YXJnZXQgdW5pZm9ybXMgbXVzdCBiZSBzZXQgZXZlbiBpZiBtYXRlcmlhbCBkaWRuJ3QgY2hhbmdlCgkvLyBhdXRvLXNldHRpbmcgb2YgdGV4dHVyZSB1bml0IGZvciBib25lIGFuZCBtb3JwaCB0ZXh0dXJlIG11c3QgZ28gYmVmb3JlIG90aGVyIHRleHR1cmVzCgkvLyBvdGhlcndpc2UgdGV4dHVyZXMgdXNlZCBmb3Igc2tpbm5pbmcgYW5kIG1vcnBoaW5nIGNhbiB0YWtlIG92ZXIgdGV4dHVyZSB1bml0cyByZXNlcnZlZCBmb3Igb3RoZXIgbWF0ZXJpYWwgdGV4dHVyZXMKCWlmKG9iamVjdC5pc1NraW5uZWRNZXNoKXtwX3VuaWZvcm1zLnNldE9wdGlvbmFsKF9nbCxvYmplY3QsJ2JpbmRNYXRyaXgnKTtwX3VuaWZvcm1zLnNldE9wdGlvbmFsKF9nbCxvYmplY3QsJ2JpbmRNYXRyaXhJbnZlcnNlJyk7Y29uc3Qgc2tlbGV0b249b2JqZWN0LnNrZWxldG9uO2lmKHNrZWxldG9uKXtpZihjYXBhYmlsaXRpZXMuZmxvYXRWZXJ0ZXhUZXh0dXJlcyl7aWYoc2tlbGV0b24uYm9uZVRleHR1cmU9PT1udWxsKXNrZWxldG9uLmNvbXB1dGVCb25lVGV4dHVyZSgpO3BfdW5pZm9ybXMuc2V0VmFsdWUoX2dsLCdib25lVGV4dHVyZScsc2tlbGV0b24uYm9uZVRleHR1cmUsdGV4dHVyZXMpO3BfdW5pZm9ybXMuc2V0VmFsdWUoX2dsLCdib25lVGV4dHVyZVNpemUnLHNrZWxldG9uLmJvbmVUZXh0dXJlU2l6ZSk7fWVsc2Uge3BfdW5pZm9ybXMuc2V0T3B0aW9uYWwoX2dsLHNrZWxldG9uLCdib25lTWF0cmljZXMnKTt9fX1pZighIWdlb21ldHJ5JiYoZ2VvbWV0cnkubW9ycGhBdHRyaWJ1dGVzLnBvc2l0aW9uIT09dW5kZWZpbmVkfHxnZW9tZXRyeS5tb3JwaEF0dHJpYnV0ZXMubm9ybWFsIT09dW5kZWZpbmVkKSl7bW9ycGh0YXJnZXRzLnVwZGF0ZShvYmplY3QsZ2VvbWV0cnksbWF0ZXJpYWwscHJvZ3JhbSk7fWlmKHJlZnJlc2hNYXRlcmlhbHx8bWF0ZXJpYWxQcm9wZXJ0aWVzLnJlY2VpdmVTaGFkb3chPT1vYmplY3QucmVjZWl2ZVNoYWRvdyl7bWF0ZXJpYWxQcm9wZXJ0aWVzLnJlY2VpdmVTaGFkb3c9b2JqZWN0LnJlY2VpdmVTaGFkb3c7cF91bmlmb3Jtcy5zZXRWYWx1ZShfZ2wsJ3JlY2VpdmVTaGFkb3cnLG9iamVjdC5yZWNlaXZlU2hhZG93KTt9aWYocmVmcmVzaE1hdGVyaWFsKXtwX3VuaWZvcm1zLnNldFZhbHVlKF9nbCwndG9uZU1hcHBpbmdFeHBvc3VyZScsX3RoaXMudG9uZU1hcHBpbmdFeHBvc3VyZSk7aWYobWF0ZXJpYWxQcm9wZXJ0aWVzLm5lZWRzTGlnaHRzKXsvLyB0aGUgY3VycmVudCBtYXRlcmlhbCByZXF1aXJlcyBsaWdodGluZyBpbmZvCgkvLyBub3RlOiBhbGwgbGlnaHRpbmcgdW5pZm9ybXMgYXJlIGFsd2F5cyBzZXQgY29ycmVjdGx5CgkvLyB0aGV5IHNpbXBseSByZWZlcmVuY2UgdGhlIHJlbmRlcmVyJ3Mgc3RhdGUgZm9yIHRoZWlyCgkvLyB2YWx1ZXMKCS8vCgkvLyB1c2UgdGhlIGN1cnJlbnQgbWF0ZXJpYWwncyAubmVlZHNVcGRhdGUgZmxhZ3MgdG8gc2V0CgkvLyB0aGUgR0wgc3RhdGUgd2hlbiByZXF1aXJlZAoJbWFya1VuaWZvcm1zTGlnaHRzTmVlZHNVcGRhdGUobV91bmlmb3JtcyxyZWZyZXNoTGlnaHRzKTt9Ly8gcmVmcmVzaCB1bmlmb3JtcyBjb21tb24gdG8gc2V2ZXJhbCBtYXRlcmlhbHMKCWlmKGZvZyYmbWF0ZXJpYWwuZm9nKXttYXRlcmlhbHMucmVmcmVzaEZvZ1VuaWZvcm1zKG1fdW5pZm9ybXMsZm9nKTt9bWF0ZXJpYWxzLnJlZnJlc2hNYXRlcmlhbFVuaWZvcm1zKG1fdW5pZm9ybXMsbWF0ZXJpYWwsX3BpeGVsUmF0aW8sX2hlaWdodCxfdHJhbnNtaXNzaW9uUmVuZGVyVGFyZ2V0KTtXZWJHTFVuaWZvcm1zLnVwbG9hZChfZ2wsbWF0ZXJpYWxQcm9wZXJ0aWVzLnVuaWZvcm1zTGlzdCxtX3VuaWZvcm1zLHRleHR1cmVzKTt9aWYobWF0ZXJpYWwuaXNTaGFkZXJNYXRlcmlhbCYmbWF0ZXJpYWwudW5pZm9ybXNOZWVkVXBkYXRlPT09dHJ1ZSl7V2ViR0xVbmlmb3Jtcy51cGxvYWQoX2dsLG1hdGVyaWFsUHJvcGVydGllcy51bmlmb3Jtc0xpc3QsbV91bmlmb3Jtcyx0ZXh0dXJlcyk7bWF0ZXJpYWwudW5pZm9ybXNOZWVkVXBkYXRlPWZhbHNlO31pZihtYXRlcmlhbC5pc1Nwcml0ZU1hdGVyaWFsKXtwX3VuaWZvcm1zLnNldFZhbHVlKF9nbCwnY2VudGVyJyxvYmplY3QuY2VudGVyKTt9Ly8gY29tbW9uIG1hdHJpY2VzCglwX3VuaWZvcm1zLnNldFZhbHVlKF9nbCwnbW9kZWxWaWV3TWF0cml4JyxvYmplY3QubW9kZWxWaWV3TWF0cml4KTtwX3VuaWZvcm1zLnNldFZhbHVlKF9nbCwnbm9ybWFsTWF0cml4JyxvYmplY3Qubm9ybWFsTWF0cml4KTtwX3VuaWZvcm1zLnNldFZhbHVlKF9nbCwnbW9kZWxNYXRyaXgnLG9iamVjdC5tYXRyaXhXb3JsZCk7cmV0dXJuIHByb2dyYW07fS8vIElmIHVuaWZvcm1zIGFyZSBtYXJrZWQgYXMgY2xlYW4sIHRoZXkgZG9uJ3QgbmVlZCB0byBiZSBsb2FkZWQgdG8gdGhlIEdQVS4KCWZ1bmN0aW9uIG1hcmtVbmlmb3Jtc0xpZ2h0c05lZWRzVXBkYXRlKHVuaWZvcm1zLHZhbHVlKXt1bmlmb3Jtcy5hbWJpZW50TGlnaHRDb2xvci5uZWVkc1VwZGF0ZT12YWx1ZTt1bmlmb3Jtcy5saWdodFByb2JlLm5lZWRzVXBkYXRlPXZhbHVlO3VuaWZvcm1zLmRpcmVjdGlvbmFsTGlnaHRzLm5lZWRzVXBkYXRlPXZhbHVlO3VuaWZvcm1zLmRpcmVjdGlvbmFsTGlnaHRTaGFkb3dzLm5lZWRzVXBkYXRlPXZhbHVlO3VuaWZvcm1zLnBvaW50TGlnaHRzLm5lZWRzVXBkYXRlPXZhbHVlO3VuaWZvcm1zLnBvaW50TGlnaHRTaGFkb3dzLm5lZWRzVXBkYXRlPXZhbHVlO3VuaWZvcm1zLnNwb3RMaWdodHMubmVlZHNVcGRhdGU9dmFsdWU7dW5pZm9ybXMuc3BvdExpZ2h0U2hhZG93cy5uZWVkc1VwZGF0ZT12YWx1ZTt1bmlmb3Jtcy5yZWN0QXJlYUxpZ2h0cy5uZWVkc1VwZGF0ZT12YWx1ZTt1bmlmb3Jtcy5oZW1pc3BoZXJlTGlnaHRzLm5lZWRzVXBkYXRlPXZhbHVlO31mdW5jdGlvbiBtYXRlcmlhbE5lZWRzTGlnaHRzKG1hdGVyaWFsKXtyZXR1cm4gbWF0ZXJpYWwuaXNNZXNoTGFtYmVydE1hdGVyaWFsfHxtYXRlcmlhbC5pc01lc2hUb29uTWF0ZXJpYWx8fG1hdGVyaWFsLmlzTWVzaFBob25nTWF0ZXJpYWx8fG1hdGVyaWFsLmlzTWVzaFN0YW5kYXJkTWF0ZXJpYWx8fG1hdGVyaWFsLmlzU2hhZG93TWF0ZXJpYWx8fG1hdGVyaWFsLmlzU2hhZGVyTWF0ZXJpYWwmJm1hdGVyaWFsLmxpZ2h0cz09PXRydWU7fXRoaXMuZ2V0QWN0aXZlQ3ViZUZhY2U9ZnVuY3Rpb24oKXtyZXR1cm4gX2N1cnJlbnRBY3RpdmVDdWJlRmFjZTt9O3RoaXMuZ2V0QWN0aXZlTWlwbWFwTGV2ZWw9ZnVuY3Rpb24oKXtyZXR1cm4gX2N1cnJlbnRBY3RpdmVNaXBtYXBMZXZlbDt9O3RoaXMuZ2V0UmVuZGVyVGFyZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIF9jdXJyZW50UmVuZGVyVGFyZ2V0O307dGhpcy5zZXRSZW5kZXJUYXJnZXRUZXh0dXJlcz1mdW5jdGlvbihyZW5kZXJUYXJnZXQsY29sb3JUZXh0dXJlLGRlcHRoVGV4dHVyZSl7cHJvcGVydGllcy5nZXQocmVuZGVyVGFyZ2V0LnRleHR1cmUpLl9fd2ViZ2xUZXh0dXJlPWNvbG9yVGV4dHVyZTtwcm9wZXJ0aWVzLmdldChyZW5kZXJUYXJnZXQuZGVwdGhUZXh0dXJlKS5fX3dlYmdsVGV4dHVyZT1kZXB0aFRleHR1cmU7Y29uc3QgcmVuZGVyVGFyZ2V0UHJvcGVydGllcz1wcm9wZXJ0aWVzLmdldChyZW5kZXJUYXJnZXQpO3JlbmRlclRhcmdldFByb3BlcnRpZXMuX19oYXNFeHRlcm5hbFRleHR1cmVzPXRydWU7aWYocmVuZGVyVGFyZ2V0UHJvcGVydGllcy5fX2hhc0V4dGVybmFsVGV4dHVyZXMpe3JlbmRlclRhcmdldFByb3BlcnRpZXMuX19hdXRvQWxsb2NhdGVEZXB0aEJ1ZmZlcj1kZXB0aFRleHR1cmU9PT11bmRlZmluZWQ7aWYoIXJlbmRlclRhcmdldFByb3BlcnRpZXMuX19hdXRvQWxsb2NhdGVEZXB0aEJ1ZmZlcil7Ly8gVGhlIG11bHRpc2FtcGxlX3JlbmRlcl90b190ZXh0dXJlIGV4dGVuc2lvbiBkb2Vzbid0IHdvcmsgcHJvcGVybHkgaWYgdGhlcmUKCS8vIGFyZSBtaWRmcmFtZSBmbHVzaGVzIGFuZCBhbiBleHRlcm5hbCBkZXB0aCBidWZmZXIuIERpc2FibGUgdXNlIG9mIHRoZSBleHRlbnNpb24uCglpZihyZW5kZXJUYXJnZXQudXNlUmVuZGVyVG9UZXh0dXJlKXtjb25zb2xlLndhcm4oJ3JlbmRlci10by10ZXh0dXJlIGV4dGVuc2lvbiB3YXMgZGlzYWJsZWQgYmVjYXVzZSBhbiBleHRlcm5hbCB0ZXh0dXJlIHdhcyBwcm92aWRlZCcpO3JlbmRlclRhcmdldC51c2VSZW5kZXJUb1RleHR1cmU9ZmFsc2U7cmVuZGVyVGFyZ2V0LnVzZVJlbmRlcmJ1ZmZlcj10cnVlO319fX07dGhpcy5zZXRSZW5kZXJUYXJnZXRGcmFtZWJ1ZmZlcj1mdW5jdGlvbihyZW5kZXJUYXJnZXQsZGVmYXVsdEZyYW1lYnVmZmVyKXtjb25zdCByZW5kZXJUYXJnZXRQcm9wZXJ0aWVzPXByb3BlcnRpZXMuZ2V0KHJlbmRlclRhcmdldCk7cmVuZGVyVGFyZ2V0UHJvcGVydGllcy5fX3dlYmdsRnJhbWVidWZmZXI9ZGVmYXVsdEZyYW1lYnVmZmVyO3JlbmRlclRhcmdldFByb3BlcnRpZXMuX191c2VEZWZhdWx0RnJhbWVidWZmZXI9ZGVmYXVsdEZyYW1lYnVmZmVyPT09dW5kZWZpbmVkO307dGhpcy5zZXRSZW5kZXJUYXJnZXQ9ZnVuY3Rpb24ocmVuZGVyVGFyZ2V0LGFjdGl2ZUN1YmVGYWNlLGFjdGl2ZU1pcG1hcExldmVsKXtpZihhY3RpdmVDdWJlRmFjZT09PXZvaWQgMCl7YWN0aXZlQ3ViZUZhY2U9MDt9aWYoYWN0aXZlTWlwbWFwTGV2ZWw9PT12b2lkIDApe2FjdGl2ZU1pcG1hcExldmVsPTA7fV9jdXJyZW50UmVuZGVyVGFyZ2V0PXJlbmRlclRhcmdldDtfY3VycmVudEFjdGl2ZUN1YmVGYWNlPWFjdGl2ZUN1YmVGYWNlO19jdXJyZW50QWN0aXZlTWlwbWFwTGV2ZWw9YWN0aXZlTWlwbWFwTGV2ZWw7bGV0IHVzZURlZmF1bHRGcmFtZWJ1ZmZlcj10cnVlO2lmKHJlbmRlclRhcmdldCl7Y29uc3QgcmVuZGVyVGFyZ2V0UHJvcGVydGllcz1wcm9wZXJ0aWVzLmdldChyZW5kZXJUYXJnZXQpO2lmKHJlbmRlclRhcmdldFByb3BlcnRpZXMuX191c2VEZWZhdWx0RnJhbWVidWZmZXIhPT11bmRlZmluZWQpey8vIFdlIG5lZWQgdG8gbWFrZSBzdXJlIHRvIHJlYmluZCB0aGUgZnJhbWVidWZmZXIuCglzdGF0ZS5iaW5kRnJhbWVidWZmZXIoMzYxNjAsbnVsbCk7dXNlRGVmYXVsdEZyYW1lYnVmZmVyPWZhbHNlO31lbHNlIGlmKHJlbmRlclRhcmdldFByb3BlcnRpZXMuX193ZWJnbEZyYW1lYnVmZmVyPT09dW5kZWZpbmVkKXt0ZXh0dXJlcy5zZXR1cFJlbmRlclRhcmdldChyZW5kZXJUYXJnZXQpO31lbHNlIGlmKHJlbmRlclRhcmdldFByb3BlcnRpZXMuX19oYXNFeHRlcm5hbFRleHR1cmVzKXsvLyBDb2xvciBhbmQgZGVwdGggdGV4dHVyZSBtdXN0IGJlIHJlYm91bmQgaW4gb3JkZXIgZm9yIHRoZSBzd2FwY2hhaW4gdG8gdXBkYXRlLgoJdGV4dHVyZXMucmViaW5kVGV4dHVyZXMocmVuZGVyVGFyZ2V0LHByb3BlcnRpZXMuZ2V0KHJlbmRlclRhcmdldC50ZXh0dXJlKS5fX3dlYmdsVGV4dHVyZSxwcm9wZXJ0aWVzLmdldChyZW5kZXJUYXJnZXQuZGVwdGhUZXh0dXJlKS5fX3dlYmdsVGV4dHVyZSk7fX1sZXQgZnJhbWVidWZmZXI9bnVsbDtsZXQgaXNDdWJlPWZhbHNlO2xldCBpc1JlbmRlclRhcmdldDNEPWZhbHNlO2lmKHJlbmRlclRhcmdldCl7Y29uc3QgdGV4dHVyZT1yZW5kZXJUYXJnZXQudGV4dHVyZTtpZih0ZXh0dXJlLmlzRGF0YVRleHR1cmUzRHx8dGV4dHVyZS5pc0RhdGFUZXh0dXJlMkRBcnJheSl7aXNSZW5kZXJUYXJnZXQzRD10cnVlO31jb25zdCBfX3dlYmdsRnJhbWVidWZmZXI9cHJvcGVydGllcy5nZXQocmVuZGVyVGFyZ2V0KS5fX3dlYmdsRnJhbWVidWZmZXI7aWYocmVuZGVyVGFyZ2V0LmlzV2ViR0xDdWJlUmVuZGVyVGFyZ2V0KXtmcmFtZWJ1ZmZlcj1fX3dlYmdsRnJhbWVidWZmZXJbYWN0aXZlQ3ViZUZhY2VdO2lzQ3ViZT10cnVlO31lbHNlIGlmKHJlbmRlclRhcmdldC51c2VSZW5kZXJidWZmZXIpe2ZyYW1lYnVmZmVyPXByb3BlcnRpZXMuZ2V0KHJlbmRlclRhcmdldCkuX193ZWJnbE11bHRpc2FtcGxlZEZyYW1lYnVmZmVyO31lbHNlIHtmcmFtZWJ1ZmZlcj1fX3dlYmdsRnJhbWVidWZmZXI7fV9jdXJyZW50Vmlld3BvcnQuY29weShyZW5kZXJUYXJnZXQudmlld3BvcnQpO19jdXJyZW50U2Npc3Nvci5jb3B5KHJlbmRlclRhcmdldC5zY2lzc29yKTtfY3VycmVudFNjaXNzb3JUZXN0PXJlbmRlclRhcmdldC5zY2lzc29yVGVzdDt9ZWxzZSB7X2N1cnJlbnRWaWV3cG9ydC5jb3B5KF92aWV3cG9ydCkubXVsdGlwbHlTY2FsYXIoX3BpeGVsUmF0aW8pLmZsb29yKCk7X2N1cnJlbnRTY2lzc29yLmNvcHkoX3NjaXNzb3IpLm11bHRpcGx5U2NhbGFyKF9waXhlbFJhdGlvKS5mbG9vcigpO19jdXJyZW50U2Npc3NvclRlc3Q9X3NjaXNzb3JUZXN0O31jb25zdCBmcmFtZWJ1ZmZlckJvdW5kPXN0YXRlLmJpbmRGcmFtZWJ1ZmZlcigzNjE2MCxmcmFtZWJ1ZmZlcik7aWYoZnJhbWVidWZmZXJCb3VuZCYmY2FwYWJpbGl0aWVzLmRyYXdCdWZmZXJzJiZ1c2VEZWZhdWx0RnJhbWVidWZmZXIpe2xldCBuZWVkc1VwZGF0ZT1mYWxzZTtpZihyZW5kZXJUYXJnZXQpe2lmKHJlbmRlclRhcmdldC5pc1dlYkdMTXVsdGlwbGVSZW5kZXJUYXJnZXRzKXtjb25zdCB0ZXh0dXJlcz1yZW5kZXJUYXJnZXQudGV4dHVyZTtpZihfY3VycmVudERyYXdCdWZmZXJzLmxlbmd0aCE9PXRleHR1cmVzLmxlbmd0aHx8X2N1cnJlbnREcmF3QnVmZmVyc1swXSE9PTM2MDY0KXtmb3IobGV0IGk9MCxpbD10ZXh0dXJlcy5sZW5ndGg7aTxpbDtpKyspe19jdXJyZW50RHJhd0J1ZmZlcnNbaV09MzYwNjQraTt9X2N1cnJlbnREcmF3QnVmZmVycy5sZW5ndGg9dGV4dHVyZXMubGVuZ3RoO25lZWRzVXBkYXRlPXRydWU7fX1lbHNlIHtpZihfY3VycmVudERyYXdCdWZmZXJzLmxlbmd0aCE9PTF8fF9jdXJyZW50RHJhd0J1ZmZlcnNbMF0hPT0zNjA2NCl7X2N1cnJlbnREcmF3QnVmZmVyc1swXT0zNjA2NDtfY3VycmVudERyYXdCdWZmZXJzLmxlbmd0aD0xO25lZWRzVXBkYXRlPXRydWU7fX19ZWxzZSB7aWYoX2N1cnJlbnREcmF3QnVmZmVycy5sZW5ndGghPT0xfHxfY3VycmVudERyYXdCdWZmZXJzWzBdIT09MTAyOSl7X2N1cnJlbnREcmF3QnVmZmVyc1swXT0xMDI5O19jdXJyZW50RHJhd0J1ZmZlcnMubGVuZ3RoPTE7bmVlZHNVcGRhdGU9dHJ1ZTt9fWlmKG5lZWRzVXBkYXRlKXtpZihjYXBhYmlsaXRpZXMuaXNXZWJHTDIpe19nbC5kcmF3QnVmZmVycyhfY3VycmVudERyYXdCdWZmZXJzKTt9ZWxzZSB7ZXh0ZW5zaW9ucy5nZXQoJ1dFQkdMX2RyYXdfYnVmZmVycycpLmRyYXdCdWZmZXJzV0VCR0woX2N1cnJlbnREcmF3QnVmZmVycyk7fX19c3RhdGUudmlld3BvcnQoX2N1cnJlbnRWaWV3cG9ydCk7c3RhdGUuc2Npc3NvcihfY3VycmVudFNjaXNzb3IpO3N0YXRlLnNldFNjaXNzb3JUZXN0KF9jdXJyZW50U2Npc3NvclRlc3QpO2lmKGlzQ3ViZSl7Y29uc3QgdGV4dHVyZVByb3BlcnRpZXM9cHJvcGVydGllcy5nZXQocmVuZGVyVGFyZ2V0LnRleHR1cmUpO19nbC5mcmFtZWJ1ZmZlclRleHR1cmUyRCgzNjE2MCwzNjA2NCwzNDA2OSthY3RpdmVDdWJlRmFjZSx0ZXh0dXJlUHJvcGVydGllcy5fX3dlYmdsVGV4dHVyZSxhY3RpdmVNaXBtYXBMZXZlbCk7fWVsc2UgaWYoaXNSZW5kZXJUYXJnZXQzRCl7Y29uc3QgdGV4dHVyZVByb3BlcnRpZXM9cHJvcGVydGllcy5nZXQocmVuZGVyVGFyZ2V0LnRleHR1cmUpO2NvbnN0IGxheWVyPWFjdGl2ZUN1YmVGYWNlfHwwO19nbC5mcmFtZWJ1ZmZlclRleHR1cmVMYXllcigzNjE2MCwzNjA2NCx0ZXh0dXJlUHJvcGVydGllcy5fX3dlYmdsVGV4dHVyZSxhY3RpdmVNaXBtYXBMZXZlbHx8MCxsYXllcik7fV9jdXJyZW50TWF0ZXJpYWxJZD0tMTsvLyByZXNldCBjdXJyZW50IG1hdGVyaWFsIHRvIGVuc3VyZSBjb3JyZWN0IHVuaWZvcm0gYmluZGluZ3MKCX07dGhpcy5yZWFkUmVuZGVyVGFyZ2V0UGl4ZWxzPWZ1bmN0aW9uKHJlbmRlclRhcmdldCx4LHksd2lkdGgsaGVpZ2h0LGJ1ZmZlcixhY3RpdmVDdWJlRmFjZUluZGV4KXtpZighKHJlbmRlclRhcmdldCYmcmVuZGVyVGFyZ2V0LmlzV2ViR0xSZW5kZXJUYXJnZXQpKXtjb25zb2xlLmVycm9yKCdUSFJFRS5XZWJHTFJlbmRlcmVyLnJlYWRSZW5kZXJUYXJnZXRQaXhlbHM6IHJlbmRlclRhcmdldCBpcyBub3QgVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQuJyk7cmV0dXJuO31sZXQgZnJhbWVidWZmZXI9cHJvcGVydGllcy5nZXQocmVuZGVyVGFyZ2V0KS5fX3dlYmdsRnJhbWVidWZmZXI7aWYocmVuZGVyVGFyZ2V0LmlzV2ViR0xDdWJlUmVuZGVyVGFyZ2V0JiZhY3RpdmVDdWJlRmFjZUluZGV4IT09dW5kZWZpbmVkKXtmcmFtZWJ1ZmZlcj1mcmFtZWJ1ZmZlclthY3RpdmVDdWJlRmFjZUluZGV4XTt9aWYoZnJhbWVidWZmZXIpe3N0YXRlLmJpbmRGcmFtZWJ1ZmZlcigzNjE2MCxmcmFtZWJ1ZmZlcik7dHJ5e2NvbnN0IHRleHR1cmU9cmVuZGVyVGFyZ2V0LnRleHR1cmU7Y29uc3QgdGV4dHVyZUZvcm1hdD10ZXh0dXJlLmZvcm1hdDtjb25zdCB0ZXh0dXJlVHlwZT10ZXh0dXJlLnR5cGU7aWYodGV4dHVyZUZvcm1hdCE9PVJHQkFGb3JtYXQmJnV0aWxzLmNvbnZlcnQodGV4dHVyZUZvcm1hdCkhPT1fZ2wuZ2V0UGFyYW1ldGVyKDM1NzM5KSl7Y29uc29sZS5lcnJvcignVEhSRUUuV2ViR0xSZW5kZXJlci5yZWFkUmVuZGVyVGFyZ2V0UGl4ZWxzOiByZW5kZXJUYXJnZXQgaXMgbm90IGluIFJHQkEgb3IgaW1wbGVtZW50YXRpb24gZGVmaW5lZCBmb3JtYXQuJyk7cmV0dXJuO31jb25zdCBoYWxmRmxvYXRTdXBwb3J0ZWRCeUV4dD10ZXh0dXJlVHlwZT09PUhhbGZGbG9hdFR5cGUmJihleHRlbnNpb25zLmhhcygnRVhUX2NvbG9yX2J1ZmZlcl9oYWxmX2Zsb2F0Jyl8fGNhcGFiaWxpdGllcy5pc1dlYkdMMiYmZXh0ZW5zaW9ucy5oYXMoJ0VYVF9jb2xvcl9idWZmZXJfZmxvYXQnKSk7aWYodGV4dHVyZVR5cGUhPT1VbnNpZ25lZEJ5dGVUeXBlJiZ1dGlscy5jb252ZXJ0KHRleHR1cmVUeXBlKSE9PV9nbC5nZXRQYXJhbWV0ZXIoMzU3MzgpJiYvLyBFZGdlIGFuZCBDaHJvbWUgTWFjIDwgNTIgKCM5NTEzKQoJISh0ZXh0dXJlVHlwZT09PUZsb2F0VHlwZSYmKGNhcGFiaWxpdGllcy5pc1dlYkdMMnx8ZXh0ZW5zaW9ucy5oYXMoJ09FU190ZXh0dXJlX2Zsb2F0Jyl8fGV4dGVuc2lvbnMuaGFzKCdXRUJHTF9jb2xvcl9idWZmZXJfZmxvYXQnKSkpJiYvLyBDaHJvbWUgTWFjID49IDUyIGFuZCBGaXJlZm94CgkhaGFsZkZsb2F0U3VwcG9ydGVkQnlFeHQpe2NvbnNvbGUuZXJyb3IoJ1RIUkVFLldlYkdMUmVuZGVyZXIucmVhZFJlbmRlclRhcmdldFBpeGVsczogcmVuZGVyVGFyZ2V0IGlzIG5vdCBpbiBVbnNpZ25lZEJ5dGVUeXBlIG9yIGltcGxlbWVudGF0aW9uIGRlZmluZWQgdHlwZS4nKTtyZXR1cm47fWlmKF9nbC5jaGVja0ZyYW1lYnVmZmVyU3RhdHVzKDM2MTYwKT09PTM2MDUzKXsvLyB0aGUgZm9sbG93aW5nIGlmIHN0YXRlbWVudCBlbnN1cmVzIHZhbGlkIHJlYWQgcmVxdWVzdHMgKG5vIG91dC1vZi1ib3VuZHMgcGl4ZWxzLCBzZWUgIzg2MDQpCglpZih4Pj0wJiZ4PD1yZW5kZXJUYXJnZXQud2lkdGgtd2lkdGgmJnk+PTAmJnk8PXJlbmRlclRhcmdldC5oZWlnaHQtaGVpZ2h0KXtfZ2wucmVhZFBpeGVscyh4LHksd2lkdGgsaGVpZ2h0LHV0aWxzLmNvbnZlcnQodGV4dHVyZUZvcm1hdCksdXRpbHMuY29udmVydCh0ZXh0dXJlVHlwZSksYnVmZmVyKTt9fWVsc2Uge2NvbnNvbGUuZXJyb3IoJ1RIUkVFLldlYkdMUmVuZGVyZXIucmVhZFJlbmRlclRhcmdldFBpeGVsczogcmVhZFBpeGVscyBmcm9tIHJlbmRlclRhcmdldCBmYWlsZWQuIEZyYW1lYnVmZmVyIG5vdCBjb21wbGV0ZS4nKTt9fWZpbmFsbHl7Ly8gcmVzdG9yZSBmcmFtZWJ1ZmZlciBvZiBjdXJyZW50IHJlbmRlciB0YXJnZXQgaWYgbmVjZXNzYXJ5Cgljb25zdCBmcmFtZWJ1ZmZlcj1fY3VycmVudFJlbmRlclRhcmdldCE9PW51bGw/cHJvcGVydGllcy5nZXQoX2N1cnJlbnRSZW5kZXJUYXJnZXQpLl9fd2ViZ2xGcmFtZWJ1ZmZlcjpudWxsO3N0YXRlLmJpbmRGcmFtZWJ1ZmZlcigzNjE2MCxmcmFtZWJ1ZmZlcik7fX19O3RoaXMuY29weUZyYW1lYnVmZmVyVG9UZXh0dXJlPWZ1bmN0aW9uKHBvc2l0aW9uLHRleHR1cmUsbGV2ZWwpe2lmKGxldmVsPT09dm9pZCAwKXtsZXZlbD0wO31jb25zdCBsZXZlbFNjYWxlPU1hdGgucG93KDIsLWxldmVsKTtjb25zdCB3aWR0aD1NYXRoLmZsb29yKHRleHR1cmUuaW1hZ2Uud2lkdGgqbGV2ZWxTY2FsZSk7Y29uc3QgaGVpZ2h0PU1hdGguZmxvb3IodGV4dHVyZS5pbWFnZS5oZWlnaHQqbGV2ZWxTY2FsZSk7bGV0IGdsRm9ybWF0PXV0aWxzLmNvbnZlcnQodGV4dHVyZS5mb3JtYXQpO2lmKGNhcGFiaWxpdGllcy5pc1dlYkdMMil7Ly8gV29ya2Fyb3VuZCBmb3IgaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9MTEyMDEwMAoJLy8gTm90IG5lZWRlZCBpbiBDaHJvbWUgOTMrCglpZihnbEZvcm1hdD09PTY0MDcpZ2xGb3JtYXQ9MzI4NDk7aWYoZ2xGb3JtYXQ9PT02NDA4KWdsRm9ybWF0PTMyODU2O310ZXh0dXJlcy5zZXRUZXh0dXJlMkQodGV4dHVyZSwwKTtfZ2wuY29weVRleEltYWdlMkQoMzU1MyxsZXZlbCxnbEZvcm1hdCxwb3NpdGlvbi54LHBvc2l0aW9uLnksd2lkdGgsaGVpZ2h0LDApO3N0YXRlLnVuYmluZFRleHR1cmUoKTt9O3RoaXMuY29weVRleHR1cmVUb1RleHR1cmU9ZnVuY3Rpb24ocG9zaXRpb24sc3JjVGV4dHVyZSxkc3RUZXh0dXJlLGxldmVsKXtpZihsZXZlbD09PXZvaWQgMCl7bGV2ZWw9MDt9Y29uc3Qgd2lkdGg9c3JjVGV4dHVyZS5pbWFnZS53aWR0aDtjb25zdCBoZWlnaHQ9c3JjVGV4dHVyZS5pbWFnZS5oZWlnaHQ7Y29uc3QgZ2xGb3JtYXQ9dXRpbHMuY29udmVydChkc3RUZXh0dXJlLmZvcm1hdCk7Y29uc3QgZ2xUeXBlPXV0aWxzLmNvbnZlcnQoZHN0VGV4dHVyZS50eXBlKTt0ZXh0dXJlcy5zZXRUZXh0dXJlMkQoZHN0VGV4dHVyZSwwKTsvLyBBcyBhbm90aGVyIHRleHR1cmUgdXBsb2FkIG1heSBoYXZlIGNoYW5nZWQgcGl4ZWxTdG9yZWkKCS8vIHBhcmFtZXRlcnMsIG1ha2Ugc3VyZSB0aGV5IGFyZSBjb3JyZWN0IGZvciB0aGUgZHN0VGV4dHVyZQoJX2dsLnBpeGVsU3RvcmVpKDM3NDQwLGRzdFRleHR1cmUuZmxpcFkpO19nbC5waXhlbFN0b3JlaSgzNzQ0MSxkc3RUZXh0dXJlLnByZW11bHRpcGx5QWxwaGEpO19nbC5waXhlbFN0b3JlaSgzMzE3LGRzdFRleHR1cmUudW5wYWNrQWxpZ25tZW50KTtpZihzcmNUZXh0dXJlLmlzRGF0YVRleHR1cmUpe19nbC50ZXhTdWJJbWFnZTJEKDM1NTMsbGV2ZWwscG9zaXRpb24ueCxwb3NpdGlvbi55LHdpZHRoLGhlaWdodCxnbEZvcm1hdCxnbFR5cGUsc3JjVGV4dHVyZS5pbWFnZS5kYXRhKTt9ZWxzZSB7aWYoc3JjVGV4dHVyZS5pc0NvbXByZXNzZWRUZXh0dXJlKXtfZ2wuY29tcHJlc3NlZFRleFN1YkltYWdlMkQoMzU1MyxsZXZlbCxwb3NpdGlvbi54LHBvc2l0aW9uLnksc3JjVGV4dHVyZS5taXBtYXBzWzBdLndpZHRoLHNyY1RleHR1cmUubWlwbWFwc1swXS5oZWlnaHQsZ2xGb3JtYXQsc3JjVGV4dHVyZS5taXBtYXBzWzBdLmRhdGEpO31lbHNlIHtfZ2wudGV4U3ViSW1hZ2UyRCgzNTUzLGxldmVsLHBvc2l0aW9uLngscG9zaXRpb24ueSxnbEZvcm1hdCxnbFR5cGUsc3JjVGV4dHVyZS5pbWFnZSk7fX0vLyBHZW5lcmF0ZSBtaXBtYXBzIG9ubHkgd2hlbiBjb3B5aW5nIGxldmVsIDAKCWlmKGxldmVsPT09MCYmZHN0VGV4dHVyZS5nZW5lcmF0ZU1pcG1hcHMpX2dsLmdlbmVyYXRlTWlwbWFwKDM1NTMpO3N0YXRlLnVuYmluZFRleHR1cmUoKTt9O3RoaXMuY29weVRleHR1cmVUb1RleHR1cmUzRD1mdW5jdGlvbihzb3VyY2VCb3gscG9zaXRpb24sc3JjVGV4dHVyZSxkc3RUZXh0dXJlLGxldmVsKXtpZihsZXZlbD09PXZvaWQgMCl7bGV2ZWw9MDt9aWYoX3RoaXMuaXNXZWJHTDFSZW5kZXJlcil7Y29uc29sZS53YXJuKCdUSFJFRS5XZWJHTFJlbmRlcmVyLmNvcHlUZXh0dXJlVG9UZXh0dXJlM0Q6IGNhbiBvbmx5IGJlIHVzZWQgd2l0aCBXZWJHTDIuJyk7cmV0dXJuO31jb25zdCB3aWR0aD1zb3VyY2VCb3gubWF4Lngtc291cmNlQm94Lm1pbi54KzE7Y29uc3QgaGVpZ2h0PXNvdXJjZUJveC5tYXgueS1zb3VyY2VCb3gubWluLnkrMTtjb25zdCBkZXB0aD1zb3VyY2VCb3gubWF4Lnotc291cmNlQm94Lm1pbi56KzE7Y29uc3QgZ2xGb3JtYXQ9dXRpbHMuY29udmVydChkc3RUZXh0dXJlLmZvcm1hdCk7Y29uc3QgZ2xUeXBlPXV0aWxzLmNvbnZlcnQoZHN0VGV4dHVyZS50eXBlKTtsZXQgZ2xUYXJnZXQ7aWYoZHN0VGV4dHVyZS5pc0RhdGFUZXh0dXJlM0Qpe3RleHR1cmVzLnNldFRleHR1cmUzRChkc3RUZXh0dXJlLDApO2dsVGFyZ2V0PTMyODc5O31lbHNlIGlmKGRzdFRleHR1cmUuaXNEYXRhVGV4dHVyZTJEQXJyYXkpe3RleHR1cmVzLnNldFRleHR1cmUyREFycmF5KGRzdFRleHR1cmUsMCk7Z2xUYXJnZXQ9MzU4NjY7fWVsc2Uge2NvbnNvbGUud2FybignVEhSRUUuV2ViR0xSZW5kZXJlci5jb3B5VGV4dHVyZVRvVGV4dHVyZTNEOiBvbmx5IHN1cHBvcnRzIFRIUkVFLkRhdGFUZXh0dXJlM0QgYW5kIFRIUkVFLkRhdGFUZXh0dXJlMkRBcnJheS4nKTtyZXR1cm47fV9nbC5waXhlbFN0b3JlaSgzNzQ0MCxkc3RUZXh0dXJlLmZsaXBZKTtfZ2wucGl4ZWxTdG9yZWkoMzc0NDEsZHN0VGV4dHVyZS5wcmVtdWx0aXBseUFscGhhKTtfZ2wucGl4ZWxTdG9yZWkoMzMxNyxkc3RUZXh0dXJlLnVucGFja0FsaWdubWVudCk7Y29uc3QgdW5wYWNrUm93TGVuPV9nbC5nZXRQYXJhbWV0ZXIoMzMxNCk7Y29uc3QgdW5wYWNrSW1hZ2VIZWlnaHQ9X2dsLmdldFBhcmFtZXRlcigzMjg3OCk7Y29uc3QgdW5wYWNrU2tpcFBpeGVscz1fZ2wuZ2V0UGFyYW1ldGVyKDMzMTYpO2NvbnN0IHVucGFja1NraXBSb3dzPV9nbC5nZXRQYXJhbWV0ZXIoMzMxNSk7Y29uc3QgdW5wYWNrU2tpcEltYWdlcz1fZ2wuZ2V0UGFyYW1ldGVyKDMyODc3KTtjb25zdCBpbWFnZT1zcmNUZXh0dXJlLmlzQ29tcHJlc3NlZFRleHR1cmU/c3JjVGV4dHVyZS5taXBtYXBzWzBdOnNyY1RleHR1cmUuaW1hZ2U7X2dsLnBpeGVsU3RvcmVpKDMzMTQsaW1hZ2Uud2lkdGgpO19nbC5waXhlbFN0b3JlaSgzMjg3OCxpbWFnZS5oZWlnaHQpO19nbC5waXhlbFN0b3JlaSgzMzE2LHNvdXJjZUJveC5taW4ueCk7X2dsLnBpeGVsU3RvcmVpKDMzMTUsc291cmNlQm94Lm1pbi55KTtfZ2wucGl4ZWxTdG9yZWkoMzI4Nzcsc291cmNlQm94Lm1pbi56KTtpZihzcmNUZXh0dXJlLmlzRGF0YVRleHR1cmV8fHNyY1RleHR1cmUuaXNEYXRhVGV4dHVyZTNEKXtfZ2wudGV4U3ViSW1hZ2UzRChnbFRhcmdldCxsZXZlbCxwb3NpdGlvbi54LHBvc2l0aW9uLnkscG9zaXRpb24ueix3aWR0aCxoZWlnaHQsZGVwdGgsZ2xGb3JtYXQsZ2xUeXBlLGltYWdlLmRhdGEpO31lbHNlIHtpZihzcmNUZXh0dXJlLmlzQ29tcHJlc3NlZFRleHR1cmUpe2NvbnNvbGUud2FybignVEhSRUUuV2ViR0xSZW5kZXJlci5jb3B5VGV4dHVyZVRvVGV4dHVyZTNEOiB1bnRlc3RlZCBzdXBwb3J0IGZvciBjb21wcmVzc2VkIHNyY1RleHR1cmUuJyk7X2dsLmNvbXByZXNzZWRUZXhTdWJJbWFnZTNEKGdsVGFyZ2V0LGxldmVsLHBvc2l0aW9uLngscG9zaXRpb24ueSxwb3NpdGlvbi56LHdpZHRoLGhlaWdodCxkZXB0aCxnbEZvcm1hdCxpbWFnZS5kYXRhKTt9ZWxzZSB7X2dsLnRleFN1YkltYWdlM0QoZ2xUYXJnZXQsbGV2ZWwscG9zaXRpb24ueCxwb3NpdGlvbi55LHBvc2l0aW9uLnosd2lkdGgsaGVpZ2h0LGRlcHRoLGdsRm9ybWF0LGdsVHlwZSxpbWFnZSk7fX1fZ2wucGl4ZWxTdG9yZWkoMzMxNCx1bnBhY2tSb3dMZW4pO19nbC5waXhlbFN0b3JlaSgzMjg3OCx1bnBhY2tJbWFnZUhlaWdodCk7X2dsLnBpeGVsU3RvcmVpKDMzMTYsdW5wYWNrU2tpcFBpeGVscyk7X2dsLnBpeGVsU3RvcmVpKDMzMTUsdW5wYWNrU2tpcFJvd3MpO19nbC5waXhlbFN0b3JlaSgzMjg3Nyx1bnBhY2tTa2lwSW1hZ2VzKTsvLyBHZW5lcmF0ZSBtaXBtYXBzIG9ubHkgd2hlbiBjb3B5aW5nIGxldmVsIDAKCWlmKGxldmVsPT09MCYmZHN0VGV4dHVyZS5nZW5lcmF0ZU1pcG1hcHMpX2dsLmdlbmVyYXRlTWlwbWFwKGdsVGFyZ2V0KTtzdGF0ZS51bmJpbmRUZXh0dXJlKCk7fTt0aGlzLmluaXRUZXh0dXJlPWZ1bmN0aW9uKHRleHR1cmUpe3RleHR1cmVzLnNldFRleHR1cmUyRCh0ZXh0dXJlLDApO3N0YXRlLnVuYmluZFRleHR1cmUoKTt9O3RoaXMucmVzZXRTdGF0ZT1mdW5jdGlvbigpe19jdXJyZW50QWN0aXZlQ3ViZUZhY2U9MDtfY3VycmVudEFjdGl2ZU1pcG1hcExldmVsPTA7X2N1cnJlbnRSZW5kZXJUYXJnZXQ9bnVsbDtzdGF0ZS5yZXNldCgpO2JpbmRpbmdTdGF0ZXMucmVzZXQoKTt9O2lmKHR5cGVvZiBfX1RIUkVFX0RFVlRPT0xTX18hPT0ndW5kZWZpbmVkJyl7X19USFJFRV9ERVZUT09MU19fLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCdvYnNlcnZlJyx7ZGV0YWlsOnRoaXN9KSk7Ly8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bmRlZgoJfX1XZWJHTFJlbmRlcmVyLnByb3RvdHlwZS5pc1dlYkdMUmVuZGVyZXI9dHJ1ZTtjbGFzcyBXZWJHTDFSZW5kZXJlciBleHRlbmRzIFdlYkdMUmVuZGVyZXJ7fVdlYkdMMVJlbmRlcmVyLnByb3RvdHlwZS5pc1dlYkdMMVJlbmRlcmVyPXRydWU7Y2xhc3MgU2NlbmUgZXh0ZW5kcyBPYmplY3QzRHtjb25zdHJ1Y3Rvcigpe3N1cGVyKCk7dGhpcy50eXBlPSdTY2VuZSc7dGhpcy5iYWNrZ3JvdW5kPW51bGw7dGhpcy5lbnZpcm9ubWVudD1udWxsO3RoaXMuZm9nPW51bGw7dGhpcy5vdmVycmlkZU1hdGVyaWFsPW51bGw7dGhpcy5hdXRvVXBkYXRlPXRydWU7Ly8gY2hlY2tlZCBieSB0aGUgcmVuZGVyZXIKCWlmKHR5cGVvZiBfX1RIUkVFX0RFVlRPT0xTX18hPT0ndW5kZWZpbmVkJyl7X19USFJFRV9ERVZUT09MU19fLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCdvYnNlcnZlJyx7ZGV0YWlsOnRoaXN9KSk7Ly8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bmRlZgoJfX1jb3B5KHNvdXJjZSxyZWN1cnNpdmUpe3N1cGVyLmNvcHkoc291cmNlLHJlY3Vyc2l2ZSk7aWYoc291cmNlLmJhY2tncm91bmQhPT1udWxsKXRoaXMuYmFja2dyb3VuZD1zb3VyY2UuYmFja2dyb3VuZC5jbG9uZSgpO2lmKHNvdXJjZS5lbnZpcm9ubWVudCE9PW51bGwpdGhpcy5lbnZpcm9ubWVudD1zb3VyY2UuZW52aXJvbm1lbnQuY2xvbmUoKTtpZihzb3VyY2UuZm9nIT09bnVsbCl0aGlzLmZvZz1zb3VyY2UuZm9nLmNsb25lKCk7aWYoc291cmNlLm92ZXJyaWRlTWF0ZXJpYWwhPT1udWxsKXRoaXMub3ZlcnJpZGVNYXRlcmlhbD1zb3VyY2Uub3ZlcnJpZGVNYXRlcmlhbC5jbG9uZSgpO3RoaXMuYXV0b1VwZGF0ZT1zb3VyY2UuYXV0b1VwZGF0ZTt0aGlzLm1hdHJpeEF1dG9VcGRhdGU9c291cmNlLm1hdHJpeEF1dG9VcGRhdGU7cmV0dXJuIHRoaXM7fXRvSlNPTihtZXRhKXtjb25zdCBkYXRhPXN1cGVyLnRvSlNPTihtZXRhKTtpZih0aGlzLmZvZyE9PW51bGwpZGF0YS5vYmplY3QuZm9nPXRoaXMuZm9nLnRvSlNPTigpO3JldHVybiBkYXRhO319U2NlbmUucHJvdG90eXBlLmlzU2NlbmU9dHJ1ZTtjbGFzcyBJbnRlcmxlYXZlZEJ1ZmZlcntjb25zdHJ1Y3RvcihhcnJheSxzdHJpZGUpe3RoaXMuYXJyYXk9YXJyYXk7dGhpcy5zdHJpZGU9c3RyaWRlO3RoaXMuY291bnQ9YXJyYXkhPT11bmRlZmluZWQ/YXJyYXkubGVuZ3RoL3N0cmlkZTowO3RoaXMudXNhZ2U9U3RhdGljRHJhd1VzYWdlO3RoaXMudXBkYXRlUmFuZ2U9e29mZnNldDowLGNvdW50Oi0xfTt0aGlzLnZlcnNpb249MDt0aGlzLnV1aWQ9Z2VuZXJhdGVVVUlEKCk7fW9uVXBsb2FkQ2FsbGJhY2soKXt9c2V0IG5lZWRzVXBkYXRlKHZhbHVlKXtpZih2YWx1ZT09PXRydWUpdGhpcy52ZXJzaW9uKys7fXNldFVzYWdlKHZhbHVlKXt0aGlzLnVzYWdlPXZhbHVlO3JldHVybiB0aGlzO31jb3B5KHNvdXJjZSl7dGhpcy5hcnJheT1uZXcgc291cmNlLmFycmF5LmNvbnN0cnVjdG9yKHNvdXJjZS5hcnJheSk7dGhpcy5jb3VudD1zb3VyY2UuY291bnQ7dGhpcy5zdHJpZGU9c291cmNlLnN0cmlkZTt0aGlzLnVzYWdlPXNvdXJjZS51c2FnZTtyZXR1cm4gdGhpczt9Y29weUF0KGluZGV4MSxhdHRyaWJ1dGUsaW5kZXgyKXtpbmRleDEqPXRoaXMuc3RyaWRlO2luZGV4Mio9YXR0cmlidXRlLnN0cmlkZTtmb3IobGV0IGk9MCxsPXRoaXMuc3RyaWRlO2k8bDtpKyspe3RoaXMuYXJyYXlbaW5kZXgxK2ldPWF0dHJpYnV0ZS5hcnJheVtpbmRleDIraV07fXJldHVybiB0aGlzO31zZXQodmFsdWUsb2Zmc2V0KXtpZihvZmZzZXQ9PT12b2lkIDApe29mZnNldD0wO310aGlzLmFycmF5LnNldCh2YWx1ZSxvZmZzZXQpO3JldHVybiB0aGlzO31jbG9uZShkYXRhKXtpZihkYXRhLmFycmF5QnVmZmVycz09PXVuZGVmaW5lZCl7ZGF0YS5hcnJheUJ1ZmZlcnM9e307fWlmKHRoaXMuYXJyYXkuYnVmZmVyLl91dWlkPT09dW5kZWZpbmVkKXt0aGlzLmFycmF5LmJ1ZmZlci5fdXVpZD1nZW5lcmF0ZVVVSUQoKTt9aWYoZGF0YS5hcnJheUJ1ZmZlcnNbdGhpcy5hcnJheS5idWZmZXIuX3V1aWRdPT09dW5kZWZpbmVkKXtkYXRhLmFycmF5QnVmZmVyc1t0aGlzLmFycmF5LmJ1ZmZlci5fdXVpZF09dGhpcy5hcnJheS5zbGljZSgwKS5idWZmZXI7fWNvbnN0IGFycmF5PW5ldyB0aGlzLmFycmF5LmNvbnN0cnVjdG9yKGRhdGEuYXJyYXlCdWZmZXJzW3RoaXMuYXJyYXkuYnVmZmVyLl91dWlkXSk7Y29uc3QgaWI9bmV3IHRoaXMuY29uc3RydWN0b3IoYXJyYXksdGhpcy5zdHJpZGUpO2liLnNldFVzYWdlKHRoaXMudXNhZ2UpO3JldHVybiBpYjt9b25VcGxvYWQoY2FsbGJhY2spe3RoaXMub25VcGxvYWRDYWxsYmFjaz1jYWxsYmFjaztyZXR1cm4gdGhpczt9dG9KU09OKGRhdGEpe2lmKGRhdGEuYXJyYXlCdWZmZXJzPT09dW5kZWZpbmVkKXtkYXRhLmFycmF5QnVmZmVycz17fTt9Ly8gZ2VuZXJhdGUgVVVJRCBmb3IgYXJyYXkgYnVmZmVyIGlmIG5lY2Vzc2FyeQoJaWYodGhpcy5hcnJheS5idWZmZXIuX3V1aWQ9PT11bmRlZmluZWQpe3RoaXMuYXJyYXkuYnVmZmVyLl91dWlkPWdlbmVyYXRlVVVJRCgpO31pZihkYXRhLmFycmF5QnVmZmVyc1t0aGlzLmFycmF5LmJ1ZmZlci5fdXVpZF09PT11bmRlZmluZWQpe2RhdGEuYXJyYXlCdWZmZXJzW3RoaXMuYXJyYXkuYnVmZmVyLl91dWlkXT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChuZXcgVWludDMyQXJyYXkodGhpcy5hcnJheS5idWZmZXIpKTt9Ly8KCXJldHVybiB7dXVpZDp0aGlzLnV1aWQsYnVmZmVyOnRoaXMuYXJyYXkuYnVmZmVyLl91dWlkLHR5cGU6dGhpcy5hcnJheS5jb25zdHJ1Y3Rvci5uYW1lLHN0cmlkZTp0aGlzLnN0cmlkZX07fX1JbnRlcmxlYXZlZEJ1ZmZlci5wcm90b3R5cGUuaXNJbnRlcmxlYXZlZEJ1ZmZlcj10cnVlO2NvbnN0IF92ZWN0b3IkNj0vKkBfX1BVUkVfXyovbmV3IFZlY3RvcjMoKTtjbGFzcyBJbnRlcmxlYXZlZEJ1ZmZlckF0dHJpYnV0ZXtjb25zdHJ1Y3RvcihpbnRlcmxlYXZlZEJ1ZmZlcixpdGVtU2l6ZSxvZmZzZXQsbm9ybWFsaXplZCl7aWYobm9ybWFsaXplZD09PXZvaWQgMCl7bm9ybWFsaXplZD1mYWxzZTt9dGhpcy5uYW1lPScnO3RoaXMuZGF0YT1pbnRlcmxlYXZlZEJ1ZmZlcjt0aGlzLml0ZW1TaXplPWl0ZW1TaXplO3RoaXMub2Zmc2V0PW9mZnNldDt0aGlzLm5vcm1hbGl6ZWQ9bm9ybWFsaXplZD09PXRydWU7fWdldCBjb3VudCgpe3JldHVybiB0aGlzLmRhdGEuY291bnQ7fWdldCBhcnJheSgpe3JldHVybiB0aGlzLmRhdGEuYXJyYXk7fXNldCBuZWVkc1VwZGF0ZSh2YWx1ZSl7dGhpcy5kYXRhLm5lZWRzVXBkYXRlPXZhbHVlO31hcHBseU1hdHJpeDQobSl7Zm9yKGxldCBpPTAsbD10aGlzLmRhdGEuY291bnQ7aTxsO2krKyl7X3ZlY3RvciQ2Lng9dGhpcy5nZXRYKGkpO192ZWN0b3IkNi55PXRoaXMuZ2V0WShpKTtfdmVjdG9yJDYuej10aGlzLmdldFooaSk7X3ZlY3RvciQ2LmFwcGx5TWF0cml4NChtKTt0aGlzLnNldFhZWihpLF92ZWN0b3IkNi54LF92ZWN0b3IkNi55LF92ZWN0b3IkNi56KTt9cmV0dXJuIHRoaXM7fWFwcGx5Tm9ybWFsTWF0cml4KG0pe2ZvcihsZXQgaT0wLGw9dGhpcy5jb3VudDtpPGw7aSsrKXtfdmVjdG9yJDYueD10aGlzLmdldFgoaSk7X3ZlY3RvciQ2Lnk9dGhpcy5nZXRZKGkpO192ZWN0b3IkNi56PXRoaXMuZ2V0WihpKTtfdmVjdG9yJDYuYXBwbHlOb3JtYWxNYXRyaXgobSk7dGhpcy5zZXRYWVooaSxfdmVjdG9yJDYueCxfdmVjdG9yJDYueSxfdmVjdG9yJDYueik7fXJldHVybiB0aGlzO310cmFuc2Zvcm1EaXJlY3Rpb24obSl7Zm9yKGxldCBpPTAsbD10aGlzLmNvdW50O2k8bDtpKyspe192ZWN0b3IkNi54PXRoaXMuZ2V0WChpKTtfdmVjdG9yJDYueT10aGlzLmdldFkoaSk7X3ZlY3RvciQ2Lno9dGhpcy5nZXRaKGkpO192ZWN0b3IkNi50cmFuc2Zvcm1EaXJlY3Rpb24obSk7dGhpcy5zZXRYWVooaSxfdmVjdG9yJDYueCxfdmVjdG9yJDYueSxfdmVjdG9yJDYueik7fXJldHVybiB0aGlzO31zZXRYKGluZGV4LHgpe3RoaXMuZGF0YS5hcnJheVtpbmRleCp0aGlzLmRhdGEuc3RyaWRlK3RoaXMub2Zmc2V0XT14O3JldHVybiB0aGlzO31zZXRZKGluZGV4LHkpe3RoaXMuZGF0YS5hcnJheVtpbmRleCp0aGlzLmRhdGEuc3RyaWRlK3RoaXMub2Zmc2V0KzFdPXk7cmV0dXJuIHRoaXM7fXNldFooaW5kZXgseil7dGhpcy5kYXRhLmFycmF5W2luZGV4KnRoaXMuZGF0YS5zdHJpZGUrdGhpcy5vZmZzZXQrMl09ejtyZXR1cm4gdGhpczt9c2V0VyhpbmRleCx3KXt0aGlzLmRhdGEuYXJyYXlbaW5kZXgqdGhpcy5kYXRhLnN0cmlkZSt0aGlzLm9mZnNldCszXT13O3JldHVybiB0aGlzO31nZXRYKGluZGV4KXtyZXR1cm4gdGhpcy5kYXRhLmFycmF5W2luZGV4KnRoaXMuZGF0YS5zdHJpZGUrdGhpcy5vZmZzZXRdO31nZXRZKGluZGV4KXtyZXR1cm4gdGhpcy5kYXRhLmFycmF5W2luZGV4KnRoaXMuZGF0YS5zdHJpZGUrdGhpcy5vZmZzZXQrMV07fWdldFooaW5kZXgpe3JldHVybiB0aGlzLmRhdGEuYXJyYXlbaW5kZXgqdGhpcy5kYXRhLnN0cmlkZSt0aGlzLm9mZnNldCsyXTt9Z2V0VyhpbmRleCl7cmV0dXJuIHRoaXMuZGF0YS5hcnJheVtpbmRleCp0aGlzLmRhdGEuc3RyaWRlK3RoaXMub2Zmc2V0KzNdO31zZXRYWShpbmRleCx4LHkpe2luZGV4PWluZGV4KnRoaXMuZGF0YS5zdHJpZGUrdGhpcy5vZmZzZXQ7dGhpcy5kYXRhLmFycmF5W2luZGV4KzBdPXg7dGhpcy5kYXRhLmFycmF5W2luZGV4KzFdPXk7cmV0dXJuIHRoaXM7fXNldFhZWihpbmRleCx4LHkseil7aW5kZXg9aW5kZXgqdGhpcy5kYXRhLnN0cmlkZSt0aGlzLm9mZnNldDt0aGlzLmRhdGEuYXJyYXlbaW5kZXgrMF09eDt0aGlzLmRhdGEuYXJyYXlbaW5kZXgrMV09eTt0aGlzLmRhdGEuYXJyYXlbaW5kZXgrMl09ejtyZXR1cm4gdGhpczt9c2V0WFlaVyhpbmRleCx4LHkseix3KXtpbmRleD1pbmRleCp0aGlzLmRhdGEuc3RyaWRlK3RoaXMub2Zmc2V0O3RoaXMuZGF0YS5hcnJheVtpbmRleCswXT14O3RoaXMuZGF0YS5hcnJheVtpbmRleCsxXT15O3RoaXMuZGF0YS5hcnJheVtpbmRleCsyXT16O3RoaXMuZGF0YS5hcnJheVtpbmRleCszXT13O3JldHVybiB0aGlzO31jbG9uZShkYXRhKXtpZihkYXRhPT09dW5kZWZpbmVkKXtjb25zb2xlLmxvZygnVEhSRUUuSW50ZXJsZWF2ZWRCdWZmZXJBdHRyaWJ1dGUuY2xvbmUoKTogQ2xvbmluZyBhbiBpbnRlcmxhdmVkIGJ1ZmZlciBhdHRyaWJ1dGUgd2lsbCBkZWludGVybGVhdmUgYnVmZmVyIGRhdGEuJyk7Y29uc3QgYXJyYXk9W107Zm9yKGxldCBpPTA7aTx0aGlzLmNvdW50O2krKyl7Y29uc3QgaW5kZXg9aSp0aGlzLmRhdGEuc3RyaWRlK3RoaXMub2Zmc2V0O2ZvcihsZXQgaj0wO2o8dGhpcy5pdGVtU2l6ZTtqKyspe2FycmF5LnB1c2godGhpcy5kYXRhLmFycmF5W2luZGV4K2pdKTt9fXJldHVybiBuZXcgQnVmZmVyQXR0cmlidXRlKG5ldyB0aGlzLmFycmF5LmNvbnN0cnVjdG9yKGFycmF5KSx0aGlzLml0ZW1TaXplLHRoaXMubm9ybWFsaXplZCk7fWVsc2Uge2lmKGRhdGEuaW50ZXJsZWF2ZWRCdWZmZXJzPT09dW5kZWZpbmVkKXtkYXRhLmludGVybGVhdmVkQnVmZmVycz17fTt9aWYoZGF0YS5pbnRlcmxlYXZlZEJ1ZmZlcnNbdGhpcy5kYXRhLnV1aWRdPT09dW5kZWZpbmVkKXtkYXRhLmludGVybGVhdmVkQnVmZmVyc1t0aGlzLmRhdGEudXVpZF09dGhpcy5kYXRhLmNsb25lKGRhdGEpO31yZXR1cm4gbmV3IEludGVybGVhdmVkQnVmZmVyQXR0cmlidXRlKGRhdGEuaW50ZXJsZWF2ZWRCdWZmZXJzW3RoaXMuZGF0YS51dWlkXSx0aGlzLml0ZW1TaXplLHRoaXMub2Zmc2V0LHRoaXMubm9ybWFsaXplZCk7fX10b0pTT04oZGF0YSl7aWYoZGF0YT09PXVuZGVmaW5lZCl7Y29uc29sZS5sb2coJ1RIUkVFLkludGVybGVhdmVkQnVmZmVyQXR0cmlidXRlLnRvSlNPTigpOiBTZXJpYWxpemluZyBhbiBpbnRlcmxhdmVkIGJ1ZmZlciBhdHRyaWJ1dGUgd2lsbCBkZWludGVybGVhdmUgYnVmZmVyIGRhdGEuJyk7Y29uc3QgYXJyYXk9W107Zm9yKGxldCBpPTA7aTx0aGlzLmNvdW50O2krKyl7Y29uc3QgaW5kZXg9aSp0aGlzLmRhdGEuc3RyaWRlK3RoaXMub2Zmc2V0O2ZvcihsZXQgaj0wO2o8dGhpcy5pdGVtU2l6ZTtqKyspe2FycmF5LnB1c2godGhpcy5kYXRhLmFycmF5W2luZGV4K2pdKTt9fS8vIGRlaW50ZXJsZWF2ZSBkYXRhIGFuZCBzYXZlIGl0IGFzIGFuIG9yZGluYXJ5IGJ1ZmZlciBhdHRyaWJ1dGUgZm9yIG5vdwoJcmV0dXJuIHtpdGVtU2l6ZTp0aGlzLml0ZW1TaXplLHR5cGU6dGhpcy5hcnJheS5jb25zdHJ1Y3Rvci5uYW1lLGFycmF5OmFycmF5LG5vcm1hbGl6ZWQ6dGhpcy5ub3JtYWxpemVkfTt9ZWxzZSB7Ly8gc2F2ZSBhcyB0cnVlIGludGVybGF2ZWQgYXR0cmlidHVlCglpZihkYXRhLmludGVybGVhdmVkQnVmZmVycz09PXVuZGVmaW5lZCl7ZGF0YS5pbnRlcmxlYXZlZEJ1ZmZlcnM9e307fWlmKGRhdGEuaW50ZXJsZWF2ZWRCdWZmZXJzW3RoaXMuZGF0YS51dWlkXT09PXVuZGVmaW5lZCl7ZGF0YS5pbnRlcmxlYXZlZEJ1ZmZlcnNbdGhpcy5kYXRhLnV1aWRdPXRoaXMuZGF0YS50b0pTT04oZGF0YSk7fXJldHVybiB7aXNJbnRlcmxlYXZlZEJ1ZmZlckF0dHJpYnV0ZTp0cnVlLGl0ZW1TaXplOnRoaXMuaXRlbVNpemUsZGF0YTp0aGlzLmRhdGEudXVpZCxvZmZzZXQ6dGhpcy5vZmZzZXQsbm9ybWFsaXplZDp0aGlzLm5vcm1hbGl6ZWR9O319fUludGVybGVhdmVkQnVmZmVyQXR0cmlidXRlLnByb3RvdHlwZS5pc0ludGVybGVhdmVkQnVmZmVyQXR0cmlidXRlPXRydWU7LyoqCgkgKiBwYXJhbWV0ZXJzID0gewoJICogIGNvbG9yOiA8aGV4PiwKCSAqICBtYXA6IG5ldyBUSFJFRS5UZXh0dXJlKCA8SW1hZ2U+ICksCgkgKiAgYWxwaGFNYXA6IG5ldyBUSFJFRS5UZXh0dXJlKCA8SW1hZ2U+ICksCgkgKiAgcm90YXRpb246IDxmbG9hdD4sCgkgKiAgc2l6ZUF0dGVudWF0aW9uOiA8Ym9vbD4KCSAqIH0KCSAqL2NsYXNzIFNwcml0ZU1hdGVyaWFsIGV4dGVuZHMgTWF0ZXJpYWx7Y29uc3RydWN0b3IocGFyYW1ldGVycyl7c3VwZXIoKTt0aGlzLnR5cGU9J1Nwcml0ZU1hdGVyaWFsJzt0aGlzLmNvbG9yPW5ldyBDb2xvcigweGZmZmZmZik7dGhpcy5tYXA9bnVsbDt0aGlzLmFscGhhTWFwPW51bGw7dGhpcy5yb3RhdGlvbj0wO3RoaXMuc2l6ZUF0dGVudWF0aW9uPXRydWU7dGhpcy50cmFuc3BhcmVudD10cnVlO3RoaXMuc2V0VmFsdWVzKHBhcmFtZXRlcnMpO31jb3B5KHNvdXJjZSl7c3VwZXIuY29weShzb3VyY2UpO3RoaXMuY29sb3IuY29weShzb3VyY2UuY29sb3IpO3RoaXMubWFwPXNvdXJjZS5tYXA7dGhpcy5hbHBoYU1hcD1zb3VyY2UuYWxwaGFNYXA7dGhpcy5yb3RhdGlvbj1zb3VyY2Uucm90YXRpb247dGhpcy5zaXplQXR0ZW51YXRpb249c291cmNlLnNpemVBdHRlbnVhdGlvbjtyZXR1cm4gdGhpczt9fVNwcml0ZU1hdGVyaWFsLnByb3RvdHlwZS5pc1Nwcml0ZU1hdGVyaWFsPXRydWU7bGV0IF9nZW9tZXRyeTtjb25zdCBfaW50ZXJzZWN0UG9pbnQ9LypAX19QVVJFX18qL25ldyBWZWN0b3IzKCk7Y29uc3QgX3dvcmxkU2NhbGU9LypAX19QVVJFX18qL25ldyBWZWN0b3IzKCk7Y29uc3QgX212UG9zaXRpb249LypAX19QVVJFX18qL25ldyBWZWN0b3IzKCk7Y29uc3QgX2FsaWduZWRQb3NpdGlvbj0vKkBfX1BVUkVfXyovbmV3IFZlY3RvcjIoKTtjb25zdCBfcm90YXRlZFBvc2l0aW9uPS8qQF9fUFVSRV9fKi9uZXcgVmVjdG9yMigpO2NvbnN0IF92aWV3V29ybGRNYXRyaXg9LypAX19QVVJFX18qL25ldyBNYXRyaXg0KCk7Y29uc3QgX3ZBPS8qQF9fUFVSRV9fKi9uZXcgVmVjdG9yMygpO2NvbnN0IF92Qj0vKkBfX1BVUkVfXyovbmV3IFZlY3RvcjMoKTtjb25zdCBfdkM9LypAX19QVVJFX18qL25ldyBWZWN0b3IzKCk7Y29uc3QgX3V2QT0vKkBfX1BVUkVfXyovbmV3IFZlY3RvcjIoKTtjb25zdCBfdXZCPS8qQF9fUFVSRV9fKi9uZXcgVmVjdG9yMigpO2NvbnN0IF91dkM9LypAX19QVVJFX18qL25ldyBWZWN0b3IyKCk7Y2xhc3MgU3ByaXRlIGV4dGVuZHMgT2JqZWN0M0R7Y29uc3RydWN0b3IobWF0ZXJpYWwpe3N1cGVyKCk7dGhpcy50eXBlPSdTcHJpdGUnO2lmKF9nZW9tZXRyeT09PXVuZGVmaW5lZCl7X2dlb21ldHJ5PW5ldyBCdWZmZXJHZW9tZXRyeSgpO2NvbnN0IGZsb2F0MzJBcnJheT1uZXcgRmxvYXQzMkFycmF5KFstMC41LC0wLjUsMCwwLDAsMC41LC0wLjUsMCwxLDAsMC41LDAuNSwwLDEsMSwtMC41LDAuNSwwLDAsMV0pO2NvbnN0IGludGVybGVhdmVkQnVmZmVyPW5ldyBJbnRlcmxlYXZlZEJ1ZmZlcihmbG9hdDMyQXJyYXksNSk7X2dlb21ldHJ5LnNldEluZGV4KFswLDEsMiwwLDIsM10pO19nZW9tZXRyeS5zZXRBdHRyaWJ1dGUoJ3Bvc2l0aW9uJyxuZXcgSW50ZXJsZWF2ZWRCdWZmZXJBdHRyaWJ1dGUoaW50ZXJsZWF2ZWRCdWZmZXIsMywwLGZhbHNlKSk7X2dlb21ldHJ5LnNldEF0dHJpYnV0ZSgndXYnLG5ldyBJbnRlcmxlYXZlZEJ1ZmZlckF0dHJpYnV0ZShpbnRlcmxlYXZlZEJ1ZmZlciwyLDMsZmFsc2UpKTt9dGhpcy5nZW9tZXRyeT1fZ2VvbWV0cnk7dGhpcy5tYXRlcmlhbD1tYXRlcmlhbCE9PXVuZGVmaW5lZD9tYXRlcmlhbDpuZXcgU3ByaXRlTWF0ZXJpYWwoKTt0aGlzLmNlbnRlcj1uZXcgVmVjdG9yMigwLjUsMC41KTt9cmF5Y2FzdChyYXljYXN0ZXIsaW50ZXJzZWN0cyl7aWYocmF5Y2FzdGVyLmNhbWVyYT09PW51bGwpe2NvbnNvbGUuZXJyb3IoJ1RIUkVFLlNwcml0ZTogIlJheWNhc3Rlci5jYW1lcmEiIG5lZWRzIHRvIGJlIHNldCBpbiBvcmRlciB0byByYXljYXN0IGFnYWluc3Qgc3ByaXRlcy4nKTt9X3dvcmxkU2NhbGUuc2V0RnJvbU1hdHJpeFNjYWxlKHRoaXMubWF0cml4V29ybGQpO192aWV3V29ybGRNYXRyaXguY29weShyYXljYXN0ZXIuY2FtZXJhLm1hdHJpeFdvcmxkKTt0aGlzLm1vZGVsVmlld01hdHJpeC5tdWx0aXBseU1hdHJpY2VzKHJheWNhc3Rlci5jYW1lcmEubWF0cml4V29ybGRJbnZlcnNlLHRoaXMubWF0cml4V29ybGQpO19tdlBvc2l0aW9uLnNldEZyb21NYXRyaXhQb3NpdGlvbih0aGlzLm1vZGVsVmlld01hdHJpeCk7aWYocmF5Y2FzdGVyLmNhbWVyYS5pc1BlcnNwZWN0aXZlQ2FtZXJhJiZ0aGlzLm1hdGVyaWFsLnNpemVBdHRlbnVhdGlvbj09PWZhbHNlKXtfd29ybGRTY2FsZS5tdWx0aXBseVNjYWxhcigtX212UG9zaXRpb24ueik7fWNvbnN0IHJvdGF0aW9uPXRoaXMubWF0ZXJpYWwucm90YXRpb247bGV0IHNpbixjb3M7aWYocm90YXRpb24hPT0wKXtjb3M9TWF0aC5jb3Mocm90YXRpb24pO3Npbj1NYXRoLnNpbihyb3RhdGlvbik7fWNvbnN0IGNlbnRlcj10aGlzLmNlbnRlcjt0cmFuc2Zvcm1WZXJ0ZXgoX3ZBLnNldCgtMC41LC0wLjUsMCksX212UG9zaXRpb24sY2VudGVyLF93b3JsZFNjYWxlLHNpbixjb3MpO3RyYW5zZm9ybVZlcnRleChfdkIuc2V0KDAuNSwtMC41LDApLF9tdlBvc2l0aW9uLGNlbnRlcixfd29ybGRTY2FsZSxzaW4sY29zKTt0cmFuc2Zvcm1WZXJ0ZXgoX3ZDLnNldCgwLjUsMC41LDApLF9tdlBvc2l0aW9uLGNlbnRlcixfd29ybGRTY2FsZSxzaW4sY29zKTtfdXZBLnNldCgwLDApO191dkIuc2V0KDEsMCk7X3V2Qy5zZXQoMSwxKTsvLyBjaGVjayBmaXJzdCB0cmlhbmdsZQoJbGV0IGludGVyc2VjdD1yYXljYXN0ZXIucmF5LmludGVyc2VjdFRyaWFuZ2xlKF92QSxfdkIsX3ZDLGZhbHNlLF9pbnRlcnNlY3RQb2ludCk7aWYoaW50ZXJzZWN0PT09bnVsbCl7Ly8gY2hlY2sgc2Vjb25kIHRyaWFuZ2xlCgl0cmFuc2Zvcm1WZXJ0ZXgoX3ZCLnNldCgtMC41LDAuNSwwKSxfbXZQb3NpdGlvbixjZW50ZXIsX3dvcmxkU2NhbGUsc2luLGNvcyk7X3V2Qi5zZXQoMCwxKTtpbnRlcnNlY3Q9cmF5Y2FzdGVyLnJheS5pbnRlcnNlY3RUcmlhbmdsZShfdkEsX3ZDLF92QixmYWxzZSxfaW50ZXJzZWN0UG9pbnQpO2lmKGludGVyc2VjdD09PW51bGwpe3JldHVybjt9fWNvbnN0IGRpc3RhbmNlPXJheWNhc3Rlci5yYXkub3JpZ2luLmRpc3RhbmNlVG8oX2ludGVyc2VjdFBvaW50KTtpZihkaXN0YW5jZTxyYXljYXN0ZXIubmVhcnx8ZGlzdGFuY2U+cmF5Y2FzdGVyLmZhcilyZXR1cm47aW50ZXJzZWN0cy5wdXNoKHtkaXN0YW5jZTpkaXN0YW5jZSxwb2ludDpfaW50ZXJzZWN0UG9pbnQuY2xvbmUoKSx1djpUcmlhbmdsZS5nZXRVVihfaW50ZXJzZWN0UG9pbnQsX3ZBLF92QixfdkMsX3V2QSxfdXZCLF91dkMsbmV3IFZlY3RvcjIoKSksZmFjZTpudWxsLG9iamVjdDp0aGlzfSk7fWNvcHkoc291cmNlKXtzdXBlci5jb3B5KHNvdXJjZSk7aWYoc291cmNlLmNlbnRlciE9PXVuZGVmaW5lZCl0aGlzLmNlbnRlci5jb3B5KHNvdXJjZS5jZW50ZXIpO3RoaXMubWF0ZXJpYWw9c291cmNlLm1hdGVyaWFsO3JldHVybiB0aGlzO319U3ByaXRlLnByb3RvdHlwZS5pc1Nwcml0ZT10cnVlO2Z1bmN0aW9uIHRyYW5zZm9ybVZlcnRleCh2ZXJ0ZXhQb3NpdGlvbixtdlBvc2l0aW9uLGNlbnRlcixzY2FsZSxzaW4sY29zKXsvLyBjb21wdXRlIHBvc2l0aW9uIGluIGNhbWVyYSBzcGFjZQoJX2FsaWduZWRQb3NpdGlvbi5zdWJWZWN0b3JzKHZlcnRleFBvc2l0aW9uLGNlbnRlcikuYWRkU2NhbGFyKDAuNSkubXVsdGlwbHkoc2NhbGUpOy8vIHRvIGNoZWNrIGlmIHJvdGF0aW9uIGlzIG5vdCB6ZXJvCglpZihzaW4hPT11bmRlZmluZWQpe19yb3RhdGVkUG9zaXRpb24ueD1jb3MqX2FsaWduZWRQb3NpdGlvbi54LXNpbipfYWxpZ25lZFBvc2l0aW9uLnk7X3JvdGF0ZWRQb3NpdGlvbi55PXNpbipfYWxpZ25lZFBvc2l0aW9uLngrY29zKl9hbGlnbmVkUG9zaXRpb24ueTt9ZWxzZSB7X3JvdGF0ZWRQb3NpdGlvbi5jb3B5KF9hbGlnbmVkUG9zaXRpb24pO312ZXJ0ZXhQb3NpdGlvbi5jb3B5KG12UG9zaXRpb24pO3ZlcnRleFBvc2l0aW9uLngrPV9yb3RhdGVkUG9zaXRpb24ueDt2ZXJ0ZXhQb3NpdGlvbi55Kz1fcm90YXRlZFBvc2l0aW9uLnk7Ly8gdHJhbnNmb3JtIHRvIHdvcmxkIHNwYWNlCgl2ZXJ0ZXhQb3NpdGlvbi5hcHBseU1hdHJpeDQoX3ZpZXdXb3JsZE1hdHJpeCk7fWNvbnN0IF9iYXNlUG9zaXRpb249LypAX19QVVJFX18qL25ldyBWZWN0b3IzKCk7Y29uc3QgX3NraW5JbmRleD0vKkBfX1BVUkVfXyovbmV3IFZlY3RvcjQoKTtjb25zdCBfc2tpbldlaWdodD0vKkBfX1BVUkVfXyovbmV3IFZlY3RvcjQoKTtjb25zdCBfdmVjdG9yJDU9LypAX19QVVJFX18qL25ldyBWZWN0b3IzKCk7Y29uc3QgX21hdHJpeD0vKkBfX1BVUkVfXyovbmV3IE1hdHJpeDQoKTtjbGFzcyBTa2lubmVkTWVzaCBleHRlbmRzIE1lc2h7Y29uc3RydWN0b3IoZ2VvbWV0cnksbWF0ZXJpYWwpe3N1cGVyKGdlb21ldHJ5LG1hdGVyaWFsKTt0aGlzLnR5cGU9J1NraW5uZWRNZXNoJzt0aGlzLmJpbmRNb2RlPSdhdHRhY2hlZCc7dGhpcy5iaW5kTWF0cml4PW5ldyBNYXRyaXg0KCk7dGhpcy5iaW5kTWF0cml4SW52ZXJzZT1uZXcgTWF0cml4NCgpO31jb3B5KHNvdXJjZSl7c3VwZXIuY29weShzb3VyY2UpO3RoaXMuYmluZE1vZGU9c291cmNlLmJpbmRNb2RlO3RoaXMuYmluZE1hdHJpeC5jb3B5KHNvdXJjZS5iaW5kTWF0cml4KTt0aGlzLmJpbmRNYXRyaXhJbnZlcnNlLmNvcHkoc291cmNlLmJpbmRNYXRyaXhJbnZlcnNlKTt0aGlzLnNrZWxldG9uPXNvdXJjZS5za2VsZXRvbjtyZXR1cm4gdGhpczt9YmluZChza2VsZXRvbixiaW5kTWF0cml4KXt0aGlzLnNrZWxldG9uPXNrZWxldG9uO2lmKGJpbmRNYXRyaXg9PT11bmRlZmluZWQpe3RoaXMudXBkYXRlTWF0cml4V29ybGQodHJ1ZSk7dGhpcy5za2VsZXRvbi5jYWxjdWxhdGVJbnZlcnNlcygpO2JpbmRNYXRyaXg9dGhpcy5tYXRyaXhXb3JsZDt9dGhpcy5iaW5kTWF0cml4LmNvcHkoYmluZE1hdHJpeCk7dGhpcy5iaW5kTWF0cml4SW52ZXJzZS5jb3B5KGJpbmRNYXRyaXgpLmludmVydCgpO31wb3NlKCl7dGhpcy5za2VsZXRvbi5wb3NlKCk7fW5vcm1hbGl6ZVNraW5XZWlnaHRzKCl7Y29uc3QgdmVjdG9yPW5ldyBWZWN0b3I0KCk7Y29uc3Qgc2tpbldlaWdodD10aGlzLmdlb21ldHJ5LmF0dHJpYnV0ZXMuc2tpbldlaWdodDtmb3IobGV0IGk9MCxsPXNraW5XZWlnaHQuY291bnQ7aTxsO2krKyl7dmVjdG9yLng9c2tpbldlaWdodC5nZXRYKGkpO3ZlY3Rvci55PXNraW5XZWlnaHQuZ2V0WShpKTt2ZWN0b3Iuej1za2luV2VpZ2h0LmdldFooaSk7dmVjdG9yLnc9c2tpbldlaWdodC5nZXRXKGkpO2NvbnN0IHNjYWxlPTEuMC92ZWN0b3IubWFuaGF0dGFuTGVuZ3RoKCk7aWYoc2NhbGUhPT1JbmZpbml0eSl7dmVjdG9yLm11bHRpcGx5U2NhbGFyKHNjYWxlKTt9ZWxzZSB7dmVjdG9yLnNldCgxLDAsMCwwKTsvLyBkbyBzb21ldGhpbmcgcmVhc29uYWJsZQoJfXNraW5XZWlnaHQuc2V0WFlaVyhpLHZlY3Rvci54LHZlY3Rvci55LHZlY3Rvci56LHZlY3Rvci53KTt9fXVwZGF0ZU1hdHJpeFdvcmxkKGZvcmNlKXtzdXBlci51cGRhdGVNYXRyaXhXb3JsZChmb3JjZSk7aWYodGhpcy5iaW5kTW9kZT09PSdhdHRhY2hlZCcpe3RoaXMuYmluZE1hdHJpeEludmVyc2UuY29weSh0aGlzLm1hdHJpeFdvcmxkKS5pbnZlcnQoKTt9ZWxzZSBpZih0aGlzLmJpbmRNb2RlPT09J2RldGFjaGVkJyl7dGhpcy5iaW5kTWF0cml4SW52ZXJzZS5jb3B5KHRoaXMuYmluZE1hdHJpeCkuaW52ZXJ0KCk7fWVsc2Uge2NvbnNvbGUud2FybignVEhSRUUuU2tpbm5lZE1lc2g6IFVucmVjb2duaXplZCBiaW5kTW9kZTogJyt0aGlzLmJpbmRNb2RlKTt9fWJvbmVUcmFuc2Zvcm0oaW5kZXgsdGFyZ2V0KXtjb25zdCBza2VsZXRvbj10aGlzLnNrZWxldG9uO2NvbnN0IGdlb21ldHJ5PXRoaXMuZ2VvbWV0cnk7X3NraW5JbmRleC5mcm9tQnVmZmVyQXR0cmlidXRlKGdlb21ldHJ5LmF0dHJpYnV0ZXMuc2tpbkluZGV4LGluZGV4KTtfc2tpbldlaWdodC5mcm9tQnVmZmVyQXR0cmlidXRlKGdlb21ldHJ5LmF0dHJpYnV0ZXMuc2tpbldlaWdodCxpbmRleCk7X2Jhc2VQb3NpdGlvbi5jb3B5KHRhcmdldCkuYXBwbHlNYXRyaXg0KHRoaXMuYmluZE1hdHJpeCk7dGFyZ2V0LnNldCgwLDAsMCk7Zm9yKGxldCBpPTA7aTw0O2krKyl7Y29uc3Qgd2VpZ2h0PV9za2luV2VpZ2h0LmdldENvbXBvbmVudChpKTtpZih3ZWlnaHQhPT0wKXtjb25zdCBib25lSW5kZXg9X3NraW5JbmRleC5nZXRDb21wb25lbnQoaSk7X21hdHJpeC5tdWx0aXBseU1hdHJpY2VzKHNrZWxldG9uLmJvbmVzW2JvbmVJbmRleF0ubWF0cml4V29ybGQsc2tlbGV0b24uYm9uZUludmVyc2VzW2JvbmVJbmRleF0pO3RhcmdldC5hZGRTY2FsZWRWZWN0b3IoX3ZlY3RvciQ1LmNvcHkoX2Jhc2VQb3NpdGlvbikuYXBwbHlNYXRyaXg0KF9tYXRyaXgpLHdlaWdodCk7fX1yZXR1cm4gdGFyZ2V0LmFwcGx5TWF0cml4NCh0aGlzLmJpbmRNYXRyaXhJbnZlcnNlKTt9fVNraW5uZWRNZXNoLnByb3RvdHlwZS5pc1NraW5uZWRNZXNoPXRydWU7Y2xhc3MgQm9uZSBleHRlbmRzIE9iamVjdDNEe2NvbnN0cnVjdG9yKCl7c3VwZXIoKTt0aGlzLnR5cGU9J0JvbmUnO319Qm9uZS5wcm90b3R5cGUuaXNCb25lPXRydWU7Y2xhc3MgRGF0YVRleHR1cmUgZXh0ZW5kcyBUZXh0dXJle2NvbnN0cnVjdG9yKGRhdGEsd2lkdGgsaGVpZ2h0LGZvcm1hdCx0eXBlLG1hcHBpbmcsd3JhcFMsd3JhcFQsbWFnRmlsdGVyLG1pbkZpbHRlcixhbmlzb3Ryb3B5LGVuY29kaW5nKXtpZihkYXRhPT09dm9pZCAwKXtkYXRhPW51bGw7fWlmKHdpZHRoPT09dm9pZCAwKXt3aWR0aD0xO31pZihoZWlnaHQ9PT12b2lkIDApe2hlaWdodD0xO31pZihtYWdGaWx0ZXI9PT12b2lkIDApe21hZ0ZpbHRlcj1OZWFyZXN0RmlsdGVyO31pZihtaW5GaWx0ZXI9PT12b2lkIDApe21pbkZpbHRlcj1OZWFyZXN0RmlsdGVyO31zdXBlcihudWxsLG1hcHBpbmcsd3JhcFMsd3JhcFQsbWFnRmlsdGVyLG1pbkZpbHRlcixmb3JtYXQsdHlwZSxhbmlzb3Ryb3B5LGVuY29kaW5nKTt0aGlzLmltYWdlPXtkYXRhOmRhdGEsd2lkdGg6d2lkdGgsaGVpZ2h0OmhlaWdodH07dGhpcy5tYWdGaWx0ZXI9bWFnRmlsdGVyO3RoaXMubWluRmlsdGVyPW1pbkZpbHRlcjt0aGlzLmdlbmVyYXRlTWlwbWFwcz1mYWxzZTt0aGlzLmZsaXBZPWZhbHNlO3RoaXMudW5wYWNrQWxpZ25tZW50PTE7dGhpcy5uZWVkc1VwZGF0ZT10cnVlO319RGF0YVRleHR1cmUucHJvdG90eXBlLmlzRGF0YVRleHR1cmU9dHJ1ZTtjbGFzcyBJbnN0YW5jZWRCdWZmZXJBdHRyaWJ1dGUgZXh0ZW5kcyBCdWZmZXJBdHRyaWJ1dGV7Y29uc3RydWN0b3IoYXJyYXksaXRlbVNpemUsbm9ybWFsaXplZCxtZXNoUGVyQXR0cmlidXRlKXtpZihtZXNoUGVyQXR0cmlidXRlPT09dm9pZCAwKXttZXNoUGVyQXR0cmlidXRlPTE7fWlmKHR5cGVvZiBub3JtYWxpemVkPT09J251bWJlcicpe21lc2hQZXJBdHRyaWJ1dGU9bm9ybWFsaXplZDtub3JtYWxpemVkPWZhbHNlO2NvbnNvbGUuZXJyb3IoJ1RIUkVFLkluc3RhbmNlZEJ1ZmZlckF0dHJpYnV0ZTogVGhlIGNvbnN0cnVjdG9yIG5vdyBleHBlY3RzIG5vcm1hbGl6ZWQgYXMgdGhlIHRoaXJkIGFyZ3VtZW50LicpO31zdXBlcihhcnJheSxpdGVtU2l6ZSxub3JtYWxpemVkKTt0aGlzLm1lc2hQZXJBdHRyaWJ1dGU9bWVzaFBlckF0dHJpYnV0ZTt9Y29weShzb3VyY2Upe3N1cGVyLmNvcHkoc291cmNlKTt0aGlzLm1lc2hQZXJBdHRyaWJ1dGU9c291cmNlLm1lc2hQZXJBdHRyaWJ1dGU7cmV0dXJuIHRoaXM7fXRvSlNPTigpe2NvbnN0IGRhdGE9c3VwZXIudG9KU09OKCk7ZGF0YS5tZXNoUGVyQXR0cmlidXRlPXRoaXMubWVzaFBlckF0dHJpYnV0ZTtkYXRhLmlzSW5zdGFuY2VkQnVmZmVyQXR0cmlidXRlPXRydWU7cmV0dXJuIGRhdGE7fX1JbnN0YW5jZWRCdWZmZXJBdHRyaWJ1dGUucHJvdG90eXBlLmlzSW5zdGFuY2VkQnVmZmVyQXR0cmlidXRlPXRydWU7Y29uc3QgX2luc3RhbmNlTG9jYWxNYXRyaXg9LypAX19QVVJFX18qL25ldyBNYXRyaXg0KCk7Y29uc3QgX2luc3RhbmNlV29ybGRNYXRyaXg9LypAX19QVVJFX18qL25ldyBNYXRyaXg0KCk7Y29uc3QgX2luc3RhbmNlSW50ZXJzZWN0cz1bXTtjb25zdCBfbWVzaD0vKkBfX1BVUkVfXyovbmV3IE1lc2goKTtjbGFzcyBJbnN0YW5jZWRNZXNoIGV4dGVuZHMgTWVzaHtjb25zdHJ1Y3RvcihnZW9tZXRyeSxtYXRlcmlhbCxjb3VudCl7c3VwZXIoZ2VvbWV0cnksbWF0ZXJpYWwpO3RoaXMuaW5zdGFuY2VNYXRyaXg9bmV3IEluc3RhbmNlZEJ1ZmZlckF0dHJpYnV0ZShuZXcgRmxvYXQzMkFycmF5KGNvdW50KjE2KSwxNik7dGhpcy5pbnN0YW5jZUNvbG9yPW51bGw7dGhpcy5jb3VudD1jb3VudDt0aGlzLmZydXN0dW1DdWxsZWQ9ZmFsc2U7fWNvcHkoc291cmNlKXtzdXBlci5jb3B5KHNvdXJjZSk7dGhpcy5pbnN0YW5jZU1hdHJpeC5jb3B5KHNvdXJjZS5pbnN0YW5jZU1hdHJpeCk7aWYoc291cmNlLmluc3RhbmNlQ29sb3IhPT1udWxsKXRoaXMuaW5zdGFuY2VDb2xvcj1zb3VyY2UuaW5zdGFuY2VDb2xvci5jbG9uZSgpO3RoaXMuY291bnQ9c291cmNlLmNvdW50O3JldHVybiB0aGlzO31nZXRDb2xvckF0KGluZGV4LGNvbG9yKXtjb2xvci5mcm9tQXJyYXkodGhpcy5pbnN0YW5jZUNvbG9yLmFycmF5LGluZGV4KjMpO31nZXRNYXRyaXhBdChpbmRleCxtYXRyaXgpe21hdHJpeC5mcm9tQXJyYXkodGhpcy5pbnN0YW5jZU1hdHJpeC5hcnJheSxpbmRleCoxNik7fXJheWNhc3QocmF5Y2FzdGVyLGludGVyc2VjdHMpe2NvbnN0IG1hdHJpeFdvcmxkPXRoaXMubWF0cml4V29ybGQ7Y29uc3QgcmF5Y2FzdFRpbWVzPXRoaXMuY291bnQ7X21lc2guZ2VvbWV0cnk9dGhpcy5nZW9tZXRyeTtfbWVzaC5tYXRlcmlhbD10aGlzLm1hdGVyaWFsO2lmKF9tZXNoLm1hdGVyaWFsPT09dW5kZWZpbmVkKXJldHVybjtmb3IobGV0IGluc3RhbmNlSWQ9MDtpbnN0YW5jZUlkPHJheWNhc3RUaW1lcztpbnN0YW5jZUlkKyspey8vIGNhbGN1bGF0ZSB0aGUgd29ybGQgbWF0cml4IGZvciBlYWNoIGluc3RhbmNlCgl0aGlzLmdldE1hdHJpeEF0KGluc3RhbmNlSWQsX2luc3RhbmNlTG9jYWxNYXRyaXgpO19pbnN0YW5jZVdvcmxkTWF0cml4Lm11bHRpcGx5TWF0cmljZXMobWF0cml4V29ybGQsX2luc3RhbmNlTG9jYWxNYXRyaXgpOy8vIHRoZSBtZXNoIHJlcHJlc2VudHMgdGhpcyBzaW5nbGUgaW5zdGFuY2UKCV9tZXNoLm1hdHJpeFdvcmxkPV9pbnN0YW5jZVdvcmxkTWF0cml4O19tZXNoLnJheWNhc3QocmF5Y2FzdGVyLF9pbnN0YW5jZUludGVyc2VjdHMpOy8vIHByb2Nlc3MgdGhlIHJlc3VsdCBvZiByYXljYXN0Cglmb3IobGV0IGk9MCxsPV9pbnN0YW5jZUludGVyc2VjdHMubGVuZ3RoO2k8bDtpKyspe2NvbnN0IGludGVyc2VjdD1faW5zdGFuY2VJbnRlcnNlY3RzW2ldO2ludGVyc2VjdC5pbnN0YW5jZUlkPWluc3RhbmNlSWQ7aW50ZXJzZWN0Lm9iamVjdD10aGlzO2ludGVyc2VjdHMucHVzaChpbnRlcnNlY3QpO31faW5zdGFuY2VJbnRlcnNlY3RzLmxlbmd0aD0wO319c2V0Q29sb3JBdChpbmRleCxjb2xvcil7aWYodGhpcy5pbnN0YW5jZUNvbG9yPT09bnVsbCl7dGhpcy5pbnN0YW5jZUNvbG9yPW5ldyBJbnN0YW5jZWRCdWZmZXJBdHRyaWJ1dGUobmV3IEZsb2F0MzJBcnJheSh0aGlzLmluc3RhbmNlTWF0cml4LmNvdW50KjMpLDMpO31jb2xvci50b0FycmF5KHRoaXMuaW5zdGFuY2VDb2xvci5hcnJheSxpbmRleCozKTt9c2V0TWF0cml4QXQoaW5kZXgsbWF0cml4KXttYXRyaXgudG9BcnJheSh0aGlzLmluc3RhbmNlTWF0cml4LmFycmF5LGluZGV4KjE2KTt9dXBkYXRlTW9ycGhUYXJnZXRzKCl7fWRpc3Bvc2UoKXt0aGlzLmRpc3BhdGNoRXZlbnQoe3R5cGU6J2Rpc3Bvc2UnfSk7fX1JbnN0YW5jZWRNZXNoLnByb3RvdHlwZS5pc0luc3RhbmNlZE1lc2g9dHJ1ZTsvKioKCSAqIHBhcmFtZXRlcnMgPSB7CgkgKiAgY29sb3I6IDxoZXg+LAoJICogIG9wYWNpdHk6IDxmbG9hdD4sCgkgKgoJICogIGxpbmV3aWR0aDogPGZsb2F0PiwKCSAqICBsaW5lY2FwOiAicm91bmQiLAoJICogIGxpbmVqb2luOiAicm91bmQiCgkgKiB9CgkgKi9jbGFzcyBMaW5lQmFzaWNNYXRlcmlhbCBleHRlbmRzIE1hdGVyaWFse2NvbnN0cnVjdG9yKHBhcmFtZXRlcnMpe3N1cGVyKCk7dGhpcy50eXBlPSdMaW5lQmFzaWNNYXRlcmlhbCc7dGhpcy5jb2xvcj1uZXcgQ29sb3IoMHhmZmZmZmYpO3RoaXMubGluZXdpZHRoPTE7dGhpcy5saW5lY2FwPSdyb3VuZCc7dGhpcy5saW5lam9pbj0ncm91bmQnO3RoaXMuc2V0VmFsdWVzKHBhcmFtZXRlcnMpO31jb3B5KHNvdXJjZSl7c3VwZXIuY29weShzb3VyY2UpO3RoaXMuY29sb3IuY29weShzb3VyY2UuY29sb3IpO3RoaXMubGluZXdpZHRoPXNvdXJjZS5saW5ld2lkdGg7dGhpcy5saW5lY2FwPXNvdXJjZS5saW5lY2FwO3RoaXMubGluZWpvaW49c291cmNlLmxpbmVqb2luO3JldHVybiB0aGlzO319TGluZUJhc2ljTWF0ZXJpYWwucHJvdG90eXBlLmlzTGluZUJhc2ljTWF0ZXJpYWw9dHJ1ZTtjb25zdCBfc3RhcnQkMT0vKkBfX1BVUkVfXyovbmV3IFZlY3RvcjMoKTtjb25zdCBfZW5kJDE9LypAX19QVVJFX18qL25ldyBWZWN0b3IzKCk7Y29uc3QgX2ludmVyc2VNYXRyaXgkMT0vKkBfX1BVUkVfXyovbmV3IE1hdHJpeDQoKTtjb25zdCBfcmF5JDE9LypAX19QVVJFX18qL25ldyBSYXkoKTtjb25zdCBfc3BoZXJlJDE9LypAX19QVVJFX18qL25ldyBTcGhlcmUoKTtjbGFzcyBMaW5lIGV4dGVuZHMgT2JqZWN0M0R7Y29uc3RydWN0b3IoZ2VvbWV0cnksbWF0ZXJpYWwpe2lmKGdlb21ldHJ5PT09dm9pZCAwKXtnZW9tZXRyeT1uZXcgQnVmZmVyR2VvbWV0cnkoKTt9aWYobWF0ZXJpYWw9PT12b2lkIDApe21hdGVyaWFsPW5ldyBMaW5lQmFzaWNNYXRlcmlhbCgpO31zdXBlcigpO3RoaXMudHlwZT0nTGluZSc7dGhpcy5nZW9tZXRyeT1nZW9tZXRyeTt0aGlzLm1hdGVyaWFsPW1hdGVyaWFsO3RoaXMudXBkYXRlTW9ycGhUYXJnZXRzKCk7fWNvcHkoc291cmNlKXtzdXBlci5jb3B5KHNvdXJjZSk7dGhpcy5tYXRlcmlhbD1zb3VyY2UubWF0ZXJpYWw7dGhpcy5nZW9tZXRyeT1zb3VyY2UuZ2VvbWV0cnk7cmV0dXJuIHRoaXM7fWNvbXB1dGVMaW5lRGlzdGFuY2VzKCl7Y29uc3QgZ2VvbWV0cnk9dGhpcy5nZW9tZXRyeTtpZihnZW9tZXRyeS5pc0J1ZmZlckdlb21ldHJ5KXsvLyB3ZSBhc3N1bWUgbm9uLWluZGV4ZWQgZ2VvbWV0cnkKCWlmKGdlb21ldHJ5LmluZGV4PT09bnVsbCl7Y29uc3QgcG9zaXRpb25BdHRyaWJ1dGU9Z2VvbWV0cnkuYXR0cmlidXRlcy5wb3NpdGlvbjtjb25zdCBsaW5lRGlzdGFuY2VzPVswXTtmb3IobGV0IGk9MSxsPXBvc2l0aW9uQXR0cmlidXRlLmNvdW50O2k8bDtpKyspe19zdGFydCQxLmZyb21CdWZmZXJBdHRyaWJ1dGUocG9zaXRpb25BdHRyaWJ1dGUsaS0xKTtfZW5kJDEuZnJvbUJ1ZmZlckF0dHJpYnV0ZShwb3NpdGlvbkF0dHJpYnV0ZSxpKTtsaW5lRGlzdGFuY2VzW2ldPWxpbmVEaXN0YW5jZXNbaS0xXTtsaW5lRGlzdGFuY2VzW2ldKz1fc3RhcnQkMS5kaXN0YW5jZVRvKF9lbmQkMSk7fWdlb21ldHJ5LnNldEF0dHJpYnV0ZSgnbGluZURpc3RhbmNlJyxuZXcgRmxvYXQzMkJ1ZmZlckF0dHJpYnV0ZShsaW5lRGlzdGFuY2VzLDEpKTt9ZWxzZSB7Y29uc29sZS53YXJuKCdUSFJFRS5MaW5lLmNvbXB1dGVMaW5lRGlzdGFuY2VzKCk6IENvbXB1dGF0aW9uIG9ubHkgcG9zc2libGUgd2l0aCBub24taW5kZXhlZCBCdWZmZXJHZW9tZXRyeS4nKTt9fWVsc2UgaWYoZ2VvbWV0cnkuaXNHZW9tZXRyeSl7Y29uc29sZS5lcnJvcignVEhSRUUuTGluZS5jb21wdXRlTGluZURpc3RhbmNlcygpIG5vIGxvbmdlciBzdXBwb3J0cyBUSFJFRS5HZW9tZXRyeS4gVXNlIFRIUkVFLkJ1ZmZlckdlb21ldHJ5IGluc3RlYWQuJyk7fXJldHVybiB0aGlzO31yYXljYXN0KHJheWNhc3RlcixpbnRlcnNlY3RzKXtjb25zdCBnZW9tZXRyeT10aGlzLmdlb21ldHJ5O2NvbnN0IG1hdHJpeFdvcmxkPXRoaXMubWF0cml4V29ybGQ7Y29uc3QgdGhyZXNob2xkPXJheWNhc3Rlci5wYXJhbXMuTGluZS50aHJlc2hvbGQ7Y29uc3QgZHJhd1JhbmdlPWdlb21ldHJ5LmRyYXdSYW5nZTsvLyBDaGVja2luZyBib3VuZGluZ1NwaGVyZSBkaXN0YW5jZSB0byByYXkKCWlmKGdlb21ldHJ5LmJvdW5kaW5nU3BoZXJlPT09bnVsbClnZW9tZXRyeS5jb21wdXRlQm91bmRpbmdTcGhlcmUoKTtfc3BoZXJlJDEuY29weShnZW9tZXRyeS5ib3VuZGluZ1NwaGVyZSk7X3NwaGVyZSQxLmFwcGx5TWF0cml4NChtYXRyaXhXb3JsZCk7X3NwaGVyZSQxLnJhZGl1cys9dGhyZXNob2xkO2lmKHJheWNhc3Rlci5yYXkuaW50ZXJzZWN0c1NwaGVyZShfc3BoZXJlJDEpPT09ZmFsc2UpcmV0dXJuOy8vCglfaW52ZXJzZU1hdHJpeCQxLmNvcHkobWF0cml4V29ybGQpLmludmVydCgpO19yYXkkMS5jb3B5KHJheWNhc3Rlci5yYXkpLmFwcGx5TWF0cml4NChfaW52ZXJzZU1hdHJpeCQxKTtjb25zdCBsb2NhbFRocmVzaG9sZD10aHJlc2hvbGQvKCh0aGlzLnNjYWxlLngrdGhpcy5zY2FsZS55K3RoaXMuc2NhbGUueikvMyk7Y29uc3QgbG9jYWxUaHJlc2hvbGRTcT1sb2NhbFRocmVzaG9sZCpsb2NhbFRocmVzaG9sZDtjb25zdCB2U3RhcnQ9bmV3IFZlY3RvcjMoKTtjb25zdCB2RW5kPW5ldyBWZWN0b3IzKCk7Y29uc3QgaW50ZXJTZWdtZW50PW5ldyBWZWN0b3IzKCk7Y29uc3QgaW50ZXJSYXk9bmV3IFZlY3RvcjMoKTtjb25zdCBzdGVwPXRoaXMuaXNMaW5lU2VnbWVudHM/MjoxO2lmKGdlb21ldHJ5LmlzQnVmZmVyR2VvbWV0cnkpe2NvbnN0IGluZGV4PWdlb21ldHJ5LmluZGV4O2NvbnN0IGF0dHJpYnV0ZXM9Z2VvbWV0cnkuYXR0cmlidXRlcztjb25zdCBwb3NpdGlvbkF0dHJpYnV0ZT1hdHRyaWJ1dGVzLnBvc2l0aW9uO2lmKGluZGV4IT09bnVsbCl7Y29uc3Qgc3RhcnQ9TWF0aC5tYXgoMCxkcmF3UmFuZ2Uuc3RhcnQpO2NvbnN0IGVuZD1NYXRoLm1pbihpbmRleC5jb3VudCxkcmF3UmFuZ2Uuc3RhcnQrZHJhd1JhbmdlLmNvdW50KTtmb3IobGV0IGk9c3RhcnQsbD1lbmQtMTtpPGw7aSs9c3RlcCl7Y29uc3QgYT1pbmRleC5nZXRYKGkpO2NvbnN0IGI9aW5kZXguZ2V0WChpKzEpO3ZTdGFydC5mcm9tQnVmZmVyQXR0cmlidXRlKHBvc2l0aW9uQXR0cmlidXRlLGEpO3ZFbmQuZnJvbUJ1ZmZlckF0dHJpYnV0ZShwb3NpdGlvbkF0dHJpYnV0ZSxiKTtjb25zdCBkaXN0U3E9X3JheSQxLmRpc3RhbmNlU3FUb1NlZ21lbnQodlN0YXJ0LHZFbmQsaW50ZXJSYXksaW50ZXJTZWdtZW50KTtpZihkaXN0U3E+bG9jYWxUaHJlc2hvbGRTcSljb250aW51ZTtpbnRlclJheS5hcHBseU1hdHJpeDQodGhpcy5tYXRyaXhXb3JsZCk7Ly9Nb3ZlIGJhY2sgdG8gd29ybGQgc3BhY2UgZm9yIGRpc3RhbmNlIGNhbGN1bGF0aW9uCgljb25zdCBkaXN0YW5jZT1yYXljYXN0ZXIucmF5Lm9yaWdpbi5kaXN0YW5jZVRvKGludGVyUmF5KTtpZihkaXN0YW5jZTxyYXljYXN0ZXIubmVhcnx8ZGlzdGFuY2U+cmF5Y2FzdGVyLmZhciljb250aW51ZTtpbnRlcnNlY3RzLnB1c2goe2Rpc3RhbmNlOmRpc3RhbmNlLC8vIFdoYXQgZG8gd2Ugd2FudD8gaW50ZXJzZWN0aW9uIHBvaW50IG9uIHRoZSByYXkgb3Igb24gdGhlIHNlZ21lbnQ/PwoJLy8gcG9pbnQ6IHJheWNhc3Rlci5yYXkuYXQoIGRpc3RhbmNlICksCglwb2ludDppbnRlclNlZ21lbnQuY2xvbmUoKS5hcHBseU1hdHJpeDQodGhpcy5tYXRyaXhXb3JsZCksaW5kZXg6aSxmYWNlOm51bGwsZmFjZUluZGV4Om51bGwsb2JqZWN0OnRoaXN9KTt9fWVsc2Uge2NvbnN0IHN0YXJ0PU1hdGgubWF4KDAsZHJhd1JhbmdlLnN0YXJ0KTtjb25zdCBlbmQ9TWF0aC5taW4ocG9zaXRpb25BdHRyaWJ1dGUuY291bnQsZHJhd1JhbmdlLnN0YXJ0K2RyYXdSYW5nZS5jb3VudCk7Zm9yKGxldCBpPXN0YXJ0LGw9ZW5kLTE7aTxsO2krPXN0ZXApe3ZTdGFydC5mcm9tQnVmZmVyQXR0cmlidXRlKHBvc2l0aW9uQXR0cmlidXRlLGkpO3ZFbmQuZnJvbUJ1ZmZlckF0dHJpYnV0ZShwb3NpdGlvbkF0dHJpYnV0ZSxpKzEpO2NvbnN0IGRpc3RTcT1fcmF5JDEuZGlzdGFuY2VTcVRvU2VnbWVudCh2U3RhcnQsdkVuZCxpbnRlclJheSxpbnRlclNlZ21lbnQpO2lmKGRpc3RTcT5sb2NhbFRocmVzaG9sZFNxKWNvbnRpbnVlO2ludGVyUmF5LmFwcGx5TWF0cml4NCh0aGlzLm1hdHJpeFdvcmxkKTsvL01vdmUgYmFjayB0byB3b3JsZCBzcGFjZSBmb3IgZGlzdGFuY2UgY2FsY3VsYXRpb24KCWNvbnN0IGRpc3RhbmNlPXJheWNhc3Rlci5yYXkub3JpZ2luLmRpc3RhbmNlVG8oaW50ZXJSYXkpO2lmKGRpc3RhbmNlPHJheWNhc3Rlci5uZWFyfHxkaXN0YW5jZT5yYXljYXN0ZXIuZmFyKWNvbnRpbnVlO2ludGVyc2VjdHMucHVzaCh7ZGlzdGFuY2U6ZGlzdGFuY2UsLy8gV2hhdCBkbyB3ZSB3YW50PyBpbnRlcnNlY3Rpb24gcG9pbnQgb24gdGhlIHJheSBvciBvbiB0aGUgc2VnbWVudD8/CgkvLyBwb2ludDogcmF5Y2FzdGVyLnJheS5hdCggZGlzdGFuY2UgKSwKCXBvaW50OmludGVyU2VnbWVudC5jbG9uZSgpLmFwcGx5TWF0cml4NCh0aGlzLm1hdHJpeFdvcmxkKSxpbmRleDppLGZhY2U6bnVsbCxmYWNlSW5kZXg6bnVsbCxvYmplY3Q6dGhpc30pO319fWVsc2UgaWYoZ2VvbWV0cnkuaXNHZW9tZXRyeSl7Y29uc29sZS5lcnJvcignVEhSRUUuTGluZS5yYXljYXN0KCkgbm8gbG9uZ2VyIHN1cHBvcnRzIFRIUkVFLkdlb21ldHJ5LiBVc2UgVEhSRUUuQnVmZmVyR2VvbWV0cnkgaW5zdGVhZC4nKTt9fXVwZGF0ZU1vcnBoVGFyZ2V0cygpe2NvbnN0IGdlb21ldHJ5PXRoaXMuZ2VvbWV0cnk7aWYoZ2VvbWV0cnkuaXNCdWZmZXJHZW9tZXRyeSl7Y29uc3QgbW9ycGhBdHRyaWJ1dGVzPWdlb21ldHJ5Lm1vcnBoQXR0cmlidXRlcztjb25zdCBrZXlzPU9iamVjdC5rZXlzKG1vcnBoQXR0cmlidXRlcyk7aWYoa2V5cy5sZW5ndGg+MCl7Y29uc3QgbW9ycGhBdHRyaWJ1dGU9bW9ycGhBdHRyaWJ1dGVzW2tleXNbMF1dO2lmKG1vcnBoQXR0cmlidXRlIT09dW5kZWZpbmVkKXt0aGlzLm1vcnBoVGFyZ2V0SW5mbHVlbmNlcz1bXTt0aGlzLm1vcnBoVGFyZ2V0RGljdGlvbmFyeT17fTtmb3IobGV0IG09MCxtbD1tb3JwaEF0dHJpYnV0ZS5sZW5ndGg7bTxtbDttKyspe2NvbnN0IG5hbWU9bW9ycGhBdHRyaWJ1dGVbbV0ubmFtZXx8U3RyaW5nKG0pO3RoaXMubW9ycGhUYXJnZXRJbmZsdWVuY2VzLnB1c2goMCk7dGhpcy5tb3JwaFRhcmdldERpY3Rpb25hcnlbbmFtZV09bTt9fX19ZWxzZSB7Y29uc3QgbW9ycGhUYXJnZXRzPWdlb21ldHJ5Lm1vcnBoVGFyZ2V0cztpZihtb3JwaFRhcmdldHMhPT11bmRlZmluZWQmJm1vcnBoVGFyZ2V0cy5sZW5ndGg+MCl7Y29uc29sZS5lcnJvcignVEhSRUUuTGluZS51cGRhdGVNb3JwaFRhcmdldHMoKSBkb2VzIG5vdCBzdXBwb3J0IFRIUkVFLkdlb21ldHJ5LiBVc2UgVEhSRUUuQnVmZmVyR2VvbWV0cnkgaW5zdGVhZC4nKTt9fX19TGluZS5wcm90b3R5cGUuaXNMaW5lPXRydWU7Y29uc3QgX3N0YXJ0PS8qQF9fUFVSRV9fKi9uZXcgVmVjdG9yMygpO2NvbnN0IF9lbmQ9LypAX19QVVJFX18qL25ldyBWZWN0b3IzKCk7Y2xhc3MgTGluZVNlZ21lbnRzIGV4dGVuZHMgTGluZXtjb25zdHJ1Y3RvcihnZW9tZXRyeSxtYXRlcmlhbCl7c3VwZXIoZ2VvbWV0cnksbWF0ZXJpYWwpO3RoaXMudHlwZT0nTGluZVNlZ21lbnRzJzt9Y29tcHV0ZUxpbmVEaXN0YW5jZXMoKXtjb25zdCBnZW9tZXRyeT10aGlzLmdlb21ldHJ5O2lmKGdlb21ldHJ5LmlzQnVmZmVyR2VvbWV0cnkpey8vIHdlIGFzc3VtZSBub24taW5kZXhlZCBnZW9tZXRyeQoJaWYoZ2VvbWV0cnkuaW5kZXg9PT1udWxsKXtjb25zdCBwb3NpdGlvbkF0dHJpYnV0ZT1nZW9tZXRyeS5hdHRyaWJ1dGVzLnBvc2l0aW9uO2NvbnN0IGxpbmVEaXN0YW5jZXM9W107Zm9yKGxldCBpPTAsbD1wb3NpdGlvbkF0dHJpYnV0ZS5jb3VudDtpPGw7aSs9Mil7X3N0YXJ0LmZyb21CdWZmZXJBdHRyaWJ1dGUocG9zaXRpb25BdHRyaWJ1dGUsaSk7X2VuZC5mcm9tQnVmZmVyQXR0cmlidXRlKHBvc2l0aW9uQXR0cmlidXRlLGkrMSk7bGluZURpc3RhbmNlc1tpXT1pPT09MD8wOmxpbmVEaXN0YW5jZXNbaS0xXTtsaW5lRGlzdGFuY2VzW2krMV09bGluZURpc3RhbmNlc1tpXStfc3RhcnQuZGlzdGFuY2VUbyhfZW5kKTt9Z2VvbWV0cnkuc2V0QXR0cmlidXRlKCdsaW5lRGlzdGFuY2UnLG5ldyBGbG9hdDMyQnVmZmVyQXR0cmlidXRlKGxpbmVEaXN0YW5jZXMsMSkpO31lbHNlIHtjb25zb2xlLndhcm4oJ1RIUkVFLkxpbmVTZWdtZW50cy5jb21wdXRlTGluZURpc3RhbmNlcygpOiBDb21wdXRhdGlvbiBvbmx5IHBvc3NpYmxlIHdpdGggbm9uLWluZGV4ZWQgQnVmZmVyR2VvbWV0cnkuJyk7fX1lbHNlIGlmKGdlb21ldHJ5LmlzR2VvbWV0cnkpe2NvbnNvbGUuZXJyb3IoJ1RIUkVFLkxpbmVTZWdtZW50cy5jb21wdXRlTGluZURpc3RhbmNlcygpIG5vIGxvbmdlciBzdXBwb3J0cyBUSFJFRS5HZW9tZXRyeS4gVXNlIFRIUkVFLkJ1ZmZlckdlb21ldHJ5IGluc3RlYWQuJyk7fXJldHVybiB0aGlzO319TGluZVNlZ21lbnRzLnByb3RvdHlwZS5pc0xpbmVTZWdtZW50cz10cnVlO2NsYXNzIExpbmVMb29wIGV4dGVuZHMgTGluZXtjb25zdHJ1Y3RvcihnZW9tZXRyeSxtYXRlcmlhbCl7c3VwZXIoZ2VvbWV0cnksbWF0ZXJpYWwpO3RoaXMudHlwZT0nTGluZUxvb3AnO319TGluZUxvb3AucHJvdG90eXBlLmlzTGluZUxvb3A9dHJ1ZTsvKioKCSAqIHBhcmFtZXRlcnMgPSB7CgkgKiAgY29sb3I6IDxoZXg+LAoJICogIG9wYWNpdHk6IDxmbG9hdD4sCgkgKiAgbWFwOiBuZXcgVEhSRUUuVGV4dHVyZSggPEltYWdlPiApLAoJICogIGFscGhhTWFwOiBuZXcgVEhSRUUuVGV4dHVyZSggPEltYWdlPiApLAoJICoKCSAqICBzaXplOiA8ZmxvYXQ+LAoJICogIHNpemVBdHRlbnVhdGlvbjogPGJvb2w+CgkgKgoJICogfQoJICovY2xhc3MgUG9pbnRzTWF0ZXJpYWwgZXh0ZW5kcyBNYXRlcmlhbHtjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzKXtzdXBlcigpO3RoaXMudHlwZT0nUG9pbnRzTWF0ZXJpYWwnO3RoaXMuY29sb3I9bmV3IENvbG9yKDB4ZmZmZmZmKTt0aGlzLm1hcD1udWxsO3RoaXMuYWxwaGFNYXA9bnVsbDt0aGlzLnNpemU9MTt0aGlzLnNpemVBdHRlbnVhdGlvbj10cnVlO3RoaXMuc2V0VmFsdWVzKHBhcmFtZXRlcnMpO31jb3B5KHNvdXJjZSl7c3VwZXIuY29weShzb3VyY2UpO3RoaXMuY29sb3IuY29weShzb3VyY2UuY29sb3IpO3RoaXMubWFwPXNvdXJjZS5tYXA7dGhpcy5hbHBoYU1hcD1zb3VyY2UuYWxwaGFNYXA7dGhpcy5zaXplPXNvdXJjZS5zaXplO3RoaXMuc2l6ZUF0dGVudWF0aW9uPXNvdXJjZS5zaXplQXR0ZW51YXRpb247cmV0dXJuIHRoaXM7fX1Qb2ludHNNYXRlcmlhbC5wcm90b3R5cGUuaXNQb2ludHNNYXRlcmlhbD10cnVlO2NvbnN0IF9pbnZlcnNlTWF0cml4PS8qQF9fUFVSRV9fKi9uZXcgTWF0cml4NCgpO2NvbnN0IF9yYXk9LypAX19QVVJFX18qL25ldyBSYXkoKTtjb25zdCBfc3BoZXJlPS8qQF9fUFVSRV9fKi9uZXcgU3BoZXJlKCk7Y29uc3QgX3Bvc2l0aW9uJDI9LypAX19QVVJFX18qL25ldyBWZWN0b3IzKCk7Y2xhc3MgUG9pbnRzIGV4dGVuZHMgT2JqZWN0M0R7Y29uc3RydWN0b3IoZ2VvbWV0cnksbWF0ZXJpYWwpe2lmKGdlb21ldHJ5PT09dm9pZCAwKXtnZW9tZXRyeT1uZXcgQnVmZmVyR2VvbWV0cnkoKTt9aWYobWF0ZXJpYWw9PT12b2lkIDApe21hdGVyaWFsPW5ldyBQb2ludHNNYXRlcmlhbCgpO31zdXBlcigpO3RoaXMudHlwZT0nUG9pbnRzJzt0aGlzLmdlb21ldHJ5PWdlb21ldHJ5O3RoaXMubWF0ZXJpYWw9bWF0ZXJpYWw7dGhpcy51cGRhdGVNb3JwaFRhcmdldHMoKTt9Y29weShzb3VyY2Upe3N1cGVyLmNvcHkoc291cmNlKTt0aGlzLm1hdGVyaWFsPXNvdXJjZS5tYXRlcmlhbDt0aGlzLmdlb21ldHJ5PXNvdXJjZS5nZW9tZXRyeTtyZXR1cm4gdGhpczt9cmF5Y2FzdChyYXljYXN0ZXIsaW50ZXJzZWN0cyl7Y29uc3QgZ2VvbWV0cnk9dGhpcy5nZW9tZXRyeTtjb25zdCBtYXRyaXhXb3JsZD10aGlzLm1hdHJpeFdvcmxkO2NvbnN0IHRocmVzaG9sZD1yYXljYXN0ZXIucGFyYW1zLlBvaW50cy50aHJlc2hvbGQ7Y29uc3QgZHJhd1JhbmdlPWdlb21ldHJ5LmRyYXdSYW5nZTsvLyBDaGVja2luZyBib3VuZGluZ1NwaGVyZSBkaXN0YW5jZSB0byByYXkKCWlmKGdlb21ldHJ5LmJvdW5kaW5nU3BoZXJlPT09bnVsbClnZW9tZXRyeS5jb21wdXRlQm91bmRpbmdTcGhlcmUoKTtfc3BoZXJlLmNvcHkoZ2VvbWV0cnkuYm91bmRpbmdTcGhlcmUpO19zcGhlcmUuYXBwbHlNYXRyaXg0KG1hdHJpeFdvcmxkKTtfc3BoZXJlLnJhZGl1cys9dGhyZXNob2xkO2lmKHJheWNhc3Rlci5yYXkuaW50ZXJzZWN0c1NwaGVyZShfc3BoZXJlKT09PWZhbHNlKXJldHVybjsvLwoJX2ludmVyc2VNYXRyaXguY29weShtYXRyaXhXb3JsZCkuaW52ZXJ0KCk7X3JheS5jb3B5KHJheWNhc3Rlci5yYXkpLmFwcGx5TWF0cml4NChfaW52ZXJzZU1hdHJpeCk7Y29uc3QgbG9jYWxUaHJlc2hvbGQ9dGhyZXNob2xkLygodGhpcy5zY2FsZS54K3RoaXMuc2NhbGUueSt0aGlzLnNjYWxlLnopLzMpO2NvbnN0IGxvY2FsVGhyZXNob2xkU3E9bG9jYWxUaHJlc2hvbGQqbG9jYWxUaHJlc2hvbGQ7aWYoZ2VvbWV0cnkuaXNCdWZmZXJHZW9tZXRyeSl7Y29uc3QgaW5kZXg9Z2VvbWV0cnkuaW5kZXg7Y29uc3QgYXR0cmlidXRlcz1nZW9tZXRyeS5hdHRyaWJ1dGVzO2NvbnN0IHBvc2l0aW9uQXR0cmlidXRlPWF0dHJpYnV0ZXMucG9zaXRpb247aWYoaW5kZXghPT1udWxsKXtjb25zdCBzdGFydD1NYXRoLm1heCgwLGRyYXdSYW5nZS5zdGFydCk7Y29uc3QgZW5kPU1hdGgubWluKGluZGV4LmNvdW50LGRyYXdSYW5nZS5zdGFydCtkcmF3UmFuZ2UuY291bnQpO2ZvcihsZXQgaT1zdGFydCxpbD1lbmQ7aTxpbDtpKyspe2NvbnN0IGE9aW5kZXguZ2V0WChpKTtfcG9zaXRpb24kMi5mcm9tQnVmZmVyQXR0cmlidXRlKHBvc2l0aW9uQXR0cmlidXRlLGEpO3Rlc3RQb2ludChfcG9zaXRpb24kMixhLGxvY2FsVGhyZXNob2xkU3EsbWF0cml4V29ybGQscmF5Y2FzdGVyLGludGVyc2VjdHMsdGhpcyk7fX1lbHNlIHtjb25zdCBzdGFydD1NYXRoLm1heCgwLGRyYXdSYW5nZS5zdGFydCk7Y29uc3QgZW5kPU1hdGgubWluKHBvc2l0aW9uQXR0cmlidXRlLmNvdW50LGRyYXdSYW5nZS5zdGFydCtkcmF3UmFuZ2UuY291bnQpO2ZvcihsZXQgaT1zdGFydCxsPWVuZDtpPGw7aSsrKXtfcG9zaXRpb24kMi5mcm9tQnVmZmVyQXR0cmlidXRlKHBvc2l0aW9uQXR0cmlidXRlLGkpO3Rlc3RQb2ludChfcG9zaXRpb24kMixpLGxvY2FsVGhyZXNob2xkU3EsbWF0cml4V29ybGQscmF5Y2FzdGVyLGludGVyc2VjdHMsdGhpcyk7fX19ZWxzZSB7Y29uc29sZS5lcnJvcignVEhSRUUuUG9pbnRzLnJheWNhc3QoKSBubyBsb25nZXIgc3VwcG9ydHMgVEhSRUUuR2VvbWV0cnkuIFVzZSBUSFJFRS5CdWZmZXJHZW9tZXRyeSBpbnN0ZWFkLicpO319dXBkYXRlTW9ycGhUYXJnZXRzKCl7Y29uc3QgZ2VvbWV0cnk9dGhpcy5nZW9tZXRyeTtpZihnZW9tZXRyeS5pc0J1ZmZlckdlb21ldHJ5KXtjb25zdCBtb3JwaEF0dHJpYnV0ZXM9Z2VvbWV0cnkubW9ycGhBdHRyaWJ1dGVzO2NvbnN0IGtleXM9T2JqZWN0LmtleXMobW9ycGhBdHRyaWJ1dGVzKTtpZihrZXlzLmxlbmd0aD4wKXtjb25zdCBtb3JwaEF0dHJpYnV0ZT1tb3JwaEF0dHJpYnV0ZXNba2V5c1swXV07aWYobW9ycGhBdHRyaWJ1dGUhPT11bmRlZmluZWQpe3RoaXMubW9ycGhUYXJnZXRJbmZsdWVuY2VzPVtdO3RoaXMubW9ycGhUYXJnZXREaWN0aW9uYXJ5PXt9O2ZvcihsZXQgbT0wLG1sPW1vcnBoQXR0cmlidXRlLmxlbmd0aDttPG1sO20rKyl7Y29uc3QgbmFtZT1tb3JwaEF0dHJpYnV0ZVttXS5uYW1lfHxTdHJpbmcobSk7dGhpcy5tb3JwaFRhcmdldEluZmx1ZW5jZXMucHVzaCgwKTt0aGlzLm1vcnBoVGFyZ2V0RGljdGlvbmFyeVtuYW1lXT1tO319fX1lbHNlIHtjb25zdCBtb3JwaFRhcmdldHM9Z2VvbWV0cnkubW9ycGhUYXJnZXRzO2lmKG1vcnBoVGFyZ2V0cyE9PXVuZGVmaW5lZCYmbW9ycGhUYXJnZXRzLmxlbmd0aD4wKXtjb25zb2xlLmVycm9yKCdUSFJFRS5Qb2ludHMudXBkYXRlTW9ycGhUYXJnZXRzKCkgZG9lcyBub3Qgc3VwcG9ydCBUSFJFRS5HZW9tZXRyeS4gVXNlIFRIUkVFLkJ1ZmZlckdlb21ldHJ5IGluc3RlYWQuJyk7fX19fVBvaW50cy5wcm90b3R5cGUuaXNQb2ludHM9dHJ1ZTtmdW5jdGlvbiB0ZXN0UG9pbnQocG9pbnQsaW5kZXgsbG9jYWxUaHJlc2hvbGRTcSxtYXRyaXhXb3JsZCxyYXljYXN0ZXIsaW50ZXJzZWN0cyxvYmplY3Qpe2NvbnN0IHJheVBvaW50RGlzdGFuY2VTcT1fcmF5LmRpc3RhbmNlU3FUb1BvaW50KHBvaW50KTtpZihyYXlQb2ludERpc3RhbmNlU3E8bG9jYWxUaHJlc2hvbGRTcSl7Y29uc3QgaW50ZXJzZWN0UG9pbnQ9bmV3IFZlY3RvcjMoKTtfcmF5LmNsb3Nlc3RQb2ludFRvUG9pbnQocG9pbnQsaW50ZXJzZWN0UG9pbnQpO2ludGVyc2VjdFBvaW50LmFwcGx5TWF0cml4NChtYXRyaXhXb3JsZCk7Y29uc3QgZGlzdGFuY2U9cmF5Y2FzdGVyLnJheS5vcmlnaW4uZGlzdGFuY2VUbyhpbnRlcnNlY3RQb2ludCk7aWYoZGlzdGFuY2U8cmF5Y2FzdGVyLm5lYXJ8fGRpc3RhbmNlPnJheWNhc3Rlci5mYXIpcmV0dXJuO2ludGVyc2VjdHMucHVzaCh7ZGlzdGFuY2U6ZGlzdGFuY2UsZGlzdGFuY2VUb1JheTpNYXRoLnNxcnQocmF5UG9pbnREaXN0YW5jZVNxKSxwb2ludDppbnRlcnNlY3RQb2ludCxpbmRleDppbmRleCxmYWNlOm51bGwsb2JqZWN0Om9iamVjdH0pO319Y2xhc3MgVmlkZW9UZXh0dXJlIGV4dGVuZHMgVGV4dHVyZXtjb25zdHJ1Y3Rvcih2aWRlbyxtYXBwaW5nLHdyYXBTLHdyYXBULG1hZ0ZpbHRlcixtaW5GaWx0ZXIsZm9ybWF0LHR5cGUsYW5pc290cm9weSl7c3VwZXIodmlkZW8sbWFwcGluZyx3cmFwUyx3cmFwVCxtYWdGaWx0ZXIsbWluRmlsdGVyLGZvcm1hdCx0eXBlLGFuaXNvdHJvcHkpO3RoaXMuZm9ybWF0PWZvcm1hdCE9PXVuZGVmaW5lZD9mb3JtYXQ6UkdCRm9ybWF0O3RoaXMubWluRmlsdGVyPW1pbkZpbHRlciE9PXVuZGVmaW5lZD9taW5GaWx0ZXI6TGluZWFyRmlsdGVyO3RoaXMubWFnRmlsdGVyPW1hZ0ZpbHRlciE9PXVuZGVmaW5lZD9tYWdGaWx0ZXI6TGluZWFyRmlsdGVyO3RoaXMuZ2VuZXJhdGVNaXBtYXBzPWZhbHNlO2NvbnN0IHNjb3BlPXRoaXM7ZnVuY3Rpb24gdXBkYXRlVmlkZW8oKXtzY29wZS5uZWVkc1VwZGF0ZT10cnVlO3ZpZGVvLnJlcXVlc3RWaWRlb0ZyYW1lQ2FsbGJhY2sodXBkYXRlVmlkZW8pO31pZigncmVxdWVzdFZpZGVvRnJhbWVDYWxsYmFjaydpbiB2aWRlbyl7dmlkZW8ucmVxdWVzdFZpZGVvRnJhbWVDYWxsYmFjayh1cGRhdGVWaWRlbyk7fX1jbG9uZSgpe3JldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLmltYWdlKS5jb3B5KHRoaXMpO311cGRhdGUoKXtjb25zdCB2aWRlbz10aGlzLmltYWdlO2NvbnN0IGhhc1ZpZGVvRnJhbWVDYWxsYmFjaz0oJ3JlcXVlc3RWaWRlb0ZyYW1lQ2FsbGJhY2snaW4gdmlkZW8pO2lmKGhhc1ZpZGVvRnJhbWVDYWxsYmFjaz09PWZhbHNlJiZ2aWRlby5yZWFkeVN0YXRlPj12aWRlby5IQVZFX0NVUlJFTlRfREFUQSl7dGhpcy5uZWVkc1VwZGF0ZT10cnVlO319fVZpZGVvVGV4dHVyZS5wcm90b3R5cGUuaXNWaWRlb1RleHR1cmU9dHJ1ZTtjbGFzcyBDb21wcmVzc2VkVGV4dHVyZSBleHRlbmRzIFRleHR1cmV7Y29uc3RydWN0b3IobWlwbWFwcyx3aWR0aCxoZWlnaHQsZm9ybWF0LHR5cGUsbWFwcGluZyx3cmFwUyx3cmFwVCxtYWdGaWx0ZXIsbWluRmlsdGVyLGFuaXNvdHJvcHksZW5jb2Rpbmcpe3N1cGVyKG51bGwsbWFwcGluZyx3cmFwUyx3cmFwVCxtYWdGaWx0ZXIsbWluRmlsdGVyLGZvcm1hdCx0eXBlLGFuaXNvdHJvcHksZW5jb2RpbmcpO3RoaXMuaW1hZ2U9e3dpZHRoOndpZHRoLGhlaWdodDpoZWlnaHR9O3RoaXMubWlwbWFwcz1taXBtYXBzOy8vIG5vIGZsaXBwaW5nIGZvciBjdWJlIHRleHR1cmVzCgkvLyAoYWxzbyBmbGlwcGluZyBkb2Vzbid0IHdvcmsgZm9yIGNvbXByZXNzZWQgdGV4dHVyZXMgKQoJdGhpcy5mbGlwWT1mYWxzZTsvLyBjYW4ndCBnZW5lcmF0ZSBtaXBtYXBzIGZvciBjb21wcmVzc2VkIHRleHR1cmVzCgkvLyBtaXBzIG11c3QgYmUgZW1iZWRkZWQgaW4gRERTIGZpbGVzCgl0aGlzLmdlbmVyYXRlTWlwbWFwcz1mYWxzZTt9fUNvbXByZXNzZWRUZXh0dXJlLnByb3RvdHlwZS5pc0NvbXByZXNzZWRUZXh0dXJlPXRydWU7Y2xhc3MgQ2FudmFzVGV4dHVyZSBleHRlbmRzIFRleHR1cmV7Y29uc3RydWN0b3IoY2FudmFzLG1hcHBpbmcsd3JhcFMsd3JhcFQsbWFnRmlsdGVyLG1pbkZpbHRlcixmb3JtYXQsdHlwZSxhbmlzb3Ryb3B5KXtzdXBlcihjYW52YXMsbWFwcGluZyx3cmFwUyx3cmFwVCxtYWdGaWx0ZXIsbWluRmlsdGVyLGZvcm1hdCx0eXBlLGFuaXNvdHJvcHkpO3RoaXMubmVlZHNVcGRhdGU9dHJ1ZTt9fUNhbnZhc1RleHR1cmUucHJvdG90eXBlLmlzQ2FudmFzVGV4dHVyZT10cnVlO25ldyBWZWN0b3IzKCk7bmV3IFZlY3RvcjMoKTtuZXcgVmVjdG9yMygpO25ldyBUcmlhbmdsZSgpOy8qKgoJICogRXh0ZW5zaWJsZSBjdXJ2ZSBvYmplY3QuCgkgKgoJICogU29tZSBjb21tb24gb2YgY3VydmUgbWV0aG9kczoKCSAqIC5nZXRQb2ludCggdCwgb3B0aW9uYWxUYXJnZXQgKSwgLmdldFRhbmdlbnQoIHQsIG9wdGlvbmFsVGFyZ2V0ICkKCSAqIC5nZXRQb2ludEF0KCB1LCBvcHRpb25hbFRhcmdldCApLCAuZ2V0VGFuZ2VudEF0KCB1LCBvcHRpb25hbFRhcmdldCApCgkgKiAuZ2V0UG9pbnRzKCksIC5nZXRTcGFjZWRQb2ludHMoKQoJICogLmdldExlbmd0aCgpCgkgKiAudXBkYXRlQXJjTGVuZ3RocygpCgkgKgoJICogVGhpcyBmb2xsb3dpbmcgY3VydmVzIGluaGVyaXQgZnJvbSBUSFJFRS5DdXJ2ZToKCSAqCgkgKiAtLSAyRCBjdXJ2ZXMgLS0KCSAqIFRIUkVFLkFyY0N1cnZlCgkgKiBUSFJFRS5DdWJpY0JlemllckN1cnZlCgkgKiBUSFJFRS5FbGxpcHNlQ3VydmUKCSAqIFRIUkVFLkxpbmVDdXJ2ZQoJICogVEhSRUUuUXVhZHJhdGljQmV6aWVyQ3VydmUKCSAqIFRIUkVFLlNwbGluZUN1cnZlCgkgKgoJICogLS0gM0QgY3VydmVzIC0tCgkgKiBUSFJFRS5DYXRtdWxsUm9tQ3VydmUzCgkgKiBUSFJFRS5DdWJpY0JlemllckN1cnZlMwoJICogVEhSRUUuTGluZUN1cnZlMwoJICogVEhSRUUuUXVhZHJhdGljQmV6aWVyQ3VydmUzCgkgKgoJICogQSBzZXJpZXMgb2YgY3VydmVzIGNhbiBiZSByZXByZXNlbnRlZCBhcyBhIFRIUkVFLkN1cnZlUGF0aC4KCSAqCgkgKiovY2xhc3MgQ3VydmV7Y29uc3RydWN0b3IoKXt0aGlzLnR5cGU9J0N1cnZlJzt0aGlzLmFyY0xlbmd0aERpdmlzaW9ucz0yMDA7fS8vIFZpcnR1YWwgYmFzZSBjbGFzcyBtZXRob2QgdG8gb3ZlcndyaXRlIGFuZCBpbXBsZW1lbnQgaW4gc3ViY2xhc3NlcwoJLy8JLSB0IFswIC4uIDFdCglnZXRQb2ludCgpe2NvbnNvbGUud2FybignVEhSRUUuQ3VydmU6IC5nZXRQb2ludCgpIG5vdCBpbXBsZW1lbnRlZC4nKTtyZXR1cm4gbnVsbDt9Ly8gR2V0IHBvaW50IGF0IHJlbGF0aXZlIHBvc2l0aW9uIGluIGN1cnZlIGFjY29yZGluZyB0byBhcmMgbGVuZ3RoCgkvLyAtIHUgWzAgLi4gMV0KCWdldFBvaW50QXQodSxvcHRpb25hbFRhcmdldCl7Y29uc3QgdD10aGlzLmdldFV0b1RtYXBwaW5nKHUpO3JldHVybiB0aGlzLmdldFBvaW50KHQsb3B0aW9uYWxUYXJnZXQpO30vLyBHZXQgc2VxdWVuY2Ugb2YgcG9pbnRzIHVzaW5nIGdldFBvaW50KCB0ICkKCWdldFBvaW50cyhkaXZpc2lvbnMpe2lmKGRpdmlzaW9ucz09PXZvaWQgMCl7ZGl2aXNpb25zPTU7fWNvbnN0IHBvaW50cz1bXTtmb3IobGV0IGQ9MDtkPD1kaXZpc2lvbnM7ZCsrKXtwb2ludHMucHVzaCh0aGlzLmdldFBvaW50KGQvZGl2aXNpb25zKSk7fXJldHVybiBwb2ludHM7fS8vIEdldCBzZXF1ZW5jZSBvZiBwb2ludHMgdXNpbmcgZ2V0UG9pbnRBdCggdSApCglnZXRTcGFjZWRQb2ludHMoZGl2aXNpb25zKXtpZihkaXZpc2lvbnM9PT12b2lkIDApe2RpdmlzaW9ucz01O31jb25zdCBwb2ludHM9W107Zm9yKGxldCBkPTA7ZDw9ZGl2aXNpb25zO2QrKyl7cG9pbnRzLnB1c2godGhpcy5nZXRQb2ludEF0KGQvZGl2aXNpb25zKSk7fXJldHVybiBwb2ludHM7fS8vIEdldCB0b3RhbCBjdXJ2ZSBhcmMgbGVuZ3RoCglnZXRMZW5ndGgoKXtjb25zdCBsZW5ndGhzPXRoaXMuZ2V0TGVuZ3RocygpO3JldHVybiBsZW5ndGhzW2xlbmd0aHMubGVuZ3RoLTFdO30vLyBHZXQgbGlzdCBvZiBjdW11bGF0aXZlIHNlZ21lbnQgbGVuZ3RocwoJZ2V0TGVuZ3RocyhkaXZpc2lvbnMpe2lmKGRpdmlzaW9ucz09PXZvaWQgMCl7ZGl2aXNpb25zPXRoaXMuYXJjTGVuZ3RoRGl2aXNpb25zO31pZih0aGlzLmNhY2hlQXJjTGVuZ3RocyYmdGhpcy5jYWNoZUFyY0xlbmd0aHMubGVuZ3RoPT09ZGl2aXNpb25zKzEmJiF0aGlzLm5lZWRzVXBkYXRlKXtyZXR1cm4gdGhpcy5jYWNoZUFyY0xlbmd0aHM7fXRoaXMubmVlZHNVcGRhdGU9ZmFsc2U7Y29uc3QgY2FjaGU9W107bGV0IGN1cnJlbnQsbGFzdD10aGlzLmdldFBvaW50KDApO2xldCBzdW09MDtjYWNoZS5wdXNoKDApO2ZvcihsZXQgcD0xO3A8PWRpdmlzaW9ucztwKyspe2N1cnJlbnQ9dGhpcy5nZXRQb2ludChwL2RpdmlzaW9ucyk7c3VtKz1jdXJyZW50LmRpc3RhbmNlVG8obGFzdCk7Y2FjaGUucHVzaChzdW0pO2xhc3Q9Y3VycmVudDt9dGhpcy5jYWNoZUFyY0xlbmd0aHM9Y2FjaGU7cmV0dXJuIGNhY2hlOy8vIHsgc3VtczogY2FjaGUsIHN1bTogc3VtIH07IFN1bSBpcyBpbiB0aGUgbGFzdCBlbGVtZW50LgoJfXVwZGF0ZUFyY0xlbmd0aHMoKXt0aGlzLm5lZWRzVXBkYXRlPXRydWU7dGhpcy5nZXRMZW5ndGhzKCk7fS8vIEdpdmVuIHUgKCAwIC4uIDEgKSwgZ2V0IGEgdCB0byBmaW5kIHAuIFRoaXMgZ2l2ZXMgeW91IHBvaW50cyB3aGljaCBhcmUgZXF1aWRpc3RhbnQKCWdldFV0b1RtYXBwaW5nKHUsZGlzdGFuY2Upe2NvbnN0IGFyY0xlbmd0aHM9dGhpcy5nZXRMZW5ndGhzKCk7bGV0IGk9MDtjb25zdCBpbD1hcmNMZW5ndGhzLmxlbmd0aDtsZXQgdGFyZ2V0QXJjTGVuZ3RoOy8vIFRoZSB0YXJnZXRlZCB1IGRpc3RhbmNlIHZhbHVlIHRvIGdldAoJaWYoZGlzdGFuY2Upe3RhcmdldEFyY0xlbmd0aD1kaXN0YW5jZTt9ZWxzZSB7dGFyZ2V0QXJjTGVuZ3RoPXUqYXJjTGVuZ3Roc1tpbC0xXTt9Ly8gYmluYXJ5IHNlYXJjaCBmb3IgdGhlIGluZGV4IHdpdGggbGFyZ2VzdCB2YWx1ZSBzbWFsbGVyIHRoYW4gdGFyZ2V0IHUgZGlzdGFuY2UKCWxldCBsb3c9MCxoaWdoPWlsLTEsY29tcGFyaXNvbjt3aGlsZShsb3c8PWhpZ2gpe2k9TWF0aC5mbG9vcihsb3crKGhpZ2gtbG93KS8yKTsvLyBsZXNzIGxpa2VseSB0byBvdmVyZmxvdywgdGhvdWdoIHByb2JhYmx5IG5vdCBpc3N1ZSBoZXJlLCBKUyBkb2Vzbid0IHJlYWxseSBoYXZlIGludGVnZXJzLCBhbGwgbnVtYmVycyBhcmUgZmxvYXRzCgljb21wYXJpc29uPWFyY0xlbmd0aHNbaV0tdGFyZ2V0QXJjTGVuZ3RoO2lmKGNvbXBhcmlzb248MCl7bG93PWkrMTt9ZWxzZSBpZihjb21wYXJpc29uPjApe2hpZ2g9aS0xO31lbHNlIHtoaWdoPWk7YnJlYWs7Ly8gRE9ORQoJfX1pPWhpZ2g7aWYoYXJjTGVuZ3Roc1tpXT09PXRhcmdldEFyY0xlbmd0aCl7cmV0dXJuIGkvKGlsLTEpO30vLyB3ZSBjb3VsZCBnZXQgZmluZXIgZ3JhaW4gYXQgbGVuZ3Rocywgb3IgdXNlIHNpbXBsZSBpbnRlcnBvbGF0aW9uIGJldHdlZW4gdHdvIHBvaW50cwoJY29uc3QgbGVuZ3RoQmVmb3JlPWFyY0xlbmd0aHNbaV07Y29uc3QgbGVuZ3RoQWZ0ZXI9YXJjTGVuZ3Roc1tpKzFdO2NvbnN0IHNlZ21lbnRMZW5ndGg9bGVuZ3RoQWZ0ZXItbGVuZ3RoQmVmb3JlOy8vIGRldGVybWluZSB3aGVyZSB3ZSBhcmUgYmV0d2VlbiB0aGUgJ2JlZm9yZScgYW5kICdhZnRlcicgcG9pbnRzCgljb25zdCBzZWdtZW50RnJhY3Rpb249KHRhcmdldEFyY0xlbmd0aC1sZW5ndGhCZWZvcmUpL3NlZ21lbnRMZW5ndGg7Ly8gYWRkIHRoYXQgZnJhY3Rpb25hbCBhbW91bnQgdG8gdAoJY29uc3QgdD0oaStzZWdtZW50RnJhY3Rpb24pLyhpbC0xKTtyZXR1cm4gdDt9Ly8gUmV0dXJucyBhIHVuaXQgdmVjdG9yIHRhbmdlbnQgYXQgdAoJLy8gSW4gY2FzZSBhbnkgc3ViIGN1cnZlIGRvZXMgbm90IGltcGxlbWVudCBpdHMgdGFuZ2VudCBkZXJpdmF0aW9uLAoJLy8gMiBwb2ludHMgYSBzbWFsbCBkZWx0YSBhcGFydCB3aWxsIGJlIHVzZWQgdG8gZmluZCBpdHMgZ3JhZGllbnQKCS8vIHdoaWNoIHNlZW1zIHRvIGdpdmUgYSByZWFzb25hYmxlIGFwcHJveGltYXRpb24KCWdldFRhbmdlbnQodCxvcHRpb25hbFRhcmdldCl7Y29uc3QgZGVsdGE9MC4wMDAxO2xldCB0MT10LWRlbHRhO2xldCB0Mj10K2RlbHRhOy8vIENhcHBpbmcgaW4gY2FzZSBvZiBkYW5nZXIKCWlmKHQxPDApdDE9MDtpZih0Mj4xKXQyPTE7Y29uc3QgcHQxPXRoaXMuZ2V0UG9pbnQodDEpO2NvbnN0IHB0Mj10aGlzLmdldFBvaW50KHQyKTtjb25zdCB0YW5nZW50PW9wdGlvbmFsVGFyZ2V0fHwocHQxLmlzVmVjdG9yMj9uZXcgVmVjdG9yMigpOm5ldyBWZWN0b3IzKCkpO3RhbmdlbnQuY29weShwdDIpLnN1YihwdDEpLm5vcm1hbGl6ZSgpO3JldHVybiB0YW5nZW50O31nZXRUYW5nZW50QXQodSxvcHRpb25hbFRhcmdldCl7Y29uc3QgdD10aGlzLmdldFV0b1RtYXBwaW5nKHUpO3JldHVybiB0aGlzLmdldFRhbmdlbnQodCxvcHRpb25hbFRhcmdldCk7fWNvbXB1dGVGcmVuZXRGcmFtZXMoc2VnbWVudHMsY2xvc2VkKXsvLyBzZWUgaHR0cDovL3d3dy5jcy5pbmRpYW5hLmVkdS9wdWIvdGVjaHJlcG9ydHMvVFI0MjUucGRmCgljb25zdCBub3JtYWw9bmV3IFZlY3RvcjMoKTtjb25zdCB0YW5nZW50cz1bXTtjb25zdCBub3JtYWxzPVtdO2NvbnN0IGJpbm9ybWFscz1bXTtjb25zdCB2ZWM9bmV3IFZlY3RvcjMoKTtjb25zdCBtYXQ9bmV3IE1hdHJpeDQoKTsvLyBjb21wdXRlIHRoZSB0YW5nZW50IHZlY3RvcnMgZm9yIGVhY2ggc2VnbWVudCBvbiB0aGUgY3VydmUKCWZvcihsZXQgaT0wO2k8PXNlZ21lbnRzO2krKyl7Y29uc3QgdT1pL3NlZ21lbnRzO3RhbmdlbnRzW2ldPXRoaXMuZ2V0VGFuZ2VudEF0KHUsbmV3IFZlY3RvcjMoKSk7fS8vIHNlbGVjdCBhbiBpbml0aWFsIG5vcm1hbCB2ZWN0b3IgcGVycGVuZGljdWxhciB0byB0aGUgZmlyc3QgdGFuZ2VudCB2ZWN0b3IsCgkvLyBhbmQgaW4gdGhlIGRpcmVjdGlvbiBvZiB0aGUgbWluaW11bSB0YW5nZW50IHh5eiBjb21wb25lbnQKCW5vcm1hbHNbMF09bmV3IFZlY3RvcjMoKTtiaW5vcm1hbHNbMF09bmV3IFZlY3RvcjMoKTtsZXQgbWluPU51bWJlci5NQVhfVkFMVUU7Y29uc3QgdHg9TWF0aC5hYnModGFuZ2VudHNbMF0ueCk7Y29uc3QgdHk9TWF0aC5hYnModGFuZ2VudHNbMF0ueSk7Y29uc3QgdHo9TWF0aC5hYnModGFuZ2VudHNbMF0ueik7aWYodHg8PW1pbil7bWluPXR4O25vcm1hbC5zZXQoMSwwLDApO31pZih0eTw9bWluKXttaW49dHk7bm9ybWFsLnNldCgwLDEsMCk7fWlmKHR6PD1taW4pe25vcm1hbC5zZXQoMCwwLDEpO312ZWMuY3Jvc3NWZWN0b3JzKHRhbmdlbnRzWzBdLG5vcm1hbCkubm9ybWFsaXplKCk7bm9ybWFsc1swXS5jcm9zc1ZlY3RvcnModGFuZ2VudHNbMF0sdmVjKTtiaW5vcm1hbHNbMF0uY3Jvc3NWZWN0b3JzKHRhbmdlbnRzWzBdLG5vcm1hbHNbMF0pOy8vIGNvbXB1dGUgdGhlIHNsb3dseS12YXJ5aW5nIG5vcm1hbCBhbmQgYmlub3JtYWwgdmVjdG9ycyBmb3IgZWFjaCBzZWdtZW50IG9uIHRoZSBjdXJ2ZQoJZm9yKGxldCBpPTE7aTw9c2VnbWVudHM7aSsrKXtub3JtYWxzW2ldPW5vcm1hbHNbaS0xXS5jbG9uZSgpO2Jpbm9ybWFsc1tpXT1iaW5vcm1hbHNbaS0xXS5jbG9uZSgpO3ZlYy5jcm9zc1ZlY3RvcnModGFuZ2VudHNbaS0xXSx0YW5nZW50c1tpXSk7aWYodmVjLmxlbmd0aCgpPk51bWJlci5FUFNJTE9OKXt2ZWMubm9ybWFsaXplKCk7Y29uc3QgdGhldGE9TWF0aC5hY29zKGNsYW1wKHRhbmdlbnRzW2ktMV0uZG90KHRhbmdlbnRzW2ldKSwtMSwxKSk7Ly8gY2xhbXAgZm9yIGZsb2F0aW5nIHB0IGVycm9ycwoJbm9ybWFsc1tpXS5hcHBseU1hdHJpeDQobWF0Lm1ha2VSb3RhdGlvbkF4aXModmVjLHRoZXRhKSk7fWJpbm9ybWFsc1tpXS5jcm9zc1ZlY3RvcnModGFuZ2VudHNbaV0sbm9ybWFsc1tpXSk7fS8vIGlmIHRoZSBjdXJ2ZSBpcyBjbG9zZWQsIHBvc3Rwcm9jZXNzIHRoZSB2ZWN0b3JzIHNvIHRoZSBmaXJzdCBhbmQgbGFzdCBub3JtYWwgdmVjdG9ycyBhcmUgdGhlIHNhbWUKCWlmKGNsb3NlZD09PXRydWUpe2xldCB0aGV0YT1NYXRoLmFjb3MoY2xhbXAobm9ybWFsc1swXS5kb3Qobm9ybWFsc1tzZWdtZW50c10pLC0xLDEpKTt0aGV0YS89c2VnbWVudHM7aWYodGFuZ2VudHNbMF0uZG90KHZlYy5jcm9zc1ZlY3RvcnMobm9ybWFsc1swXSxub3JtYWxzW3NlZ21lbnRzXSkpPjApe3RoZXRhPS10aGV0YTt9Zm9yKGxldCBpPTE7aTw9c2VnbWVudHM7aSsrKXsvLyB0d2lzdCBhIGxpdHRsZS4uLgoJbm9ybWFsc1tpXS5hcHBseU1hdHJpeDQobWF0Lm1ha2VSb3RhdGlvbkF4aXModGFuZ2VudHNbaV0sdGhldGEqaSkpO2Jpbm9ybWFsc1tpXS5jcm9zc1ZlY3RvcnModGFuZ2VudHNbaV0sbm9ybWFsc1tpXSk7fX1yZXR1cm4ge3RhbmdlbnRzOnRhbmdlbnRzLG5vcm1hbHM6bm9ybWFscyxiaW5vcm1hbHM6Ymlub3JtYWxzfTt9Y2xvbmUoKXtyZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IoKS5jb3B5KHRoaXMpO31jb3B5KHNvdXJjZSl7dGhpcy5hcmNMZW5ndGhEaXZpc2lvbnM9c291cmNlLmFyY0xlbmd0aERpdmlzaW9ucztyZXR1cm4gdGhpczt9dG9KU09OKCl7Y29uc3QgZGF0YT17bWV0YWRhdGE6e3ZlcnNpb246NC41LHR5cGU6J0N1cnZlJyxnZW5lcmF0b3I6J0N1cnZlLnRvSlNPTid9fTtkYXRhLmFyY0xlbmd0aERpdmlzaW9ucz10aGlzLmFyY0xlbmd0aERpdmlzaW9ucztkYXRhLnR5cGU9dGhpcy50eXBlO3JldHVybiBkYXRhO31mcm9tSlNPTihqc29uKXt0aGlzLmFyY0xlbmd0aERpdmlzaW9ucz1qc29uLmFyY0xlbmd0aERpdmlzaW9ucztyZXR1cm4gdGhpczt9fWNsYXNzIEVsbGlwc2VDdXJ2ZSBleHRlbmRzIEN1cnZle2NvbnN0cnVjdG9yKGFYLGFZLHhSYWRpdXMseVJhZGl1cyxhU3RhcnRBbmdsZSxhRW5kQW5nbGUsYUNsb2Nrd2lzZSxhUm90YXRpb24pe2lmKGFYPT09dm9pZCAwKXthWD0wO31pZihhWT09PXZvaWQgMCl7YVk9MDt9aWYoeFJhZGl1cz09PXZvaWQgMCl7eFJhZGl1cz0xO31pZih5UmFkaXVzPT09dm9pZCAwKXt5UmFkaXVzPTE7fWlmKGFTdGFydEFuZ2xlPT09dm9pZCAwKXthU3RhcnRBbmdsZT0wO31pZihhRW5kQW5nbGU9PT12b2lkIDApe2FFbmRBbmdsZT1NYXRoLlBJKjI7fWlmKGFDbG9ja3dpc2U9PT12b2lkIDApe2FDbG9ja3dpc2U9ZmFsc2U7fWlmKGFSb3RhdGlvbj09PXZvaWQgMCl7YVJvdGF0aW9uPTA7fXN1cGVyKCk7dGhpcy50eXBlPSdFbGxpcHNlQ3VydmUnO3RoaXMuYVg9YVg7dGhpcy5hWT1hWTt0aGlzLnhSYWRpdXM9eFJhZGl1czt0aGlzLnlSYWRpdXM9eVJhZGl1czt0aGlzLmFTdGFydEFuZ2xlPWFTdGFydEFuZ2xlO3RoaXMuYUVuZEFuZ2xlPWFFbmRBbmdsZTt0aGlzLmFDbG9ja3dpc2U9YUNsb2Nrd2lzZTt0aGlzLmFSb3RhdGlvbj1hUm90YXRpb247fWdldFBvaW50KHQsb3B0aW9uYWxUYXJnZXQpe2NvbnN0IHBvaW50PW9wdGlvbmFsVGFyZ2V0fHxuZXcgVmVjdG9yMigpO2NvbnN0IHR3b1BpPU1hdGguUEkqMjtsZXQgZGVsdGFBbmdsZT10aGlzLmFFbmRBbmdsZS10aGlzLmFTdGFydEFuZ2xlO2NvbnN0IHNhbWVQb2ludHM9TWF0aC5hYnMoZGVsdGFBbmdsZSk8TnVtYmVyLkVQU0lMT047Ly8gZW5zdXJlcyB0aGF0IGRlbHRhQW5nbGUgaXMgMCAuLiAyIFBJCgl3aGlsZShkZWx0YUFuZ2xlPDApZGVsdGFBbmdsZSs9dHdvUGk7d2hpbGUoZGVsdGFBbmdsZT50d29QaSlkZWx0YUFuZ2xlLT10d29QaTtpZihkZWx0YUFuZ2xlPE51bWJlci5FUFNJTE9OKXtpZihzYW1lUG9pbnRzKXtkZWx0YUFuZ2xlPTA7fWVsc2Uge2RlbHRhQW5nbGU9dHdvUGk7fX1pZih0aGlzLmFDbG9ja3dpc2U9PT10cnVlJiYhc2FtZVBvaW50cyl7aWYoZGVsdGFBbmdsZT09PXR3b1BpKXtkZWx0YUFuZ2xlPS10d29QaTt9ZWxzZSB7ZGVsdGFBbmdsZT1kZWx0YUFuZ2xlLXR3b1BpO319Y29uc3QgYW5nbGU9dGhpcy5hU3RhcnRBbmdsZSt0KmRlbHRhQW5nbGU7bGV0IHg9dGhpcy5hWCt0aGlzLnhSYWRpdXMqTWF0aC5jb3MoYW5nbGUpO2xldCB5PXRoaXMuYVkrdGhpcy55UmFkaXVzKk1hdGguc2luKGFuZ2xlKTtpZih0aGlzLmFSb3RhdGlvbiE9PTApe2NvbnN0IGNvcz1NYXRoLmNvcyh0aGlzLmFSb3RhdGlvbik7Y29uc3Qgc2luPU1hdGguc2luKHRoaXMuYVJvdGF0aW9uKTtjb25zdCB0eD14LXRoaXMuYVg7Y29uc3QgdHk9eS10aGlzLmFZOy8vIFJvdGF0ZSB0aGUgcG9pbnQgYWJvdXQgdGhlIGNlbnRlciBvZiB0aGUgZWxsaXBzZS4KCXg9dHgqY29zLXR5KnNpbit0aGlzLmFYO3k9dHgqc2luK3R5KmNvcyt0aGlzLmFZO31yZXR1cm4gcG9pbnQuc2V0KHgseSk7fWNvcHkoc291cmNlKXtzdXBlci5jb3B5KHNvdXJjZSk7dGhpcy5hWD1zb3VyY2UuYVg7dGhpcy5hWT1zb3VyY2UuYVk7dGhpcy54UmFkaXVzPXNvdXJjZS54UmFkaXVzO3RoaXMueVJhZGl1cz1zb3VyY2UueVJhZGl1czt0aGlzLmFTdGFydEFuZ2xlPXNvdXJjZS5hU3RhcnRBbmdsZTt0aGlzLmFFbmRBbmdsZT1zb3VyY2UuYUVuZEFuZ2xlO3RoaXMuYUNsb2Nrd2lzZT1zb3VyY2UuYUNsb2Nrd2lzZTt0aGlzLmFSb3RhdGlvbj1zb3VyY2UuYVJvdGF0aW9uO3JldHVybiB0aGlzO310b0pTT04oKXtjb25zdCBkYXRhPXN1cGVyLnRvSlNPTigpO2RhdGEuYVg9dGhpcy5hWDtkYXRhLmFZPXRoaXMuYVk7ZGF0YS54UmFkaXVzPXRoaXMueFJhZGl1cztkYXRhLnlSYWRpdXM9dGhpcy55UmFkaXVzO2RhdGEuYVN0YXJ0QW5nbGU9dGhpcy5hU3RhcnRBbmdsZTtkYXRhLmFFbmRBbmdsZT10aGlzLmFFbmRBbmdsZTtkYXRhLmFDbG9ja3dpc2U9dGhpcy5hQ2xvY2t3aXNlO2RhdGEuYVJvdGF0aW9uPXRoaXMuYVJvdGF0aW9uO3JldHVybiBkYXRhO31mcm9tSlNPTihqc29uKXtzdXBlci5mcm9tSlNPTihqc29uKTt0aGlzLmFYPWpzb24uYVg7dGhpcy5hWT1qc29uLmFZO3RoaXMueFJhZGl1cz1qc29uLnhSYWRpdXM7dGhpcy55UmFkaXVzPWpzb24ueVJhZGl1czt0aGlzLmFTdGFydEFuZ2xlPWpzb24uYVN0YXJ0QW5nbGU7dGhpcy5hRW5kQW5nbGU9anNvbi5hRW5kQW5nbGU7dGhpcy5hQ2xvY2t3aXNlPWpzb24uYUNsb2Nrd2lzZTt0aGlzLmFSb3RhdGlvbj1qc29uLmFSb3RhdGlvbjtyZXR1cm4gdGhpczt9fUVsbGlwc2VDdXJ2ZS5wcm90b3R5cGUuaXNFbGxpcHNlQ3VydmU9dHJ1ZTtjbGFzcyBBcmNDdXJ2ZSBleHRlbmRzIEVsbGlwc2VDdXJ2ZXtjb25zdHJ1Y3RvcihhWCxhWSxhUmFkaXVzLGFTdGFydEFuZ2xlLGFFbmRBbmdsZSxhQ2xvY2t3aXNlKXtzdXBlcihhWCxhWSxhUmFkaXVzLGFSYWRpdXMsYVN0YXJ0QW5nbGUsYUVuZEFuZ2xlLGFDbG9ja3dpc2UpO3RoaXMudHlwZT0nQXJjQ3VydmUnO319QXJjQ3VydmUucHJvdG90eXBlLmlzQXJjQ3VydmU9dHJ1ZTsvKioKCSAqIENlbnRyaXBldGFsIENhdG11bGxSb20gQ3VydmUgLSB3aGljaCBpcyB1c2VmdWwgZm9yIGF2b2lkaW5nCgkgKiBjdXNwcyBhbmQgc2VsZi1pbnRlcnNlY3Rpb25zIGluIG5vbi11bmlmb3JtIGNhdG11bGwgcm9tIGN1cnZlcy4KCSAqIGh0dHA6Ly93d3cuY2VteXVrc2VsLmNvbS9yZXNlYXJjaC9jYXRtdWxscm9tX3BhcmFtL2NhdG11bGxyb20ucGRmCgkgKgoJICogY3VydmUudHlwZSBhY2NlcHRzIGNlbnRyaXBldGFsKGRlZmF1bHQpLCBjaG9yZGFsIGFuZCBjYXRtdWxscm9tCgkgKiBjdXJ2ZS50ZW5zaW9uIGlzIHVzZWQgZm9yIGNhdG11bGxyb20gd2hpY2ggZGVmYXVsdHMgdG8gMC41CgkgKi8gLyoKCUJhc2VkIG9uIGFuIG9wdGltaXplZCBjKysgc29sdXRpb24gaW4KCSAtIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvOTQ4OTczNi9jYXRtdWxsLXJvbS1jdXJ2ZS13aXRoLW5vLWN1c3BzLWFuZC1uby1zZWxmLWludGVyc2VjdGlvbnMvCgkgLSBodHRwOi8vaWRlb25lLmNvbS9Ob0ViVk0KCglUaGlzIEN1YmljUG9seSBjbGFzcyBjb3VsZCBiZSB1c2VkIGZvciByZXVzaW5nIHNvbWUgdmFyaWFibGVzIGFuZCBjYWxjdWxhdGlvbnMsCglidXQgZm9yIHRocmVlLmpzIGN1cnZlIHVzZSwgaXQgY291bGQgYmUgcG9zc2libGUgaW5saW5lZCBhbmQgZmxhdHRlbiBpbnRvIGEgc2luZ2xlIGZ1bmN0aW9uIGNhbGwKCXdoaWNoIGNhbiBiZSBwbGFjZWQgaW4gQ3VydmVVdGlscy4KCSovZnVuY3Rpb24gQ3ViaWNQb2x5KCl7bGV0IGMwPTAsYzE9MCxjMj0wLGMzPTA7LyoKCQkgKiBDb21wdXRlIGNvZWZmaWNpZW50cyBmb3IgYSBjdWJpYyBwb2x5bm9taWFsCgkJICogICBwKHMpID0gYzAgKyBjMSpzICsgYzIqc14yICsgYzMqc14zCgkJICogc3VjaCB0aGF0CgkJICogICBwKDApID0geDAsIHAoMSkgPSB4MQoJCSAqICBhbmQKCQkgKiAgIHAnKDApID0gdDAsIHAnKDEpID0gdDEuCgkJICovZnVuY3Rpb24gaW5pdCh4MCx4MSx0MCx0MSl7YzA9eDA7YzE9dDA7YzI9LTMqeDArMyp4MS0yKnQwLXQxO2MzPTIqeDAtMip4MSt0MCt0MTt9cmV0dXJuIHtpbml0Q2F0bXVsbFJvbTpmdW5jdGlvbih4MCx4MSx4Mix4Myx0ZW5zaW9uKXtpbml0KHgxLHgyLHRlbnNpb24qKHgyLXgwKSx0ZW5zaW9uKih4My14MSkpO30saW5pdE5vbnVuaWZvcm1DYXRtdWxsUm9tOmZ1bmN0aW9uKHgwLHgxLHgyLHgzLGR0MCxkdDEsZHQyKXsvLyBjb21wdXRlIHRhbmdlbnRzIHdoZW4gcGFyYW1ldGVyaXplZCBpbiBbdDEsdDJdCglsZXQgdDE9KHgxLXgwKS9kdDAtKHgyLXgwKS8oZHQwK2R0MSkrKHgyLXgxKS9kdDE7bGV0IHQyPSh4Mi14MSkvZHQxLSh4My14MSkvKGR0MStkdDIpKyh4My14MikvZHQyOy8vIHJlc2NhbGUgdGFuZ2VudHMgZm9yIHBhcmFtZXRyaXphdGlvbiBpbiBbMCwxXQoJdDEqPWR0MTt0Mio9ZHQxO2luaXQoeDEseDIsdDEsdDIpO30sY2FsYzpmdW5jdGlvbih0KXtjb25zdCB0Mj10KnQ7Y29uc3QgdDM9dDIqdDtyZXR1cm4gYzArYzEqdCtjMip0MitjMyp0Mzt9fTt9Ly8KCWNvbnN0IHRtcD1uZXcgVmVjdG9yMygpO2NvbnN0IHB4PW5ldyBDdWJpY1BvbHkoKSxweT1uZXcgQ3ViaWNQb2x5KCkscHo9bmV3IEN1YmljUG9seSgpO2NsYXNzIENhdG11bGxSb21DdXJ2ZTMgZXh0ZW5kcyBDdXJ2ZXtjb25zdHJ1Y3Rvcihwb2ludHMsY2xvc2VkLGN1cnZlVHlwZSx0ZW5zaW9uKXtpZihwb2ludHM9PT12b2lkIDApe3BvaW50cz1bXTt9aWYoY2xvc2VkPT09dm9pZCAwKXtjbG9zZWQ9ZmFsc2U7fWlmKGN1cnZlVHlwZT09PXZvaWQgMCl7Y3VydmVUeXBlPSdjZW50cmlwZXRhbCc7fWlmKHRlbnNpb249PT12b2lkIDApe3RlbnNpb249MC41O31zdXBlcigpO3RoaXMudHlwZT0nQ2F0bXVsbFJvbUN1cnZlMyc7dGhpcy5wb2ludHM9cG9pbnRzO3RoaXMuY2xvc2VkPWNsb3NlZDt0aGlzLmN1cnZlVHlwZT1jdXJ2ZVR5cGU7dGhpcy50ZW5zaW9uPXRlbnNpb247fWdldFBvaW50KHQsb3B0aW9uYWxUYXJnZXQpe2lmKG9wdGlvbmFsVGFyZ2V0PT09dm9pZCAwKXtvcHRpb25hbFRhcmdldD1uZXcgVmVjdG9yMygpO31jb25zdCBwb2ludD1vcHRpb25hbFRhcmdldDtjb25zdCBwb2ludHM9dGhpcy5wb2ludHM7Y29uc3QgbD1wb2ludHMubGVuZ3RoO2NvbnN0IHA9KGwtKHRoaXMuY2xvc2VkPzA6MSkpKnQ7bGV0IGludFBvaW50PU1hdGguZmxvb3IocCk7bGV0IHdlaWdodD1wLWludFBvaW50O2lmKHRoaXMuY2xvc2VkKXtpbnRQb2ludCs9aW50UG9pbnQ+MD8wOihNYXRoLmZsb29yKE1hdGguYWJzKGludFBvaW50KS9sKSsxKSpsO31lbHNlIGlmKHdlaWdodD09PTAmJmludFBvaW50PT09bC0xKXtpbnRQb2ludD1sLTI7d2VpZ2h0PTE7fWxldCBwMCxwMzsvLyA0IHBvaW50cyAocDEgJiBwMiBkZWZpbmVkIGJlbG93KQoJaWYodGhpcy5jbG9zZWR8fGludFBvaW50PjApe3AwPXBvaW50c1soaW50UG9pbnQtMSklbF07fWVsc2Ugey8vIGV4dHJhcG9sYXRlIGZpcnN0IHBvaW50Cgl0bXAuc3ViVmVjdG9ycyhwb2ludHNbMF0scG9pbnRzWzFdKS5hZGQocG9pbnRzWzBdKTtwMD10bXA7fWNvbnN0IHAxPXBvaW50c1tpbnRQb2ludCVsXTtjb25zdCBwMj1wb2ludHNbKGludFBvaW50KzEpJWxdO2lmKHRoaXMuY2xvc2VkfHxpbnRQb2ludCsyPGwpe3AzPXBvaW50c1soaW50UG9pbnQrMiklbF07fWVsc2Ugey8vIGV4dHJhcG9sYXRlIGxhc3QgcG9pbnQKCXRtcC5zdWJWZWN0b3JzKHBvaW50c1tsLTFdLHBvaW50c1tsLTJdKS5hZGQocG9pbnRzW2wtMV0pO3AzPXRtcDt9aWYodGhpcy5jdXJ2ZVR5cGU9PT0nY2VudHJpcGV0YWwnfHx0aGlzLmN1cnZlVHlwZT09PSdjaG9yZGFsJyl7Ly8gaW5pdCBDZW50cmlwZXRhbCAvIENob3JkYWwgQ2F0bXVsbC1Sb20KCWNvbnN0IHBvdz10aGlzLmN1cnZlVHlwZT09PSdjaG9yZGFsJz8wLjU6MC4yNTtsZXQgZHQwPU1hdGgucG93KHAwLmRpc3RhbmNlVG9TcXVhcmVkKHAxKSxwb3cpO2xldCBkdDE9TWF0aC5wb3cocDEuZGlzdGFuY2VUb1NxdWFyZWQocDIpLHBvdyk7bGV0IGR0Mj1NYXRoLnBvdyhwMi5kaXN0YW5jZVRvU3F1YXJlZChwMykscG93KTsvLyBzYWZldHkgY2hlY2sgZm9yIHJlcGVhdGVkIHBvaW50cwoJaWYoZHQxPDFlLTQpZHQxPTEuMDtpZihkdDA8MWUtNClkdDA9ZHQxO2lmKGR0MjwxZS00KWR0Mj1kdDE7cHguaW5pdE5vbnVuaWZvcm1DYXRtdWxsUm9tKHAwLngscDEueCxwMi54LHAzLngsZHQwLGR0MSxkdDIpO3B5LmluaXROb251bmlmb3JtQ2F0bXVsbFJvbShwMC55LHAxLnkscDIueSxwMy55LGR0MCxkdDEsZHQyKTtwei5pbml0Tm9udW5pZm9ybUNhdG11bGxSb20ocDAueixwMS56LHAyLnoscDMueixkdDAsZHQxLGR0Mik7fWVsc2UgaWYodGhpcy5jdXJ2ZVR5cGU9PT0nY2F0bXVsbHJvbScpe3B4LmluaXRDYXRtdWxsUm9tKHAwLngscDEueCxwMi54LHAzLngsdGhpcy50ZW5zaW9uKTtweS5pbml0Q2F0bXVsbFJvbShwMC55LHAxLnkscDIueSxwMy55LHRoaXMudGVuc2lvbik7cHouaW5pdENhdG11bGxSb20ocDAueixwMS56LHAyLnoscDMueix0aGlzLnRlbnNpb24pO31wb2ludC5zZXQocHguY2FsYyh3ZWlnaHQpLHB5LmNhbGMod2VpZ2h0KSxwei5jYWxjKHdlaWdodCkpO3JldHVybiBwb2ludDt9Y29weShzb3VyY2Upe3N1cGVyLmNvcHkoc291cmNlKTt0aGlzLnBvaW50cz1bXTtmb3IobGV0IGk9MCxsPXNvdXJjZS5wb2ludHMubGVuZ3RoO2k8bDtpKyspe2NvbnN0IHBvaW50PXNvdXJjZS5wb2ludHNbaV07dGhpcy5wb2ludHMucHVzaChwb2ludC5jbG9uZSgpKTt9dGhpcy5jbG9zZWQ9c291cmNlLmNsb3NlZDt0aGlzLmN1cnZlVHlwZT1zb3VyY2UuY3VydmVUeXBlO3RoaXMudGVuc2lvbj1zb3VyY2UudGVuc2lvbjtyZXR1cm4gdGhpczt9dG9KU09OKCl7Y29uc3QgZGF0YT1zdXBlci50b0pTT04oKTtkYXRhLnBvaW50cz1bXTtmb3IobGV0IGk9MCxsPXRoaXMucG9pbnRzLmxlbmd0aDtpPGw7aSsrKXtjb25zdCBwb2ludD10aGlzLnBvaW50c1tpXTtkYXRhLnBvaW50cy5wdXNoKHBvaW50LnRvQXJyYXkoKSk7fWRhdGEuY2xvc2VkPXRoaXMuY2xvc2VkO2RhdGEuY3VydmVUeXBlPXRoaXMuY3VydmVUeXBlO2RhdGEudGVuc2lvbj10aGlzLnRlbnNpb247cmV0dXJuIGRhdGE7fWZyb21KU09OKGpzb24pe3N1cGVyLmZyb21KU09OKGpzb24pO3RoaXMucG9pbnRzPVtdO2ZvcihsZXQgaT0wLGw9anNvbi5wb2ludHMubGVuZ3RoO2k8bDtpKyspe2NvbnN0IHBvaW50PWpzb24ucG9pbnRzW2ldO3RoaXMucG9pbnRzLnB1c2gobmV3IFZlY3RvcjMoKS5mcm9tQXJyYXkocG9pbnQpKTt9dGhpcy5jbG9zZWQ9anNvbi5jbG9zZWQ7dGhpcy5jdXJ2ZVR5cGU9anNvbi5jdXJ2ZVR5cGU7dGhpcy50ZW5zaW9uPWpzb24udGVuc2lvbjtyZXR1cm4gdGhpczt9fUNhdG11bGxSb21DdXJ2ZTMucHJvdG90eXBlLmlzQ2F0bXVsbFJvbUN1cnZlMz10cnVlOy8qKgoJICogQmV6aWVyIEN1cnZlcyBmb3JtdWxhcyBvYnRhaW5lZCBmcm9tCgkgKiBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0LDqXppZXJfY3VydmUKCSAqL2Z1bmN0aW9uIENhdG11bGxSb20odCxwMCxwMSxwMixwMyl7Y29uc3QgdjA9KHAyLXAwKSowLjU7Y29uc3QgdjE9KHAzLXAxKSowLjU7Y29uc3QgdDI9dCp0O2NvbnN0IHQzPXQqdDI7cmV0dXJuICgyKnAxLTIqcDIrdjArdjEpKnQzKygtMypwMSszKnAyLTIqdjAtdjEpKnQyK3YwKnQrcDE7fS8vCglmdW5jdGlvbiBRdWFkcmF0aWNCZXppZXJQMCh0LHApe2NvbnN0IGs9MS10O3JldHVybiBrKmsqcDt9ZnVuY3Rpb24gUXVhZHJhdGljQmV6aWVyUDEodCxwKXtyZXR1cm4gMiooMS10KSp0KnA7fWZ1bmN0aW9uIFF1YWRyYXRpY0JlemllclAyKHQscCl7cmV0dXJuIHQqdCpwO31mdW5jdGlvbiBRdWFkcmF0aWNCZXppZXIodCxwMCxwMSxwMil7cmV0dXJuIFF1YWRyYXRpY0JlemllclAwKHQscDApK1F1YWRyYXRpY0JlemllclAxKHQscDEpK1F1YWRyYXRpY0JlemllclAyKHQscDIpO30vLwoJZnVuY3Rpb24gQ3ViaWNCZXppZXJQMCh0LHApe2NvbnN0IGs9MS10O3JldHVybiBrKmsqaypwO31mdW5jdGlvbiBDdWJpY0JlemllclAxKHQscCl7Y29uc3Qgaz0xLXQ7cmV0dXJuIDMqayprKnQqcDt9ZnVuY3Rpb24gQ3ViaWNCZXppZXJQMih0LHApe3JldHVybiAzKigxLXQpKnQqdCpwO31mdW5jdGlvbiBDdWJpY0JlemllclAzKHQscCl7cmV0dXJuIHQqdCp0KnA7fWZ1bmN0aW9uIEN1YmljQmV6aWVyKHQscDAscDEscDIscDMpe3JldHVybiBDdWJpY0JlemllclAwKHQscDApK0N1YmljQmV6aWVyUDEodCxwMSkrQ3ViaWNCZXppZXJQMih0LHAyKStDdWJpY0JlemllclAzKHQscDMpO31jbGFzcyBDdWJpY0JlemllckN1cnZlIGV4dGVuZHMgQ3VydmV7Y29uc3RydWN0b3IodjAsdjEsdjIsdjMpe2lmKHYwPT09dm9pZCAwKXt2MD1uZXcgVmVjdG9yMigpO31pZih2MT09PXZvaWQgMCl7djE9bmV3IFZlY3RvcjIoKTt9aWYodjI9PT12b2lkIDApe3YyPW5ldyBWZWN0b3IyKCk7fWlmKHYzPT09dm9pZCAwKXt2Mz1uZXcgVmVjdG9yMigpO31zdXBlcigpO3RoaXMudHlwZT0nQ3ViaWNCZXppZXJDdXJ2ZSc7dGhpcy52MD12MDt0aGlzLnYxPXYxO3RoaXMudjI9djI7dGhpcy52Mz12Mzt9Z2V0UG9pbnQodCxvcHRpb25hbFRhcmdldCl7aWYob3B0aW9uYWxUYXJnZXQ9PT12b2lkIDApe29wdGlvbmFsVGFyZ2V0PW5ldyBWZWN0b3IyKCk7fWNvbnN0IHBvaW50PW9wdGlvbmFsVGFyZ2V0O2NvbnN0IHYwPXRoaXMudjAsdjE9dGhpcy52MSx2Mj10aGlzLnYyLHYzPXRoaXMudjM7cG9pbnQuc2V0KEN1YmljQmV6aWVyKHQsdjAueCx2MS54LHYyLngsdjMueCksQ3ViaWNCZXppZXIodCx2MC55LHYxLnksdjIueSx2My55KSk7cmV0dXJuIHBvaW50O31jb3B5KHNvdXJjZSl7c3VwZXIuY29weShzb3VyY2UpO3RoaXMudjAuY29weShzb3VyY2UudjApO3RoaXMudjEuY29weShzb3VyY2UudjEpO3RoaXMudjIuY29weShzb3VyY2UudjIpO3RoaXMudjMuY29weShzb3VyY2UudjMpO3JldHVybiB0aGlzO310b0pTT04oKXtjb25zdCBkYXRhPXN1cGVyLnRvSlNPTigpO2RhdGEudjA9dGhpcy52MC50b0FycmF5KCk7ZGF0YS52MT10aGlzLnYxLnRvQXJyYXkoKTtkYXRhLnYyPXRoaXMudjIudG9BcnJheSgpO2RhdGEudjM9dGhpcy52My50b0FycmF5KCk7cmV0dXJuIGRhdGE7fWZyb21KU09OKGpzb24pe3N1cGVyLmZyb21KU09OKGpzb24pO3RoaXMudjAuZnJvbUFycmF5KGpzb24udjApO3RoaXMudjEuZnJvbUFycmF5KGpzb24udjEpO3RoaXMudjIuZnJvbUFycmF5KGpzb24udjIpO3RoaXMudjMuZnJvbUFycmF5KGpzb24udjMpO3JldHVybiB0aGlzO319Q3ViaWNCZXppZXJDdXJ2ZS5wcm90b3R5cGUuaXNDdWJpY0JlemllckN1cnZlPXRydWU7Y2xhc3MgQ3ViaWNCZXppZXJDdXJ2ZTMgZXh0ZW5kcyBDdXJ2ZXtjb25zdHJ1Y3Rvcih2MCx2MSx2Mix2Myl7aWYodjA9PT12b2lkIDApe3YwPW5ldyBWZWN0b3IzKCk7fWlmKHYxPT09dm9pZCAwKXt2MT1uZXcgVmVjdG9yMygpO31pZih2Mj09PXZvaWQgMCl7djI9bmV3IFZlY3RvcjMoKTt9aWYodjM9PT12b2lkIDApe3YzPW5ldyBWZWN0b3IzKCk7fXN1cGVyKCk7dGhpcy50eXBlPSdDdWJpY0JlemllckN1cnZlMyc7dGhpcy52MD12MDt0aGlzLnYxPXYxO3RoaXMudjI9djI7dGhpcy52Mz12Mzt9Z2V0UG9pbnQodCxvcHRpb25hbFRhcmdldCl7aWYob3B0aW9uYWxUYXJnZXQ9PT12b2lkIDApe29wdGlvbmFsVGFyZ2V0PW5ldyBWZWN0b3IzKCk7fWNvbnN0IHBvaW50PW9wdGlvbmFsVGFyZ2V0O2NvbnN0IHYwPXRoaXMudjAsdjE9dGhpcy52MSx2Mj10aGlzLnYyLHYzPXRoaXMudjM7cG9pbnQuc2V0KEN1YmljQmV6aWVyKHQsdjAueCx2MS54LHYyLngsdjMueCksQ3ViaWNCZXppZXIodCx2MC55LHYxLnksdjIueSx2My55KSxDdWJpY0Jlemllcih0LHYwLnosdjEueix2Mi56LHYzLnopKTtyZXR1cm4gcG9pbnQ7fWNvcHkoc291cmNlKXtzdXBlci5jb3B5KHNvdXJjZSk7dGhpcy52MC5jb3B5KHNvdXJjZS52MCk7dGhpcy52MS5jb3B5KHNvdXJjZS52MSk7dGhpcy52Mi5jb3B5KHNvdXJjZS52Mik7dGhpcy52My5jb3B5KHNvdXJjZS52Myk7cmV0dXJuIHRoaXM7fXRvSlNPTigpe2NvbnN0IGRhdGE9c3VwZXIudG9KU09OKCk7ZGF0YS52MD10aGlzLnYwLnRvQXJyYXkoKTtkYXRhLnYxPXRoaXMudjEudG9BcnJheSgpO2RhdGEudjI9dGhpcy52Mi50b0FycmF5KCk7ZGF0YS52Mz10aGlzLnYzLnRvQXJyYXkoKTtyZXR1cm4gZGF0YTt9ZnJvbUpTT04oanNvbil7c3VwZXIuZnJvbUpTT04oanNvbik7dGhpcy52MC5mcm9tQXJyYXkoanNvbi52MCk7dGhpcy52MS5mcm9tQXJyYXkoanNvbi52MSk7dGhpcy52Mi5mcm9tQXJyYXkoanNvbi52Mik7dGhpcy52My5mcm9tQXJyYXkoanNvbi52Myk7cmV0dXJuIHRoaXM7fX1DdWJpY0JlemllckN1cnZlMy5wcm90b3R5cGUuaXNDdWJpY0JlemllckN1cnZlMz10cnVlO2NsYXNzIExpbmVDdXJ2ZSBleHRlbmRzIEN1cnZle2NvbnN0cnVjdG9yKHYxLHYyKXtpZih2MT09PXZvaWQgMCl7djE9bmV3IFZlY3RvcjIoKTt9aWYodjI9PT12b2lkIDApe3YyPW5ldyBWZWN0b3IyKCk7fXN1cGVyKCk7dGhpcy50eXBlPSdMaW5lQ3VydmUnO3RoaXMudjE9djE7dGhpcy52Mj12Mjt9Z2V0UG9pbnQodCxvcHRpb25hbFRhcmdldCl7aWYob3B0aW9uYWxUYXJnZXQ9PT12b2lkIDApe29wdGlvbmFsVGFyZ2V0PW5ldyBWZWN0b3IyKCk7fWNvbnN0IHBvaW50PW9wdGlvbmFsVGFyZ2V0O2lmKHQ9PT0xKXtwb2ludC5jb3B5KHRoaXMudjIpO31lbHNlIHtwb2ludC5jb3B5KHRoaXMudjIpLnN1Yih0aGlzLnYxKTtwb2ludC5tdWx0aXBseVNjYWxhcih0KS5hZGQodGhpcy52MSk7fXJldHVybiBwb2ludDt9Ly8gTGluZSBjdXJ2ZSBpcyBsaW5lYXIsIHNvIHdlIGNhbiBvdmVyd3JpdGUgZGVmYXVsdCBnZXRQb2ludEF0CglnZXRQb2ludEF0KHUsb3B0aW9uYWxUYXJnZXQpe3JldHVybiB0aGlzLmdldFBvaW50KHUsb3B0aW9uYWxUYXJnZXQpO31nZXRUYW5nZW50KHQsb3B0aW9uYWxUYXJnZXQpe2NvbnN0IHRhbmdlbnQ9b3B0aW9uYWxUYXJnZXR8fG5ldyBWZWN0b3IyKCk7dGFuZ2VudC5jb3B5KHRoaXMudjIpLnN1Yih0aGlzLnYxKS5ub3JtYWxpemUoKTtyZXR1cm4gdGFuZ2VudDt9Y29weShzb3VyY2Upe3N1cGVyLmNvcHkoc291cmNlKTt0aGlzLnYxLmNvcHkoc291cmNlLnYxKTt0aGlzLnYyLmNvcHkoc291cmNlLnYyKTtyZXR1cm4gdGhpczt9dG9KU09OKCl7Y29uc3QgZGF0YT1zdXBlci50b0pTT04oKTtkYXRhLnYxPXRoaXMudjEudG9BcnJheSgpO2RhdGEudjI9dGhpcy52Mi50b0FycmF5KCk7cmV0dXJuIGRhdGE7fWZyb21KU09OKGpzb24pe3N1cGVyLmZyb21KU09OKGpzb24pO3RoaXMudjEuZnJvbUFycmF5KGpzb24udjEpO3RoaXMudjIuZnJvbUFycmF5KGpzb24udjIpO3JldHVybiB0aGlzO319TGluZUN1cnZlLnByb3RvdHlwZS5pc0xpbmVDdXJ2ZT10cnVlO2NsYXNzIExpbmVDdXJ2ZTMgZXh0ZW5kcyBDdXJ2ZXtjb25zdHJ1Y3Rvcih2MSx2Mil7aWYodjE9PT12b2lkIDApe3YxPW5ldyBWZWN0b3IzKCk7fWlmKHYyPT09dm9pZCAwKXt2Mj1uZXcgVmVjdG9yMygpO31zdXBlcigpO3RoaXMudHlwZT0nTGluZUN1cnZlMyc7dGhpcy5pc0xpbmVDdXJ2ZTM9dHJ1ZTt0aGlzLnYxPXYxO3RoaXMudjI9djI7fWdldFBvaW50KHQsb3B0aW9uYWxUYXJnZXQpe2lmKG9wdGlvbmFsVGFyZ2V0PT09dm9pZCAwKXtvcHRpb25hbFRhcmdldD1uZXcgVmVjdG9yMygpO31jb25zdCBwb2ludD1vcHRpb25hbFRhcmdldDtpZih0PT09MSl7cG9pbnQuY29weSh0aGlzLnYyKTt9ZWxzZSB7cG9pbnQuY29weSh0aGlzLnYyKS5zdWIodGhpcy52MSk7cG9pbnQubXVsdGlwbHlTY2FsYXIodCkuYWRkKHRoaXMudjEpO31yZXR1cm4gcG9pbnQ7fS8vIExpbmUgY3VydmUgaXMgbGluZWFyLCBzbyB3ZSBjYW4gb3ZlcndyaXRlIGRlZmF1bHQgZ2V0UG9pbnRBdAoJZ2V0UG9pbnRBdCh1LG9wdGlvbmFsVGFyZ2V0KXtyZXR1cm4gdGhpcy5nZXRQb2ludCh1LG9wdGlvbmFsVGFyZ2V0KTt9Y29weShzb3VyY2Upe3N1cGVyLmNvcHkoc291cmNlKTt0aGlzLnYxLmNvcHkoc291cmNlLnYxKTt0aGlzLnYyLmNvcHkoc291cmNlLnYyKTtyZXR1cm4gdGhpczt9dG9KU09OKCl7Y29uc3QgZGF0YT1zdXBlci50b0pTT04oKTtkYXRhLnYxPXRoaXMudjEudG9BcnJheSgpO2RhdGEudjI9dGhpcy52Mi50b0FycmF5KCk7cmV0dXJuIGRhdGE7fWZyb21KU09OKGpzb24pe3N1cGVyLmZyb21KU09OKGpzb24pO3RoaXMudjEuZnJvbUFycmF5KGpzb24udjEpO3RoaXMudjIuZnJvbUFycmF5KGpzb24udjIpO3JldHVybiB0aGlzO319Y2xhc3MgUXVhZHJhdGljQmV6aWVyQ3VydmUgZXh0ZW5kcyBDdXJ2ZXtjb25zdHJ1Y3Rvcih2MCx2MSx2Mil7aWYodjA9PT12b2lkIDApe3YwPW5ldyBWZWN0b3IyKCk7fWlmKHYxPT09dm9pZCAwKXt2MT1uZXcgVmVjdG9yMigpO31pZih2Mj09PXZvaWQgMCl7djI9bmV3IFZlY3RvcjIoKTt9c3VwZXIoKTt0aGlzLnR5cGU9J1F1YWRyYXRpY0JlemllckN1cnZlJzt0aGlzLnYwPXYwO3RoaXMudjE9djE7dGhpcy52Mj12Mjt9Z2V0UG9pbnQodCxvcHRpb25hbFRhcmdldCl7aWYob3B0aW9uYWxUYXJnZXQ9PT12b2lkIDApe29wdGlvbmFsVGFyZ2V0PW5ldyBWZWN0b3IyKCk7fWNvbnN0IHBvaW50PW9wdGlvbmFsVGFyZ2V0O2NvbnN0IHYwPXRoaXMudjAsdjE9dGhpcy52MSx2Mj10aGlzLnYyO3BvaW50LnNldChRdWFkcmF0aWNCZXppZXIodCx2MC54LHYxLngsdjIueCksUXVhZHJhdGljQmV6aWVyKHQsdjAueSx2MS55LHYyLnkpKTtyZXR1cm4gcG9pbnQ7fWNvcHkoc291cmNlKXtzdXBlci5jb3B5KHNvdXJjZSk7dGhpcy52MC5jb3B5KHNvdXJjZS52MCk7dGhpcy52MS5jb3B5KHNvdXJjZS52MSk7dGhpcy52Mi5jb3B5KHNvdXJjZS52Mik7cmV0dXJuIHRoaXM7fXRvSlNPTigpe2NvbnN0IGRhdGE9c3VwZXIudG9KU09OKCk7ZGF0YS52MD10aGlzLnYwLnRvQXJyYXkoKTtkYXRhLnYxPXRoaXMudjEudG9BcnJheSgpO2RhdGEudjI9dGhpcy52Mi50b0FycmF5KCk7cmV0dXJuIGRhdGE7fWZyb21KU09OKGpzb24pe3N1cGVyLmZyb21KU09OKGpzb24pO3RoaXMudjAuZnJvbUFycmF5KGpzb24udjApO3RoaXMudjEuZnJvbUFycmF5KGpzb24udjEpO3RoaXMudjIuZnJvbUFycmF5KGpzb24udjIpO3JldHVybiB0aGlzO319UXVhZHJhdGljQmV6aWVyQ3VydmUucHJvdG90eXBlLmlzUXVhZHJhdGljQmV6aWVyQ3VydmU9dHJ1ZTtjbGFzcyBRdWFkcmF0aWNCZXppZXJDdXJ2ZTMgZXh0ZW5kcyBDdXJ2ZXtjb25zdHJ1Y3Rvcih2MCx2MSx2Mil7aWYodjA9PT12b2lkIDApe3YwPW5ldyBWZWN0b3IzKCk7fWlmKHYxPT09dm9pZCAwKXt2MT1uZXcgVmVjdG9yMygpO31pZih2Mj09PXZvaWQgMCl7djI9bmV3IFZlY3RvcjMoKTt9c3VwZXIoKTt0aGlzLnR5cGU9J1F1YWRyYXRpY0JlemllckN1cnZlMyc7dGhpcy52MD12MDt0aGlzLnYxPXYxO3RoaXMudjI9djI7fWdldFBvaW50KHQsb3B0aW9uYWxUYXJnZXQpe2lmKG9wdGlvbmFsVGFyZ2V0PT09dm9pZCAwKXtvcHRpb25hbFRhcmdldD1uZXcgVmVjdG9yMygpO31jb25zdCBwb2ludD1vcHRpb25hbFRhcmdldDtjb25zdCB2MD10aGlzLnYwLHYxPXRoaXMudjEsdjI9dGhpcy52Mjtwb2ludC5zZXQoUXVhZHJhdGljQmV6aWVyKHQsdjAueCx2MS54LHYyLngpLFF1YWRyYXRpY0Jlemllcih0LHYwLnksdjEueSx2Mi55KSxRdWFkcmF0aWNCZXppZXIodCx2MC56LHYxLnosdjIueikpO3JldHVybiBwb2ludDt9Y29weShzb3VyY2Upe3N1cGVyLmNvcHkoc291cmNlKTt0aGlzLnYwLmNvcHkoc291cmNlLnYwKTt0aGlzLnYxLmNvcHkoc291cmNlLnYxKTt0aGlzLnYyLmNvcHkoc291cmNlLnYyKTtyZXR1cm4gdGhpczt9dG9KU09OKCl7Y29uc3QgZGF0YT1zdXBlci50b0pTT04oKTtkYXRhLnYwPXRoaXMudjAudG9BcnJheSgpO2RhdGEudjE9dGhpcy52MS50b0FycmF5KCk7ZGF0YS52Mj10aGlzLnYyLnRvQXJyYXkoKTtyZXR1cm4gZGF0YTt9ZnJvbUpTT04oanNvbil7c3VwZXIuZnJvbUpTT04oanNvbik7dGhpcy52MC5mcm9tQXJyYXkoanNvbi52MCk7dGhpcy52MS5mcm9tQXJyYXkoanNvbi52MSk7dGhpcy52Mi5mcm9tQXJyYXkoanNvbi52Mik7cmV0dXJuIHRoaXM7fX1RdWFkcmF0aWNCZXppZXJDdXJ2ZTMucHJvdG90eXBlLmlzUXVhZHJhdGljQmV6aWVyQ3VydmUzPXRydWU7Y2xhc3MgU3BsaW5lQ3VydmUgZXh0ZW5kcyBDdXJ2ZXtjb25zdHJ1Y3Rvcihwb2ludHMpe2lmKHBvaW50cz09PXZvaWQgMCl7cG9pbnRzPVtdO31zdXBlcigpO3RoaXMudHlwZT0nU3BsaW5lQ3VydmUnO3RoaXMucG9pbnRzPXBvaW50czt9Z2V0UG9pbnQodCxvcHRpb25hbFRhcmdldCl7aWYob3B0aW9uYWxUYXJnZXQ9PT12b2lkIDApe29wdGlvbmFsVGFyZ2V0PW5ldyBWZWN0b3IyKCk7fWNvbnN0IHBvaW50PW9wdGlvbmFsVGFyZ2V0O2NvbnN0IHBvaW50cz10aGlzLnBvaW50cztjb25zdCBwPShwb2ludHMubGVuZ3RoLTEpKnQ7Y29uc3QgaW50UG9pbnQ9TWF0aC5mbG9vcihwKTtjb25zdCB3ZWlnaHQ9cC1pbnRQb2ludDtjb25zdCBwMD1wb2ludHNbaW50UG9pbnQ9PT0wP2ludFBvaW50OmludFBvaW50LTFdO2NvbnN0IHAxPXBvaW50c1tpbnRQb2ludF07Y29uc3QgcDI9cG9pbnRzW2ludFBvaW50PnBvaW50cy5sZW5ndGgtMj9wb2ludHMubGVuZ3RoLTE6aW50UG9pbnQrMV07Y29uc3QgcDM9cG9pbnRzW2ludFBvaW50PnBvaW50cy5sZW5ndGgtMz9wb2ludHMubGVuZ3RoLTE6aW50UG9pbnQrMl07cG9pbnQuc2V0KENhdG11bGxSb20od2VpZ2h0LHAwLngscDEueCxwMi54LHAzLngpLENhdG11bGxSb20od2VpZ2h0LHAwLnkscDEueSxwMi55LHAzLnkpKTtyZXR1cm4gcG9pbnQ7fWNvcHkoc291cmNlKXtzdXBlci5jb3B5KHNvdXJjZSk7dGhpcy5wb2ludHM9W107Zm9yKGxldCBpPTAsbD1zb3VyY2UucG9pbnRzLmxlbmd0aDtpPGw7aSsrKXtjb25zdCBwb2ludD1zb3VyY2UucG9pbnRzW2ldO3RoaXMucG9pbnRzLnB1c2gocG9pbnQuY2xvbmUoKSk7fXJldHVybiB0aGlzO310b0pTT04oKXtjb25zdCBkYXRhPXN1cGVyLnRvSlNPTigpO2RhdGEucG9pbnRzPVtdO2ZvcihsZXQgaT0wLGw9dGhpcy5wb2ludHMubGVuZ3RoO2k8bDtpKyspe2NvbnN0IHBvaW50PXRoaXMucG9pbnRzW2ldO2RhdGEucG9pbnRzLnB1c2gocG9pbnQudG9BcnJheSgpKTt9cmV0dXJuIGRhdGE7fWZyb21KU09OKGpzb24pe3N1cGVyLmZyb21KU09OKGpzb24pO3RoaXMucG9pbnRzPVtdO2ZvcihsZXQgaT0wLGw9anNvbi5wb2ludHMubGVuZ3RoO2k8bDtpKyspe2NvbnN0IHBvaW50PWpzb24ucG9pbnRzW2ldO3RoaXMucG9pbnRzLnB1c2gobmV3IFZlY3RvcjIoKS5mcm9tQXJyYXkocG9pbnQpKTt9cmV0dXJuIHRoaXM7fX1TcGxpbmVDdXJ2ZS5wcm90b3R5cGUuaXNTcGxpbmVDdXJ2ZT10cnVlO3ZhciBDdXJ2ZXM9LyojX19QVVJFX18qL09iamVjdC5mcmVlemUoe19fcHJvdG9fXzpudWxsLEFyY0N1cnZlOkFyY0N1cnZlLENhdG11bGxSb21DdXJ2ZTM6Q2F0bXVsbFJvbUN1cnZlMyxDdWJpY0JlemllckN1cnZlOkN1YmljQmV6aWVyQ3VydmUsQ3ViaWNCZXppZXJDdXJ2ZTM6Q3ViaWNCZXppZXJDdXJ2ZTMsRWxsaXBzZUN1cnZlOkVsbGlwc2VDdXJ2ZSxMaW5lQ3VydmU6TGluZUN1cnZlLExpbmVDdXJ2ZTM6TGluZUN1cnZlMyxRdWFkcmF0aWNCZXppZXJDdXJ2ZTpRdWFkcmF0aWNCZXppZXJDdXJ2ZSxRdWFkcmF0aWNCZXppZXJDdXJ2ZTM6UXVhZHJhdGljQmV6aWVyQ3VydmUzLFNwbGluZUN1cnZlOlNwbGluZUN1cnZlfSk7LyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCgkgKglDdXJ2ZWQgUGF0aCAtIGEgY3VydmUgcGF0aCBpcyBzaW1wbHkgYSBhcnJheSBvZiBjb25uZWN0ZWQKCSAqICBjdXJ2ZXMsIGJ1dCByZXRhaW5zIHRoZSBhcGkgb2YgYSBjdXJ2ZQoJICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL2NsYXNzIEN1cnZlUGF0aCBleHRlbmRzIEN1cnZle2NvbnN0cnVjdG9yKCl7c3VwZXIoKTt0aGlzLnR5cGU9J0N1cnZlUGF0aCc7dGhpcy5jdXJ2ZXM9W107dGhpcy5hdXRvQ2xvc2U9ZmFsc2U7Ly8gQXV0b21hdGljYWxseSBjbG9zZXMgdGhlIHBhdGgKCX1hZGQoY3VydmUpe3RoaXMuY3VydmVzLnB1c2goY3VydmUpO31jbG9zZVBhdGgoKXsvLyBBZGQgYSBsaW5lIGN1cnZlIGlmIHN0YXJ0IGFuZCBlbmQgb2YgbGluZXMgYXJlIG5vdCBjb25uZWN0ZWQKCWNvbnN0IHN0YXJ0UG9pbnQ9dGhpcy5jdXJ2ZXNbMF0uZ2V0UG9pbnQoMCk7Y29uc3QgZW5kUG9pbnQ9dGhpcy5jdXJ2ZXNbdGhpcy5jdXJ2ZXMubGVuZ3RoLTFdLmdldFBvaW50KDEpO2lmKCFzdGFydFBvaW50LmVxdWFscyhlbmRQb2ludCkpe3RoaXMuY3VydmVzLnB1c2gobmV3IExpbmVDdXJ2ZShlbmRQb2ludCxzdGFydFBvaW50KSk7fX0vLyBUbyBnZXQgYWNjdXJhdGUgcG9pbnQgd2l0aCByZWZlcmVuY2UgdG8KCS8vIGVudGlyZSBwYXRoIGRpc3RhbmNlIGF0IHRpbWUgdCwKCS8vIGZvbGxvd2luZyBoYXMgdG8gYmUgZG9uZToKCS8vIDEuIExlbmd0aCBvZiBlYWNoIHN1YiBwYXRoIGhhdmUgdG8gYmUga25vd24KCS8vIDIuIExvY2F0ZSBhbmQgaWRlbnRpZnkgdHlwZSBvZiBjdXJ2ZQoJLy8gMy4gR2V0IHQgZm9yIHRoZSBjdXJ2ZQoJLy8gNC4gUmV0dXJuIGN1cnZlLmdldFBvaW50QXQodCcpCglnZXRQb2ludCh0LG9wdGlvbmFsVGFyZ2V0KXtjb25zdCBkPXQqdGhpcy5nZXRMZW5ndGgoKTtjb25zdCBjdXJ2ZUxlbmd0aHM9dGhpcy5nZXRDdXJ2ZUxlbmd0aHMoKTtsZXQgaT0wOy8vIFRvIHRoaW5rIGFib3V0IGJvdW5kYXJpZXMgcG9pbnRzLgoJd2hpbGUoaTxjdXJ2ZUxlbmd0aHMubGVuZ3RoKXtpZihjdXJ2ZUxlbmd0aHNbaV0+PWQpe2NvbnN0IGRpZmY9Y3VydmVMZW5ndGhzW2ldLWQ7Y29uc3QgY3VydmU9dGhpcy5jdXJ2ZXNbaV07Y29uc3Qgc2VnbWVudExlbmd0aD1jdXJ2ZS5nZXRMZW5ndGgoKTtjb25zdCB1PXNlZ21lbnRMZW5ndGg9PT0wPzA6MS1kaWZmL3NlZ21lbnRMZW5ndGg7cmV0dXJuIGN1cnZlLmdldFBvaW50QXQodSxvcHRpb25hbFRhcmdldCk7fWkrKzt9cmV0dXJuIG51bGw7Ly8gbG9vcCB3aGVyZSBzdW0gIT0gMCwgc3VtID4gZCAsIHN1bSsxIDxkCgl9Ly8gV2UgY2Fubm90IHVzZSB0aGUgZGVmYXVsdCBUSFJFRS5DdXJ2ZSBnZXRQb2ludCgpIHdpdGggZ2V0TGVuZ3RoKCkgYmVjYXVzZSBpbgoJLy8gVEhSRUUuQ3VydmUsIGdldExlbmd0aCgpIGRlcGVuZHMgb24gZ2V0UG9pbnQoKSBidXQgaW4gVEhSRUUuQ3VydmVQYXRoCgkvLyBnZXRQb2ludCgpIGRlcGVuZHMgb24gZ2V0TGVuZ3RoCglnZXRMZW5ndGgoKXtjb25zdCBsZW5zPXRoaXMuZ2V0Q3VydmVMZW5ndGhzKCk7cmV0dXJuIGxlbnNbbGVucy5sZW5ndGgtMV07fS8vIGNhY2hlTGVuZ3RocyBtdXN0IGJlIHJlY2FsY3VsYXRlZC4KCXVwZGF0ZUFyY0xlbmd0aHMoKXt0aGlzLm5lZWRzVXBkYXRlPXRydWU7dGhpcy5jYWNoZUxlbmd0aHM9bnVsbDt0aGlzLmdldEN1cnZlTGVuZ3RocygpO30vLyBDb21wdXRlIGxlbmd0aHMgYW5kIGNhY2hlIHRoZW0KCS8vIFdlIGNhbm5vdCBvdmVyd3JpdGUgZ2V0TGVuZ3RocygpIGJlY2F1c2UgVXRvVCBtYXBwaW5nIHVzZXMgaXQuCglnZXRDdXJ2ZUxlbmd0aHMoKXsvLyBXZSB1c2UgY2FjaGUgdmFsdWVzIGlmIGN1cnZlcyBhbmQgY2FjaGUgYXJyYXkgYXJlIHNhbWUgbGVuZ3RoCglpZih0aGlzLmNhY2hlTGVuZ3RocyYmdGhpcy5jYWNoZUxlbmd0aHMubGVuZ3RoPT09dGhpcy5jdXJ2ZXMubGVuZ3RoKXtyZXR1cm4gdGhpcy5jYWNoZUxlbmd0aHM7fS8vIEdldCBsZW5ndGggb2Ygc3ViLWN1cnZlCgkvLyBQdXNoIHN1bXMgaW50byBjYWNoZWQgYXJyYXkKCWNvbnN0IGxlbmd0aHM9W107bGV0IHN1bXM9MDtmb3IobGV0IGk9MCxsPXRoaXMuY3VydmVzLmxlbmd0aDtpPGw7aSsrKXtzdW1zKz10aGlzLmN1cnZlc1tpXS5nZXRMZW5ndGgoKTtsZW5ndGhzLnB1c2goc3Vtcyk7fXRoaXMuY2FjaGVMZW5ndGhzPWxlbmd0aHM7cmV0dXJuIGxlbmd0aHM7fWdldFNwYWNlZFBvaW50cyhkaXZpc2lvbnMpe2lmKGRpdmlzaW9ucz09PXZvaWQgMCl7ZGl2aXNpb25zPTQwO31jb25zdCBwb2ludHM9W107Zm9yKGxldCBpPTA7aTw9ZGl2aXNpb25zO2krKyl7cG9pbnRzLnB1c2godGhpcy5nZXRQb2ludChpL2RpdmlzaW9ucykpO31pZih0aGlzLmF1dG9DbG9zZSl7cG9pbnRzLnB1c2gocG9pbnRzWzBdKTt9cmV0dXJuIHBvaW50czt9Z2V0UG9pbnRzKGRpdmlzaW9ucyl7aWYoZGl2aXNpb25zPT09dm9pZCAwKXtkaXZpc2lvbnM9MTI7fWNvbnN0IHBvaW50cz1bXTtsZXQgbGFzdDtmb3IobGV0IGk9MCxjdXJ2ZXM9dGhpcy5jdXJ2ZXM7aTxjdXJ2ZXMubGVuZ3RoO2krKyl7Y29uc3QgY3VydmU9Y3VydmVzW2ldO2NvbnN0IHJlc29sdXRpb249Y3VydmUmJmN1cnZlLmlzRWxsaXBzZUN1cnZlP2RpdmlzaW9ucyoyOmN1cnZlJiYoY3VydmUuaXNMaW5lQ3VydmV8fGN1cnZlLmlzTGluZUN1cnZlMyk/MTpjdXJ2ZSYmY3VydmUuaXNTcGxpbmVDdXJ2ZT9kaXZpc2lvbnMqY3VydmUucG9pbnRzLmxlbmd0aDpkaXZpc2lvbnM7Y29uc3QgcHRzPWN1cnZlLmdldFBvaW50cyhyZXNvbHV0aW9uKTtmb3IobGV0IGo9MDtqPHB0cy5sZW5ndGg7aisrKXtjb25zdCBwb2ludD1wdHNbal07aWYobGFzdCYmbGFzdC5lcXVhbHMocG9pbnQpKWNvbnRpbnVlOy8vIGVuc3VyZXMgbm8gY29uc2VjdXRpdmUgcG9pbnRzIGFyZSBkdXBsaWNhdGVzCglwb2ludHMucHVzaChwb2ludCk7bGFzdD1wb2ludDt9fWlmKHRoaXMuYXV0b0Nsb3NlJiZwb2ludHMubGVuZ3RoPjEmJiFwb2ludHNbcG9pbnRzLmxlbmd0aC0xXS5lcXVhbHMocG9pbnRzWzBdKSl7cG9pbnRzLnB1c2gocG9pbnRzWzBdKTt9cmV0dXJuIHBvaW50czt9Y29weShzb3VyY2Upe3N1cGVyLmNvcHkoc291cmNlKTt0aGlzLmN1cnZlcz1bXTtmb3IobGV0IGk9MCxsPXNvdXJjZS5jdXJ2ZXMubGVuZ3RoO2k8bDtpKyspe2NvbnN0IGN1cnZlPXNvdXJjZS5jdXJ2ZXNbaV07dGhpcy5jdXJ2ZXMucHVzaChjdXJ2ZS5jbG9uZSgpKTt9dGhpcy5hdXRvQ2xvc2U9c291cmNlLmF1dG9DbG9zZTtyZXR1cm4gdGhpczt9dG9KU09OKCl7Y29uc3QgZGF0YT1zdXBlci50b0pTT04oKTtkYXRhLmF1dG9DbG9zZT10aGlzLmF1dG9DbG9zZTtkYXRhLmN1cnZlcz1bXTtmb3IobGV0IGk9MCxsPXRoaXMuY3VydmVzLmxlbmd0aDtpPGw7aSsrKXtjb25zdCBjdXJ2ZT10aGlzLmN1cnZlc1tpXTtkYXRhLmN1cnZlcy5wdXNoKGN1cnZlLnRvSlNPTigpKTt9cmV0dXJuIGRhdGE7fWZyb21KU09OKGpzb24pe3N1cGVyLmZyb21KU09OKGpzb24pO3RoaXMuYXV0b0Nsb3NlPWpzb24uYXV0b0Nsb3NlO3RoaXMuY3VydmVzPVtdO2ZvcihsZXQgaT0wLGw9anNvbi5jdXJ2ZXMubGVuZ3RoO2k8bDtpKyspe2NvbnN0IGN1cnZlPWpzb24uY3VydmVzW2ldO3RoaXMuY3VydmVzLnB1c2gobmV3IEN1cnZlc1tjdXJ2ZS50eXBlXSgpLmZyb21KU09OKGN1cnZlKSk7fXJldHVybiB0aGlzO319Y2xhc3MgUGF0aCBleHRlbmRzIEN1cnZlUGF0aHtjb25zdHJ1Y3Rvcihwb2ludHMpe3N1cGVyKCk7dGhpcy50eXBlPSdQYXRoJzt0aGlzLmN1cnJlbnRQb2ludD1uZXcgVmVjdG9yMigpO2lmKHBvaW50cyl7dGhpcy5zZXRGcm9tUG9pbnRzKHBvaW50cyk7fX1zZXRGcm9tUG9pbnRzKHBvaW50cyl7dGhpcy5tb3ZlVG8ocG9pbnRzWzBdLngscG9pbnRzWzBdLnkpO2ZvcihsZXQgaT0xLGw9cG9pbnRzLmxlbmd0aDtpPGw7aSsrKXt0aGlzLmxpbmVUbyhwb2ludHNbaV0ueCxwb2ludHNbaV0ueSk7fXJldHVybiB0aGlzO31tb3ZlVG8oeCx5KXt0aGlzLmN1cnJlbnRQb2ludC5zZXQoeCx5KTsvLyBUT0RPIGNvbnNpZGVyIHJlZmVyZW5jaW5nIHZlY3RvcnMgaW5zdGVhZCBvZiBjb3B5aW5nPwoJcmV0dXJuIHRoaXM7fWxpbmVUbyh4LHkpe2NvbnN0IGN1cnZlPW5ldyBMaW5lQ3VydmUodGhpcy5jdXJyZW50UG9pbnQuY2xvbmUoKSxuZXcgVmVjdG9yMih4LHkpKTt0aGlzLmN1cnZlcy5wdXNoKGN1cnZlKTt0aGlzLmN1cnJlbnRQb2ludC5zZXQoeCx5KTtyZXR1cm4gdGhpczt9cXVhZHJhdGljQ3VydmVUbyhhQ1B4LGFDUHksYVgsYVkpe2NvbnN0IGN1cnZlPW5ldyBRdWFkcmF0aWNCZXppZXJDdXJ2ZSh0aGlzLmN1cnJlbnRQb2ludC5jbG9uZSgpLG5ldyBWZWN0b3IyKGFDUHgsYUNQeSksbmV3IFZlY3RvcjIoYVgsYVkpKTt0aGlzLmN1cnZlcy5wdXNoKGN1cnZlKTt0aGlzLmN1cnJlbnRQb2ludC5zZXQoYVgsYVkpO3JldHVybiB0aGlzO31iZXppZXJDdXJ2ZVRvKGFDUDF4LGFDUDF5LGFDUDJ4LGFDUDJ5LGFYLGFZKXtjb25zdCBjdXJ2ZT1uZXcgQ3ViaWNCZXppZXJDdXJ2ZSh0aGlzLmN1cnJlbnRQb2ludC5jbG9uZSgpLG5ldyBWZWN0b3IyKGFDUDF4LGFDUDF5KSxuZXcgVmVjdG9yMihhQ1AyeCxhQ1AyeSksbmV3IFZlY3RvcjIoYVgsYVkpKTt0aGlzLmN1cnZlcy5wdXNoKGN1cnZlKTt0aGlzLmN1cnJlbnRQb2ludC5zZXQoYVgsYVkpO3JldHVybiB0aGlzO31zcGxpbmVUaHJ1KHB0cy8qQXJyYXkgb2YgVmVjdG9yKi8pe2NvbnN0IG5wdHM9W3RoaXMuY3VycmVudFBvaW50LmNsb25lKCldLmNvbmNhdChwdHMpO2NvbnN0IGN1cnZlPW5ldyBTcGxpbmVDdXJ2ZShucHRzKTt0aGlzLmN1cnZlcy5wdXNoKGN1cnZlKTt0aGlzLmN1cnJlbnRQb2ludC5jb3B5KHB0c1twdHMubGVuZ3RoLTFdKTtyZXR1cm4gdGhpczt9YXJjKGFYLGFZLGFSYWRpdXMsYVN0YXJ0QW5nbGUsYUVuZEFuZ2xlLGFDbG9ja3dpc2Upe2NvbnN0IHgwPXRoaXMuY3VycmVudFBvaW50Lng7Y29uc3QgeTA9dGhpcy5jdXJyZW50UG9pbnQueTt0aGlzLmFic2FyYyhhWCt4MCxhWSt5MCxhUmFkaXVzLGFTdGFydEFuZ2xlLGFFbmRBbmdsZSxhQ2xvY2t3aXNlKTtyZXR1cm4gdGhpczt9YWJzYXJjKGFYLGFZLGFSYWRpdXMsYVN0YXJ0QW5nbGUsYUVuZEFuZ2xlLGFDbG9ja3dpc2Upe3RoaXMuYWJzZWxsaXBzZShhWCxhWSxhUmFkaXVzLGFSYWRpdXMsYVN0YXJ0QW5nbGUsYUVuZEFuZ2xlLGFDbG9ja3dpc2UpO3JldHVybiB0aGlzO31lbGxpcHNlKGFYLGFZLHhSYWRpdXMseVJhZGl1cyxhU3RhcnRBbmdsZSxhRW5kQW5nbGUsYUNsb2Nrd2lzZSxhUm90YXRpb24pe2NvbnN0IHgwPXRoaXMuY3VycmVudFBvaW50Lng7Y29uc3QgeTA9dGhpcy5jdXJyZW50UG9pbnQueTt0aGlzLmFic2VsbGlwc2UoYVgreDAsYVkreTAseFJhZGl1cyx5UmFkaXVzLGFTdGFydEFuZ2xlLGFFbmRBbmdsZSxhQ2xvY2t3aXNlLGFSb3RhdGlvbik7cmV0dXJuIHRoaXM7fWFic2VsbGlwc2UoYVgsYVkseFJhZGl1cyx5UmFkaXVzLGFTdGFydEFuZ2xlLGFFbmRBbmdsZSxhQ2xvY2t3aXNlLGFSb3RhdGlvbil7Y29uc3QgY3VydmU9bmV3IEVsbGlwc2VDdXJ2ZShhWCxhWSx4UmFkaXVzLHlSYWRpdXMsYVN0YXJ0QW5nbGUsYUVuZEFuZ2xlLGFDbG9ja3dpc2UsYVJvdGF0aW9uKTtpZih0aGlzLmN1cnZlcy5sZW5ndGg+MCl7Ly8gaWYgYSBwcmV2aW91cyBjdXJ2ZSBpcyBwcmVzZW50LCBhdHRlbXB0IHRvIGpvaW4KCWNvbnN0IGZpcnN0UG9pbnQ9Y3VydmUuZ2V0UG9pbnQoMCk7aWYoIWZpcnN0UG9pbnQuZXF1YWxzKHRoaXMuY3VycmVudFBvaW50KSl7dGhpcy5saW5lVG8oZmlyc3RQb2ludC54LGZpcnN0UG9pbnQueSk7fX10aGlzLmN1cnZlcy5wdXNoKGN1cnZlKTtjb25zdCBsYXN0UG9pbnQ9Y3VydmUuZ2V0UG9pbnQoMSk7dGhpcy5jdXJyZW50UG9pbnQuY29weShsYXN0UG9pbnQpO3JldHVybiB0aGlzO31jb3B5KHNvdXJjZSl7c3VwZXIuY29weShzb3VyY2UpO3RoaXMuY3VycmVudFBvaW50LmNvcHkoc291cmNlLmN1cnJlbnRQb2ludCk7cmV0dXJuIHRoaXM7fXRvSlNPTigpe2NvbnN0IGRhdGE9c3VwZXIudG9KU09OKCk7ZGF0YS5jdXJyZW50UG9pbnQ9dGhpcy5jdXJyZW50UG9pbnQudG9BcnJheSgpO3JldHVybiBkYXRhO31mcm9tSlNPTihqc29uKXtzdXBlci5mcm9tSlNPTihqc29uKTt0aGlzLmN1cnJlbnRQb2ludC5mcm9tQXJyYXkoanNvbi5jdXJyZW50UG9pbnQpO3JldHVybiB0aGlzO319Y2xhc3MgU2hhcGUgZXh0ZW5kcyBQYXRoe2NvbnN0cnVjdG9yKHBvaW50cyl7c3VwZXIocG9pbnRzKTt0aGlzLnV1aWQ9Z2VuZXJhdGVVVUlEKCk7dGhpcy50eXBlPSdTaGFwZSc7dGhpcy5ob2xlcz1bXTt9Z2V0UG9pbnRzSG9sZXMoZGl2aXNpb25zKXtjb25zdCBob2xlc1B0cz1bXTtmb3IobGV0IGk9MCxsPXRoaXMuaG9sZXMubGVuZ3RoO2k8bDtpKyspe2hvbGVzUHRzW2ldPXRoaXMuaG9sZXNbaV0uZ2V0UG9pbnRzKGRpdmlzaW9ucyk7fXJldHVybiBob2xlc1B0czt9Ly8gZ2V0IHBvaW50cyBvZiBzaGFwZSBhbmQgaG9sZXMgKGtleXBvaW50cyBiYXNlZCBvbiBzZWdtZW50cyBwYXJhbWV0ZXIpCglleHRyYWN0UG9pbnRzKGRpdmlzaW9ucyl7cmV0dXJuIHtzaGFwZTp0aGlzLmdldFBvaW50cyhkaXZpc2lvbnMpLGhvbGVzOnRoaXMuZ2V0UG9pbnRzSG9sZXMoZGl2aXNpb25zKX07fWNvcHkoc291cmNlKXtzdXBlci5jb3B5KHNvdXJjZSk7dGhpcy5ob2xlcz1bXTtmb3IobGV0IGk9MCxsPXNvdXJjZS5ob2xlcy5sZW5ndGg7aTxsO2krKyl7Y29uc3QgaG9sZT1zb3VyY2UuaG9sZXNbaV07dGhpcy5ob2xlcy5wdXNoKGhvbGUuY2xvbmUoKSk7fXJldHVybiB0aGlzO310b0pTT04oKXtjb25zdCBkYXRhPXN1cGVyLnRvSlNPTigpO2RhdGEudXVpZD10aGlzLnV1aWQ7ZGF0YS5ob2xlcz1bXTtmb3IobGV0IGk9MCxsPXRoaXMuaG9sZXMubGVuZ3RoO2k8bDtpKyspe2NvbnN0IGhvbGU9dGhpcy5ob2xlc1tpXTtkYXRhLmhvbGVzLnB1c2goaG9sZS50b0pTT04oKSk7fXJldHVybiBkYXRhO31mcm9tSlNPTihqc29uKXtzdXBlci5mcm9tSlNPTihqc29uKTt0aGlzLnV1aWQ9anNvbi51dWlkO3RoaXMuaG9sZXM9W107Zm9yKGxldCBpPTAsbD1qc29uLmhvbGVzLmxlbmd0aDtpPGw7aSsrKXtjb25zdCBob2xlPWpzb24uaG9sZXNbaV07dGhpcy5ob2xlcy5wdXNoKG5ldyBQYXRoKCkuZnJvbUpTT04oaG9sZSkpO31yZXR1cm4gdGhpczt9fS8qKgoJICogUG9ydCBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9tYXBib3gvZWFyY3V0ICh2Mi4yLjIpCgkgKi9jb25zdCBFYXJjdXQ9e3RyaWFuZ3VsYXRlOmZ1bmN0aW9uKGRhdGEsaG9sZUluZGljZXMsZGltKXtpZihkaW09PT12b2lkIDApe2RpbT0yO31jb25zdCBoYXNIb2xlcz1ob2xlSW5kaWNlcyYmaG9sZUluZGljZXMubGVuZ3RoO2NvbnN0IG91dGVyTGVuPWhhc0hvbGVzP2hvbGVJbmRpY2VzWzBdKmRpbTpkYXRhLmxlbmd0aDtsZXQgb3V0ZXJOb2RlPWxpbmtlZExpc3QoZGF0YSwwLG91dGVyTGVuLGRpbSx0cnVlKTtjb25zdCB0cmlhbmdsZXM9W107aWYoIW91dGVyTm9kZXx8b3V0ZXJOb2RlLm5leHQ9PT1vdXRlck5vZGUucHJldilyZXR1cm4gdHJpYW5nbGVzO2xldCBtaW5YLG1pblksbWF4WCxtYXhZLHgseSxpbnZTaXplO2lmKGhhc0hvbGVzKW91dGVyTm9kZT1lbGltaW5hdGVIb2xlcyhkYXRhLGhvbGVJbmRpY2VzLG91dGVyTm9kZSxkaW0pOy8vIGlmIHRoZSBzaGFwZSBpcyBub3QgdG9vIHNpbXBsZSwgd2UnbGwgdXNlIHotb3JkZXIgY3VydmUgaGFzaCBsYXRlcjsgY2FsY3VsYXRlIHBvbHlnb24gYmJveAoJaWYoZGF0YS5sZW5ndGg+ODAqZGltKXttaW5YPW1heFg9ZGF0YVswXTttaW5ZPW1heFk9ZGF0YVsxXTtmb3IobGV0IGk9ZGltO2k8b3V0ZXJMZW47aSs9ZGltKXt4PWRhdGFbaV07eT1kYXRhW2krMV07aWYoeDxtaW5YKW1pblg9eDtpZih5PG1pblkpbWluWT15O2lmKHg+bWF4WCltYXhYPXg7aWYoeT5tYXhZKW1heFk9eTt9Ly8gbWluWCwgbWluWSBhbmQgaW52U2l6ZSBhcmUgbGF0ZXIgdXNlZCB0byB0cmFuc2Zvcm0gY29vcmRzIGludG8gaW50ZWdlcnMgZm9yIHotb3JkZXIgY2FsY3VsYXRpb24KCWludlNpemU9TWF0aC5tYXgobWF4WC1taW5YLG1heFktbWluWSk7aW52U2l6ZT1pbnZTaXplIT09MD8xL2ludlNpemU6MDt9ZWFyY3V0TGlua2VkKG91dGVyTm9kZSx0cmlhbmdsZXMsZGltLG1pblgsbWluWSxpbnZTaXplKTtyZXR1cm4gdHJpYW5nbGVzO319Oy8vIGNyZWF0ZSBhIGNpcmN1bGFyIGRvdWJseSBsaW5rZWQgbGlzdCBmcm9tIHBvbHlnb24gcG9pbnRzIGluIHRoZSBzcGVjaWZpZWQgd2luZGluZyBvcmRlcgoJZnVuY3Rpb24gbGlua2VkTGlzdChkYXRhLHN0YXJ0LGVuZCxkaW0sY2xvY2t3aXNlKXtsZXQgaSxsYXN0O2lmKGNsb2Nrd2lzZT09PXNpZ25lZEFyZWEoZGF0YSxzdGFydCxlbmQsZGltKT4wKXtmb3IoaT1zdGFydDtpPGVuZDtpKz1kaW0pbGFzdD1pbnNlcnROb2RlKGksZGF0YVtpXSxkYXRhW2krMV0sbGFzdCk7fWVsc2Uge2ZvcihpPWVuZC1kaW07aT49c3RhcnQ7aS09ZGltKWxhc3Q9aW5zZXJ0Tm9kZShpLGRhdGFbaV0sZGF0YVtpKzFdLGxhc3QpO31pZihsYXN0JiZlcXVhbHMobGFzdCxsYXN0Lm5leHQpKXtyZW1vdmVOb2RlKGxhc3QpO2xhc3Q9bGFzdC5uZXh0O31yZXR1cm4gbGFzdDt9Ly8gZWxpbWluYXRlIGNvbGluZWFyIG9yIGR1cGxpY2F0ZSBwb2ludHMKCWZ1bmN0aW9uIGZpbHRlclBvaW50cyhzdGFydCxlbmQpe2lmKCFzdGFydClyZXR1cm4gc3RhcnQ7aWYoIWVuZCllbmQ9c3RhcnQ7bGV0IHA9c3RhcnQsYWdhaW47ZG97YWdhaW49ZmFsc2U7aWYoIXAuc3RlaW5lciYmKGVxdWFscyhwLHAubmV4dCl8fGFyZWEocC5wcmV2LHAscC5uZXh0KT09PTApKXtyZW1vdmVOb2RlKHApO3A9ZW5kPXAucHJldjtpZihwPT09cC5uZXh0KWJyZWFrO2FnYWluPXRydWU7fWVsc2Uge3A9cC5uZXh0O319d2hpbGUoYWdhaW58fHAhPT1lbmQpO3JldHVybiBlbmQ7fS8vIG1haW4gZWFyIHNsaWNpbmcgbG9vcCB3aGljaCB0cmlhbmd1bGF0ZXMgYSBwb2x5Z29uIChnaXZlbiBhcyBhIGxpbmtlZCBsaXN0KQoJZnVuY3Rpb24gZWFyY3V0TGlua2VkKGVhcix0cmlhbmdsZXMsZGltLG1pblgsbWluWSxpbnZTaXplLHBhc3Mpe2lmKCFlYXIpcmV0dXJuOy8vIGludGVybGluayBwb2x5Z29uIG5vZGVzIGluIHotb3JkZXIKCWlmKCFwYXNzJiZpbnZTaXplKWluZGV4Q3VydmUoZWFyLG1pblgsbWluWSxpbnZTaXplKTtsZXQgc3RvcD1lYXIscHJldixuZXh0Oy8vIGl0ZXJhdGUgdGhyb3VnaCBlYXJzLCBzbGljaW5nIHRoZW0gb25lIGJ5IG9uZQoJd2hpbGUoZWFyLnByZXYhPT1lYXIubmV4dCl7cHJldj1lYXIucHJldjtuZXh0PWVhci5uZXh0O2lmKGludlNpemU/aXNFYXJIYXNoZWQoZWFyLG1pblgsbWluWSxpbnZTaXplKTppc0VhcihlYXIpKXsvLyBjdXQgb2ZmIHRoZSB0cmlhbmdsZQoJdHJpYW5nbGVzLnB1c2gocHJldi5pL2RpbSk7dHJpYW5nbGVzLnB1c2goZWFyLmkvZGltKTt0cmlhbmdsZXMucHVzaChuZXh0LmkvZGltKTtyZW1vdmVOb2RlKGVhcik7Ly8gc2tpcHBpbmcgdGhlIG5leHQgdmVydGV4IGxlYWRzIHRvIGxlc3Mgc2xpdmVyIHRyaWFuZ2xlcwoJZWFyPW5leHQubmV4dDtzdG9wPW5leHQubmV4dDtjb250aW51ZTt9ZWFyPW5leHQ7Ly8gaWYgd2UgbG9vcGVkIHRocm91Z2ggdGhlIHdob2xlIHJlbWFpbmluZyBwb2x5Z29uIGFuZCBjYW4ndCBmaW5kIGFueSBtb3JlIGVhcnMKCWlmKGVhcj09PXN0b3Apey8vIHRyeSBmaWx0ZXJpbmcgcG9pbnRzIGFuZCBzbGljaW5nIGFnYWluCglpZighcGFzcyl7ZWFyY3V0TGlua2VkKGZpbHRlclBvaW50cyhlYXIpLHRyaWFuZ2xlcyxkaW0sbWluWCxtaW5ZLGludlNpemUsMSk7Ly8gaWYgdGhpcyBkaWRuJ3Qgd29yaywgdHJ5IGN1cmluZyBhbGwgc21hbGwgc2VsZi1pbnRlcnNlY3Rpb25zIGxvY2FsbHkKCX1lbHNlIGlmKHBhc3M9PT0xKXtlYXI9Y3VyZUxvY2FsSW50ZXJzZWN0aW9ucyhmaWx0ZXJQb2ludHMoZWFyKSx0cmlhbmdsZXMsZGltKTtlYXJjdXRMaW5rZWQoZWFyLHRyaWFuZ2xlcyxkaW0sbWluWCxtaW5ZLGludlNpemUsMik7Ly8gYXMgYSBsYXN0IHJlc29ydCwgdHJ5IHNwbGl0dGluZyB0aGUgcmVtYWluaW5nIHBvbHlnb24gaW50byB0d28KCX1lbHNlIGlmKHBhc3M9PT0yKXtzcGxpdEVhcmN1dChlYXIsdHJpYW5nbGVzLGRpbSxtaW5YLG1pblksaW52U2l6ZSk7fWJyZWFrO319fS8vIGNoZWNrIHdoZXRoZXIgYSBwb2x5Z29uIG5vZGUgZm9ybXMgYSB2YWxpZCBlYXIgd2l0aCBhZGphY2VudCBub2RlcwoJZnVuY3Rpb24gaXNFYXIoZWFyKXtjb25zdCBhPWVhci5wcmV2LGI9ZWFyLGM9ZWFyLm5leHQ7aWYoYXJlYShhLGIsYyk+PTApcmV0dXJuIGZhbHNlOy8vIHJlZmxleCwgY2FuJ3QgYmUgYW4gZWFyCgkvLyBub3cgbWFrZSBzdXJlIHdlIGRvbid0IGhhdmUgb3RoZXIgcG9pbnRzIGluc2lkZSB0aGUgcG90ZW50aWFsIGVhcgoJbGV0IHA9ZWFyLm5leHQubmV4dDt3aGlsZShwIT09ZWFyLnByZXYpe2lmKHBvaW50SW5UcmlhbmdsZShhLngsYS55LGIueCxiLnksYy54LGMueSxwLngscC55KSYmYXJlYShwLnByZXYscCxwLm5leHQpPj0wKXJldHVybiBmYWxzZTtwPXAubmV4dDt9cmV0dXJuIHRydWU7fWZ1bmN0aW9uIGlzRWFySGFzaGVkKGVhcixtaW5YLG1pblksaW52U2l6ZSl7Y29uc3QgYT1lYXIucHJldixiPWVhcixjPWVhci5uZXh0O2lmKGFyZWEoYSxiLGMpPj0wKXJldHVybiBmYWxzZTsvLyByZWZsZXgsIGNhbid0IGJlIGFuIGVhcgoJLy8gdHJpYW5nbGUgYmJveDsgbWluICYgbWF4IGFyZSBjYWxjdWxhdGVkIGxpa2UgdGhpcyBmb3Igc3BlZWQKCWNvbnN0IG1pblRYPWEueDxiLng/YS54PGMueD9hLng6Yy54OmIueDxjLng/Yi54OmMueCxtaW5UWT1hLnk8Yi55P2EueTxjLnk/YS55OmMueTpiLnk8Yy55P2IueTpjLnksbWF4VFg9YS54PmIueD9hLng+Yy54P2EueDpjLng6Yi54PmMueD9iLng6Yy54LG1heFRZPWEueT5iLnk/YS55PmMueT9hLnk6Yy55OmIueT5jLnk/Yi55OmMueTsvLyB6LW9yZGVyIHJhbmdlIGZvciB0aGUgY3VycmVudCB0cmlhbmdsZSBiYm94OwoJY29uc3QgbWluWj16T3JkZXIobWluVFgsbWluVFksbWluWCxtaW5ZLGludlNpemUpLG1heFo9ek9yZGVyKG1heFRYLG1heFRZLG1pblgsbWluWSxpbnZTaXplKTtsZXQgcD1lYXIucHJldlosbj1lYXIubmV4dFo7Ly8gbG9vayBmb3IgcG9pbnRzIGluc2lkZSB0aGUgdHJpYW5nbGUgaW4gYm90aCBkaXJlY3Rpb25zCgl3aGlsZShwJiZwLno+PW1pblomJm4mJm4uejw9bWF4Wil7aWYocCE9PWVhci5wcmV2JiZwIT09ZWFyLm5leHQmJnBvaW50SW5UcmlhbmdsZShhLngsYS55LGIueCxiLnksYy54LGMueSxwLngscC55KSYmYXJlYShwLnByZXYscCxwLm5leHQpPj0wKXJldHVybiBmYWxzZTtwPXAucHJldlo7aWYobiE9PWVhci5wcmV2JiZuIT09ZWFyLm5leHQmJnBvaW50SW5UcmlhbmdsZShhLngsYS55LGIueCxiLnksYy54LGMueSxuLngsbi55KSYmYXJlYShuLnByZXYsbixuLm5leHQpPj0wKXJldHVybiBmYWxzZTtuPW4ubmV4dFo7fS8vIGxvb2sgZm9yIHJlbWFpbmluZyBwb2ludHMgaW4gZGVjcmVhc2luZyB6LW9yZGVyCgl3aGlsZShwJiZwLno+PW1pblope2lmKHAhPT1lYXIucHJldiYmcCE9PWVhci5uZXh0JiZwb2ludEluVHJpYW5nbGUoYS54LGEueSxiLngsYi55LGMueCxjLnkscC54LHAueSkmJmFyZWEocC5wcmV2LHAscC5uZXh0KT49MClyZXR1cm4gZmFsc2U7cD1wLnByZXZaO30vLyBsb29rIGZvciByZW1haW5pbmcgcG9pbnRzIGluIGluY3JlYXNpbmcgei1vcmRlcgoJd2hpbGUobiYmbi56PD1tYXhaKXtpZihuIT09ZWFyLnByZXYmJm4hPT1lYXIubmV4dCYmcG9pbnRJblRyaWFuZ2xlKGEueCxhLnksYi54LGIueSxjLngsYy55LG4ueCxuLnkpJiZhcmVhKG4ucHJldixuLG4ubmV4dCk+PTApcmV0dXJuIGZhbHNlO249bi5uZXh0Wjt9cmV0dXJuIHRydWU7fS8vIGdvIHRocm91Z2ggYWxsIHBvbHlnb24gbm9kZXMgYW5kIGN1cmUgc21hbGwgbG9jYWwgc2VsZi1pbnRlcnNlY3Rpb25zCglmdW5jdGlvbiBjdXJlTG9jYWxJbnRlcnNlY3Rpb25zKHN0YXJ0LHRyaWFuZ2xlcyxkaW0pe2xldCBwPXN0YXJ0O2Rve2NvbnN0IGE9cC5wcmV2LGI9cC5uZXh0Lm5leHQ7aWYoIWVxdWFscyhhLGIpJiZpbnRlcnNlY3RzKGEscCxwLm5leHQsYikmJmxvY2FsbHlJbnNpZGUoYSxiKSYmbG9jYWxseUluc2lkZShiLGEpKXt0cmlhbmdsZXMucHVzaChhLmkvZGltKTt0cmlhbmdsZXMucHVzaChwLmkvZGltKTt0cmlhbmdsZXMucHVzaChiLmkvZGltKTsvLyByZW1vdmUgdHdvIG5vZGVzIGludm9sdmVkCglyZW1vdmVOb2RlKHApO3JlbW92ZU5vZGUocC5uZXh0KTtwPXN0YXJ0PWI7fXA9cC5uZXh0O313aGlsZShwIT09c3RhcnQpO3JldHVybiBmaWx0ZXJQb2ludHMocCk7fS8vIHRyeSBzcGxpdHRpbmcgcG9seWdvbiBpbnRvIHR3byBhbmQgdHJpYW5ndWxhdGUgdGhlbSBpbmRlcGVuZGVudGx5CglmdW5jdGlvbiBzcGxpdEVhcmN1dChzdGFydCx0cmlhbmdsZXMsZGltLG1pblgsbWluWSxpbnZTaXplKXsvLyBsb29rIGZvciBhIHZhbGlkIGRpYWdvbmFsIHRoYXQgZGl2aWRlcyB0aGUgcG9seWdvbiBpbnRvIHR3bwoJbGV0IGE9c3RhcnQ7ZG97bGV0IGI9YS5uZXh0Lm5leHQ7d2hpbGUoYiE9PWEucHJldil7aWYoYS5pIT09Yi5pJiZpc1ZhbGlkRGlhZ29uYWwoYSxiKSl7Ly8gc3BsaXQgdGhlIHBvbHlnb24gaW4gdHdvIGJ5IHRoZSBkaWFnb25hbAoJbGV0IGM9c3BsaXRQb2x5Z29uKGEsYik7Ly8gZmlsdGVyIGNvbGluZWFyIHBvaW50cyBhcm91bmQgdGhlIGN1dHMKCWE9ZmlsdGVyUG9pbnRzKGEsYS5uZXh0KTtjPWZpbHRlclBvaW50cyhjLGMubmV4dCk7Ly8gcnVuIGVhcmN1dCBvbiBlYWNoIGhhbGYKCWVhcmN1dExpbmtlZChhLHRyaWFuZ2xlcyxkaW0sbWluWCxtaW5ZLGludlNpemUpO2VhcmN1dExpbmtlZChjLHRyaWFuZ2xlcyxkaW0sbWluWCxtaW5ZLGludlNpemUpO3JldHVybjt9Yj1iLm5leHQ7fWE9YS5uZXh0O313aGlsZShhIT09c3RhcnQpO30vLyBsaW5rIGV2ZXJ5IGhvbGUgaW50byB0aGUgb3V0ZXIgbG9vcCwgcHJvZHVjaW5nIGEgc2luZ2xlLXJpbmcgcG9seWdvbiB3aXRob3V0IGhvbGVzCglmdW5jdGlvbiBlbGltaW5hdGVIb2xlcyhkYXRhLGhvbGVJbmRpY2VzLG91dGVyTm9kZSxkaW0pe2NvbnN0IHF1ZXVlPVtdO2xldCBpLGxlbixzdGFydCxlbmQsbGlzdDtmb3IoaT0wLGxlbj1ob2xlSW5kaWNlcy5sZW5ndGg7aTxsZW47aSsrKXtzdGFydD1ob2xlSW5kaWNlc1tpXSpkaW07ZW5kPWk8bGVuLTE/aG9sZUluZGljZXNbaSsxXSpkaW06ZGF0YS5sZW5ndGg7bGlzdD1saW5rZWRMaXN0KGRhdGEsc3RhcnQsZW5kLGRpbSxmYWxzZSk7aWYobGlzdD09PWxpc3QubmV4dClsaXN0LnN0ZWluZXI9dHJ1ZTtxdWV1ZS5wdXNoKGdldExlZnRtb3N0KGxpc3QpKTt9cXVldWUuc29ydChjb21wYXJlWCk7Ly8gcHJvY2VzcyBob2xlcyBmcm9tIGxlZnQgdG8gcmlnaHQKCWZvcihpPTA7aTxxdWV1ZS5sZW5ndGg7aSsrKXtlbGltaW5hdGVIb2xlKHF1ZXVlW2ldLG91dGVyTm9kZSk7b3V0ZXJOb2RlPWZpbHRlclBvaW50cyhvdXRlck5vZGUsb3V0ZXJOb2RlLm5leHQpO31yZXR1cm4gb3V0ZXJOb2RlO31mdW5jdGlvbiBjb21wYXJlWChhLGIpe3JldHVybiBhLngtYi54O30vLyBmaW5kIGEgYnJpZGdlIGJldHdlZW4gdmVydGljZXMgdGhhdCBjb25uZWN0cyBob2xlIHdpdGggYW4gb3V0ZXIgcmluZyBhbmQgYW5kIGxpbmsgaXQKCWZ1bmN0aW9uIGVsaW1pbmF0ZUhvbGUoaG9sZSxvdXRlck5vZGUpe291dGVyTm9kZT1maW5kSG9sZUJyaWRnZShob2xlLG91dGVyTm9kZSk7aWYob3V0ZXJOb2RlKXtjb25zdCBiPXNwbGl0UG9seWdvbihvdXRlck5vZGUsaG9sZSk7Ly8gZmlsdGVyIGNvbGxpbmVhciBwb2ludHMgYXJvdW5kIHRoZSBjdXRzCglmaWx0ZXJQb2ludHMob3V0ZXJOb2RlLG91dGVyTm9kZS5uZXh0KTtmaWx0ZXJQb2ludHMoYixiLm5leHQpO319Ly8gRGF2aWQgRWJlcmx5J3MgYWxnb3JpdGhtIGZvciBmaW5kaW5nIGEgYnJpZGdlIGJldHdlZW4gaG9sZSBhbmQgb3V0ZXIgcG9seWdvbgoJZnVuY3Rpb24gZmluZEhvbGVCcmlkZ2UoaG9sZSxvdXRlck5vZGUpe2xldCBwPW91dGVyTm9kZTtjb25zdCBoeD1ob2xlLng7Y29uc3QgaHk9aG9sZS55O2xldCBxeD0tSW5maW5pdHksbTsvLyBmaW5kIGEgc2VnbWVudCBpbnRlcnNlY3RlZCBieSBhIHJheSBmcm9tIHRoZSBob2xlJ3MgbGVmdG1vc3QgcG9pbnQgdG8gdGhlIGxlZnQ7CgkvLyBzZWdtZW50J3MgZW5kcG9pbnQgd2l0aCBsZXNzZXIgeCB3aWxsIGJlIHBvdGVudGlhbCBjb25uZWN0aW9uIHBvaW50Cglkb3tpZihoeTw9cC55JiZoeT49cC5uZXh0LnkmJnAubmV4dC55IT09cC55KXtjb25zdCB4PXAueCsoaHktcC55KSoocC5uZXh0LngtcC54KS8ocC5uZXh0LnktcC55KTtpZih4PD1oeCYmeD5xeCl7cXg9eDtpZih4PT09aHgpe2lmKGh5PT09cC55KXJldHVybiBwO2lmKGh5PT09cC5uZXh0LnkpcmV0dXJuIHAubmV4dDt9bT1wLng8cC5uZXh0Lng/cDpwLm5leHQ7fX1wPXAubmV4dDt9d2hpbGUocCE9PW91dGVyTm9kZSk7aWYoIW0pcmV0dXJuIG51bGw7aWYoaHg9PT1xeClyZXR1cm4gbTsvLyBob2xlIHRvdWNoZXMgb3V0ZXIgc2VnbWVudDsgcGljayBsZWZ0bW9zdCBlbmRwb2ludAoJLy8gbG9vayBmb3IgcG9pbnRzIGluc2lkZSB0aGUgdHJpYW5nbGUgb2YgaG9sZSBwb2ludCwgc2VnbWVudCBpbnRlcnNlY3Rpb24gYW5kIGVuZHBvaW50OwoJLy8gaWYgdGhlcmUgYXJlIG5vIHBvaW50cyBmb3VuZCwgd2UgaGF2ZSBhIHZhbGlkIGNvbm5lY3Rpb247CgkvLyBvdGhlcndpc2UgY2hvb3NlIHRoZSBwb2ludCBvZiB0aGUgbWluaW11bSBhbmdsZSB3aXRoIHRoZSByYXkgYXMgY29ubmVjdGlvbiBwb2ludAoJY29uc3Qgc3RvcD1tLG14PW0ueCxteT1tLnk7bGV0IHRhbk1pbj1JbmZpbml0eSx0YW47cD1tO2Rve2lmKGh4Pj1wLngmJnAueD49bXgmJmh4IT09cC54JiZwb2ludEluVHJpYW5nbGUoaHk8bXk/aHg6cXgsaHksbXgsbXksaHk8bXk/cXg6aHgsaHkscC54LHAueSkpe3Rhbj1NYXRoLmFicyhoeS1wLnkpLyhoeC1wLngpOy8vIHRhbmdlbnRpYWwKCWlmKGxvY2FsbHlJbnNpZGUocCxob2xlKSYmKHRhbjx0YW5NaW58fHRhbj09PXRhbk1pbiYmKHAueD5tLnh8fHAueD09PW0ueCYmc2VjdG9yQ29udGFpbnNTZWN0b3IobSxwKSkpKXttPXA7dGFuTWluPXRhbjt9fXA9cC5uZXh0O313aGlsZShwIT09c3RvcCk7cmV0dXJuIG07fS8vIHdoZXRoZXIgc2VjdG9yIGluIHZlcnRleCBtIGNvbnRhaW5zIHNlY3RvciBpbiB2ZXJ0ZXggcCBpbiB0aGUgc2FtZSBjb29yZGluYXRlcwoJZnVuY3Rpb24gc2VjdG9yQ29udGFpbnNTZWN0b3IobSxwKXtyZXR1cm4gYXJlYShtLnByZXYsbSxwLnByZXYpPDAmJmFyZWEocC5uZXh0LG0sbS5uZXh0KTwwO30vLyBpbnRlcmxpbmsgcG9seWdvbiBub2RlcyBpbiB6LW9yZGVyCglmdW5jdGlvbiBpbmRleEN1cnZlKHN0YXJ0LG1pblgsbWluWSxpbnZTaXplKXtsZXQgcD1zdGFydDtkb3tpZihwLno9PT1udWxsKXAuej16T3JkZXIocC54LHAueSxtaW5YLG1pblksaW52U2l6ZSk7cC5wcmV2Wj1wLnByZXY7cC5uZXh0Wj1wLm5leHQ7cD1wLm5leHQ7fXdoaWxlKHAhPT1zdGFydCk7cC5wcmV2Wi5uZXh0Wj1udWxsO3AucHJldlo9bnVsbDtzb3J0TGlua2VkKHApO30vLyBTaW1vbiBUYXRoYW0ncyBsaW5rZWQgbGlzdCBtZXJnZSBzb3J0IGFsZ29yaXRobQoJLy8gaHR0cDovL3d3dy5jaGlhcmsuZ3JlZW5lbmQub3JnLnVrL35zZ3RhdGhhbS9hbGdvcml0aG1zL2xpc3Rzb3J0Lmh0bWwKCWZ1bmN0aW9uIHNvcnRMaW5rZWQobGlzdCl7bGV0IGkscCxxLGUsdGFpbCxudW1NZXJnZXMscFNpemUscVNpemUsaW5TaXplPTE7ZG97cD1saXN0O2xpc3Q9bnVsbDt0YWlsPW51bGw7bnVtTWVyZ2VzPTA7d2hpbGUocCl7bnVtTWVyZ2VzKys7cT1wO3BTaXplPTA7Zm9yKGk9MDtpPGluU2l6ZTtpKyspe3BTaXplKys7cT1xLm5leHRaO2lmKCFxKWJyZWFrO31xU2l6ZT1pblNpemU7d2hpbGUocFNpemU+MHx8cVNpemU+MCYmcSl7aWYocFNpemUhPT0wJiYocVNpemU9PT0wfHwhcXx8cC56PD1xLnopKXtlPXA7cD1wLm5leHRaO3BTaXplLS07fWVsc2Uge2U9cTtxPXEubmV4dFo7cVNpemUtLTt9aWYodGFpbCl0YWlsLm5leHRaPWU7ZWxzZSBsaXN0PWU7ZS5wcmV2Wj10YWlsO3RhaWw9ZTt9cD1xO310YWlsLm5leHRaPW51bGw7aW5TaXplKj0yO313aGlsZShudW1NZXJnZXM+MSk7cmV0dXJuIGxpc3Q7fS8vIHotb3JkZXIgb2YgYSBwb2ludCBnaXZlbiBjb29yZHMgYW5kIGludmVyc2Ugb2YgdGhlIGxvbmdlciBzaWRlIG9mIGRhdGEgYmJveAoJZnVuY3Rpb24gek9yZGVyKHgseSxtaW5YLG1pblksaW52U2l6ZSl7Ly8gY29vcmRzIGFyZSB0cmFuc2Zvcm1lZCBpbnRvIG5vbi1uZWdhdGl2ZSAxNS1iaXQgaW50ZWdlciByYW5nZQoJeD0zMjc2NyooeC1taW5YKSppbnZTaXplO3k9MzI3NjcqKHktbWluWSkqaW52U2l6ZTt4PSh4fHg8PDgpJjB4MDBGRjAwRkY7eD0oeHx4PDw0KSYweDBGMEYwRjBGO3g9KHh8eDw8MikmMHgzMzMzMzMzMzt4PSh4fHg8PDEpJjB4NTU1NTU1NTU7eT0oeXx5PDw4KSYweDAwRkYwMEZGO3k9KHl8eTw8NCkmMHgwRjBGMEYwRjt5PSh5fHk8PDIpJjB4MzMzMzMzMzM7eT0oeXx5PDwxKSYweDU1NTU1NTU1O3JldHVybiB4fHk8PDE7fS8vIGZpbmQgdGhlIGxlZnRtb3N0IG5vZGUgb2YgYSBwb2x5Z29uIHJpbmcKCWZ1bmN0aW9uIGdldExlZnRtb3N0KHN0YXJ0KXtsZXQgcD1zdGFydCxsZWZ0bW9zdD1zdGFydDtkb3tpZihwLng8bGVmdG1vc3QueHx8cC54PT09bGVmdG1vc3QueCYmcC55PGxlZnRtb3N0LnkpbGVmdG1vc3Q9cDtwPXAubmV4dDt9d2hpbGUocCE9PXN0YXJ0KTtyZXR1cm4gbGVmdG1vc3Q7fS8vIGNoZWNrIGlmIGEgcG9pbnQgbGllcyB3aXRoaW4gYSBjb252ZXggdHJpYW5nbGUKCWZ1bmN0aW9uIHBvaW50SW5UcmlhbmdsZShheCxheSxieCxieSxjeCxjeSxweCxweSl7cmV0dXJuIChjeC1weCkqKGF5LXB5KS0oYXgtcHgpKihjeS1weSk+PTAmJihheC1weCkqKGJ5LXB5KS0oYngtcHgpKihheS1weSk+PTAmJihieC1weCkqKGN5LXB5KS0oY3gtcHgpKihieS1weSk+PTA7fS8vIGNoZWNrIGlmIGEgZGlhZ29uYWwgYmV0d2VlbiB0d28gcG9seWdvbiBub2RlcyBpcyB2YWxpZCAobGllcyBpbiBwb2x5Z29uIGludGVyaW9yKQoJZnVuY3Rpb24gaXNWYWxpZERpYWdvbmFsKGEsYil7cmV0dXJuIGEubmV4dC5pIT09Yi5pJiZhLnByZXYuaSE9PWIuaSYmIWludGVyc2VjdHNQb2x5Z29uKGEsYikmJigvLyBkb25lcyd0IGludGVyc2VjdCBvdGhlciBlZGdlcwoJbG9jYWxseUluc2lkZShhLGIpJiZsb2NhbGx5SW5zaWRlKGIsYSkmJm1pZGRsZUluc2lkZShhLGIpJiYoLy8gbG9jYWxseSB2aXNpYmxlCglhcmVhKGEucHJldixhLGIucHJldil8fGFyZWEoYSxiLnByZXYsYikpfHwvLyBkb2VzIG5vdCBjcmVhdGUgb3Bwb3NpdGUtZmFjaW5nIHNlY3RvcnMKCWVxdWFscyhhLGIpJiZhcmVhKGEucHJldixhLGEubmV4dCk+MCYmYXJlYShiLnByZXYsYixiLm5leHQpPjApOy8vIHNwZWNpYWwgemVyby1sZW5ndGggY2FzZQoJfS8vIHNpZ25lZCBhcmVhIG9mIGEgdHJpYW5nbGUKCWZ1bmN0aW9uIGFyZWEocCxxLHIpe3JldHVybiAocS55LXAueSkqKHIueC1xLngpLShxLngtcC54KSooci55LXEueSk7fS8vIGNoZWNrIGlmIHR3byBwb2ludHMgYXJlIGVxdWFsCglmdW5jdGlvbiBlcXVhbHMocDEscDIpe3JldHVybiBwMS54PT09cDIueCYmcDEueT09PXAyLnk7fS8vIGNoZWNrIGlmIHR3byBzZWdtZW50cyBpbnRlcnNlY3QKCWZ1bmN0aW9uIGludGVyc2VjdHMocDEscTEscDIscTIpe2NvbnN0IG8xPXNpZ24oYXJlYShwMSxxMSxwMikpO2NvbnN0IG8yPXNpZ24oYXJlYShwMSxxMSxxMikpO2NvbnN0IG8zPXNpZ24oYXJlYShwMixxMixwMSkpO2NvbnN0IG80PXNpZ24oYXJlYShwMixxMixxMSkpO2lmKG8xIT09bzImJm8zIT09bzQpcmV0dXJuIHRydWU7Ly8gZ2VuZXJhbCBjYXNlCglpZihvMT09PTAmJm9uU2VnbWVudChwMSxwMixxMSkpcmV0dXJuIHRydWU7Ly8gcDEsIHExIGFuZCBwMiBhcmUgY29sbGluZWFyIGFuZCBwMiBsaWVzIG9uIHAxcTEKCWlmKG8yPT09MCYmb25TZWdtZW50KHAxLHEyLHExKSlyZXR1cm4gdHJ1ZTsvLyBwMSwgcTEgYW5kIHEyIGFyZSBjb2xsaW5lYXIgYW5kIHEyIGxpZXMgb24gcDFxMQoJaWYobzM9PT0wJiZvblNlZ21lbnQocDIscDEscTIpKXJldHVybiB0cnVlOy8vIHAyLCBxMiBhbmQgcDEgYXJlIGNvbGxpbmVhciBhbmQgcDEgbGllcyBvbiBwMnEyCglpZihvND09PTAmJm9uU2VnbWVudChwMixxMSxxMikpcmV0dXJuIHRydWU7Ly8gcDIsIHEyIGFuZCBxMSBhcmUgY29sbGluZWFyIGFuZCBxMSBsaWVzIG9uIHAycTIKCXJldHVybiBmYWxzZTt9Ly8gZm9yIGNvbGxpbmVhciBwb2ludHMgcCwgcSwgciwgY2hlY2sgaWYgcG9pbnQgcSBsaWVzIG9uIHNlZ21lbnQgcHIKCWZ1bmN0aW9uIG9uU2VnbWVudChwLHEscil7cmV0dXJuIHEueDw9TWF0aC5tYXgocC54LHIueCkmJnEueD49TWF0aC5taW4ocC54LHIueCkmJnEueTw9TWF0aC5tYXgocC55LHIueSkmJnEueT49TWF0aC5taW4ocC55LHIueSk7fWZ1bmN0aW9uIHNpZ24obnVtKXtyZXR1cm4gbnVtPjA/MTpudW08MD8tMTowO30vLyBjaGVjayBpZiBhIHBvbHlnb24gZGlhZ29uYWwgaW50ZXJzZWN0cyBhbnkgcG9seWdvbiBzZWdtZW50cwoJZnVuY3Rpb24gaW50ZXJzZWN0c1BvbHlnb24oYSxiKXtsZXQgcD1hO2Rve2lmKHAuaSE9PWEuaSYmcC5uZXh0LmkhPT1hLmkmJnAuaSE9PWIuaSYmcC5uZXh0LmkhPT1iLmkmJmludGVyc2VjdHMocCxwLm5leHQsYSxiKSlyZXR1cm4gdHJ1ZTtwPXAubmV4dDt9d2hpbGUocCE9PWEpO3JldHVybiBmYWxzZTt9Ly8gY2hlY2sgaWYgYSBwb2x5Z29uIGRpYWdvbmFsIGlzIGxvY2FsbHkgaW5zaWRlIHRoZSBwb2x5Z29uCglmdW5jdGlvbiBsb2NhbGx5SW5zaWRlKGEsYil7cmV0dXJuIGFyZWEoYS5wcmV2LGEsYS5uZXh0KTwwP2FyZWEoYSxiLGEubmV4dCk+PTAmJmFyZWEoYSxhLnByZXYsYik+PTA6YXJlYShhLGIsYS5wcmV2KTwwfHxhcmVhKGEsYS5uZXh0LGIpPDA7fS8vIGNoZWNrIGlmIHRoZSBtaWRkbGUgcG9pbnQgb2YgYSBwb2x5Z29uIGRpYWdvbmFsIGlzIGluc2lkZSB0aGUgcG9seWdvbgoJZnVuY3Rpb24gbWlkZGxlSW5zaWRlKGEsYil7bGV0IHA9YSxpbnNpZGU9ZmFsc2U7Y29uc3QgcHg9KGEueCtiLngpLzIscHk9KGEueStiLnkpLzI7ZG97aWYocC55PnB5IT09cC5uZXh0Lnk+cHkmJnAubmV4dC55IT09cC55JiZweDwocC5uZXh0LngtcC54KSoocHktcC55KS8ocC5uZXh0LnktcC55KStwLngpaW5zaWRlPSFpbnNpZGU7cD1wLm5leHQ7fXdoaWxlKHAhPT1hKTtyZXR1cm4gaW5zaWRlO30vLyBsaW5rIHR3byBwb2x5Z29uIHZlcnRpY2VzIHdpdGggYSBicmlkZ2U7IGlmIHRoZSB2ZXJ0aWNlcyBiZWxvbmcgdG8gdGhlIHNhbWUgcmluZywgaXQgc3BsaXRzIHBvbHlnb24gaW50byB0d287CgkvLyBpZiBvbmUgYmVsb25ncyB0byB0aGUgb3V0ZXIgcmluZyBhbmQgYW5vdGhlciB0byBhIGhvbGUsIGl0IG1lcmdlcyBpdCBpbnRvIGEgc2luZ2xlIHJpbmcKCWZ1bmN0aW9uIHNwbGl0UG9seWdvbihhLGIpe2NvbnN0IGEyPW5ldyBOb2RlKGEuaSxhLngsYS55KSxiMj1uZXcgTm9kZShiLmksYi54LGIueSksYW49YS5uZXh0LGJwPWIucHJldjthLm5leHQ9YjtiLnByZXY9YTthMi5uZXh0PWFuO2FuLnByZXY9YTI7YjIubmV4dD1hMjthMi5wcmV2PWIyO2JwLm5leHQ9YjI7YjIucHJldj1icDtyZXR1cm4gYjI7fS8vIGNyZWF0ZSBhIG5vZGUgYW5kIG9wdGlvbmFsbHkgbGluayBpdCB3aXRoIHByZXZpb3VzIG9uZSAoaW4gYSBjaXJjdWxhciBkb3VibHkgbGlua2VkIGxpc3QpCglmdW5jdGlvbiBpbnNlcnROb2RlKGkseCx5LGxhc3Qpe2NvbnN0IHA9bmV3IE5vZGUoaSx4LHkpO2lmKCFsYXN0KXtwLnByZXY9cDtwLm5leHQ9cDt9ZWxzZSB7cC5uZXh0PWxhc3QubmV4dDtwLnByZXY9bGFzdDtsYXN0Lm5leHQucHJldj1wO2xhc3QubmV4dD1wO31yZXR1cm4gcDt9ZnVuY3Rpb24gcmVtb3ZlTm9kZShwKXtwLm5leHQucHJldj1wLnByZXY7cC5wcmV2Lm5leHQ9cC5uZXh0O2lmKHAucHJldlopcC5wcmV2Wi5uZXh0Wj1wLm5leHRaO2lmKHAubmV4dFopcC5uZXh0Wi5wcmV2Wj1wLnByZXZaO31mdW5jdGlvbiBOb2RlKGkseCx5KXsvLyB2ZXJ0ZXggaW5kZXggaW4gY29vcmRpbmF0ZXMgYXJyYXkKCXRoaXMuaT1pOy8vIHZlcnRleCBjb29yZGluYXRlcwoJdGhpcy54PXg7dGhpcy55PXk7Ly8gcHJldmlvdXMgYW5kIG5leHQgdmVydGV4IG5vZGVzIGluIGEgcG9seWdvbiByaW5nCgl0aGlzLnByZXY9bnVsbDt0aGlzLm5leHQ9bnVsbDsvLyB6LW9yZGVyIGN1cnZlIHZhbHVlCgl0aGlzLno9bnVsbDsvLyBwcmV2aW91cyBhbmQgbmV4dCBub2RlcyBpbiB6LW9yZGVyCgl0aGlzLnByZXZaPW51bGw7dGhpcy5uZXh0Wj1udWxsOy8vIGluZGljYXRlcyB3aGV0aGVyIHRoaXMgaXMgYSBzdGVpbmVyIHBvaW50Cgl0aGlzLnN0ZWluZXI9ZmFsc2U7fWZ1bmN0aW9uIHNpZ25lZEFyZWEoZGF0YSxzdGFydCxlbmQsZGltKXtsZXQgc3VtPTA7Zm9yKGxldCBpPXN0YXJ0LGo9ZW5kLWRpbTtpPGVuZDtpKz1kaW0pe3N1bSs9KGRhdGFbal0tZGF0YVtpXSkqKGRhdGFbaSsxXStkYXRhW2orMV0pO2o9aTt9cmV0dXJuIHN1bTt9Y2xhc3MgU2hhcGVVdGlsc3svLyBjYWxjdWxhdGUgYXJlYSBvZiB0aGUgY29udG91ciBwb2x5Z29uCglzdGF0aWMgYXJlYShjb250b3VyKXtjb25zdCBuPWNvbnRvdXIubGVuZ3RoO2xldCBhPTAuMDtmb3IobGV0IHA9bi0xLHE9MDtxPG47cD1xKyspe2ErPWNvbnRvdXJbcF0ueCpjb250b3VyW3FdLnktY29udG91cltxXS54KmNvbnRvdXJbcF0ueTt9cmV0dXJuIGEqMC41O31zdGF0aWMgaXNDbG9ja1dpc2UocHRzKXtyZXR1cm4gU2hhcGVVdGlscy5hcmVhKHB0cyk8MDt9c3RhdGljIHRyaWFuZ3VsYXRlU2hhcGUoY29udG91cixob2xlcyl7Y29uc3QgdmVydGljZXM9W107Ly8gZmxhdCBhcnJheSBvZiB2ZXJ0aWNlcyBsaWtlIFsgeDAseTAsIHgxLHkxLCB4Mix5MiwgLi4uIF0KCWNvbnN0IGhvbGVJbmRpY2VzPVtdOy8vIGFycmF5IG9mIGhvbGUgaW5kaWNlcwoJY29uc3QgZmFjZXM9W107Ly8gZmluYWwgYXJyYXkgb2YgdmVydGV4IGluZGljZXMgbGlrZSBbIFsgYSxiLGQgXSwgWyBiLGMsZCBdIF0KCXJlbW92ZUR1cEVuZFB0cyhjb250b3VyKTthZGRDb250b3VyKHZlcnRpY2VzLGNvbnRvdXIpOy8vCglsZXQgaG9sZUluZGV4PWNvbnRvdXIubGVuZ3RoO2hvbGVzLmZvckVhY2gocmVtb3ZlRHVwRW5kUHRzKTtmb3IobGV0IGk9MDtpPGhvbGVzLmxlbmd0aDtpKyspe2hvbGVJbmRpY2VzLnB1c2goaG9sZUluZGV4KTtob2xlSW5kZXgrPWhvbGVzW2ldLmxlbmd0aDthZGRDb250b3VyKHZlcnRpY2VzLGhvbGVzW2ldKTt9Ly8KCWNvbnN0IHRyaWFuZ2xlcz1FYXJjdXQudHJpYW5ndWxhdGUodmVydGljZXMsaG9sZUluZGljZXMpOy8vCglmb3IobGV0IGk9MDtpPHRyaWFuZ2xlcy5sZW5ndGg7aSs9Myl7ZmFjZXMucHVzaCh0cmlhbmdsZXMuc2xpY2UoaSxpKzMpKTt9cmV0dXJuIGZhY2VzO319ZnVuY3Rpb24gcmVtb3ZlRHVwRW5kUHRzKHBvaW50cyl7Y29uc3QgbD1wb2ludHMubGVuZ3RoO2lmKGw+MiYmcG9pbnRzW2wtMV0uZXF1YWxzKHBvaW50c1swXSkpe3BvaW50cy5wb3AoKTt9fWZ1bmN0aW9uIGFkZENvbnRvdXIodmVydGljZXMsY29udG91cil7Zm9yKGxldCBpPTA7aTxjb250b3VyLmxlbmd0aDtpKyspe3ZlcnRpY2VzLnB1c2goY29udG91cltpXS54KTt2ZXJ0aWNlcy5wdXNoKGNvbnRvdXJbaV0ueSk7fX0vKioKCSAqIENyZWF0ZXMgZXh0cnVkZWQgZ2VvbWV0cnkgZnJvbSBhIHBhdGggc2hhcGUuCgkgKgoJICogcGFyYW1ldGVycyA9IHsKCSAqCgkgKiAgY3VydmVTZWdtZW50czogPGludD4sIC8vIG51bWJlciBvZiBwb2ludHMgb24gdGhlIGN1cnZlcwoJICogIHN0ZXBzOiA8aW50PiwgLy8gbnVtYmVyIG9mIHBvaW50cyBmb3Igei1zaWRlIGV4dHJ1c2lvbnMgLyB1c2VkIGZvciBzdWJkaXZpZGluZyBzZWdtZW50cyBvZiBleHRydWRlIHNwbGluZSB0b28KCSAqICBkZXB0aDogPGZsb2F0PiwgLy8gRGVwdGggdG8gZXh0cnVkZSB0aGUgc2hhcGUKCSAqCgkgKiAgYmV2ZWxFbmFibGVkOiA8Ym9vbD4sIC8vIHR1cm4gb24gYmV2ZWwKCSAqICBiZXZlbFRoaWNrbmVzczogPGZsb2F0PiwgLy8gaG93IGRlZXAgaW50byB0aGUgb3JpZ2luYWwgc2hhcGUgYmV2ZWwgZ29lcwoJICogIGJldmVsU2l6ZTogPGZsb2F0PiwgLy8gaG93IGZhciBmcm9tIHNoYXBlIG91dGxpbmUgKGluY2x1ZGluZyBiZXZlbE9mZnNldCkgaXMgYmV2ZWwKCSAqICBiZXZlbE9mZnNldDogPGZsb2F0PiwgLy8gaG93IGZhciBmcm9tIHNoYXBlIG91dGxpbmUgZG9lcyBiZXZlbCBzdGFydAoJICogIGJldmVsU2VnbWVudHM6IDxpbnQ+LCAvLyBudW1iZXIgb2YgYmV2ZWwgbGF5ZXJzCgkgKgoJICogIGV4dHJ1ZGVQYXRoOiA8VEhSRUUuQ3VydmU+IC8vIGN1cnZlIHRvIGV4dHJ1ZGUgc2hhcGUgYWxvbmcKCSAqCgkgKiAgVVZHZW5lcmF0b3I6IDxPYmplY3Q+IC8vIG9iamVjdCB0aGF0IHByb3ZpZGVzIFVWIGdlbmVyYXRvciBmdW5jdGlvbnMKCSAqCgkgKiB9CgkgKi9jbGFzcyBFeHRydWRlR2VvbWV0cnkgZXh0ZW5kcyBCdWZmZXJHZW9tZXRyeXtjb25zdHJ1Y3RvcihzaGFwZXMsb3B0aW9ucyl7aWYoc2hhcGVzPT09dm9pZCAwKXtzaGFwZXM9bmV3IFNoYXBlKFtuZXcgVmVjdG9yMigwLjUsMC41KSxuZXcgVmVjdG9yMigtMC41LDAuNSksbmV3IFZlY3RvcjIoLTAuNSwtMC41KSxuZXcgVmVjdG9yMigwLjUsLTAuNSldKTt9aWYob3B0aW9ucz09PXZvaWQgMCl7b3B0aW9ucz17fTt9c3VwZXIoKTt0aGlzLnR5cGU9J0V4dHJ1ZGVHZW9tZXRyeSc7dGhpcy5wYXJhbWV0ZXJzPXtzaGFwZXM6c2hhcGVzLG9wdGlvbnM6b3B0aW9uc307c2hhcGVzPUFycmF5LmlzQXJyYXkoc2hhcGVzKT9zaGFwZXM6W3NoYXBlc107Y29uc3Qgc2NvcGU9dGhpcztjb25zdCB2ZXJ0aWNlc0FycmF5PVtdO2NvbnN0IHV2QXJyYXk9W107Zm9yKGxldCBpPTAsbD1zaGFwZXMubGVuZ3RoO2k8bDtpKyspe2NvbnN0IHNoYXBlPXNoYXBlc1tpXTthZGRTaGFwZShzaGFwZSk7fS8vIGJ1aWxkIGdlb21ldHJ5Cgl0aGlzLnNldEF0dHJpYnV0ZSgncG9zaXRpb24nLG5ldyBGbG9hdDMyQnVmZmVyQXR0cmlidXRlKHZlcnRpY2VzQXJyYXksMykpO3RoaXMuc2V0QXR0cmlidXRlKCd1dicsbmV3IEZsb2F0MzJCdWZmZXJBdHRyaWJ1dGUodXZBcnJheSwyKSk7dGhpcy5jb21wdXRlVmVydGV4Tm9ybWFscygpOy8vIGZ1bmN0aW9ucwoJZnVuY3Rpb24gYWRkU2hhcGUoc2hhcGUpe2NvbnN0IHBsYWNlaG9sZGVyPVtdOy8vIG9wdGlvbnMKCWNvbnN0IGN1cnZlU2VnbWVudHM9b3B0aW9ucy5jdXJ2ZVNlZ21lbnRzIT09dW5kZWZpbmVkP29wdGlvbnMuY3VydmVTZWdtZW50czoxMjtjb25zdCBzdGVwcz1vcHRpb25zLnN0ZXBzIT09dW5kZWZpbmVkP29wdGlvbnMuc3RlcHM6MTtsZXQgZGVwdGg9b3B0aW9ucy5kZXB0aCE9PXVuZGVmaW5lZD9vcHRpb25zLmRlcHRoOjE7bGV0IGJldmVsRW5hYmxlZD1vcHRpb25zLmJldmVsRW5hYmxlZCE9PXVuZGVmaW5lZD9vcHRpb25zLmJldmVsRW5hYmxlZDp0cnVlO2xldCBiZXZlbFRoaWNrbmVzcz1vcHRpb25zLmJldmVsVGhpY2tuZXNzIT09dW5kZWZpbmVkP29wdGlvbnMuYmV2ZWxUaGlja25lc3M6MC4yO2xldCBiZXZlbFNpemU9b3B0aW9ucy5iZXZlbFNpemUhPT11bmRlZmluZWQ/b3B0aW9ucy5iZXZlbFNpemU6YmV2ZWxUaGlja25lc3MtMC4xO2xldCBiZXZlbE9mZnNldD1vcHRpb25zLmJldmVsT2Zmc2V0IT09dW5kZWZpbmVkP29wdGlvbnMuYmV2ZWxPZmZzZXQ6MDtsZXQgYmV2ZWxTZWdtZW50cz1vcHRpb25zLmJldmVsU2VnbWVudHMhPT11bmRlZmluZWQ/b3B0aW9ucy5iZXZlbFNlZ21lbnRzOjM7Y29uc3QgZXh0cnVkZVBhdGg9b3B0aW9ucy5leHRydWRlUGF0aDtjb25zdCB1dmdlbj1vcHRpb25zLlVWR2VuZXJhdG9yIT09dW5kZWZpbmVkP29wdGlvbnMuVVZHZW5lcmF0b3I6V29ybGRVVkdlbmVyYXRvcjsvLyBkZXByZWNhdGVkIG9wdGlvbnMKCWlmKG9wdGlvbnMuYW1vdW50IT09dW5kZWZpbmVkKXtjb25zb2xlLndhcm4oJ1RIUkVFLkV4dHJ1ZGVCdWZmZXJHZW9tZXRyeTogYW1vdW50IGhhcyBiZWVuIHJlbmFtZWQgdG8gZGVwdGguJyk7ZGVwdGg9b3B0aW9ucy5hbW91bnQ7fS8vCglsZXQgZXh0cnVkZVB0cyxleHRydWRlQnlQYXRoPWZhbHNlO2xldCBzcGxpbmVUdWJlLGJpbm9ybWFsLG5vcm1hbCxwb3NpdGlvbjI7aWYoZXh0cnVkZVBhdGgpe2V4dHJ1ZGVQdHM9ZXh0cnVkZVBhdGguZ2V0U3BhY2VkUG9pbnRzKHN0ZXBzKTtleHRydWRlQnlQYXRoPXRydWU7YmV2ZWxFbmFibGVkPWZhbHNlOy8vIGJldmVscyBub3Qgc3VwcG9ydGVkIGZvciBwYXRoIGV4dHJ1c2lvbgoJLy8gU0VUVVAgVE5CIHZhcmlhYmxlcwoJLy8gVE9ETzEgLSBoYXZlIGEgLmlzQ2xvc2VkIGluIHNwbGluZT8KCXNwbGluZVR1YmU9ZXh0cnVkZVBhdGguY29tcHV0ZUZyZW5ldEZyYW1lcyhzdGVwcyxmYWxzZSk7Ly8gY29uc29sZS5sb2coc3BsaW5lVHViZSwgJ3NwbGluZVR1YmUnLCBzcGxpbmVUdWJlLm5vcm1hbHMubGVuZ3RoLCAnc3RlcHMnLCBzdGVwcywgJ2V4dHJ1ZGVQdHMnLCBleHRydWRlUHRzLmxlbmd0aCk7CgliaW5vcm1hbD1uZXcgVmVjdG9yMygpO25vcm1hbD1uZXcgVmVjdG9yMygpO3Bvc2l0aW9uMj1uZXcgVmVjdG9yMygpO30vLyBTYWZlZ3VhcmRzIGlmIGJldmVscyBhcmUgbm90IGVuYWJsZWQKCWlmKCFiZXZlbEVuYWJsZWQpe2JldmVsU2VnbWVudHM9MDtiZXZlbFRoaWNrbmVzcz0wO2JldmVsU2l6ZT0wO2JldmVsT2Zmc2V0PTA7fS8vIFZhcmlhYmxlcyBpbml0aWFsaXphdGlvbgoJY29uc3Qgc2hhcGVQb2ludHM9c2hhcGUuZXh0cmFjdFBvaW50cyhjdXJ2ZVNlZ21lbnRzKTtsZXQgdmVydGljZXM9c2hhcGVQb2ludHMuc2hhcGU7Y29uc3QgaG9sZXM9c2hhcGVQb2ludHMuaG9sZXM7Y29uc3QgcmV2ZXJzZT0hU2hhcGVVdGlscy5pc0Nsb2NrV2lzZSh2ZXJ0aWNlcyk7aWYocmV2ZXJzZSl7dmVydGljZXM9dmVydGljZXMucmV2ZXJzZSgpOy8vIE1heWJlIHdlIHNob3VsZCBhbHNvIGNoZWNrIGlmIGhvbGVzIGFyZSBpbiB0aGUgb3Bwb3NpdGUgZGlyZWN0aW9uLCBqdXN0IHRvIGJlIHNhZmUgLi4uCglmb3IobGV0IGg9MCxobD1ob2xlcy5sZW5ndGg7aDxobDtoKyspe2NvbnN0IGFob2xlPWhvbGVzW2hdO2lmKFNoYXBlVXRpbHMuaXNDbG9ja1dpc2UoYWhvbGUpKXtob2xlc1toXT1haG9sZS5yZXZlcnNlKCk7fX19Y29uc3QgZmFjZXM9U2hhcGVVdGlscy50cmlhbmd1bGF0ZVNoYXBlKHZlcnRpY2VzLGhvbGVzKTsvKiBWZXJ0aWNlcyAqL2NvbnN0IGNvbnRvdXI9dmVydGljZXM7Ly8gdmVydGljZXMgaGFzIGFsbCBwb2ludHMgYnV0IGNvbnRvdXIgaGFzIG9ubHkgcG9pbnRzIG9mIGNpcmN1bWZlcmVuY2UKCWZvcihsZXQgaD0wLGhsPWhvbGVzLmxlbmd0aDtoPGhsO2grKyl7Y29uc3QgYWhvbGU9aG9sZXNbaF07dmVydGljZXM9dmVydGljZXMuY29uY2F0KGFob2xlKTt9ZnVuY3Rpb24gc2NhbGVQdDIocHQsdmVjLHNpemUpe2lmKCF2ZWMpY29uc29sZS5lcnJvcignVEhSRUUuRXh0cnVkZUdlb21ldHJ5OiB2ZWMgZG9lcyBub3QgZXhpc3QnKTtyZXR1cm4gdmVjLmNsb25lKCkubXVsdGlwbHlTY2FsYXIoc2l6ZSkuYWRkKHB0KTt9Y29uc3Qgdmxlbj12ZXJ0aWNlcy5sZW5ndGgsZmxlbj1mYWNlcy5sZW5ndGg7Ly8gRmluZCBkaXJlY3Rpb25zIGZvciBwb2ludCBtb3ZlbWVudAoJZnVuY3Rpb24gZ2V0QmV2ZWxWZWMoaW5QdCxpblByZXYsaW5OZXh0KXsvLyBjb21wdXRlcyBmb3IgaW5QdCB0aGUgY29ycmVzcG9uZGluZyBwb2ludCBpblB0JyBvbiBhIG5ldyBjb250b3VyCgkvLyAgIHNoaWZ0ZWQgYnkgMSB1bml0IChsZW5ndGggb2Ygbm9ybWFsaXplZCB2ZWN0b3IpIHRvIHRoZSBsZWZ0CgkvLyBpZiB3ZSB3YWxrIGFsb25nIGNvbnRvdXIgY2xvY2t3aXNlLCB0aGlzIG5ldyBjb250b3VyIGlzIG91dHNpZGUgdGhlIG9sZCBvbmUKCS8vCgkvLyBpblB0JyBpcyB0aGUgaW50ZXJzZWN0aW9uIG9mIHRoZSB0d28gbGluZXMgcGFyYWxsZWwgdG8gdGhlIHR3bwoJLy8gIGFkamFjZW50IGVkZ2VzIG9mIGluUHQgYXQgYSBkaXN0YW5jZSBvZiAxIHVuaXQgb24gdGhlIGxlZnQgc2lkZS4KCWxldCB2X3RyYW5zX3gsdl90cmFuc195LHNocmlua19ieTsvLyByZXN1bHRpbmcgdHJhbnNsYXRpb24gdmVjdG9yIGZvciBpblB0CgkvLyBnb29kIHJlYWRpbmcgZm9yIGdlb21ldHJ5IGFsZ29yaXRobXMgKGhlcmU6IGxpbmUtbGluZSBpbnRlcnNlY3Rpb24pCgkvLyBodHRwOi8vZ2VvbWFsZ29yaXRobXMuY29tL2EwNS1faW50ZXJzZWN0LTEuaHRtbAoJY29uc3Qgdl9wcmV2X3g9aW5QdC54LWluUHJldi54LHZfcHJldl95PWluUHQueS1pblByZXYueTtjb25zdCB2X25leHRfeD1pbk5leHQueC1pblB0Lngsdl9uZXh0X3k9aW5OZXh0LnktaW5QdC55O2NvbnN0IHZfcHJldl9sZW5zcT12X3ByZXZfeCp2X3ByZXZfeCt2X3ByZXZfeSp2X3ByZXZfeTsvLyBjaGVjayBmb3IgY29sbGluZWFyIGVkZ2VzCgljb25zdCBjb2xsaW5lYXIwPXZfcHJldl94KnZfbmV4dF95LXZfcHJldl95KnZfbmV4dF94O2lmKE1hdGguYWJzKGNvbGxpbmVhcjApPk51bWJlci5FUFNJTE9OKXsvLyBub3QgY29sbGluZWFyCgkvLyBsZW5ndGggb2YgdmVjdG9ycyBmb3Igbm9ybWFsaXppbmcKCWNvbnN0IHZfcHJldl9sZW49TWF0aC5zcXJ0KHZfcHJldl9sZW5zcSk7Y29uc3Qgdl9uZXh0X2xlbj1NYXRoLnNxcnQodl9uZXh0X3gqdl9uZXh0X3grdl9uZXh0X3kqdl9uZXh0X3kpOy8vIHNoaWZ0IGFkamFjZW50IHBvaW50cyBieSB1bml0IHZlY3RvcnMgdG8gdGhlIGxlZnQKCWNvbnN0IHB0UHJldlNoaWZ0X3g9aW5QcmV2Lngtdl9wcmV2X3kvdl9wcmV2X2xlbjtjb25zdCBwdFByZXZTaGlmdF95PWluUHJldi55K3ZfcHJldl94L3ZfcHJldl9sZW47Y29uc3QgcHROZXh0U2hpZnRfeD1pbk5leHQueC12X25leHRfeS92X25leHRfbGVuO2NvbnN0IHB0TmV4dFNoaWZ0X3k9aW5OZXh0Lnkrdl9uZXh0X3gvdl9uZXh0X2xlbjsvLyBzY2FsaW5nIGZhY3RvciBmb3Igdl9wcmV2IHRvIGludGVyc2VjdGlvbiBwb2ludAoJY29uc3Qgc2Y9KChwdE5leHRTaGlmdF94LXB0UHJldlNoaWZ0X3gpKnZfbmV4dF95LShwdE5leHRTaGlmdF95LXB0UHJldlNoaWZ0X3kpKnZfbmV4dF94KS8odl9wcmV2X3gqdl9uZXh0X3ktdl9wcmV2X3kqdl9uZXh0X3gpOy8vIHZlY3RvciBmcm9tIGluUHQgdG8gaW50ZXJzZWN0aW9uIHBvaW50Cgl2X3RyYW5zX3g9cHRQcmV2U2hpZnRfeCt2X3ByZXZfeCpzZi1pblB0Lng7dl90cmFuc195PXB0UHJldlNoaWZ0X3krdl9wcmV2X3kqc2YtaW5QdC55Oy8vIERvbid0IG5vcm1hbGl6ZSEsIG90aGVyd2lzZSBzaGFycCBjb3JuZXJzIGJlY29tZSB1Z2x5CgkvLyAgYnV0IHByZXZlbnQgY3Jhenkgc3Bpa2VzCgljb25zdCB2X3RyYW5zX2xlbnNxPXZfdHJhbnNfeCp2X3RyYW5zX3grdl90cmFuc195KnZfdHJhbnNfeTtpZih2X3RyYW5zX2xlbnNxPD0yKXtyZXR1cm4gbmV3IFZlY3RvcjIodl90cmFuc194LHZfdHJhbnNfeSk7fWVsc2Uge3Nocmlua19ieT1NYXRoLnNxcnQodl90cmFuc19sZW5zcS8yKTt9fWVsc2Ugey8vIGhhbmRsZSBzcGVjaWFsIGNhc2Ugb2YgY29sbGluZWFyIGVkZ2VzCglsZXQgZGlyZWN0aW9uX2VxPWZhbHNlOy8vIGFzc3VtZXM6IG9wcG9zaXRlCglpZih2X3ByZXZfeD5OdW1iZXIuRVBTSUxPTil7aWYodl9uZXh0X3g+TnVtYmVyLkVQU0lMT04pe2RpcmVjdGlvbl9lcT10cnVlO319ZWxzZSB7aWYodl9wcmV2X3g8LU51bWJlci5FUFNJTE9OKXtpZih2X25leHRfeDwtTnVtYmVyLkVQU0lMT04pe2RpcmVjdGlvbl9lcT10cnVlO319ZWxzZSB7aWYoTWF0aC5zaWduKHZfcHJldl95KT09PU1hdGguc2lnbih2X25leHRfeSkpe2RpcmVjdGlvbl9lcT10cnVlO319fWlmKGRpcmVjdGlvbl9lcSl7Ly8gY29uc29sZS5sb2coIldhcm5pbmc6IGxpbmVzIGFyZSBhIHN0cmFpZ2h0IHNlcXVlbmNlIik7Cgl2X3RyYW5zX3g9LXZfcHJldl95O3ZfdHJhbnNfeT12X3ByZXZfeDtzaHJpbmtfYnk9TWF0aC5zcXJ0KHZfcHJldl9sZW5zcSk7fWVsc2Ugey8vIGNvbnNvbGUubG9nKCJXYXJuaW5nOiBsaW5lcyBhcmUgYSBzdHJhaWdodCBzcGlrZSIpOwoJdl90cmFuc194PXZfcHJldl94O3ZfdHJhbnNfeT12X3ByZXZfeTtzaHJpbmtfYnk9TWF0aC5zcXJ0KHZfcHJldl9sZW5zcS8yKTt9fXJldHVybiBuZXcgVmVjdG9yMih2X3RyYW5zX3gvc2hyaW5rX2J5LHZfdHJhbnNfeS9zaHJpbmtfYnkpO31jb25zdCBjb250b3VyTW92ZW1lbnRzPVtdO2ZvcihsZXQgaT0wLGlsPWNvbnRvdXIubGVuZ3RoLGo9aWwtMSxrPWkrMTtpPGlsO2krKyxqKyssaysrKXtpZihqPT09aWwpaj0wO2lmKGs9PT1pbClrPTA7Ly8gIChqKS0tLShpKS0tLShrKQoJLy8gY29uc29sZS5sb2coJ2ksaixrJywgaSwgaiAsIGspCgljb250b3VyTW92ZW1lbnRzW2ldPWdldEJldmVsVmVjKGNvbnRvdXJbaV0sY29udG91cltqXSxjb250b3VyW2tdKTt9Y29uc3QgaG9sZXNNb3ZlbWVudHM9W107bGV0IG9uZUhvbGVNb3ZlbWVudHMsdmVydGljZXNNb3ZlbWVudHM9Y29udG91ck1vdmVtZW50cy5jb25jYXQoKTtmb3IobGV0IGg9MCxobD1ob2xlcy5sZW5ndGg7aDxobDtoKyspe2NvbnN0IGFob2xlPWhvbGVzW2hdO29uZUhvbGVNb3ZlbWVudHM9W107Zm9yKGxldCBpPTAsaWw9YWhvbGUubGVuZ3RoLGo9aWwtMSxrPWkrMTtpPGlsO2krKyxqKyssaysrKXtpZihqPT09aWwpaj0wO2lmKGs9PT1pbClrPTA7Ly8gIChqKS0tLShpKS0tLShrKQoJb25lSG9sZU1vdmVtZW50c1tpXT1nZXRCZXZlbFZlYyhhaG9sZVtpXSxhaG9sZVtqXSxhaG9sZVtrXSk7fWhvbGVzTW92ZW1lbnRzLnB1c2gob25lSG9sZU1vdmVtZW50cyk7dmVydGljZXNNb3ZlbWVudHM9dmVydGljZXNNb3ZlbWVudHMuY29uY2F0KG9uZUhvbGVNb3ZlbWVudHMpO30vLyBMb29wIGJldmVsU2VnbWVudHMsIDEgZm9yIHRoZSBmcm9udCwgMSBmb3IgdGhlIGJhY2sKCWZvcihsZXQgYj0wO2I8YmV2ZWxTZWdtZW50cztiKyspey8vZm9yICggYiA9IGJldmVsU2VnbWVudHM7IGIgPiAwOyBiIC0tICkgewoJY29uc3QgdD1iL2JldmVsU2VnbWVudHM7Y29uc3Qgej1iZXZlbFRoaWNrbmVzcypNYXRoLmNvcyh0Kk1hdGguUEkvMik7Y29uc3QgYnM9YmV2ZWxTaXplKk1hdGguc2luKHQqTWF0aC5QSS8yKStiZXZlbE9mZnNldDsvLyBjb250cmFjdCBzaGFwZQoJZm9yKGxldCBpPTAsaWw9Y29udG91ci5sZW5ndGg7aTxpbDtpKyspe2NvbnN0IHZlcnQ9c2NhbGVQdDIoY29udG91cltpXSxjb250b3VyTW92ZW1lbnRzW2ldLGJzKTt2KHZlcnQueCx2ZXJ0LnksLXopO30vLyBleHBhbmQgaG9sZXMKCWZvcihsZXQgaD0wLGhsPWhvbGVzLmxlbmd0aDtoPGhsO2grKyl7Y29uc3QgYWhvbGU9aG9sZXNbaF07b25lSG9sZU1vdmVtZW50cz1ob2xlc01vdmVtZW50c1toXTtmb3IobGV0IGk9MCxpbD1haG9sZS5sZW5ndGg7aTxpbDtpKyspe2NvbnN0IHZlcnQ9c2NhbGVQdDIoYWhvbGVbaV0sb25lSG9sZU1vdmVtZW50c1tpXSxicyk7dih2ZXJ0LngsdmVydC55LC16KTt9fX1jb25zdCBicz1iZXZlbFNpemUrYmV2ZWxPZmZzZXQ7Ly8gQmFjayBmYWNpbmcgdmVydGljZXMKCWZvcihsZXQgaT0wO2k8dmxlbjtpKyspe2NvbnN0IHZlcnQ9YmV2ZWxFbmFibGVkP3NjYWxlUHQyKHZlcnRpY2VzW2ldLHZlcnRpY2VzTW92ZW1lbnRzW2ldLGJzKTp2ZXJ0aWNlc1tpXTtpZighZXh0cnVkZUJ5UGF0aCl7dih2ZXJ0LngsdmVydC55LDApO31lbHNlIHsvLyB2KCB2ZXJ0LngsIHZlcnQueSArIGV4dHJ1ZGVQdHNbIDAgXS55LCBleHRydWRlUHRzWyAwIF0ueCApOwoJbm9ybWFsLmNvcHkoc3BsaW5lVHViZS5ub3JtYWxzWzBdKS5tdWx0aXBseVNjYWxhcih2ZXJ0LngpO2Jpbm9ybWFsLmNvcHkoc3BsaW5lVHViZS5iaW5vcm1hbHNbMF0pLm11bHRpcGx5U2NhbGFyKHZlcnQueSk7cG9zaXRpb24yLmNvcHkoZXh0cnVkZVB0c1swXSkuYWRkKG5vcm1hbCkuYWRkKGJpbm9ybWFsKTt2KHBvc2l0aW9uMi54LHBvc2l0aW9uMi55LHBvc2l0aW9uMi56KTt9fS8vIEFkZCBzdGVwcGVkIHZlcnRpY2VzLi4uCgkvLyBJbmNsdWRpbmcgZnJvbnQgZmFjaW5nIHZlcnRpY2VzCglmb3IobGV0IHM9MTtzPD1zdGVwcztzKyspe2ZvcihsZXQgaT0wO2k8dmxlbjtpKyspe2NvbnN0IHZlcnQ9YmV2ZWxFbmFibGVkP3NjYWxlUHQyKHZlcnRpY2VzW2ldLHZlcnRpY2VzTW92ZW1lbnRzW2ldLGJzKTp2ZXJ0aWNlc1tpXTtpZighZXh0cnVkZUJ5UGF0aCl7dih2ZXJ0LngsdmVydC55LGRlcHRoL3N0ZXBzKnMpO31lbHNlIHsvLyB2KCB2ZXJ0LngsIHZlcnQueSArIGV4dHJ1ZGVQdHNbIHMgLSAxIF0ueSwgZXh0cnVkZVB0c1sgcyAtIDEgXS54ICk7Cglub3JtYWwuY29weShzcGxpbmVUdWJlLm5vcm1hbHNbc10pLm11bHRpcGx5U2NhbGFyKHZlcnQueCk7Ymlub3JtYWwuY29weShzcGxpbmVUdWJlLmJpbm9ybWFsc1tzXSkubXVsdGlwbHlTY2FsYXIodmVydC55KTtwb3NpdGlvbjIuY29weShleHRydWRlUHRzW3NdKS5hZGQobm9ybWFsKS5hZGQoYmlub3JtYWwpO3YocG9zaXRpb24yLngscG9zaXRpb24yLnkscG9zaXRpb24yLnopO319fS8vIEFkZCBiZXZlbCBzZWdtZW50cyBwbGFuZXMKCS8vZm9yICggYiA9IDE7IGIgPD0gYmV2ZWxTZWdtZW50czsgYiArKyApIHsKCWZvcihsZXQgYj1iZXZlbFNlZ21lbnRzLTE7Yj49MDtiLS0pe2NvbnN0IHQ9Yi9iZXZlbFNlZ21lbnRzO2NvbnN0IHo9YmV2ZWxUaGlja25lc3MqTWF0aC5jb3ModCpNYXRoLlBJLzIpO2NvbnN0IGJzPWJldmVsU2l6ZSpNYXRoLnNpbih0Kk1hdGguUEkvMikrYmV2ZWxPZmZzZXQ7Ly8gY29udHJhY3Qgc2hhcGUKCWZvcihsZXQgaT0wLGlsPWNvbnRvdXIubGVuZ3RoO2k8aWw7aSsrKXtjb25zdCB2ZXJ0PXNjYWxlUHQyKGNvbnRvdXJbaV0sY29udG91ck1vdmVtZW50c1tpXSxicyk7dih2ZXJ0LngsdmVydC55LGRlcHRoK3opO30vLyBleHBhbmQgaG9sZXMKCWZvcihsZXQgaD0wLGhsPWhvbGVzLmxlbmd0aDtoPGhsO2grKyl7Y29uc3QgYWhvbGU9aG9sZXNbaF07b25lSG9sZU1vdmVtZW50cz1ob2xlc01vdmVtZW50c1toXTtmb3IobGV0IGk9MCxpbD1haG9sZS5sZW5ndGg7aTxpbDtpKyspe2NvbnN0IHZlcnQ9c2NhbGVQdDIoYWhvbGVbaV0sb25lSG9sZU1vdmVtZW50c1tpXSxicyk7aWYoIWV4dHJ1ZGVCeVBhdGgpe3YodmVydC54LHZlcnQueSxkZXB0aCt6KTt9ZWxzZSB7dih2ZXJ0LngsdmVydC55K2V4dHJ1ZGVQdHNbc3RlcHMtMV0ueSxleHRydWRlUHRzW3N0ZXBzLTFdLngreik7fX19fS8qIEZhY2VzICovIC8vIFRvcCBhbmQgYm90dG9tIGZhY2VzCglidWlsZExpZEZhY2VzKCk7Ly8gU2lkZXMgZmFjZXMKCWJ1aWxkU2lkZUZhY2VzKCk7Ly8vLy8gIEludGVybmFsIGZ1bmN0aW9ucwoJZnVuY3Rpb24gYnVpbGRMaWRGYWNlcygpe2NvbnN0IHN0YXJ0PXZlcnRpY2VzQXJyYXkubGVuZ3RoLzM7aWYoYmV2ZWxFbmFibGVkKXtsZXQgbGF5ZXI9MDsvLyBzdGVwcyArIDEKCWxldCBvZmZzZXQ9dmxlbipsYXllcjsvLyBCb3R0b20gZmFjZXMKCWZvcihsZXQgaT0wO2k8ZmxlbjtpKyspe2NvbnN0IGZhY2U9ZmFjZXNbaV07ZjMoZmFjZVsyXStvZmZzZXQsZmFjZVsxXStvZmZzZXQsZmFjZVswXStvZmZzZXQpO31sYXllcj1zdGVwcytiZXZlbFNlZ21lbnRzKjI7b2Zmc2V0PXZsZW4qbGF5ZXI7Ly8gVG9wIGZhY2VzCglmb3IobGV0IGk9MDtpPGZsZW47aSsrKXtjb25zdCBmYWNlPWZhY2VzW2ldO2YzKGZhY2VbMF0rb2Zmc2V0LGZhY2VbMV0rb2Zmc2V0LGZhY2VbMl0rb2Zmc2V0KTt9fWVsc2Ugey8vIEJvdHRvbSBmYWNlcwoJZm9yKGxldCBpPTA7aTxmbGVuO2krKyl7Y29uc3QgZmFjZT1mYWNlc1tpXTtmMyhmYWNlWzJdLGZhY2VbMV0sZmFjZVswXSk7fS8vIFRvcCBmYWNlcwoJZm9yKGxldCBpPTA7aTxmbGVuO2krKyl7Y29uc3QgZmFjZT1mYWNlc1tpXTtmMyhmYWNlWzBdK3ZsZW4qc3RlcHMsZmFjZVsxXSt2bGVuKnN0ZXBzLGZhY2VbMl0rdmxlbipzdGVwcyk7fX1zY29wZS5hZGRHcm91cChzdGFydCx2ZXJ0aWNlc0FycmF5Lmxlbmd0aC8zLXN0YXJ0LDApO30vLyBDcmVhdGUgZmFjZXMgZm9yIHRoZSB6LXNpZGVzIG9mIHRoZSBzaGFwZQoJZnVuY3Rpb24gYnVpbGRTaWRlRmFjZXMoKXtjb25zdCBzdGFydD12ZXJ0aWNlc0FycmF5Lmxlbmd0aC8zO2xldCBsYXllcm9mZnNldD0wO3NpZGV3YWxscyhjb250b3VyLGxheWVyb2Zmc2V0KTtsYXllcm9mZnNldCs9Y29udG91ci5sZW5ndGg7Zm9yKGxldCBoPTAsaGw9aG9sZXMubGVuZ3RoO2g8aGw7aCsrKXtjb25zdCBhaG9sZT1ob2xlc1toXTtzaWRld2FsbHMoYWhvbGUsbGF5ZXJvZmZzZXQpOy8vLCB0cnVlCglsYXllcm9mZnNldCs9YWhvbGUubGVuZ3RoO31zY29wZS5hZGRHcm91cChzdGFydCx2ZXJ0aWNlc0FycmF5Lmxlbmd0aC8zLXN0YXJ0LDEpO31mdW5jdGlvbiBzaWRld2FsbHMoY29udG91cixsYXllcm9mZnNldCl7bGV0IGk9Y29udG91ci5sZW5ndGg7d2hpbGUoLS1pPj0wKXtjb25zdCBqPWk7bGV0IGs9aS0xO2lmKGs8MClrPWNvbnRvdXIubGVuZ3RoLTE7Ly9jb25zb2xlLmxvZygnYicsIGksaiwgaS0xLCBrLHZlcnRpY2VzLmxlbmd0aCk7Cglmb3IobGV0IHM9MCxzbD1zdGVwcytiZXZlbFNlZ21lbnRzKjI7czxzbDtzKyspe2NvbnN0IHNsZW4xPXZsZW4qcztjb25zdCBzbGVuMj12bGVuKihzKzEpO2NvbnN0IGE9bGF5ZXJvZmZzZXQraitzbGVuMSxiPWxheWVyb2Zmc2V0K2src2xlbjEsYz1sYXllcm9mZnNldCtrK3NsZW4yLGQ9bGF5ZXJvZmZzZXQraitzbGVuMjtmNChhLGIsYyxkKTt9fX1mdW5jdGlvbiB2KHgseSx6KXtwbGFjZWhvbGRlci5wdXNoKHgpO3BsYWNlaG9sZGVyLnB1c2goeSk7cGxhY2Vob2xkZXIucHVzaCh6KTt9ZnVuY3Rpb24gZjMoYSxiLGMpe2FkZFZlcnRleChhKTthZGRWZXJ0ZXgoYik7YWRkVmVydGV4KGMpO2NvbnN0IG5leHRJbmRleD12ZXJ0aWNlc0FycmF5Lmxlbmd0aC8zO2NvbnN0IHV2cz11dmdlbi5nZW5lcmF0ZVRvcFVWKHNjb3BlLHZlcnRpY2VzQXJyYXksbmV4dEluZGV4LTMsbmV4dEluZGV4LTIsbmV4dEluZGV4LTEpO2FkZFVWKHV2c1swXSk7YWRkVVYodXZzWzFdKTthZGRVVih1dnNbMl0pO31mdW5jdGlvbiBmNChhLGIsYyxkKXthZGRWZXJ0ZXgoYSk7YWRkVmVydGV4KGIpO2FkZFZlcnRleChkKTthZGRWZXJ0ZXgoYik7YWRkVmVydGV4KGMpO2FkZFZlcnRleChkKTtjb25zdCBuZXh0SW5kZXg9dmVydGljZXNBcnJheS5sZW5ndGgvMztjb25zdCB1dnM9dXZnZW4uZ2VuZXJhdGVTaWRlV2FsbFVWKHNjb3BlLHZlcnRpY2VzQXJyYXksbmV4dEluZGV4LTYsbmV4dEluZGV4LTMsbmV4dEluZGV4LTIsbmV4dEluZGV4LTEpO2FkZFVWKHV2c1swXSk7YWRkVVYodXZzWzFdKTthZGRVVih1dnNbM10pO2FkZFVWKHV2c1sxXSk7YWRkVVYodXZzWzJdKTthZGRVVih1dnNbM10pO31mdW5jdGlvbiBhZGRWZXJ0ZXgoaW5kZXgpe3ZlcnRpY2VzQXJyYXkucHVzaChwbGFjZWhvbGRlcltpbmRleCozKzBdKTt2ZXJ0aWNlc0FycmF5LnB1c2gocGxhY2Vob2xkZXJbaW5kZXgqMysxXSk7dmVydGljZXNBcnJheS5wdXNoKHBsYWNlaG9sZGVyW2luZGV4KjMrMl0pO31mdW5jdGlvbiBhZGRVVih2ZWN0b3IyKXt1dkFycmF5LnB1c2godmVjdG9yMi54KTt1dkFycmF5LnB1c2godmVjdG9yMi55KTt9fX10b0pTT04oKXtjb25zdCBkYXRhPXN1cGVyLnRvSlNPTigpO2NvbnN0IHNoYXBlcz10aGlzLnBhcmFtZXRlcnMuc2hhcGVzO2NvbnN0IG9wdGlvbnM9dGhpcy5wYXJhbWV0ZXJzLm9wdGlvbnM7cmV0dXJuIHRvSlNPTiQxKHNoYXBlcyxvcHRpb25zLGRhdGEpO31zdGF0aWMgZnJvbUpTT04oZGF0YSxzaGFwZXMpe2NvbnN0IGdlb21ldHJ5U2hhcGVzPVtdO2ZvcihsZXQgaj0wLGpsPWRhdGEuc2hhcGVzLmxlbmd0aDtqPGpsO2orKyl7Y29uc3Qgc2hhcGU9c2hhcGVzW2RhdGEuc2hhcGVzW2pdXTtnZW9tZXRyeVNoYXBlcy5wdXNoKHNoYXBlKTt9Y29uc3QgZXh0cnVkZVBhdGg9ZGF0YS5vcHRpb25zLmV4dHJ1ZGVQYXRoO2lmKGV4dHJ1ZGVQYXRoIT09dW5kZWZpbmVkKXtkYXRhLm9wdGlvbnMuZXh0cnVkZVBhdGg9bmV3IEN1cnZlc1tleHRydWRlUGF0aC50eXBlXSgpLmZyb21KU09OKGV4dHJ1ZGVQYXRoKTt9cmV0dXJuIG5ldyBFeHRydWRlR2VvbWV0cnkoZ2VvbWV0cnlTaGFwZXMsZGF0YS5vcHRpb25zKTt9fWNvbnN0IFdvcmxkVVZHZW5lcmF0b3I9e2dlbmVyYXRlVG9wVVY6ZnVuY3Rpb24oZ2VvbWV0cnksdmVydGljZXMsaW5kZXhBLGluZGV4QixpbmRleEMpe2NvbnN0IGFfeD12ZXJ0aWNlc1tpbmRleEEqM107Y29uc3QgYV95PXZlcnRpY2VzW2luZGV4QSozKzFdO2NvbnN0IGJfeD12ZXJ0aWNlc1tpbmRleEIqM107Y29uc3QgYl95PXZlcnRpY2VzW2luZGV4QiozKzFdO2NvbnN0IGNfeD12ZXJ0aWNlc1tpbmRleEMqM107Y29uc3QgY195PXZlcnRpY2VzW2luZGV4QyozKzFdO3JldHVybiBbbmV3IFZlY3RvcjIoYV94LGFfeSksbmV3IFZlY3RvcjIoYl94LGJfeSksbmV3IFZlY3RvcjIoY194LGNfeSldO30sZ2VuZXJhdGVTaWRlV2FsbFVWOmZ1bmN0aW9uKGdlb21ldHJ5LHZlcnRpY2VzLGluZGV4QSxpbmRleEIsaW5kZXhDLGluZGV4RCl7Y29uc3QgYV94PXZlcnRpY2VzW2luZGV4QSozXTtjb25zdCBhX3k9dmVydGljZXNbaW5kZXhBKjMrMV07Y29uc3QgYV96PXZlcnRpY2VzW2luZGV4QSozKzJdO2NvbnN0IGJfeD12ZXJ0aWNlc1tpbmRleEIqM107Y29uc3QgYl95PXZlcnRpY2VzW2luZGV4QiozKzFdO2NvbnN0IGJfej12ZXJ0aWNlc1tpbmRleEIqMysyXTtjb25zdCBjX3g9dmVydGljZXNbaW5kZXhDKjNdO2NvbnN0IGNfeT12ZXJ0aWNlc1tpbmRleEMqMysxXTtjb25zdCBjX3o9dmVydGljZXNbaW5kZXhDKjMrMl07Y29uc3QgZF94PXZlcnRpY2VzW2luZGV4RCozXTtjb25zdCBkX3k9dmVydGljZXNbaW5kZXhEKjMrMV07Y29uc3QgZF96PXZlcnRpY2VzW2luZGV4RCozKzJdO2lmKE1hdGguYWJzKGFfeS1iX3kpPE1hdGguYWJzKGFfeC1iX3gpKXtyZXR1cm4gW25ldyBWZWN0b3IyKGFfeCwxLWFfeiksbmV3IFZlY3RvcjIoYl94LDEtYl96KSxuZXcgVmVjdG9yMihjX3gsMS1jX3opLG5ldyBWZWN0b3IyKGRfeCwxLWRfeildO31lbHNlIHtyZXR1cm4gW25ldyBWZWN0b3IyKGFfeSwxLWFfeiksbmV3IFZlY3RvcjIoYl95LDEtYl96KSxuZXcgVmVjdG9yMihjX3ksMS1jX3opLG5ldyBWZWN0b3IyKGRfeSwxLWRfeildO319fTtmdW5jdGlvbiB0b0pTT04kMShzaGFwZXMsb3B0aW9ucyxkYXRhKXtkYXRhLnNoYXBlcz1bXTtpZihBcnJheS5pc0FycmF5KHNoYXBlcykpe2ZvcihsZXQgaT0wLGw9c2hhcGVzLmxlbmd0aDtpPGw7aSsrKXtjb25zdCBzaGFwZT1zaGFwZXNbaV07ZGF0YS5zaGFwZXMucHVzaChzaGFwZS51dWlkKTt9fWVsc2Uge2RhdGEuc2hhcGVzLnB1c2goc2hhcGVzLnV1aWQpO31pZihvcHRpb25zLmV4dHJ1ZGVQYXRoIT09dW5kZWZpbmVkKWRhdGEub3B0aW9ucy5leHRydWRlUGF0aD1vcHRpb25zLmV4dHJ1ZGVQYXRoLnRvSlNPTigpO3JldHVybiBkYXRhO31jbGFzcyBTaGFwZUdlb21ldHJ5IGV4dGVuZHMgQnVmZmVyR2VvbWV0cnl7Y29uc3RydWN0b3Ioc2hhcGVzLGN1cnZlU2VnbWVudHMpe2lmKHNoYXBlcz09PXZvaWQgMCl7c2hhcGVzPW5ldyBTaGFwZShbbmV3IFZlY3RvcjIoMCwwLjUpLG5ldyBWZWN0b3IyKC0wLjUsLTAuNSksbmV3IFZlY3RvcjIoMC41LC0wLjUpXSk7fWlmKGN1cnZlU2VnbWVudHM9PT12b2lkIDApe2N1cnZlU2VnbWVudHM9MTI7fXN1cGVyKCk7dGhpcy50eXBlPSdTaGFwZUdlb21ldHJ5Jzt0aGlzLnBhcmFtZXRlcnM9e3NoYXBlczpzaGFwZXMsY3VydmVTZWdtZW50czpjdXJ2ZVNlZ21lbnRzfTsvLyBidWZmZXJzCgljb25zdCBpbmRpY2VzPVtdO2NvbnN0IHZlcnRpY2VzPVtdO2NvbnN0IG5vcm1hbHM9W107Y29uc3QgdXZzPVtdOy8vIGhlbHBlciB2YXJpYWJsZXMKCWxldCBncm91cFN0YXJ0PTA7bGV0IGdyb3VwQ291bnQ9MDsvLyBhbGxvdyBzaW5nbGUgYW5kIGFycmF5IHZhbHVlcyBmb3IgInNoYXBlcyIgcGFyYW1ldGVyCglpZihBcnJheS5pc0FycmF5KHNoYXBlcyk9PT1mYWxzZSl7YWRkU2hhcGUoc2hhcGVzKTt9ZWxzZSB7Zm9yKGxldCBpPTA7aTxzaGFwZXMubGVuZ3RoO2krKyl7YWRkU2hhcGUoc2hhcGVzW2ldKTt0aGlzLmFkZEdyb3VwKGdyb3VwU3RhcnQsZ3JvdXBDb3VudCxpKTsvLyBlbmFibGVzIE11bHRpTWF0ZXJpYWwgc3VwcG9ydAoJZ3JvdXBTdGFydCs9Z3JvdXBDb3VudDtncm91cENvdW50PTA7fX0vLyBidWlsZCBnZW9tZXRyeQoJdGhpcy5zZXRJbmRleChpbmRpY2VzKTt0aGlzLnNldEF0dHJpYnV0ZSgncG9zaXRpb24nLG5ldyBGbG9hdDMyQnVmZmVyQXR0cmlidXRlKHZlcnRpY2VzLDMpKTt0aGlzLnNldEF0dHJpYnV0ZSgnbm9ybWFsJyxuZXcgRmxvYXQzMkJ1ZmZlckF0dHJpYnV0ZShub3JtYWxzLDMpKTt0aGlzLnNldEF0dHJpYnV0ZSgndXYnLG5ldyBGbG9hdDMyQnVmZmVyQXR0cmlidXRlKHV2cywyKSk7Ly8gaGVscGVyIGZ1bmN0aW9ucwoJZnVuY3Rpb24gYWRkU2hhcGUoc2hhcGUpe2NvbnN0IGluZGV4T2Zmc2V0PXZlcnRpY2VzLmxlbmd0aC8zO2NvbnN0IHBvaW50cz1zaGFwZS5leHRyYWN0UG9pbnRzKGN1cnZlU2VnbWVudHMpO2xldCBzaGFwZVZlcnRpY2VzPXBvaW50cy5zaGFwZTtjb25zdCBzaGFwZUhvbGVzPXBvaW50cy5ob2xlczsvLyBjaGVjayBkaXJlY3Rpb24gb2YgdmVydGljZXMKCWlmKFNoYXBlVXRpbHMuaXNDbG9ja1dpc2Uoc2hhcGVWZXJ0aWNlcyk9PT1mYWxzZSl7c2hhcGVWZXJ0aWNlcz1zaGFwZVZlcnRpY2VzLnJldmVyc2UoKTt9Zm9yKGxldCBpPTAsbD1zaGFwZUhvbGVzLmxlbmd0aDtpPGw7aSsrKXtjb25zdCBzaGFwZUhvbGU9c2hhcGVIb2xlc1tpXTtpZihTaGFwZVV0aWxzLmlzQ2xvY2tXaXNlKHNoYXBlSG9sZSk9PT10cnVlKXtzaGFwZUhvbGVzW2ldPXNoYXBlSG9sZS5yZXZlcnNlKCk7fX1jb25zdCBmYWNlcz1TaGFwZVV0aWxzLnRyaWFuZ3VsYXRlU2hhcGUoc2hhcGVWZXJ0aWNlcyxzaGFwZUhvbGVzKTsvLyBqb2luIHZlcnRpY2VzIG9mIGlubmVyIGFuZCBvdXRlciBwYXRocyB0byBhIHNpbmdsZSBhcnJheQoJZm9yKGxldCBpPTAsbD1zaGFwZUhvbGVzLmxlbmd0aDtpPGw7aSsrKXtjb25zdCBzaGFwZUhvbGU9c2hhcGVIb2xlc1tpXTtzaGFwZVZlcnRpY2VzPXNoYXBlVmVydGljZXMuY29uY2F0KHNoYXBlSG9sZSk7fS8vIHZlcnRpY2VzLCBub3JtYWxzLCB1dnMKCWZvcihsZXQgaT0wLGw9c2hhcGVWZXJ0aWNlcy5sZW5ndGg7aTxsO2krKyl7Y29uc3QgdmVydGV4PXNoYXBlVmVydGljZXNbaV07dmVydGljZXMucHVzaCh2ZXJ0ZXgueCx2ZXJ0ZXgueSwwKTtub3JtYWxzLnB1c2goMCwwLDEpO3V2cy5wdXNoKHZlcnRleC54LHZlcnRleC55KTsvLyB3b3JsZCB1dnMKCX0vLyBpbmNpZGVzCglmb3IobGV0IGk9MCxsPWZhY2VzLmxlbmd0aDtpPGw7aSsrKXtjb25zdCBmYWNlPWZhY2VzW2ldO2NvbnN0IGE9ZmFjZVswXStpbmRleE9mZnNldDtjb25zdCBiPWZhY2VbMV0raW5kZXhPZmZzZXQ7Y29uc3QgYz1mYWNlWzJdK2luZGV4T2Zmc2V0O2luZGljZXMucHVzaChhLGIsYyk7Z3JvdXBDb3VudCs9Mzt9fX10b0pTT04oKXtjb25zdCBkYXRhPXN1cGVyLnRvSlNPTigpO2NvbnN0IHNoYXBlcz10aGlzLnBhcmFtZXRlcnMuc2hhcGVzO3JldHVybiB0b0pTT04oc2hhcGVzLGRhdGEpO31zdGF0aWMgZnJvbUpTT04oZGF0YSxzaGFwZXMpe2NvbnN0IGdlb21ldHJ5U2hhcGVzPVtdO2ZvcihsZXQgaj0wLGpsPWRhdGEuc2hhcGVzLmxlbmd0aDtqPGpsO2orKyl7Y29uc3Qgc2hhcGU9c2hhcGVzW2RhdGEuc2hhcGVzW2pdXTtnZW9tZXRyeVNoYXBlcy5wdXNoKHNoYXBlKTt9cmV0dXJuIG5ldyBTaGFwZUdlb21ldHJ5KGdlb21ldHJ5U2hhcGVzLGRhdGEuY3VydmVTZWdtZW50cyk7fX1mdW5jdGlvbiB0b0pTT04oc2hhcGVzLGRhdGEpe2RhdGEuc2hhcGVzPVtdO2lmKEFycmF5LmlzQXJyYXkoc2hhcGVzKSl7Zm9yKGxldCBpPTAsbD1zaGFwZXMubGVuZ3RoO2k8bDtpKyspe2NvbnN0IHNoYXBlPXNoYXBlc1tpXTtkYXRhLnNoYXBlcy5wdXNoKHNoYXBlLnV1aWQpO319ZWxzZSB7ZGF0YS5zaGFwZXMucHVzaChzaGFwZXMudXVpZCk7fXJldHVybiBkYXRhO30vKioKCSAqIHBhcmFtZXRlcnMgPSB7CgkgKiAgY29sb3I6IDxUSFJFRS5Db2xvcj4KCSAqIH0KCSAqL2NsYXNzIFNoYWRvd01hdGVyaWFsIGV4dGVuZHMgTWF0ZXJpYWx7Y29uc3RydWN0b3IocGFyYW1ldGVycyl7c3VwZXIoKTt0aGlzLnR5cGU9J1NoYWRvd01hdGVyaWFsJzt0aGlzLmNvbG9yPW5ldyBDb2xvcigweDAwMDAwMCk7dGhpcy50cmFuc3BhcmVudD10cnVlO3RoaXMuc2V0VmFsdWVzKHBhcmFtZXRlcnMpO31jb3B5KHNvdXJjZSl7c3VwZXIuY29weShzb3VyY2UpO3RoaXMuY29sb3IuY29weShzb3VyY2UuY29sb3IpO3JldHVybiB0aGlzO319U2hhZG93TWF0ZXJpYWwucHJvdG90eXBlLmlzU2hhZG93TWF0ZXJpYWw9dHJ1ZTsvKioKCSAqIHBhcmFtZXRlcnMgPSB7CgkgKiAgY29sb3I6IDxoZXg+LAoJICogIHJvdWdobmVzczogPGZsb2F0PiwKCSAqICBtZXRhbG5lc3M6IDxmbG9hdD4sCgkgKiAgb3BhY2l0eTogPGZsb2F0PiwKCSAqCgkgKiAgbWFwOiBuZXcgVEhSRUUuVGV4dHVyZSggPEltYWdlPiApLAoJICoKCSAqICBsaWdodE1hcDogbmV3IFRIUkVFLlRleHR1cmUoIDxJbWFnZT4gKSwKCSAqICBsaWdodE1hcEludGVuc2l0eTogPGZsb2F0PgoJICoKCSAqICBhb01hcDogbmV3IFRIUkVFLlRleHR1cmUoIDxJbWFnZT4gKSwKCSAqICBhb01hcEludGVuc2l0eTogPGZsb2F0PgoJICoKCSAqICBlbWlzc2l2ZTogPGhleD4sCgkgKiAgZW1pc3NpdmVJbnRlbnNpdHk6IDxmbG9hdD4KCSAqICBlbWlzc2l2ZU1hcDogbmV3IFRIUkVFLlRleHR1cmUoIDxJbWFnZT4gKSwKCSAqCgkgKiAgYnVtcE1hcDogbmV3IFRIUkVFLlRleHR1cmUoIDxJbWFnZT4gKSwKCSAqICBidW1wU2NhbGU6IDxmbG9hdD4sCgkgKgoJICogIG5vcm1hbE1hcDogbmV3IFRIUkVFLlRleHR1cmUoIDxJbWFnZT4gKSwKCSAqICBub3JtYWxNYXBUeXBlOiBUSFJFRS5UYW5nZW50U3BhY2VOb3JtYWxNYXAsCgkgKiAgbm9ybWFsU2NhbGU6IDxWZWN0b3IyPiwKCSAqCgkgKiAgZGlzcGxhY2VtZW50TWFwOiBuZXcgVEhSRUUuVGV4dHVyZSggPEltYWdlPiApLAoJICogIGRpc3BsYWNlbWVudFNjYWxlOiA8ZmxvYXQ+LAoJICogIGRpc3BsYWNlbWVudEJpYXM6IDxmbG9hdD4sCgkgKgoJICogIHJvdWdobmVzc01hcDogbmV3IFRIUkVFLlRleHR1cmUoIDxJbWFnZT4gKSwKCSAqCgkgKiAgbWV0YWxuZXNzTWFwOiBuZXcgVEhSRUUuVGV4dHVyZSggPEltYWdlPiApLAoJICoKCSAqICBhbHBoYU1hcDogbmV3IFRIUkVFLlRleHR1cmUoIDxJbWFnZT4gKSwKCSAqCgkgKiAgZW52TWFwOiBuZXcgVEhSRUUuQ3ViZVRleHR1cmUoIFtwb3N4LCBuZWd4LCBwb3N5LCBuZWd5LCBwb3N6LCBuZWd6XSApLAoJICogIGVudk1hcEludGVuc2l0eTogPGZsb2F0PgoJICoKCSAqICByZWZyYWN0aW9uUmF0aW86IDxmbG9hdD4sCgkgKgoJICogIHdpcmVmcmFtZTogPGJvb2xlYW4+LAoJICogIHdpcmVmcmFtZUxpbmV3aWR0aDogPGZsb2F0PiwKCSAqCgkgKiAgZmxhdFNoYWRpbmc6IDxib29sPgoJICogfQoJICovY2xhc3MgTWVzaFN0YW5kYXJkTWF0ZXJpYWwgZXh0ZW5kcyBNYXRlcmlhbHtjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzKXtzdXBlcigpO3RoaXMuZGVmaW5lcz17J1NUQU5EQVJEJzonJ307dGhpcy50eXBlPSdNZXNoU3RhbmRhcmRNYXRlcmlhbCc7dGhpcy5jb2xvcj1uZXcgQ29sb3IoMHhmZmZmZmYpOy8vIGRpZmZ1c2UKCXRoaXMucm91Z2huZXNzPTEuMDt0aGlzLm1ldGFsbmVzcz0wLjA7dGhpcy5tYXA9bnVsbDt0aGlzLmxpZ2h0TWFwPW51bGw7dGhpcy5saWdodE1hcEludGVuc2l0eT0xLjA7dGhpcy5hb01hcD1udWxsO3RoaXMuYW9NYXBJbnRlbnNpdHk9MS4wO3RoaXMuZW1pc3NpdmU9bmV3IENvbG9yKDB4MDAwMDAwKTt0aGlzLmVtaXNzaXZlSW50ZW5zaXR5PTEuMDt0aGlzLmVtaXNzaXZlTWFwPW51bGw7dGhpcy5idW1wTWFwPW51bGw7dGhpcy5idW1wU2NhbGU9MTt0aGlzLm5vcm1hbE1hcD1udWxsO3RoaXMubm9ybWFsTWFwVHlwZT1UYW5nZW50U3BhY2VOb3JtYWxNYXA7dGhpcy5ub3JtYWxTY2FsZT1uZXcgVmVjdG9yMigxLDEpO3RoaXMuZGlzcGxhY2VtZW50TWFwPW51bGw7dGhpcy5kaXNwbGFjZW1lbnRTY2FsZT0xO3RoaXMuZGlzcGxhY2VtZW50Qmlhcz0wO3RoaXMucm91Z2huZXNzTWFwPW51bGw7dGhpcy5tZXRhbG5lc3NNYXA9bnVsbDt0aGlzLmFscGhhTWFwPW51bGw7dGhpcy5lbnZNYXA9bnVsbDt0aGlzLmVudk1hcEludGVuc2l0eT0xLjA7dGhpcy5yZWZyYWN0aW9uUmF0aW89MC45ODt0aGlzLndpcmVmcmFtZT1mYWxzZTt0aGlzLndpcmVmcmFtZUxpbmV3aWR0aD0xO3RoaXMud2lyZWZyYW1lTGluZWNhcD0ncm91bmQnO3RoaXMud2lyZWZyYW1lTGluZWpvaW49J3JvdW5kJzt0aGlzLmZsYXRTaGFkaW5nPWZhbHNlO3RoaXMuc2V0VmFsdWVzKHBhcmFtZXRlcnMpO31jb3B5KHNvdXJjZSl7c3VwZXIuY29weShzb3VyY2UpO3RoaXMuZGVmaW5lcz17J1NUQU5EQVJEJzonJ307dGhpcy5jb2xvci5jb3B5KHNvdXJjZS5jb2xvcik7dGhpcy5yb3VnaG5lc3M9c291cmNlLnJvdWdobmVzczt0aGlzLm1ldGFsbmVzcz1zb3VyY2UubWV0YWxuZXNzO3RoaXMubWFwPXNvdXJjZS5tYXA7dGhpcy5saWdodE1hcD1zb3VyY2UubGlnaHRNYXA7dGhpcy5saWdodE1hcEludGVuc2l0eT1zb3VyY2UubGlnaHRNYXBJbnRlbnNpdHk7dGhpcy5hb01hcD1zb3VyY2UuYW9NYXA7dGhpcy5hb01hcEludGVuc2l0eT1zb3VyY2UuYW9NYXBJbnRlbnNpdHk7dGhpcy5lbWlzc2l2ZS5jb3B5KHNvdXJjZS5lbWlzc2l2ZSk7dGhpcy5lbWlzc2l2ZU1hcD1zb3VyY2UuZW1pc3NpdmVNYXA7dGhpcy5lbWlzc2l2ZUludGVuc2l0eT1zb3VyY2UuZW1pc3NpdmVJbnRlbnNpdHk7dGhpcy5idW1wTWFwPXNvdXJjZS5idW1wTWFwO3RoaXMuYnVtcFNjYWxlPXNvdXJjZS5idW1wU2NhbGU7dGhpcy5ub3JtYWxNYXA9c291cmNlLm5vcm1hbE1hcDt0aGlzLm5vcm1hbE1hcFR5cGU9c291cmNlLm5vcm1hbE1hcFR5cGU7dGhpcy5ub3JtYWxTY2FsZS5jb3B5KHNvdXJjZS5ub3JtYWxTY2FsZSk7dGhpcy5kaXNwbGFjZW1lbnRNYXA9c291cmNlLmRpc3BsYWNlbWVudE1hcDt0aGlzLmRpc3BsYWNlbWVudFNjYWxlPXNvdXJjZS5kaXNwbGFjZW1lbnRTY2FsZTt0aGlzLmRpc3BsYWNlbWVudEJpYXM9c291cmNlLmRpc3BsYWNlbWVudEJpYXM7dGhpcy5yb3VnaG5lc3NNYXA9c291cmNlLnJvdWdobmVzc01hcDt0aGlzLm1ldGFsbmVzc01hcD1zb3VyY2UubWV0YWxuZXNzTWFwO3RoaXMuYWxwaGFNYXA9c291cmNlLmFscGhhTWFwO3RoaXMuZW52TWFwPXNvdXJjZS5lbnZNYXA7dGhpcy5lbnZNYXBJbnRlbnNpdHk9c291cmNlLmVudk1hcEludGVuc2l0eTt0aGlzLnJlZnJhY3Rpb25SYXRpbz1zb3VyY2UucmVmcmFjdGlvblJhdGlvO3RoaXMud2lyZWZyYW1lPXNvdXJjZS53aXJlZnJhbWU7dGhpcy53aXJlZnJhbWVMaW5ld2lkdGg9c291cmNlLndpcmVmcmFtZUxpbmV3aWR0aDt0aGlzLndpcmVmcmFtZUxpbmVjYXA9c291cmNlLndpcmVmcmFtZUxpbmVjYXA7dGhpcy53aXJlZnJhbWVMaW5lam9pbj1zb3VyY2Uud2lyZWZyYW1lTGluZWpvaW47dGhpcy5mbGF0U2hhZGluZz1zb3VyY2UuZmxhdFNoYWRpbmc7cmV0dXJuIHRoaXM7fX1NZXNoU3RhbmRhcmRNYXRlcmlhbC5wcm90b3R5cGUuaXNNZXNoU3RhbmRhcmRNYXRlcmlhbD10cnVlOy8qKgoJICogcGFyYW1ldGVycyA9IHsKCSAqICBjbGVhcmNvYXQ6IDxmbG9hdD4sCgkgKiAgY2xlYXJjb2F0TWFwOiBuZXcgVEhSRUUuVGV4dHVyZSggPEltYWdlPiApLAoJICogIGNsZWFyY29hdFJvdWdobmVzczogPGZsb2F0PiwKCSAqICBjbGVhcmNvYXRSb3VnaG5lc3NNYXA6IG5ldyBUSFJFRS5UZXh0dXJlKCA8SW1hZ2U+ICksCgkgKiAgY2xlYXJjb2F0Tm9ybWFsU2NhbGU6IDxWZWN0b3IyPiwKCSAqICBjbGVhcmNvYXROb3JtYWxNYXA6IG5ldyBUSFJFRS5UZXh0dXJlKCA8SW1hZ2U+ICksCgkgKgoJICogIGlvcjogPGZsb2F0PiwKCSAqICByZWZsZWN0aXZpdHk6IDxmbG9hdD4sCgkgKgoJICogIHNoZWVuOiA8ZmxvYXQ+LAoJICogIHNoZWVuQ29sb3I6IDxDb2xvcj4sCgkgKiAgc2hlZW5Db2xvck1hcDogbmV3IFRIUkVFLlRleHR1cmUoIDxJbWFnZT4gKSwKCSAqICBzaGVlblJvdWdobmVzczogPGZsb2F0PiwKCSAqICBzaGVlblJvdWdobmVzc01hcDogbmV3IFRIUkVFLlRleHR1cmUoIDxJbWFnZT4gKSwKCSAqCgkgKiAgdHJhbnNtaXNzaW9uOiA8ZmxvYXQ+LAoJICogIHRyYW5zbWlzc2lvbk1hcDogbmV3IFRIUkVFLlRleHR1cmUoIDxJbWFnZT4gKSwKCSAqCgkgKiAgdGhpY2tuZXNzOiA8ZmxvYXQ+LAoJICogIHRoaWNrbmVzc01hcDogbmV3IFRIUkVFLlRleHR1cmUoIDxJbWFnZT4gKSwKCSAqICBhdHRlbnVhdGlvbkRpc3RhbmNlOiA8ZmxvYXQ+LAoJICogIGF0dGVudWF0aW9uQ29sb3I6IDxDb2xvcj4sCgkgKgoJICogIHNwZWN1bGFySW50ZW5zaXR5OiA8ZmxvYXQ+LAoJICogIHNwZWN1bGFySW50ZW5zaXR5TWFwOiBuZXcgVEhSRUUuVGV4dHVyZSggPEltYWdlPiApLAoJICogIHNwZWN1bGFyQ29sb3I6IDxDb2xvcj4sCgkgKiAgc3BlY3VsYXJDb2xvck1hcDogbmV3IFRIUkVFLlRleHR1cmUoIDxJbWFnZT4gKQoJICogfQoJICovY2xhc3MgTWVzaFBoeXNpY2FsTWF0ZXJpYWwgZXh0ZW5kcyBNZXNoU3RhbmRhcmRNYXRlcmlhbHtjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzKXtzdXBlcigpO3RoaXMuZGVmaW5lcz17J1NUQU5EQVJEJzonJywnUEhZU0lDQUwnOicnfTt0aGlzLnR5cGU9J01lc2hQaHlzaWNhbE1hdGVyaWFsJzt0aGlzLmNsZWFyY29hdE1hcD1udWxsO3RoaXMuY2xlYXJjb2F0Um91Z2huZXNzPTAuMDt0aGlzLmNsZWFyY29hdFJvdWdobmVzc01hcD1udWxsO3RoaXMuY2xlYXJjb2F0Tm9ybWFsU2NhbGU9bmV3IFZlY3RvcjIoMSwxKTt0aGlzLmNsZWFyY29hdE5vcm1hbE1hcD1udWxsO3RoaXMuaW9yPTEuNTtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywncmVmbGVjdGl2aXR5Jyx7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGNsYW1wKDIuNSoodGhpcy5pb3ItMSkvKHRoaXMuaW9yKzEpLDAsMSk7fSxzZXQ6ZnVuY3Rpb24ocmVmbGVjdGl2aXR5KXt0aGlzLmlvcj0oMSswLjQqcmVmbGVjdGl2aXR5KS8oMS0wLjQqcmVmbGVjdGl2aXR5KTt9fSk7dGhpcy5zaGVlbkNvbG9yPW5ldyBDb2xvcigweDAwMDAwMCk7dGhpcy5zaGVlbkNvbG9yTWFwPW51bGw7dGhpcy5zaGVlblJvdWdobmVzcz0xLjA7dGhpcy5zaGVlblJvdWdobmVzc01hcD1udWxsO3RoaXMudHJhbnNtaXNzaW9uTWFwPW51bGw7dGhpcy50aGlja25lc3M9MDt0aGlzLnRoaWNrbmVzc01hcD1udWxsO3RoaXMuYXR0ZW51YXRpb25EaXN0YW5jZT0wLjA7dGhpcy5hdHRlbnVhdGlvbkNvbG9yPW5ldyBDb2xvcigxLDEsMSk7dGhpcy5zcGVjdWxhckludGVuc2l0eT0xLjA7dGhpcy5zcGVjdWxhckludGVuc2l0eU1hcD1udWxsO3RoaXMuc3BlY3VsYXJDb2xvcj1uZXcgQ29sb3IoMSwxLDEpO3RoaXMuc3BlY3VsYXJDb2xvck1hcD1udWxsO3RoaXMuX3NoZWVuPTAuMDt0aGlzLl9jbGVhcmNvYXQ9MDt0aGlzLl90cmFuc21pc3Npb249MDt0aGlzLnNldFZhbHVlcyhwYXJhbWV0ZXJzKTt9Z2V0IHNoZWVuKCl7cmV0dXJuIHRoaXMuX3NoZWVuO31zZXQgc2hlZW4odmFsdWUpe2lmKHRoaXMuX3NoZWVuPjAhPT12YWx1ZT4wKXt0aGlzLnZlcnNpb24rKzt9dGhpcy5fc2hlZW49dmFsdWU7fWdldCBjbGVhcmNvYXQoKXtyZXR1cm4gdGhpcy5fY2xlYXJjb2F0O31zZXQgY2xlYXJjb2F0KHZhbHVlKXtpZih0aGlzLl9jbGVhcmNvYXQ+MCE9PXZhbHVlPjApe3RoaXMudmVyc2lvbisrO310aGlzLl9jbGVhcmNvYXQ9dmFsdWU7fWdldCB0cmFuc21pc3Npb24oKXtyZXR1cm4gdGhpcy5fdHJhbnNtaXNzaW9uO31zZXQgdHJhbnNtaXNzaW9uKHZhbHVlKXtpZih0aGlzLl90cmFuc21pc3Npb24+MCE9PXZhbHVlPjApe3RoaXMudmVyc2lvbisrO310aGlzLl90cmFuc21pc3Npb249dmFsdWU7fWNvcHkoc291cmNlKXtzdXBlci5jb3B5KHNvdXJjZSk7dGhpcy5kZWZpbmVzPXsnU1RBTkRBUkQnOicnLCdQSFlTSUNBTCc6Jyd9O3RoaXMuY2xlYXJjb2F0PXNvdXJjZS5jbGVhcmNvYXQ7dGhpcy5jbGVhcmNvYXRNYXA9c291cmNlLmNsZWFyY29hdE1hcDt0aGlzLmNsZWFyY29hdFJvdWdobmVzcz1zb3VyY2UuY2xlYXJjb2F0Um91Z2huZXNzO3RoaXMuY2xlYXJjb2F0Um91Z2huZXNzTWFwPXNvdXJjZS5jbGVhcmNvYXRSb3VnaG5lc3NNYXA7dGhpcy5jbGVhcmNvYXROb3JtYWxNYXA9c291cmNlLmNsZWFyY29hdE5vcm1hbE1hcDt0aGlzLmNsZWFyY29hdE5vcm1hbFNjYWxlLmNvcHkoc291cmNlLmNsZWFyY29hdE5vcm1hbFNjYWxlKTt0aGlzLmlvcj1zb3VyY2UuaW9yO3RoaXMuc2hlZW49c291cmNlLnNoZWVuO3RoaXMuc2hlZW5Db2xvci5jb3B5KHNvdXJjZS5zaGVlbkNvbG9yKTt0aGlzLnNoZWVuQ29sb3JNYXA9c291cmNlLnNoZWVuQ29sb3JNYXA7dGhpcy5zaGVlblJvdWdobmVzcz1zb3VyY2Uuc2hlZW5Sb3VnaG5lc3M7dGhpcy5zaGVlblJvdWdobmVzc01hcD1zb3VyY2Uuc2hlZW5Sb3VnaG5lc3NNYXA7dGhpcy50cmFuc21pc3Npb249c291cmNlLnRyYW5zbWlzc2lvbjt0aGlzLnRyYW5zbWlzc2lvbk1hcD1zb3VyY2UudHJhbnNtaXNzaW9uTWFwO3RoaXMudGhpY2tuZXNzPXNvdXJjZS50aGlja25lc3M7dGhpcy50aGlja25lc3NNYXA9c291cmNlLnRoaWNrbmVzc01hcDt0aGlzLmF0dGVudWF0aW9uRGlzdGFuY2U9c291cmNlLmF0dGVudWF0aW9uRGlzdGFuY2U7dGhpcy5hdHRlbnVhdGlvbkNvbG9yLmNvcHkoc291cmNlLmF0dGVudWF0aW9uQ29sb3IpO3RoaXMuc3BlY3VsYXJJbnRlbnNpdHk9c291cmNlLnNwZWN1bGFySW50ZW5zaXR5O3RoaXMuc3BlY3VsYXJJbnRlbnNpdHlNYXA9c291cmNlLnNwZWN1bGFySW50ZW5zaXR5TWFwO3RoaXMuc3BlY3VsYXJDb2xvci5jb3B5KHNvdXJjZS5zcGVjdWxhckNvbG9yKTt0aGlzLnNwZWN1bGFyQ29sb3JNYXA9c291cmNlLnNwZWN1bGFyQ29sb3JNYXA7cmV0dXJuIHRoaXM7fX1NZXNoUGh5c2ljYWxNYXRlcmlhbC5wcm90b3R5cGUuaXNNZXNoUGh5c2ljYWxNYXRlcmlhbD10cnVlOy8qKgoJICogcGFyYW1ldGVycyA9IHsKCSAqICBjb2xvcjogPGhleD4sCgkgKiAgc3BlY3VsYXI6IDxoZXg+LAoJICogIHNoaW5pbmVzczogPGZsb2F0PiwKCSAqICBvcGFjaXR5OiA8ZmxvYXQ+LAoJICoKCSAqICBtYXA6IG5ldyBUSFJFRS5UZXh0dXJlKCA8SW1hZ2U+ICksCgkgKgoJICogIGxpZ2h0TWFwOiBuZXcgVEhSRUUuVGV4dHVyZSggPEltYWdlPiApLAoJICogIGxpZ2h0TWFwSW50ZW5zaXR5OiA8ZmxvYXQ+CgkgKgoJICogIGFvTWFwOiBuZXcgVEhSRUUuVGV4dHVyZSggPEltYWdlPiApLAoJICogIGFvTWFwSW50ZW5zaXR5OiA8ZmxvYXQ+CgkgKgoJICogIGVtaXNzaXZlOiA8aGV4PiwKCSAqICBlbWlzc2l2ZUludGVuc2l0eTogPGZsb2F0PgoJICogIGVtaXNzaXZlTWFwOiBuZXcgVEhSRUUuVGV4dHVyZSggPEltYWdlPiApLAoJICoKCSAqICBidW1wTWFwOiBuZXcgVEhSRUUuVGV4dHVyZSggPEltYWdlPiApLAoJICogIGJ1bXBTY2FsZTogPGZsb2F0PiwKCSAqCgkgKiAgbm9ybWFsTWFwOiBuZXcgVEhSRUUuVGV4dHVyZSggPEltYWdlPiApLAoJICogIG5vcm1hbE1hcFR5cGU6IFRIUkVFLlRhbmdlbnRTcGFjZU5vcm1hbE1hcCwKCSAqICBub3JtYWxTY2FsZTogPFZlY3RvcjI+LAoJICoKCSAqICBkaXNwbGFjZW1lbnRNYXA6IG5ldyBUSFJFRS5UZXh0dXJlKCA8SW1hZ2U+ICksCgkgKiAgZGlzcGxhY2VtZW50U2NhbGU6IDxmbG9hdD4sCgkgKiAgZGlzcGxhY2VtZW50QmlhczogPGZsb2F0PiwKCSAqCgkgKiAgc3BlY3VsYXJNYXA6IG5ldyBUSFJFRS5UZXh0dXJlKCA8SW1hZ2U+ICksCgkgKgoJICogIGFscGhhTWFwOiBuZXcgVEhSRUUuVGV4dHVyZSggPEltYWdlPiApLAoJICoKCSAqICBlbnZNYXA6IG5ldyBUSFJFRS5DdWJlVGV4dHVyZSggW3Bvc3gsIG5lZ3gsIHBvc3ksIG5lZ3ksIHBvc3osIG5lZ3pdICksCgkgKiAgY29tYmluZTogVEhSRUUuTXVsdGlwbHlPcGVyYXRpb24sCgkgKiAgcmVmbGVjdGl2aXR5OiA8ZmxvYXQ+LAoJICogIHJlZnJhY3Rpb25SYXRpbzogPGZsb2F0PiwKCSAqCgkgKiAgd2lyZWZyYW1lOiA8Ym9vbGVhbj4sCgkgKiAgd2lyZWZyYW1lTGluZXdpZHRoOiA8ZmxvYXQ+LAoJICoKCSAqICBmbGF0U2hhZGluZzogPGJvb2w+CgkgKiB9CgkgKi9jbGFzcyBNZXNoUGhvbmdNYXRlcmlhbCBleHRlbmRzIE1hdGVyaWFse2NvbnN0cnVjdG9yKHBhcmFtZXRlcnMpe3N1cGVyKCk7dGhpcy50eXBlPSdNZXNoUGhvbmdNYXRlcmlhbCc7dGhpcy5jb2xvcj1uZXcgQ29sb3IoMHhmZmZmZmYpOy8vIGRpZmZ1c2UKCXRoaXMuc3BlY3VsYXI9bmV3IENvbG9yKDB4MTExMTExKTt0aGlzLnNoaW5pbmVzcz0zMDt0aGlzLm1hcD1udWxsO3RoaXMubGlnaHRNYXA9bnVsbDt0aGlzLmxpZ2h0TWFwSW50ZW5zaXR5PTEuMDt0aGlzLmFvTWFwPW51bGw7dGhpcy5hb01hcEludGVuc2l0eT0xLjA7dGhpcy5lbWlzc2l2ZT1uZXcgQ29sb3IoMHgwMDAwMDApO3RoaXMuZW1pc3NpdmVJbnRlbnNpdHk9MS4wO3RoaXMuZW1pc3NpdmVNYXA9bnVsbDt0aGlzLmJ1bXBNYXA9bnVsbDt0aGlzLmJ1bXBTY2FsZT0xO3RoaXMubm9ybWFsTWFwPW51bGw7dGhpcy5ub3JtYWxNYXBUeXBlPVRhbmdlbnRTcGFjZU5vcm1hbE1hcDt0aGlzLm5vcm1hbFNjYWxlPW5ldyBWZWN0b3IyKDEsMSk7dGhpcy5kaXNwbGFjZW1lbnRNYXA9bnVsbDt0aGlzLmRpc3BsYWNlbWVudFNjYWxlPTE7dGhpcy5kaXNwbGFjZW1lbnRCaWFzPTA7dGhpcy5zcGVjdWxhck1hcD1udWxsO3RoaXMuYWxwaGFNYXA9bnVsbDt0aGlzLmVudk1hcD1udWxsO3RoaXMuY29tYmluZT1NdWx0aXBseU9wZXJhdGlvbjt0aGlzLnJlZmxlY3Rpdml0eT0xO3RoaXMucmVmcmFjdGlvblJhdGlvPTAuOTg7dGhpcy53aXJlZnJhbWU9ZmFsc2U7dGhpcy53aXJlZnJhbWVMaW5ld2lkdGg9MTt0aGlzLndpcmVmcmFtZUxpbmVjYXA9J3JvdW5kJzt0aGlzLndpcmVmcmFtZUxpbmVqb2luPSdyb3VuZCc7dGhpcy5mbGF0U2hhZGluZz1mYWxzZTt0aGlzLnNldFZhbHVlcyhwYXJhbWV0ZXJzKTt9Y29weShzb3VyY2Upe3N1cGVyLmNvcHkoc291cmNlKTt0aGlzLmNvbG9yLmNvcHkoc291cmNlLmNvbG9yKTt0aGlzLnNwZWN1bGFyLmNvcHkoc291cmNlLnNwZWN1bGFyKTt0aGlzLnNoaW5pbmVzcz1zb3VyY2Uuc2hpbmluZXNzO3RoaXMubWFwPXNvdXJjZS5tYXA7dGhpcy5saWdodE1hcD1zb3VyY2UubGlnaHRNYXA7dGhpcy5saWdodE1hcEludGVuc2l0eT1zb3VyY2UubGlnaHRNYXBJbnRlbnNpdHk7dGhpcy5hb01hcD1zb3VyY2UuYW9NYXA7dGhpcy5hb01hcEludGVuc2l0eT1zb3VyY2UuYW9NYXBJbnRlbnNpdHk7dGhpcy5lbWlzc2l2ZS5jb3B5KHNvdXJjZS5lbWlzc2l2ZSk7dGhpcy5lbWlzc2l2ZU1hcD1zb3VyY2UuZW1pc3NpdmVNYXA7dGhpcy5lbWlzc2l2ZUludGVuc2l0eT1zb3VyY2UuZW1pc3NpdmVJbnRlbnNpdHk7dGhpcy5idW1wTWFwPXNvdXJjZS5idW1wTWFwO3RoaXMuYnVtcFNjYWxlPXNvdXJjZS5idW1wU2NhbGU7dGhpcy5ub3JtYWxNYXA9c291cmNlLm5vcm1hbE1hcDt0aGlzLm5vcm1hbE1hcFR5cGU9c291cmNlLm5vcm1hbE1hcFR5cGU7dGhpcy5ub3JtYWxTY2FsZS5jb3B5KHNvdXJjZS5ub3JtYWxTY2FsZSk7dGhpcy5kaXNwbGFjZW1lbnRNYXA9c291cmNlLmRpc3BsYWNlbWVudE1hcDt0aGlzLmRpc3BsYWNlbWVudFNjYWxlPXNvdXJjZS5kaXNwbGFjZW1lbnRTY2FsZTt0aGlzLmRpc3BsYWNlbWVudEJpYXM9c291cmNlLmRpc3BsYWNlbWVudEJpYXM7dGhpcy5zcGVjdWxhck1hcD1zb3VyY2Uuc3BlY3VsYXJNYXA7dGhpcy5hbHBoYU1hcD1zb3VyY2UuYWxwaGFNYXA7dGhpcy5lbnZNYXA9c291cmNlLmVudk1hcDt0aGlzLmNvbWJpbmU9c291cmNlLmNvbWJpbmU7dGhpcy5yZWZsZWN0aXZpdHk9c291cmNlLnJlZmxlY3Rpdml0eTt0aGlzLnJlZnJhY3Rpb25SYXRpbz1zb3VyY2UucmVmcmFjdGlvblJhdGlvO3RoaXMud2lyZWZyYW1lPXNvdXJjZS53aXJlZnJhbWU7dGhpcy53aXJlZnJhbWVMaW5ld2lkdGg9c291cmNlLndpcmVmcmFtZUxpbmV3aWR0aDt0aGlzLndpcmVmcmFtZUxpbmVjYXA9c291cmNlLndpcmVmcmFtZUxpbmVjYXA7dGhpcy53aXJlZnJhbWVMaW5lam9pbj1zb3VyY2Uud2lyZWZyYW1lTGluZWpvaW47dGhpcy5mbGF0U2hhZGluZz1zb3VyY2UuZmxhdFNoYWRpbmc7cmV0dXJuIHRoaXM7fX1NZXNoUGhvbmdNYXRlcmlhbC5wcm90b3R5cGUuaXNNZXNoUGhvbmdNYXRlcmlhbD10cnVlOy8qKgoJICogcGFyYW1ldGVycyA9IHsKCSAqICBjb2xvcjogPGhleD4sCgkgKgoJICogIG1hcDogbmV3IFRIUkVFLlRleHR1cmUoIDxJbWFnZT4gKSwKCSAqICBncmFkaWVudE1hcDogbmV3IFRIUkVFLlRleHR1cmUoIDxJbWFnZT4gKSwKCSAqCgkgKiAgbGlnaHRNYXA6IG5ldyBUSFJFRS5UZXh0dXJlKCA8SW1hZ2U+ICksCgkgKiAgbGlnaHRNYXBJbnRlbnNpdHk6IDxmbG9hdD4KCSAqCgkgKiAgYW9NYXA6IG5ldyBUSFJFRS5UZXh0dXJlKCA8SW1hZ2U+ICksCgkgKiAgYW9NYXBJbnRlbnNpdHk6IDxmbG9hdD4KCSAqCgkgKiAgZW1pc3NpdmU6IDxoZXg+LAoJICogIGVtaXNzaXZlSW50ZW5zaXR5OiA8ZmxvYXQ+CgkgKiAgZW1pc3NpdmVNYXA6IG5ldyBUSFJFRS5UZXh0dXJlKCA8SW1hZ2U+ICksCgkgKgoJICogIGJ1bXBNYXA6IG5ldyBUSFJFRS5UZXh0dXJlKCA8SW1hZ2U+ICksCgkgKiAgYnVtcFNjYWxlOiA8ZmxvYXQ+LAoJICoKCSAqICBub3JtYWxNYXA6IG5ldyBUSFJFRS5UZXh0dXJlKCA8SW1hZ2U+ICksCgkgKiAgbm9ybWFsTWFwVHlwZTogVEhSRUUuVGFuZ2VudFNwYWNlTm9ybWFsTWFwLAoJICogIG5vcm1hbFNjYWxlOiA8VmVjdG9yMj4sCgkgKgoJICogIGRpc3BsYWNlbWVudE1hcDogbmV3IFRIUkVFLlRleHR1cmUoIDxJbWFnZT4gKSwKCSAqICBkaXNwbGFjZW1lbnRTY2FsZTogPGZsb2F0PiwKCSAqICBkaXNwbGFjZW1lbnRCaWFzOiA8ZmxvYXQ+LAoJICoKCSAqICBhbHBoYU1hcDogbmV3IFRIUkVFLlRleHR1cmUoIDxJbWFnZT4gKSwKCSAqCgkgKiAgd2lyZWZyYW1lOiA8Ym9vbGVhbj4sCgkgKiAgd2lyZWZyYW1lTGluZXdpZHRoOiA8ZmxvYXQ+LAoJICoKCSAqIH0KCSAqL2NsYXNzIE1lc2hUb29uTWF0ZXJpYWwgZXh0ZW5kcyBNYXRlcmlhbHtjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzKXtzdXBlcigpO3RoaXMuZGVmaW5lcz17J1RPT04nOicnfTt0aGlzLnR5cGU9J01lc2hUb29uTWF0ZXJpYWwnO3RoaXMuY29sb3I9bmV3IENvbG9yKDB4ZmZmZmZmKTt0aGlzLm1hcD1udWxsO3RoaXMuZ3JhZGllbnRNYXA9bnVsbDt0aGlzLmxpZ2h0TWFwPW51bGw7dGhpcy5saWdodE1hcEludGVuc2l0eT0xLjA7dGhpcy5hb01hcD1udWxsO3RoaXMuYW9NYXBJbnRlbnNpdHk9MS4wO3RoaXMuZW1pc3NpdmU9bmV3IENvbG9yKDB4MDAwMDAwKTt0aGlzLmVtaXNzaXZlSW50ZW5zaXR5PTEuMDt0aGlzLmVtaXNzaXZlTWFwPW51bGw7dGhpcy5idW1wTWFwPW51bGw7dGhpcy5idW1wU2NhbGU9MTt0aGlzLm5vcm1hbE1hcD1udWxsO3RoaXMubm9ybWFsTWFwVHlwZT1UYW5nZW50U3BhY2VOb3JtYWxNYXA7dGhpcy5ub3JtYWxTY2FsZT1uZXcgVmVjdG9yMigxLDEpO3RoaXMuZGlzcGxhY2VtZW50TWFwPW51bGw7dGhpcy5kaXNwbGFjZW1lbnRTY2FsZT0xO3RoaXMuZGlzcGxhY2VtZW50Qmlhcz0wO3RoaXMuYWxwaGFNYXA9bnVsbDt0aGlzLndpcmVmcmFtZT1mYWxzZTt0aGlzLndpcmVmcmFtZUxpbmV3aWR0aD0xO3RoaXMud2lyZWZyYW1lTGluZWNhcD0ncm91bmQnO3RoaXMud2lyZWZyYW1lTGluZWpvaW49J3JvdW5kJzt0aGlzLnNldFZhbHVlcyhwYXJhbWV0ZXJzKTt9Y29weShzb3VyY2Upe3N1cGVyLmNvcHkoc291cmNlKTt0aGlzLmNvbG9yLmNvcHkoc291cmNlLmNvbG9yKTt0aGlzLm1hcD1zb3VyY2UubWFwO3RoaXMuZ3JhZGllbnRNYXA9c291cmNlLmdyYWRpZW50TWFwO3RoaXMubGlnaHRNYXA9c291cmNlLmxpZ2h0TWFwO3RoaXMubGlnaHRNYXBJbnRlbnNpdHk9c291cmNlLmxpZ2h0TWFwSW50ZW5zaXR5O3RoaXMuYW9NYXA9c291cmNlLmFvTWFwO3RoaXMuYW9NYXBJbnRlbnNpdHk9c291cmNlLmFvTWFwSW50ZW5zaXR5O3RoaXMuZW1pc3NpdmUuY29weShzb3VyY2UuZW1pc3NpdmUpO3RoaXMuZW1pc3NpdmVNYXA9c291cmNlLmVtaXNzaXZlTWFwO3RoaXMuZW1pc3NpdmVJbnRlbnNpdHk9c291cmNlLmVtaXNzaXZlSW50ZW5zaXR5O3RoaXMuYnVtcE1hcD1zb3VyY2UuYnVtcE1hcDt0aGlzLmJ1bXBTY2FsZT1zb3VyY2UuYnVtcFNjYWxlO3RoaXMubm9ybWFsTWFwPXNvdXJjZS5ub3JtYWxNYXA7dGhpcy5ub3JtYWxNYXBUeXBlPXNvdXJjZS5ub3JtYWxNYXBUeXBlO3RoaXMubm9ybWFsU2NhbGUuY29weShzb3VyY2Uubm9ybWFsU2NhbGUpO3RoaXMuZGlzcGxhY2VtZW50TWFwPXNvdXJjZS5kaXNwbGFjZW1lbnRNYXA7dGhpcy5kaXNwbGFjZW1lbnRTY2FsZT1zb3VyY2UuZGlzcGxhY2VtZW50U2NhbGU7dGhpcy5kaXNwbGFjZW1lbnRCaWFzPXNvdXJjZS5kaXNwbGFjZW1lbnRCaWFzO3RoaXMuYWxwaGFNYXA9c291cmNlLmFscGhhTWFwO3RoaXMud2lyZWZyYW1lPXNvdXJjZS53aXJlZnJhbWU7dGhpcy53aXJlZnJhbWVMaW5ld2lkdGg9c291cmNlLndpcmVmcmFtZUxpbmV3aWR0aDt0aGlzLndpcmVmcmFtZUxpbmVjYXA9c291cmNlLndpcmVmcmFtZUxpbmVjYXA7dGhpcy53aXJlZnJhbWVMaW5lam9pbj1zb3VyY2Uud2lyZWZyYW1lTGluZWpvaW47cmV0dXJuIHRoaXM7fX1NZXNoVG9vbk1hdGVyaWFsLnByb3RvdHlwZS5pc01lc2hUb29uTWF0ZXJpYWw9dHJ1ZTsvKioKCSAqIHBhcmFtZXRlcnMgPSB7CgkgKiAgb3BhY2l0eTogPGZsb2F0PiwKCSAqCgkgKiAgYnVtcE1hcDogbmV3IFRIUkVFLlRleHR1cmUoIDxJbWFnZT4gKSwKCSAqICBidW1wU2NhbGU6IDxmbG9hdD4sCgkgKgoJICogIG5vcm1hbE1hcDogbmV3IFRIUkVFLlRleHR1cmUoIDxJbWFnZT4gKSwKCSAqICBub3JtYWxNYXBUeXBlOiBUSFJFRS5UYW5nZW50U3BhY2VOb3JtYWxNYXAsCgkgKiAgbm9ybWFsU2NhbGU6IDxWZWN0b3IyPiwKCSAqCgkgKiAgZGlzcGxhY2VtZW50TWFwOiBuZXcgVEhSRUUuVGV4dHVyZSggPEltYWdlPiApLAoJICogIGRpc3BsYWNlbWVudFNjYWxlOiA8ZmxvYXQ+LAoJICogIGRpc3BsYWNlbWVudEJpYXM6IDxmbG9hdD4sCgkgKgoJICogIHdpcmVmcmFtZTogPGJvb2xlYW4+LAoJICogIHdpcmVmcmFtZUxpbmV3aWR0aDogPGZsb2F0PgoJICoKCSAqICBmbGF0U2hhZGluZzogPGJvb2w+CgkgKiB9CgkgKi9jbGFzcyBNZXNoTm9ybWFsTWF0ZXJpYWwgZXh0ZW5kcyBNYXRlcmlhbHtjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzKXtzdXBlcigpO3RoaXMudHlwZT0nTWVzaE5vcm1hbE1hdGVyaWFsJzt0aGlzLmJ1bXBNYXA9bnVsbDt0aGlzLmJ1bXBTY2FsZT0xO3RoaXMubm9ybWFsTWFwPW51bGw7dGhpcy5ub3JtYWxNYXBUeXBlPVRhbmdlbnRTcGFjZU5vcm1hbE1hcDt0aGlzLm5vcm1hbFNjYWxlPW5ldyBWZWN0b3IyKDEsMSk7dGhpcy5kaXNwbGFjZW1lbnRNYXA9bnVsbDt0aGlzLmRpc3BsYWNlbWVudFNjYWxlPTE7dGhpcy5kaXNwbGFjZW1lbnRCaWFzPTA7dGhpcy53aXJlZnJhbWU9ZmFsc2U7dGhpcy53aXJlZnJhbWVMaW5ld2lkdGg9MTt0aGlzLmZvZz1mYWxzZTt0aGlzLmZsYXRTaGFkaW5nPWZhbHNlO3RoaXMuc2V0VmFsdWVzKHBhcmFtZXRlcnMpO31jb3B5KHNvdXJjZSl7c3VwZXIuY29weShzb3VyY2UpO3RoaXMuYnVtcE1hcD1zb3VyY2UuYnVtcE1hcDt0aGlzLmJ1bXBTY2FsZT1zb3VyY2UuYnVtcFNjYWxlO3RoaXMubm9ybWFsTWFwPXNvdXJjZS5ub3JtYWxNYXA7dGhpcy5ub3JtYWxNYXBUeXBlPXNvdXJjZS5ub3JtYWxNYXBUeXBlO3RoaXMubm9ybWFsU2NhbGUuY29weShzb3VyY2Uubm9ybWFsU2NhbGUpO3RoaXMuZGlzcGxhY2VtZW50TWFwPXNvdXJjZS5kaXNwbGFjZW1lbnRNYXA7dGhpcy5kaXNwbGFjZW1lbnRTY2FsZT1zb3VyY2UuZGlzcGxhY2VtZW50U2NhbGU7dGhpcy5kaXNwbGFjZW1lbnRCaWFzPXNvdXJjZS5kaXNwbGFjZW1lbnRCaWFzO3RoaXMud2lyZWZyYW1lPXNvdXJjZS53aXJlZnJhbWU7dGhpcy53aXJlZnJhbWVMaW5ld2lkdGg9c291cmNlLndpcmVmcmFtZUxpbmV3aWR0aDt0aGlzLmZsYXRTaGFkaW5nPXNvdXJjZS5mbGF0U2hhZGluZztyZXR1cm4gdGhpczt9fU1lc2hOb3JtYWxNYXRlcmlhbC5wcm90b3R5cGUuaXNNZXNoTm9ybWFsTWF0ZXJpYWw9dHJ1ZTsvKioKCSAqIHBhcmFtZXRlcnMgPSB7CgkgKiAgY29sb3I6IDxoZXg+LAoJICogIG9wYWNpdHk6IDxmbG9hdD4sCgkgKgoJICogIG1hcDogbmV3IFRIUkVFLlRleHR1cmUoIDxJbWFnZT4gKSwKCSAqCgkgKiAgbGlnaHRNYXA6IG5ldyBUSFJFRS5UZXh0dXJlKCA8SW1hZ2U+ICksCgkgKiAgbGlnaHRNYXBJbnRlbnNpdHk6IDxmbG9hdD4KCSAqCgkgKiAgYW9NYXA6IG5ldyBUSFJFRS5UZXh0dXJlKCA8SW1hZ2U+ICksCgkgKiAgYW9NYXBJbnRlbnNpdHk6IDxmbG9hdD4KCSAqCgkgKiAgZW1pc3NpdmU6IDxoZXg+LAoJICogIGVtaXNzaXZlSW50ZW5zaXR5OiA8ZmxvYXQ+CgkgKiAgZW1pc3NpdmVNYXA6IG5ldyBUSFJFRS5UZXh0dXJlKCA8SW1hZ2U+ICksCgkgKgoJICogIHNwZWN1bGFyTWFwOiBuZXcgVEhSRUUuVGV4dHVyZSggPEltYWdlPiApLAoJICoKCSAqICBhbHBoYU1hcDogbmV3IFRIUkVFLlRleHR1cmUoIDxJbWFnZT4gKSwKCSAqCgkgKiAgZW52TWFwOiBuZXcgVEhSRUUuQ3ViZVRleHR1cmUoIFtwb3N4LCBuZWd4LCBwb3N5LCBuZWd5LCBwb3N6LCBuZWd6XSApLAoJICogIGNvbWJpbmU6IFRIUkVFLk11bHRpcGx5LAoJICogIHJlZmxlY3Rpdml0eTogPGZsb2F0PiwKCSAqICByZWZyYWN0aW9uUmF0aW86IDxmbG9hdD4sCgkgKgoJICogIHdpcmVmcmFtZTogPGJvb2xlYW4+LAoJICogIHdpcmVmcmFtZUxpbmV3aWR0aDogPGZsb2F0PiwKCSAqCgkgKiB9CgkgKi9jbGFzcyBNZXNoTGFtYmVydE1hdGVyaWFsIGV4dGVuZHMgTWF0ZXJpYWx7Y29uc3RydWN0b3IocGFyYW1ldGVycyl7c3VwZXIoKTt0aGlzLnR5cGU9J01lc2hMYW1iZXJ0TWF0ZXJpYWwnO3RoaXMuY29sb3I9bmV3IENvbG9yKDB4ZmZmZmZmKTsvLyBkaWZmdXNlCgl0aGlzLm1hcD1udWxsO3RoaXMubGlnaHRNYXA9bnVsbDt0aGlzLmxpZ2h0TWFwSW50ZW5zaXR5PTEuMDt0aGlzLmFvTWFwPW51bGw7dGhpcy5hb01hcEludGVuc2l0eT0xLjA7dGhpcy5lbWlzc2l2ZT1uZXcgQ29sb3IoMHgwMDAwMDApO3RoaXMuZW1pc3NpdmVJbnRlbnNpdHk9MS4wO3RoaXMuZW1pc3NpdmVNYXA9bnVsbDt0aGlzLnNwZWN1bGFyTWFwPW51bGw7dGhpcy5hbHBoYU1hcD1udWxsO3RoaXMuZW52TWFwPW51bGw7dGhpcy5jb21iaW5lPU11bHRpcGx5T3BlcmF0aW9uO3RoaXMucmVmbGVjdGl2aXR5PTE7dGhpcy5yZWZyYWN0aW9uUmF0aW89MC45ODt0aGlzLndpcmVmcmFtZT1mYWxzZTt0aGlzLndpcmVmcmFtZUxpbmV3aWR0aD0xO3RoaXMud2lyZWZyYW1lTGluZWNhcD0ncm91bmQnO3RoaXMud2lyZWZyYW1lTGluZWpvaW49J3JvdW5kJzt0aGlzLnNldFZhbHVlcyhwYXJhbWV0ZXJzKTt9Y29weShzb3VyY2Upe3N1cGVyLmNvcHkoc291cmNlKTt0aGlzLmNvbG9yLmNvcHkoc291cmNlLmNvbG9yKTt0aGlzLm1hcD1zb3VyY2UubWFwO3RoaXMubGlnaHRNYXA9c291cmNlLmxpZ2h0TWFwO3RoaXMubGlnaHRNYXBJbnRlbnNpdHk9c291cmNlLmxpZ2h0TWFwSW50ZW5zaXR5O3RoaXMuYW9NYXA9c291cmNlLmFvTWFwO3RoaXMuYW9NYXBJbnRlbnNpdHk9c291cmNlLmFvTWFwSW50ZW5zaXR5O3RoaXMuZW1pc3NpdmUuY29weShzb3VyY2UuZW1pc3NpdmUpO3RoaXMuZW1pc3NpdmVNYXA9c291cmNlLmVtaXNzaXZlTWFwO3RoaXMuZW1pc3NpdmVJbnRlbnNpdHk9c291cmNlLmVtaXNzaXZlSW50ZW5zaXR5O3RoaXMuc3BlY3VsYXJNYXA9c291cmNlLnNwZWN1bGFyTWFwO3RoaXMuYWxwaGFNYXA9c291cmNlLmFscGhhTWFwO3RoaXMuZW52TWFwPXNvdXJjZS5lbnZNYXA7dGhpcy5jb21iaW5lPXNvdXJjZS5jb21iaW5lO3RoaXMucmVmbGVjdGl2aXR5PXNvdXJjZS5yZWZsZWN0aXZpdHk7dGhpcy5yZWZyYWN0aW9uUmF0aW89c291cmNlLnJlZnJhY3Rpb25SYXRpbzt0aGlzLndpcmVmcmFtZT1zb3VyY2Uud2lyZWZyYW1lO3RoaXMud2lyZWZyYW1lTGluZXdpZHRoPXNvdXJjZS53aXJlZnJhbWVMaW5ld2lkdGg7dGhpcy53aXJlZnJhbWVMaW5lY2FwPXNvdXJjZS53aXJlZnJhbWVMaW5lY2FwO3RoaXMud2lyZWZyYW1lTGluZWpvaW49c291cmNlLndpcmVmcmFtZUxpbmVqb2luO3JldHVybiB0aGlzO319TWVzaExhbWJlcnRNYXRlcmlhbC5wcm90b3R5cGUuaXNNZXNoTGFtYmVydE1hdGVyaWFsPXRydWU7LyoqCgkgKiBwYXJhbWV0ZXJzID0gewoJICogIGNvbG9yOiA8aGV4PiwKCSAqICBvcGFjaXR5OiA8ZmxvYXQ+LAoJICoKCSAqICBtYXRjYXA6IG5ldyBUSFJFRS5UZXh0dXJlKCA8SW1hZ2U+ICksCgkgKgoJICogIG1hcDogbmV3IFRIUkVFLlRleHR1cmUoIDxJbWFnZT4gKSwKCSAqCgkgKiAgYnVtcE1hcDogbmV3IFRIUkVFLlRleHR1cmUoIDxJbWFnZT4gKSwKCSAqICBidW1wU2NhbGU6IDxmbG9hdD4sCgkgKgoJICogIG5vcm1hbE1hcDogbmV3IFRIUkVFLlRleHR1cmUoIDxJbWFnZT4gKSwKCSAqICBub3JtYWxNYXBUeXBlOiBUSFJFRS5UYW5nZW50U3BhY2VOb3JtYWxNYXAsCgkgKiAgbm9ybWFsU2NhbGU6IDxWZWN0b3IyPiwKCSAqCgkgKiAgZGlzcGxhY2VtZW50TWFwOiBuZXcgVEhSRUUuVGV4dHVyZSggPEltYWdlPiApLAoJICogIGRpc3BsYWNlbWVudFNjYWxlOiA8ZmxvYXQ+LAoJICogIGRpc3BsYWNlbWVudEJpYXM6IDxmbG9hdD4sCgkgKgoJICogIGFscGhhTWFwOiBuZXcgVEhSRUUuVGV4dHVyZSggPEltYWdlPiApLAoJICoKCSAqICBmbGF0U2hhZGluZzogPGJvb2w+CgkgKiB9CgkgKi9jbGFzcyBNZXNoTWF0Y2FwTWF0ZXJpYWwgZXh0ZW5kcyBNYXRlcmlhbHtjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzKXtzdXBlcigpO3RoaXMuZGVmaW5lcz17J01BVENBUCc6Jyd9O3RoaXMudHlwZT0nTWVzaE1hdGNhcE1hdGVyaWFsJzt0aGlzLmNvbG9yPW5ldyBDb2xvcigweGZmZmZmZik7Ly8gZGlmZnVzZQoJdGhpcy5tYXRjYXA9bnVsbDt0aGlzLm1hcD1udWxsO3RoaXMuYnVtcE1hcD1udWxsO3RoaXMuYnVtcFNjYWxlPTE7dGhpcy5ub3JtYWxNYXA9bnVsbDt0aGlzLm5vcm1hbE1hcFR5cGU9VGFuZ2VudFNwYWNlTm9ybWFsTWFwO3RoaXMubm9ybWFsU2NhbGU9bmV3IFZlY3RvcjIoMSwxKTt0aGlzLmRpc3BsYWNlbWVudE1hcD1udWxsO3RoaXMuZGlzcGxhY2VtZW50U2NhbGU9MTt0aGlzLmRpc3BsYWNlbWVudEJpYXM9MDt0aGlzLmFscGhhTWFwPW51bGw7dGhpcy5mbGF0U2hhZGluZz1mYWxzZTt0aGlzLnNldFZhbHVlcyhwYXJhbWV0ZXJzKTt9Y29weShzb3VyY2Upe3N1cGVyLmNvcHkoc291cmNlKTt0aGlzLmRlZmluZXM9eydNQVRDQVAnOicnfTt0aGlzLmNvbG9yLmNvcHkoc291cmNlLmNvbG9yKTt0aGlzLm1hdGNhcD1zb3VyY2UubWF0Y2FwO3RoaXMubWFwPXNvdXJjZS5tYXA7dGhpcy5idW1wTWFwPXNvdXJjZS5idW1wTWFwO3RoaXMuYnVtcFNjYWxlPXNvdXJjZS5idW1wU2NhbGU7dGhpcy5ub3JtYWxNYXA9c291cmNlLm5vcm1hbE1hcDt0aGlzLm5vcm1hbE1hcFR5cGU9c291cmNlLm5vcm1hbE1hcFR5cGU7dGhpcy5ub3JtYWxTY2FsZS5jb3B5KHNvdXJjZS5ub3JtYWxTY2FsZSk7dGhpcy5kaXNwbGFjZW1lbnRNYXA9c291cmNlLmRpc3BsYWNlbWVudE1hcDt0aGlzLmRpc3BsYWNlbWVudFNjYWxlPXNvdXJjZS5kaXNwbGFjZW1lbnRTY2FsZTt0aGlzLmRpc3BsYWNlbWVudEJpYXM9c291cmNlLmRpc3BsYWNlbWVudEJpYXM7dGhpcy5hbHBoYU1hcD1zb3VyY2UuYWxwaGFNYXA7dGhpcy5mbGF0U2hhZGluZz1zb3VyY2UuZmxhdFNoYWRpbmc7cmV0dXJuIHRoaXM7fX1NZXNoTWF0Y2FwTWF0ZXJpYWwucHJvdG90eXBlLmlzTWVzaE1hdGNhcE1hdGVyaWFsPXRydWU7LyoqCgkgKiBwYXJhbWV0ZXJzID0gewoJICogIGNvbG9yOiA8aGV4PiwKCSAqICBvcGFjaXR5OiA8ZmxvYXQ+LAoJICoKCSAqICBsaW5ld2lkdGg6IDxmbG9hdD4sCgkgKgoJICogIHNjYWxlOiA8ZmxvYXQ+LAoJICogIGRhc2hTaXplOiA8ZmxvYXQ+LAoJICogIGdhcFNpemU6IDxmbG9hdD4KCSAqIH0KCSAqL2NsYXNzIExpbmVEYXNoZWRNYXRlcmlhbCBleHRlbmRzIExpbmVCYXNpY01hdGVyaWFse2NvbnN0cnVjdG9yKHBhcmFtZXRlcnMpe3N1cGVyKCk7dGhpcy50eXBlPSdMaW5lRGFzaGVkTWF0ZXJpYWwnO3RoaXMuc2NhbGU9MTt0aGlzLmRhc2hTaXplPTM7dGhpcy5nYXBTaXplPTE7dGhpcy5zZXRWYWx1ZXMocGFyYW1ldGVycyk7fWNvcHkoc291cmNlKXtzdXBlci5jb3B5KHNvdXJjZSk7dGhpcy5zY2FsZT1zb3VyY2Uuc2NhbGU7dGhpcy5kYXNoU2l6ZT1zb3VyY2UuZGFzaFNpemU7dGhpcy5nYXBTaXplPXNvdXJjZS5nYXBTaXplO3JldHVybiB0aGlzO319TGluZURhc2hlZE1hdGVyaWFsLnByb3RvdHlwZS5pc0xpbmVEYXNoZWRNYXRlcmlhbD10cnVlO2NvbnN0IEFuaW1hdGlvblV0aWxzPXsvLyBzYW1lIGFzIEFycmF5LnByb3RvdHlwZS5zbGljZSwgYnV0IGFsc28gd29ya3Mgb24gdHlwZWQgYXJyYXlzCglhcnJheVNsaWNlOmZ1bmN0aW9uKGFycmF5LGZyb20sdG8pe2lmKEFuaW1hdGlvblV0aWxzLmlzVHlwZWRBcnJheShhcnJheSkpey8vIGluIGlvczkgYXJyYXkuc3ViYXJyYXkoZnJvbSwgdW5kZWZpbmVkKSB3aWxsIHJldHVybiBlbXB0eSBhcnJheQoJLy8gYnV0IGFycmF5LnN1YmFycmF5KGZyb20pIG9yIGFycmF5LnN1YmFycmF5KGZyb20sIGxlbikgaXMgY29ycmVjdAoJcmV0dXJuIG5ldyBhcnJheS5jb25zdHJ1Y3RvcihhcnJheS5zdWJhcnJheShmcm9tLHRvIT09dW5kZWZpbmVkP3RvOmFycmF5Lmxlbmd0aCkpO31yZXR1cm4gYXJyYXkuc2xpY2UoZnJvbSx0byk7fSwvLyBjb252ZXJ0cyBhbiBhcnJheSB0byBhIHNwZWNpZmljIHR5cGUKCWNvbnZlcnRBcnJheTpmdW5jdGlvbihhcnJheSx0eXBlLGZvcmNlQ2xvbmUpe2lmKCFhcnJheXx8Ly8gbGV0ICd1bmRlZmluZWQnIGFuZCAnbnVsbCcgcGFzcwoJIWZvcmNlQ2xvbmUmJmFycmF5LmNvbnN0cnVjdG9yPT09dHlwZSlyZXR1cm4gYXJyYXk7aWYodHlwZW9mIHR5cGUuQllURVNfUEVSX0VMRU1FTlQ9PT0nbnVtYmVyJyl7cmV0dXJuIG5ldyB0eXBlKGFycmF5KTsvLyBjcmVhdGUgdHlwZWQgYXJyYXkKCX1yZXR1cm4gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJyYXkpOy8vIGNyZWF0ZSBBcnJheQoJfSxpc1R5cGVkQXJyYXk6ZnVuY3Rpb24ob2JqZWN0KXtyZXR1cm4gQXJyYXlCdWZmZXIuaXNWaWV3KG9iamVjdCkmJiEob2JqZWN0IGluc3RhbmNlb2YgRGF0YVZpZXcpO30sLy8gcmV0dXJucyBhbiBhcnJheSBieSB3aGljaCB0aW1lcyBhbmQgdmFsdWVzIGNhbiBiZSBzb3J0ZWQKCWdldEtleWZyYW1lT3JkZXI6ZnVuY3Rpb24odGltZXMpe2Z1bmN0aW9uIGNvbXBhcmVUaW1lKGksail7cmV0dXJuIHRpbWVzW2ldLXRpbWVzW2pdO31jb25zdCBuPXRpbWVzLmxlbmd0aDtjb25zdCByZXN1bHQ9bmV3IEFycmF5KG4pO2ZvcihsZXQgaT0wO2khPT1uOysraSlyZXN1bHRbaV09aTtyZXN1bHQuc29ydChjb21wYXJlVGltZSk7cmV0dXJuIHJlc3VsdDt9LC8vIHVzZXMgdGhlIGFycmF5IHByZXZpb3VzbHkgcmV0dXJuZWQgYnkgJ2dldEtleWZyYW1lT3JkZXInIHRvIHNvcnQgZGF0YQoJc29ydGVkQXJyYXk6ZnVuY3Rpb24odmFsdWVzLHN0cmlkZSxvcmRlcil7Y29uc3QgblZhbHVlcz12YWx1ZXMubGVuZ3RoO2NvbnN0IHJlc3VsdD1uZXcgdmFsdWVzLmNvbnN0cnVjdG9yKG5WYWx1ZXMpO2ZvcihsZXQgaT0wLGRzdE9mZnNldD0wO2RzdE9mZnNldCE9PW5WYWx1ZXM7KytpKXtjb25zdCBzcmNPZmZzZXQ9b3JkZXJbaV0qc3RyaWRlO2ZvcihsZXQgaj0wO2ohPT1zdHJpZGU7KytqKXtyZXN1bHRbZHN0T2Zmc2V0KytdPXZhbHVlc1tzcmNPZmZzZXQral07fX1yZXR1cm4gcmVzdWx0O30sLy8gZnVuY3Rpb24gZm9yIHBhcnNpbmcgQU9TIGtleWZyYW1lIGZvcm1hdHMKCWZsYXR0ZW5KU09OOmZ1bmN0aW9uKGpzb25LZXlzLHRpbWVzLHZhbHVlcyx2YWx1ZVByb3BlcnR5TmFtZSl7bGV0IGk9MSxrZXk9anNvbktleXNbMF07d2hpbGUoa2V5IT09dW5kZWZpbmVkJiZrZXlbdmFsdWVQcm9wZXJ0eU5hbWVdPT09dW5kZWZpbmVkKXtrZXk9anNvbktleXNbaSsrXTt9aWYoa2V5PT09dW5kZWZpbmVkKXJldHVybjsvLyBubyBkYXRhCglsZXQgdmFsdWU9a2V5W3ZhbHVlUHJvcGVydHlOYW1lXTtpZih2YWx1ZT09PXVuZGVmaW5lZClyZXR1cm47Ly8gbm8gZGF0YQoJaWYoQXJyYXkuaXNBcnJheSh2YWx1ZSkpe2Rve3ZhbHVlPWtleVt2YWx1ZVByb3BlcnR5TmFtZV07aWYodmFsdWUhPT11bmRlZmluZWQpe3RpbWVzLnB1c2goa2V5LnRpbWUpO3ZhbHVlcy5wdXNoLmFwcGx5KHZhbHVlcyx2YWx1ZSk7Ly8gcHVzaCBhbGwgZWxlbWVudHMKCX1rZXk9anNvbktleXNbaSsrXTt9d2hpbGUoa2V5IT09dW5kZWZpbmVkKTt9ZWxzZSBpZih2YWx1ZS50b0FycmF5IT09dW5kZWZpbmVkKXsvLyAuLi5hc3N1bWUgVEhSRUUuTWF0aC1pc2gKCWRve3ZhbHVlPWtleVt2YWx1ZVByb3BlcnR5TmFtZV07aWYodmFsdWUhPT11bmRlZmluZWQpe3RpbWVzLnB1c2goa2V5LnRpbWUpO3ZhbHVlLnRvQXJyYXkodmFsdWVzLHZhbHVlcy5sZW5ndGgpO31rZXk9anNvbktleXNbaSsrXTt9d2hpbGUoa2V5IT09dW5kZWZpbmVkKTt9ZWxzZSB7Ly8gb3RoZXJ3aXNlIHB1c2ggYXMtaXMKCWRve3ZhbHVlPWtleVt2YWx1ZVByb3BlcnR5TmFtZV07aWYodmFsdWUhPT11bmRlZmluZWQpe3RpbWVzLnB1c2goa2V5LnRpbWUpO3ZhbHVlcy5wdXNoKHZhbHVlKTt9a2V5PWpzb25LZXlzW2krK107fXdoaWxlKGtleSE9PXVuZGVmaW5lZCk7fX0sc3ViY2xpcDpmdW5jdGlvbihzb3VyY2VDbGlwLG5hbWUsc3RhcnRGcmFtZSxlbmRGcmFtZSxmcHMpe2lmKGZwcz09PXZvaWQgMCl7ZnBzPTMwO31jb25zdCBjbGlwPXNvdXJjZUNsaXAuY2xvbmUoKTtjbGlwLm5hbWU9bmFtZTtjb25zdCB0cmFja3M9W107Zm9yKGxldCBpPTA7aTxjbGlwLnRyYWNrcy5sZW5ndGg7KytpKXtjb25zdCB0cmFjaz1jbGlwLnRyYWNrc1tpXTtjb25zdCB2YWx1ZVNpemU9dHJhY2suZ2V0VmFsdWVTaXplKCk7Y29uc3QgdGltZXM9W107Y29uc3QgdmFsdWVzPVtdO2ZvcihsZXQgaj0wO2o8dHJhY2sudGltZXMubGVuZ3RoOysrail7Y29uc3QgZnJhbWU9dHJhY2sudGltZXNbal0qZnBzO2lmKGZyYW1lPHN0YXJ0RnJhbWV8fGZyYW1lPj1lbmRGcmFtZSljb250aW51ZTt0aW1lcy5wdXNoKHRyYWNrLnRpbWVzW2pdKTtmb3IobGV0IGs9MDtrPHZhbHVlU2l6ZTsrK2spe3ZhbHVlcy5wdXNoKHRyYWNrLnZhbHVlc1tqKnZhbHVlU2l6ZStrXSk7fX1pZih0aW1lcy5sZW5ndGg9PT0wKWNvbnRpbnVlO3RyYWNrLnRpbWVzPUFuaW1hdGlvblV0aWxzLmNvbnZlcnRBcnJheSh0aW1lcyx0cmFjay50aW1lcy5jb25zdHJ1Y3Rvcik7dHJhY2sudmFsdWVzPUFuaW1hdGlvblV0aWxzLmNvbnZlcnRBcnJheSh2YWx1ZXMsdHJhY2sudmFsdWVzLmNvbnN0cnVjdG9yKTt0cmFja3MucHVzaCh0cmFjayk7fWNsaXAudHJhY2tzPXRyYWNrczsvLyBmaW5kIG1pbmltdW0gLnRpbWVzIHZhbHVlIGFjcm9zcyBhbGwgdHJhY2tzIGluIHRoZSB0cmltbWVkIGNsaXAKCWxldCBtaW5TdGFydFRpbWU9SW5maW5pdHk7Zm9yKGxldCBpPTA7aTxjbGlwLnRyYWNrcy5sZW5ndGg7KytpKXtpZihtaW5TdGFydFRpbWU+Y2xpcC50cmFja3NbaV0udGltZXNbMF0pe21pblN0YXJ0VGltZT1jbGlwLnRyYWNrc1tpXS50aW1lc1swXTt9fS8vIHNoaWZ0IGFsbCB0cmFja3Mgc3VjaCB0aGF0IGNsaXAgYmVnaW5zIGF0IHQ9MAoJZm9yKGxldCBpPTA7aTxjbGlwLnRyYWNrcy5sZW5ndGg7KytpKXtjbGlwLnRyYWNrc1tpXS5zaGlmdCgtMSptaW5TdGFydFRpbWUpO31jbGlwLnJlc2V0RHVyYXRpb24oKTtyZXR1cm4gY2xpcDt9LG1ha2VDbGlwQWRkaXRpdmU6ZnVuY3Rpb24odGFyZ2V0Q2xpcCxyZWZlcmVuY2VGcmFtZSxyZWZlcmVuY2VDbGlwLGZwcyl7aWYocmVmZXJlbmNlRnJhbWU9PT12b2lkIDApe3JlZmVyZW5jZUZyYW1lPTA7fWlmKHJlZmVyZW5jZUNsaXA9PT12b2lkIDApe3JlZmVyZW5jZUNsaXA9dGFyZ2V0Q2xpcDt9aWYoZnBzPT09dm9pZCAwKXtmcHM9MzA7fWlmKGZwczw9MClmcHM9MzA7Y29uc3QgbnVtVHJhY2tzPXJlZmVyZW5jZUNsaXAudHJhY2tzLmxlbmd0aDtjb25zdCByZWZlcmVuY2VUaW1lPXJlZmVyZW5jZUZyYW1lL2ZwczsvLyBNYWtlIGVhY2ggdHJhY2sncyB2YWx1ZXMgcmVsYXRpdmUgdG8gdGhlIHZhbHVlcyBhdCB0aGUgcmVmZXJlbmNlIGZyYW1lCglmb3IobGV0IGk9MDtpPG51bVRyYWNrczsrK2kpe2NvbnN0IHJlZmVyZW5jZVRyYWNrPXJlZmVyZW5jZUNsaXAudHJhY2tzW2ldO2NvbnN0IHJlZmVyZW5jZVRyYWNrVHlwZT1yZWZlcmVuY2VUcmFjay5WYWx1ZVR5cGVOYW1lOy8vIFNraXAgdGhpcyB0cmFjayBpZiBpdCdzIG5vbi1udW1lcmljCglpZihyZWZlcmVuY2VUcmFja1R5cGU9PT0nYm9vbCd8fHJlZmVyZW5jZVRyYWNrVHlwZT09PSdzdHJpbmcnKWNvbnRpbnVlOy8vIEZpbmQgdGhlIHRyYWNrIGluIHRoZSB0YXJnZXQgY2xpcCB3aG9zZSBuYW1lIGFuZCB0eXBlIG1hdGNoZXMgdGhlIHJlZmVyZW5jZSB0cmFjawoJY29uc3QgdGFyZ2V0VHJhY2s9dGFyZ2V0Q2xpcC50cmFja3MuZmluZChmdW5jdGlvbih0cmFjayl7cmV0dXJuIHRyYWNrLm5hbWU9PT1yZWZlcmVuY2VUcmFjay5uYW1lJiZ0cmFjay5WYWx1ZVR5cGVOYW1lPT09cmVmZXJlbmNlVHJhY2tUeXBlO30pO2lmKHRhcmdldFRyYWNrPT09dW5kZWZpbmVkKWNvbnRpbnVlO2xldCByZWZlcmVuY2VPZmZzZXQ9MDtjb25zdCByZWZlcmVuY2VWYWx1ZVNpemU9cmVmZXJlbmNlVHJhY2suZ2V0VmFsdWVTaXplKCk7aWYocmVmZXJlbmNlVHJhY2suY3JlYXRlSW50ZXJwb2xhbnQuaXNJbnRlcnBvbGFudEZhY3RvcnlNZXRob2RHTFRGQ3ViaWNTcGxpbmUpe3JlZmVyZW5jZU9mZnNldD1yZWZlcmVuY2VWYWx1ZVNpemUvMzt9bGV0IHRhcmdldE9mZnNldD0wO2NvbnN0IHRhcmdldFZhbHVlU2l6ZT10YXJnZXRUcmFjay5nZXRWYWx1ZVNpemUoKTtpZih0YXJnZXRUcmFjay5jcmVhdGVJbnRlcnBvbGFudC5pc0ludGVycG9sYW50RmFjdG9yeU1ldGhvZEdMVEZDdWJpY1NwbGluZSl7dGFyZ2V0T2Zmc2V0PXRhcmdldFZhbHVlU2l6ZS8zO31jb25zdCBsYXN0SW5kZXg9cmVmZXJlbmNlVHJhY2sudGltZXMubGVuZ3RoLTE7bGV0IHJlZmVyZW5jZVZhbHVlOy8vIEZpbmQgdGhlIHZhbHVlIHRvIHN1YnRyYWN0IG91dCBvZiB0aGUgdHJhY2sKCWlmKHJlZmVyZW5jZVRpbWU8PXJlZmVyZW5jZVRyYWNrLnRpbWVzWzBdKXsvLyBSZWZlcmVuY2UgZnJhbWUgaXMgZWFybGllciB0aGFuIHRoZSBmaXJzdCBrZXlmcmFtZSwgc28ganVzdCB1c2UgdGhlIGZpcnN0IGtleWZyYW1lCgljb25zdCBzdGFydEluZGV4PXJlZmVyZW5jZU9mZnNldDtjb25zdCBlbmRJbmRleD1yZWZlcmVuY2VWYWx1ZVNpemUtcmVmZXJlbmNlT2Zmc2V0O3JlZmVyZW5jZVZhbHVlPUFuaW1hdGlvblV0aWxzLmFycmF5U2xpY2UocmVmZXJlbmNlVHJhY2sudmFsdWVzLHN0YXJ0SW5kZXgsZW5kSW5kZXgpO31lbHNlIGlmKHJlZmVyZW5jZVRpbWU+PXJlZmVyZW5jZVRyYWNrLnRpbWVzW2xhc3RJbmRleF0pey8vIFJlZmVyZW5jZSBmcmFtZSBpcyBhZnRlciB0aGUgbGFzdCBrZXlmcmFtZSwgc28ganVzdCB1c2UgdGhlIGxhc3Qga2V5ZnJhbWUKCWNvbnN0IHN0YXJ0SW5kZXg9bGFzdEluZGV4KnJlZmVyZW5jZVZhbHVlU2l6ZStyZWZlcmVuY2VPZmZzZXQ7Y29uc3QgZW5kSW5kZXg9c3RhcnRJbmRleCtyZWZlcmVuY2VWYWx1ZVNpemUtcmVmZXJlbmNlT2Zmc2V0O3JlZmVyZW5jZVZhbHVlPUFuaW1hdGlvblV0aWxzLmFycmF5U2xpY2UocmVmZXJlbmNlVHJhY2sudmFsdWVzLHN0YXJ0SW5kZXgsZW5kSW5kZXgpO31lbHNlIHsvLyBJbnRlcnBvbGF0ZSB0byB0aGUgcmVmZXJlbmNlIHZhbHVlCgljb25zdCBpbnRlcnBvbGFudD1yZWZlcmVuY2VUcmFjay5jcmVhdGVJbnRlcnBvbGFudCgpO2NvbnN0IHN0YXJ0SW5kZXg9cmVmZXJlbmNlT2Zmc2V0O2NvbnN0IGVuZEluZGV4PXJlZmVyZW5jZVZhbHVlU2l6ZS1yZWZlcmVuY2VPZmZzZXQ7aW50ZXJwb2xhbnQuZXZhbHVhdGUocmVmZXJlbmNlVGltZSk7cmVmZXJlbmNlVmFsdWU9QW5pbWF0aW9uVXRpbHMuYXJyYXlTbGljZShpbnRlcnBvbGFudC5yZXN1bHRCdWZmZXIsc3RhcnRJbmRleCxlbmRJbmRleCk7fS8vIENvbmp1Z2F0ZSB0aGUgcXVhdGVybmlvbgoJaWYocmVmZXJlbmNlVHJhY2tUeXBlPT09J3F1YXRlcm5pb24nKXtjb25zdCByZWZlcmVuY2VRdWF0PW5ldyBRdWF0ZXJuaW9uKCkuZnJvbUFycmF5KHJlZmVyZW5jZVZhbHVlKS5ub3JtYWxpemUoKS5jb25qdWdhdGUoKTtyZWZlcmVuY2VRdWF0LnRvQXJyYXkocmVmZXJlbmNlVmFsdWUpO30vLyBTdWJ0cmFjdCB0aGUgcmVmZXJlbmNlIHZhbHVlIGZyb20gYWxsIG9mIHRoZSB0cmFjayB2YWx1ZXMKCWNvbnN0IG51bVRpbWVzPXRhcmdldFRyYWNrLnRpbWVzLmxlbmd0aDtmb3IobGV0IGo9MDtqPG51bVRpbWVzOysrail7Y29uc3QgdmFsdWVTdGFydD1qKnRhcmdldFZhbHVlU2l6ZSt0YXJnZXRPZmZzZXQ7aWYocmVmZXJlbmNlVHJhY2tUeXBlPT09J3F1YXRlcm5pb24nKXsvLyBNdWx0aXBseSB0aGUgY29uanVnYXRlIGZvciBxdWF0ZXJuaW9uIHRyYWNrIHR5cGVzCglRdWF0ZXJuaW9uLm11bHRpcGx5UXVhdGVybmlvbnNGbGF0KHRhcmdldFRyYWNrLnZhbHVlcyx2YWx1ZVN0YXJ0LHJlZmVyZW5jZVZhbHVlLDAsdGFyZ2V0VHJhY2sudmFsdWVzLHZhbHVlU3RhcnQpO31lbHNlIHtjb25zdCB2YWx1ZUVuZD10YXJnZXRWYWx1ZVNpemUtdGFyZ2V0T2Zmc2V0KjI7Ly8gU3VidHJhY3QgZWFjaCB2YWx1ZSBmb3IgYWxsIG90aGVyIG51bWVyaWMgdHJhY2sgdHlwZXMKCWZvcihsZXQgaz0wO2s8dmFsdWVFbmQ7KytrKXt0YXJnZXRUcmFjay52YWx1ZXNbdmFsdWVTdGFydCtrXS09cmVmZXJlbmNlVmFsdWVba107fX19fXRhcmdldENsaXAuYmxlbmRNb2RlPUFkZGl0aXZlQW5pbWF0aW9uQmxlbmRNb2RlO3JldHVybiB0YXJnZXRDbGlwO319Oy8qKgoJICogQWJzdHJhY3QgYmFzZSBjbGFzcyBvZiBpbnRlcnBvbGFudHMgb3ZlciBwYXJhbWV0cmljIHNhbXBsZXMuCgkgKgoJICogVGhlIHBhcmFtZXRlciBkb21haW4gaXMgb25lIGRpbWVuc2lvbmFsLCB0eXBpY2FsbHkgdGhlIHRpbWUgb3IgYSBwYXRoCgkgKiBhbG9uZyBhIGN1cnZlIGRlZmluZWQgYnkgdGhlIGRhdGEuCgkgKgoJICogVGhlIHNhbXBsZSB2YWx1ZXMgY2FuIGhhdmUgYW55IGRpbWVuc2lvbmFsaXR5IGFuZCBkZXJpdmVkIGNsYXNzZXMgbWF5CgkgKiBhcHBseSBzcGVjaWFsIGludGVycHJldGF0aW9ucyB0byB0aGUgZGF0YS4KCSAqCgkgKiBUaGlzIGNsYXNzIHByb3ZpZGVzIHRoZSBpbnRlcnZhbCBzZWVrIGluIGEgVGVtcGxhdGUgTWV0aG9kLCBkZWZlcnJpbmcKCSAqIHRoZSBhY3R1YWwgaW50ZXJwb2xhdGlvbiB0byBkZXJpdmVkIGNsYXNzZXMuCgkgKgoJICogVGltZSBjb21wbGV4aXR5IGlzIE8oMSkgZm9yIGxpbmVhciBhY2Nlc3MgY3Jvc3NpbmcgYXQgbW9zdCB0d28gcG9pbnRzCgkgKiBhbmQgTyhsb2cgTikgZm9yIHJhbmRvbSBhY2Nlc3MsIHdoZXJlIE4gaXMgdGhlIG51bWJlciBvZiBwb3NpdGlvbnMuCgkgKgoJICogUmVmZXJlbmNlczoKCSAqCgkgKiAJCWh0dHA6Ly93d3cub29kZXNpZ24uY29tL3RlbXBsYXRlLW1ldGhvZC1wYXR0ZXJuLmh0bWwKCSAqCgkgKi9jbGFzcyBJbnRlcnBvbGFudHtjb25zdHJ1Y3RvcihwYXJhbWV0ZXJQb3NpdGlvbnMsc2FtcGxlVmFsdWVzLHNhbXBsZVNpemUscmVzdWx0QnVmZmVyKXt0aGlzLnBhcmFtZXRlclBvc2l0aW9ucz1wYXJhbWV0ZXJQb3NpdGlvbnM7dGhpcy5fY2FjaGVkSW5kZXg9MDt0aGlzLnJlc3VsdEJ1ZmZlcj1yZXN1bHRCdWZmZXIhPT11bmRlZmluZWQ/cmVzdWx0QnVmZmVyOm5ldyBzYW1wbGVWYWx1ZXMuY29uc3RydWN0b3Ioc2FtcGxlU2l6ZSk7dGhpcy5zYW1wbGVWYWx1ZXM9c2FtcGxlVmFsdWVzO3RoaXMudmFsdWVTaXplPXNhbXBsZVNpemU7dGhpcy5zZXR0aW5ncz1udWxsO3RoaXMuRGVmYXVsdFNldHRpbmdzXz17fTt9ZXZhbHVhdGUodCl7Y29uc3QgcHA9dGhpcy5wYXJhbWV0ZXJQb3NpdGlvbnM7bGV0IGkxPXRoaXMuX2NhY2hlZEluZGV4LHQxPXBwW2kxXSx0MD1wcFtpMS0xXTt2YWxpZGF0ZV9pbnRlcnZhbDp7c2Vlazp7bGV0IHJpZ2h0O2xpbmVhcl9zY2FuOnsvLy0gU2VlIGh0dHA6Ly9qc3BlcmYuY29tL2NvbXBhcmlzb24tdG8tdW5kZWZpbmVkLzMKCS8vLSBzbG93ZXIgY29kZToKCS8vLQoJLy8tIAkJCQlpZiAoIHQgPj0gdDEgfHwgdDEgPT09IHVuZGVmaW5lZCApIHsKCWZvcndhcmRfc2NhbjppZighKHQ8dDEpKXtmb3IobGV0IGdpdmVVcEF0PWkxKzI7Oyl7aWYodDE9PT11bmRlZmluZWQpe2lmKHQ8dDApYnJlYWsgZm9yd2FyZF9zY2FuOy8vIGFmdGVyIGVuZAoJaTE9cHAubGVuZ3RoO3RoaXMuX2NhY2hlZEluZGV4PWkxO3JldHVybiB0aGlzLmFmdGVyRW5kXyhpMS0xLHQsdDApO31pZihpMT09PWdpdmVVcEF0KWJyZWFrOy8vIHRoaXMgbG9vcAoJdDA9dDE7dDE9cHBbKytpMV07aWYodDx0MSl7Ly8gd2UgaGF2ZSBhcnJpdmVkIGF0IHRoZSBzb3VnaHQgaW50ZXJ2YWwKCWJyZWFrIHNlZWs7fX0vLyBwcmVwYXJlIGJpbmFyeSBzZWFyY2ggb24gdGhlIHJpZ2h0IHNpZGUgb2YgdGhlIGluZGV4CglyaWdodD1wcC5sZW5ndGg7YnJlYWsgbGluZWFyX3NjYW47fS8vLSBzbG93ZXIgY29kZToKCS8vLQkJCQkJaWYgKCB0IDwgdDAgfHwgdDAgPT09IHVuZGVmaW5lZCApIHsKCWlmKCEodD49dDApKXsvLyBsb29waW5nPwoJY29uc3QgdDFnbG9iYWw9cHBbMV07aWYodDx0MWdsb2JhbCl7aTE9MjsvLyArIDEsIHVzaW5nIHRoZSBzY2FuIGZvciB0aGUgZGV0YWlscwoJdDA9dDFnbG9iYWw7fS8vIGxpbmVhciByZXZlcnNlIHNjYW4KCWZvcihsZXQgZ2l2ZVVwQXQ9aTEtMjs7KXtpZih0MD09PXVuZGVmaW5lZCl7Ly8gYmVmb3JlIHN0YXJ0Cgl0aGlzLl9jYWNoZWRJbmRleD0wO3JldHVybiB0aGlzLmJlZm9yZVN0YXJ0XygwLHQsdDEpO31pZihpMT09PWdpdmVVcEF0KWJyZWFrOy8vIHRoaXMgbG9vcAoJdDE9dDA7dDA9cHBbLS1pMS0xXTtpZih0Pj10MCl7Ly8gd2UgaGF2ZSBhcnJpdmVkIGF0IHRoZSBzb3VnaHQgaW50ZXJ2YWwKCWJyZWFrIHNlZWs7fX0vLyBwcmVwYXJlIGJpbmFyeSBzZWFyY2ggb24gdGhlIGxlZnQgc2lkZSBvZiB0aGUgaW5kZXgKCXJpZ2h0PWkxO2kxPTA7YnJlYWsgbGluZWFyX3NjYW47fS8vIHRoZSBpbnRlcnZhbCBpcyB2YWxpZAoJYnJlYWsgdmFsaWRhdGVfaW50ZXJ2YWw7fS8vIGxpbmVhciBzY2FuCgkvLyBiaW5hcnkgc2VhcmNoCgl3aGlsZShpMTxyaWdodCl7Y29uc3QgbWlkPWkxK3JpZ2h0Pj4+MTtpZih0PHBwW21pZF0pe3JpZ2h0PW1pZDt9ZWxzZSB7aTE9bWlkKzE7fX10MT1wcFtpMV07dDA9cHBbaTEtMV07Ly8gY2hlY2sgYm91bmRhcnkgY2FzZXMsIGFnYWluCglpZih0MD09PXVuZGVmaW5lZCl7dGhpcy5fY2FjaGVkSW5kZXg9MDtyZXR1cm4gdGhpcy5iZWZvcmVTdGFydF8oMCx0LHQxKTt9aWYodDE9PT11bmRlZmluZWQpe2kxPXBwLmxlbmd0aDt0aGlzLl9jYWNoZWRJbmRleD1pMTtyZXR1cm4gdGhpcy5hZnRlckVuZF8oaTEtMSx0MCx0KTt9fS8vIHNlZWsKCXRoaXMuX2NhY2hlZEluZGV4PWkxO3RoaXMuaW50ZXJ2YWxDaGFuZ2VkXyhpMSx0MCx0MSk7fS8vIHZhbGlkYXRlX2ludGVydmFsCglyZXR1cm4gdGhpcy5pbnRlcnBvbGF0ZV8oaTEsdDAsdCx0MSk7fWdldFNldHRpbmdzXygpe3JldHVybiB0aGlzLnNldHRpbmdzfHx0aGlzLkRlZmF1bHRTZXR0aW5nc187fWNvcHlTYW1wbGVWYWx1ZV8oaW5kZXgpey8vIGNvcGllcyBhIHNhbXBsZSB2YWx1ZSB0byB0aGUgcmVzdWx0IGJ1ZmZlcgoJY29uc3QgcmVzdWx0PXRoaXMucmVzdWx0QnVmZmVyLHZhbHVlcz10aGlzLnNhbXBsZVZhbHVlcyxzdHJpZGU9dGhpcy52YWx1ZVNpemUsb2Zmc2V0PWluZGV4KnN0cmlkZTtmb3IobGV0IGk9MDtpIT09c3RyaWRlOysraSl7cmVzdWx0W2ldPXZhbHVlc1tvZmZzZXQraV07fXJldHVybiByZXN1bHQ7fS8vIFRlbXBsYXRlIG1ldGhvZHMgZm9yIGRlcml2ZWQgY2xhc3NlczoKCWludGVycG9sYXRlXygpe3Rocm93IG5ldyBFcnJvcignY2FsbCB0byBhYnN0cmFjdCBtZXRob2QnKTsvLyBpbXBsZW1lbnRhdGlvbnMgc2hhbGwgcmV0dXJuIHRoaXMucmVzdWx0QnVmZmVyCgl9aW50ZXJ2YWxDaGFuZ2VkXygpey8vIGVtcHR5Cgl9fS8vIEFMSUFTIERFRklOSVRJT05TCglJbnRlcnBvbGFudC5wcm90b3R5cGUuYmVmb3JlU3RhcnRfPUludGVycG9sYW50LnByb3RvdHlwZS5jb3B5U2FtcGxlVmFsdWVfO0ludGVycG9sYW50LnByb3RvdHlwZS5hZnRlckVuZF89SW50ZXJwb2xhbnQucHJvdG90eXBlLmNvcHlTYW1wbGVWYWx1ZV87LyoqCgkgKiBGYXN0IGFuZCBzaW1wbGUgY3ViaWMgc3BsaW5lIGludGVycG9sYW50LgoJICoKCSAqIEl0IHdhcyBkZXJpdmVkIGZyb20gYSBIZXJtaXRpYW4gY29uc3RydWN0aW9uIHNldHRpbmcgdGhlIGZpcnN0IGRlcml2YXRpdmUKCSAqIGF0IGVhY2ggc2FtcGxlIHBvc2l0aW9uIHRvIHRoZSBsaW5lYXIgc2xvcGUgYmV0d2VlbiBuZWlnaGJvcmluZyBwb3NpdGlvbnMKCSAqIG92ZXIgdGhlaXIgcGFyYW1ldGVyIGludGVydmFsLgoJICovY2xhc3MgQ3ViaWNJbnRlcnBvbGFudCBleHRlbmRzIEludGVycG9sYW50e2NvbnN0cnVjdG9yKHBhcmFtZXRlclBvc2l0aW9ucyxzYW1wbGVWYWx1ZXMsc2FtcGxlU2l6ZSxyZXN1bHRCdWZmZXIpe3N1cGVyKHBhcmFtZXRlclBvc2l0aW9ucyxzYW1wbGVWYWx1ZXMsc2FtcGxlU2l6ZSxyZXN1bHRCdWZmZXIpO3RoaXMuX3dlaWdodFByZXY9LTA7dGhpcy5fb2Zmc2V0UHJldj0tMDt0aGlzLl93ZWlnaHROZXh0PS0wO3RoaXMuX29mZnNldE5leHQ9LTA7dGhpcy5EZWZhdWx0U2V0dGluZ3NfPXtlbmRpbmdTdGFydDpaZXJvQ3VydmF0dXJlRW5kaW5nLGVuZGluZ0VuZDpaZXJvQ3VydmF0dXJlRW5kaW5nfTt9aW50ZXJ2YWxDaGFuZ2VkXyhpMSx0MCx0MSl7Y29uc3QgcHA9dGhpcy5wYXJhbWV0ZXJQb3NpdGlvbnM7bGV0IGlQcmV2PWkxLTIsaU5leHQ9aTErMSx0UHJldj1wcFtpUHJldl0sdE5leHQ9cHBbaU5leHRdO2lmKHRQcmV2PT09dW5kZWZpbmVkKXtzd2l0Y2godGhpcy5nZXRTZXR0aW5nc18oKS5lbmRpbmdTdGFydCl7Y2FzZSBaZXJvU2xvcGVFbmRpbmc6Ly8gZicodDApID0gMAoJaVByZXY9aTE7dFByZXY9Mip0MC10MTticmVhaztjYXNlIFdyYXBBcm91bmRFbmRpbmc6Ly8gdXNlIHRoZSBvdGhlciBlbmQgb2YgdGhlIGN1cnZlCglpUHJldj1wcC5sZW5ndGgtMjt0UHJldj10MCtwcFtpUHJldl0tcHBbaVByZXYrMV07YnJlYWs7ZGVmYXVsdDovLyBaZXJvQ3VydmF0dXJlRW5kaW5nCgkvLyBmJycodDApID0gMCBhLmsuYS4gTmF0dXJhbCBTcGxpbmUKCWlQcmV2PWkxO3RQcmV2PXQxO319aWYodE5leHQ9PT11bmRlZmluZWQpe3N3aXRjaCh0aGlzLmdldFNldHRpbmdzXygpLmVuZGluZ0VuZCl7Y2FzZSBaZXJvU2xvcGVFbmRpbmc6Ly8gZicodE4pID0gMAoJaU5leHQ9aTE7dE5leHQ9Mip0MS10MDticmVhaztjYXNlIFdyYXBBcm91bmRFbmRpbmc6Ly8gdXNlIHRoZSBvdGhlciBlbmQgb2YgdGhlIGN1cnZlCglpTmV4dD0xO3ROZXh0PXQxK3BwWzFdLXBwWzBdO2JyZWFrO2RlZmF1bHQ6Ly8gWmVyb0N1cnZhdHVyZUVuZGluZwoJLy8gZicnKHROKSA9IDAsIGEuay5hLiBOYXR1cmFsIFNwbGluZQoJaU5leHQ9aTEtMTt0TmV4dD10MDt9fWNvbnN0IGhhbGZEdD0odDEtdDApKjAuNSxzdHJpZGU9dGhpcy52YWx1ZVNpemU7dGhpcy5fd2VpZ2h0UHJldj1oYWxmRHQvKHQwLXRQcmV2KTt0aGlzLl93ZWlnaHROZXh0PWhhbGZEdC8odE5leHQtdDEpO3RoaXMuX29mZnNldFByZXY9aVByZXYqc3RyaWRlO3RoaXMuX29mZnNldE5leHQ9aU5leHQqc3RyaWRlO31pbnRlcnBvbGF0ZV8oaTEsdDAsdCx0MSl7Y29uc3QgcmVzdWx0PXRoaXMucmVzdWx0QnVmZmVyLHZhbHVlcz10aGlzLnNhbXBsZVZhbHVlcyxzdHJpZGU9dGhpcy52YWx1ZVNpemUsbzE9aTEqc3RyaWRlLG8wPW8xLXN0cmlkZSxvUD10aGlzLl9vZmZzZXRQcmV2LG9OPXRoaXMuX29mZnNldE5leHQsd1A9dGhpcy5fd2VpZ2h0UHJldix3Tj10aGlzLl93ZWlnaHROZXh0LHA9KHQtdDApLyh0MS10MCkscHA9cCpwLHBwcD1wcCpwOy8vIGV2YWx1YXRlIHBvbHlub21pYWxzCgljb25zdCBzUD0td1AqcHBwKzIqd1AqcHAtd1AqcDtjb25zdCBzMD0oMSt3UCkqcHBwKygtMS41LTIqd1ApKnBwKygtMC41K3dQKSpwKzE7Y29uc3QgczE9KC0xLXdOKSpwcHArKDEuNSt3TikqcHArMC41KnA7Y29uc3Qgc049d04qcHBwLXdOKnBwOy8vIGNvbWJpbmUgZGF0YSBsaW5lYXJseQoJZm9yKGxldCBpPTA7aSE9PXN0cmlkZTsrK2kpe3Jlc3VsdFtpXT1zUCp2YWx1ZXNbb1AraV0rczAqdmFsdWVzW28wK2ldK3MxKnZhbHVlc1tvMStpXStzTip2YWx1ZXNbb04raV07fXJldHVybiByZXN1bHQ7fX1jbGFzcyBMaW5lYXJJbnRlcnBvbGFudCBleHRlbmRzIEludGVycG9sYW50e2NvbnN0cnVjdG9yKHBhcmFtZXRlclBvc2l0aW9ucyxzYW1wbGVWYWx1ZXMsc2FtcGxlU2l6ZSxyZXN1bHRCdWZmZXIpe3N1cGVyKHBhcmFtZXRlclBvc2l0aW9ucyxzYW1wbGVWYWx1ZXMsc2FtcGxlU2l6ZSxyZXN1bHRCdWZmZXIpO31pbnRlcnBvbGF0ZV8oaTEsdDAsdCx0MSl7Y29uc3QgcmVzdWx0PXRoaXMucmVzdWx0QnVmZmVyLHZhbHVlcz10aGlzLnNhbXBsZVZhbHVlcyxzdHJpZGU9dGhpcy52YWx1ZVNpemUsb2Zmc2V0MT1pMSpzdHJpZGUsb2Zmc2V0MD1vZmZzZXQxLXN0cmlkZSx3ZWlnaHQxPSh0LXQwKS8odDEtdDApLHdlaWdodDA9MS13ZWlnaHQxO2ZvcihsZXQgaT0wO2khPT1zdHJpZGU7KytpKXtyZXN1bHRbaV09dmFsdWVzW29mZnNldDAraV0qd2VpZ2h0MCt2YWx1ZXNbb2Zmc2V0MStpXSp3ZWlnaHQxO31yZXR1cm4gcmVzdWx0O319LyoqCgkgKgoJICogSW50ZXJwb2xhbnQgdGhhdCBldmFsdWF0ZXMgdG8gdGhlIHNhbXBsZSB2YWx1ZSBhdCB0aGUgcG9zaXRpb24gcHJlY2VlZGluZwoJICogdGhlIHBhcmFtZXRlci4KCSAqL2NsYXNzIERpc2NyZXRlSW50ZXJwb2xhbnQgZXh0ZW5kcyBJbnRlcnBvbGFudHtjb25zdHJ1Y3RvcihwYXJhbWV0ZXJQb3NpdGlvbnMsc2FtcGxlVmFsdWVzLHNhbXBsZVNpemUscmVzdWx0QnVmZmVyKXtzdXBlcihwYXJhbWV0ZXJQb3NpdGlvbnMsc2FtcGxlVmFsdWVzLHNhbXBsZVNpemUscmVzdWx0QnVmZmVyKTt9aW50ZXJwb2xhdGVfKGkxLyosIHQwLCB0LCB0MSAqLyl7cmV0dXJuIHRoaXMuY29weVNhbXBsZVZhbHVlXyhpMS0xKTt9fWNsYXNzIEtleWZyYW1lVHJhY2t7Y29uc3RydWN0b3IobmFtZSx0aW1lcyx2YWx1ZXMsaW50ZXJwb2xhdGlvbil7aWYobmFtZT09PXVuZGVmaW5lZCl0aHJvdyBuZXcgRXJyb3IoJ1RIUkVFLktleWZyYW1lVHJhY2s6IHRyYWNrIG5hbWUgaXMgdW5kZWZpbmVkJyk7aWYodGltZXM9PT11bmRlZmluZWR8fHRpbWVzLmxlbmd0aD09PTApdGhyb3cgbmV3IEVycm9yKCdUSFJFRS5LZXlmcmFtZVRyYWNrOiBubyBrZXlmcmFtZXMgaW4gdHJhY2sgbmFtZWQgJytuYW1lKTt0aGlzLm5hbWU9bmFtZTt0aGlzLnRpbWVzPUFuaW1hdGlvblV0aWxzLmNvbnZlcnRBcnJheSh0aW1lcyx0aGlzLlRpbWVCdWZmZXJUeXBlKTt0aGlzLnZhbHVlcz1BbmltYXRpb25VdGlscy5jb252ZXJ0QXJyYXkodmFsdWVzLHRoaXMuVmFsdWVCdWZmZXJUeXBlKTt0aGlzLnNldEludGVycG9sYXRpb24oaW50ZXJwb2xhdGlvbnx8dGhpcy5EZWZhdWx0SW50ZXJwb2xhdGlvbik7fS8vIFNlcmlhbGl6YXRpb24gKGluIHN0YXRpYyBjb250ZXh0LCBiZWNhdXNlIG9mIGNvbnN0cnVjdG9yIGludm9jYXRpb24KCS8vIGFuZCBhdXRvbWF0aWMgaW52b2NhdGlvbiBvZiAudG9KU09OKToKCXN0YXRpYyB0b0pTT04odHJhY2spe2NvbnN0IHRyYWNrVHlwZT10cmFjay5jb25zdHJ1Y3RvcjtsZXQganNvbjsvLyBkZXJpdmVkIGNsYXNzZXMgY2FuIGRlZmluZSBhIHN0YXRpYyB0b0pTT04gbWV0aG9kCglpZih0cmFja1R5cGUudG9KU09OIT09dGhpcy50b0pTT04pe2pzb249dHJhY2tUeXBlLnRvSlNPTih0cmFjayk7fWVsc2Ugey8vIGJ5IGRlZmF1bHQsIHdlIGFzc3VtZSB0aGUgZGF0YSBjYW4gYmUgc2VyaWFsaXplZCBhcy1pcwoJanNvbj17J25hbWUnOnRyYWNrLm5hbWUsJ3RpbWVzJzpBbmltYXRpb25VdGlscy5jb252ZXJ0QXJyYXkodHJhY2sudGltZXMsQXJyYXkpLCd2YWx1ZXMnOkFuaW1hdGlvblV0aWxzLmNvbnZlcnRBcnJheSh0cmFjay52YWx1ZXMsQXJyYXkpfTtjb25zdCBpbnRlcnBvbGF0aW9uPXRyYWNrLmdldEludGVycG9sYXRpb24oKTtpZihpbnRlcnBvbGF0aW9uIT09dHJhY2suRGVmYXVsdEludGVycG9sYXRpb24pe2pzb24uaW50ZXJwb2xhdGlvbj1pbnRlcnBvbGF0aW9uO319anNvbi50eXBlPXRyYWNrLlZhbHVlVHlwZU5hbWU7Ly8gbWFuZGF0b3J5CglyZXR1cm4ganNvbjt9SW50ZXJwb2xhbnRGYWN0b3J5TWV0aG9kRGlzY3JldGUocmVzdWx0KXtyZXR1cm4gbmV3IERpc2NyZXRlSW50ZXJwb2xhbnQodGhpcy50aW1lcyx0aGlzLnZhbHVlcyx0aGlzLmdldFZhbHVlU2l6ZSgpLHJlc3VsdCk7fUludGVycG9sYW50RmFjdG9yeU1ldGhvZExpbmVhcihyZXN1bHQpe3JldHVybiBuZXcgTGluZWFySW50ZXJwb2xhbnQodGhpcy50aW1lcyx0aGlzLnZhbHVlcyx0aGlzLmdldFZhbHVlU2l6ZSgpLHJlc3VsdCk7fUludGVycG9sYW50RmFjdG9yeU1ldGhvZFNtb290aChyZXN1bHQpe3JldHVybiBuZXcgQ3ViaWNJbnRlcnBvbGFudCh0aGlzLnRpbWVzLHRoaXMudmFsdWVzLHRoaXMuZ2V0VmFsdWVTaXplKCkscmVzdWx0KTt9c2V0SW50ZXJwb2xhdGlvbihpbnRlcnBvbGF0aW9uKXtsZXQgZmFjdG9yeU1ldGhvZDtzd2l0Y2goaW50ZXJwb2xhdGlvbil7Y2FzZSBJbnRlcnBvbGF0ZURpc2NyZXRlOmZhY3RvcnlNZXRob2Q9dGhpcy5JbnRlcnBvbGFudEZhY3RvcnlNZXRob2REaXNjcmV0ZTticmVhaztjYXNlIEludGVycG9sYXRlTGluZWFyOmZhY3RvcnlNZXRob2Q9dGhpcy5JbnRlcnBvbGFudEZhY3RvcnlNZXRob2RMaW5lYXI7YnJlYWs7Y2FzZSBJbnRlcnBvbGF0ZVNtb290aDpmYWN0b3J5TWV0aG9kPXRoaXMuSW50ZXJwb2xhbnRGYWN0b3J5TWV0aG9kU21vb3RoO2JyZWFrO31pZihmYWN0b3J5TWV0aG9kPT09dW5kZWZpbmVkKXtjb25zdCBtZXNzYWdlPSd1bnN1cHBvcnRlZCBpbnRlcnBvbGF0aW9uIGZvciAnK3RoaXMuVmFsdWVUeXBlTmFtZSsnIGtleWZyYW1lIHRyYWNrIG5hbWVkICcrdGhpcy5uYW1lO2lmKHRoaXMuY3JlYXRlSW50ZXJwb2xhbnQ9PT11bmRlZmluZWQpey8vIGZhbGwgYmFjayB0byBkZWZhdWx0LCB1bmxlc3MgdGhlIGRlZmF1bHQgaXRzZWxmIGlzIG1lc3NlZCB1cAoJaWYoaW50ZXJwb2xhdGlvbiE9PXRoaXMuRGVmYXVsdEludGVycG9sYXRpb24pe3RoaXMuc2V0SW50ZXJwb2xhdGlvbih0aGlzLkRlZmF1bHRJbnRlcnBvbGF0aW9uKTt9ZWxzZSB7dGhyb3cgbmV3IEVycm9yKG1lc3NhZ2UpOy8vIGZhdGFsLCBpbiB0aGlzIGNhc2UKCX19Y29uc29sZS53YXJuKCdUSFJFRS5LZXlmcmFtZVRyYWNrOicsbWVzc2FnZSk7cmV0dXJuIHRoaXM7fXRoaXMuY3JlYXRlSW50ZXJwb2xhbnQ9ZmFjdG9yeU1ldGhvZDtyZXR1cm4gdGhpczt9Z2V0SW50ZXJwb2xhdGlvbigpe3N3aXRjaCh0aGlzLmNyZWF0ZUludGVycG9sYW50KXtjYXNlIHRoaXMuSW50ZXJwb2xhbnRGYWN0b3J5TWV0aG9kRGlzY3JldGU6cmV0dXJuIEludGVycG9sYXRlRGlzY3JldGU7Y2FzZSB0aGlzLkludGVycG9sYW50RmFjdG9yeU1ldGhvZExpbmVhcjpyZXR1cm4gSW50ZXJwb2xhdGVMaW5lYXI7Y2FzZSB0aGlzLkludGVycG9sYW50RmFjdG9yeU1ldGhvZFNtb290aDpyZXR1cm4gSW50ZXJwb2xhdGVTbW9vdGg7fX1nZXRWYWx1ZVNpemUoKXtyZXR1cm4gdGhpcy52YWx1ZXMubGVuZ3RoL3RoaXMudGltZXMubGVuZ3RoO30vLyBtb3ZlIGFsbCBrZXlmcmFtZXMgZWl0aGVyIGZvcndhcmRzIG9yIGJhY2t3YXJkcyBpbiB0aW1lCglzaGlmdCh0aW1lT2Zmc2V0KXtpZih0aW1lT2Zmc2V0IT09MC4wKXtjb25zdCB0aW1lcz10aGlzLnRpbWVzO2ZvcihsZXQgaT0wLG49dGltZXMubGVuZ3RoO2khPT1uOysraSl7dGltZXNbaV0rPXRpbWVPZmZzZXQ7fX1yZXR1cm4gdGhpczt9Ly8gc2NhbGUgYWxsIGtleWZyYW1lIHRpbWVzIGJ5IGEgZmFjdG9yICh1c2VmdWwgZm9yIGZyYW1lIDwtPiBzZWNvbmRzIGNvbnZlcnNpb25zKQoJc2NhbGUodGltZVNjYWxlKXtpZih0aW1lU2NhbGUhPT0xLjApe2NvbnN0IHRpbWVzPXRoaXMudGltZXM7Zm9yKGxldCBpPTAsbj10aW1lcy5sZW5ndGg7aSE9PW47KytpKXt0aW1lc1tpXSo9dGltZVNjYWxlO319cmV0dXJuIHRoaXM7fS8vIHJlbW92ZXMga2V5ZnJhbWVzIGJlZm9yZSBhbmQgYWZ0ZXIgYW5pbWF0aW9uIHdpdGhvdXQgY2hhbmdpbmcgYW55IHZhbHVlcyB3aXRoaW4gdGhlIHJhbmdlIFtzdGFydFRpbWUsIGVuZFRpbWVdLgoJLy8gSU1QT1JUQU5UOiBXZSBkbyBub3Qgc2hpZnQgYXJvdW5kIGtleXMgdG8gdGhlIHN0YXJ0IG9mIHRoZSB0cmFjayB0aW1lLCBiZWNhdXNlIGZvciBpbnRlcnBvbGF0ZWQga2V5cyB0aGlzIHdpbGwgY2hhbmdlIHRoZWlyIHZhbHVlcwoJdHJpbShzdGFydFRpbWUsZW5kVGltZSl7Y29uc3QgdGltZXM9dGhpcy50aW1lcyxuS2V5cz10aW1lcy5sZW5ndGg7bGV0IGZyb209MCx0bz1uS2V5cy0xO3doaWxlKGZyb20hPT1uS2V5cyYmdGltZXNbZnJvbV08c3RhcnRUaW1lKXsrK2Zyb207fXdoaWxlKHRvIT09LTEmJnRpbWVzW3RvXT5lbmRUaW1lKXstLXRvO30rK3RvOy8vIGluY2x1c2l2ZSAtPiBleGNsdXNpdmUgYm91bmQKCWlmKGZyb20hPT0wfHx0byE9PW5LZXlzKXsvLyBlbXB0eSB0cmFja3MgYXJlIGZvcmJpZGRlbiwgc28ga2VlcCBhdCBsZWFzdCBvbmUga2V5ZnJhbWUKCWlmKGZyb20+PXRvKXt0bz1NYXRoLm1heCh0bywxKTtmcm9tPXRvLTE7fWNvbnN0IHN0cmlkZT10aGlzLmdldFZhbHVlU2l6ZSgpO3RoaXMudGltZXM9QW5pbWF0aW9uVXRpbHMuYXJyYXlTbGljZSh0aW1lcyxmcm9tLHRvKTt0aGlzLnZhbHVlcz1BbmltYXRpb25VdGlscy5hcnJheVNsaWNlKHRoaXMudmFsdWVzLGZyb20qc3RyaWRlLHRvKnN0cmlkZSk7fXJldHVybiB0aGlzO30vLyBlbnN1cmUgd2UgZG8gbm90IGdldCBhIEdhcmJhZ2VJbkdhcmJhZ2VPdXQgc2l0dWF0aW9uLCBtYWtlIHN1cmUgdHJhY2tzIGFyZSBhdCBsZWFzdCBtaW5pbWFsbHkgdmlhYmxlCgl2YWxpZGF0ZSgpe2xldCB2YWxpZD10cnVlO2NvbnN0IHZhbHVlU2l6ZT10aGlzLmdldFZhbHVlU2l6ZSgpO2lmKHZhbHVlU2l6ZS1NYXRoLmZsb29yKHZhbHVlU2l6ZSkhPT0wKXtjb25zb2xlLmVycm9yKCdUSFJFRS5LZXlmcmFtZVRyYWNrOiBJbnZhbGlkIHZhbHVlIHNpemUgaW4gdHJhY2suJyx0aGlzKTt2YWxpZD1mYWxzZTt9Y29uc3QgdGltZXM9dGhpcy50aW1lcyx2YWx1ZXM9dGhpcy52YWx1ZXMsbktleXM9dGltZXMubGVuZ3RoO2lmKG5LZXlzPT09MCl7Y29uc29sZS5lcnJvcignVEhSRUUuS2V5ZnJhbWVUcmFjazogVHJhY2sgaXMgZW1wdHkuJyx0aGlzKTt2YWxpZD1mYWxzZTt9bGV0IHByZXZUaW1lPW51bGw7Zm9yKGxldCBpPTA7aSE9PW5LZXlzO2krKyl7Y29uc3QgY3VyclRpbWU9dGltZXNbaV07aWYodHlwZW9mIGN1cnJUaW1lPT09J251bWJlcicmJmlzTmFOKGN1cnJUaW1lKSl7Y29uc29sZS5lcnJvcignVEhSRUUuS2V5ZnJhbWVUcmFjazogVGltZSBpcyBub3QgYSB2YWxpZCBudW1iZXIuJyx0aGlzLGksY3VyclRpbWUpO3ZhbGlkPWZhbHNlO2JyZWFrO31pZihwcmV2VGltZSE9PW51bGwmJnByZXZUaW1lPmN1cnJUaW1lKXtjb25zb2xlLmVycm9yKCdUSFJFRS5LZXlmcmFtZVRyYWNrOiBPdXQgb2Ygb3JkZXIga2V5cy4nLHRoaXMsaSxjdXJyVGltZSxwcmV2VGltZSk7dmFsaWQ9ZmFsc2U7YnJlYWs7fXByZXZUaW1lPWN1cnJUaW1lO31pZih2YWx1ZXMhPT11bmRlZmluZWQpe2lmKEFuaW1hdGlvblV0aWxzLmlzVHlwZWRBcnJheSh2YWx1ZXMpKXtmb3IobGV0IGk9MCxuPXZhbHVlcy5sZW5ndGg7aSE9PW47KytpKXtjb25zdCB2YWx1ZT12YWx1ZXNbaV07aWYoaXNOYU4odmFsdWUpKXtjb25zb2xlLmVycm9yKCdUSFJFRS5LZXlmcmFtZVRyYWNrOiBWYWx1ZSBpcyBub3QgYSB2YWxpZCBudW1iZXIuJyx0aGlzLGksdmFsdWUpO3ZhbGlkPWZhbHNlO2JyZWFrO319fX1yZXR1cm4gdmFsaWQ7fS8vIHJlbW92ZXMgZXF1aXZhbGVudCBzZXF1ZW50aWFsIGtleXMgYXMgY29tbW9uIGluIG1vcnBoIHRhcmdldCBzZXF1ZW5jZXMKCS8vICgwLDAsMCwwLDEsMSwxLDAsMCwwLDAsMCwwLDApIC0tPiAoMCwwLDEsMSwwLDApCglvcHRpbWl6ZSgpey8vIHRpbWVzIG9yIHZhbHVlcyBtYXkgYmUgc2hhcmVkIHdpdGggb3RoZXIgdHJhY2tzLCBzbyBvdmVyd3JpdGluZyBpcyB1bnNhZmUKCWNvbnN0IHRpbWVzPUFuaW1hdGlvblV0aWxzLmFycmF5U2xpY2UodGhpcy50aW1lcyksdmFsdWVzPUFuaW1hdGlvblV0aWxzLmFycmF5U2xpY2UodGhpcy52YWx1ZXMpLHN0cmlkZT10aGlzLmdldFZhbHVlU2l6ZSgpLHNtb290aEludGVycG9sYXRpb249dGhpcy5nZXRJbnRlcnBvbGF0aW9uKCk9PT1JbnRlcnBvbGF0ZVNtb290aCxsYXN0SW5kZXg9dGltZXMubGVuZ3RoLTE7bGV0IHdyaXRlSW5kZXg9MTtmb3IobGV0IGk9MTtpPGxhc3RJbmRleDsrK2kpe2xldCBrZWVwPWZhbHNlO2NvbnN0IHRpbWU9dGltZXNbaV07Y29uc3QgdGltZU5leHQ9dGltZXNbaSsxXTsvLyByZW1vdmUgYWRqYWNlbnQga2V5ZnJhbWVzIHNjaGVkdWxlZCBhdCB0aGUgc2FtZSB0aW1lCglpZih0aW1lIT09dGltZU5leHQmJihpIT09MXx8dGltZSE9PXRpbWVzWzBdKSl7aWYoIXNtb290aEludGVycG9sYXRpb24pey8vIHJlbW92ZSB1bm5lY2Vzc2FyeSBrZXlmcmFtZXMgc2FtZSBhcyB0aGVpciBuZWlnaGJvcnMKCWNvbnN0IG9mZnNldD1pKnN0cmlkZSxvZmZzZXRQPW9mZnNldC1zdHJpZGUsb2Zmc2V0Tj1vZmZzZXQrc3RyaWRlO2ZvcihsZXQgaj0wO2ohPT1zdHJpZGU7KytqKXtjb25zdCB2YWx1ZT12YWx1ZXNbb2Zmc2V0K2pdO2lmKHZhbHVlIT09dmFsdWVzW29mZnNldFAral18fHZhbHVlIT09dmFsdWVzW29mZnNldE4ral0pe2tlZXA9dHJ1ZTticmVhazt9fX1lbHNlIHtrZWVwPXRydWU7fX0vLyBpbi1wbGFjZSBjb21wYWN0aW9uCglpZihrZWVwKXtpZihpIT09d3JpdGVJbmRleCl7dGltZXNbd3JpdGVJbmRleF09dGltZXNbaV07Y29uc3QgcmVhZE9mZnNldD1pKnN0cmlkZSx3cml0ZU9mZnNldD13cml0ZUluZGV4KnN0cmlkZTtmb3IobGV0IGo9MDtqIT09c3RyaWRlOysrail7dmFsdWVzW3dyaXRlT2Zmc2V0K2pdPXZhbHVlc1tyZWFkT2Zmc2V0K2pdO319Kyt3cml0ZUluZGV4O319Ly8gZmx1c2ggbGFzdCBrZXlmcmFtZSAoY29tcGFjdGlvbiBsb29rcyBhaGVhZCkKCWlmKGxhc3RJbmRleD4wKXt0aW1lc1t3cml0ZUluZGV4XT10aW1lc1tsYXN0SW5kZXhdO2ZvcihsZXQgcmVhZE9mZnNldD1sYXN0SW5kZXgqc3RyaWRlLHdyaXRlT2Zmc2V0PXdyaXRlSW5kZXgqc3RyaWRlLGo9MDtqIT09c3RyaWRlOysrail7dmFsdWVzW3dyaXRlT2Zmc2V0K2pdPXZhbHVlc1tyZWFkT2Zmc2V0K2pdO30rK3dyaXRlSW5kZXg7fWlmKHdyaXRlSW5kZXghPT10aW1lcy5sZW5ndGgpe3RoaXMudGltZXM9QW5pbWF0aW9uVXRpbHMuYXJyYXlTbGljZSh0aW1lcywwLHdyaXRlSW5kZXgpO3RoaXMudmFsdWVzPUFuaW1hdGlvblV0aWxzLmFycmF5U2xpY2UodmFsdWVzLDAsd3JpdGVJbmRleCpzdHJpZGUpO31lbHNlIHt0aGlzLnRpbWVzPXRpbWVzO3RoaXMudmFsdWVzPXZhbHVlczt9cmV0dXJuIHRoaXM7fWNsb25lKCl7Y29uc3QgdGltZXM9QW5pbWF0aW9uVXRpbHMuYXJyYXlTbGljZSh0aGlzLnRpbWVzLDApO2NvbnN0IHZhbHVlcz1BbmltYXRpb25VdGlscy5hcnJheVNsaWNlKHRoaXMudmFsdWVzLDApO2NvbnN0IFR5cGVkS2V5ZnJhbWVUcmFjaz10aGlzLmNvbnN0cnVjdG9yO2NvbnN0IHRyYWNrPW5ldyBUeXBlZEtleWZyYW1lVHJhY2sodGhpcy5uYW1lLHRpbWVzLHZhbHVlcyk7Ly8gSW50ZXJwb2xhbnQgYXJndW1lbnQgdG8gY29uc3RydWN0b3IgaXMgbm90IHNhdmVkLCBzbyBjb3B5IHRoZSBmYWN0b3J5IG1ldGhvZCBkaXJlY3RseS4KCXRyYWNrLmNyZWF0ZUludGVycG9sYW50PXRoaXMuY3JlYXRlSW50ZXJwb2xhbnQ7cmV0dXJuIHRyYWNrO319S2V5ZnJhbWVUcmFjay5wcm90b3R5cGUuVGltZUJ1ZmZlclR5cGU9RmxvYXQzMkFycmF5O0tleWZyYW1lVHJhY2sucHJvdG90eXBlLlZhbHVlQnVmZmVyVHlwZT1GbG9hdDMyQXJyYXk7S2V5ZnJhbWVUcmFjay5wcm90b3R5cGUuRGVmYXVsdEludGVycG9sYXRpb249SW50ZXJwb2xhdGVMaW5lYXI7LyoqCgkgKiBBIFRyYWNrIG9mIEJvb2xlYW4ga2V5ZnJhbWUgdmFsdWVzLgoJICovY2xhc3MgQm9vbGVhbktleWZyYW1lVHJhY2sgZXh0ZW5kcyBLZXlmcmFtZVRyYWNre31Cb29sZWFuS2V5ZnJhbWVUcmFjay5wcm90b3R5cGUuVmFsdWVUeXBlTmFtZT0nYm9vbCc7Qm9vbGVhbktleWZyYW1lVHJhY2sucHJvdG90eXBlLlZhbHVlQnVmZmVyVHlwZT1BcnJheTtCb29sZWFuS2V5ZnJhbWVUcmFjay5wcm90b3R5cGUuRGVmYXVsdEludGVycG9sYXRpb249SW50ZXJwb2xhdGVEaXNjcmV0ZTtCb29sZWFuS2V5ZnJhbWVUcmFjay5wcm90b3R5cGUuSW50ZXJwb2xhbnRGYWN0b3J5TWV0aG9kTGluZWFyPXVuZGVmaW5lZDtCb29sZWFuS2V5ZnJhbWVUcmFjay5wcm90b3R5cGUuSW50ZXJwb2xhbnRGYWN0b3J5TWV0aG9kU21vb3RoPXVuZGVmaW5lZDsvKioKCSAqIEEgVHJhY2sgb2Yga2V5ZnJhbWUgdmFsdWVzIHRoYXQgcmVwcmVzZW50IGNvbG9yLgoJICovY2xhc3MgQ29sb3JLZXlmcmFtZVRyYWNrIGV4dGVuZHMgS2V5ZnJhbWVUcmFja3t9Q29sb3JLZXlmcmFtZVRyYWNrLnByb3RvdHlwZS5WYWx1ZVR5cGVOYW1lPSdjb2xvcic7LyoqCgkgKiBBIFRyYWNrIG9mIG51bWVyaWMga2V5ZnJhbWUgdmFsdWVzLgoJICovY2xhc3MgTnVtYmVyS2V5ZnJhbWVUcmFjayBleHRlbmRzIEtleWZyYW1lVHJhY2t7fU51bWJlcktleWZyYW1lVHJhY2sucHJvdG90eXBlLlZhbHVlVHlwZU5hbWU9J251bWJlcic7LyoqCgkgKiBTcGhlcmljYWwgbGluZWFyIHVuaXQgcXVhdGVybmlvbiBpbnRlcnBvbGFudC4KCSAqL2NsYXNzIFF1YXRlcm5pb25MaW5lYXJJbnRlcnBvbGFudCBleHRlbmRzIEludGVycG9sYW50e2NvbnN0cnVjdG9yKHBhcmFtZXRlclBvc2l0aW9ucyxzYW1wbGVWYWx1ZXMsc2FtcGxlU2l6ZSxyZXN1bHRCdWZmZXIpe3N1cGVyKHBhcmFtZXRlclBvc2l0aW9ucyxzYW1wbGVWYWx1ZXMsc2FtcGxlU2l6ZSxyZXN1bHRCdWZmZXIpO31pbnRlcnBvbGF0ZV8oaTEsdDAsdCx0MSl7Y29uc3QgcmVzdWx0PXRoaXMucmVzdWx0QnVmZmVyLHZhbHVlcz10aGlzLnNhbXBsZVZhbHVlcyxzdHJpZGU9dGhpcy52YWx1ZVNpemUsYWxwaGE9KHQtdDApLyh0MS10MCk7bGV0IG9mZnNldD1pMSpzdHJpZGU7Zm9yKGxldCBlbmQ9b2Zmc2V0K3N0cmlkZTtvZmZzZXQhPT1lbmQ7b2Zmc2V0Kz00KXtRdWF0ZXJuaW9uLnNsZXJwRmxhdChyZXN1bHQsMCx2YWx1ZXMsb2Zmc2V0LXN0cmlkZSx2YWx1ZXMsb2Zmc2V0LGFscGhhKTt9cmV0dXJuIHJlc3VsdDt9fS8qKgoJICogQSBUcmFjayBvZiBxdWF0ZXJuaW9uIGtleWZyYW1lIHZhbHVlcy4KCSAqL2NsYXNzIFF1YXRlcm5pb25LZXlmcmFtZVRyYWNrIGV4dGVuZHMgS2V5ZnJhbWVUcmFja3tJbnRlcnBvbGFudEZhY3RvcnlNZXRob2RMaW5lYXIocmVzdWx0KXtyZXR1cm4gbmV3IFF1YXRlcm5pb25MaW5lYXJJbnRlcnBvbGFudCh0aGlzLnRpbWVzLHRoaXMudmFsdWVzLHRoaXMuZ2V0VmFsdWVTaXplKCkscmVzdWx0KTt9fVF1YXRlcm5pb25LZXlmcmFtZVRyYWNrLnByb3RvdHlwZS5WYWx1ZVR5cGVOYW1lPSdxdWF0ZXJuaW9uJzsvLyBWYWx1ZUJ1ZmZlclR5cGUgaXMgaW5oZXJpdGVkCglRdWF0ZXJuaW9uS2V5ZnJhbWVUcmFjay5wcm90b3R5cGUuRGVmYXVsdEludGVycG9sYXRpb249SW50ZXJwb2xhdGVMaW5lYXI7UXVhdGVybmlvbktleWZyYW1lVHJhY2sucHJvdG90eXBlLkludGVycG9sYW50RmFjdG9yeU1ldGhvZFNtb290aD11bmRlZmluZWQ7LyoqCgkgKiBBIFRyYWNrIHRoYXQgaW50ZXJwb2xhdGVzIFN0cmluZ3MKCSAqL2NsYXNzIFN0cmluZ0tleWZyYW1lVHJhY2sgZXh0ZW5kcyBLZXlmcmFtZVRyYWNre31TdHJpbmdLZXlmcmFtZVRyYWNrLnByb3RvdHlwZS5WYWx1ZVR5cGVOYW1lPSdzdHJpbmcnO1N0cmluZ0tleWZyYW1lVHJhY2sucHJvdG90eXBlLlZhbHVlQnVmZmVyVHlwZT1BcnJheTtTdHJpbmdLZXlmcmFtZVRyYWNrLnByb3RvdHlwZS5EZWZhdWx0SW50ZXJwb2xhdGlvbj1JbnRlcnBvbGF0ZURpc2NyZXRlO1N0cmluZ0tleWZyYW1lVHJhY2sucHJvdG90eXBlLkludGVycG9sYW50RmFjdG9yeU1ldGhvZExpbmVhcj11bmRlZmluZWQ7U3RyaW5nS2V5ZnJhbWVUcmFjay5wcm90b3R5cGUuSW50ZXJwb2xhbnRGYWN0b3J5TWV0aG9kU21vb3RoPXVuZGVmaW5lZDsvKioKCSAqIEEgVHJhY2sgb2YgdmVjdG9yZWQga2V5ZnJhbWUgdmFsdWVzLgoJICovY2xhc3MgVmVjdG9yS2V5ZnJhbWVUcmFjayBleHRlbmRzIEtleWZyYW1lVHJhY2t7fVZlY3RvcktleWZyYW1lVHJhY2sucHJvdG90eXBlLlZhbHVlVHlwZU5hbWU9J3ZlY3Rvcic7Y2xhc3MgQW5pbWF0aW9uQ2xpcHtjb25zdHJ1Y3RvcihuYW1lLGR1cmF0aW9uLHRyYWNrcyxibGVuZE1vZGUpe2lmKGR1cmF0aW9uPT09dm9pZCAwKXtkdXJhdGlvbj0tMTt9aWYoYmxlbmRNb2RlPT09dm9pZCAwKXtibGVuZE1vZGU9Tm9ybWFsQW5pbWF0aW9uQmxlbmRNb2RlO310aGlzLm5hbWU9bmFtZTt0aGlzLnRyYWNrcz10cmFja3M7dGhpcy5kdXJhdGlvbj1kdXJhdGlvbjt0aGlzLmJsZW5kTW9kZT1ibGVuZE1vZGU7dGhpcy51dWlkPWdlbmVyYXRlVVVJRCgpOy8vIHRoaXMgbWVhbnMgaXQgc2hvdWxkIGZpZ3VyZSBvdXQgaXRzIGR1cmF0aW9uIGJ5IHNjYW5uaW5nIHRoZSB0cmFja3MKCWlmKHRoaXMuZHVyYXRpb248MCl7dGhpcy5yZXNldER1cmF0aW9uKCk7fX1zdGF0aWMgcGFyc2UoanNvbil7Y29uc3QgdHJhY2tzPVtdLGpzb25UcmFja3M9anNvbi50cmFja3MsZnJhbWVUaW1lPTEuMC8oanNvbi5mcHN8fDEuMCk7Zm9yKGxldCBpPTAsbj1qc29uVHJhY2tzLmxlbmd0aDtpIT09bjsrK2kpe3RyYWNrcy5wdXNoKHBhcnNlS2V5ZnJhbWVUcmFjayhqc29uVHJhY2tzW2ldKS5zY2FsZShmcmFtZVRpbWUpKTt9Y29uc3QgY2xpcD1uZXcgdGhpcyhqc29uLm5hbWUsanNvbi5kdXJhdGlvbix0cmFja3MsanNvbi5ibGVuZE1vZGUpO2NsaXAudXVpZD1qc29uLnV1aWQ7cmV0dXJuIGNsaXA7fXN0YXRpYyB0b0pTT04oY2xpcCl7Y29uc3QgdHJhY2tzPVtdLGNsaXBUcmFja3M9Y2xpcC50cmFja3M7Y29uc3QganNvbj17J25hbWUnOmNsaXAubmFtZSwnZHVyYXRpb24nOmNsaXAuZHVyYXRpb24sJ3RyYWNrcyc6dHJhY2tzLCd1dWlkJzpjbGlwLnV1aWQsJ2JsZW5kTW9kZSc6Y2xpcC5ibGVuZE1vZGV9O2ZvcihsZXQgaT0wLG49Y2xpcFRyYWNrcy5sZW5ndGg7aSE9PW47KytpKXt0cmFja3MucHVzaChLZXlmcmFtZVRyYWNrLnRvSlNPTihjbGlwVHJhY2tzW2ldKSk7fXJldHVybiBqc29uO31zdGF0aWMgQ3JlYXRlRnJvbU1vcnBoVGFyZ2V0U2VxdWVuY2UobmFtZSxtb3JwaFRhcmdldFNlcXVlbmNlLGZwcyxub0xvb3Ape2NvbnN0IG51bU1vcnBoVGFyZ2V0cz1tb3JwaFRhcmdldFNlcXVlbmNlLmxlbmd0aDtjb25zdCB0cmFja3M9W107Zm9yKGxldCBpPTA7aTxudW1Nb3JwaFRhcmdldHM7aSsrKXtsZXQgdGltZXM9W107bGV0IHZhbHVlcz1bXTt0aW1lcy5wdXNoKChpK251bU1vcnBoVGFyZ2V0cy0xKSVudW1Nb3JwaFRhcmdldHMsaSwoaSsxKSVudW1Nb3JwaFRhcmdldHMpO3ZhbHVlcy5wdXNoKDAsMSwwKTtjb25zdCBvcmRlcj1BbmltYXRpb25VdGlscy5nZXRLZXlmcmFtZU9yZGVyKHRpbWVzKTt0aW1lcz1BbmltYXRpb25VdGlscy5zb3J0ZWRBcnJheSh0aW1lcywxLG9yZGVyKTt2YWx1ZXM9QW5pbWF0aW9uVXRpbHMuc29ydGVkQXJyYXkodmFsdWVzLDEsb3JkZXIpOy8vIGlmIHRoZXJlIGlzIGEga2V5IGF0IHRoZSBmaXJzdCBmcmFtZSwgZHVwbGljYXRlIGl0IGFzIHRoZQoJLy8gbGFzdCBmcmFtZSBhcyB3ZWxsIGZvciBwZXJmZWN0IGxvb3AuCglpZighbm9Mb29wJiZ0aW1lc1swXT09PTApe3RpbWVzLnB1c2gobnVtTW9ycGhUYXJnZXRzKTt2YWx1ZXMucHVzaCh2YWx1ZXNbMF0pO310cmFja3MucHVzaChuZXcgTnVtYmVyS2V5ZnJhbWVUcmFjaygnLm1vcnBoVGFyZ2V0SW5mbHVlbmNlc1snK21vcnBoVGFyZ2V0U2VxdWVuY2VbaV0ubmFtZSsnXScsdGltZXMsdmFsdWVzKS5zY2FsZSgxLjAvZnBzKSk7fXJldHVybiBuZXcgdGhpcyhuYW1lLC0xLHRyYWNrcyk7fXN0YXRpYyBmaW5kQnlOYW1lKG9iamVjdE9yQ2xpcEFycmF5LG5hbWUpe2xldCBjbGlwQXJyYXk9b2JqZWN0T3JDbGlwQXJyYXk7aWYoIUFycmF5LmlzQXJyYXkob2JqZWN0T3JDbGlwQXJyYXkpKXtjb25zdCBvPW9iamVjdE9yQ2xpcEFycmF5O2NsaXBBcnJheT1vLmdlb21ldHJ5JiZvLmdlb21ldHJ5LmFuaW1hdGlvbnN8fG8uYW5pbWF0aW9uczt9Zm9yKGxldCBpPTA7aTxjbGlwQXJyYXkubGVuZ3RoO2krKyl7aWYoY2xpcEFycmF5W2ldLm5hbWU9PT1uYW1lKXtyZXR1cm4gY2xpcEFycmF5W2ldO319cmV0dXJuIG51bGw7fXN0YXRpYyBDcmVhdGVDbGlwc0Zyb21Nb3JwaFRhcmdldFNlcXVlbmNlcyhtb3JwaFRhcmdldHMsZnBzLG5vTG9vcCl7Y29uc3QgYW5pbWF0aW9uVG9Nb3JwaFRhcmdldHM9e307Ly8gdGVzdGVkIHdpdGggaHR0cHM6Ly9yZWdleDEwMS5jb20vIG9uIHRyaWNrIHNlcXVlbmNlcwoJLy8gc3VjaCBmbGFtaW5nb19mbHlBXzAwMywgZmxhbWluZ29fcnVuMV8wMDMsIGNyZGVhdGgwMDU5Cgljb25zdCBwYXR0ZXJuPS9eKFtcdy1dKj8pKFtcZF0rKSQvOy8vIHNvcnQgbW9ycGggdGFyZ2V0IG5hbWVzIGludG8gYW5pbWF0aW9uIGdyb3VwcyBiYXNlZAoJLy8gcGF0dGVybnMgbGlrZSBXYWxrXzAwMSwgV2Fsa18wMDIsIFJ1bl8wMDEsIFJ1bl8wMDIKCWZvcihsZXQgaT0wLGlsPW1vcnBoVGFyZ2V0cy5sZW5ndGg7aTxpbDtpKyspe2NvbnN0IG1vcnBoVGFyZ2V0PW1vcnBoVGFyZ2V0c1tpXTtjb25zdCBwYXJ0cz1tb3JwaFRhcmdldC5uYW1lLm1hdGNoKHBhdHRlcm4pO2lmKHBhcnRzJiZwYXJ0cy5sZW5ndGg+MSl7Y29uc3QgbmFtZT1wYXJ0c1sxXTtsZXQgYW5pbWF0aW9uTW9ycGhUYXJnZXRzPWFuaW1hdGlvblRvTW9ycGhUYXJnZXRzW25hbWVdO2lmKCFhbmltYXRpb25Nb3JwaFRhcmdldHMpe2FuaW1hdGlvblRvTW9ycGhUYXJnZXRzW25hbWVdPWFuaW1hdGlvbk1vcnBoVGFyZ2V0cz1bXTt9YW5pbWF0aW9uTW9ycGhUYXJnZXRzLnB1c2gobW9ycGhUYXJnZXQpO319Y29uc3QgY2xpcHM9W107Zm9yKGNvbnN0IG5hbWUgaW4gYW5pbWF0aW9uVG9Nb3JwaFRhcmdldHMpe2NsaXBzLnB1c2godGhpcy5DcmVhdGVGcm9tTW9ycGhUYXJnZXRTZXF1ZW5jZShuYW1lLGFuaW1hdGlvblRvTW9ycGhUYXJnZXRzW25hbWVdLGZwcyxub0xvb3ApKTt9cmV0dXJuIGNsaXBzO30vLyBwYXJzZSB0aGUgYW5pbWF0aW9uLmhpZXJhcmNoeSBmb3JtYXQKCXN0YXRpYyBwYXJzZUFuaW1hdGlvbihhbmltYXRpb24sYm9uZXMpe2lmKCFhbmltYXRpb24pe2NvbnNvbGUuZXJyb3IoJ1RIUkVFLkFuaW1hdGlvbkNsaXA6IE5vIGFuaW1hdGlvbiBpbiBKU09OTG9hZGVyIGRhdGEuJyk7cmV0dXJuIG51bGw7fWNvbnN0IGFkZE5vbmVtcHR5VHJhY2s9ZnVuY3Rpb24odHJhY2tUeXBlLHRyYWNrTmFtZSxhbmltYXRpb25LZXlzLHByb3BlcnR5TmFtZSxkZXN0VHJhY2tzKXsvLyBvbmx5IHJldHVybiB0cmFjayBpZiB0aGVyZSBhcmUgYWN0dWFsbHkga2V5cy4KCWlmKGFuaW1hdGlvbktleXMubGVuZ3RoIT09MCl7Y29uc3QgdGltZXM9W107Y29uc3QgdmFsdWVzPVtdO0FuaW1hdGlvblV0aWxzLmZsYXR0ZW5KU09OKGFuaW1hdGlvbktleXMsdGltZXMsdmFsdWVzLHByb3BlcnR5TmFtZSk7Ly8gZW1wdHkga2V5cyBhcmUgZmlsdGVyZWQgb3V0LCBzbyBjaGVjayBhZ2FpbgoJaWYodGltZXMubGVuZ3RoIT09MCl7ZGVzdFRyYWNrcy5wdXNoKG5ldyB0cmFja1R5cGUodHJhY2tOYW1lLHRpbWVzLHZhbHVlcykpO319fTtjb25zdCB0cmFja3M9W107Y29uc3QgY2xpcE5hbWU9YW5pbWF0aW9uLm5hbWV8fCdkZWZhdWx0Jztjb25zdCBmcHM9YW5pbWF0aW9uLmZwc3x8MzA7Y29uc3QgYmxlbmRNb2RlPWFuaW1hdGlvbi5ibGVuZE1vZGU7Ly8gYXV0b21hdGljIGxlbmd0aCBkZXRlcm1pbmF0aW9uIGluIEFuaW1hdGlvbkNsaXAuCglsZXQgZHVyYXRpb249YW5pbWF0aW9uLmxlbmd0aHx8LTE7Y29uc3QgaGllcmFyY2h5VHJhY2tzPWFuaW1hdGlvbi5oaWVyYXJjaHl8fFtdO2ZvcihsZXQgaD0wO2g8aGllcmFyY2h5VHJhY2tzLmxlbmd0aDtoKyspe2NvbnN0IGFuaW1hdGlvbktleXM9aGllcmFyY2h5VHJhY2tzW2hdLmtleXM7Ly8gc2tpcCBlbXB0eSB0cmFja3MKCWlmKCFhbmltYXRpb25LZXlzfHxhbmltYXRpb25LZXlzLmxlbmd0aD09PTApY29udGludWU7Ly8gcHJvY2VzcyBtb3JwaCB0YXJnZXRzCglpZihhbmltYXRpb25LZXlzWzBdLm1vcnBoVGFyZ2V0cyl7Ly8gZmlndXJlIG91dCBhbGwgbW9ycGggdGFyZ2V0cyB1c2VkIGluIHRoaXMgdHJhY2sKCWNvbnN0IG1vcnBoVGFyZ2V0TmFtZXM9e307bGV0IGs7Zm9yKGs9MDtrPGFuaW1hdGlvbktleXMubGVuZ3RoO2srKyl7aWYoYW5pbWF0aW9uS2V5c1trXS5tb3JwaFRhcmdldHMpe2ZvcihsZXQgbT0wO208YW5pbWF0aW9uS2V5c1trXS5tb3JwaFRhcmdldHMubGVuZ3RoO20rKyl7bW9ycGhUYXJnZXROYW1lc1thbmltYXRpb25LZXlzW2tdLm1vcnBoVGFyZ2V0c1ttXV09LTE7fX19Ly8gY3JlYXRlIGEgdHJhY2sgZm9yIGVhY2ggbW9ycGggdGFyZ2V0IHdpdGggYWxsIHplcm8KCS8vIG1vcnBoVGFyZ2V0SW5mbHVlbmNlcyBleGNlcHQgZm9yIHRoZSBrZXlzIGluIHdoaWNoCgkvLyB0aGUgbW9ycGhUYXJnZXQgaXMgbmFtZWQuCglmb3IoY29uc3QgbW9ycGhUYXJnZXROYW1lIGluIG1vcnBoVGFyZ2V0TmFtZXMpe2NvbnN0IHRpbWVzPVtdO2NvbnN0IHZhbHVlcz1bXTtmb3IobGV0IG09MDttIT09YW5pbWF0aW9uS2V5c1trXS5tb3JwaFRhcmdldHMubGVuZ3RoOysrbSl7Y29uc3QgYW5pbWF0aW9uS2V5PWFuaW1hdGlvbktleXNba107dGltZXMucHVzaChhbmltYXRpb25LZXkudGltZSk7dmFsdWVzLnB1c2goYW5pbWF0aW9uS2V5Lm1vcnBoVGFyZ2V0PT09bW9ycGhUYXJnZXROYW1lPzE6MCk7fXRyYWNrcy5wdXNoKG5ldyBOdW1iZXJLZXlmcmFtZVRyYWNrKCcubW9ycGhUYXJnZXRJbmZsdWVuY2VbJyttb3JwaFRhcmdldE5hbWUrJ10nLHRpbWVzLHZhbHVlcykpO31kdXJhdGlvbj1tb3JwaFRhcmdldE5hbWVzLmxlbmd0aCooZnBzfHwxLjApO31lbHNlIHsvLyAuLi5hc3N1bWUgc2tlbGV0YWwgYW5pbWF0aW9uCgljb25zdCBib25lTmFtZT0nLmJvbmVzWycrYm9uZXNbaF0ubmFtZSsnXSc7YWRkTm9uZW1wdHlUcmFjayhWZWN0b3JLZXlmcmFtZVRyYWNrLGJvbmVOYW1lKycucG9zaXRpb24nLGFuaW1hdGlvbktleXMsJ3BvcycsdHJhY2tzKTthZGROb25lbXB0eVRyYWNrKFF1YXRlcm5pb25LZXlmcmFtZVRyYWNrLGJvbmVOYW1lKycucXVhdGVybmlvbicsYW5pbWF0aW9uS2V5cywncm90Jyx0cmFja3MpO2FkZE5vbmVtcHR5VHJhY2soVmVjdG9yS2V5ZnJhbWVUcmFjayxib25lTmFtZSsnLnNjYWxlJyxhbmltYXRpb25LZXlzLCdzY2wnLHRyYWNrcyk7fX1pZih0cmFja3MubGVuZ3RoPT09MCl7cmV0dXJuIG51bGw7fWNvbnN0IGNsaXA9bmV3IHRoaXMoY2xpcE5hbWUsZHVyYXRpb24sdHJhY2tzLGJsZW5kTW9kZSk7cmV0dXJuIGNsaXA7fXJlc2V0RHVyYXRpb24oKXtjb25zdCB0cmFja3M9dGhpcy50cmFja3M7bGV0IGR1cmF0aW9uPTA7Zm9yKGxldCBpPTAsbj10cmFja3MubGVuZ3RoO2khPT1uOysraSl7Y29uc3QgdHJhY2s9dGhpcy50cmFja3NbaV07ZHVyYXRpb249TWF0aC5tYXgoZHVyYXRpb24sdHJhY2sudGltZXNbdHJhY2sudGltZXMubGVuZ3RoLTFdKTt9dGhpcy5kdXJhdGlvbj1kdXJhdGlvbjtyZXR1cm4gdGhpczt9dHJpbSgpe2ZvcihsZXQgaT0wO2k8dGhpcy50cmFja3MubGVuZ3RoO2krKyl7dGhpcy50cmFja3NbaV0udHJpbSgwLHRoaXMuZHVyYXRpb24pO31yZXR1cm4gdGhpczt9dmFsaWRhdGUoKXtsZXQgdmFsaWQ9dHJ1ZTtmb3IobGV0IGk9MDtpPHRoaXMudHJhY2tzLmxlbmd0aDtpKyspe3ZhbGlkPXZhbGlkJiZ0aGlzLnRyYWNrc1tpXS52YWxpZGF0ZSgpO31yZXR1cm4gdmFsaWQ7fW9wdGltaXplKCl7Zm9yKGxldCBpPTA7aTx0aGlzLnRyYWNrcy5sZW5ndGg7aSsrKXt0aGlzLnRyYWNrc1tpXS5vcHRpbWl6ZSgpO31yZXR1cm4gdGhpczt9Y2xvbmUoKXtjb25zdCB0cmFja3M9W107Zm9yKGxldCBpPTA7aTx0aGlzLnRyYWNrcy5sZW5ndGg7aSsrKXt0cmFja3MucHVzaCh0aGlzLnRyYWNrc1tpXS5jbG9uZSgpKTt9cmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMubmFtZSx0aGlzLmR1cmF0aW9uLHRyYWNrcyx0aGlzLmJsZW5kTW9kZSk7fXRvSlNPTigpe3JldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvSlNPTih0aGlzKTt9fWZ1bmN0aW9uIGdldFRyYWNrVHlwZUZvclZhbHVlVHlwZU5hbWUodHlwZU5hbWUpe3N3aXRjaCh0eXBlTmFtZS50b0xvd2VyQ2FzZSgpKXtjYXNlJ3NjYWxhcic6Y2FzZSdkb3VibGUnOmNhc2UnZmxvYXQnOmNhc2UnbnVtYmVyJzpjYXNlJ2ludGVnZXInOnJldHVybiBOdW1iZXJLZXlmcmFtZVRyYWNrO2Nhc2UndmVjdG9yJzpjYXNlJ3ZlY3RvcjInOmNhc2UndmVjdG9yMyc6Y2FzZSd2ZWN0b3I0JzpyZXR1cm4gVmVjdG9yS2V5ZnJhbWVUcmFjaztjYXNlJ2NvbG9yJzpyZXR1cm4gQ29sb3JLZXlmcmFtZVRyYWNrO2Nhc2UncXVhdGVybmlvbic6cmV0dXJuIFF1YXRlcm5pb25LZXlmcmFtZVRyYWNrO2Nhc2UnYm9vbCc6Y2FzZSdib29sZWFuJzpyZXR1cm4gQm9vbGVhbktleWZyYW1lVHJhY2s7Y2FzZSdzdHJpbmcnOnJldHVybiBTdHJpbmdLZXlmcmFtZVRyYWNrO310aHJvdyBuZXcgRXJyb3IoJ1RIUkVFLktleWZyYW1lVHJhY2s6IFVuc3VwcG9ydGVkIHR5cGVOYW1lOiAnK3R5cGVOYW1lKTt9ZnVuY3Rpb24gcGFyc2VLZXlmcmFtZVRyYWNrKGpzb24pe2lmKGpzb24udHlwZT09PXVuZGVmaW5lZCl7dGhyb3cgbmV3IEVycm9yKCdUSFJFRS5LZXlmcmFtZVRyYWNrOiB0cmFjayB0eXBlIHVuZGVmaW5lZCwgY2FuIG5vdCBwYXJzZScpO31jb25zdCB0cmFja1R5cGU9Z2V0VHJhY2tUeXBlRm9yVmFsdWVUeXBlTmFtZShqc29uLnR5cGUpO2lmKGpzb24udGltZXM9PT11bmRlZmluZWQpe2NvbnN0IHRpbWVzPVtdLHZhbHVlcz1bXTtBbmltYXRpb25VdGlscy5mbGF0dGVuSlNPTihqc29uLmtleXMsdGltZXMsdmFsdWVzLCd2YWx1ZScpO2pzb24udGltZXM9dGltZXM7anNvbi52YWx1ZXM9dmFsdWVzO30vLyBkZXJpdmVkIGNsYXNzZXMgY2FuIGRlZmluZSBhIHN0YXRpYyBwYXJzZSBtZXRob2QKCWlmKHRyYWNrVHlwZS5wYXJzZSE9PXVuZGVmaW5lZCl7cmV0dXJuIHRyYWNrVHlwZS5wYXJzZShqc29uKTt9ZWxzZSB7Ly8gYnkgZGVmYXVsdCwgd2UgYXNzdW1lIGEgY29uc3RydWN0b3IgY29tcGF0aWJsZSB3aXRoIHRoZSBiYXNlCglyZXR1cm4gbmV3IHRyYWNrVHlwZShqc29uLm5hbWUsanNvbi50aW1lcyxqc29uLnZhbHVlcyxqc29uLmludGVycG9sYXRpb24pO319Y29uc3QgQ2FjaGU9e2VuYWJsZWQ6ZmFsc2UsZmlsZXM6e30sYWRkOmZ1bmN0aW9uKGtleSxmaWxlKXtpZih0aGlzLmVuYWJsZWQ9PT1mYWxzZSlyZXR1cm47Ly8gY29uc29sZS5sb2coICdUSFJFRS5DYWNoZScsICdBZGRpbmcga2V5OicsIGtleSApOwoJdGhpcy5maWxlc1trZXldPWZpbGU7fSxnZXQ6ZnVuY3Rpb24oa2V5KXtpZih0aGlzLmVuYWJsZWQ9PT1mYWxzZSlyZXR1cm47Ly8gY29uc29sZS5sb2coICdUSFJFRS5DYWNoZScsICdDaGVja2luZyBrZXk6Jywga2V5ICk7CglyZXR1cm4gdGhpcy5maWxlc1trZXldO30scmVtb3ZlOmZ1bmN0aW9uKGtleSl7ZGVsZXRlIHRoaXMuZmlsZXNba2V5XTt9LGNsZWFyOmZ1bmN0aW9uKCl7dGhpcy5maWxlcz17fTt9fTtjbGFzcyBMb2FkaW5nTWFuYWdlcntjb25zdHJ1Y3RvcihvbkxvYWQsb25Qcm9ncmVzcyxvbkVycm9yKXtjb25zdCBzY29wZT10aGlzO2xldCBpc0xvYWRpbmc9ZmFsc2U7bGV0IGl0ZW1zTG9hZGVkPTA7bGV0IGl0ZW1zVG90YWw9MDtsZXQgdXJsTW9kaWZpZXI9dW5kZWZpbmVkO2NvbnN0IGhhbmRsZXJzPVtdOy8vIFJlZmVyIHRvICM1Njg5IGZvciB0aGUgcmVhc29uIHdoeSB3ZSBkb24ndCBzZXQgLm9uU3RhcnQKCS8vIGluIHRoZSBjb25zdHJ1Y3RvcgoJdGhpcy5vblN0YXJ0PXVuZGVmaW5lZDt0aGlzLm9uTG9hZD1vbkxvYWQ7dGhpcy5vblByb2dyZXNzPW9uUHJvZ3Jlc3M7dGhpcy5vbkVycm9yPW9uRXJyb3I7dGhpcy5pdGVtU3RhcnQ9ZnVuY3Rpb24odXJsKXtpdGVtc1RvdGFsKys7aWYoaXNMb2FkaW5nPT09ZmFsc2Upe2lmKHNjb3BlLm9uU3RhcnQhPT11bmRlZmluZWQpe3Njb3BlLm9uU3RhcnQodXJsLGl0ZW1zTG9hZGVkLGl0ZW1zVG90YWwpO319aXNMb2FkaW5nPXRydWU7fTt0aGlzLml0ZW1FbmQ9ZnVuY3Rpb24odXJsKXtpdGVtc0xvYWRlZCsrO2lmKHNjb3BlLm9uUHJvZ3Jlc3MhPT11bmRlZmluZWQpe3Njb3BlLm9uUHJvZ3Jlc3ModXJsLGl0ZW1zTG9hZGVkLGl0ZW1zVG90YWwpO31pZihpdGVtc0xvYWRlZD09PWl0ZW1zVG90YWwpe2lzTG9hZGluZz1mYWxzZTtpZihzY29wZS5vbkxvYWQhPT11bmRlZmluZWQpe3Njb3BlLm9uTG9hZCgpO319fTt0aGlzLml0ZW1FcnJvcj1mdW5jdGlvbih1cmwpe2lmKHNjb3BlLm9uRXJyb3IhPT11bmRlZmluZWQpe3Njb3BlLm9uRXJyb3IodXJsKTt9fTt0aGlzLnJlc29sdmVVUkw9ZnVuY3Rpb24odXJsKXtpZih1cmxNb2RpZmllcil7cmV0dXJuIHVybE1vZGlmaWVyKHVybCk7fXJldHVybiB1cmw7fTt0aGlzLnNldFVSTE1vZGlmaWVyPWZ1bmN0aW9uKHRyYW5zZm9ybSl7dXJsTW9kaWZpZXI9dHJhbnNmb3JtO3JldHVybiB0aGlzO307dGhpcy5hZGRIYW5kbGVyPWZ1bmN0aW9uKHJlZ2V4LGxvYWRlcil7aGFuZGxlcnMucHVzaChyZWdleCxsb2FkZXIpO3JldHVybiB0aGlzO307dGhpcy5yZW1vdmVIYW5kbGVyPWZ1bmN0aW9uKHJlZ2V4KXtjb25zdCBpbmRleD1oYW5kbGVycy5pbmRleE9mKHJlZ2V4KTtpZihpbmRleCE9PS0xKXtoYW5kbGVycy5zcGxpY2UoaW5kZXgsMik7fXJldHVybiB0aGlzO307dGhpcy5nZXRIYW5kbGVyPWZ1bmN0aW9uKGZpbGUpe2ZvcihsZXQgaT0wLGw9aGFuZGxlcnMubGVuZ3RoO2k8bDtpKz0yKXtjb25zdCByZWdleD1oYW5kbGVyc1tpXTtjb25zdCBsb2FkZXI9aGFuZGxlcnNbaSsxXTtpZihyZWdleC5nbG9iYWwpcmVnZXgubGFzdEluZGV4PTA7Ly8gc2VlICMxNzkyMAoJaWYocmVnZXgudGVzdChmaWxlKSl7cmV0dXJuIGxvYWRlcjt9fXJldHVybiBudWxsO307fX1jb25zdCBEZWZhdWx0TG9hZGluZ01hbmFnZXI9bmV3IExvYWRpbmdNYW5hZ2VyKCk7Y2xhc3MgTG9hZGVye2NvbnN0cnVjdG9yKG1hbmFnZXIpe3RoaXMubWFuYWdlcj1tYW5hZ2VyIT09dW5kZWZpbmVkP21hbmFnZXI6RGVmYXVsdExvYWRpbmdNYW5hZ2VyO3RoaXMuY3Jvc3NPcmlnaW49J2Fub255bW91cyc7dGhpcy53aXRoQ3JlZGVudGlhbHM9ZmFsc2U7dGhpcy5wYXRoPScnO3RoaXMucmVzb3VyY2VQYXRoPScnO3RoaXMucmVxdWVzdEhlYWRlcj17fTt9bG9hZCgpe31sb2FkQXN5bmModXJsLG9uUHJvZ3Jlc3Mpe2NvbnN0IHNjb3BlPXRoaXM7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUscmVqZWN0KXtzY29wZS5sb2FkKHVybCxyZXNvbHZlLG9uUHJvZ3Jlc3MscmVqZWN0KTt9KTt9cGFyc2UoKXt9c2V0Q3Jvc3NPcmlnaW4oY3Jvc3NPcmlnaW4pe3RoaXMuY3Jvc3NPcmlnaW49Y3Jvc3NPcmlnaW47cmV0dXJuIHRoaXM7fXNldFdpdGhDcmVkZW50aWFscyh2YWx1ZSl7dGhpcy53aXRoQ3JlZGVudGlhbHM9dmFsdWU7cmV0dXJuIHRoaXM7fXNldFBhdGgocGF0aCl7dGhpcy5wYXRoPXBhdGg7cmV0dXJuIHRoaXM7fXNldFJlc291cmNlUGF0aChyZXNvdXJjZVBhdGgpe3RoaXMucmVzb3VyY2VQYXRoPXJlc291cmNlUGF0aDtyZXR1cm4gdGhpczt9c2V0UmVxdWVzdEhlYWRlcihyZXF1ZXN0SGVhZGVyKXt0aGlzLnJlcXVlc3RIZWFkZXI9cmVxdWVzdEhlYWRlcjtyZXR1cm4gdGhpczt9fWNvbnN0IGxvYWRpbmc9e307Y2xhc3MgRmlsZUxvYWRlciBleHRlbmRzIExvYWRlcntjb25zdHJ1Y3RvcihtYW5hZ2VyKXtzdXBlcihtYW5hZ2VyKTt9bG9hZCh1cmwsb25Mb2FkLG9uUHJvZ3Jlc3Msb25FcnJvcil7aWYodXJsPT09dW5kZWZpbmVkKXVybD0nJztpZih0aGlzLnBhdGghPT11bmRlZmluZWQpdXJsPXRoaXMucGF0aCt1cmw7dXJsPXRoaXMubWFuYWdlci5yZXNvbHZlVVJMKHVybCk7Y29uc3QgY2FjaGVkPUNhY2hlLmdldCh1cmwpO2lmKGNhY2hlZCE9PXVuZGVmaW5lZCl7dGhpcy5tYW5hZ2VyLml0ZW1TdGFydCh1cmwpO3NldFRpbWVvdXQoKCk9PntpZihvbkxvYWQpb25Mb2FkKGNhY2hlZCk7dGhpcy5tYW5hZ2VyLml0ZW1FbmQodXJsKTt9LDApO3JldHVybiBjYWNoZWQ7fS8vIENoZWNrIGlmIHJlcXVlc3QgaXMgZHVwbGljYXRlCglpZihsb2FkaW5nW3VybF0hPT11bmRlZmluZWQpe2xvYWRpbmdbdXJsXS5wdXNoKHtvbkxvYWQ6b25Mb2FkLG9uUHJvZ3Jlc3M6b25Qcm9ncmVzcyxvbkVycm9yOm9uRXJyb3J9KTtyZXR1cm47fS8vIEluaXRpYWxpc2UgYXJyYXkgZm9yIGR1cGxpY2F0ZSByZXF1ZXN0cwoJbG9hZGluZ1t1cmxdPVtdO2xvYWRpbmdbdXJsXS5wdXNoKHtvbkxvYWQ6b25Mb2FkLG9uUHJvZ3Jlc3M6b25Qcm9ncmVzcyxvbkVycm9yOm9uRXJyb3J9KTsvLyBjcmVhdGUgcmVxdWVzdAoJY29uc3QgcmVxPW5ldyBSZXF1ZXN0KHVybCx7aGVhZGVyczpuZXcgSGVhZGVycyh0aGlzLnJlcXVlc3RIZWFkZXIpLGNyZWRlbnRpYWxzOnRoaXMud2l0aENyZWRlbnRpYWxzPydpbmNsdWRlJzonc2FtZS1vcmlnaW4nLy8gQW4gYWJvcnQgY29udHJvbGxlciBjb3VsZCBiZSBhZGRlZCB3aXRoaW4gYSBmdXR1cmUgUFIKCX0pOy8vIHN0YXJ0IHRoZSBmZXRjaAoJZmV0Y2gocmVxKS50aGVuKHJlc3BvbnNlPT57aWYocmVzcG9uc2Uuc3RhdHVzPT09MjAwfHxyZXNwb25zZS5zdGF0dXM9PT0wKXsvLyBTb21lIGJyb3dzZXJzIHJldHVybiBIVFRQIFN0YXR1cyAwIHdoZW4gdXNpbmcgbm9uLWh0dHAgcHJvdG9jb2wKCS8vIGUuZy4gJ2ZpbGU6Ly8nIG9yICdkYXRhOi8vJy4gSGFuZGxlIGFzIHN1Y2Nlc3MuCglpZihyZXNwb25zZS5zdGF0dXM9PT0wKXtjb25zb2xlLndhcm4oJ1RIUkVFLkZpbGVMb2FkZXI6IEhUVFAgU3RhdHVzIDAgcmVjZWl2ZWQuJyk7fWNvbnN0IGNhbGxiYWNrcz1sb2FkaW5nW3VybF07Y29uc3QgcmVhZGVyPXJlc3BvbnNlLmJvZHkuZ2V0UmVhZGVyKCk7Y29uc3QgY29udGVudExlbmd0aD1yZXNwb25zZS5oZWFkZXJzLmdldCgnQ29udGVudC1MZW5ndGgnKTtjb25zdCB0b3RhbD1jb250ZW50TGVuZ3RoP3BhcnNlSW50KGNvbnRlbnRMZW5ndGgpOjA7Y29uc3QgbGVuZ3RoQ29tcHV0YWJsZT10b3RhbCE9PTA7bGV0IGxvYWRlZD0wOy8vIHBlcmlvZGljYWxseSByZWFkIGRhdGEgaW50byB0aGUgbmV3IHN0cmVhbSB0cmFja2luZyB3aGlsZSBkb3dubG9hZCBwcm9ncmVzcwoJcmV0dXJuIG5ldyBSZWFkYWJsZVN0cmVhbSh7c3RhcnQoY29udHJvbGxlcil7cmVhZERhdGEoKTtmdW5jdGlvbiByZWFkRGF0YSgpe3JlYWRlci5yZWFkKCkudGhlbihfcmVmPT57bGV0e2RvbmUsdmFsdWV9PV9yZWY7aWYoZG9uZSl7Y29udHJvbGxlci5jbG9zZSgpO31lbHNlIHtsb2FkZWQrPXZhbHVlLmJ5dGVMZW5ndGg7Y29uc3QgZXZlbnQ9bmV3IFByb2dyZXNzRXZlbnQoJ3Byb2dyZXNzJyx7bGVuZ3RoQ29tcHV0YWJsZSxsb2FkZWQsdG90YWx9KTtmb3IobGV0IGk9MCxpbD1jYWxsYmFja3MubGVuZ3RoO2k8aWw7aSsrKXtjb25zdCBjYWxsYmFjaz1jYWxsYmFja3NbaV07aWYoY2FsbGJhY2sub25Qcm9ncmVzcyljYWxsYmFjay5vblByb2dyZXNzKGV2ZW50KTt9Y29udHJvbGxlci5lbnF1ZXVlKHZhbHVlKTtyZWFkRGF0YSgpO319KTt9fX0pO31lbHNlIHt0aHJvdyBFcnJvcihgZmV0Y2ggZm9yICIke3Jlc3BvbnNlLnVybH0iIHJlc3BvbmRlZCB3aXRoICR7cmVzcG9uc2Uuc3RhdHVzfTogJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApO319KS50aGVuKHN0cmVhbT0+e2NvbnN0IHJlc3BvbnNlPW5ldyBSZXNwb25zZShzdHJlYW0pO3N3aXRjaCh0aGlzLnJlc3BvbnNlVHlwZSl7Y2FzZSdhcnJheWJ1ZmZlcic6cmV0dXJuIHJlc3BvbnNlLmFycmF5QnVmZmVyKCk7Y2FzZSdibG9iJzpyZXR1cm4gcmVzcG9uc2UuYmxvYigpO2Nhc2UnZG9jdW1lbnQnOnJldHVybiByZXNwb25zZS50ZXh0KCkudGhlbih0ZXh0PT57Y29uc3QgcGFyc2VyPW5ldyBET01QYXJzZXIoKTtyZXR1cm4gcGFyc2VyLnBhcnNlRnJvbVN0cmluZyh0ZXh0LHRoaXMubWltZVR5cGUpO30pO2Nhc2UnanNvbic6cmV0dXJuIHJlc3BvbnNlLmpzb24oKTtkZWZhdWx0OnJldHVybiByZXNwb25zZS50ZXh0KCk7fX0pLnRoZW4oZGF0YT0+ey8vIEFkZCB0byBjYWNoZSBvbmx5IG9uIEhUVFAgc3VjY2Vzcywgc28gdGhhdCB3ZSBkbyBub3QgY2FjaGUKCS8vIGVycm9yIHJlc3BvbnNlIGJvZGllcyBhcyBwcm9wZXIgcmVzcG9uc2VzIHRvIHJlcXVlc3RzLgoJQ2FjaGUuYWRkKHVybCxkYXRhKTtjb25zdCBjYWxsYmFja3M9bG9hZGluZ1t1cmxdO2RlbGV0ZSBsb2FkaW5nW3VybF07Zm9yKGxldCBpPTAsaWw9Y2FsbGJhY2tzLmxlbmd0aDtpPGlsO2krKyl7Y29uc3QgY2FsbGJhY2s9Y2FsbGJhY2tzW2ldO2lmKGNhbGxiYWNrLm9uTG9hZCljYWxsYmFjay5vbkxvYWQoZGF0YSk7fXRoaXMubWFuYWdlci5pdGVtRW5kKHVybCk7fSkuY2F0Y2goZXJyPT57Ly8gQWJvcnQgZXJyb3JzIGFuZCBvdGhlciBlcnJvcnMgYXJlIGhhbmRsZWQgdGhlIHNhbWUKCWNvbnN0IGNhbGxiYWNrcz1sb2FkaW5nW3VybF07ZGVsZXRlIGxvYWRpbmdbdXJsXTtmb3IobGV0IGk9MCxpbD1jYWxsYmFja3MubGVuZ3RoO2k8aWw7aSsrKXtjb25zdCBjYWxsYmFjaz1jYWxsYmFja3NbaV07aWYoY2FsbGJhY2sub25FcnJvciljYWxsYmFjay5vbkVycm9yKGVycik7fXRoaXMubWFuYWdlci5pdGVtRXJyb3IodXJsKTt0aGlzLm1hbmFnZXIuaXRlbUVuZCh1cmwpO30pO3RoaXMubWFuYWdlci5pdGVtU3RhcnQodXJsKTt9c2V0UmVzcG9uc2VUeXBlKHZhbHVlKXt0aGlzLnJlc3BvbnNlVHlwZT12YWx1ZTtyZXR1cm4gdGhpczt9c2V0TWltZVR5cGUodmFsdWUpe3RoaXMubWltZVR5cGU9dmFsdWU7cmV0dXJuIHRoaXM7fX1jbGFzcyBJbWFnZUxvYWRlciBleHRlbmRzIExvYWRlcntjb25zdHJ1Y3RvcihtYW5hZ2VyKXtzdXBlcihtYW5hZ2VyKTt9bG9hZCh1cmwsb25Mb2FkLG9uUHJvZ3Jlc3Msb25FcnJvcil7aWYodGhpcy5wYXRoIT09dW5kZWZpbmVkKXVybD10aGlzLnBhdGgrdXJsO3VybD10aGlzLm1hbmFnZXIucmVzb2x2ZVVSTCh1cmwpO2NvbnN0IHNjb3BlPXRoaXM7Y29uc3QgY2FjaGVkPUNhY2hlLmdldCh1cmwpO2lmKGNhY2hlZCE9PXVuZGVmaW5lZCl7c2NvcGUubWFuYWdlci5pdGVtU3RhcnQodXJsKTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aWYob25Mb2FkKW9uTG9hZChjYWNoZWQpO3Njb3BlLm1hbmFnZXIuaXRlbUVuZCh1cmwpO30sMCk7cmV0dXJuIGNhY2hlZDt9Y29uc3QgaW1hZ2U9Y3JlYXRlRWxlbWVudE5TKCdpbWcnKTtmdW5jdGlvbiBvbkltYWdlTG9hZCgpe3JlbW92ZUV2ZW50TGlzdGVuZXJzKCk7Q2FjaGUuYWRkKHVybCx0aGlzKTtpZihvbkxvYWQpb25Mb2FkKHRoaXMpO3Njb3BlLm1hbmFnZXIuaXRlbUVuZCh1cmwpO31mdW5jdGlvbiBvbkltYWdlRXJyb3IoZXZlbnQpe3JlbW92ZUV2ZW50TGlzdGVuZXJzKCk7aWYob25FcnJvcilvbkVycm9yKGV2ZW50KTtzY29wZS5tYW5hZ2VyLml0ZW1FcnJvcih1cmwpO3Njb3BlLm1hbmFnZXIuaXRlbUVuZCh1cmwpO31mdW5jdGlvbiByZW1vdmVFdmVudExpc3RlbmVycygpe2ltYWdlLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2xvYWQnLG9uSW1hZ2VMb2FkLGZhbHNlKTtpbWFnZS5yZW1vdmVFdmVudExpc3RlbmVyKCdlcnJvcicsb25JbWFnZUVycm9yLGZhbHNlKTt9aW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsb25JbWFnZUxvYWQsZmFsc2UpO2ltYWdlLmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJyxvbkltYWdlRXJyb3IsZmFsc2UpO2lmKHVybC5zdWJzdHIoMCw1KSE9PSdkYXRhOicpe2lmKHRoaXMuY3Jvc3NPcmlnaW4hPT11bmRlZmluZWQpaW1hZ2UuY3Jvc3NPcmlnaW49dGhpcy5jcm9zc09yaWdpbjt9c2NvcGUubWFuYWdlci5pdGVtU3RhcnQodXJsKTtpbWFnZS5zcmM9dXJsO3JldHVybiBpbWFnZTt9fWNsYXNzIEN1YmVUZXh0dXJlTG9hZGVyIGV4dGVuZHMgTG9hZGVye2NvbnN0cnVjdG9yKG1hbmFnZXIpe3N1cGVyKG1hbmFnZXIpO31sb2FkKHVybHMsb25Mb2FkLG9uUHJvZ3Jlc3Msb25FcnJvcil7Y29uc3QgdGV4dHVyZT1uZXcgQ3ViZVRleHR1cmUoKTtjb25zdCBsb2FkZXI9bmV3IEltYWdlTG9hZGVyKHRoaXMubWFuYWdlcik7bG9hZGVyLnNldENyb3NzT3JpZ2luKHRoaXMuY3Jvc3NPcmlnaW4pO2xvYWRlci5zZXRQYXRoKHRoaXMucGF0aCk7bGV0IGxvYWRlZD0wO2Z1bmN0aW9uIGxvYWRUZXh0dXJlKGkpe2xvYWRlci5sb2FkKHVybHNbaV0sZnVuY3Rpb24oaW1hZ2Upe3RleHR1cmUuaW1hZ2VzW2ldPWltYWdlO2xvYWRlZCsrO2lmKGxvYWRlZD09PTYpe3RleHR1cmUubmVlZHNVcGRhdGU9dHJ1ZTtpZihvbkxvYWQpb25Mb2FkKHRleHR1cmUpO319LHVuZGVmaW5lZCxvbkVycm9yKTt9Zm9yKGxldCBpPTA7aTx1cmxzLmxlbmd0aDsrK2kpe2xvYWRUZXh0dXJlKGkpO31yZXR1cm4gdGV4dHVyZTt9fWNsYXNzIFRleHR1cmVMb2FkZXIgZXh0ZW5kcyBMb2FkZXJ7Y29uc3RydWN0b3IobWFuYWdlcil7c3VwZXIobWFuYWdlcik7fWxvYWQodXJsLG9uTG9hZCxvblByb2dyZXNzLG9uRXJyb3Ipe2NvbnN0IHRleHR1cmU9bmV3IFRleHR1cmUoKTtjb25zdCBsb2FkZXI9bmV3IEltYWdlTG9hZGVyKHRoaXMubWFuYWdlcik7bG9hZGVyLnNldENyb3NzT3JpZ2luKHRoaXMuY3Jvc3NPcmlnaW4pO2xvYWRlci5zZXRQYXRoKHRoaXMucGF0aCk7bG9hZGVyLmxvYWQodXJsLGZ1bmN0aW9uKGltYWdlKXt0ZXh0dXJlLmltYWdlPWltYWdlO3RleHR1cmUubmVlZHNVcGRhdGU9dHJ1ZTtpZihvbkxvYWQhPT11bmRlZmluZWQpe29uTG9hZCh0ZXh0dXJlKTt9fSxvblByb2dyZXNzLG9uRXJyb3IpO3JldHVybiB0ZXh0dXJlO319Y2xhc3MgTGlnaHQgZXh0ZW5kcyBPYmplY3QzRHtjb25zdHJ1Y3Rvcihjb2xvcixpbnRlbnNpdHkpe2lmKGludGVuc2l0eT09PXZvaWQgMCl7aW50ZW5zaXR5PTE7fXN1cGVyKCk7dGhpcy50eXBlPSdMaWdodCc7dGhpcy5jb2xvcj1uZXcgQ29sb3IoY29sb3IpO3RoaXMuaW50ZW5zaXR5PWludGVuc2l0eTt9ZGlzcG9zZSgpey8vIEVtcHR5IGhlcmUgaW4gYmFzZSBjbGFzczsgc29tZSBzdWJjbGFzc2VzIG92ZXJyaWRlLgoJfWNvcHkoc291cmNlKXtzdXBlci5jb3B5KHNvdXJjZSk7dGhpcy5jb2xvci5jb3B5KHNvdXJjZS5jb2xvcik7dGhpcy5pbnRlbnNpdHk9c291cmNlLmludGVuc2l0eTtyZXR1cm4gdGhpczt9dG9KU09OKG1ldGEpe2NvbnN0IGRhdGE9c3VwZXIudG9KU09OKG1ldGEpO2RhdGEub2JqZWN0LmNvbG9yPXRoaXMuY29sb3IuZ2V0SGV4KCk7ZGF0YS5vYmplY3QuaW50ZW5zaXR5PXRoaXMuaW50ZW5zaXR5O2lmKHRoaXMuZ3JvdW5kQ29sb3IhPT11bmRlZmluZWQpZGF0YS5vYmplY3QuZ3JvdW5kQ29sb3I9dGhpcy5ncm91bmRDb2xvci5nZXRIZXgoKTtpZih0aGlzLmRpc3RhbmNlIT09dW5kZWZpbmVkKWRhdGEub2JqZWN0LmRpc3RhbmNlPXRoaXMuZGlzdGFuY2U7aWYodGhpcy5hbmdsZSE9PXVuZGVmaW5lZClkYXRhLm9iamVjdC5hbmdsZT10aGlzLmFuZ2xlO2lmKHRoaXMuZGVjYXkhPT11bmRlZmluZWQpZGF0YS5vYmplY3QuZGVjYXk9dGhpcy5kZWNheTtpZih0aGlzLnBlbnVtYnJhIT09dW5kZWZpbmVkKWRhdGEub2JqZWN0LnBlbnVtYnJhPXRoaXMucGVudW1icmE7aWYodGhpcy5zaGFkb3chPT11bmRlZmluZWQpZGF0YS5vYmplY3Quc2hhZG93PXRoaXMuc2hhZG93LnRvSlNPTigpO3JldHVybiBkYXRhO319TGlnaHQucHJvdG90eXBlLmlzTGlnaHQ9dHJ1ZTtjbGFzcyBIZW1pc3BoZXJlTGlnaHQgZXh0ZW5kcyBMaWdodHtjb25zdHJ1Y3Rvcihza3lDb2xvcixncm91bmRDb2xvcixpbnRlbnNpdHkpe3N1cGVyKHNreUNvbG9yLGludGVuc2l0eSk7dGhpcy50eXBlPSdIZW1pc3BoZXJlTGlnaHQnO3RoaXMucG9zaXRpb24uY29weShPYmplY3QzRC5EZWZhdWx0VXApO3RoaXMudXBkYXRlTWF0cml4KCk7dGhpcy5ncm91bmRDb2xvcj1uZXcgQ29sb3IoZ3JvdW5kQ29sb3IpO31jb3B5KHNvdXJjZSl7TGlnaHQucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLHNvdXJjZSk7dGhpcy5ncm91bmRDb2xvci5jb3B5KHNvdXJjZS5ncm91bmRDb2xvcik7cmV0dXJuIHRoaXM7fX1IZW1pc3BoZXJlTGlnaHQucHJvdG90eXBlLmlzSGVtaXNwaGVyZUxpZ2h0PXRydWU7Y29uc3QgX3Byb2pTY3JlZW5NYXRyaXgkMT0vKkBfX1BVUkVfXyovbmV3IE1hdHJpeDQoKTtjb25zdCBfbGlnaHRQb3NpdGlvbldvcmxkJDE9LypAX19QVVJFX18qL25ldyBWZWN0b3IzKCk7Y29uc3QgX2xvb2tUYXJnZXQkMT0vKkBfX1BVUkVfXyovbmV3IFZlY3RvcjMoKTtjbGFzcyBMaWdodFNoYWRvd3tjb25zdHJ1Y3RvcihjYW1lcmEpe3RoaXMuY2FtZXJhPWNhbWVyYTt0aGlzLmJpYXM9MDt0aGlzLm5vcm1hbEJpYXM9MDt0aGlzLnJhZGl1cz0xO3RoaXMuYmx1clNhbXBsZXM9ODt0aGlzLm1hcFNpemU9bmV3IFZlY3RvcjIoNTEyLDUxMik7dGhpcy5tYXA9bnVsbDt0aGlzLm1hcFBhc3M9bnVsbDt0aGlzLm1hdHJpeD1uZXcgTWF0cml4NCgpO3RoaXMuYXV0b1VwZGF0ZT10cnVlO3RoaXMubmVlZHNVcGRhdGU9ZmFsc2U7dGhpcy5fZnJ1c3R1bT1uZXcgRnJ1c3R1bSgpO3RoaXMuX2ZyYW1lRXh0ZW50cz1uZXcgVmVjdG9yMigxLDEpO3RoaXMuX3ZpZXdwb3J0Q291bnQ9MTt0aGlzLl92aWV3cG9ydHM9W25ldyBWZWN0b3I0KDAsMCwxLDEpXTt9Z2V0Vmlld3BvcnRDb3VudCgpe3JldHVybiB0aGlzLl92aWV3cG9ydENvdW50O31nZXRGcnVzdHVtKCl7cmV0dXJuIHRoaXMuX2ZydXN0dW07fXVwZGF0ZU1hdHJpY2VzKGxpZ2h0KXtjb25zdCBzaGFkb3dDYW1lcmE9dGhpcy5jYW1lcmE7Y29uc3Qgc2hhZG93TWF0cml4PXRoaXMubWF0cml4O19saWdodFBvc2l0aW9uV29ybGQkMS5zZXRGcm9tTWF0cml4UG9zaXRpb24obGlnaHQubWF0cml4V29ybGQpO3NoYWRvd0NhbWVyYS5wb3NpdGlvbi5jb3B5KF9saWdodFBvc2l0aW9uV29ybGQkMSk7X2xvb2tUYXJnZXQkMS5zZXRGcm9tTWF0cml4UG9zaXRpb24obGlnaHQudGFyZ2V0Lm1hdHJpeFdvcmxkKTtzaGFkb3dDYW1lcmEubG9va0F0KF9sb29rVGFyZ2V0JDEpO3NoYWRvd0NhbWVyYS51cGRhdGVNYXRyaXhXb3JsZCgpO19wcm9qU2NyZWVuTWF0cml4JDEubXVsdGlwbHlNYXRyaWNlcyhzaGFkb3dDYW1lcmEucHJvamVjdGlvbk1hdHJpeCxzaGFkb3dDYW1lcmEubWF0cml4V29ybGRJbnZlcnNlKTt0aGlzLl9mcnVzdHVtLnNldEZyb21Qcm9qZWN0aW9uTWF0cml4KF9wcm9qU2NyZWVuTWF0cml4JDEpO3NoYWRvd01hdHJpeC5zZXQoMC41LDAuMCwwLjAsMC41LDAuMCwwLjUsMC4wLDAuNSwwLjAsMC4wLDAuNSwwLjUsMC4wLDAuMCwwLjAsMS4wKTtzaGFkb3dNYXRyaXgubXVsdGlwbHkoc2hhZG93Q2FtZXJhLnByb2plY3Rpb25NYXRyaXgpO3NoYWRvd01hdHJpeC5tdWx0aXBseShzaGFkb3dDYW1lcmEubWF0cml4V29ybGRJbnZlcnNlKTt9Z2V0Vmlld3BvcnQodmlld3BvcnRJbmRleCl7cmV0dXJuIHRoaXMuX3ZpZXdwb3J0c1t2aWV3cG9ydEluZGV4XTt9Z2V0RnJhbWVFeHRlbnRzKCl7cmV0dXJuIHRoaXMuX2ZyYW1lRXh0ZW50czt9ZGlzcG9zZSgpe2lmKHRoaXMubWFwKXt0aGlzLm1hcC5kaXNwb3NlKCk7fWlmKHRoaXMubWFwUGFzcyl7dGhpcy5tYXBQYXNzLmRpc3Bvc2UoKTt9fWNvcHkoc291cmNlKXt0aGlzLmNhbWVyYT1zb3VyY2UuY2FtZXJhLmNsb25lKCk7dGhpcy5iaWFzPXNvdXJjZS5iaWFzO3RoaXMucmFkaXVzPXNvdXJjZS5yYWRpdXM7dGhpcy5tYXBTaXplLmNvcHkoc291cmNlLm1hcFNpemUpO3JldHVybiB0aGlzO31jbG9uZSgpe3JldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3RvcigpLmNvcHkodGhpcyk7fXRvSlNPTigpe2NvbnN0IG9iamVjdD17fTtpZih0aGlzLmJpYXMhPT0wKW9iamVjdC5iaWFzPXRoaXMuYmlhcztpZih0aGlzLm5vcm1hbEJpYXMhPT0wKW9iamVjdC5ub3JtYWxCaWFzPXRoaXMubm9ybWFsQmlhcztpZih0aGlzLnJhZGl1cyE9PTEpb2JqZWN0LnJhZGl1cz10aGlzLnJhZGl1cztpZih0aGlzLm1hcFNpemUueCE9PTUxMnx8dGhpcy5tYXBTaXplLnkhPT01MTIpb2JqZWN0Lm1hcFNpemU9dGhpcy5tYXBTaXplLnRvQXJyYXkoKTtvYmplY3QuY2FtZXJhPXRoaXMuY2FtZXJhLnRvSlNPTihmYWxzZSkub2JqZWN0O2RlbGV0ZSBvYmplY3QuY2FtZXJhLm1hdHJpeDtyZXR1cm4gb2JqZWN0O319Y2xhc3MgU3BvdExpZ2h0U2hhZG93IGV4dGVuZHMgTGlnaHRTaGFkb3d7Y29uc3RydWN0b3IoKXtzdXBlcihuZXcgUGVyc3BlY3RpdmVDYW1lcmEoNTAsMSwwLjUsNTAwKSk7dGhpcy5mb2N1cz0xO311cGRhdGVNYXRyaWNlcyhsaWdodCl7Y29uc3QgY2FtZXJhPXRoaXMuY2FtZXJhO2NvbnN0IGZvdj1SQUQyREVHKjIqbGlnaHQuYW5nbGUqdGhpcy5mb2N1cztjb25zdCBhc3BlY3Q9dGhpcy5tYXBTaXplLndpZHRoL3RoaXMubWFwU2l6ZS5oZWlnaHQ7Y29uc3QgZmFyPWxpZ2h0LmRpc3RhbmNlfHxjYW1lcmEuZmFyO2lmKGZvdiE9PWNhbWVyYS5mb3Z8fGFzcGVjdCE9PWNhbWVyYS5hc3BlY3R8fGZhciE9PWNhbWVyYS5mYXIpe2NhbWVyYS5mb3Y9Zm92O2NhbWVyYS5hc3BlY3Q9YXNwZWN0O2NhbWVyYS5mYXI9ZmFyO2NhbWVyYS51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCk7fXN1cGVyLnVwZGF0ZU1hdHJpY2VzKGxpZ2h0KTt9Y29weShzb3VyY2Upe3N1cGVyLmNvcHkoc291cmNlKTt0aGlzLmZvY3VzPXNvdXJjZS5mb2N1cztyZXR1cm4gdGhpczt9fVNwb3RMaWdodFNoYWRvdy5wcm90b3R5cGUuaXNTcG90TGlnaHRTaGFkb3c9dHJ1ZTtjbGFzcyBTcG90TGlnaHQgZXh0ZW5kcyBMaWdodHtjb25zdHJ1Y3Rvcihjb2xvcixpbnRlbnNpdHksZGlzdGFuY2UsYW5nbGUscGVudW1icmEsZGVjYXkpe2lmKGRpc3RhbmNlPT09dm9pZCAwKXtkaXN0YW5jZT0wO31pZihhbmdsZT09PXZvaWQgMCl7YW5nbGU9TWF0aC5QSS8zO31pZihwZW51bWJyYT09PXZvaWQgMCl7cGVudW1icmE9MDt9aWYoZGVjYXk9PT12b2lkIDApe2RlY2F5PTE7fXN1cGVyKGNvbG9yLGludGVuc2l0eSk7dGhpcy50eXBlPSdTcG90TGlnaHQnO3RoaXMucG9zaXRpb24uY29weShPYmplY3QzRC5EZWZhdWx0VXApO3RoaXMudXBkYXRlTWF0cml4KCk7dGhpcy50YXJnZXQ9bmV3IE9iamVjdDNEKCk7dGhpcy5kaXN0YW5jZT1kaXN0YW5jZTt0aGlzLmFuZ2xlPWFuZ2xlO3RoaXMucGVudW1icmE9cGVudW1icmE7dGhpcy5kZWNheT1kZWNheTsvLyBmb3IgcGh5c2ljYWxseSBjb3JyZWN0IGxpZ2h0cywgc2hvdWxkIGJlIDIuCgl0aGlzLnNoYWRvdz1uZXcgU3BvdExpZ2h0U2hhZG93KCk7fWdldCBwb3dlcigpey8vIGNvbXB1dGUgdGhlIGxpZ2h0J3MgbHVtaW5vdXMgcG93ZXIgKGluIGx1bWVucykgZnJvbSBpdHMgaW50ZW5zaXR5IChpbiBjYW5kZWxhKQoJLy8gYnkgY29udmVudGlvbiBmb3IgYSBzcG90bGlnaHQsIGx1bWlub3VzIHBvd2VyIChsbSkgPSDPgCAqIGx1bWlub3VzIGludGVuc2l0eSAoY2QpCglyZXR1cm4gdGhpcy5pbnRlbnNpdHkqTWF0aC5QSTt9c2V0IHBvd2VyKHBvd2VyKXsvLyBzZXQgdGhlIGxpZ2h0J3MgaW50ZW5zaXR5IChpbiBjYW5kZWxhKSBmcm9tIHRoZSBkZXNpcmVkIGx1bWlub3VzIHBvd2VyIChpbiBsdW1lbnMpCgl0aGlzLmludGVuc2l0eT1wb3dlci9NYXRoLlBJO31kaXNwb3NlKCl7dGhpcy5zaGFkb3cuZGlzcG9zZSgpO31jb3B5KHNvdXJjZSl7c3VwZXIuY29weShzb3VyY2UpO3RoaXMuZGlzdGFuY2U9c291cmNlLmRpc3RhbmNlO3RoaXMuYW5nbGU9c291cmNlLmFuZ2xlO3RoaXMucGVudW1icmE9c291cmNlLnBlbnVtYnJhO3RoaXMuZGVjYXk9c291cmNlLmRlY2F5O3RoaXMudGFyZ2V0PXNvdXJjZS50YXJnZXQuY2xvbmUoKTt0aGlzLnNoYWRvdz1zb3VyY2Uuc2hhZG93LmNsb25lKCk7cmV0dXJuIHRoaXM7fX1TcG90TGlnaHQucHJvdG90eXBlLmlzU3BvdExpZ2h0PXRydWU7Y29uc3QgX3Byb2pTY3JlZW5NYXRyaXg9LypAX19QVVJFX18qL25ldyBNYXRyaXg0KCk7Y29uc3QgX2xpZ2h0UG9zaXRpb25Xb3JsZD0vKkBfX1BVUkVfXyovbmV3IFZlY3RvcjMoKTtjb25zdCBfbG9va1RhcmdldD0vKkBfX1BVUkVfXyovbmV3IFZlY3RvcjMoKTtjbGFzcyBQb2ludExpZ2h0U2hhZG93IGV4dGVuZHMgTGlnaHRTaGFkb3d7Y29uc3RydWN0b3IoKXtzdXBlcihuZXcgUGVyc3BlY3RpdmVDYW1lcmEoOTAsMSwwLjUsNTAwKSk7dGhpcy5fZnJhbWVFeHRlbnRzPW5ldyBWZWN0b3IyKDQsMik7dGhpcy5fdmlld3BvcnRDb3VudD02O3RoaXMuX3ZpZXdwb3J0cz1bLy8gVGhlc2Ugdmlld3BvcnRzIG1hcCBhIGN1YmUtbWFwIG9udG8gYSAyRCB0ZXh0dXJlIHdpdGggdGhlCgkvLyBmb2xsb3dpbmcgb3JpZW50YXRpb246CgkvLwoJLy8gIHh6WFoKCS8vICAgeSBZCgkvLwoJLy8gWCAtIFBvc2l0aXZlIHggZGlyZWN0aW9uCgkvLyB4IC0gTmVnYXRpdmUgeCBkaXJlY3Rpb24KCS8vIFkgLSBQb3NpdGl2ZSB5IGRpcmVjdGlvbgoJLy8geSAtIE5lZ2F0aXZlIHkgZGlyZWN0aW9uCgkvLyBaIC0gUG9zaXRpdmUgeiBkaXJlY3Rpb24KCS8vIHogLSBOZWdhdGl2ZSB6IGRpcmVjdGlvbgoJLy8gcG9zaXRpdmUgWAoJbmV3IFZlY3RvcjQoMiwxLDEsMSksLy8gbmVnYXRpdmUgWAoJbmV3IFZlY3RvcjQoMCwxLDEsMSksLy8gcG9zaXRpdmUgWgoJbmV3IFZlY3RvcjQoMywxLDEsMSksLy8gbmVnYXRpdmUgWgoJbmV3IFZlY3RvcjQoMSwxLDEsMSksLy8gcG9zaXRpdmUgWQoJbmV3IFZlY3RvcjQoMywwLDEsMSksLy8gbmVnYXRpdmUgWQoJbmV3IFZlY3RvcjQoMSwwLDEsMSldO3RoaXMuX2N1YmVEaXJlY3Rpb25zPVtuZXcgVmVjdG9yMygxLDAsMCksbmV3IFZlY3RvcjMoLTEsMCwwKSxuZXcgVmVjdG9yMygwLDAsMSksbmV3IFZlY3RvcjMoMCwwLC0xKSxuZXcgVmVjdG9yMygwLDEsMCksbmV3IFZlY3RvcjMoMCwtMSwwKV07dGhpcy5fY3ViZVVwcz1bbmV3IFZlY3RvcjMoMCwxLDApLG5ldyBWZWN0b3IzKDAsMSwwKSxuZXcgVmVjdG9yMygwLDEsMCksbmV3IFZlY3RvcjMoMCwxLDApLG5ldyBWZWN0b3IzKDAsMCwxKSxuZXcgVmVjdG9yMygwLDAsLTEpXTt9dXBkYXRlTWF0cmljZXMobGlnaHQsdmlld3BvcnRJbmRleCl7aWYodmlld3BvcnRJbmRleD09PXZvaWQgMCl7dmlld3BvcnRJbmRleD0wO31jb25zdCBjYW1lcmE9dGhpcy5jYW1lcmE7Y29uc3Qgc2hhZG93TWF0cml4PXRoaXMubWF0cml4O2NvbnN0IGZhcj1saWdodC5kaXN0YW5jZXx8Y2FtZXJhLmZhcjtpZihmYXIhPT1jYW1lcmEuZmFyKXtjYW1lcmEuZmFyPWZhcjtjYW1lcmEudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpO31fbGlnaHRQb3NpdGlvbldvcmxkLnNldEZyb21NYXRyaXhQb3NpdGlvbihsaWdodC5tYXRyaXhXb3JsZCk7Y2FtZXJhLnBvc2l0aW9uLmNvcHkoX2xpZ2h0UG9zaXRpb25Xb3JsZCk7X2xvb2tUYXJnZXQuY29weShjYW1lcmEucG9zaXRpb24pO19sb29rVGFyZ2V0LmFkZCh0aGlzLl9jdWJlRGlyZWN0aW9uc1t2aWV3cG9ydEluZGV4XSk7Y2FtZXJhLnVwLmNvcHkodGhpcy5fY3ViZVVwc1t2aWV3cG9ydEluZGV4XSk7Y2FtZXJhLmxvb2tBdChfbG9va1RhcmdldCk7Y2FtZXJhLnVwZGF0ZU1hdHJpeFdvcmxkKCk7c2hhZG93TWF0cml4Lm1ha2VUcmFuc2xhdGlvbigtX2xpZ2h0UG9zaXRpb25Xb3JsZC54LC1fbGlnaHRQb3NpdGlvbldvcmxkLnksLV9saWdodFBvc2l0aW9uV29ybGQueik7X3Byb2pTY3JlZW5NYXRyaXgubXVsdGlwbHlNYXRyaWNlcyhjYW1lcmEucHJvamVjdGlvbk1hdHJpeCxjYW1lcmEubWF0cml4V29ybGRJbnZlcnNlKTt0aGlzLl9mcnVzdHVtLnNldEZyb21Qcm9qZWN0aW9uTWF0cml4KF9wcm9qU2NyZWVuTWF0cml4KTt9fVBvaW50TGlnaHRTaGFkb3cucHJvdG90eXBlLmlzUG9pbnRMaWdodFNoYWRvdz10cnVlO2NsYXNzIFBvaW50TGlnaHQgZXh0ZW5kcyBMaWdodHtjb25zdHJ1Y3Rvcihjb2xvcixpbnRlbnNpdHksZGlzdGFuY2UsZGVjYXkpe2lmKGRpc3RhbmNlPT09dm9pZCAwKXtkaXN0YW5jZT0wO31pZihkZWNheT09PXZvaWQgMCl7ZGVjYXk9MTt9c3VwZXIoY29sb3IsaW50ZW5zaXR5KTt0aGlzLnR5cGU9J1BvaW50TGlnaHQnO3RoaXMuZGlzdGFuY2U9ZGlzdGFuY2U7dGhpcy5kZWNheT1kZWNheTsvLyBmb3IgcGh5c2ljYWxseSBjb3JyZWN0IGxpZ2h0cywgc2hvdWxkIGJlIDIuCgl0aGlzLnNoYWRvdz1uZXcgUG9pbnRMaWdodFNoYWRvdygpO31nZXQgcG93ZXIoKXsvLyBjb21wdXRlIHRoZSBsaWdodCdzIGx1bWlub3VzIHBvd2VyIChpbiBsdW1lbnMpIGZyb20gaXRzIGludGVuc2l0eSAoaW4gY2FuZGVsYSkKCS8vIGZvciBhbiBpc290cm9waWMgbGlnaHQgc291cmNlLCBsdW1pbm91cyBwb3dlciAobG0pID0gNCDPgCBsdW1pbm91cyBpbnRlbnNpdHkgKGNkKQoJcmV0dXJuIHRoaXMuaW50ZW5zaXR5KjQqTWF0aC5QSTt9c2V0IHBvd2VyKHBvd2VyKXsvLyBzZXQgdGhlIGxpZ2h0J3MgaW50ZW5zaXR5IChpbiBjYW5kZWxhKSBmcm9tIHRoZSBkZXNpcmVkIGx1bWlub3VzIHBvd2VyIChpbiBsdW1lbnMpCgl0aGlzLmludGVuc2l0eT1wb3dlci8oNCpNYXRoLlBJKTt9ZGlzcG9zZSgpe3RoaXMuc2hhZG93LmRpc3Bvc2UoKTt9Y29weShzb3VyY2Upe3N1cGVyLmNvcHkoc291cmNlKTt0aGlzLmRpc3RhbmNlPXNvdXJjZS5kaXN0YW5jZTt0aGlzLmRlY2F5PXNvdXJjZS5kZWNheTt0aGlzLnNoYWRvdz1zb3VyY2Uuc2hhZG93LmNsb25lKCk7cmV0dXJuIHRoaXM7fX1Qb2ludExpZ2h0LnByb3RvdHlwZS5pc1BvaW50TGlnaHQ9dHJ1ZTtjbGFzcyBEaXJlY3Rpb25hbExpZ2h0U2hhZG93IGV4dGVuZHMgTGlnaHRTaGFkb3d7Y29uc3RydWN0b3IoKXtzdXBlcihuZXcgT3J0aG9ncmFwaGljQ2FtZXJhKC01LDUsNSwtNSwwLjUsNTAwKSk7fX1EaXJlY3Rpb25hbExpZ2h0U2hhZG93LnByb3RvdHlwZS5pc0RpcmVjdGlvbmFsTGlnaHRTaGFkb3c9dHJ1ZTtjbGFzcyBEaXJlY3Rpb25hbExpZ2h0IGV4dGVuZHMgTGlnaHR7Y29uc3RydWN0b3IoY29sb3IsaW50ZW5zaXR5KXtzdXBlcihjb2xvcixpbnRlbnNpdHkpO3RoaXMudHlwZT0nRGlyZWN0aW9uYWxMaWdodCc7dGhpcy5wb3NpdGlvbi5jb3B5KE9iamVjdDNELkRlZmF1bHRVcCk7dGhpcy51cGRhdGVNYXRyaXgoKTt0aGlzLnRhcmdldD1uZXcgT2JqZWN0M0QoKTt0aGlzLnNoYWRvdz1uZXcgRGlyZWN0aW9uYWxMaWdodFNoYWRvdygpO31kaXNwb3NlKCl7dGhpcy5zaGFkb3cuZGlzcG9zZSgpO31jb3B5KHNvdXJjZSl7c3VwZXIuY29weShzb3VyY2UpO3RoaXMudGFyZ2V0PXNvdXJjZS50YXJnZXQuY2xvbmUoKTt0aGlzLnNoYWRvdz1zb3VyY2Uuc2hhZG93LmNsb25lKCk7cmV0dXJuIHRoaXM7fX1EaXJlY3Rpb25hbExpZ2h0LnByb3RvdHlwZS5pc0RpcmVjdGlvbmFsTGlnaHQ9dHJ1ZTtjbGFzcyBBbWJpZW50TGlnaHQgZXh0ZW5kcyBMaWdodHtjb25zdHJ1Y3Rvcihjb2xvcixpbnRlbnNpdHkpe3N1cGVyKGNvbG9yLGludGVuc2l0eSk7dGhpcy50eXBlPSdBbWJpZW50TGlnaHQnO319QW1iaWVudExpZ2h0LnByb3RvdHlwZS5pc0FtYmllbnRMaWdodD10cnVlO2NsYXNzIFJlY3RBcmVhTGlnaHQgZXh0ZW5kcyBMaWdodHtjb25zdHJ1Y3Rvcihjb2xvcixpbnRlbnNpdHksd2lkdGgsaGVpZ2h0KXtpZih3aWR0aD09PXZvaWQgMCl7d2lkdGg9MTA7fWlmKGhlaWdodD09PXZvaWQgMCl7aGVpZ2h0PTEwO31zdXBlcihjb2xvcixpbnRlbnNpdHkpO3RoaXMudHlwZT0nUmVjdEFyZWFMaWdodCc7dGhpcy53aWR0aD13aWR0aDt0aGlzLmhlaWdodD1oZWlnaHQ7fWdldCBwb3dlcigpey8vIGNvbXB1dGUgdGhlIGxpZ2h0J3MgbHVtaW5vdXMgcG93ZXIgKGluIGx1bWVucykgZnJvbSBpdHMgaW50ZW5zaXR5IChpbiBuaXRzKQoJcmV0dXJuIHRoaXMuaW50ZW5zaXR5KnRoaXMud2lkdGgqdGhpcy5oZWlnaHQqTWF0aC5QSTt9c2V0IHBvd2VyKHBvd2VyKXsvLyBzZXQgdGhlIGxpZ2h0J3MgaW50ZW5zaXR5IChpbiBuaXRzKSBmcm9tIHRoZSBkZXNpcmVkIGx1bWlub3VzIHBvd2VyIChpbiBsdW1lbnMpCgl0aGlzLmludGVuc2l0eT1wb3dlci8odGhpcy53aWR0aCp0aGlzLmhlaWdodCpNYXRoLlBJKTt9Y29weShzb3VyY2Upe3N1cGVyLmNvcHkoc291cmNlKTt0aGlzLndpZHRoPXNvdXJjZS53aWR0aDt0aGlzLmhlaWdodD1zb3VyY2UuaGVpZ2h0O3JldHVybiB0aGlzO310b0pTT04obWV0YSl7Y29uc3QgZGF0YT1zdXBlci50b0pTT04obWV0YSk7ZGF0YS5vYmplY3Qud2lkdGg9dGhpcy53aWR0aDtkYXRhLm9iamVjdC5oZWlnaHQ9dGhpcy5oZWlnaHQ7cmV0dXJuIGRhdGE7fX1SZWN0QXJlYUxpZ2h0LnByb3RvdHlwZS5pc1JlY3RBcmVhTGlnaHQ9dHJ1ZTsvKioKCSAqIFByaW1hcnkgcmVmZXJlbmNlOgoJICogICBodHRwczovL2dyYXBoaWNzLnN0YW5mb3JkLmVkdS9wYXBlcnMvZW52bWFwL2Vudm1hcC5wZGYKCSAqCgkgKiBTZWNvbmRhcnkgcmVmZXJlbmNlOgoJICogICBodHRwczovL3d3dy5wcHNsb2FuLm9yZy9wdWJsaWNhdGlvbnMvU3R1cGlkU0gzNi5wZGYKCSAqLyAvLyAzLWJhbmQgU0ggZGVmaW5lZCBieSA5IGNvZWZmaWNpZW50cwoJY2xhc3MgU3BoZXJpY2FsSGFybW9uaWNzM3tjb25zdHJ1Y3Rvcigpe3RoaXMuY29lZmZpY2llbnRzPVtdO2ZvcihsZXQgaT0wO2k8OTtpKyspe3RoaXMuY29lZmZpY2llbnRzLnB1c2gobmV3IFZlY3RvcjMoKSk7fX1zZXQoY29lZmZpY2llbnRzKXtmb3IobGV0IGk9MDtpPDk7aSsrKXt0aGlzLmNvZWZmaWNpZW50c1tpXS5jb3B5KGNvZWZmaWNpZW50c1tpXSk7fXJldHVybiB0aGlzO316ZXJvKCl7Zm9yKGxldCBpPTA7aTw5O2krKyl7dGhpcy5jb2VmZmljaWVudHNbaV0uc2V0KDAsMCwwKTt9cmV0dXJuIHRoaXM7fS8vIGdldCB0aGUgcmFkaWFuY2UgaW4gdGhlIGRpcmVjdGlvbiBvZiB0aGUgbm9ybWFsCgkvLyB0YXJnZXQgaXMgYSBWZWN0b3IzCglnZXRBdChub3JtYWwsdGFyZ2V0KXsvLyBub3JtYWwgaXMgYXNzdW1lZCB0byBiZSB1bml0IGxlbmd0aAoJY29uc3QgeD1ub3JtYWwueCx5PW5vcm1hbC55LHo9bm9ybWFsLno7Y29uc3QgY29lZmY9dGhpcy5jb2VmZmljaWVudHM7Ly8gYmFuZCAwCgl0YXJnZXQuY29weShjb2VmZlswXSkubXVsdGlwbHlTY2FsYXIoMC4yODIwOTUpOy8vIGJhbmQgMQoJdGFyZ2V0LmFkZFNjYWxlZFZlY3Rvcihjb2VmZlsxXSwwLjQ4ODYwMyp5KTt0YXJnZXQuYWRkU2NhbGVkVmVjdG9yKGNvZWZmWzJdLDAuNDg4NjAzKnopO3RhcmdldC5hZGRTY2FsZWRWZWN0b3IoY29lZmZbM10sMC40ODg2MDMqeCk7Ly8gYmFuZCAyCgl0YXJnZXQuYWRkU2NhbGVkVmVjdG9yKGNvZWZmWzRdLDEuMDkyNTQ4Kih4KnkpKTt0YXJnZXQuYWRkU2NhbGVkVmVjdG9yKGNvZWZmWzVdLDEuMDkyNTQ4Kih5KnopKTt0YXJnZXQuYWRkU2NhbGVkVmVjdG9yKGNvZWZmWzZdLDAuMzE1MzkyKigzLjAqeip6LTEuMCkpO3RhcmdldC5hZGRTY2FsZWRWZWN0b3IoY29lZmZbN10sMS4wOTI1NDgqKHgqeikpO3RhcmdldC5hZGRTY2FsZWRWZWN0b3IoY29lZmZbOF0sMC41NDYyNzQqKHgqeC15KnkpKTtyZXR1cm4gdGFyZ2V0O30vLyBnZXQgdGhlIGlycmFkaWFuY2UgKHJhZGlhbmNlIGNvbnZvbHZlZCB3aXRoIGNvc2luZSBsb2JlKSBpbiB0aGUgZGlyZWN0aW9uIG9mIHRoZSBub3JtYWwKCS8vIHRhcmdldCBpcyBhIFZlY3RvcjMKCS8vIGh0dHBzOi8vZ3JhcGhpY3Muc3RhbmZvcmQuZWR1L3BhcGVycy9lbnZtYXAvZW52bWFwLnBkZgoJZ2V0SXJyYWRpYW5jZUF0KG5vcm1hbCx0YXJnZXQpey8vIG5vcm1hbCBpcyBhc3N1bWVkIHRvIGJlIHVuaXQgbGVuZ3RoCgljb25zdCB4PW5vcm1hbC54LHk9bm9ybWFsLnksej1ub3JtYWwuejtjb25zdCBjb2VmZj10aGlzLmNvZWZmaWNpZW50czsvLyBiYW5kIDAKCXRhcmdldC5jb3B5KGNvZWZmWzBdKS5tdWx0aXBseVNjYWxhcigwLjg4NjIyNyk7Ly8gz4AgKiAwLjI4MjA5NQoJLy8gYmFuZCAxCgl0YXJnZXQuYWRkU2NhbGVkVmVjdG9yKGNvZWZmWzFdLDIuMCowLjUxMTY2NCp5KTsvLyAoIDIgKiDPgCAvIDMgKSAqIDAuNDg4NjAzCgl0YXJnZXQuYWRkU2NhbGVkVmVjdG9yKGNvZWZmWzJdLDIuMCowLjUxMTY2NCp6KTt0YXJnZXQuYWRkU2NhbGVkVmVjdG9yKGNvZWZmWzNdLDIuMCowLjUxMTY2NCp4KTsvLyBiYW5kIDIKCXRhcmdldC5hZGRTY2FsZWRWZWN0b3IoY29lZmZbNF0sMi4wKjAuNDI5MDQzKngqeSk7Ly8gKCDPgCAvIDQgKSAqIDEuMDkyNTQ4Cgl0YXJnZXQuYWRkU2NhbGVkVmVjdG9yKGNvZWZmWzVdLDIuMCowLjQyOTA0Myp5KnopO3RhcmdldC5hZGRTY2FsZWRWZWN0b3IoY29lZmZbNl0sMC43NDMxMjUqeip6LTAuMjQ3NzA4KTsvLyAoIM+AIC8gNCApICogMC4zMTUzOTIgKiAzCgl0YXJnZXQuYWRkU2NhbGVkVmVjdG9yKGNvZWZmWzddLDIuMCowLjQyOTA0Myp4KnopO3RhcmdldC5hZGRTY2FsZWRWZWN0b3IoY29lZmZbOF0sMC40MjkwNDMqKHgqeC15KnkpKTsvLyAoIM+AIC8gNCApICogMC41NDYyNzQKCXJldHVybiB0YXJnZXQ7fWFkZChzaCl7Zm9yKGxldCBpPTA7aTw5O2krKyl7dGhpcy5jb2VmZmljaWVudHNbaV0uYWRkKHNoLmNvZWZmaWNpZW50c1tpXSk7fXJldHVybiB0aGlzO31hZGRTY2FsZWRTSChzaCxzKXtmb3IobGV0IGk9MDtpPDk7aSsrKXt0aGlzLmNvZWZmaWNpZW50c1tpXS5hZGRTY2FsZWRWZWN0b3Ioc2guY29lZmZpY2llbnRzW2ldLHMpO31yZXR1cm4gdGhpczt9c2NhbGUocyl7Zm9yKGxldCBpPTA7aTw5O2krKyl7dGhpcy5jb2VmZmljaWVudHNbaV0ubXVsdGlwbHlTY2FsYXIocyk7fXJldHVybiB0aGlzO31sZXJwKHNoLGFscGhhKXtmb3IobGV0IGk9MDtpPDk7aSsrKXt0aGlzLmNvZWZmaWNpZW50c1tpXS5sZXJwKHNoLmNvZWZmaWNpZW50c1tpXSxhbHBoYSk7fXJldHVybiB0aGlzO31lcXVhbHMoc2gpe2ZvcihsZXQgaT0wO2k8OTtpKyspe2lmKCF0aGlzLmNvZWZmaWNpZW50c1tpXS5lcXVhbHMoc2guY29lZmZpY2llbnRzW2ldKSl7cmV0dXJuIGZhbHNlO319cmV0dXJuIHRydWU7fWNvcHkoc2gpe3JldHVybiB0aGlzLnNldChzaC5jb2VmZmljaWVudHMpO31jbG9uZSgpe3JldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3RvcigpLmNvcHkodGhpcyk7fWZyb21BcnJheShhcnJheSxvZmZzZXQpe2lmKG9mZnNldD09PXZvaWQgMCl7b2Zmc2V0PTA7fWNvbnN0IGNvZWZmaWNpZW50cz10aGlzLmNvZWZmaWNpZW50cztmb3IobGV0IGk9MDtpPDk7aSsrKXtjb2VmZmljaWVudHNbaV0uZnJvbUFycmF5KGFycmF5LG9mZnNldCtpKjMpO31yZXR1cm4gdGhpczt9dG9BcnJheShhcnJheSxvZmZzZXQpe2lmKGFycmF5PT09dm9pZCAwKXthcnJheT1bXTt9aWYob2Zmc2V0PT09dm9pZCAwKXtvZmZzZXQ9MDt9Y29uc3QgY29lZmZpY2llbnRzPXRoaXMuY29lZmZpY2llbnRzO2ZvcihsZXQgaT0wO2k8OTtpKyspe2NvZWZmaWNpZW50c1tpXS50b0FycmF5KGFycmF5LG9mZnNldCtpKjMpO31yZXR1cm4gYXJyYXk7fS8vIGV2YWx1YXRlIHRoZSBiYXNpcyBmdW5jdGlvbnMKCS8vIHNoQmFzaXMgaXMgYW4gQXJyYXlbIDkgXQoJc3RhdGljIGdldEJhc2lzQXQobm9ybWFsLHNoQmFzaXMpey8vIG5vcm1hbCBpcyBhc3N1bWVkIHRvIGJlIHVuaXQgbGVuZ3RoCgljb25zdCB4PW5vcm1hbC54LHk9bm9ybWFsLnksej1ub3JtYWwuejsvLyBiYW5kIDAKCXNoQmFzaXNbMF09MC4yODIwOTU7Ly8gYmFuZCAxCglzaEJhc2lzWzFdPTAuNDg4NjAzKnk7c2hCYXNpc1syXT0wLjQ4ODYwMyp6O3NoQmFzaXNbM109MC40ODg2MDMqeDsvLyBiYW5kIDIKCXNoQmFzaXNbNF09MS4wOTI1NDgqeCp5O3NoQmFzaXNbNV09MS4wOTI1NDgqeSp6O3NoQmFzaXNbNl09MC4zMTUzOTIqKDMqeip6LTEpO3NoQmFzaXNbN109MS4wOTI1NDgqeCp6O3NoQmFzaXNbOF09MC41NDYyNzQqKHgqeC15KnkpO319U3BoZXJpY2FsSGFybW9uaWNzMy5wcm90b3R5cGUuaXNTcGhlcmljYWxIYXJtb25pY3MzPXRydWU7Y2xhc3MgTGlnaHRQcm9iZSBleHRlbmRzIExpZ2h0e2NvbnN0cnVjdG9yKHNoLGludGVuc2l0eSl7aWYoc2g9PT12b2lkIDApe3NoPW5ldyBTcGhlcmljYWxIYXJtb25pY3MzKCk7fWlmKGludGVuc2l0eT09PXZvaWQgMCl7aW50ZW5zaXR5PTE7fXN1cGVyKHVuZGVmaW5lZCxpbnRlbnNpdHkpO3RoaXMuc2g9c2g7fWNvcHkoc291cmNlKXtzdXBlci5jb3B5KHNvdXJjZSk7dGhpcy5zaC5jb3B5KHNvdXJjZS5zaCk7cmV0dXJuIHRoaXM7fWZyb21KU09OKGpzb24pe3RoaXMuaW50ZW5zaXR5PWpzb24uaW50ZW5zaXR5Oy8vIFRPRE86IE1vdmUgdGhpcyBiaXQgdG8gTGlnaHQuZnJvbUpTT04oKTsKCXRoaXMuc2guZnJvbUFycmF5KGpzb24uc2gpO3JldHVybiB0aGlzO310b0pTT04obWV0YSl7Y29uc3QgZGF0YT1zdXBlci50b0pTT04obWV0YSk7ZGF0YS5vYmplY3Quc2g9dGhpcy5zaC50b0FycmF5KCk7cmV0dXJuIGRhdGE7fX1MaWdodFByb2JlLnByb3RvdHlwZS5pc0xpZ2h0UHJvYmU9dHJ1ZTtjbGFzcyBMb2FkZXJVdGlsc3tzdGF0aWMgZGVjb2RlVGV4dChhcnJheSl7aWYodHlwZW9mIFRleHREZWNvZGVyIT09J3VuZGVmaW5lZCcpe3JldHVybiBuZXcgVGV4dERlY29kZXIoKS5kZWNvZGUoYXJyYXkpO30vLyBBdm9pZCB0aGUgU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLCBhcnJheSkgc2hvcnRjdXQsIHdoaWNoCgkvLyB0aHJvd3MgYSAibWF4aW11bSBjYWxsIHN0YWNrIHNpemUgZXhjZWVkZWQiIGVycm9yIGZvciBsYXJnZSBhcnJheXMuCglsZXQgcz0nJztmb3IobGV0IGk9MCxpbD1hcnJheS5sZW5ndGg7aTxpbDtpKyspey8vIEltcGxpY2l0bHkgYXNzdW1lcyBsaXR0bGUtZW5kaWFuLgoJcys9U3RyaW5nLmZyb21DaGFyQ29kZShhcnJheVtpXSk7fXRyeXsvLyBtZXJnZXMgbXVsdGktYnl0ZSB1dGYtOCBjaGFyYWN0ZXJzLgoJcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChlc2NhcGUocykpO31jYXRjaChlKXsvLyBzZWUgIzE2MzU4CglyZXR1cm4gczt9fXN0YXRpYyBleHRyYWN0VXJsQmFzZSh1cmwpe2NvbnN0IGluZGV4PXVybC5sYXN0SW5kZXhPZignLycpO2lmKGluZGV4PT09LTEpcmV0dXJuICcuLyc7cmV0dXJuIHVybC5zdWJzdHIoMCxpbmRleCsxKTt9c3RhdGljIHJlc29sdmVVUkwodXJsLHBhdGgpey8vIEludmFsaWQgVVJMCglpZih0eXBlb2YgdXJsIT09J3N0cmluZyd8fHVybD09PScnKXJldHVybiAnJzsvLyBIb3N0IFJlbGF0aXZlIFVSTAoJaWYoL15odHRwcz86XC9cLy9pLnRlc3QocGF0aCkmJi9eXC8vLnRlc3QodXJsKSl7cGF0aD1wYXRoLnJlcGxhY2UoLyheaHR0cHM/OlwvXC9bXlwvXSspLiovaSwnJDEnKTt9Ly8gQWJzb2x1dGUgVVJMIGh0dHA6Ly8saHR0cHM6Ly8sLy8KCWlmKC9eKGh0dHBzPzopP1wvXC8vaS50ZXN0KHVybCkpcmV0dXJuIHVybDsvLyBEYXRhIFVSSQoJaWYoL15kYXRhOi4qLC4qJC9pLnRlc3QodXJsKSlyZXR1cm4gdXJsOy8vIEJsb2IgVVJMCglpZigvXmJsb2I6LiokL2kudGVzdCh1cmwpKXJldHVybiB1cmw7Ly8gUmVsYXRpdmUgVVJMCglyZXR1cm4gcGF0aCt1cmw7fX1jbGFzcyBJbnN0YW5jZWRCdWZmZXJHZW9tZXRyeSBleHRlbmRzIEJ1ZmZlckdlb21ldHJ5e2NvbnN0cnVjdG9yKCl7c3VwZXIoKTt0aGlzLnR5cGU9J0luc3RhbmNlZEJ1ZmZlckdlb21ldHJ5Jzt0aGlzLmluc3RhbmNlQ291bnQ9SW5maW5pdHk7fWNvcHkoc291cmNlKXtzdXBlci5jb3B5KHNvdXJjZSk7dGhpcy5pbnN0YW5jZUNvdW50PXNvdXJjZS5pbnN0YW5jZUNvdW50O3JldHVybiB0aGlzO31jbG9uZSgpe3JldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3RvcigpLmNvcHkodGhpcyk7fXRvSlNPTigpe2NvbnN0IGRhdGE9c3VwZXIudG9KU09OKHRoaXMpO2RhdGEuaW5zdGFuY2VDb3VudD10aGlzLmluc3RhbmNlQ291bnQ7ZGF0YS5pc0luc3RhbmNlZEJ1ZmZlckdlb21ldHJ5PXRydWU7cmV0dXJuIGRhdGE7fX1JbnN0YW5jZWRCdWZmZXJHZW9tZXRyeS5wcm90b3R5cGUuaXNJbnN0YW5jZWRCdWZmZXJHZW9tZXRyeT10cnVlO2NsYXNzIEltYWdlQml0bWFwTG9hZGVyIGV4dGVuZHMgTG9hZGVye2NvbnN0cnVjdG9yKG1hbmFnZXIpe3N1cGVyKG1hbmFnZXIpO2lmKHR5cGVvZiBjcmVhdGVJbWFnZUJpdG1hcD09PSd1bmRlZmluZWQnKXtjb25zb2xlLndhcm4oJ1RIUkVFLkltYWdlQml0bWFwTG9hZGVyOiBjcmVhdGVJbWFnZUJpdG1hcCgpIG5vdCBzdXBwb3J0ZWQuJyk7fWlmKHR5cGVvZiBmZXRjaD09PSd1bmRlZmluZWQnKXtjb25zb2xlLndhcm4oJ1RIUkVFLkltYWdlQml0bWFwTG9hZGVyOiBmZXRjaCgpIG5vdCBzdXBwb3J0ZWQuJyk7fXRoaXMub3B0aW9ucz17cHJlbXVsdGlwbHlBbHBoYTonbm9uZSd9O31zZXRPcHRpb25zKG9wdGlvbnMpe3RoaXMub3B0aW9ucz1vcHRpb25zO3JldHVybiB0aGlzO31sb2FkKHVybCxvbkxvYWQsb25Qcm9ncmVzcyxvbkVycm9yKXtpZih1cmw9PT11bmRlZmluZWQpdXJsPScnO2lmKHRoaXMucGF0aCE9PXVuZGVmaW5lZCl1cmw9dGhpcy5wYXRoK3VybDt1cmw9dGhpcy5tYW5hZ2VyLnJlc29sdmVVUkwodXJsKTtjb25zdCBzY29wZT10aGlzO2NvbnN0IGNhY2hlZD1DYWNoZS5nZXQodXJsKTtpZihjYWNoZWQhPT11bmRlZmluZWQpe3Njb3BlLm1hbmFnZXIuaXRlbVN0YXJ0KHVybCk7c2V0VGltZW91dChmdW5jdGlvbigpe2lmKG9uTG9hZClvbkxvYWQoY2FjaGVkKTtzY29wZS5tYW5hZ2VyLml0ZW1FbmQodXJsKTt9LDApO3JldHVybiBjYWNoZWQ7fWNvbnN0IGZldGNoT3B0aW9ucz17fTtmZXRjaE9wdGlvbnMuY3JlZGVudGlhbHM9dGhpcy5jcm9zc09yaWdpbj09PSdhbm9ueW1vdXMnPydzYW1lLW9yaWdpbic6J2luY2x1ZGUnO2ZldGNoT3B0aW9ucy5oZWFkZXJzPXRoaXMucmVxdWVzdEhlYWRlcjtmZXRjaCh1cmwsZmV0Y2hPcHRpb25zKS50aGVuKGZ1bmN0aW9uKHJlcyl7cmV0dXJuIHJlcy5ibG9iKCk7fSkudGhlbihmdW5jdGlvbihibG9iKXtyZXR1cm4gY3JlYXRlSW1hZ2VCaXRtYXAoYmxvYixPYmplY3QuYXNzaWduKHNjb3BlLm9wdGlvbnMse2NvbG9yU3BhY2VDb252ZXJzaW9uOidub25lJ30pKTt9KS50aGVuKGZ1bmN0aW9uKGltYWdlQml0bWFwKXtDYWNoZS5hZGQodXJsLGltYWdlQml0bWFwKTtpZihvbkxvYWQpb25Mb2FkKGltYWdlQml0bWFwKTtzY29wZS5tYW5hZ2VyLml0ZW1FbmQodXJsKTt9KS5jYXRjaChmdW5jdGlvbihlKXtpZihvbkVycm9yKW9uRXJyb3IoZSk7c2NvcGUubWFuYWdlci5pdGVtRXJyb3IodXJsKTtzY29wZS5tYW5hZ2VyLml0ZW1FbmQodXJsKTt9KTtzY29wZS5tYW5hZ2VyLml0ZW1TdGFydCh1cmwpO319SW1hZ2VCaXRtYXBMb2FkZXIucHJvdG90eXBlLmlzSW1hZ2VCaXRtYXBMb2FkZXI9dHJ1ZTtsZXQgX2NvbnRleHQ7Y29uc3QgQXVkaW9Db250ZXh0PXtnZXRDb250ZXh0OmZ1bmN0aW9uKCl7aWYoX2NvbnRleHQ9PT11bmRlZmluZWQpe19jb250ZXh0PW5ldyh3aW5kb3cuQXVkaW9Db250ZXh0fHx3aW5kb3cud2Via2l0QXVkaW9Db250ZXh0KSgpO31yZXR1cm4gX2NvbnRleHQ7fSxzZXRDb250ZXh0OmZ1bmN0aW9uKHZhbHVlKXtfY29udGV4dD12YWx1ZTt9fTtjbGFzcyBBdWRpb0xvYWRlciBleHRlbmRzIExvYWRlcntjb25zdHJ1Y3RvcihtYW5hZ2VyKXtzdXBlcihtYW5hZ2VyKTt9bG9hZCh1cmwsb25Mb2FkLG9uUHJvZ3Jlc3Msb25FcnJvcil7Y29uc3Qgc2NvcGU9dGhpcztjb25zdCBsb2FkZXI9bmV3IEZpbGVMb2FkZXIodGhpcy5tYW5hZ2VyKTtsb2FkZXIuc2V0UmVzcG9uc2VUeXBlKCdhcnJheWJ1ZmZlcicpO2xvYWRlci5zZXRQYXRoKHRoaXMucGF0aCk7bG9hZGVyLnNldFJlcXVlc3RIZWFkZXIodGhpcy5yZXF1ZXN0SGVhZGVyKTtsb2FkZXIuc2V0V2l0aENyZWRlbnRpYWxzKHRoaXMud2l0aENyZWRlbnRpYWxzKTtsb2FkZXIubG9hZCh1cmwsZnVuY3Rpb24oYnVmZmVyKXt0cnl7Ly8gQ3JlYXRlIGEgY29weSBvZiB0aGUgYnVmZmVyLiBUaGUgYGRlY29kZUF1ZGlvRGF0YWAgbWV0aG9kCgkvLyBkZXRhY2hlcyB0aGUgYnVmZmVyIHdoZW4gY29tcGxldGUsIHByZXZlbnRpbmcgcmV1c2UuCgljb25zdCBidWZmZXJDb3B5PWJ1ZmZlci5zbGljZSgwKTtjb25zdCBjb250ZXh0PUF1ZGlvQ29udGV4dC5nZXRDb250ZXh0KCk7Y29udGV4dC5kZWNvZGVBdWRpb0RhdGEoYnVmZmVyQ29weSxmdW5jdGlvbihhdWRpb0J1ZmZlcil7b25Mb2FkKGF1ZGlvQnVmZmVyKTt9KTt9Y2F0Y2goZSl7aWYob25FcnJvcil7b25FcnJvcihlKTt9ZWxzZSB7Y29uc29sZS5lcnJvcihlKTt9c2NvcGUubWFuYWdlci5pdGVtRXJyb3IodXJsKTt9fSxvblByb2dyZXNzLG9uRXJyb3IpO319Y2xhc3MgSGVtaXNwaGVyZUxpZ2h0UHJvYmUgZXh0ZW5kcyBMaWdodFByb2Jle2NvbnN0cnVjdG9yKHNreUNvbG9yLGdyb3VuZENvbG9yLGludGVuc2l0eSl7aWYoaW50ZW5zaXR5PT09dm9pZCAwKXtpbnRlbnNpdHk9MTt9c3VwZXIodW5kZWZpbmVkLGludGVuc2l0eSk7Y29uc3QgY29sb3IxPW5ldyBDb2xvcigpLnNldChza3lDb2xvcik7Y29uc3QgY29sb3IyPW5ldyBDb2xvcigpLnNldChncm91bmRDb2xvcik7Y29uc3Qgc2t5PW5ldyBWZWN0b3IzKGNvbG9yMS5yLGNvbG9yMS5nLGNvbG9yMS5iKTtjb25zdCBncm91bmQ9bmV3IFZlY3RvcjMoY29sb3IyLnIsY29sb3IyLmcsY29sb3IyLmIpOy8vIHdpdGhvdXQgZXh0cmEgZmFjdG9yIG9mIFBJIGluIHRoZSBzaGFkZXIsIHNob3VsZCA9IDEgLyBNYXRoLnNxcnQoIE1hdGguUEkgKTsKCWNvbnN0IGMwPU1hdGguc3FydChNYXRoLlBJKTtjb25zdCBjMT1jMCpNYXRoLnNxcnQoMC43NSk7dGhpcy5zaC5jb2VmZmljaWVudHNbMF0uY29weShza3kpLmFkZChncm91bmQpLm11bHRpcGx5U2NhbGFyKGMwKTt0aGlzLnNoLmNvZWZmaWNpZW50c1sxXS5jb3B5KHNreSkuc3ViKGdyb3VuZCkubXVsdGlwbHlTY2FsYXIoYzEpO319SGVtaXNwaGVyZUxpZ2h0UHJvYmUucHJvdG90eXBlLmlzSGVtaXNwaGVyZUxpZ2h0UHJvYmU9dHJ1ZTtjbGFzcyBBbWJpZW50TGlnaHRQcm9iZSBleHRlbmRzIExpZ2h0UHJvYmV7Y29uc3RydWN0b3IoY29sb3IsaW50ZW5zaXR5KXtpZihpbnRlbnNpdHk9PT12b2lkIDApe2ludGVuc2l0eT0xO31zdXBlcih1bmRlZmluZWQsaW50ZW5zaXR5KTtjb25zdCBjb2xvcjE9bmV3IENvbG9yKCkuc2V0KGNvbG9yKTsvLyB3aXRob3V0IGV4dHJhIGZhY3RvciBvZiBQSSBpbiB0aGUgc2hhZGVyLCB3b3VsZCBiZSAyIC8gTWF0aC5zcXJ0KCBNYXRoLlBJICk7Cgl0aGlzLnNoLmNvZWZmaWNpZW50c1swXS5zZXQoY29sb3IxLnIsY29sb3IxLmcsY29sb3IxLmIpLm11bHRpcGx5U2NhbGFyKDIqTWF0aC5zcXJ0KE1hdGguUEkpKTt9fUFtYmllbnRMaWdodFByb2JlLnByb3RvdHlwZS5pc0FtYmllbnRMaWdodFByb2JlPXRydWU7Y2xhc3MgQXVkaW8gZXh0ZW5kcyBPYmplY3QzRHtjb25zdHJ1Y3RvcihsaXN0ZW5lcil7c3VwZXIoKTt0aGlzLnR5cGU9J0F1ZGlvJzt0aGlzLmxpc3RlbmVyPWxpc3RlbmVyO3RoaXMuY29udGV4dD1saXN0ZW5lci5jb250ZXh0O3RoaXMuZ2Fpbj10aGlzLmNvbnRleHQuY3JlYXRlR2FpbigpO3RoaXMuZ2Fpbi5jb25uZWN0KGxpc3RlbmVyLmdldElucHV0KCkpO3RoaXMuYXV0b3BsYXk9ZmFsc2U7dGhpcy5idWZmZXI9bnVsbDt0aGlzLmRldHVuZT0wO3RoaXMubG9vcD1mYWxzZTt0aGlzLmxvb3BTdGFydD0wO3RoaXMubG9vcEVuZD0wO3RoaXMub2Zmc2V0PTA7dGhpcy5kdXJhdGlvbj11bmRlZmluZWQ7dGhpcy5wbGF5YmFja1JhdGU9MTt0aGlzLmlzUGxheWluZz1mYWxzZTt0aGlzLmhhc1BsYXliYWNrQ29udHJvbD10cnVlO3RoaXMuc291cmNlPW51bGw7dGhpcy5zb3VyY2VUeXBlPSdlbXB0eSc7dGhpcy5fc3RhcnRlZEF0PTA7dGhpcy5fcHJvZ3Jlc3M9MDt0aGlzLl9jb25uZWN0ZWQ9ZmFsc2U7dGhpcy5maWx0ZXJzPVtdO31nZXRPdXRwdXQoKXtyZXR1cm4gdGhpcy5nYWluO31zZXROb2RlU291cmNlKGF1ZGlvTm9kZSl7dGhpcy5oYXNQbGF5YmFja0NvbnRyb2w9ZmFsc2U7dGhpcy5zb3VyY2VUeXBlPSdhdWRpb05vZGUnO3RoaXMuc291cmNlPWF1ZGlvTm9kZTt0aGlzLmNvbm5lY3QoKTtyZXR1cm4gdGhpczt9c2V0TWVkaWFFbGVtZW50U291cmNlKG1lZGlhRWxlbWVudCl7dGhpcy5oYXNQbGF5YmFja0NvbnRyb2w9ZmFsc2U7dGhpcy5zb3VyY2VUeXBlPSdtZWRpYU5vZGUnO3RoaXMuc291cmNlPXRoaXMuY29udGV4dC5jcmVhdGVNZWRpYUVsZW1lbnRTb3VyY2UobWVkaWFFbGVtZW50KTt0aGlzLmNvbm5lY3QoKTtyZXR1cm4gdGhpczt9c2V0TWVkaWFTdHJlYW1Tb3VyY2UobWVkaWFTdHJlYW0pe3RoaXMuaGFzUGxheWJhY2tDb250cm9sPWZhbHNlO3RoaXMuc291cmNlVHlwZT0nbWVkaWFTdHJlYW1Ob2RlJzt0aGlzLnNvdXJjZT10aGlzLmNvbnRleHQuY3JlYXRlTWVkaWFTdHJlYW1Tb3VyY2UobWVkaWFTdHJlYW0pO3RoaXMuY29ubmVjdCgpO3JldHVybiB0aGlzO31zZXRCdWZmZXIoYXVkaW9CdWZmZXIpe3RoaXMuYnVmZmVyPWF1ZGlvQnVmZmVyO3RoaXMuc291cmNlVHlwZT0nYnVmZmVyJztpZih0aGlzLmF1dG9wbGF5KXRoaXMucGxheSgpO3JldHVybiB0aGlzO31wbGF5KGRlbGF5KXtpZihkZWxheT09PXZvaWQgMCl7ZGVsYXk9MDt9aWYodGhpcy5pc1BsYXlpbmc9PT10cnVlKXtjb25zb2xlLndhcm4oJ1RIUkVFLkF1ZGlvOiBBdWRpbyBpcyBhbHJlYWR5IHBsYXlpbmcuJyk7cmV0dXJuO31pZih0aGlzLmhhc1BsYXliYWNrQ29udHJvbD09PWZhbHNlKXtjb25zb2xlLndhcm4oJ1RIUkVFLkF1ZGlvOiB0aGlzIEF1ZGlvIGhhcyBubyBwbGF5YmFjayBjb250cm9sLicpO3JldHVybjt9dGhpcy5fc3RhcnRlZEF0PXRoaXMuY29udGV4dC5jdXJyZW50VGltZStkZWxheTtjb25zdCBzb3VyY2U9dGhpcy5jb250ZXh0LmNyZWF0ZUJ1ZmZlclNvdXJjZSgpO3NvdXJjZS5idWZmZXI9dGhpcy5idWZmZXI7c291cmNlLmxvb3A9dGhpcy5sb29wO3NvdXJjZS5sb29wU3RhcnQ9dGhpcy5sb29wU3RhcnQ7c291cmNlLmxvb3BFbmQ9dGhpcy5sb29wRW5kO3NvdXJjZS5vbmVuZGVkPXRoaXMub25FbmRlZC5iaW5kKHRoaXMpO3NvdXJjZS5zdGFydCh0aGlzLl9zdGFydGVkQXQsdGhpcy5fcHJvZ3Jlc3MrdGhpcy5vZmZzZXQsdGhpcy5kdXJhdGlvbik7dGhpcy5pc1BsYXlpbmc9dHJ1ZTt0aGlzLnNvdXJjZT1zb3VyY2U7dGhpcy5zZXREZXR1bmUodGhpcy5kZXR1bmUpO3RoaXMuc2V0UGxheWJhY2tSYXRlKHRoaXMucGxheWJhY2tSYXRlKTtyZXR1cm4gdGhpcy5jb25uZWN0KCk7fXBhdXNlKCl7aWYodGhpcy5oYXNQbGF5YmFja0NvbnRyb2w9PT1mYWxzZSl7Y29uc29sZS53YXJuKCdUSFJFRS5BdWRpbzogdGhpcyBBdWRpbyBoYXMgbm8gcGxheWJhY2sgY29udHJvbC4nKTtyZXR1cm47fWlmKHRoaXMuaXNQbGF5aW5nPT09dHJ1ZSl7Ly8gdXBkYXRlIGN1cnJlbnQgcHJvZ3Jlc3MKCXRoaXMuX3Byb2dyZXNzKz1NYXRoLm1heCh0aGlzLmNvbnRleHQuY3VycmVudFRpbWUtdGhpcy5fc3RhcnRlZEF0LDApKnRoaXMucGxheWJhY2tSYXRlO2lmKHRoaXMubG9vcD09PXRydWUpey8vIGVuc3VyZSBfcHJvZ3Jlc3MgZG9lcyBub3QgZXhjZWVkIGR1cmF0aW9uIHdpdGggbG9vcGVkIGF1ZGlvcwoJdGhpcy5fcHJvZ3Jlc3M9dGhpcy5fcHJvZ3Jlc3MlKHRoaXMuZHVyYXRpb258fHRoaXMuYnVmZmVyLmR1cmF0aW9uKTt9dGhpcy5zb3VyY2Uuc3RvcCgpO3RoaXMuc291cmNlLm9uZW5kZWQ9bnVsbDt0aGlzLmlzUGxheWluZz1mYWxzZTt9cmV0dXJuIHRoaXM7fXN0b3AoKXtpZih0aGlzLmhhc1BsYXliYWNrQ29udHJvbD09PWZhbHNlKXtjb25zb2xlLndhcm4oJ1RIUkVFLkF1ZGlvOiB0aGlzIEF1ZGlvIGhhcyBubyBwbGF5YmFjayBjb250cm9sLicpO3JldHVybjt9dGhpcy5fcHJvZ3Jlc3M9MDt0aGlzLnNvdXJjZS5zdG9wKCk7dGhpcy5zb3VyY2Uub25lbmRlZD1udWxsO3RoaXMuaXNQbGF5aW5nPWZhbHNlO3JldHVybiB0aGlzO31jb25uZWN0KCl7aWYodGhpcy5maWx0ZXJzLmxlbmd0aD4wKXt0aGlzLnNvdXJjZS5jb25uZWN0KHRoaXMuZmlsdGVyc1swXSk7Zm9yKGxldCBpPTEsbD10aGlzLmZpbHRlcnMubGVuZ3RoO2k8bDtpKyspe3RoaXMuZmlsdGVyc1tpLTFdLmNvbm5lY3QodGhpcy5maWx0ZXJzW2ldKTt9dGhpcy5maWx0ZXJzW3RoaXMuZmlsdGVycy5sZW5ndGgtMV0uY29ubmVjdCh0aGlzLmdldE91dHB1dCgpKTt9ZWxzZSB7dGhpcy5zb3VyY2UuY29ubmVjdCh0aGlzLmdldE91dHB1dCgpKTt9dGhpcy5fY29ubmVjdGVkPXRydWU7cmV0dXJuIHRoaXM7fWRpc2Nvbm5lY3QoKXtpZih0aGlzLmZpbHRlcnMubGVuZ3RoPjApe3RoaXMuc291cmNlLmRpc2Nvbm5lY3QodGhpcy5maWx0ZXJzWzBdKTtmb3IobGV0IGk9MSxsPXRoaXMuZmlsdGVycy5sZW5ndGg7aTxsO2krKyl7dGhpcy5maWx0ZXJzW2ktMV0uZGlzY29ubmVjdCh0aGlzLmZpbHRlcnNbaV0pO310aGlzLmZpbHRlcnNbdGhpcy5maWx0ZXJzLmxlbmd0aC0xXS5kaXNjb25uZWN0KHRoaXMuZ2V0T3V0cHV0KCkpO31lbHNlIHt0aGlzLnNvdXJjZS5kaXNjb25uZWN0KHRoaXMuZ2V0T3V0cHV0KCkpO310aGlzLl9jb25uZWN0ZWQ9ZmFsc2U7cmV0dXJuIHRoaXM7fWdldEZpbHRlcnMoKXtyZXR1cm4gdGhpcy5maWx0ZXJzO31zZXRGaWx0ZXJzKHZhbHVlKXtpZighdmFsdWUpdmFsdWU9W107aWYodGhpcy5fY29ubmVjdGVkPT09dHJ1ZSl7dGhpcy5kaXNjb25uZWN0KCk7dGhpcy5maWx0ZXJzPXZhbHVlLnNsaWNlKCk7dGhpcy5jb25uZWN0KCk7fWVsc2Uge3RoaXMuZmlsdGVycz12YWx1ZS5zbGljZSgpO31yZXR1cm4gdGhpczt9c2V0RGV0dW5lKHZhbHVlKXt0aGlzLmRldHVuZT12YWx1ZTtpZih0aGlzLnNvdXJjZS5kZXR1bmU9PT11bmRlZmluZWQpcmV0dXJuOy8vIG9ubHkgc2V0IGRldHVuZSB3aGVuIGF2YWlsYWJsZQoJaWYodGhpcy5pc1BsYXlpbmc9PT10cnVlKXt0aGlzLnNvdXJjZS5kZXR1bmUuc2V0VGFyZ2V0QXRUaW1lKHRoaXMuZGV0dW5lLHRoaXMuY29udGV4dC5jdXJyZW50VGltZSwwLjAxKTt9cmV0dXJuIHRoaXM7fWdldERldHVuZSgpe3JldHVybiB0aGlzLmRldHVuZTt9Z2V0RmlsdGVyKCl7cmV0dXJuIHRoaXMuZ2V0RmlsdGVycygpWzBdO31zZXRGaWx0ZXIoZmlsdGVyKXtyZXR1cm4gdGhpcy5zZXRGaWx0ZXJzKGZpbHRlcj9bZmlsdGVyXTpbXSk7fXNldFBsYXliYWNrUmF0ZSh2YWx1ZSl7aWYodGhpcy5oYXNQbGF5YmFja0NvbnRyb2w9PT1mYWxzZSl7Y29uc29sZS53YXJuKCdUSFJFRS5BdWRpbzogdGhpcyBBdWRpbyBoYXMgbm8gcGxheWJhY2sgY29udHJvbC4nKTtyZXR1cm47fXRoaXMucGxheWJhY2tSYXRlPXZhbHVlO2lmKHRoaXMuaXNQbGF5aW5nPT09dHJ1ZSl7dGhpcy5zb3VyY2UucGxheWJhY2tSYXRlLnNldFRhcmdldEF0VGltZSh0aGlzLnBsYXliYWNrUmF0ZSx0aGlzLmNvbnRleHQuY3VycmVudFRpbWUsMC4wMSk7fXJldHVybiB0aGlzO31nZXRQbGF5YmFja1JhdGUoKXtyZXR1cm4gdGhpcy5wbGF5YmFja1JhdGU7fW9uRW5kZWQoKXt0aGlzLmlzUGxheWluZz1mYWxzZTt9Z2V0TG9vcCgpe2lmKHRoaXMuaGFzUGxheWJhY2tDb250cm9sPT09ZmFsc2Upe2NvbnNvbGUud2FybignVEhSRUUuQXVkaW86IHRoaXMgQXVkaW8gaGFzIG5vIHBsYXliYWNrIGNvbnRyb2wuJyk7cmV0dXJuIGZhbHNlO31yZXR1cm4gdGhpcy5sb29wO31zZXRMb29wKHZhbHVlKXtpZih0aGlzLmhhc1BsYXliYWNrQ29udHJvbD09PWZhbHNlKXtjb25zb2xlLndhcm4oJ1RIUkVFLkF1ZGlvOiB0aGlzIEF1ZGlvIGhhcyBubyBwbGF5YmFjayBjb250cm9sLicpO3JldHVybjt9dGhpcy5sb29wPXZhbHVlO2lmKHRoaXMuaXNQbGF5aW5nPT09dHJ1ZSl7dGhpcy5zb3VyY2UubG9vcD10aGlzLmxvb3A7fXJldHVybiB0aGlzO31zZXRMb29wU3RhcnQodmFsdWUpe3RoaXMubG9vcFN0YXJ0PXZhbHVlO3JldHVybiB0aGlzO31zZXRMb29wRW5kKHZhbHVlKXt0aGlzLmxvb3BFbmQ9dmFsdWU7cmV0dXJuIHRoaXM7fWdldFZvbHVtZSgpe3JldHVybiB0aGlzLmdhaW4uZ2Fpbi52YWx1ZTt9c2V0Vm9sdW1lKHZhbHVlKXt0aGlzLmdhaW4uZ2Fpbi5zZXRUYXJnZXRBdFRpbWUodmFsdWUsdGhpcy5jb250ZXh0LmN1cnJlbnRUaW1lLDAuMDEpO3JldHVybiB0aGlzO319Y2xhc3MgUHJvcGVydHlNaXhlcntjb25zdHJ1Y3RvcihiaW5kaW5nLHR5cGVOYW1lLHZhbHVlU2l6ZSl7dGhpcy5iaW5kaW5nPWJpbmRpbmc7dGhpcy52YWx1ZVNpemU9dmFsdWVTaXplO2xldCBtaXhGdW5jdGlvbixtaXhGdW5jdGlvbkFkZGl0aXZlLHNldElkZW50aXR5Oy8vIGJ1ZmZlciBsYXlvdXQ6IFsgaW5jb21pbmcgfCBhY2N1MCB8IGFjY3UxIHwgb3JpZyB8IGFkZEFjY3UgfCAob3B0aW9uYWwgd29yaykgXQoJLy8KCS8vIGludGVycG9sYXRvcnMgY2FuIHVzZSAuYnVmZmVyIGFzIHRoZWlyIC5yZXN1bHQKCS8vIHRoZSBkYXRhIHRoZW4gZ29lcyB0byAnaW5jb21pbmcnCgkvLwoJLy8gJ2FjY3UwJyBhbmQgJ2FjY3UxJyBhcmUgdXNlZCBmcmFtZS1pbnRlcmxlYXZlZCBmb3IKCS8vIHRoZSBjdW11bGF0aXZlIHJlc3VsdCBhbmQgYXJlIGNvbXBhcmVkIHRvIGRldGVjdAoJLy8gY2hhbmdlcwoJLy8KCS8vICdvcmlnJyBzdG9yZXMgdGhlIG9yaWdpbmFsIHN0YXRlIG9mIHRoZSBwcm9wZXJ0eQoJLy8KCS8vICdhZGQnIGlzIHVzZWQgZm9yIGFkZGl0aXZlIGN1bXVsYXRpdmUgcmVzdWx0cwoJLy8KCS8vICd3b3JrJyBpcyBvcHRpb25hbCBhbmQgaXMgb25seSBwcmVzZW50IGZvciBxdWF0ZXJuaW9uIHR5cGVzLiBJdCBpcyB1c2VkCgkvLyB0byBzdG9yZSBpbnRlcm1lZGlhdGUgcXVhdGVybmlvbiBtdWx0aXBsaWNhdGlvbiByZXN1bHRzCglzd2l0Y2godHlwZU5hbWUpe2Nhc2UncXVhdGVybmlvbic6bWl4RnVuY3Rpb249dGhpcy5fc2xlcnA7bWl4RnVuY3Rpb25BZGRpdGl2ZT10aGlzLl9zbGVycEFkZGl0aXZlO3NldElkZW50aXR5PXRoaXMuX3NldEFkZGl0aXZlSWRlbnRpdHlRdWF0ZXJuaW9uO3RoaXMuYnVmZmVyPW5ldyBGbG9hdDY0QXJyYXkodmFsdWVTaXplKjYpO3RoaXMuX3dvcmtJbmRleD01O2JyZWFrO2Nhc2Unc3RyaW5nJzpjYXNlJ2Jvb2wnOm1peEZ1bmN0aW9uPXRoaXMuX3NlbGVjdDsvLyBVc2UgdGhlIHJlZ3VsYXIgbWl4IGZ1bmN0aW9uIGFuZCBmb3IgYWRkaXRpdmUgb24gdGhlc2UgdHlwZXMsCgkvLyBhZGRpdGl2ZSBpcyBub3QgcmVsZXZhbnQgZm9yIG5vbi1udW1lcmljIHR5cGVzCgltaXhGdW5jdGlvbkFkZGl0aXZlPXRoaXMuX3NlbGVjdDtzZXRJZGVudGl0eT10aGlzLl9zZXRBZGRpdGl2ZUlkZW50aXR5T3RoZXI7dGhpcy5idWZmZXI9bmV3IEFycmF5KHZhbHVlU2l6ZSo1KTticmVhaztkZWZhdWx0Om1peEZ1bmN0aW9uPXRoaXMuX2xlcnA7bWl4RnVuY3Rpb25BZGRpdGl2ZT10aGlzLl9sZXJwQWRkaXRpdmU7c2V0SWRlbnRpdHk9dGhpcy5fc2V0QWRkaXRpdmVJZGVudGl0eU51bWVyaWM7dGhpcy5idWZmZXI9bmV3IEZsb2F0NjRBcnJheSh2YWx1ZVNpemUqNSk7fXRoaXMuX21peEJ1ZmZlclJlZ2lvbj1taXhGdW5jdGlvbjt0aGlzLl9taXhCdWZmZXJSZWdpb25BZGRpdGl2ZT1taXhGdW5jdGlvbkFkZGl0aXZlO3RoaXMuX3NldElkZW50aXR5PXNldElkZW50aXR5O3RoaXMuX29yaWdJbmRleD0zO3RoaXMuX2FkZEluZGV4PTQ7dGhpcy5jdW11bGF0aXZlV2VpZ2h0PTA7dGhpcy5jdW11bGF0aXZlV2VpZ2h0QWRkaXRpdmU9MDt0aGlzLnVzZUNvdW50PTA7dGhpcy5yZWZlcmVuY2VDb3VudD0wO30vLyBhY2N1bXVsYXRlIGRhdGEgaW4gdGhlICdpbmNvbWluZycgcmVnaW9uIGludG8gJ2FjY3U8aT4nCglhY2N1bXVsYXRlKGFjY3VJbmRleCx3ZWlnaHQpey8vIG5vdGU6IGhhcHBpbHkgYWNjdW11bGF0aW5nIG5vdGhpbmcgd2hlbiB3ZWlnaHQgPSAwLCB0aGUgY2FsbGVyIGtub3dzCgkvLyB0aGUgd2VpZ2h0IGFuZCBzaG91bGRuJ3QgaGF2ZSBtYWRlIHRoZSBjYWxsIGluIHRoZSBmaXJzdCBwbGFjZQoJY29uc3QgYnVmZmVyPXRoaXMuYnVmZmVyLHN0cmlkZT10aGlzLnZhbHVlU2l6ZSxvZmZzZXQ9YWNjdUluZGV4KnN0cmlkZStzdHJpZGU7bGV0IGN1cnJlbnRXZWlnaHQ9dGhpcy5jdW11bGF0aXZlV2VpZ2h0O2lmKGN1cnJlbnRXZWlnaHQ9PT0wKXsvLyBhY2N1TiA6PSBpbmNvbWluZyAqIHdlaWdodAoJZm9yKGxldCBpPTA7aSE9PXN0cmlkZTsrK2kpe2J1ZmZlcltvZmZzZXQraV09YnVmZmVyW2ldO31jdXJyZW50V2VpZ2h0PXdlaWdodDt9ZWxzZSB7Ly8gYWNjdU4gOj0gYWNjdU4gKyBpbmNvbWluZyAqIHdlaWdodAoJY3VycmVudFdlaWdodCs9d2VpZ2h0O2NvbnN0IG1peD13ZWlnaHQvY3VycmVudFdlaWdodDt0aGlzLl9taXhCdWZmZXJSZWdpb24oYnVmZmVyLG9mZnNldCwwLG1peCxzdHJpZGUpO310aGlzLmN1bXVsYXRpdmVXZWlnaHQ9Y3VycmVudFdlaWdodDt9Ly8gYWNjdW11bGF0ZSBkYXRhIGluIHRoZSAnaW5jb21pbmcnIHJlZ2lvbiBpbnRvICdhZGQnCglhY2N1bXVsYXRlQWRkaXRpdmUod2VpZ2h0KXtjb25zdCBidWZmZXI9dGhpcy5idWZmZXIsc3RyaWRlPXRoaXMudmFsdWVTaXplLG9mZnNldD1zdHJpZGUqdGhpcy5fYWRkSW5kZXg7aWYodGhpcy5jdW11bGF0aXZlV2VpZ2h0QWRkaXRpdmU9PT0wKXsvLyBhZGQgPSBpZGVudGl0eQoJdGhpcy5fc2V0SWRlbnRpdHkoKTt9Ly8gYWRkIDo9IGFkZCArIGluY29taW5nICogd2VpZ2h0Cgl0aGlzLl9taXhCdWZmZXJSZWdpb25BZGRpdGl2ZShidWZmZXIsb2Zmc2V0LDAsd2VpZ2h0LHN0cmlkZSk7dGhpcy5jdW11bGF0aXZlV2VpZ2h0QWRkaXRpdmUrPXdlaWdodDt9Ly8gYXBwbHkgdGhlIHN0YXRlIG9mICdhY2N1PGk+JyB0byB0aGUgYmluZGluZyB3aGVuIGFjY3VzIGRpZmZlcgoJYXBwbHkoYWNjdUluZGV4KXtjb25zdCBzdHJpZGU9dGhpcy52YWx1ZVNpemUsYnVmZmVyPXRoaXMuYnVmZmVyLG9mZnNldD1hY2N1SW5kZXgqc3RyaWRlK3N0cmlkZSx3ZWlnaHQ9dGhpcy5jdW11bGF0aXZlV2VpZ2h0LHdlaWdodEFkZGl0aXZlPXRoaXMuY3VtdWxhdGl2ZVdlaWdodEFkZGl0aXZlLGJpbmRpbmc9dGhpcy5iaW5kaW5nO3RoaXMuY3VtdWxhdGl2ZVdlaWdodD0wO3RoaXMuY3VtdWxhdGl2ZVdlaWdodEFkZGl0aXZlPTA7aWYod2VpZ2h0PDEpey8vIGFjY3VOIDo9IGFjY3VOICsgb3JpZ2luYWwgKiAoIDEgLSBjdW11bGF0aXZlV2VpZ2h0ICkKCWNvbnN0IG9yaWdpbmFsVmFsdWVPZmZzZXQ9c3RyaWRlKnRoaXMuX29yaWdJbmRleDt0aGlzLl9taXhCdWZmZXJSZWdpb24oYnVmZmVyLG9mZnNldCxvcmlnaW5hbFZhbHVlT2Zmc2V0LDEtd2VpZ2h0LHN0cmlkZSk7fWlmKHdlaWdodEFkZGl0aXZlPjApey8vIGFjY3VOIDo9IGFjY3VOICsgYWRkaXRpdmUgYWNjdU4KCXRoaXMuX21peEJ1ZmZlclJlZ2lvbkFkZGl0aXZlKGJ1ZmZlcixvZmZzZXQsdGhpcy5fYWRkSW5kZXgqc3RyaWRlLDEsc3RyaWRlKTt9Zm9yKGxldCBpPXN0cmlkZSxlPXN0cmlkZStzdHJpZGU7aSE9PWU7KytpKXtpZihidWZmZXJbaV0hPT1idWZmZXJbaStzdHJpZGVdKXsvLyB2YWx1ZSBoYXMgY2hhbmdlZCAtPiB1cGRhdGUgc2NlbmUgZ3JhcGgKCWJpbmRpbmcuc2V0VmFsdWUoYnVmZmVyLG9mZnNldCk7YnJlYWs7fX19Ly8gcmVtZW1iZXIgdGhlIHN0YXRlIG9mIHRoZSBib3VuZCBwcm9wZXJ0eSBhbmQgY29weSBpdCB0byBib3RoIGFjY3VzCglzYXZlT3JpZ2luYWxTdGF0ZSgpe2NvbnN0IGJpbmRpbmc9dGhpcy5iaW5kaW5nO2NvbnN0IGJ1ZmZlcj10aGlzLmJ1ZmZlcixzdHJpZGU9dGhpcy52YWx1ZVNpemUsb3JpZ2luYWxWYWx1ZU9mZnNldD1zdHJpZGUqdGhpcy5fb3JpZ0luZGV4O2JpbmRpbmcuZ2V0VmFsdWUoYnVmZmVyLG9yaWdpbmFsVmFsdWVPZmZzZXQpOy8vIGFjY3VbMC4uMV0gOj0gb3JpZyAtLSBpbml0aWFsbHkgZGV0ZWN0IGNoYW5nZXMgYWdhaW5zdCB0aGUgb3JpZ2luYWwKCWZvcihsZXQgaT1zdHJpZGUsZT1vcmlnaW5hbFZhbHVlT2Zmc2V0O2khPT1lOysraSl7YnVmZmVyW2ldPWJ1ZmZlcltvcmlnaW5hbFZhbHVlT2Zmc2V0K2klc3RyaWRlXTt9Ly8gQWRkIHRvIGlkZW50aXR5IGZvciBhZGRpdGl2ZQoJdGhpcy5fc2V0SWRlbnRpdHkoKTt0aGlzLmN1bXVsYXRpdmVXZWlnaHQ9MDt0aGlzLmN1bXVsYXRpdmVXZWlnaHRBZGRpdGl2ZT0wO30vLyBhcHBseSB0aGUgc3RhdGUgcHJldmlvdXNseSB0YWtlbiB2aWEgJ3NhdmVPcmlnaW5hbFN0YXRlJyB0byB0aGUgYmluZGluZwoJcmVzdG9yZU9yaWdpbmFsU3RhdGUoKXtjb25zdCBvcmlnaW5hbFZhbHVlT2Zmc2V0PXRoaXMudmFsdWVTaXplKjM7dGhpcy5iaW5kaW5nLnNldFZhbHVlKHRoaXMuYnVmZmVyLG9yaWdpbmFsVmFsdWVPZmZzZXQpO31fc2V0QWRkaXRpdmVJZGVudGl0eU51bWVyaWMoKXtjb25zdCBzdGFydEluZGV4PXRoaXMuX2FkZEluZGV4KnRoaXMudmFsdWVTaXplO2NvbnN0IGVuZEluZGV4PXN0YXJ0SW5kZXgrdGhpcy52YWx1ZVNpemU7Zm9yKGxldCBpPXN0YXJ0SW5kZXg7aTxlbmRJbmRleDtpKyspe3RoaXMuYnVmZmVyW2ldPTA7fX1fc2V0QWRkaXRpdmVJZGVudGl0eVF1YXRlcm5pb24oKXt0aGlzLl9zZXRBZGRpdGl2ZUlkZW50aXR5TnVtZXJpYygpO3RoaXMuYnVmZmVyW3RoaXMuX2FkZEluZGV4KnRoaXMudmFsdWVTaXplKzNdPTE7fV9zZXRBZGRpdGl2ZUlkZW50aXR5T3RoZXIoKXtjb25zdCBzdGFydEluZGV4PXRoaXMuX29yaWdJbmRleCp0aGlzLnZhbHVlU2l6ZTtjb25zdCB0YXJnZXRJbmRleD10aGlzLl9hZGRJbmRleCp0aGlzLnZhbHVlU2l6ZTtmb3IobGV0IGk9MDtpPHRoaXMudmFsdWVTaXplO2krKyl7dGhpcy5idWZmZXJbdGFyZ2V0SW5kZXgraV09dGhpcy5idWZmZXJbc3RhcnRJbmRleCtpXTt9fS8vIG1peCBmdW5jdGlvbnMKCV9zZWxlY3QoYnVmZmVyLGRzdE9mZnNldCxzcmNPZmZzZXQsdCxzdHJpZGUpe2lmKHQ+PTAuNSl7Zm9yKGxldCBpPTA7aSE9PXN0cmlkZTsrK2kpe2J1ZmZlcltkc3RPZmZzZXQraV09YnVmZmVyW3NyY09mZnNldCtpXTt9fX1fc2xlcnAoYnVmZmVyLGRzdE9mZnNldCxzcmNPZmZzZXQsdCl7UXVhdGVybmlvbi5zbGVycEZsYXQoYnVmZmVyLGRzdE9mZnNldCxidWZmZXIsZHN0T2Zmc2V0LGJ1ZmZlcixzcmNPZmZzZXQsdCk7fV9zbGVycEFkZGl0aXZlKGJ1ZmZlcixkc3RPZmZzZXQsc3JjT2Zmc2V0LHQsc3RyaWRlKXtjb25zdCB3b3JrT2Zmc2V0PXRoaXMuX3dvcmtJbmRleCpzdHJpZGU7Ly8gU3RvcmUgcmVzdWx0IGluIGludGVybWVkaWF0ZSBidWZmZXIgb2Zmc2V0CglRdWF0ZXJuaW9uLm11bHRpcGx5UXVhdGVybmlvbnNGbGF0KGJ1ZmZlcix3b3JrT2Zmc2V0LGJ1ZmZlcixkc3RPZmZzZXQsYnVmZmVyLHNyY09mZnNldCk7Ly8gU2xlcnAgdG8gdGhlIGludGVybWVkaWF0ZSByZXN1bHQKCVF1YXRlcm5pb24uc2xlcnBGbGF0KGJ1ZmZlcixkc3RPZmZzZXQsYnVmZmVyLGRzdE9mZnNldCxidWZmZXIsd29ya09mZnNldCx0KTt9X2xlcnAoYnVmZmVyLGRzdE9mZnNldCxzcmNPZmZzZXQsdCxzdHJpZGUpe2NvbnN0IHM9MS10O2ZvcihsZXQgaT0wO2khPT1zdHJpZGU7KytpKXtjb25zdCBqPWRzdE9mZnNldCtpO2J1ZmZlcltqXT1idWZmZXJbal0qcytidWZmZXJbc3JjT2Zmc2V0K2ldKnQ7fX1fbGVycEFkZGl0aXZlKGJ1ZmZlcixkc3RPZmZzZXQsc3JjT2Zmc2V0LHQsc3RyaWRlKXtmb3IobGV0IGk9MDtpIT09c3RyaWRlOysraSl7Y29uc3Qgaj1kc3RPZmZzZXQraTtidWZmZXJbal09YnVmZmVyW2pdK2J1ZmZlcltzcmNPZmZzZXQraV0qdDt9fX0vLyBDaGFyYWN0ZXJzIFtdLjovIGFyZSByZXNlcnZlZCBmb3IgdHJhY2sgYmluZGluZyBzeW50YXguCgljb25zdCBfUkVTRVJWRURfQ0hBUlNfUkU9J1xcW1xcXVxcLjpcXC8nO2NvbnN0IF9yZXNlcnZlZFJlPW5ldyBSZWdFeHAoJ1snK19SRVNFUlZFRF9DSEFSU19SRSsnXScsJ2cnKTsvLyBBdHRlbXB0cyB0byBhbGxvdyBub2RlIG5hbWVzIGZyb20gYW55IGxhbmd1YWdlLiBFUzUncyBgXHdgIHJlZ2V4cCBtYXRjaGVzCgkvLyBvbmx5IGxhdGluIGNoYXJhY3RlcnMsIGFuZCB0aGUgdW5pY29kZSBccHtMfSBpcyBub3QgeWV0IHN1cHBvcnRlZC4gU28KCS8vIGluc3RlYWQsIHdlIGV4Y2x1ZGUgcmVzZXJ2ZWQgY2hhcmFjdGVycyBhbmQgbWF0Y2ggZXZlcnl0aGluZyBlbHNlLgoJY29uc3QgX3dvcmRDaGFyPSdbXicrX1JFU0VSVkVEX0NIQVJTX1JFKyddJztjb25zdCBfd29yZENoYXJPckRvdD0nW14nK19SRVNFUlZFRF9DSEFSU19SRS5yZXBsYWNlKCdcXC4nLCcnKSsnXSc7Ly8gUGFyZW50IGRpcmVjdG9yaWVzLCBkZWxpbWl0ZWQgYnkgJy8nIG9yICc6Jy4gQ3VycmVudGx5IHVudXNlZCwgYnV0IG11c3QKCS8vIGJlIG1hdGNoZWQgdG8gcGFyc2UgdGhlIHJlc3Qgb2YgdGhlIHRyYWNrIG5hbWUuCgljb25zdCBfZGlyZWN0b3J5UmU9LygoPzpXQytbXC86XSkqKS8uc291cmNlLnJlcGxhY2UoJ1dDJyxfd29yZENoYXIpOy8vIFRhcmdldCBub2RlLiBNYXkgY29udGFpbiB3b3JkIGNoYXJhY3RlcnMgKGEtekEtWjAtOV8pIGFuZCAnLicgb3IgJy0nLgoJY29uc3QgX25vZGVSZT0vKFdDT0QrKT8vLnNvdXJjZS5yZXBsYWNlKCdXQ09EJyxfd29yZENoYXJPckRvdCk7Ly8gT2JqZWN0IG9uIHRhcmdldCBub2RlLCBhbmQgYWNjZXNzb3IuIE1heSBub3QgY29udGFpbiByZXNlcnZlZAoJLy8gY2hhcmFjdGVycy4gQWNjZXNzb3IgbWF5IGNvbnRhaW4gYW55IGNoYXJhY3RlciBleGNlcHQgY2xvc2luZyBicmFja2V0LgoJY29uc3QgX29iamVjdFJlPS8oPzpcLihXQyspKD86XFsoLispXF0pPyk/Ly5zb3VyY2UucmVwbGFjZSgnV0MnLF93b3JkQ2hhcik7Ly8gUHJvcGVydHkgYW5kIGFjY2Vzc29yLiBNYXkgbm90IGNvbnRhaW4gcmVzZXJ2ZWQgY2hhcmFjdGVycy4gQWNjZXNzb3IgbWF5CgkvLyBjb250YWluIGFueSBub24tYnJhY2tldCBjaGFyYWN0ZXJzLgoJY29uc3QgX3Byb3BlcnR5UmU9L1wuKFdDKykoPzpcWyguKylcXSk/Ly5zb3VyY2UucmVwbGFjZSgnV0MnLF93b3JkQ2hhcik7Y29uc3QgX3RyYWNrUmU9bmV3IFJlZ0V4cCgnJysnXicrX2RpcmVjdG9yeVJlK19ub2RlUmUrX29iamVjdFJlK19wcm9wZXJ0eVJlKyckJyk7Y29uc3QgX3N1cHBvcnRlZE9iamVjdE5hbWVzPVsnbWF0ZXJpYWwnLCdtYXRlcmlhbHMnLCdib25lcyddO2NsYXNzIENvbXBvc2l0ZXtjb25zdHJ1Y3Rvcih0YXJnZXRHcm91cCxwYXRoLG9wdGlvbmFsUGFyc2VkUGF0aCl7Y29uc3QgcGFyc2VkUGF0aD1vcHRpb25hbFBhcnNlZFBhdGh8fFByb3BlcnR5QmluZGluZy5wYXJzZVRyYWNrTmFtZShwYXRoKTt0aGlzLl90YXJnZXRHcm91cD10YXJnZXRHcm91cDt0aGlzLl9iaW5kaW5ncz10YXJnZXRHcm91cC5zdWJzY3JpYmVfKHBhdGgscGFyc2VkUGF0aCk7fWdldFZhbHVlKGFycmF5LG9mZnNldCl7dGhpcy5iaW5kKCk7Ly8gYmluZCBhbGwgYmluZGluZwoJY29uc3QgZmlyc3RWYWxpZEluZGV4PXRoaXMuX3RhcmdldEdyb3VwLm5DYWNoZWRPYmplY3RzXyxiaW5kaW5nPXRoaXMuX2JpbmRpbmdzW2ZpcnN0VmFsaWRJbmRleF07Ly8gYW5kIG9ubHkgY2FsbCAuZ2V0VmFsdWUgb24gdGhlIGZpcnN0CglpZihiaW5kaW5nIT09dW5kZWZpbmVkKWJpbmRpbmcuZ2V0VmFsdWUoYXJyYXksb2Zmc2V0KTt9c2V0VmFsdWUoYXJyYXksb2Zmc2V0KXtjb25zdCBiaW5kaW5ncz10aGlzLl9iaW5kaW5ncztmb3IobGV0IGk9dGhpcy5fdGFyZ2V0R3JvdXAubkNhY2hlZE9iamVjdHNfLG49YmluZGluZ3MubGVuZ3RoO2khPT1uOysraSl7YmluZGluZ3NbaV0uc2V0VmFsdWUoYXJyYXksb2Zmc2V0KTt9fWJpbmQoKXtjb25zdCBiaW5kaW5ncz10aGlzLl9iaW5kaW5ncztmb3IobGV0IGk9dGhpcy5fdGFyZ2V0R3JvdXAubkNhY2hlZE9iamVjdHNfLG49YmluZGluZ3MubGVuZ3RoO2khPT1uOysraSl7YmluZGluZ3NbaV0uYmluZCgpO319dW5iaW5kKCl7Y29uc3QgYmluZGluZ3M9dGhpcy5fYmluZGluZ3M7Zm9yKGxldCBpPXRoaXMuX3RhcmdldEdyb3VwLm5DYWNoZWRPYmplY3RzXyxuPWJpbmRpbmdzLmxlbmd0aDtpIT09bjsrK2kpe2JpbmRpbmdzW2ldLnVuYmluZCgpO319fS8vIE5vdGU6IFRoaXMgY2xhc3MgdXNlcyBhIFN0YXRlIHBhdHRlcm4gb24gYSBwZXItbWV0aG9kIGJhc2lzOgoJLy8gJ2JpbmQnIHNldHMgJ3RoaXMuZ2V0VmFsdWUnIC8gJ3NldFZhbHVlJyBhbmQgc2hhZG93cyB0aGUKCS8vIHByb3RvdHlwZSB2ZXJzaW9uIG9mIHRoZXNlIG1ldGhvZHMgd2l0aCBvbmUgdGhhdCByZXByZXNlbnRzCgkvLyB0aGUgYm91bmQgc3RhdGUuIFdoZW4gdGhlIHByb3BlcnR5IGlzIG5vdCBmb3VuZCwgdGhlIG1ldGhvZHMKCS8vIGJlY29tZSBuby1vcHMuCgljbGFzcyBQcm9wZXJ0eUJpbmRpbmd7Y29uc3RydWN0b3Iocm9vdE5vZGUscGF0aCxwYXJzZWRQYXRoKXt0aGlzLnBhdGg9cGF0aDt0aGlzLnBhcnNlZFBhdGg9cGFyc2VkUGF0aHx8UHJvcGVydHlCaW5kaW5nLnBhcnNlVHJhY2tOYW1lKHBhdGgpO3RoaXMubm9kZT1Qcm9wZXJ0eUJpbmRpbmcuZmluZE5vZGUocm9vdE5vZGUsdGhpcy5wYXJzZWRQYXRoLm5vZGVOYW1lKXx8cm9vdE5vZGU7dGhpcy5yb290Tm9kZT1yb290Tm9kZTsvLyBpbml0aWFsIHN0YXRlIG9mIHRoZXNlIG1ldGhvZHMgdGhhdCBjYWxscyAnYmluZCcKCXRoaXMuZ2V0VmFsdWU9dGhpcy5fZ2V0VmFsdWVfdW5ib3VuZDt0aGlzLnNldFZhbHVlPXRoaXMuX3NldFZhbHVlX3VuYm91bmQ7fXN0YXRpYyBjcmVhdGUocm9vdCxwYXRoLHBhcnNlZFBhdGgpe2lmKCEocm9vdCYmcm9vdC5pc0FuaW1hdGlvbk9iamVjdEdyb3VwKSl7cmV0dXJuIG5ldyBQcm9wZXJ0eUJpbmRpbmcocm9vdCxwYXRoLHBhcnNlZFBhdGgpO31lbHNlIHtyZXR1cm4gbmV3IFByb3BlcnR5QmluZGluZy5Db21wb3NpdGUocm9vdCxwYXRoLHBhcnNlZFBhdGgpO319LyoqCgkJICogUmVwbGFjZXMgc3BhY2VzIHdpdGggdW5kZXJzY29yZXMgYW5kIHJlbW92ZXMgdW5zdXBwb3J0ZWQgY2hhcmFjdGVycyBmcm9tCgkJICogbm9kZSBuYW1lcywgdG8gZW5zdXJlIGNvbXBhdGliaWxpdHkgd2l0aCBwYXJzZVRyYWNrTmFtZSgpLgoJCSAqCgkJICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgTm9kZSBuYW1lIHRvIGJlIHNhbml0aXplZC4KCQkgKiBAcmV0dXJuIHtzdHJpbmd9CgkJICovc3RhdGljIHNhbml0aXplTm9kZU5hbWUobmFtZSl7cmV0dXJuIG5hbWUucmVwbGFjZSgvXHMvZywnXycpLnJlcGxhY2UoX3Jlc2VydmVkUmUsJycpO31zdGF0aWMgcGFyc2VUcmFja05hbWUodHJhY2tOYW1lKXtjb25zdCBtYXRjaGVzPV90cmFja1JlLmV4ZWModHJhY2tOYW1lKTtpZighbWF0Y2hlcyl7dGhyb3cgbmV3IEVycm9yKCdQcm9wZXJ0eUJpbmRpbmc6IENhbm5vdCBwYXJzZSB0cmFja05hbWU6ICcrdHJhY2tOYW1lKTt9Y29uc3QgcmVzdWx0cz17Ly8gZGlyZWN0b3J5TmFtZTogbWF0Y2hlc1sgMSBdLCAvLyAodHNjaHcpIGN1cnJlbnRseSB1bnVzZWQKCW5vZGVOYW1lOm1hdGNoZXNbMl0sb2JqZWN0TmFtZTptYXRjaGVzWzNdLG9iamVjdEluZGV4Om1hdGNoZXNbNF0scHJvcGVydHlOYW1lOm1hdGNoZXNbNV0sLy8gcmVxdWlyZWQKCXByb3BlcnR5SW5kZXg6bWF0Y2hlc1s2XX07Y29uc3QgbGFzdERvdD1yZXN1bHRzLm5vZGVOYW1lJiZyZXN1bHRzLm5vZGVOYW1lLmxhc3RJbmRleE9mKCcuJyk7aWYobGFzdERvdCE9PXVuZGVmaW5lZCYmbGFzdERvdCE9PS0xKXtjb25zdCBvYmplY3ROYW1lPXJlc3VsdHMubm9kZU5hbWUuc3Vic3RyaW5nKGxhc3REb3QrMSk7Ly8gT2JqZWN0IG5hbWVzIG11c3QgYmUgY2hlY2tlZCBhZ2FpbnN0IGFuIGFsbG93bGlzdC4gT3RoZXJ3aXNlLCB0aGVyZQoJLy8gaXMgbm8gd2F5IHRvIHBhcnNlICdmb28uYmFyLmJheic6ICdiYXonIG11c3QgYmUgYSBwcm9wZXJ0eSwgYnV0CgkvLyAnYmFyJyBjb3VsZCBiZSB0aGUgb2JqZWN0TmFtZSwgb3IgcGFydCBvZiBhIG5vZGVOYW1lICh3aGljaCBjYW4KCS8vIGluY2x1ZGUgJy4nIGNoYXJhY3RlcnMpLgoJaWYoX3N1cHBvcnRlZE9iamVjdE5hbWVzLmluZGV4T2Yob2JqZWN0TmFtZSkhPT0tMSl7cmVzdWx0cy5ub2RlTmFtZT1yZXN1bHRzLm5vZGVOYW1lLnN1YnN0cmluZygwLGxhc3REb3QpO3Jlc3VsdHMub2JqZWN0TmFtZT1vYmplY3ROYW1lO319aWYocmVzdWx0cy5wcm9wZXJ0eU5hbWU9PT1udWxsfHxyZXN1bHRzLnByb3BlcnR5TmFtZS5sZW5ndGg9PT0wKXt0aHJvdyBuZXcgRXJyb3IoJ1Byb3BlcnR5QmluZGluZzogY2FuIG5vdCBwYXJzZSBwcm9wZXJ0eU5hbWUgZnJvbSB0cmFja05hbWU6ICcrdHJhY2tOYW1lKTt9cmV0dXJuIHJlc3VsdHM7fXN0YXRpYyBmaW5kTm9kZShyb290LG5vZGVOYW1lKXtpZighbm9kZU5hbWV8fG5vZGVOYW1lPT09Jyd8fG5vZGVOYW1lPT09Jy4nfHxub2RlTmFtZT09PS0xfHxub2RlTmFtZT09PXJvb3QubmFtZXx8bm9kZU5hbWU9PT1yb290LnV1aWQpe3JldHVybiByb290O30vLyBzZWFyY2ggaW50byBza2VsZXRvbiBib25lcy4KCWlmKHJvb3Quc2tlbGV0b24pe2NvbnN0IGJvbmU9cm9vdC5za2VsZXRvbi5nZXRCb25lQnlOYW1lKG5vZGVOYW1lKTtpZihib25lIT09dW5kZWZpbmVkKXtyZXR1cm4gYm9uZTt9fS8vIHNlYXJjaCBpbnRvIG5vZGUgc3VidHJlZS4KCWlmKHJvb3QuY2hpbGRyZW4pe2NvbnN0IHNlYXJjaE5vZGVTdWJ0cmVlPWZ1bmN0aW9uKGNoaWxkcmVuKXtmb3IobGV0IGk9MDtpPGNoaWxkcmVuLmxlbmd0aDtpKyspe2NvbnN0IGNoaWxkTm9kZT1jaGlsZHJlbltpXTtpZihjaGlsZE5vZGUubmFtZT09PW5vZGVOYW1lfHxjaGlsZE5vZGUudXVpZD09PW5vZGVOYW1lKXtyZXR1cm4gY2hpbGROb2RlO31jb25zdCByZXN1bHQ9c2VhcmNoTm9kZVN1YnRyZWUoY2hpbGROb2RlLmNoaWxkcmVuKTtpZihyZXN1bHQpcmV0dXJuIHJlc3VsdDt9cmV0dXJuIG51bGw7fTtjb25zdCBzdWJUcmVlTm9kZT1zZWFyY2hOb2RlU3VidHJlZShyb290LmNoaWxkcmVuKTtpZihzdWJUcmVlTm9kZSl7cmV0dXJuIHN1YlRyZWVOb2RlO319cmV0dXJuIG51bGw7fS8vIHRoZXNlIGFyZSB1c2VkIHRvICJiaW5kIiBhIG5vbmV4aXN0ZW50IHByb3BlcnR5CglfZ2V0VmFsdWVfdW5hdmFpbGFibGUoKXt9X3NldFZhbHVlX3VuYXZhaWxhYmxlKCl7fS8vIEdldHRlcnMKCV9nZXRWYWx1ZV9kaXJlY3QoYnVmZmVyLG9mZnNldCl7YnVmZmVyW29mZnNldF09dGhpcy50YXJnZXRPYmplY3RbdGhpcy5wcm9wZXJ0eU5hbWVdO31fZ2V0VmFsdWVfYXJyYXkoYnVmZmVyLG9mZnNldCl7Y29uc3Qgc291cmNlPXRoaXMucmVzb2x2ZWRQcm9wZXJ0eTtmb3IobGV0IGk9MCxuPXNvdXJjZS5sZW5ndGg7aSE9PW47KytpKXtidWZmZXJbb2Zmc2V0KytdPXNvdXJjZVtpXTt9fV9nZXRWYWx1ZV9hcnJheUVsZW1lbnQoYnVmZmVyLG9mZnNldCl7YnVmZmVyW29mZnNldF09dGhpcy5yZXNvbHZlZFByb3BlcnR5W3RoaXMucHJvcGVydHlJbmRleF07fV9nZXRWYWx1ZV90b0FycmF5KGJ1ZmZlcixvZmZzZXQpe3RoaXMucmVzb2x2ZWRQcm9wZXJ0eS50b0FycmF5KGJ1ZmZlcixvZmZzZXQpO30vLyBEaXJlY3QKCV9zZXRWYWx1ZV9kaXJlY3QoYnVmZmVyLG9mZnNldCl7dGhpcy50YXJnZXRPYmplY3RbdGhpcy5wcm9wZXJ0eU5hbWVdPWJ1ZmZlcltvZmZzZXRdO31fc2V0VmFsdWVfZGlyZWN0X3NldE5lZWRzVXBkYXRlKGJ1ZmZlcixvZmZzZXQpe3RoaXMudGFyZ2V0T2JqZWN0W3RoaXMucHJvcGVydHlOYW1lXT1idWZmZXJbb2Zmc2V0XTt0aGlzLnRhcmdldE9iamVjdC5uZWVkc1VwZGF0ZT10cnVlO31fc2V0VmFsdWVfZGlyZWN0X3NldE1hdHJpeFdvcmxkTmVlZHNVcGRhdGUoYnVmZmVyLG9mZnNldCl7dGhpcy50YXJnZXRPYmplY3RbdGhpcy5wcm9wZXJ0eU5hbWVdPWJ1ZmZlcltvZmZzZXRdO3RoaXMudGFyZ2V0T2JqZWN0Lm1hdHJpeFdvcmxkTmVlZHNVcGRhdGU9dHJ1ZTt9Ly8gRW50aXJlQXJyYXkKCV9zZXRWYWx1ZV9hcnJheShidWZmZXIsb2Zmc2V0KXtjb25zdCBkZXN0PXRoaXMucmVzb2x2ZWRQcm9wZXJ0eTtmb3IobGV0IGk9MCxuPWRlc3QubGVuZ3RoO2khPT1uOysraSl7ZGVzdFtpXT1idWZmZXJbb2Zmc2V0KytdO319X3NldFZhbHVlX2FycmF5X3NldE5lZWRzVXBkYXRlKGJ1ZmZlcixvZmZzZXQpe2NvbnN0IGRlc3Q9dGhpcy5yZXNvbHZlZFByb3BlcnR5O2ZvcihsZXQgaT0wLG49ZGVzdC5sZW5ndGg7aSE9PW47KytpKXtkZXN0W2ldPWJ1ZmZlcltvZmZzZXQrK107fXRoaXMudGFyZ2V0T2JqZWN0Lm5lZWRzVXBkYXRlPXRydWU7fV9zZXRWYWx1ZV9hcnJheV9zZXRNYXRyaXhXb3JsZE5lZWRzVXBkYXRlKGJ1ZmZlcixvZmZzZXQpe2NvbnN0IGRlc3Q9dGhpcy5yZXNvbHZlZFByb3BlcnR5O2ZvcihsZXQgaT0wLG49ZGVzdC5sZW5ndGg7aSE9PW47KytpKXtkZXN0W2ldPWJ1ZmZlcltvZmZzZXQrK107fXRoaXMudGFyZ2V0T2JqZWN0Lm1hdHJpeFdvcmxkTmVlZHNVcGRhdGU9dHJ1ZTt9Ly8gQXJyYXlFbGVtZW50Cglfc2V0VmFsdWVfYXJyYXlFbGVtZW50KGJ1ZmZlcixvZmZzZXQpe3RoaXMucmVzb2x2ZWRQcm9wZXJ0eVt0aGlzLnByb3BlcnR5SW5kZXhdPWJ1ZmZlcltvZmZzZXRdO31fc2V0VmFsdWVfYXJyYXlFbGVtZW50X3NldE5lZWRzVXBkYXRlKGJ1ZmZlcixvZmZzZXQpe3RoaXMucmVzb2x2ZWRQcm9wZXJ0eVt0aGlzLnByb3BlcnR5SW5kZXhdPWJ1ZmZlcltvZmZzZXRdO3RoaXMudGFyZ2V0T2JqZWN0Lm5lZWRzVXBkYXRlPXRydWU7fV9zZXRWYWx1ZV9hcnJheUVsZW1lbnRfc2V0TWF0cml4V29ybGROZWVkc1VwZGF0ZShidWZmZXIsb2Zmc2V0KXt0aGlzLnJlc29sdmVkUHJvcGVydHlbdGhpcy5wcm9wZXJ0eUluZGV4XT1idWZmZXJbb2Zmc2V0XTt0aGlzLnRhcmdldE9iamVjdC5tYXRyaXhXb3JsZE5lZWRzVXBkYXRlPXRydWU7fS8vIEhhc1RvRnJvbUFycmF5Cglfc2V0VmFsdWVfZnJvbUFycmF5KGJ1ZmZlcixvZmZzZXQpe3RoaXMucmVzb2x2ZWRQcm9wZXJ0eS5mcm9tQXJyYXkoYnVmZmVyLG9mZnNldCk7fV9zZXRWYWx1ZV9mcm9tQXJyYXlfc2V0TmVlZHNVcGRhdGUoYnVmZmVyLG9mZnNldCl7dGhpcy5yZXNvbHZlZFByb3BlcnR5LmZyb21BcnJheShidWZmZXIsb2Zmc2V0KTt0aGlzLnRhcmdldE9iamVjdC5uZWVkc1VwZGF0ZT10cnVlO31fc2V0VmFsdWVfZnJvbUFycmF5X3NldE1hdHJpeFdvcmxkTmVlZHNVcGRhdGUoYnVmZmVyLG9mZnNldCl7dGhpcy5yZXNvbHZlZFByb3BlcnR5LmZyb21BcnJheShidWZmZXIsb2Zmc2V0KTt0aGlzLnRhcmdldE9iamVjdC5tYXRyaXhXb3JsZE5lZWRzVXBkYXRlPXRydWU7fV9nZXRWYWx1ZV91bmJvdW5kKHRhcmdldEFycmF5LG9mZnNldCl7dGhpcy5iaW5kKCk7dGhpcy5nZXRWYWx1ZSh0YXJnZXRBcnJheSxvZmZzZXQpO31fc2V0VmFsdWVfdW5ib3VuZChzb3VyY2VBcnJheSxvZmZzZXQpe3RoaXMuYmluZCgpO3RoaXMuc2V0VmFsdWUoc291cmNlQXJyYXksb2Zmc2V0KTt9Ly8gY3JlYXRlIGdldHRlciAvIHNldHRlciBwYWlyIGZvciBhIHByb3BlcnR5IGluIHRoZSBzY2VuZSBncmFwaAoJYmluZCgpe2xldCB0YXJnZXRPYmplY3Q9dGhpcy5ub2RlO2NvbnN0IHBhcnNlZFBhdGg9dGhpcy5wYXJzZWRQYXRoO2NvbnN0IG9iamVjdE5hbWU9cGFyc2VkUGF0aC5vYmplY3ROYW1lO2NvbnN0IHByb3BlcnR5TmFtZT1wYXJzZWRQYXRoLnByb3BlcnR5TmFtZTtsZXQgcHJvcGVydHlJbmRleD1wYXJzZWRQYXRoLnByb3BlcnR5SW5kZXg7aWYoIXRhcmdldE9iamVjdCl7dGFyZ2V0T2JqZWN0PVByb3BlcnR5QmluZGluZy5maW5kTm9kZSh0aGlzLnJvb3ROb2RlLHBhcnNlZFBhdGgubm9kZU5hbWUpfHx0aGlzLnJvb3ROb2RlO3RoaXMubm9kZT10YXJnZXRPYmplY3Q7fS8vIHNldCBmYWlsIHN0YXRlIHNvIHdlIGNhbiBqdXN0ICdyZXR1cm4nIG9uIGVycm9yCgl0aGlzLmdldFZhbHVlPXRoaXMuX2dldFZhbHVlX3VuYXZhaWxhYmxlO3RoaXMuc2V0VmFsdWU9dGhpcy5fc2V0VmFsdWVfdW5hdmFpbGFibGU7Ly8gZW5zdXJlIHRoZXJlIGlzIGEgdmFsdWUgbm9kZQoJaWYoIXRhcmdldE9iamVjdCl7Y29uc29sZS5lcnJvcignVEhSRUUuUHJvcGVydHlCaW5kaW5nOiBUcnlpbmcgdG8gdXBkYXRlIG5vZGUgZm9yIHRyYWNrOiAnK3RoaXMucGF0aCsnIGJ1dCBpdCB3YXNuXCd0IGZvdW5kLicpO3JldHVybjt9aWYob2JqZWN0TmFtZSl7bGV0IG9iamVjdEluZGV4PXBhcnNlZFBhdGgub2JqZWN0SW5kZXg7Ly8gc3BlY2lhbCBjYXNlcyB3ZXJlIHdlIG5lZWQgdG8gcmVhY2ggZGVlcGVyIGludG8gdGhlIGhpZXJhcmNoeSB0byBnZXQgdGhlIGZhY2UgbWF0ZXJpYWxzLi4uLgoJc3dpdGNoKG9iamVjdE5hbWUpe2Nhc2UnbWF0ZXJpYWxzJzppZighdGFyZ2V0T2JqZWN0Lm1hdGVyaWFsKXtjb25zb2xlLmVycm9yKCdUSFJFRS5Qcm9wZXJ0eUJpbmRpbmc6IENhbiBub3QgYmluZCB0byBtYXRlcmlhbCBhcyBub2RlIGRvZXMgbm90IGhhdmUgYSBtYXRlcmlhbC4nLHRoaXMpO3JldHVybjt9aWYoIXRhcmdldE9iamVjdC5tYXRlcmlhbC5tYXRlcmlhbHMpe2NvbnNvbGUuZXJyb3IoJ1RIUkVFLlByb3BlcnR5QmluZGluZzogQ2FuIG5vdCBiaW5kIHRvIG1hdGVyaWFsLm1hdGVyaWFscyBhcyBub2RlLm1hdGVyaWFsIGRvZXMgbm90IGhhdmUgYSBtYXRlcmlhbHMgYXJyYXkuJyx0aGlzKTtyZXR1cm47fXRhcmdldE9iamVjdD10YXJnZXRPYmplY3QubWF0ZXJpYWwubWF0ZXJpYWxzO2JyZWFrO2Nhc2UnYm9uZXMnOmlmKCF0YXJnZXRPYmplY3Quc2tlbGV0b24pe2NvbnNvbGUuZXJyb3IoJ1RIUkVFLlByb3BlcnR5QmluZGluZzogQ2FuIG5vdCBiaW5kIHRvIGJvbmVzIGFzIG5vZGUgZG9lcyBub3QgaGF2ZSBhIHNrZWxldG9uLicsdGhpcyk7cmV0dXJuO30vLyBwb3RlbnRpYWwgZnV0dXJlIG9wdGltaXphdGlvbjogc2tpcCB0aGlzIGlmIHByb3BlcnR5SW5kZXggaXMgYWxyZWFkeSBhbiBpbnRlZ2VyCgkvLyBhbmQgY29udmVydCB0aGUgaW50ZWdlciBzdHJpbmcgdG8gYSB0cnVlIGludGVnZXIuCgl0YXJnZXRPYmplY3Q9dGFyZ2V0T2JqZWN0LnNrZWxldG9uLmJvbmVzOy8vIHN1cHBvcnQgcmVzb2x2aW5nIG1vcnBoVGFyZ2V0IG5hbWVzIGludG8gaW5kaWNlcy4KCWZvcihsZXQgaT0wO2k8dGFyZ2V0T2JqZWN0Lmxlbmd0aDtpKyspe2lmKHRhcmdldE9iamVjdFtpXS5uYW1lPT09b2JqZWN0SW5kZXgpe29iamVjdEluZGV4PWk7YnJlYWs7fX1icmVhaztkZWZhdWx0OmlmKHRhcmdldE9iamVjdFtvYmplY3ROYW1lXT09PXVuZGVmaW5lZCl7Y29uc29sZS5lcnJvcignVEhSRUUuUHJvcGVydHlCaW5kaW5nOiBDYW4gbm90IGJpbmQgdG8gb2JqZWN0TmFtZSBvZiBub2RlIHVuZGVmaW5lZC4nLHRoaXMpO3JldHVybjt9dGFyZ2V0T2JqZWN0PXRhcmdldE9iamVjdFtvYmplY3ROYW1lXTt9aWYob2JqZWN0SW5kZXghPT11bmRlZmluZWQpe2lmKHRhcmdldE9iamVjdFtvYmplY3RJbmRleF09PT11bmRlZmluZWQpe2NvbnNvbGUuZXJyb3IoJ1RIUkVFLlByb3BlcnR5QmluZGluZzogVHJ5aW5nIHRvIGJpbmQgdG8gb2JqZWN0SW5kZXggb2Ygb2JqZWN0TmFtZSwgYnV0IGlzIHVuZGVmaW5lZC4nLHRoaXMsdGFyZ2V0T2JqZWN0KTtyZXR1cm47fXRhcmdldE9iamVjdD10YXJnZXRPYmplY3Rbb2JqZWN0SW5kZXhdO319Ly8gcmVzb2x2ZSBwcm9wZXJ0eQoJY29uc3Qgbm9kZVByb3BlcnR5PXRhcmdldE9iamVjdFtwcm9wZXJ0eU5hbWVdO2lmKG5vZGVQcm9wZXJ0eT09PXVuZGVmaW5lZCl7Y29uc3Qgbm9kZU5hbWU9cGFyc2VkUGF0aC5ub2RlTmFtZTtjb25zb2xlLmVycm9yKCdUSFJFRS5Qcm9wZXJ0eUJpbmRpbmc6IFRyeWluZyB0byB1cGRhdGUgcHJvcGVydHkgZm9yIHRyYWNrOiAnK25vZGVOYW1lKycuJytwcm9wZXJ0eU5hbWUrJyBidXQgaXQgd2FzblwndCBmb3VuZC4nLHRhcmdldE9iamVjdCk7cmV0dXJuO30vLyBkZXRlcm1pbmUgdmVyc2lvbmluZyBzY2hlbWUKCWxldCB2ZXJzaW9uaW5nPXRoaXMuVmVyc2lvbmluZy5Ob25lO3RoaXMudGFyZ2V0T2JqZWN0PXRhcmdldE9iamVjdDtpZih0YXJnZXRPYmplY3QubmVlZHNVcGRhdGUhPT11bmRlZmluZWQpey8vIG1hdGVyaWFsCgl2ZXJzaW9uaW5nPXRoaXMuVmVyc2lvbmluZy5OZWVkc1VwZGF0ZTt9ZWxzZSBpZih0YXJnZXRPYmplY3QubWF0cml4V29ybGROZWVkc1VwZGF0ZSE9PXVuZGVmaW5lZCl7Ly8gbm9kZSB0cmFuc2Zvcm0KCXZlcnNpb25pbmc9dGhpcy5WZXJzaW9uaW5nLk1hdHJpeFdvcmxkTmVlZHNVcGRhdGU7fS8vIGRldGVybWluZSBob3cgdGhlIHByb3BlcnR5IGdldHMgYm91bmQKCWxldCBiaW5kaW5nVHlwZT10aGlzLkJpbmRpbmdUeXBlLkRpcmVjdDtpZihwcm9wZXJ0eUluZGV4IT09dW5kZWZpbmVkKXsvLyBhY2Nlc3MgYSBzdWIgZWxlbWVudCBvZiB0aGUgcHJvcGVydHkgYXJyYXkgKG9ubHkgcHJpbWl0aXZlcyBhcmUgc3VwcG9ydGVkIHJpZ2h0IG5vdykKCWlmKHByb3BlcnR5TmFtZT09PSdtb3JwaFRhcmdldEluZmx1ZW5jZXMnKXsvLyBwb3RlbnRpYWwgb3B0aW1pemF0aW9uLCBza2lwIHRoaXMgaWYgcHJvcGVydHlJbmRleCBpcyBhbHJlYWR5IGFuIGludGVnZXIsIGFuZCBjb252ZXJ0IHRoZSBpbnRlZ2VyIHN0cmluZyB0byBhIHRydWUgaW50ZWdlci4KCS8vIHN1cHBvcnQgcmVzb2x2aW5nIG1vcnBoVGFyZ2V0IG5hbWVzIGludG8gaW5kaWNlcy4KCWlmKCF0YXJnZXRPYmplY3QuZ2VvbWV0cnkpe2NvbnNvbGUuZXJyb3IoJ1RIUkVFLlByb3BlcnR5QmluZGluZzogQ2FuIG5vdCBiaW5kIHRvIG1vcnBoVGFyZ2V0SW5mbHVlbmNlcyBiZWNhdXNlIG5vZGUgZG9lcyBub3QgaGF2ZSBhIGdlb21ldHJ5LicsdGhpcyk7cmV0dXJuO31pZih0YXJnZXRPYmplY3QuZ2VvbWV0cnkuaXNCdWZmZXJHZW9tZXRyeSl7aWYoIXRhcmdldE9iamVjdC5nZW9tZXRyeS5tb3JwaEF0dHJpYnV0ZXMpe2NvbnNvbGUuZXJyb3IoJ1RIUkVFLlByb3BlcnR5QmluZGluZzogQ2FuIG5vdCBiaW5kIHRvIG1vcnBoVGFyZ2V0SW5mbHVlbmNlcyBiZWNhdXNlIG5vZGUgZG9lcyBub3QgaGF2ZSBhIGdlb21ldHJ5Lm1vcnBoQXR0cmlidXRlcy4nLHRoaXMpO3JldHVybjt9aWYodGFyZ2V0T2JqZWN0Lm1vcnBoVGFyZ2V0RGljdGlvbmFyeVtwcm9wZXJ0eUluZGV4XSE9PXVuZGVmaW5lZCl7cHJvcGVydHlJbmRleD10YXJnZXRPYmplY3QubW9ycGhUYXJnZXREaWN0aW9uYXJ5W3Byb3BlcnR5SW5kZXhdO319ZWxzZSB7Y29uc29sZS5lcnJvcignVEhSRUUuUHJvcGVydHlCaW5kaW5nOiBDYW4gbm90IGJpbmQgdG8gbW9ycGhUYXJnZXRJbmZsdWVuY2VzIG9uIFRIUkVFLkdlb21ldHJ5LiBVc2UgVEhSRUUuQnVmZmVyR2VvbWV0cnkgaW5zdGVhZC4nLHRoaXMpO3JldHVybjt9fWJpbmRpbmdUeXBlPXRoaXMuQmluZGluZ1R5cGUuQXJyYXlFbGVtZW50O3RoaXMucmVzb2x2ZWRQcm9wZXJ0eT1ub2RlUHJvcGVydHk7dGhpcy5wcm9wZXJ0eUluZGV4PXByb3BlcnR5SW5kZXg7fWVsc2UgaWYobm9kZVByb3BlcnR5LmZyb21BcnJheSE9PXVuZGVmaW5lZCYmbm9kZVByb3BlcnR5LnRvQXJyYXkhPT11bmRlZmluZWQpey8vIG11c3QgdXNlIGNvcHkgZm9yIE9iamVjdDNELkV1bGVyL1F1YXRlcm5pb24KCWJpbmRpbmdUeXBlPXRoaXMuQmluZGluZ1R5cGUuSGFzRnJvbVRvQXJyYXk7dGhpcy5yZXNvbHZlZFByb3BlcnR5PW5vZGVQcm9wZXJ0eTt9ZWxzZSBpZihBcnJheS5pc0FycmF5KG5vZGVQcm9wZXJ0eSkpe2JpbmRpbmdUeXBlPXRoaXMuQmluZGluZ1R5cGUuRW50aXJlQXJyYXk7dGhpcy5yZXNvbHZlZFByb3BlcnR5PW5vZGVQcm9wZXJ0eTt9ZWxzZSB7dGhpcy5wcm9wZXJ0eU5hbWU9cHJvcGVydHlOYW1lO30vLyBzZWxlY3QgZ2V0dGVyIC8gc2V0dGVyCgl0aGlzLmdldFZhbHVlPXRoaXMuR2V0dGVyQnlCaW5kaW5nVHlwZVtiaW5kaW5nVHlwZV07dGhpcy5zZXRWYWx1ZT10aGlzLlNldHRlckJ5QmluZGluZ1R5cGVBbmRWZXJzaW9uaW5nW2JpbmRpbmdUeXBlXVt2ZXJzaW9uaW5nXTt9dW5iaW5kKCl7dGhpcy5ub2RlPW51bGw7Ly8gYmFjayB0byB0aGUgcHJvdG90eXBlIHZlcnNpb24gb2YgZ2V0VmFsdWUgLyBzZXRWYWx1ZQoJLy8gbm90ZTogYXZvaWRpbmcgdG8gbXV0YXRlIHRoZSBzaGFwZSBvZiAndGhpcycgdmlhICdkZWxldGUnCgl0aGlzLmdldFZhbHVlPXRoaXMuX2dldFZhbHVlX3VuYm91bmQ7dGhpcy5zZXRWYWx1ZT10aGlzLl9zZXRWYWx1ZV91bmJvdW5kO319UHJvcGVydHlCaW5kaW5nLkNvbXBvc2l0ZT1Db21wb3NpdGU7UHJvcGVydHlCaW5kaW5nLnByb3RvdHlwZS5CaW5kaW5nVHlwZT17RGlyZWN0OjAsRW50aXJlQXJyYXk6MSxBcnJheUVsZW1lbnQ6MixIYXNGcm9tVG9BcnJheTozfTtQcm9wZXJ0eUJpbmRpbmcucHJvdG90eXBlLlZlcnNpb25pbmc9e05vbmU6MCxOZWVkc1VwZGF0ZToxLE1hdHJpeFdvcmxkTmVlZHNVcGRhdGU6Mn07UHJvcGVydHlCaW5kaW5nLnByb3RvdHlwZS5HZXR0ZXJCeUJpbmRpbmdUeXBlPVtQcm9wZXJ0eUJpbmRpbmcucHJvdG90eXBlLl9nZXRWYWx1ZV9kaXJlY3QsUHJvcGVydHlCaW5kaW5nLnByb3RvdHlwZS5fZ2V0VmFsdWVfYXJyYXksUHJvcGVydHlCaW5kaW5nLnByb3RvdHlwZS5fZ2V0VmFsdWVfYXJyYXlFbGVtZW50LFByb3BlcnR5QmluZGluZy5wcm90b3R5cGUuX2dldFZhbHVlX3RvQXJyYXldO1Byb3BlcnR5QmluZGluZy5wcm90b3R5cGUuU2V0dGVyQnlCaW5kaW5nVHlwZUFuZFZlcnNpb25pbmc9W1svLyBEaXJlY3QKCVByb3BlcnR5QmluZGluZy5wcm90b3R5cGUuX3NldFZhbHVlX2RpcmVjdCxQcm9wZXJ0eUJpbmRpbmcucHJvdG90eXBlLl9zZXRWYWx1ZV9kaXJlY3Rfc2V0TmVlZHNVcGRhdGUsUHJvcGVydHlCaW5kaW5nLnByb3RvdHlwZS5fc2V0VmFsdWVfZGlyZWN0X3NldE1hdHJpeFdvcmxkTmVlZHNVcGRhdGVdLFsvLyBFbnRpcmVBcnJheQoJUHJvcGVydHlCaW5kaW5nLnByb3RvdHlwZS5fc2V0VmFsdWVfYXJyYXksUHJvcGVydHlCaW5kaW5nLnByb3RvdHlwZS5fc2V0VmFsdWVfYXJyYXlfc2V0TmVlZHNVcGRhdGUsUHJvcGVydHlCaW5kaW5nLnByb3RvdHlwZS5fc2V0VmFsdWVfYXJyYXlfc2V0TWF0cml4V29ybGROZWVkc1VwZGF0ZV0sWy8vIEFycmF5RWxlbWVudAoJUHJvcGVydHlCaW5kaW5nLnByb3RvdHlwZS5fc2V0VmFsdWVfYXJyYXlFbGVtZW50LFByb3BlcnR5QmluZGluZy5wcm90b3R5cGUuX3NldFZhbHVlX2FycmF5RWxlbWVudF9zZXROZWVkc1VwZGF0ZSxQcm9wZXJ0eUJpbmRpbmcucHJvdG90eXBlLl9zZXRWYWx1ZV9hcnJheUVsZW1lbnRfc2V0TWF0cml4V29ybGROZWVkc1VwZGF0ZV0sWy8vIEhhc1RvRnJvbUFycmF5CglQcm9wZXJ0eUJpbmRpbmcucHJvdG90eXBlLl9zZXRWYWx1ZV9mcm9tQXJyYXksUHJvcGVydHlCaW5kaW5nLnByb3RvdHlwZS5fc2V0VmFsdWVfZnJvbUFycmF5X3NldE5lZWRzVXBkYXRlLFByb3BlcnR5QmluZGluZy5wcm90b3R5cGUuX3NldFZhbHVlX2Zyb21BcnJheV9zZXRNYXRyaXhXb3JsZE5lZWRzVXBkYXRlXV07Y2xhc3MgQW5pbWF0aW9uQWN0aW9ue2NvbnN0cnVjdG9yKG1peGVyLGNsaXAsbG9jYWxSb290LGJsZW5kTW9kZSl7aWYobG9jYWxSb290PT09dm9pZCAwKXtsb2NhbFJvb3Q9bnVsbDt9aWYoYmxlbmRNb2RlPT09dm9pZCAwKXtibGVuZE1vZGU9Y2xpcC5ibGVuZE1vZGU7fXRoaXMuX21peGVyPW1peGVyO3RoaXMuX2NsaXA9Y2xpcDt0aGlzLl9sb2NhbFJvb3Q9bG9jYWxSb290O3RoaXMuYmxlbmRNb2RlPWJsZW5kTW9kZTtjb25zdCB0cmFja3M9Y2xpcC50cmFja3MsblRyYWNrcz10cmFja3MubGVuZ3RoLGludGVycG9sYW50cz1uZXcgQXJyYXkoblRyYWNrcyk7Y29uc3QgaW50ZXJwb2xhbnRTZXR0aW5ncz17ZW5kaW5nU3RhcnQ6WmVyb0N1cnZhdHVyZUVuZGluZyxlbmRpbmdFbmQ6WmVyb0N1cnZhdHVyZUVuZGluZ307Zm9yKGxldCBpPTA7aSE9PW5UcmFja3M7KytpKXtjb25zdCBpbnRlcnBvbGFudD10cmFja3NbaV0uY3JlYXRlSW50ZXJwb2xhbnQobnVsbCk7aW50ZXJwb2xhbnRzW2ldPWludGVycG9sYW50O2ludGVycG9sYW50LnNldHRpbmdzPWludGVycG9sYW50U2V0dGluZ3M7fXRoaXMuX2ludGVycG9sYW50U2V0dGluZ3M9aW50ZXJwb2xhbnRTZXR0aW5nczt0aGlzLl9pbnRlcnBvbGFudHM9aW50ZXJwb2xhbnRzOy8vIGJvdW5kIGJ5IHRoZSBtaXhlcgoJLy8gaW5zaWRlOiBQcm9wZXJ0eU1peGVyIChtYW5hZ2VkIGJ5IHRoZSBtaXhlcikKCXRoaXMuX3Byb3BlcnR5QmluZGluZ3M9bmV3IEFycmF5KG5UcmFja3MpO3RoaXMuX2NhY2hlSW5kZXg9bnVsbDsvLyBmb3IgdGhlIG1lbW9yeSBtYW5hZ2VyCgl0aGlzLl9ieUNsaXBDYWNoZUluZGV4PW51bGw7Ly8gZm9yIHRoZSBtZW1vcnkgbWFuYWdlcgoJdGhpcy5fdGltZVNjYWxlSW50ZXJwb2xhbnQ9bnVsbDt0aGlzLl93ZWlnaHRJbnRlcnBvbGFudD1udWxsO3RoaXMubG9vcD1Mb29wUmVwZWF0O3RoaXMuX2xvb3BDb3VudD0tMTsvLyBnbG9iYWwgbWl4ZXIgdGltZSB3aGVuIHRoZSBhY3Rpb24gaXMgdG8gYmUgc3RhcnRlZAoJLy8gaXQncyBzZXQgYmFjayB0byAnbnVsbCcgdXBvbiBzdGFydCBvZiB0aGUgYWN0aW9uCgl0aGlzLl9zdGFydFRpbWU9bnVsbDsvLyBzY2FsZWQgbG9jYWwgdGltZSBvZiB0aGUgYWN0aW9uCgkvLyBnZXRzIGNsYW1wZWQgb3Igd3JhcHBlZCB0byAwLi5jbGlwLmR1cmF0aW9uIGFjY29yZGluZyB0byBsb29wCgl0aGlzLnRpbWU9MDt0aGlzLnRpbWVTY2FsZT0xO3RoaXMuX2VmZmVjdGl2ZVRpbWVTY2FsZT0xO3RoaXMud2VpZ2h0PTE7dGhpcy5fZWZmZWN0aXZlV2VpZ2h0PTE7dGhpcy5yZXBldGl0aW9ucz1JbmZpbml0eTsvLyBuby4gb2YgcmVwZXRpdGlvbnMgd2hlbiBsb29waW5nCgl0aGlzLnBhdXNlZD1mYWxzZTsvLyB0cnVlIC0+IHplcm8gZWZmZWN0aXZlIHRpbWUgc2NhbGUKCXRoaXMuZW5hYmxlZD10cnVlOy8vIGZhbHNlIC0+IHplcm8gZWZmZWN0aXZlIHdlaWdodAoJdGhpcy5jbGFtcFdoZW5GaW5pc2hlZD1mYWxzZTsvLyBrZWVwIGZlZWRpbmcgdGhlIGxhc3QgZnJhbWU/Cgl0aGlzLnplcm9TbG9wZUF0U3RhcnQ9dHJ1ZTsvLyBmb3Igc21vb3RoIGludGVycG9sYXRpb24gdy9vIHNlcGFyYXRlCgl0aGlzLnplcm9TbG9wZUF0RW5kPXRydWU7Ly8gY2xpcHMgZm9yIHN0YXJ0LCBsb29wIGFuZCBlbmQKCX0vLyBTdGF0ZSAmIFNjaGVkdWxpbmcKCXBsYXkoKXt0aGlzLl9taXhlci5fYWN0aXZhdGVBY3Rpb24odGhpcyk7cmV0dXJuIHRoaXM7fXN0b3AoKXt0aGlzLl9taXhlci5fZGVhY3RpdmF0ZUFjdGlvbih0aGlzKTtyZXR1cm4gdGhpcy5yZXNldCgpO31yZXNldCgpe3RoaXMucGF1c2VkPWZhbHNlO3RoaXMuZW5hYmxlZD10cnVlO3RoaXMudGltZT0wOy8vIHJlc3RhcnQgY2xpcAoJdGhpcy5fbG9vcENvdW50PS0xOy8vIGZvcmdldCBwcmV2aW91cyBsb29wcwoJdGhpcy5fc3RhcnRUaW1lPW51bGw7Ly8gZm9yZ2V0IHNjaGVkdWxpbmcKCXJldHVybiB0aGlzLnN0b3BGYWRpbmcoKS5zdG9wV2FycGluZygpO31pc1J1bm5pbmcoKXtyZXR1cm4gdGhpcy5lbmFibGVkJiYhdGhpcy5wYXVzZWQmJnRoaXMudGltZVNjYWxlIT09MCYmdGhpcy5fc3RhcnRUaW1lPT09bnVsbCYmdGhpcy5fbWl4ZXIuX2lzQWN0aXZlQWN0aW9uKHRoaXMpO30vLyByZXR1cm4gdHJ1ZSB3aGVuIHBsYXkgaGFzIGJlZW4gY2FsbGVkCglpc1NjaGVkdWxlZCgpe3JldHVybiB0aGlzLl9taXhlci5faXNBY3RpdmVBY3Rpb24odGhpcyk7fXN0YXJ0QXQodGltZSl7dGhpcy5fc3RhcnRUaW1lPXRpbWU7cmV0dXJuIHRoaXM7fXNldExvb3AobW9kZSxyZXBldGl0aW9ucyl7dGhpcy5sb29wPW1vZGU7dGhpcy5yZXBldGl0aW9ucz1yZXBldGl0aW9ucztyZXR1cm4gdGhpczt9Ly8gV2VpZ2h0CgkvLyBzZXQgdGhlIHdlaWdodCBzdG9wcGluZyBhbnkgc2NoZWR1bGVkIGZhZGluZwoJLy8gYWx0aG91Z2ggLmVuYWJsZWQgPSBmYWxzZSB5aWVsZHMgYW4gZWZmZWN0aXZlIHdlaWdodCBvZiB6ZXJvLCB0aGlzCgkvLyBtZXRob2QgZG9lcyAqbm90KiBjaGFuZ2UgLmVuYWJsZWQsIGJlY2F1c2UgaXQgd291bGQgYmUgY29uZnVzaW5nCglzZXRFZmZlY3RpdmVXZWlnaHQod2VpZ2h0KXt0aGlzLndlaWdodD13ZWlnaHQ7Ly8gbm90ZTogc2FtZSBsb2dpYyBhcyB3aGVuIHVwZGF0ZWQgYXQgcnVudGltZQoJdGhpcy5fZWZmZWN0aXZlV2VpZ2h0PXRoaXMuZW5hYmxlZD93ZWlnaHQ6MDtyZXR1cm4gdGhpcy5zdG9wRmFkaW5nKCk7fS8vIHJldHVybiB0aGUgd2VpZ2h0IGNvbnNpZGVyaW5nIGZhZGluZyBhbmQgLmVuYWJsZWQKCWdldEVmZmVjdGl2ZVdlaWdodCgpe3JldHVybiB0aGlzLl9lZmZlY3RpdmVXZWlnaHQ7fWZhZGVJbihkdXJhdGlvbil7cmV0dXJuIHRoaXMuX3NjaGVkdWxlRmFkaW5nKGR1cmF0aW9uLDAsMSk7fWZhZGVPdXQoZHVyYXRpb24pe3JldHVybiB0aGlzLl9zY2hlZHVsZUZhZGluZyhkdXJhdGlvbiwxLDApO31jcm9zc0ZhZGVGcm9tKGZhZGVPdXRBY3Rpb24sZHVyYXRpb24sd2FycCl7ZmFkZU91dEFjdGlvbi5mYWRlT3V0KGR1cmF0aW9uKTt0aGlzLmZhZGVJbihkdXJhdGlvbik7aWYod2FycCl7Y29uc3QgZmFkZUluRHVyYXRpb249dGhpcy5fY2xpcC5kdXJhdGlvbixmYWRlT3V0RHVyYXRpb249ZmFkZU91dEFjdGlvbi5fY2xpcC5kdXJhdGlvbixzdGFydEVuZFJhdGlvPWZhZGVPdXREdXJhdGlvbi9mYWRlSW5EdXJhdGlvbixlbmRTdGFydFJhdGlvPWZhZGVJbkR1cmF0aW9uL2ZhZGVPdXREdXJhdGlvbjtmYWRlT3V0QWN0aW9uLndhcnAoMS4wLHN0YXJ0RW5kUmF0aW8sZHVyYXRpb24pO3RoaXMud2FycChlbmRTdGFydFJhdGlvLDEuMCxkdXJhdGlvbik7fXJldHVybiB0aGlzO31jcm9zc0ZhZGVUbyhmYWRlSW5BY3Rpb24sZHVyYXRpb24sd2FycCl7cmV0dXJuIGZhZGVJbkFjdGlvbi5jcm9zc0ZhZGVGcm9tKHRoaXMsZHVyYXRpb24sd2FycCk7fXN0b3BGYWRpbmcoKXtjb25zdCB3ZWlnaHRJbnRlcnBvbGFudD10aGlzLl93ZWlnaHRJbnRlcnBvbGFudDtpZih3ZWlnaHRJbnRlcnBvbGFudCE9PW51bGwpe3RoaXMuX3dlaWdodEludGVycG9sYW50PW51bGw7dGhpcy5fbWl4ZXIuX3Rha2VCYWNrQ29udHJvbEludGVycG9sYW50KHdlaWdodEludGVycG9sYW50KTt9cmV0dXJuIHRoaXM7fS8vIFRpbWUgU2NhbGUgQ29udHJvbAoJLy8gc2V0IHRoZSB0aW1lIHNjYWxlIHN0b3BwaW5nIGFueSBzY2hlZHVsZWQgd2FycGluZwoJLy8gYWx0aG91Z2ggLnBhdXNlZCA9IHRydWUgeWllbGRzIGFuIGVmZmVjdGl2ZSB0aW1lIHNjYWxlIG9mIHplcm8sIHRoaXMKCS8vIG1ldGhvZCBkb2VzICpub3QqIGNoYW5nZSAucGF1c2VkLCBiZWNhdXNlIGl0IHdvdWxkIGJlIGNvbmZ1c2luZwoJc2V0RWZmZWN0aXZlVGltZVNjYWxlKHRpbWVTY2FsZSl7dGhpcy50aW1lU2NhbGU9dGltZVNjYWxlO3RoaXMuX2VmZmVjdGl2ZVRpbWVTY2FsZT10aGlzLnBhdXNlZD8wOnRpbWVTY2FsZTtyZXR1cm4gdGhpcy5zdG9wV2FycGluZygpO30vLyByZXR1cm4gdGhlIHRpbWUgc2NhbGUgY29uc2lkZXJpbmcgd2FycGluZyBhbmQgLnBhdXNlZAoJZ2V0RWZmZWN0aXZlVGltZVNjYWxlKCl7cmV0dXJuIHRoaXMuX2VmZmVjdGl2ZVRpbWVTY2FsZTt9c2V0RHVyYXRpb24oZHVyYXRpb24pe3RoaXMudGltZVNjYWxlPXRoaXMuX2NsaXAuZHVyYXRpb24vZHVyYXRpb247cmV0dXJuIHRoaXMuc3RvcFdhcnBpbmcoKTt9c3luY1dpdGgoYWN0aW9uKXt0aGlzLnRpbWU9YWN0aW9uLnRpbWU7dGhpcy50aW1lU2NhbGU9YWN0aW9uLnRpbWVTY2FsZTtyZXR1cm4gdGhpcy5zdG9wV2FycGluZygpO31oYWx0KGR1cmF0aW9uKXtyZXR1cm4gdGhpcy53YXJwKHRoaXMuX2VmZmVjdGl2ZVRpbWVTY2FsZSwwLGR1cmF0aW9uKTt9d2FycChzdGFydFRpbWVTY2FsZSxlbmRUaW1lU2NhbGUsZHVyYXRpb24pe2NvbnN0IG1peGVyPXRoaXMuX21peGVyLG5vdz1taXhlci50aW1lLHRpbWVTY2FsZT10aGlzLnRpbWVTY2FsZTtsZXQgaW50ZXJwb2xhbnQ9dGhpcy5fdGltZVNjYWxlSW50ZXJwb2xhbnQ7aWYoaW50ZXJwb2xhbnQ9PT1udWxsKXtpbnRlcnBvbGFudD1taXhlci5fbGVuZENvbnRyb2xJbnRlcnBvbGFudCgpO3RoaXMuX3RpbWVTY2FsZUludGVycG9sYW50PWludGVycG9sYW50O31jb25zdCB0aW1lcz1pbnRlcnBvbGFudC5wYXJhbWV0ZXJQb3NpdGlvbnMsdmFsdWVzPWludGVycG9sYW50LnNhbXBsZVZhbHVlczt0aW1lc1swXT1ub3c7dGltZXNbMV09bm93K2R1cmF0aW9uO3ZhbHVlc1swXT1zdGFydFRpbWVTY2FsZS90aW1lU2NhbGU7dmFsdWVzWzFdPWVuZFRpbWVTY2FsZS90aW1lU2NhbGU7cmV0dXJuIHRoaXM7fXN0b3BXYXJwaW5nKCl7Y29uc3QgdGltZVNjYWxlSW50ZXJwb2xhbnQ9dGhpcy5fdGltZVNjYWxlSW50ZXJwb2xhbnQ7aWYodGltZVNjYWxlSW50ZXJwb2xhbnQhPT1udWxsKXt0aGlzLl90aW1lU2NhbGVJbnRlcnBvbGFudD1udWxsO3RoaXMuX21peGVyLl90YWtlQmFja0NvbnRyb2xJbnRlcnBvbGFudCh0aW1lU2NhbGVJbnRlcnBvbGFudCk7fXJldHVybiB0aGlzO30vLyBPYmplY3QgQWNjZXNzb3JzCglnZXRNaXhlcigpe3JldHVybiB0aGlzLl9taXhlcjt9Z2V0Q2xpcCgpe3JldHVybiB0aGlzLl9jbGlwO31nZXRSb290KCl7cmV0dXJuIHRoaXMuX2xvY2FsUm9vdHx8dGhpcy5fbWl4ZXIuX3Jvb3Q7fS8vIEludGVybmEKCV91cGRhdGUodGltZSxkZWx0YVRpbWUsdGltZURpcmVjdGlvbixhY2N1SW5kZXgpey8vIGNhbGxlZCBieSB0aGUgbWl4ZXIKCWlmKCF0aGlzLmVuYWJsZWQpey8vIGNhbGwgLl91cGRhdGVXZWlnaHQoKSB0byB1cGRhdGUgLl9lZmZlY3RpdmVXZWlnaHQKCXRoaXMuX3VwZGF0ZVdlaWdodCh0aW1lKTtyZXR1cm47fWNvbnN0IHN0YXJ0VGltZT10aGlzLl9zdGFydFRpbWU7aWYoc3RhcnRUaW1lIT09bnVsbCl7Ly8gY2hlY2sgZm9yIHNjaGVkdWxlZCBzdGFydCBvZiBhY3Rpb24KCWNvbnN0IHRpbWVSdW5uaW5nPSh0aW1lLXN0YXJ0VGltZSkqdGltZURpcmVjdGlvbjtpZih0aW1lUnVubmluZzwwfHx0aW1lRGlyZWN0aW9uPT09MCl7cmV0dXJuOy8vIHlldCB0byBjb21lIC8gZG9uJ3QgZGVjaWRlIHdoZW4gZGVsdGEgPSAwCgl9Ly8gc3RhcnQKCXRoaXMuX3N0YXJ0VGltZT1udWxsOy8vIHVuc2NoZWR1bGUKCWRlbHRhVGltZT10aW1lRGlyZWN0aW9uKnRpbWVSdW5uaW5nO30vLyBhcHBseSB0aW1lIHNjYWxlIGFuZCBhZHZhbmNlIHRpbWUKCWRlbHRhVGltZSo9dGhpcy5fdXBkYXRlVGltZVNjYWxlKHRpbWUpO2NvbnN0IGNsaXBUaW1lPXRoaXMuX3VwZGF0ZVRpbWUoZGVsdGFUaW1lKTsvLyBub3RlOiBfdXBkYXRlVGltZSBtYXkgZGlzYWJsZSB0aGUgYWN0aW9uIHJlc3VsdGluZyBpbgoJLy8gYW4gZWZmZWN0aXZlIHdlaWdodCBvZiAwCgljb25zdCB3ZWlnaHQ9dGhpcy5fdXBkYXRlV2VpZ2h0KHRpbWUpO2lmKHdlaWdodD4wKXtjb25zdCBpbnRlcnBvbGFudHM9dGhpcy5faW50ZXJwb2xhbnRzO2NvbnN0IHByb3BlcnR5TWl4ZXJzPXRoaXMuX3Byb3BlcnR5QmluZGluZ3M7c3dpdGNoKHRoaXMuYmxlbmRNb2RlKXtjYXNlIEFkZGl0aXZlQW5pbWF0aW9uQmxlbmRNb2RlOmZvcihsZXQgaj0wLG09aW50ZXJwb2xhbnRzLmxlbmd0aDtqIT09bTsrK2ope2ludGVycG9sYW50c1tqXS5ldmFsdWF0ZShjbGlwVGltZSk7cHJvcGVydHlNaXhlcnNbal0uYWNjdW11bGF0ZUFkZGl0aXZlKHdlaWdodCk7fWJyZWFrO2Nhc2UgTm9ybWFsQW5pbWF0aW9uQmxlbmRNb2RlOmRlZmF1bHQ6Zm9yKGxldCBqPTAsbT1pbnRlcnBvbGFudHMubGVuZ3RoO2ohPT1tOysrail7aW50ZXJwb2xhbnRzW2pdLmV2YWx1YXRlKGNsaXBUaW1lKTtwcm9wZXJ0eU1peGVyc1tqXS5hY2N1bXVsYXRlKGFjY3VJbmRleCx3ZWlnaHQpO319fX1fdXBkYXRlV2VpZ2h0KHRpbWUpe2xldCB3ZWlnaHQ9MDtpZih0aGlzLmVuYWJsZWQpe3dlaWdodD10aGlzLndlaWdodDtjb25zdCBpbnRlcnBvbGFudD10aGlzLl93ZWlnaHRJbnRlcnBvbGFudDtpZihpbnRlcnBvbGFudCE9PW51bGwpe2NvbnN0IGludGVycG9sYW50VmFsdWU9aW50ZXJwb2xhbnQuZXZhbHVhdGUodGltZSlbMF07d2VpZ2h0Kj1pbnRlcnBvbGFudFZhbHVlO2lmKHRpbWU+aW50ZXJwb2xhbnQucGFyYW1ldGVyUG9zaXRpb25zWzFdKXt0aGlzLnN0b3BGYWRpbmcoKTtpZihpbnRlcnBvbGFudFZhbHVlPT09MCl7Ly8gZmFkZWQgb3V0LCBkaXNhYmxlCgl0aGlzLmVuYWJsZWQ9ZmFsc2U7fX19fXRoaXMuX2VmZmVjdGl2ZVdlaWdodD13ZWlnaHQ7cmV0dXJuIHdlaWdodDt9X3VwZGF0ZVRpbWVTY2FsZSh0aW1lKXtsZXQgdGltZVNjYWxlPTA7aWYoIXRoaXMucGF1c2VkKXt0aW1lU2NhbGU9dGhpcy50aW1lU2NhbGU7Y29uc3QgaW50ZXJwb2xhbnQ9dGhpcy5fdGltZVNjYWxlSW50ZXJwb2xhbnQ7aWYoaW50ZXJwb2xhbnQhPT1udWxsKXtjb25zdCBpbnRlcnBvbGFudFZhbHVlPWludGVycG9sYW50LmV2YWx1YXRlKHRpbWUpWzBdO3RpbWVTY2FsZSo9aW50ZXJwb2xhbnRWYWx1ZTtpZih0aW1lPmludGVycG9sYW50LnBhcmFtZXRlclBvc2l0aW9uc1sxXSl7dGhpcy5zdG9wV2FycGluZygpO2lmKHRpbWVTY2FsZT09PTApey8vIG1vdGlvbiBoYXMgaGFsdGVkLCBwYXVzZQoJdGhpcy5wYXVzZWQ9dHJ1ZTt9ZWxzZSB7Ly8gd2FycCBkb25lIC0gYXBwbHkgZmluYWwgdGltZSBzY2FsZQoJdGhpcy50aW1lU2NhbGU9dGltZVNjYWxlO319fX10aGlzLl9lZmZlY3RpdmVUaW1lU2NhbGU9dGltZVNjYWxlO3JldHVybiB0aW1lU2NhbGU7fV91cGRhdGVUaW1lKGRlbHRhVGltZSl7Y29uc3QgZHVyYXRpb249dGhpcy5fY2xpcC5kdXJhdGlvbjtjb25zdCBsb29wPXRoaXMubG9vcDtsZXQgdGltZT10aGlzLnRpbWUrZGVsdGFUaW1lO2xldCBsb29wQ291bnQ9dGhpcy5fbG9vcENvdW50O2NvbnN0IHBpbmdQb25nPWxvb3A9PT1Mb29wUGluZ1Bvbmc7aWYoZGVsdGFUaW1lPT09MCl7aWYobG9vcENvdW50PT09LTEpcmV0dXJuIHRpbWU7cmV0dXJuIHBpbmdQb25nJiYobG9vcENvdW50JjEpPT09MT9kdXJhdGlvbi10aW1lOnRpbWU7fWlmKGxvb3A9PT1Mb29wT25jZSl7aWYobG9vcENvdW50PT09LTEpey8vIGp1c3Qgc3RhcnRlZAoJdGhpcy5fbG9vcENvdW50PTA7dGhpcy5fc2V0RW5kaW5ncyh0cnVlLHRydWUsZmFsc2UpO31oYW5kbGVfc3RvcDp7aWYodGltZT49ZHVyYXRpb24pe3RpbWU9ZHVyYXRpb247fWVsc2UgaWYodGltZTwwKXt0aW1lPTA7fWVsc2Uge3RoaXMudGltZT10aW1lO2JyZWFrIGhhbmRsZV9zdG9wO31pZih0aGlzLmNsYW1wV2hlbkZpbmlzaGVkKXRoaXMucGF1c2VkPXRydWU7ZWxzZSB0aGlzLmVuYWJsZWQ9ZmFsc2U7dGhpcy50aW1lPXRpbWU7dGhpcy5fbWl4ZXIuZGlzcGF0Y2hFdmVudCh7dHlwZTonZmluaXNoZWQnLGFjdGlvbjp0aGlzLGRpcmVjdGlvbjpkZWx0YVRpbWU8MD8tMToxfSk7fX1lbHNlIHsvLyByZXBldGl0aXZlIFJlcGVhdCBvciBQaW5nUG9uZwoJaWYobG9vcENvdW50PT09LTEpey8vIGp1c3Qgc3RhcnRlZAoJaWYoZGVsdGFUaW1lPj0wKXtsb29wQ291bnQ9MDt0aGlzLl9zZXRFbmRpbmdzKHRydWUsdGhpcy5yZXBldGl0aW9ucz09PTAscGluZ1BvbmcpO31lbHNlIHsvLyB3aGVuIGxvb3BpbmcgaW4gcmV2ZXJzZSBkaXJlY3Rpb24sIHRoZSBpbml0aWFsCgkvLyB0cmFuc2l0aW9uIHRocm91Z2ggemVybyBjb3VudHMgYXMgYSByZXBldGl0aW9uLAoJLy8gc28gbGVhdmUgbG9vcENvdW50IGF0IC0xCgl0aGlzLl9zZXRFbmRpbmdzKHRoaXMucmVwZXRpdGlvbnM9PT0wLHRydWUscGluZ1BvbmcpO319aWYodGltZT49ZHVyYXRpb258fHRpbWU8MCl7Ly8gd3JhcCBhcm91bmQKCWNvbnN0IGxvb3BEZWx0YT1NYXRoLmZsb29yKHRpbWUvZHVyYXRpb24pOy8vIHNpZ25lZAoJdGltZS09ZHVyYXRpb24qbG9vcERlbHRhO2xvb3BDb3VudCs9TWF0aC5hYnMobG9vcERlbHRhKTtjb25zdCBwZW5kaW5nPXRoaXMucmVwZXRpdGlvbnMtbG9vcENvdW50O2lmKHBlbmRpbmc8PTApey8vIGhhdmUgdG8gc3RvcCAoc3dpdGNoIHN0YXRlLCBjbGFtcCB0aW1lLCBmaXJlIGV2ZW50KQoJaWYodGhpcy5jbGFtcFdoZW5GaW5pc2hlZCl0aGlzLnBhdXNlZD10cnVlO2Vsc2UgdGhpcy5lbmFibGVkPWZhbHNlO3RpbWU9ZGVsdGFUaW1lPjA/ZHVyYXRpb246MDt0aGlzLnRpbWU9dGltZTt0aGlzLl9taXhlci5kaXNwYXRjaEV2ZW50KHt0eXBlOidmaW5pc2hlZCcsYWN0aW9uOnRoaXMsZGlyZWN0aW9uOmRlbHRhVGltZT4wPzE6LTF9KTt9ZWxzZSB7Ly8ga2VlcCBydW5uaW5nCglpZihwZW5kaW5nPT09MSl7Ly8gZW50ZXJpbmcgdGhlIGxhc3Qgcm91bmQKCWNvbnN0IGF0U3RhcnQ9ZGVsdGFUaW1lPDA7dGhpcy5fc2V0RW5kaW5ncyhhdFN0YXJ0LCFhdFN0YXJ0LHBpbmdQb25nKTt9ZWxzZSB7dGhpcy5fc2V0RW5kaW5ncyhmYWxzZSxmYWxzZSxwaW5nUG9uZyk7fXRoaXMuX2xvb3BDb3VudD1sb29wQ291bnQ7dGhpcy50aW1lPXRpbWU7dGhpcy5fbWl4ZXIuZGlzcGF0Y2hFdmVudCh7dHlwZTonbG9vcCcsYWN0aW9uOnRoaXMsbG9vcERlbHRhOmxvb3BEZWx0YX0pO319ZWxzZSB7dGhpcy50aW1lPXRpbWU7fWlmKHBpbmdQb25nJiYobG9vcENvdW50JjEpPT09MSl7Ly8gaW52ZXJ0IHRpbWUgZm9yIHRoZSAicG9uZyByb3VuZCIKCXJldHVybiBkdXJhdGlvbi10aW1lO319cmV0dXJuIHRpbWU7fV9zZXRFbmRpbmdzKGF0U3RhcnQsYXRFbmQscGluZ1Bvbmcpe2NvbnN0IHNldHRpbmdzPXRoaXMuX2ludGVycG9sYW50U2V0dGluZ3M7aWYocGluZ1Bvbmcpe3NldHRpbmdzLmVuZGluZ1N0YXJ0PVplcm9TbG9wZUVuZGluZztzZXR0aW5ncy5lbmRpbmdFbmQ9WmVyb1Nsb3BlRW5kaW5nO31lbHNlIHsvLyBhc3N1bWluZyBmb3IgTG9vcE9uY2UgYXRTdGFydCA9PSBhdEVuZCA9PSB0cnVlCglpZihhdFN0YXJ0KXtzZXR0aW5ncy5lbmRpbmdTdGFydD10aGlzLnplcm9TbG9wZUF0U3RhcnQ/WmVyb1Nsb3BlRW5kaW5nOlplcm9DdXJ2YXR1cmVFbmRpbmc7fWVsc2Uge3NldHRpbmdzLmVuZGluZ1N0YXJ0PVdyYXBBcm91bmRFbmRpbmc7fWlmKGF0RW5kKXtzZXR0aW5ncy5lbmRpbmdFbmQ9dGhpcy56ZXJvU2xvcGVBdEVuZD9aZXJvU2xvcGVFbmRpbmc6WmVyb0N1cnZhdHVyZUVuZGluZzt9ZWxzZSB7c2V0dGluZ3MuZW5kaW5nRW5kPVdyYXBBcm91bmRFbmRpbmc7fX19X3NjaGVkdWxlRmFkaW5nKGR1cmF0aW9uLHdlaWdodE5vdyx3ZWlnaHRUaGVuKXtjb25zdCBtaXhlcj10aGlzLl9taXhlcixub3c9bWl4ZXIudGltZTtsZXQgaW50ZXJwb2xhbnQ9dGhpcy5fd2VpZ2h0SW50ZXJwb2xhbnQ7aWYoaW50ZXJwb2xhbnQ9PT1udWxsKXtpbnRlcnBvbGFudD1taXhlci5fbGVuZENvbnRyb2xJbnRlcnBvbGFudCgpO3RoaXMuX3dlaWdodEludGVycG9sYW50PWludGVycG9sYW50O31jb25zdCB0aW1lcz1pbnRlcnBvbGFudC5wYXJhbWV0ZXJQb3NpdGlvbnMsdmFsdWVzPWludGVycG9sYW50LnNhbXBsZVZhbHVlczt0aW1lc1swXT1ub3c7dmFsdWVzWzBdPXdlaWdodE5vdzt0aW1lc1sxXT1ub3crZHVyYXRpb247dmFsdWVzWzFdPXdlaWdodFRoZW47cmV0dXJuIHRoaXM7fX1jbGFzcyBBbmltYXRpb25NaXhlciBleHRlbmRzIEV2ZW50RGlzcGF0Y2hlcntjb25zdHJ1Y3Rvcihyb290KXtzdXBlcigpO3RoaXMuX3Jvb3Q9cm9vdDt0aGlzLl9pbml0TWVtb3J5TWFuYWdlcigpO3RoaXMuX2FjY3VJbmRleD0wO3RoaXMudGltZT0wO3RoaXMudGltZVNjYWxlPTEuMDt9X2JpbmRBY3Rpb24oYWN0aW9uLHByb3RvdHlwZUFjdGlvbil7Y29uc3Qgcm9vdD1hY3Rpb24uX2xvY2FsUm9vdHx8dGhpcy5fcm9vdCx0cmFja3M9YWN0aW9uLl9jbGlwLnRyYWNrcyxuVHJhY2tzPXRyYWNrcy5sZW5ndGgsYmluZGluZ3M9YWN0aW9uLl9wcm9wZXJ0eUJpbmRpbmdzLGludGVycG9sYW50cz1hY3Rpb24uX2ludGVycG9sYW50cyxyb290VXVpZD1yb290LnV1aWQsYmluZGluZ3NCeVJvb3Q9dGhpcy5fYmluZGluZ3NCeVJvb3RBbmROYW1lO2xldCBiaW5kaW5nc0J5TmFtZT1iaW5kaW5nc0J5Um9vdFtyb290VXVpZF07aWYoYmluZGluZ3NCeU5hbWU9PT11bmRlZmluZWQpe2JpbmRpbmdzQnlOYW1lPXt9O2JpbmRpbmdzQnlSb290W3Jvb3RVdWlkXT1iaW5kaW5nc0J5TmFtZTt9Zm9yKGxldCBpPTA7aSE9PW5UcmFja3M7KytpKXtjb25zdCB0cmFjaz10cmFja3NbaV0sdHJhY2tOYW1lPXRyYWNrLm5hbWU7bGV0IGJpbmRpbmc9YmluZGluZ3NCeU5hbWVbdHJhY2tOYW1lXTtpZihiaW5kaW5nIT09dW5kZWZpbmVkKXtiaW5kaW5nc1tpXT1iaW5kaW5nO31lbHNlIHtiaW5kaW5nPWJpbmRpbmdzW2ldO2lmKGJpbmRpbmchPT11bmRlZmluZWQpey8vIGV4aXN0aW5nIGJpbmRpbmcsIG1ha2Ugc3VyZSB0aGUgY2FjaGUga25vd3MKCWlmKGJpbmRpbmcuX2NhY2hlSW5kZXg9PT1udWxsKXsrK2JpbmRpbmcucmVmZXJlbmNlQ291bnQ7dGhpcy5fYWRkSW5hY3RpdmVCaW5kaW5nKGJpbmRpbmcscm9vdFV1aWQsdHJhY2tOYW1lKTt9Y29udGludWU7fWNvbnN0IHBhdGg9cHJvdG90eXBlQWN0aW9uJiZwcm90b3R5cGVBY3Rpb24uX3Byb3BlcnR5QmluZGluZ3NbaV0uYmluZGluZy5wYXJzZWRQYXRoO2JpbmRpbmc9bmV3IFByb3BlcnR5TWl4ZXIoUHJvcGVydHlCaW5kaW5nLmNyZWF0ZShyb290LHRyYWNrTmFtZSxwYXRoKSx0cmFjay5WYWx1ZVR5cGVOYW1lLHRyYWNrLmdldFZhbHVlU2l6ZSgpKTsrK2JpbmRpbmcucmVmZXJlbmNlQ291bnQ7dGhpcy5fYWRkSW5hY3RpdmVCaW5kaW5nKGJpbmRpbmcscm9vdFV1aWQsdHJhY2tOYW1lKTtiaW5kaW5nc1tpXT1iaW5kaW5nO31pbnRlcnBvbGFudHNbaV0ucmVzdWx0QnVmZmVyPWJpbmRpbmcuYnVmZmVyO319X2FjdGl2YXRlQWN0aW9uKGFjdGlvbil7aWYoIXRoaXMuX2lzQWN0aXZlQWN0aW9uKGFjdGlvbikpe2lmKGFjdGlvbi5fY2FjaGVJbmRleD09PW51bGwpey8vIHRoaXMgYWN0aW9uIGhhcyBiZWVuIGZvcmdvdHRlbiBieSB0aGUgY2FjaGUsIGJ1dCB0aGUgdXNlcgoJLy8gYXBwZWFycyB0byBiZSBzdGlsbCB1c2luZyBpdCAtPiByZWJpbmQKCWNvbnN0IHJvb3RVdWlkPShhY3Rpb24uX2xvY2FsUm9vdHx8dGhpcy5fcm9vdCkudXVpZCxjbGlwVXVpZD1hY3Rpb24uX2NsaXAudXVpZCxhY3Rpb25zRm9yQ2xpcD10aGlzLl9hY3Rpb25zQnlDbGlwW2NsaXBVdWlkXTt0aGlzLl9iaW5kQWN0aW9uKGFjdGlvbixhY3Rpb25zRm9yQ2xpcCYmYWN0aW9uc0ZvckNsaXAua25vd25BY3Rpb25zWzBdKTt0aGlzLl9hZGRJbmFjdGl2ZUFjdGlvbihhY3Rpb24sY2xpcFV1aWQscm9vdFV1aWQpO31jb25zdCBiaW5kaW5ncz1hY3Rpb24uX3Byb3BlcnR5QmluZGluZ3M7Ly8gaW5jcmVtZW50IHJlZmVyZW5jZSBjb3VudHMgLyBzb3J0IG91dCBzdGF0ZQoJZm9yKGxldCBpPTAsbj1iaW5kaW5ncy5sZW5ndGg7aSE9PW47KytpKXtjb25zdCBiaW5kaW5nPWJpbmRpbmdzW2ldO2lmKGJpbmRpbmcudXNlQ291bnQrKz09PTApe3RoaXMuX2xlbmRCaW5kaW5nKGJpbmRpbmcpO2JpbmRpbmcuc2F2ZU9yaWdpbmFsU3RhdGUoKTt9fXRoaXMuX2xlbmRBY3Rpb24oYWN0aW9uKTt9fV9kZWFjdGl2YXRlQWN0aW9uKGFjdGlvbil7aWYodGhpcy5faXNBY3RpdmVBY3Rpb24oYWN0aW9uKSl7Y29uc3QgYmluZGluZ3M9YWN0aW9uLl9wcm9wZXJ0eUJpbmRpbmdzOy8vIGRlY3JlbWVudCByZWZlcmVuY2UgY291bnRzIC8gc29ydCBvdXQgc3RhdGUKCWZvcihsZXQgaT0wLG49YmluZGluZ3MubGVuZ3RoO2khPT1uOysraSl7Y29uc3QgYmluZGluZz1iaW5kaW5nc1tpXTtpZigtLWJpbmRpbmcudXNlQ291bnQ9PT0wKXtiaW5kaW5nLnJlc3RvcmVPcmlnaW5hbFN0YXRlKCk7dGhpcy5fdGFrZUJhY2tCaW5kaW5nKGJpbmRpbmcpO319dGhpcy5fdGFrZUJhY2tBY3Rpb24oYWN0aW9uKTt9fS8vIE1lbW9yeSBtYW5hZ2VyCglfaW5pdE1lbW9yeU1hbmFnZXIoKXt0aGlzLl9hY3Rpb25zPVtdOy8vICduQWN0aXZlQWN0aW9ucycgZm9sbG93ZWQgYnkgaW5hY3RpdmUgb25lcwoJdGhpcy5fbkFjdGl2ZUFjdGlvbnM9MDt0aGlzLl9hY3Rpb25zQnlDbGlwPXt9Oy8vIGluc2lkZToKCS8vIHsKCS8vIAlrbm93bkFjdGlvbnM6IEFycmF5PCBBbmltYXRpb25BY3Rpb24gPiAtIHVzZWQgYXMgcHJvdG90eXBlcwoJLy8gCWFjdGlvbkJ5Um9vdDogQW5pbWF0aW9uQWN0aW9uIC0gbG9va3VwCgkvLyB9Cgl0aGlzLl9iaW5kaW5ncz1bXTsvLyAnbkFjdGl2ZUJpbmRpbmdzJyBmb2xsb3dlZCBieSBpbmFjdGl2ZSBvbmVzCgl0aGlzLl9uQWN0aXZlQmluZGluZ3M9MDt0aGlzLl9iaW5kaW5nc0J5Um9vdEFuZE5hbWU9e307Ly8gaW5zaWRlOiBNYXA8IG5hbWUsIFByb3BlcnR5TWl4ZXIgPgoJdGhpcy5fY29udHJvbEludGVycG9sYW50cz1bXTsvLyBzYW1lIGdhbWUgYXMgYWJvdmUKCXRoaXMuX25BY3RpdmVDb250cm9sSW50ZXJwb2xhbnRzPTA7Y29uc3Qgc2NvcGU9dGhpczt0aGlzLnN0YXRzPXthY3Rpb25zOntnZXQgdG90YWwoKXtyZXR1cm4gc2NvcGUuX2FjdGlvbnMubGVuZ3RoO30sZ2V0IGluVXNlKCl7cmV0dXJuIHNjb3BlLl9uQWN0aXZlQWN0aW9uczt9fSxiaW5kaW5nczp7Z2V0IHRvdGFsKCl7cmV0dXJuIHNjb3BlLl9iaW5kaW5ncy5sZW5ndGg7fSxnZXQgaW5Vc2UoKXtyZXR1cm4gc2NvcGUuX25BY3RpdmVCaW5kaW5nczt9fSxjb250cm9sSW50ZXJwb2xhbnRzOntnZXQgdG90YWwoKXtyZXR1cm4gc2NvcGUuX2NvbnRyb2xJbnRlcnBvbGFudHMubGVuZ3RoO30sZ2V0IGluVXNlKCl7cmV0dXJuIHNjb3BlLl9uQWN0aXZlQ29udHJvbEludGVycG9sYW50czt9fX07fS8vIE1lbW9yeSBtYW5hZ2VtZW50IGZvciBBbmltYXRpb25BY3Rpb24gb2JqZWN0cwoJX2lzQWN0aXZlQWN0aW9uKGFjdGlvbil7Y29uc3QgaW5kZXg9YWN0aW9uLl9jYWNoZUluZGV4O3JldHVybiBpbmRleCE9PW51bGwmJmluZGV4PHRoaXMuX25BY3RpdmVBY3Rpb25zO31fYWRkSW5hY3RpdmVBY3Rpb24oYWN0aW9uLGNsaXBVdWlkLHJvb3RVdWlkKXtjb25zdCBhY3Rpb25zPXRoaXMuX2FjdGlvbnMsYWN0aW9uc0J5Q2xpcD10aGlzLl9hY3Rpb25zQnlDbGlwO2xldCBhY3Rpb25zRm9yQ2xpcD1hY3Rpb25zQnlDbGlwW2NsaXBVdWlkXTtpZihhY3Rpb25zRm9yQ2xpcD09PXVuZGVmaW5lZCl7YWN0aW9uc0ZvckNsaXA9e2tub3duQWN0aW9uczpbYWN0aW9uXSxhY3Rpb25CeVJvb3Q6e319O2FjdGlvbi5fYnlDbGlwQ2FjaGVJbmRleD0wO2FjdGlvbnNCeUNsaXBbY2xpcFV1aWRdPWFjdGlvbnNGb3JDbGlwO31lbHNlIHtjb25zdCBrbm93bkFjdGlvbnM9YWN0aW9uc0ZvckNsaXAua25vd25BY3Rpb25zO2FjdGlvbi5fYnlDbGlwQ2FjaGVJbmRleD1rbm93bkFjdGlvbnMubGVuZ3RoO2tub3duQWN0aW9ucy5wdXNoKGFjdGlvbik7fWFjdGlvbi5fY2FjaGVJbmRleD1hY3Rpb25zLmxlbmd0aDthY3Rpb25zLnB1c2goYWN0aW9uKTthY3Rpb25zRm9yQ2xpcC5hY3Rpb25CeVJvb3Rbcm9vdFV1aWRdPWFjdGlvbjt9X3JlbW92ZUluYWN0aXZlQWN0aW9uKGFjdGlvbil7Y29uc3QgYWN0aW9ucz10aGlzLl9hY3Rpb25zLGxhc3RJbmFjdGl2ZUFjdGlvbj1hY3Rpb25zW2FjdGlvbnMubGVuZ3RoLTFdLGNhY2hlSW5kZXg9YWN0aW9uLl9jYWNoZUluZGV4O2xhc3RJbmFjdGl2ZUFjdGlvbi5fY2FjaGVJbmRleD1jYWNoZUluZGV4O2FjdGlvbnNbY2FjaGVJbmRleF09bGFzdEluYWN0aXZlQWN0aW9uO2FjdGlvbnMucG9wKCk7YWN0aW9uLl9jYWNoZUluZGV4PW51bGw7Y29uc3QgY2xpcFV1aWQ9YWN0aW9uLl9jbGlwLnV1aWQsYWN0aW9uc0J5Q2xpcD10aGlzLl9hY3Rpb25zQnlDbGlwLGFjdGlvbnNGb3JDbGlwPWFjdGlvbnNCeUNsaXBbY2xpcFV1aWRdLGtub3duQWN0aW9uc0ZvckNsaXA9YWN0aW9uc0ZvckNsaXAua25vd25BY3Rpb25zLGxhc3RLbm93bkFjdGlvbj1rbm93bkFjdGlvbnNGb3JDbGlwW2tub3duQWN0aW9uc0ZvckNsaXAubGVuZ3RoLTFdLGJ5Q2xpcENhY2hlSW5kZXg9YWN0aW9uLl9ieUNsaXBDYWNoZUluZGV4O2xhc3RLbm93bkFjdGlvbi5fYnlDbGlwQ2FjaGVJbmRleD1ieUNsaXBDYWNoZUluZGV4O2tub3duQWN0aW9uc0ZvckNsaXBbYnlDbGlwQ2FjaGVJbmRleF09bGFzdEtub3duQWN0aW9uO2tub3duQWN0aW9uc0ZvckNsaXAucG9wKCk7YWN0aW9uLl9ieUNsaXBDYWNoZUluZGV4PW51bGw7Y29uc3QgYWN0aW9uQnlSb290PWFjdGlvbnNGb3JDbGlwLmFjdGlvbkJ5Um9vdCxyb290VXVpZD0oYWN0aW9uLl9sb2NhbFJvb3R8fHRoaXMuX3Jvb3QpLnV1aWQ7ZGVsZXRlIGFjdGlvbkJ5Um9vdFtyb290VXVpZF07aWYoa25vd25BY3Rpb25zRm9yQ2xpcC5sZW5ndGg9PT0wKXtkZWxldGUgYWN0aW9uc0J5Q2xpcFtjbGlwVXVpZF07fXRoaXMuX3JlbW92ZUluYWN0aXZlQmluZGluZ3NGb3JBY3Rpb24oYWN0aW9uKTt9X3JlbW92ZUluYWN0aXZlQmluZGluZ3NGb3JBY3Rpb24oYWN0aW9uKXtjb25zdCBiaW5kaW5ncz1hY3Rpb24uX3Byb3BlcnR5QmluZGluZ3M7Zm9yKGxldCBpPTAsbj1iaW5kaW5ncy5sZW5ndGg7aSE9PW47KytpKXtjb25zdCBiaW5kaW5nPWJpbmRpbmdzW2ldO2lmKC0tYmluZGluZy5yZWZlcmVuY2VDb3VudD09PTApe3RoaXMuX3JlbW92ZUluYWN0aXZlQmluZGluZyhiaW5kaW5nKTt9fX1fbGVuZEFjdGlvbihhY3Rpb24pey8vIFsgYWN0aXZlIGFjdGlvbnMgfCAgaW5hY3RpdmUgYWN0aW9ucyAgXQoJLy8gWyAgYWN0aXZlIGFjdGlvbnMgPnwgaW5hY3RpdmUgYWN0aW9ucyBdCgkvLyAgICAgICAgICAgICAgICAgcyAgICAgICAgYQoJLy8gICAgICAgICAgICAgICAgICA8LXN3YXAtPgoJLy8gICAgICAgICAgICAgICAgIGEgICAgICAgIHMKCWNvbnN0IGFjdGlvbnM9dGhpcy5fYWN0aW9ucyxwcmV2SW5kZXg9YWN0aW9uLl9jYWNoZUluZGV4LGxhc3RBY3RpdmVJbmRleD10aGlzLl9uQWN0aXZlQWN0aW9ucysrLGZpcnN0SW5hY3RpdmVBY3Rpb249YWN0aW9uc1tsYXN0QWN0aXZlSW5kZXhdO2FjdGlvbi5fY2FjaGVJbmRleD1sYXN0QWN0aXZlSW5kZXg7YWN0aW9uc1tsYXN0QWN0aXZlSW5kZXhdPWFjdGlvbjtmaXJzdEluYWN0aXZlQWN0aW9uLl9jYWNoZUluZGV4PXByZXZJbmRleDthY3Rpb25zW3ByZXZJbmRleF09Zmlyc3RJbmFjdGl2ZUFjdGlvbjt9X3Rha2VCYWNrQWN0aW9uKGFjdGlvbil7Ly8gWyAgYWN0aXZlIGFjdGlvbnMgIHwgaW5hY3RpdmUgYWN0aW9ucyBdCgkvLyBbIGFjdGl2ZSBhY3Rpb25zIHw8IGluYWN0aXZlIGFjdGlvbnMgIF0KCS8vICAgICAgICBhICAgICAgICBzCgkvLyAgICAgICAgIDwtc3dhcC0+CgkvLyAgICAgICAgcyAgICAgICAgYQoJY29uc3QgYWN0aW9ucz10aGlzLl9hY3Rpb25zLHByZXZJbmRleD1hY3Rpb24uX2NhY2hlSW5kZXgsZmlyc3RJbmFjdGl2ZUluZGV4PS0tdGhpcy5fbkFjdGl2ZUFjdGlvbnMsbGFzdEFjdGl2ZUFjdGlvbj1hY3Rpb25zW2ZpcnN0SW5hY3RpdmVJbmRleF07YWN0aW9uLl9jYWNoZUluZGV4PWZpcnN0SW5hY3RpdmVJbmRleDthY3Rpb25zW2ZpcnN0SW5hY3RpdmVJbmRleF09YWN0aW9uO2xhc3RBY3RpdmVBY3Rpb24uX2NhY2hlSW5kZXg9cHJldkluZGV4O2FjdGlvbnNbcHJldkluZGV4XT1sYXN0QWN0aXZlQWN0aW9uO30vLyBNZW1vcnkgbWFuYWdlbWVudCBmb3IgUHJvcGVydHlNaXhlciBvYmplY3RzCglfYWRkSW5hY3RpdmVCaW5kaW5nKGJpbmRpbmcscm9vdFV1aWQsdHJhY2tOYW1lKXtjb25zdCBiaW5kaW5nc0J5Um9vdD10aGlzLl9iaW5kaW5nc0J5Um9vdEFuZE5hbWUsYmluZGluZ3M9dGhpcy5fYmluZGluZ3M7bGV0IGJpbmRpbmdCeU5hbWU9YmluZGluZ3NCeVJvb3Rbcm9vdFV1aWRdO2lmKGJpbmRpbmdCeU5hbWU9PT11bmRlZmluZWQpe2JpbmRpbmdCeU5hbWU9e307YmluZGluZ3NCeVJvb3Rbcm9vdFV1aWRdPWJpbmRpbmdCeU5hbWU7fWJpbmRpbmdCeU5hbWVbdHJhY2tOYW1lXT1iaW5kaW5nO2JpbmRpbmcuX2NhY2hlSW5kZXg9YmluZGluZ3MubGVuZ3RoO2JpbmRpbmdzLnB1c2goYmluZGluZyk7fV9yZW1vdmVJbmFjdGl2ZUJpbmRpbmcoYmluZGluZyl7Y29uc3QgYmluZGluZ3M9dGhpcy5fYmluZGluZ3MscHJvcEJpbmRpbmc9YmluZGluZy5iaW5kaW5nLHJvb3RVdWlkPXByb3BCaW5kaW5nLnJvb3ROb2RlLnV1aWQsdHJhY2tOYW1lPXByb3BCaW5kaW5nLnBhdGgsYmluZGluZ3NCeVJvb3Q9dGhpcy5fYmluZGluZ3NCeVJvb3RBbmROYW1lLGJpbmRpbmdCeU5hbWU9YmluZGluZ3NCeVJvb3Rbcm9vdFV1aWRdLGxhc3RJbmFjdGl2ZUJpbmRpbmc9YmluZGluZ3NbYmluZGluZ3MubGVuZ3RoLTFdLGNhY2hlSW5kZXg9YmluZGluZy5fY2FjaGVJbmRleDtsYXN0SW5hY3RpdmVCaW5kaW5nLl9jYWNoZUluZGV4PWNhY2hlSW5kZXg7YmluZGluZ3NbY2FjaGVJbmRleF09bGFzdEluYWN0aXZlQmluZGluZztiaW5kaW5ncy5wb3AoKTtkZWxldGUgYmluZGluZ0J5TmFtZVt0cmFja05hbWVdO2lmKE9iamVjdC5rZXlzKGJpbmRpbmdCeU5hbWUpLmxlbmd0aD09PTApe2RlbGV0ZSBiaW5kaW5nc0J5Um9vdFtyb290VXVpZF07fX1fbGVuZEJpbmRpbmcoYmluZGluZyl7Y29uc3QgYmluZGluZ3M9dGhpcy5fYmluZGluZ3MscHJldkluZGV4PWJpbmRpbmcuX2NhY2hlSW5kZXgsbGFzdEFjdGl2ZUluZGV4PXRoaXMuX25BY3RpdmVCaW5kaW5ncysrLGZpcnN0SW5hY3RpdmVCaW5kaW5nPWJpbmRpbmdzW2xhc3RBY3RpdmVJbmRleF07YmluZGluZy5fY2FjaGVJbmRleD1sYXN0QWN0aXZlSW5kZXg7YmluZGluZ3NbbGFzdEFjdGl2ZUluZGV4XT1iaW5kaW5nO2ZpcnN0SW5hY3RpdmVCaW5kaW5nLl9jYWNoZUluZGV4PXByZXZJbmRleDtiaW5kaW5nc1twcmV2SW5kZXhdPWZpcnN0SW5hY3RpdmVCaW5kaW5nO31fdGFrZUJhY2tCaW5kaW5nKGJpbmRpbmcpe2NvbnN0IGJpbmRpbmdzPXRoaXMuX2JpbmRpbmdzLHByZXZJbmRleD1iaW5kaW5nLl9jYWNoZUluZGV4LGZpcnN0SW5hY3RpdmVJbmRleD0tLXRoaXMuX25BY3RpdmVCaW5kaW5ncyxsYXN0QWN0aXZlQmluZGluZz1iaW5kaW5nc1tmaXJzdEluYWN0aXZlSW5kZXhdO2JpbmRpbmcuX2NhY2hlSW5kZXg9Zmlyc3RJbmFjdGl2ZUluZGV4O2JpbmRpbmdzW2ZpcnN0SW5hY3RpdmVJbmRleF09YmluZGluZztsYXN0QWN0aXZlQmluZGluZy5fY2FjaGVJbmRleD1wcmV2SW5kZXg7YmluZGluZ3NbcHJldkluZGV4XT1sYXN0QWN0aXZlQmluZGluZzt9Ly8gTWVtb3J5IG1hbmFnZW1lbnQgb2YgSW50ZXJwb2xhbnRzIGZvciB3ZWlnaHQgYW5kIHRpbWUgc2NhbGUKCV9sZW5kQ29udHJvbEludGVycG9sYW50KCl7Y29uc3QgaW50ZXJwb2xhbnRzPXRoaXMuX2NvbnRyb2xJbnRlcnBvbGFudHMsbGFzdEFjdGl2ZUluZGV4PXRoaXMuX25BY3RpdmVDb250cm9sSW50ZXJwb2xhbnRzKys7bGV0IGludGVycG9sYW50PWludGVycG9sYW50c1tsYXN0QWN0aXZlSW5kZXhdO2lmKGludGVycG9sYW50PT09dW5kZWZpbmVkKXtpbnRlcnBvbGFudD1uZXcgTGluZWFySW50ZXJwb2xhbnQobmV3IEZsb2F0MzJBcnJheSgyKSxuZXcgRmxvYXQzMkFycmF5KDIpLDEsdGhpcy5fY29udHJvbEludGVycG9sYW50c1Jlc3VsdEJ1ZmZlcik7aW50ZXJwb2xhbnQuX19jYWNoZUluZGV4PWxhc3RBY3RpdmVJbmRleDtpbnRlcnBvbGFudHNbbGFzdEFjdGl2ZUluZGV4XT1pbnRlcnBvbGFudDt9cmV0dXJuIGludGVycG9sYW50O31fdGFrZUJhY2tDb250cm9sSW50ZXJwb2xhbnQoaW50ZXJwb2xhbnQpe2NvbnN0IGludGVycG9sYW50cz10aGlzLl9jb250cm9sSW50ZXJwb2xhbnRzLHByZXZJbmRleD1pbnRlcnBvbGFudC5fX2NhY2hlSW5kZXgsZmlyc3RJbmFjdGl2ZUluZGV4PS0tdGhpcy5fbkFjdGl2ZUNvbnRyb2xJbnRlcnBvbGFudHMsbGFzdEFjdGl2ZUludGVycG9sYW50PWludGVycG9sYW50c1tmaXJzdEluYWN0aXZlSW5kZXhdO2ludGVycG9sYW50Ll9fY2FjaGVJbmRleD1maXJzdEluYWN0aXZlSW5kZXg7aW50ZXJwb2xhbnRzW2ZpcnN0SW5hY3RpdmVJbmRleF09aW50ZXJwb2xhbnQ7bGFzdEFjdGl2ZUludGVycG9sYW50Ll9fY2FjaGVJbmRleD1wcmV2SW5kZXg7aW50ZXJwb2xhbnRzW3ByZXZJbmRleF09bGFzdEFjdGl2ZUludGVycG9sYW50O30vLyByZXR1cm4gYW4gYWN0aW9uIGZvciBhIGNsaXAgb3B0aW9uYWxseSB1c2luZyBhIGN1c3RvbSByb290IHRhcmdldAoJLy8gb2JqZWN0ICh0aGlzIG1ldGhvZCBhbGxvY2F0ZXMgYSBsb3Qgb2YgZHluYW1pYyBtZW1vcnkgaW4gY2FzZSBhCgkvLyBwcmV2aW91c2x5IHVua25vd24gY2xpcC9yb290IGNvbWJpbmF0aW9uIGlzIHNwZWNpZmllZCkKCWNsaXBBY3Rpb24oY2xpcCxvcHRpb25hbFJvb3QsYmxlbmRNb2RlKXtjb25zdCByb290PW9wdGlvbmFsUm9vdHx8dGhpcy5fcm9vdCxyb290VXVpZD1yb290LnV1aWQ7bGV0IGNsaXBPYmplY3Q9dHlwZW9mIGNsaXA9PT0nc3RyaW5nJz9BbmltYXRpb25DbGlwLmZpbmRCeU5hbWUocm9vdCxjbGlwKTpjbGlwO2NvbnN0IGNsaXBVdWlkPWNsaXBPYmplY3QhPT1udWxsP2NsaXBPYmplY3QudXVpZDpjbGlwO2NvbnN0IGFjdGlvbnNGb3JDbGlwPXRoaXMuX2FjdGlvbnNCeUNsaXBbY2xpcFV1aWRdO2xldCBwcm90b3R5cGVBY3Rpb249bnVsbDtpZihibGVuZE1vZGU9PT11bmRlZmluZWQpe2lmKGNsaXBPYmplY3QhPT1udWxsKXtibGVuZE1vZGU9Y2xpcE9iamVjdC5ibGVuZE1vZGU7fWVsc2Uge2JsZW5kTW9kZT1Ob3JtYWxBbmltYXRpb25CbGVuZE1vZGU7fX1pZihhY3Rpb25zRm9yQ2xpcCE9PXVuZGVmaW5lZCl7Y29uc3QgZXhpc3RpbmdBY3Rpb249YWN0aW9uc0ZvckNsaXAuYWN0aW9uQnlSb290W3Jvb3RVdWlkXTtpZihleGlzdGluZ0FjdGlvbiE9PXVuZGVmaW5lZCYmZXhpc3RpbmdBY3Rpb24uYmxlbmRNb2RlPT09YmxlbmRNb2RlKXtyZXR1cm4gZXhpc3RpbmdBY3Rpb247fS8vIHdlIGtub3cgdGhlIGNsaXAsIHNvIHdlIGRvbid0IGhhdmUgdG8gcGFyc2UgYWxsCgkvLyB0aGUgYmluZGluZ3MgYWdhaW4gYnV0IGNhbiBqdXN0IGNvcHkKCXByb3RvdHlwZUFjdGlvbj1hY3Rpb25zRm9yQ2xpcC5rbm93bkFjdGlvbnNbMF07Ly8gYWxzbywgdGFrZSB0aGUgY2xpcCBmcm9tIHRoZSBwcm90b3R5cGUgYWN0aW9uCglpZihjbGlwT2JqZWN0PT09bnVsbCljbGlwT2JqZWN0PXByb3RvdHlwZUFjdGlvbi5fY2xpcDt9Ly8gY2xpcCBtdXN0IGJlIGtub3duIHdoZW4gc3BlY2lmaWVkIHZpYSBzdHJpbmcKCWlmKGNsaXBPYmplY3Q9PT1udWxsKXJldHVybiBudWxsOy8vIGFsbG9jYXRlIGFsbCByZXNvdXJjZXMgcmVxdWlyZWQgdG8gcnVuIGl0Cgljb25zdCBuZXdBY3Rpb249bmV3IEFuaW1hdGlvbkFjdGlvbih0aGlzLGNsaXBPYmplY3Qsb3B0aW9uYWxSb290LGJsZW5kTW9kZSk7dGhpcy5fYmluZEFjdGlvbihuZXdBY3Rpb24scHJvdG90eXBlQWN0aW9uKTsvLyBhbmQgbWFrZSB0aGUgYWN0aW9uIGtub3duIHRvIHRoZSBtZW1vcnkgbWFuYWdlcgoJdGhpcy5fYWRkSW5hY3RpdmVBY3Rpb24obmV3QWN0aW9uLGNsaXBVdWlkLHJvb3RVdWlkKTtyZXR1cm4gbmV3QWN0aW9uO30vLyBnZXQgYW4gZXhpc3RpbmcgYWN0aW9uCglleGlzdGluZ0FjdGlvbihjbGlwLG9wdGlvbmFsUm9vdCl7Y29uc3Qgcm9vdD1vcHRpb25hbFJvb3R8fHRoaXMuX3Jvb3Qscm9vdFV1aWQ9cm9vdC51dWlkLGNsaXBPYmplY3Q9dHlwZW9mIGNsaXA9PT0nc3RyaW5nJz9BbmltYXRpb25DbGlwLmZpbmRCeU5hbWUocm9vdCxjbGlwKTpjbGlwLGNsaXBVdWlkPWNsaXBPYmplY3Q/Y2xpcE9iamVjdC51dWlkOmNsaXAsYWN0aW9uc0ZvckNsaXA9dGhpcy5fYWN0aW9uc0J5Q2xpcFtjbGlwVXVpZF07aWYoYWN0aW9uc0ZvckNsaXAhPT11bmRlZmluZWQpe3JldHVybiBhY3Rpb25zRm9yQ2xpcC5hY3Rpb25CeVJvb3Rbcm9vdFV1aWRdfHxudWxsO31yZXR1cm4gbnVsbDt9Ly8gZGVhY3RpdmF0ZXMgYWxsIHByZXZpb3VzbHkgc2NoZWR1bGVkIGFjdGlvbnMKCXN0b3BBbGxBY3Rpb24oKXtjb25zdCBhY3Rpb25zPXRoaXMuX2FjdGlvbnMsbkFjdGlvbnM9dGhpcy5fbkFjdGl2ZUFjdGlvbnM7Zm9yKGxldCBpPW5BY3Rpb25zLTE7aT49MDstLWkpe2FjdGlvbnNbaV0uc3RvcCgpO31yZXR1cm4gdGhpczt9Ly8gYWR2YW5jZSB0aGUgdGltZSBhbmQgdXBkYXRlIGFwcGx5IHRoZSBhbmltYXRpb24KCXVwZGF0ZShkZWx0YVRpbWUpe2RlbHRhVGltZSo9dGhpcy50aW1lU2NhbGU7Y29uc3QgYWN0aW9ucz10aGlzLl9hY3Rpb25zLG5BY3Rpb25zPXRoaXMuX25BY3RpdmVBY3Rpb25zLHRpbWU9dGhpcy50aW1lKz1kZWx0YVRpbWUsdGltZURpcmVjdGlvbj1NYXRoLnNpZ24oZGVsdGFUaW1lKSxhY2N1SW5kZXg9dGhpcy5fYWNjdUluZGV4Xj0xOy8vIHJ1biBhY3RpdmUgYWN0aW9ucwoJZm9yKGxldCBpPTA7aSE9PW5BY3Rpb25zOysraSl7Y29uc3QgYWN0aW9uPWFjdGlvbnNbaV07YWN0aW9uLl91cGRhdGUodGltZSxkZWx0YVRpbWUsdGltZURpcmVjdGlvbixhY2N1SW5kZXgpO30vLyB1cGRhdGUgc2NlbmUgZ3JhcGgKCWNvbnN0IGJpbmRpbmdzPXRoaXMuX2JpbmRpbmdzLG5CaW5kaW5ncz10aGlzLl9uQWN0aXZlQmluZGluZ3M7Zm9yKGxldCBpPTA7aSE9PW5CaW5kaW5nczsrK2kpe2JpbmRpbmdzW2ldLmFwcGx5KGFjY3VJbmRleCk7fXJldHVybiB0aGlzO30vLyBBbGxvd3MgeW91IHRvIHNlZWsgdG8gYSBzcGVjaWZpYyB0aW1lIGluIGFuIGFuaW1hdGlvbi4KCXNldFRpbWUodGltZUluU2Vjb25kcyl7dGhpcy50aW1lPTA7Ly8gWmVybyBvdXQgdGltZSBhdHRyaWJ1dGUgZm9yIEFuaW1hdGlvbk1peGVyIG9iamVjdDsKCWZvcihsZXQgaT0wO2k8dGhpcy5fYWN0aW9ucy5sZW5ndGg7aSsrKXt0aGlzLl9hY3Rpb25zW2ldLnRpbWU9MDsvLyBaZXJvIG91dCB0aW1lIGF0dHJpYnV0ZSBmb3IgYWxsIGFzc29jaWF0ZWQgQW5pbWF0aW9uQWN0aW9uIG9iamVjdHMuCgl9cmV0dXJuIHRoaXMudXBkYXRlKHRpbWVJblNlY29uZHMpOy8vIFVwZGF0ZSB1c2VkIHRvIHNldCBleGFjdCB0aW1lLiBSZXR1cm5zICJ0aGlzIiBBbmltYXRpb25NaXhlciBvYmplY3QuCgl9Ly8gcmV0dXJuIHRoaXMgbWl4ZXIncyByb290IHRhcmdldCBvYmplY3QKCWdldFJvb3QoKXtyZXR1cm4gdGhpcy5fcm9vdDt9Ly8gZnJlZSBhbGwgcmVzb3VyY2VzIHNwZWNpZmljIHRvIGEgcGFydGljdWxhciBjbGlwCgl1bmNhY2hlQ2xpcChjbGlwKXtjb25zdCBhY3Rpb25zPXRoaXMuX2FjdGlvbnMsY2xpcFV1aWQ9Y2xpcC51dWlkLGFjdGlvbnNCeUNsaXA9dGhpcy5fYWN0aW9uc0J5Q2xpcCxhY3Rpb25zRm9yQ2xpcD1hY3Rpb25zQnlDbGlwW2NsaXBVdWlkXTtpZihhY3Rpb25zRm9yQ2xpcCE9PXVuZGVmaW5lZCl7Ly8gbm90ZToganVzdCBjYWxsaW5nIF9yZW1vdmVJbmFjdGl2ZUFjdGlvbiB3b3VsZCBtZXNzIHVwIHRoZQoJLy8gaXRlcmF0aW9uIHN0YXRlIGFuZCBhbHNvIHJlcXVpcmUgdXBkYXRpbmcgdGhlIHN0YXRlIHdlIGNhbgoJLy8ganVzdCB0aHJvdyBhd2F5Cgljb25zdCBhY3Rpb25zVG9SZW1vdmU9YWN0aW9uc0ZvckNsaXAua25vd25BY3Rpb25zO2ZvcihsZXQgaT0wLG49YWN0aW9uc1RvUmVtb3ZlLmxlbmd0aDtpIT09bjsrK2kpe2NvbnN0IGFjdGlvbj1hY3Rpb25zVG9SZW1vdmVbaV07dGhpcy5fZGVhY3RpdmF0ZUFjdGlvbihhY3Rpb24pO2NvbnN0IGNhY2hlSW5kZXg9YWN0aW9uLl9jYWNoZUluZGV4LGxhc3RJbmFjdGl2ZUFjdGlvbj1hY3Rpb25zW2FjdGlvbnMubGVuZ3RoLTFdO2FjdGlvbi5fY2FjaGVJbmRleD1udWxsO2FjdGlvbi5fYnlDbGlwQ2FjaGVJbmRleD1udWxsO2xhc3RJbmFjdGl2ZUFjdGlvbi5fY2FjaGVJbmRleD1jYWNoZUluZGV4O2FjdGlvbnNbY2FjaGVJbmRleF09bGFzdEluYWN0aXZlQWN0aW9uO2FjdGlvbnMucG9wKCk7dGhpcy5fcmVtb3ZlSW5hY3RpdmVCaW5kaW5nc0ZvckFjdGlvbihhY3Rpb24pO31kZWxldGUgYWN0aW9uc0J5Q2xpcFtjbGlwVXVpZF07fX0vLyBmcmVlIGFsbCByZXNvdXJjZXMgc3BlY2lmaWMgdG8gYSBwYXJ0aWN1bGFyIHJvb3QgdGFyZ2V0IG9iamVjdAoJdW5jYWNoZVJvb3Qocm9vdCl7Y29uc3Qgcm9vdFV1aWQ9cm9vdC51dWlkLGFjdGlvbnNCeUNsaXA9dGhpcy5fYWN0aW9uc0J5Q2xpcDtmb3IoY29uc3QgY2xpcFV1aWQgaW4gYWN0aW9uc0J5Q2xpcCl7Y29uc3QgYWN0aW9uQnlSb290PWFjdGlvbnNCeUNsaXBbY2xpcFV1aWRdLmFjdGlvbkJ5Um9vdCxhY3Rpb249YWN0aW9uQnlSb290W3Jvb3RVdWlkXTtpZihhY3Rpb24hPT11bmRlZmluZWQpe3RoaXMuX2RlYWN0aXZhdGVBY3Rpb24oYWN0aW9uKTt0aGlzLl9yZW1vdmVJbmFjdGl2ZUFjdGlvbihhY3Rpb24pO319Y29uc3QgYmluZGluZ3NCeVJvb3Q9dGhpcy5fYmluZGluZ3NCeVJvb3RBbmROYW1lLGJpbmRpbmdCeU5hbWU9YmluZGluZ3NCeVJvb3Rbcm9vdFV1aWRdO2lmKGJpbmRpbmdCeU5hbWUhPT11bmRlZmluZWQpe2Zvcihjb25zdCB0cmFja05hbWUgaW4gYmluZGluZ0J5TmFtZSl7Y29uc3QgYmluZGluZz1iaW5kaW5nQnlOYW1lW3RyYWNrTmFtZV07YmluZGluZy5yZXN0b3JlT3JpZ2luYWxTdGF0ZSgpO3RoaXMuX3JlbW92ZUluYWN0aXZlQmluZGluZyhiaW5kaW5nKTt9fX0vLyByZW1vdmUgYSB0YXJnZXRlZCBjbGlwIGZyb20gdGhlIGNhY2hlCgl1bmNhY2hlQWN0aW9uKGNsaXAsb3B0aW9uYWxSb290KXtjb25zdCBhY3Rpb249dGhpcy5leGlzdGluZ0FjdGlvbihjbGlwLG9wdGlvbmFsUm9vdCk7aWYoYWN0aW9uIT09bnVsbCl7dGhpcy5fZGVhY3RpdmF0ZUFjdGlvbihhY3Rpb24pO3RoaXMuX3JlbW92ZUluYWN0aXZlQWN0aW9uKGFjdGlvbik7fX19QW5pbWF0aW9uTWl4ZXIucHJvdG90eXBlLl9jb250cm9sSW50ZXJwb2xhbnRzUmVzdWx0QnVmZmVyPW5ldyBGbG9hdDMyQXJyYXkoMSk7Y2xhc3MgSW5zdGFuY2VkSW50ZXJsZWF2ZWRCdWZmZXIgZXh0ZW5kcyBJbnRlcmxlYXZlZEJ1ZmZlcntjb25zdHJ1Y3RvcihhcnJheSxzdHJpZGUsbWVzaFBlckF0dHJpYnV0ZSl7aWYobWVzaFBlckF0dHJpYnV0ZT09PXZvaWQgMCl7bWVzaFBlckF0dHJpYnV0ZT0xO31zdXBlcihhcnJheSxzdHJpZGUpO3RoaXMubWVzaFBlckF0dHJpYnV0ZT1tZXNoUGVyQXR0cmlidXRlO31jb3B5KHNvdXJjZSl7c3VwZXIuY29weShzb3VyY2UpO3RoaXMubWVzaFBlckF0dHJpYnV0ZT1zb3VyY2UubWVzaFBlckF0dHJpYnV0ZTtyZXR1cm4gdGhpczt9Y2xvbmUoZGF0YSl7Y29uc3QgaWI9c3VwZXIuY2xvbmUoZGF0YSk7aWIubWVzaFBlckF0dHJpYnV0ZT10aGlzLm1lc2hQZXJBdHRyaWJ1dGU7cmV0dXJuIGliO310b0pTT04oZGF0YSl7Y29uc3QganNvbj1zdXBlci50b0pTT04oZGF0YSk7anNvbi5pc0luc3RhbmNlZEludGVybGVhdmVkQnVmZmVyPXRydWU7anNvbi5tZXNoUGVyQXR0cmlidXRlPXRoaXMubWVzaFBlckF0dHJpYnV0ZTtyZXR1cm4ganNvbjt9fUluc3RhbmNlZEludGVybGVhdmVkQnVmZmVyLnByb3RvdHlwZS5pc0luc3RhbmNlZEludGVybGVhdmVkQnVmZmVyPXRydWU7Y29uc3QgX3N0YXJ0UD0vKkBfX1BVUkVfXyovbmV3IFZlY3RvcjMoKTtjb25zdCBfc3RhcnRFbmQ9LypAX19QVVJFX18qL25ldyBWZWN0b3IzKCk7Y2xhc3MgTGluZTN7Y29uc3RydWN0b3Ioc3RhcnQsZW5kKXtpZihzdGFydD09PXZvaWQgMCl7c3RhcnQ9bmV3IFZlY3RvcjMoKTt9aWYoZW5kPT09dm9pZCAwKXtlbmQ9bmV3IFZlY3RvcjMoKTt9dGhpcy5zdGFydD1zdGFydDt0aGlzLmVuZD1lbmQ7fXNldChzdGFydCxlbmQpe3RoaXMuc3RhcnQuY29weShzdGFydCk7dGhpcy5lbmQuY29weShlbmQpO3JldHVybiB0aGlzO31jb3B5KGxpbmUpe3RoaXMuc3RhcnQuY29weShsaW5lLnN0YXJ0KTt0aGlzLmVuZC5jb3B5KGxpbmUuZW5kKTtyZXR1cm4gdGhpczt9Z2V0Q2VudGVyKHRhcmdldCl7cmV0dXJuIHRhcmdldC5hZGRWZWN0b3JzKHRoaXMuc3RhcnQsdGhpcy5lbmQpLm11bHRpcGx5U2NhbGFyKDAuNSk7fWRlbHRhKHRhcmdldCl7cmV0dXJuIHRhcmdldC5zdWJWZWN0b3JzKHRoaXMuZW5kLHRoaXMuc3RhcnQpO31kaXN0YW5jZVNxKCl7cmV0dXJuIHRoaXMuc3RhcnQuZGlzdGFuY2VUb1NxdWFyZWQodGhpcy5lbmQpO31kaXN0YW5jZSgpe3JldHVybiB0aGlzLnN0YXJ0LmRpc3RhbmNlVG8odGhpcy5lbmQpO31hdCh0LHRhcmdldCl7cmV0dXJuIHRoaXMuZGVsdGEodGFyZ2V0KS5tdWx0aXBseVNjYWxhcih0KS5hZGQodGhpcy5zdGFydCk7fWNsb3Nlc3RQb2ludFRvUG9pbnRQYXJhbWV0ZXIocG9pbnQsY2xhbXBUb0xpbmUpe19zdGFydFAuc3ViVmVjdG9ycyhwb2ludCx0aGlzLnN0YXJ0KTtfc3RhcnRFbmQuc3ViVmVjdG9ycyh0aGlzLmVuZCx0aGlzLnN0YXJ0KTtjb25zdCBzdGFydEVuZDI9X3N0YXJ0RW5kLmRvdChfc3RhcnRFbmQpO2NvbnN0IHN0YXJ0RW5kX3N0YXJ0UD1fc3RhcnRFbmQuZG90KF9zdGFydFApO2xldCB0PXN0YXJ0RW5kX3N0YXJ0UC9zdGFydEVuZDI7aWYoY2xhbXBUb0xpbmUpe3Q9Y2xhbXAodCwwLDEpO31yZXR1cm4gdDt9Y2xvc2VzdFBvaW50VG9Qb2ludChwb2ludCxjbGFtcFRvTGluZSx0YXJnZXQpe2NvbnN0IHQ9dGhpcy5jbG9zZXN0UG9pbnRUb1BvaW50UGFyYW1ldGVyKHBvaW50LGNsYW1wVG9MaW5lKTtyZXR1cm4gdGhpcy5kZWx0YSh0YXJnZXQpLm11bHRpcGx5U2NhbGFyKHQpLmFkZCh0aGlzLnN0YXJ0KTt9YXBwbHlNYXRyaXg0KG1hdHJpeCl7dGhpcy5zdGFydC5hcHBseU1hdHJpeDQobWF0cml4KTt0aGlzLmVuZC5hcHBseU1hdHJpeDQobWF0cml4KTtyZXR1cm4gdGhpczt9ZXF1YWxzKGxpbmUpe3JldHVybiBsaW5lLnN0YXJ0LmVxdWFscyh0aGlzLnN0YXJ0KSYmbGluZS5lbmQuZXF1YWxzKHRoaXMuZW5kKTt9Y2xvbmUoKXtyZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IoKS5jb3B5KHRoaXMpO319Y29uc3QgX3ZlY3RvciQyPS8qQF9fUFVSRV9fKi9uZXcgVmVjdG9yMygpO2NvbnN0IF9ib25lTWF0cml4PS8qQF9fUFVSRV9fKi9uZXcgTWF0cml4NCgpO2NvbnN0IF9tYXRyaXhXb3JsZEludj0vKkBfX1BVUkVfXyovbmV3IE1hdHJpeDQoKTtjbGFzcyBTa2VsZXRvbkhlbHBlciBleHRlbmRzIExpbmVTZWdtZW50c3tjb25zdHJ1Y3RvcihvYmplY3Qpe2NvbnN0IGJvbmVzPWdldEJvbmVMaXN0KG9iamVjdCk7Y29uc3QgZ2VvbWV0cnk9bmV3IEJ1ZmZlckdlb21ldHJ5KCk7Y29uc3QgdmVydGljZXM9W107Y29uc3QgY29sb3JzPVtdO2NvbnN0IGNvbG9yMT1uZXcgQ29sb3IoMCwwLDEpO2NvbnN0IGNvbG9yMj1uZXcgQ29sb3IoMCwxLDApO2ZvcihsZXQgaT0wO2k8Ym9uZXMubGVuZ3RoO2krKyl7Y29uc3QgYm9uZT1ib25lc1tpXTtpZihib25lLnBhcmVudCYmYm9uZS5wYXJlbnQuaXNCb25lKXt2ZXJ0aWNlcy5wdXNoKDAsMCwwKTt2ZXJ0aWNlcy5wdXNoKDAsMCwwKTtjb2xvcnMucHVzaChjb2xvcjEucixjb2xvcjEuZyxjb2xvcjEuYik7Y29sb3JzLnB1c2goY29sb3IyLnIsY29sb3IyLmcsY29sb3IyLmIpO319Z2VvbWV0cnkuc2V0QXR0cmlidXRlKCdwb3NpdGlvbicsbmV3IEZsb2F0MzJCdWZmZXJBdHRyaWJ1dGUodmVydGljZXMsMykpO2dlb21ldHJ5LnNldEF0dHJpYnV0ZSgnY29sb3InLG5ldyBGbG9hdDMyQnVmZmVyQXR0cmlidXRlKGNvbG9ycywzKSk7Y29uc3QgbWF0ZXJpYWw9bmV3IExpbmVCYXNpY01hdGVyaWFsKHt2ZXJ0ZXhDb2xvcnM6dHJ1ZSxkZXB0aFRlc3Q6ZmFsc2UsZGVwdGhXcml0ZTpmYWxzZSx0b25lTWFwcGVkOmZhbHNlLHRyYW5zcGFyZW50OnRydWV9KTtzdXBlcihnZW9tZXRyeSxtYXRlcmlhbCk7dGhpcy50eXBlPSdTa2VsZXRvbkhlbHBlcic7dGhpcy5pc1NrZWxldG9uSGVscGVyPXRydWU7dGhpcy5yb290PW9iamVjdDt0aGlzLmJvbmVzPWJvbmVzO3RoaXMubWF0cml4PW9iamVjdC5tYXRyaXhXb3JsZDt0aGlzLm1hdHJpeEF1dG9VcGRhdGU9ZmFsc2U7fXVwZGF0ZU1hdHJpeFdvcmxkKGZvcmNlKXtjb25zdCBib25lcz10aGlzLmJvbmVzO2NvbnN0IGdlb21ldHJ5PXRoaXMuZ2VvbWV0cnk7Y29uc3QgcG9zaXRpb249Z2VvbWV0cnkuZ2V0QXR0cmlidXRlKCdwb3NpdGlvbicpO19tYXRyaXhXb3JsZEludi5jb3B5KHRoaXMucm9vdC5tYXRyaXhXb3JsZCkuaW52ZXJ0KCk7Zm9yKGxldCBpPTAsaj0wO2k8Ym9uZXMubGVuZ3RoO2krKyl7Y29uc3QgYm9uZT1ib25lc1tpXTtpZihib25lLnBhcmVudCYmYm9uZS5wYXJlbnQuaXNCb25lKXtfYm9uZU1hdHJpeC5tdWx0aXBseU1hdHJpY2VzKF9tYXRyaXhXb3JsZEludixib25lLm1hdHJpeFdvcmxkKTtfdmVjdG9yJDIuc2V0RnJvbU1hdHJpeFBvc2l0aW9uKF9ib25lTWF0cml4KTtwb3NpdGlvbi5zZXRYWVooaixfdmVjdG9yJDIueCxfdmVjdG9yJDIueSxfdmVjdG9yJDIueik7X2JvbmVNYXRyaXgubXVsdGlwbHlNYXRyaWNlcyhfbWF0cml4V29ybGRJbnYsYm9uZS5wYXJlbnQubWF0cml4V29ybGQpO192ZWN0b3IkMi5zZXRGcm9tTWF0cml4UG9zaXRpb24oX2JvbmVNYXRyaXgpO3Bvc2l0aW9uLnNldFhZWihqKzEsX3ZlY3RvciQyLngsX3ZlY3RvciQyLnksX3ZlY3RvciQyLnopO2orPTI7fX1nZW9tZXRyeS5nZXRBdHRyaWJ1dGUoJ3Bvc2l0aW9uJykubmVlZHNVcGRhdGU9dHJ1ZTtzdXBlci51cGRhdGVNYXRyaXhXb3JsZChmb3JjZSk7fX1mdW5jdGlvbiBnZXRCb25lTGlzdChvYmplY3Qpe2NvbnN0IGJvbmVMaXN0PVtdO2lmKG9iamVjdCYmb2JqZWN0LmlzQm9uZSl7Ym9uZUxpc3QucHVzaChvYmplY3QpO31mb3IobGV0IGk9MDtpPG9iamVjdC5jaGlsZHJlbi5sZW5ndGg7aSsrKXtib25lTGlzdC5wdXNoLmFwcGx5KGJvbmVMaXN0LGdldEJvbmVMaXN0KG9iamVjdC5jaGlsZHJlbltpXSkpO31yZXR1cm4gYm9uZUxpc3Q7fWNsYXNzIEdyaWRIZWxwZXIgZXh0ZW5kcyBMaW5lU2VnbWVudHN7Y29uc3RydWN0b3Ioc2l6ZSxkaXZpc2lvbnMsY29sb3IxLGNvbG9yMil7aWYoc2l6ZT09PXZvaWQgMCl7c2l6ZT0xMDt9aWYoZGl2aXNpb25zPT09dm9pZCAwKXtkaXZpc2lvbnM9MTA7fWlmKGNvbG9yMT09PXZvaWQgMCl7Y29sb3IxPTB4NDQ0NDQ0O31pZihjb2xvcjI9PT12b2lkIDApe2NvbG9yMj0weDg4ODg4ODt9Y29sb3IxPW5ldyBDb2xvcihjb2xvcjEpO2NvbG9yMj1uZXcgQ29sb3IoY29sb3IyKTtjb25zdCBjZW50ZXI9ZGl2aXNpb25zLzI7Y29uc3Qgc3RlcD1zaXplL2RpdmlzaW9ucztjb25zdCBoYWxmU2l6ZT1zaXplLzI7Y29uc3QgdmVydGljZXM9W10sY29sb3JzPVtdO2ZvcihsZXQgaT0wLGo9MCxrPS1oYWxmU2l6ZTtpPD1kaXZpc2lvbnM7aSsrLGsrPXN0ZXApe3ZlcnRpY2VzLnB1c2goLWhhbGZTaXplLDAsayxoYWxmU2l6ZSwwLGspO3ZlcnRpY2VzLnB1c2goaywwLC1oYWxmU2l6ZSxrLDAsaGFsZlNpemUpO2NvbnN0IGNvbG9yPWk9PT1jZW50ZXI/Y29sb3IxOmNvbG9yMjtjb2xvci50b0FycmF5KGNvbG9ycyxqKTtqKz0zO2NvbG9yLnRvQXJyYXkoY29sb3JzLGopO2orPTM7Y29sb3IudG9BcnJheShjb2xvcnMsaik7ais9Mztjb2xvci50b0FycmF5KGNvbG9ycyxqKTtqKz0zO31jb25zdCBnZW9tZXRyeT1uZXcgQnVmZmVyR2VvbWV0cnkoKTtnZW9tZXRyeS5zZXRBdHRyaWJ1dGUoJ3Bvc2l0aW9uJyxuZXcgRmxvYXQzMkJ1ZmZlckF0dHJpYnV0ZSh2ZXJ0aWNlcywzKSk7Z2VvbWV0cnkuc2V0QXR0cmlidXRlKCdjb2xvcicsbmV3IEZsb2F0MzJCdWZmZXJBdHRyaWJ1dGUoY29sb3JzLDMpKTtjb25zdCBtYXRlcmlhbD1uZXcgTGluZUJhc2ljTWF0ZXJpYWwoe3ZlcnRleENvbG9yczp0cnVlLHRvbmVNYXBwZWQ6ZmFsc2V9KTtzdXBlcihnZW9tZXRyeSxtYXRlcmlhbCk7dGhpcy50eXBlPSdHcmlkSGVscGVyJzt9fWNvbnN0IF9mbG9hdFZpZXc9bmV3IEZsb2F0MzJBcnJheSgxKTtuZXcgSW50MzJBcnJheShfZmxvYXRWaWV3LmJ1ZmZlcik7Q3VydmUuY3JlYXRlPWZ1bmN0aW9uKGNvbnN0cnVjdCxnZXRQb2ludCl7Y29uc29sZS5sb2coJ1RIUkVFLkN1cnZlLmNyZWF0ZSgpIGhhcyBiZWVuIGRlcHJlY2F0ZWQnKTtjb25zdHJ1Y3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoQ3VydmUucHJvdG90eXBlKTtjb25zdHJ1Y3QucHJvdG90eXBlLmNvbnN0cnVjdG9yPWNvbnN0cnVjdDtjb25zdHJ1Y3QucHJvdG90eXBlLmdldFBvaW50PWdldFBvaW50O3JldHVybiBjb25zdHJ1Y3Q7fTsvLwoJUGF0aC5wcm90b3R5cGUuZnJvbVBvaW50cz1mdW5jdGlvbihwb2ludHMpe2NvbnNvbGUud2FybignVEhSRUUuUGF0aDogLmZyb21Qb2ludHMoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5zZXRGcm9tUG9pbnRzKCkuJyk7cmV0dXJuIHRoaXMuc2V0RnJvbVBvaW50cyhwb2ludHMpO307Ly8KCUdyaWRIZWxwZXIucHJvdG90eXBlLnNldENvbG9ycz1mdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoJ1RIUkVFLkdyaWRIZWxwZXI6IHNldENvbG9ycygpIGhhcyBiZWVuIGRlcHJlY2F0ZWQsIHBhc3MgdGhlbSBpbiB0aGUgY29uc3RydWN0b3IgaW5zdGVhZC4nKTt9O1NrZWxldG9uSGVscGVyLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKCdUSFJFRS5Ta2VsZXRvbkhlbHBlcjogdXBkYXRlKCkgbm8gbG9uZ2VyIG5lZWRzIHRvIGJlIGNhbGxlZC4nKTt9O0xvYWRlci5wcm90b3R5cGUuZXh0cmFjdFVybEJhc2U9ZnVuY3Rpb24odXJsKXtjb25zb2xlLndhcm4oJ1RIUkVFLkxvYWRlcjogLmV4dHJhY3RVcmxCYXNlKCkgaGFzIGJlZW4gZGVwcmVjYXRlZC4gVXNlIFRIUkVFLkxvYWRlclV0aWxzLmV4dHJhY3RVcmxCYXNlKCkgaW5zdGVhZC4nKTtyZXR1cm4gTG9hZGVyVXRpbHMuZXh0cmFjdFVybEJhc2UodXJsKTt9O0xvYWRlci5IYW5kbGVycz17YWRkOmZ1bmN0aW9uLyogcmVnZXgsIGxvYWRlciAqLygpe2NvbnNvbGUuZXJyb3IoJ1RIUkVFLkxvYWRlcjogSGFuZGxlcnMuYWRkKCkgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIExvYWRpbmdNYW5hZ2VyLmFkZEhhbmRsZXIoKSBpbnN0ZWFkLicpO30sZ2V0OmZ1bmN0aW9uLyogZmlsZSAqLygpe2NvbnNvbGUuZXJyb3IoJ1RIUkVFLkxvYWRlcjogSGFuZGxlcnMuZ2V0KCkgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIExvYWRpbmdNYW5hZ2VyLmdldEhhbmRsZXIoKSBpbnN0ZWFkLicpO319O0JveDMucHJvdG90eXBlLmNlbnRlcj1mdW5jdGlvbihvcHRpb25hbFRhcmdldCl7Y29uc29sZS53YXJuKCdUSFJFRS5Cb3gzOiAuY2VudGVyKCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuZ2V0Q2VudGVyKCkuJyk7cmV0dXJuIHRoaXMuZ2V0Q2VudGVyKG9wdGlvbmFsVGFyZ2V0KTt9O0JveDMucHJvdG90eXBlLmVtcHR5PWZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKCdUSFJFRS5Cb3gzOiAuZW1wdHkoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5pc0VtcHR5KCkuJyk7cmV0dXJuIHRoaXMuaXNFbXB0eSgpO307Qm94My5wcm90b3R5cGUuaXNJbnRlcnNlY3Rpb25Cb3g9ZnVuY3Rpb24oYm94KXtjb25zb2xlLndhcm4oJ1RIUkVFLkJveDM6IC5pc0ludGVyc2VjdGlvbkJveCgpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLmludGVyc2VjdHNCb3goKS4nKTtyZXR1cm4gdGhpcy5pbnRlcnNlY3RzQm94KGJveCk7fTtCb3gzLnByb3RvdHlwZS5pc0ludGVyc2VjdGlvblNwaGVyZT1mdW5jdGlvbihzcGhlcmUpe2NvbnNvbGUud2FybignVEhSRUUuQm94MzogLmlzSW50ZXJzZWN0aW9uU3BoZXJlKCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuaW50ZXJzZWN0c1NwaGVyZSgpLicpO3JldHVybiB0aGlzLmludGVyc2VjdHNTcGhlcmUoc3BoZXJlKTt9O0JveDMucHJvdG90eXBlLnNpemU9ZnVuY3Rpb24ob3B0aW9uYWxUYXJnZXQpe2NvbnNvbGUud2FybignVEhSRUUuQm94MzogLnNpemUoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5nZXRTaXplKCkuJyk7cmV0dXJuIHRoaXMuZ2V0U2l6ZShvcHRpb25hbFRhcmdldCk7fTsvLwoJU3BoZXJlLnByb3RvdHlwZS5lbXB0eT1mdW5jdGlvbigpe2NvbnNvbGUud2FybignVEhSRUUuU3BoZXJlOiAuZW1wdHkoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5pc0VtcHR5KCkuJyk7cmV0dXJuIHRoaXMuaXNFbXB0eSgpO307Ly8KCUZydXN0dW0ucHJvdG90eXBlLnNldEZyb21NYXRyaXg9ZnVuY3Rpb24obSl7Y29uc29sZS53YXJuKCdUSFJFRS5GcnVzdHVtOiAuc2V0RnJvbU1hdHJpeCgpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLnNldEZyb21Qcm9qZWN0aW9uTWF0cml4KCkuJyk7cmV0dXJuIHRoaXMuc2V0RnJvbVByb2plY3Rpb25NYXRyaXgobSk7fTsvLwoJTGluZTMucHJvdG90eXBlLmNlbnRlcj1mdW5jdGlvbihvcHRpb25hbFRhcmdldCl7Y29uc29sZS53YXJuKCdUSFJFRS5MaW5lMzogLmNlbnRlcigpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLmdldENlbnRlcigpLicpO3JldHVybiB0aGlzLmdldENlbnRlcihvcHRpb25hbFRhcmdldCk7fTsvLwoJTWF0cml4My5wcm90b3R5cGUuZmxhdHRlblRvQXJyYXlPZmZzZXQ9ZnVuY3Rpb24oYXJyYXksb2Zmc2V0KXtjb25zb2xlLndhcm4oJ1RIUkVFLk1hdHJpeDM6IC5mbGF0dGVuVG9BcnJheU9mZnNldCgpIGhhcyBiZWVuIGRlcHJlY2F0ZWQuIFVzZSAudG9BcnJheSgpIGluc3RlYWQuJyk7cmV0dXJuIHRoaXMudG9BcnJheShhcnJheSxvZmZzZXQpO307TWF0cml4My5wcm90b3R5cGUubXVsdGlwbHlWZWN0b3IzPWZ1bmN0aW9uKHZlY3Rvcil7Y29uc29sZS53YXJuKCdUSFJFRS5NYXRyaXgzOiAubXVsdGlwbHlWZWN0b3IzKCkgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIHZlY3Rvci5hcHBseU1hdHJpeDMoIG1hdHJpeCApIGluc3RlYWQuJyk7cmV0dXJuIHZlY3Rvci5hcHBseU1hdHJpeDModGhpcyk7fTtNYXRyaXgzLnByb3RvdHlwZS5tdWx0aXBseVZlY3RvcjNBcnJheT1mdW5jdGlvbi8qIGEgKi8oKXtjb25zb2xlLmVycm9yKCdUSFJFRS5NYXRyaXgzOiAubXVsdGlwbHlWZWN0b3IzQXJyYXkoKSBoYXMgYmVlbiByZW1vdmVkLicpO307TWF0cml4My5wcm90b3R5cGUuYXBwbHlUb0J1ZmZlckF0dHJpYnV0ZT1mdW5jdGlvbihhdHRyaWJ1dGUpe2NvbnNvbGUud2FybignVEhSRUUuTWF0cml4MzogLmFwcGx5VG9CdWZmZXJBdHRyaWJ1dGUoKSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgYXR0cmlidXRlLmFwcGx5TWF0cml4MyggbWF0cml4ICkgaW5zdGVhZC4nKTtyZXR1cm4gYXR0cmlidXRlLmFwcGx5TWF0cml4Myh0aGlzKTt9O01hdHJpeDMucHJvdG90eXBlLmFwcGx5VG9WZWN0b3IzQXJyYXk9ZnVuY3Rpb24vKiBhcnJheSwgb2Zmc2V0LCBsZW5ndGggKi8oKXtjb25zb2xlLmVycm9yKCdUSFJFRS5NYXRyaXgzOiAuYXBwbHlUb1ZlY3RvcjNBcnJheSgpIGhhcyBiZWVuIHJlbW92ZWQuJyk7fTtNYXRyaXgzLnByb3RvdHlwZS5nZXRJbnZlcnNlPWZ1bmN0aW9uKG1hdHJpeCl7Y29uc29sZS53YXJuKCdUSFJFRS5NYXRyaXgzOiAuZ2V0SW52ZXJzZSgpIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBtYXRyaXhJbnYuY29weSggbWF0cml4ICkuaW52ZXJ0KCk7IGluc3RlYWQuJyk7cmV0dXJuIHRoaXMuY29weShtYXRyaXgpLmludmVydCgpO307Ly8KCU1hdHJpeDQucHJvdG90eXBlLmV4dHJhY3RQb3NpdGlvbj1mdW5jdGlvbihtKXtjb25zb2xlLndhcm4oJ1RIUkVFLk1hdHJpeDQ6IC5leHRyYWN0UG9zaXRpb24oKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5jb3B5UG9zaXRpb24oKS4nKTtyZXR1cm4gdGhpcy5jb3B5UG9zaXRpb24obSk7fTtNYXRyaXg0LnByb3RvdHlwZS5mbGF0dGVuVG9BcnJheU9mZnNldD1mdW5jdGlvbihhcnJheSxvZmZzZXQpe2NvbnNvbGUud2FybignVEhSRUUuTWF0cml4NDogLmZsYXR0ZW5Ub0FycmF5T2Zmc2V0KCkgaGFzIGJlZW4gZGVwcmVjYXRlZC4gVXNlIC50b0FycmF5KCkgaW5zdGVhZC4nKTtyZXR1cm4gdGhpcy50b0FycmF5KGFycmF5LG9mZnNldCk7fTtNYXRyaXg0LnByb3RvdHlwZS5nZXRQb3NpdGlvbj1mdW5jdGlvbigpe2NvbnNvbGUud2FybignVEhSRUUuTWF0cml4NDogLmdldFBvc2l0aW9uKCkgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIFZlY3RvcjMuc2V0RnJvbU1hdHJpeFBvc2l0aW9uKCBtYXRyaXggKSBpbnN0ZWFkLicpO3JldHVybiBuZXcgVmVjdG9yMygpLnNldEZyb21NYXRyaXhDb2x1bW4odGhpcywzKTt9O01hdHJpeDQucHJvdG90eXBlLnNldFJvdGF0aW9uRnJvbVF1YXRlcm5pb249ZnVuY3Rpb24ocSl7Y29uc29sZS53YXJuKCdUSFJFRS5NYXRyaXg0OiAuc2V0Um90YXRpb25Gcm9tUXVhdGVybmlvbigpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLm1ha2VSb3RhdGlvbkZyb21RdWF0ZXJuaW9uKCkuJyk7cmV0dXJuIHRoaXMubWFrZVJvdGF0aW9uRnJvbVF1YXRlcm5pb24ocSk7fTtNYXRyaXg0LnByb3RvdHlwZS5tdWx0aXBseVRvQXJyYXk9ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oJ1RIUkVFLk1hdHJpeDQ6IC5tdWx0aXBseVRvQXJyYXkoKSBoYXMgYmVlbiByZW1vdmVkLicpO307TWF0cml4NC5wcm90b3R5cGUubXVsdGlwbHlWZWN0b3IzPWZ1bmN0aW9uKHZlY3Rvcil7Y29uc29sZS53YXJuKCdUSFJFRS5NYXRyaXg0OiAubXVsdGlwbHlWZWN0b3IzKCkgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIHZlY3Rvci5hcHBseU1hdHJpeDQoIG1hdHJpeCApIGluc3RlYWQuJyk7cmV0dXJuIHZlY3Rvci5hcHBseU1hdHJpeDQodGhpcyk7fTtNYXRyaXg0LnByb3RvdHlwZS5tdWx0aXBseVZlY3RvcjQ9ZnVuY3Rpb24odmVjdG9yKXtjb25zb2xlLndhcm4oJ1RIUkVFLk1hdHJpeDQ6IC5tdWx0aXBseVZlY3RvcjQoKSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgdmVjdG9yLmFwcGx5TWF0cml4NCggbWF0cml4ICkgaW5zdGVhZC4nKTtyZXR1cm4gdmVjdG9yLmFwcGx5TWF0cml4NCh0aGlzKTt9O01hdHJpeDQucHJvdG90eXBlLm11bHRpcGx5VmVjdG9yM0FycmF5PWZ1bmN0aW9uLyogYSAqLygpe2NvbnNvbGUuZXJyb3IoJ1RIUkVFLk1hdHJpeDQ6IC5tdWx0aXBseVZlY3RvcjNBcnJheSgpIGhhcyBiZWVuIHJlbW92ZWQuJyk7fTtNYXRyaXg0LnByb3RvdHlwZS5yb3RhdGVBeGlzPWZ1bmN0aW9uKHYpe2NvbnNvbGUud2FybignVEhSRUUuTWF0cml4NDogLnJvdGF0ZUF4aXMoKSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgVmVjdG9yMy50cmFuc2Zvcm1EaXJlY3Rpb24oIG1hdHJpeCApIGluc3RlYWQuJyk7di50cmFuc2Zvcm1EaXJlY3Rpb24odGhpcyk7fTtNYXRyaXg0LnByb3RvdHlwZS5jcm9zc1ZlY3Rvcj1mdW5jdGlvbih2ZWN0b3Ipe2NvbnNvbGUud2FybignVEhSRUUuTWF0cml4NDogLmNyb3NzVmVjdG9yKCkgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIHZlY3Rvci5hcHBseU1hdHJpeDQoIG1hdHJpeCApIGluc3RlYWQuJyk7cmV0dXJuIHZlY3Rvci5hcHBseU1hdHJpeDQodGhpcyk7fTtNYXRyaXg0LnByb3RvdHlwZS50cmFuc2xhdGU9ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKCdUSFJFRS5NYXRyaXg0OiAudHJhbnNsYXRlKCkgaGFzIGJlZW4gcmVtb3ZlZC4nKTt9O01hdHJpeDQucHJvdG90eXBlLnJvdGF0ZVg9ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKCdUSFJFRS5NYXRyaXg0OiAucm90YXRlWCgpIGhhcyBiZWVuIHJlbW92ZWQuJyk7fTtNYXRyaXg0LnByb3RvdHlwZS5yb3RhdGVZPWZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcignVEhSRUUuTWF0cml4NDogLnJvdGF0ZVkoKSBoYXMgYmVlbiByZW1vdmVkLicpO307TWF0cml4NC5wcm90b3R5cGUucm90YXRlWj1mdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoJ1RIUkVFLk1hdHJpeDQ6IC5yb3RhdGVaKCkgaGFzIGJlZW4gcmVtb3ZlZC4nKTt9O01hdHJpeDQucHJvdG90eXBlLnJvdGF0ZUJ5QXhpcz1mdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoJ1RIUkVFLk1hdHJpeDQ6IC5yb3RhdGVCeUF4aXMoKSBoYXMgYmVlbiByZW1vdmVkLicpO307TWF0cml4NC5wcm90b3R5cGUuYXBwbHlUb0J1ZmZlckF0dHJpYnV0ZT1mdW5jdGlvbihhdHRyaWJ1dGUpe2NvbnNvbGUud2FybignVEhSRUUuTWF0cml4NDogLmFwcGx5VG9CdWZmZXJBdHRyaWJ1dGUoKSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgYXR0cmlidXRlLmFwcGx5TWF0cml4NCggbWF0cml4ICkgaW5zdGVhZC4nKTtyZXR1cm4gYXR0cmlidXRlLmFwcGx5TWF0cml4NCh0aGlzKTt9O01hdHJpeDQucHJvdG90eXBlLmFwcGx5VG9WZWN0b3IzQXJyYXk9ZnVuY3Rpb24vKiBhcnJheSwgb2Zmc2V0LCBsZW5ndGggKi8oKXtjb25zb2xlLmVycm9yKCdUSFJFRS5NYXRyaXg0OiAuYXBwbHlUb1ZlY3RvcjNBcnJheSgpIGhhcyBiZWVuIHJlbW92ZWQuJyk7fTtNYXRyaXg0LnByb3RvdHlwZS5tYWtlRnJ1c3R1bT1mdW5jdGlvbihsZWZ0LHJpZ2h0LGJvdHRvbSx0b3AsbmVhcixmYXIpe2NvbnNvbGUud2FybignVEhSRUUuTWF0cml4NDogLm1ha2VGcnVzdHVtKCkgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIC5tYWtlUGVyc3BlY3RpdmUoIGxlZnQsIHJpZ2h0LCB0b3AsIGJvdHRvbSwgbmVhciwgZmFyICkgaW5zdGVhZC4nKTtyZXR1cm4gdGhpcy5tYWtlUGVyc3BlY3RpdmUobGVmdCxyaWdodCx0b3AsYm90dG9tLG5lYXIsZmFyKTt9O01hdHJpeDQucHJvdG90eXBlLmdldEludmVyc2U9ZnVuY3Rpb24obWF0cml4KXtjb25zb2xlLndhcm4oJ1RIUkVFLk1hdHJpeDQ6IC5nZXRJbnZlcnNlKCkgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIG1hdHJpeEludi5jb3B5KCBtYXRyaXggKS5pbnZlcnQoKTsgaW5zdGVhZC4nKTtyZXR1cm4gdGhpcy5jb3B5KG1hdHJpeCkuaW52ZXJ0KCk7fTsvLwoJUGxhbmUucHJvdG90eXBlLmlzSW50ZXJzZWN0aW9uTGluZT1mdW5jdGlvbihsaW5lKXtjb25zb2xlLndhcm4oJ1RIUkVFLlBsYW5lOiAuaXNJbnRlcnNlY3Rpb25MaW5lKCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuaW50ZXJzZWN0c0xpbmUoKS4nKTtyZXR1cm4gdGhpcy5pbnRlcnNlY3RzTGluZShsaW5lKTt9Oy8vCglRdWF0ZXJuaW9uLnByb3RvdHlwZS5tdWx0aXBseVZlY3RvcjM9ZnVuY3Rpb24odmVjdG9yKXtjb25zb2xlLndhcm4oJ1RIUkVFLlF1YXRlcm5pb246IC5tdWx0aXBseVZlY3RvcjMoKSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgaXMgbm93IHZlY3Rvci5hcHBseVF1YXRlcm5pb24oIHF1YXRlcm5pb24gKSBpbnN0ZWFkLicpO3JldHVybiB2ZWN0b3IuYXBwbHlRdWF0ZXJuaW9uKHRoaXMpO307UXVhdGVybmlvbi5wcm90b3R5cGUuaW52ZXJzZT1mdW5jdGlvbigpe2NvbnNvbGUud2FybignVEhSRUUuUXVhdGVybmlvbjogLmludmVyc2UoKSBoYXMgYmVlbiByZW5hbWVkIHRvIGludmVydCgpLicpO3JldHVybiB0aGlzLmludmVydCgpO307Ly8KCVJheS5wcm90b3R5cGUuaXNJbnRlcnNlY3Rpb25Cb3g9ZnVuY3Rpb24oYm94KXtjb25zb2xlLndhcm4oJ1RIUkVFLlJheTogLmlzSW50ZXJzZWN0aW9uQm94KCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuaW50ZXJzZWN0c0JveCgpLicpO3JldHVybiB0aGlzLmludGVyc2VjdHNCb3goYm94KTt9O1JheS5wcm90b3R5cGUuaXNJbnRlcnNlY3Rpb25QbGFuZT1mdW5jdGlvbihwbGFuZSl7Y29uc29sZS53YXJuKCdUSFJFRS5SYXk6IC5pc0ludGVyc2VjdGlvblBsYW5lKCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuaW50ZXJzZWN0c1BsYW5lKCkuJyk7cmV0dXJuIHRoaXMuaW50ZXJzZWN0c1BsYW5lKHBsYW5lKTt9O1JheS5wcm90b3R5cGUuaXNJbnRlcnNlY3Rpb25TcGhlcmU9ZnVuY3Rpb24oc3BoZXJlKXtjb25zb2xlLndhcm4oJ1RIUkVFLlJheTogLmlzSW50ZXJzZWN0aW9uU3BoZXJlKCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuaW50ZXJzZWN0c1NwaGVyZSgpLicpO3JldHVybiB0aGlzLmludGVyc2VjdHNTcGhlcmUoc3BoZXJlKTt9Oy8vCglUcmlhbmdsZS5wcm90b3R5cGUuYXJlYT1mdW5jdGlvbigpe2NvbnNvbGUud2FybignVEhSRUUuVHJpYW5nbGU6IC5hcmVhKCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuZ2V0QXJlYSgpLicpO3JldHVybiB0aGlzLmdldEFyZWEoKTt9O1RyaWFuZ2xlLnByb3RvdHlwZS5iYXJ5Y29vcmRGcm9tUG9pbnQ9ZnVuY3Rpb24ocG9pbnQsdGFyZ2V0KXtjb25zb2xlLndhcm4oJ1RIUkVFLlRyaWFuZ2xlOiAuYmFyeWNvb3JkRnJvbVBvaW50KCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuZ2V0QmFyeWNvb3JkKCkuJyk7cmV0dXJuIHRoaXMuZ2V0QmFyeWNvb3JkKHBvaW50LHRhcmdldCk7fTtUcmlhbmdsZS5wcm90b3R5cGUubWlkcG9pbnQ9ZnVuY3Rpb24odGFyZ2V0KXtjb25zb2xlLndhcm4oJ1RIUkVFLlRyaWFuZ2xlOiAubWlkcG9pbnQoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5nZXRNaWRwb2ludCgpLicpO3JldHVybiB0aGlzLmdldE1pZHBvaW50KHRhcmdldCk7fTtUcmlhbmdsZS5wcm90b3R5cGVub3JtYWw9ZnVuY3Rpb24odGFyZ2V0KXtjb25zb2xlLndhcm4oJ1RIUkVFLlRyaWFuZ2xlOiAubm9ybWFsKCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuZ2V0Tm9ybWFsKCkuJyk7cmV0dXJuIHRoaXMuZ2V0Tm9ybWFsKHRhcmdldCk7fTtUcmlhbmdsZS5wcm90b3R5cGUucGxhbmU9ZnVuY3Rpb24odGFyZ2V0KXtjb25zb2xlLndhcm4oJ1RIUkVFLlRyaWFuZ2xlOiAucGxhbmUoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5nZXRQbGFuZSgpLicpO3JldHVybiB0aGlzLmdldFBsYW5lKHRhcmdldCk7fTtUcmlhbmdsZS5iYXJ5Y29vcmRGcm9tUG9pbnQ9ZnVuY3Rpb24ocG9pbnQsYSxiLGMsdGFyZ2V0KXtjb25zb2xlLndhcm4oJ1RIUkVFLlRyaWFuZ2xlOiAuYmFyeWNvb3JkRnJvbVBvaW50KCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuZ2V0QmFyeWNvb3JkKCkuJyk7cmV0dXJuIFRyaWFuZ2xlLmdldEJhcnljb29yZChwb2ludCxhLGIsYyx0YXJnZXQpO307VHJpYW5nbGUubm9ybWFsPWZ1bmN0aW9uKGEsYixjLHRhcmdldCl7Y29uc29sZS53YXJuKCdUSFJFRS5UcmlhbmdsZTogLm5vcm1hbCgpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLmdldE5vcm1hbCgpLicpO3JldHVybiBUcmlhbmdsZS5nZXROb3JtYWwoYSxiLGMsdGFyZ2V0KTt9Oy8vCglTaGFwZS5wcm90b3R5cGUuZXh0cmFjdEFsbFBvaW50cz1mdW5jdGlvbihkaXZpc2lvbnMpe2NvbnNvbGUud2FybignVEhSRUUuU2hhcGU6IC5leHRyYWN0QWxsUG9pbnRzKCkgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIC5leHRyYWN0UG9pbnRzKCkgaW5zdGVhZC4nKTtyZXR1cm4gdGhpcy5leHRyYWN0UG9pbnRzKGRpdmlzaW9ucyk7fTtTaGFwZS5wcm90b3R5cGUuZXh0cnVkZT1mdW5jdGlvbihvcHRpb25zKXtjb25zb2xlLndhcm4oJ1RIUkVFLlNoYXBlOiAuZXh0cnVkZSgpIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBFeHRydWRlR2VvbWV0cnkoKSBpbnN0ZWFkLicpO3JldHVybiBuZXcgRXh0cnVkZUdlb21ldHJ5KHRoaXMsb3B0aW9ucyk7fTtTaGFwZS5wcm90b3R5cGUubWFrZUdlb21ldHJ5PWZ1bmN0aW9uKG9wdGlvbnMpe2NvbnNvbGUud2FybignVEhSRUUuU2hhcGU6IC5tYWtlR2VvbWV0cnkoKSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgU2hhcGVHZW9tZXRyeSgpIGluc3RlYWQuJyk7cmV0dXJuIG5ldyBTaGFwZUdlb21ldHJ5KHRoaXMsb3B0aW9ucyk7fTsvLwoJVmVjdG9yMi5wcm90b3R5cGUuZnJvbUF0dHJpYnV0ZT1mdW5jdGlvbihhdHRyaWJ1dGUsaW5kZXgsb2Zmc2V0KXtjb25zb2xlLndhcm4oJ1RIUkVFLlZlY3RvcjI6IC5mcm9tQXR0cmlidXRlKCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuZnJvbUJ1ZmZlckF0dHJpYnV0ZSgpLicpO3JldHVybiB0aGlzLmZyb21CdWZmZXJBdHRyaWJ1dGUoYXR0cmlidXRlLGluZGV4LG9mZnNldCk7fTtWZWN0b3IyLnByb3RvdHlwZS5kaXN0YW5jZVRvTWFuaGF0dGFuPWZ1bmN0aW9uKHYpe2NvbnNvbGUud2FybignVEhSRUUuVmVjdG9yMjogLmRpc3RhbmNlVG9NYW5oYXR0YW4oKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5tYW5oYXR0YW5EaXN0YW5jZVRvKCkuJyk7cmV0dXJuIHRoaXMubWFuaGF0dGFuRGlzdGFuY2VUbyh2KTt9O1ZlY3RvcjIucHJvdG90eXBlLmxlbmd0aE1hbmhhdHRhbj1mdW5jdGlvbigpe2NvbnNvbGUud2FybignVEhSRUUuVmVjdG9yMjogLmxlbmd0aE1hbmhhdHRhbigpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLm1hbmhhdHRhbkxlbmd0aCgpLicpO3JldHVybiB0aGlzLm1hbmhhdHRhbkxlbmd0aCgpO307Ly8KCVZlY3RvcjMucHJvdG90eXBlLnNldEV1bGVyRnJvbVJvdGF0aW9uTWF0cml4PWZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcignVEhSRUUuVmVjdG9yMzogLnNldEV1bGVyRnJvbVJvdGF0aW9uTWF0cml4KCkgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIEV1bGVyLnNldEZyb21Sb3RhdGlvbk1hdHJpeCgpIGluc3RlYWQuJyk7fTtWZWN0b3IzLnByb3RvdHlwZS5zZXRFdWxlckZyb21RdWF0ZXJuaW9uPWZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcignVEhSRUUuVmVjdG9yMzogLnNldEV1bGVyRnJvbVF1YXRlcm5pb24oKSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgRXVsZXIuc2V0RnJvbVF1YXRlcm5pb24oKSBpbnN0ZWFkLicpO307VmVjdG9yMy5wcm90b3R5cGUuZ2V0UG9zaXRpb25Gcm9tTWF0cml4PWZ1bmN0aW9uKG0pe2NvbnNvbGUud2FybignVEhSRUUuVmVjdG9yMzogLmdldFBvc2l0aW9uRnJvbU1hdHJpeCgpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLnNldEZyb21NYXRyaXhQb3NpdGlvbigpLicpO3JldHVybiB0aGlzLnNldEZyb21NYXRyaXhQb3NpdGlvbihtKTt9O1ZlY3RvcjMucHJvdG90eXBlLmdldFNjYWxlRnJvbU1hdHJpeD1mdW5jdGlvbihtKXtjb25zb2xlLndhcm4oJ1RIUkVFLlZlY3RvcjM6IC5nZXRTY2FsZUZyb21NYXRyaXgoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5zZXRGcm9tTWF0cml4U2NhbGUoKS4nKTtyZXR1cm4gdGhpcy5zZXRGcm9tTWF0cml4U2NhbGUobSk7fTtWZWN0b3IzLnByb3RvdHlwZS5nZXRDb2x1bW5Gcm9tTWF0cml4PWZ1bmN0aW9uKGluZGV4LG1hdHJpeCl7Y29uc29sZS53YXJuKCdUSFJFRS5WZWN0b3IzOiAuZ2V0Q29sdW1uRnJvbU1hdHJpeCgpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLnNldEZyb21NYXRyaXhDb2x1bW4oKS4nKTtyZXR1cm4gdGhpcy5zZXRGcm9tTWF0cml4Q29sdW1uKG1hdHJpeCxpbmRleCk7fTtWZWN0b3IzLnByb3RvdHlwZS5hcHBseVByb2plY3Rpb249ZnVuY3Rpb24obSl7Y29uc29sZS53YXJuKCdUSFJFRS5WZWN0b3IzOiAuYXBwbHlQcm9qZWN0aW9uKCkgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIC5hcHBseU1hdHJpeDQoIG0gKSBpbnN0ZWFkLicpO3JldHVybiB0aGlzLmFwcGx5TWF0cml4NChtKTt9O1ZlY3RvcjMucHJvdG90eXBlLmZyb21BdHRyaWJ1dGU9ZnVuY3Rpb24oYXR0cmlidXRlLGluZGV4LG9mZnNldCl7Y29uc29sZS53YXJuKCdUSFJFRS5WZWN0b3IzOiAuZnJvbUF0dHJpYnV0ZSgpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLmZyb21CdWZmZXJBdHRyaWJ1dGUoKS4nKTtyZXR1cm4gdGhpcy5mcm9tQnVmZmVyQXR0cmlidXRlKGF0dHJpYnV0ZSxpbmRleCxvZmZzZXQpO307VmVjdG9yMy5wcm90b3R5cGUuZGlzdGFuY2VUb01hbmhhdHRhbj1mdW5jdGlvbih2KXtjb25zb2xlLndhcm4oJ1RIUkVFLlZlY3RvcjM6IC5kaXN0YW5jZVRvTWFuaGF0dGFuKCkgaGFzIGJlZW4gcmVuYW1lZCB0byAubWFuaGF0dGFuRGlzdGFuY2VUbygpLicpO3JldHVybiB0aGlzLm1hbmhhdHRhbkRpc3RhbmNlVG8odik7fTtWZWN0b3IzLnByb3RvdHlwZS5sZW5ndGhNYW5oYXR0YW49ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oJ1RIUkVFLlZlY3RvcjM6IC5sZW5ndGhNYW5oYXR0YW4oKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5tYW5oYXR0YW5MZW5ndGgoKS4nKTtyZXR1cm4gdGhpcy5tYW5oYXR0YW5MZW5ndGgoKTt9Oy8vCglWZWN0b3I0LnByb3RvdHlwZS5mcm9tQXR0cmlidXRlPWZ1bmN0aW9uKGF0dHJpYnV0ZSxpbmRleCxvZmZzZXQpe2NvbnNvbGUud2FybignVEhSRUUuVmVjdG9yNDogLmZyb21BdHRyaWJ1dGUoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5mcm9tQnVmZmVyQXR0cmlidXRlKCkuJyk7cmV0dXJuIHRoaXMuZnJvbUJ1ZmZlckF0dHJpYnV0ZShhdHRyaWJ1dGUsaW5kZXgsb2Zmc2V0KTt9O1ZlY3RvcjQucHJvdG90eXBlLmxlbmd0aE1hbmhhdHRhbj1mdW5jdGlvbigpe2NvbnNvbGUud2FybignVEhSRUUuVmVjdG9yNDogLmxlbmd0aE1hbmhhdHRhbigpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLm1hbmhhdHRhbkxlbmd0aCgpLicpO3JldHVybiB0aGlzLm1hbmhhdHRhbkxlbmd0aCgpO307Ly8KCU9iamVjdDNELnByb3RvdHlwZS5nZXRDaGlsZEJ5TmFtZT1mdW5jdGlvbihuYW1lKXtjb25zb2xlLndhcm4oJ1RIUkVFLk9iamVjdDNEOiAuZ2V0Q2hpbGRCeU5hbWUoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5nZXRPYmplY3RCeU5hbWUoKS4nKTtyZXR1cm4gdGhpcy5nZXRPYmplY3RCeU5hbWUobmFtZSk7fTtPYmplY3QzRC5wcm90b3R5cGUucmVuZGVyRGVwdGg9ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oJ1RIUkVFLk9iamVjdDNEOiAucmVuZGVyRGVwdGggaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIC5yZW5kZXJPcmRlciwgaW5zdGVhZC4nKTt9O09iamVjdDNELnByb3RvdHlwZS50cmFuc2xhdGU9ZnVuY3Rpb24oZGlzdGFuY2UsYXhpcyl7Y29uc29sZS53YXJuKCdUSFJFRS5PYmplY3QzRDogLnRyYW5zbGF0ZSgpIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSAudHJhbnNsYXRlT25BeGlzKCBheGlzLCBkaXN0YW5jZSApIGluc3RlYWQuJyk7cmV0dXJuIHRoaXMudHJhbnNsYXRlT25BeGlzKGF4aXMsZGlzdGFuY2UpO307T2JqZWN0M0QucHJvdG90eXBlLmdldFdvcmxkUm90YXRpb249ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKCdUSFJFRS5PYmplY3QzRDogLmdldFdvcmxkUm90YXRpb24oKSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgVEhSRUUuT2JqZWN0M0QuZ2V0V29ybGRRdWF0ZXJuaW9uKCB0YXJnZXQgKSBpbnN0ZWFkLicpO307T2JqZWN0M0QucHJvdG90eXBlLmFwcGx5TWF0cml4PWZ1bmN0aW9uKG1hdHJpeCl7Y29uc29sZS53YXJuKCdUSFJFRS5PYmplY3QzRDogLmFwcGx5TWF0cml4KCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuYXBwbHlNYXRyaXg0KCkuJyk7cmV0dXJuIHRoaXMuYXBwbHlNYXRyaXg0KG1hdHJpeCk7fTtPYmplY3QuZGVmaW5lUHJvcGVydGllcyhPYmplY3QzRC5wcm90b3R5cGUse2V1bGVyT3JkZXI6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybignVEhSRUUuT2JqZWN0M0Q6IC5ldWxlck9yZGVyIGlzIG5vdyAucm90YXRpb24ub3JkZXIuJyk7cmV0dXJuIHRoaXMucm90YXRpb24ub3JkZXI7fSxzZXQ6ZnVuY3Rpb24odmFsdWUpe2NvbnNvbGUud2FybignVEhSRUUuT2JqZWN0M0Q6IC5ldWxlck9yZGVyIGlzIG5vdyAucm90YXRpb24ub3JkZXIuJyk7dGhpcy5yb3RhdGlvbi5vcmRlcj12YWx1ZTt9fSx1c2VRdWF0ZXJuaW9uOntnZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oJ1RIUkVFLk9iamVjdDNEOiAudXNlUXVhdGVybmlvbiBoYXMgYmVlbiByZW1vdmVkLiBUaGUgbGlicmFyeSBub3cgdXNlcyBxdWF0ZXJuaW9ucyBieSBkZWZhdWx0LicpO30sc2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKCdUSFJFRS5PYmplY3QzRDogLnVzZVF1YXRlcm5pb24gaGFzIGJlZW4gcmVtb3ZlZC4gVGhlIGxpYnJhcnkgbm93IHVzZXMgcXVhdGVybmlvbnMgYnkgZGVmYXVsdC4nKTt9fX0pO01lc2gucHJvdG90eXBlLnNldERyYXdNb2RlPWZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcignVEhSRUUuTWVzaDogLnNldERyYXdNb2RlKCkgaGFzIGJlZW4gcmVtb3ZlZC4gVGhlIHJlbmRlcmVyIG5vdyBhbHdheXMgYXNzdW1lcyBUSFJFRS5UcmlhbmdsZXNEcmF3TW9kZS4gVHJhbnNmb3JtIHlvdXIgZ2VvbWV0cnkgdmlhIEJ1ZmZlckdlb21ldHJ5VXRpbHMudG9UcmlhbmdsZXNEcmF3TW9kZSgpIGlmIG5lY2Vzc2FyeS4nKTt9O09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKE1lc2gucHJvdG90eXBlLHtkcmF3TW9kZTp7Z2V0OmZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcignVEhSRUUuTWVzaDogLmRyYXdNb2RlIGhhcyBiZWVuIHJlbW92ZWQuIFRoZSByZW5kZXJlciBub3cgYWx3YXlzIGFzc3VtZXMgVEhSRUUuVHJpYW5nbGVzRHJhd01vZGUuJyk7cmV0dXJuIFRyaWFuZ2xlc0RyYXdNb2RlO30sc2V0OmZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcignVEhSRUUuTWVzaDogLmRyYXdNb2RlIGhhcyBiZWVuIHJlbW92ZWQuIFRoZSByZW5kZXJlciBub3cgYWx3YXlzIGFzc3VtZXMgVEhSRUUuVHJpYW5nbGVzRHJhd01vZGUuIFRyYW5zZm9ybSB5b3VyIGdlb21ldHJ5IHZpYSBCdWZmZXJHZW9tZXRyeVV0aWxzLnRvVHJpYW5nbGVzRHJhd01vZGUoKSBpZiBuZWNlc3NhcnkuJyk7fX19KTtTa2lubmVkTWVzaC5wcm90b3R5cGUuaW5pdEJvbmVzPWZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcignVEhSRUUuU2tpbm5lZE1lc2g6IGluaXRCb25lcygpIGhhcyBiZWVuIHJlbW92ZWQuJyk7fTsvLwoJUGVyc3BlY3RpdmVDYW1lcmEucHJvdG90eXBlLnNldExlbnM9ZnVuY3Rpb24oZm9jYWxMZW5ndGgsZmlsbUdhdWdlKXtjb25zb2xlLndhcm4oJ1RIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhLnNldExlbnMgaXMgZGVwcmVjYXRlZC4gJysnVXNlIC5zZXRGb2NhbExlbmd0aCBhbmQgLmZpbG1HYXVnZSBmb3IgYSBwaG90b2dyYXBoaWMgc2V0dXAuJyk7aWYoZmlsbUdhdWdlIT09dW5kZWZpbmVkKXRoaXMuZmlsbUdhdWdlPWZpbG1HYXVnZTt0aGlzLnNldEZvY2FsTGVuZ3RoKGZvY2FsTGVuZ3RoKTt9Oy8vCglPYmplY3QuZGVmaW5lUHJvcGVydGllcyhMaWdodC5wcm90b3R5cGUse29ubHlTaGFkb3c6e3NldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybignVEhSRUUuTGlnaHQ6IC5vbmx5U2hhZG93IGhhcyBiZWVuIHJlbW92ZWQuJyk7fX0sc2hhZG93Q2FtZXJhRm92OntzZXQ6ZnVuY3Rpb24odmFsdWUpe2NvbnNvbGUud2FybignVEhSRUUuTGlnaHQ6IC5zaGFkb3dDYW1lcmFGb3YgaXMgbm93IC5zaGFkb3cuY2FtZXJhLmZvdi4nKTt0aGlzLnNoYWRvdy5jYW1lcmEuZm92PXZhbHVlO319LHNoYWRvd0NhbWVyYUxlZnQ6e3NldDpmdW5jdGlvbih2YWx1ZSl7Y29uc29sZS53YXJuKCdUSFJFRS5MaWdodDogLnNoYWRvd0NhbWVyYUxlZnQgaXMgbm93IC5zaGFkb3cuY2FtZXJhLmxlZnQuJyk7dGhpcy5zaGFkb3cuY2FtZXJhLmxlZnQ9dmFsdWU7fX0sc2hhZG93Q2FtZXJhUmlnaHQ6e3NldDpmdW5jdGlvbih2YWx1ZSl7Y29uc29sZS53YXJuKCdUSFJFRS5MaWdodDogLnNoYWRvd0NhbWVyYVJpZ2h0IGlzIG5vdyAuc2hhZG93LmNhbWVyYS5yaWdodC4nKTt0aGlzLnNoYWRvdy5jYW1lcmEucmlnaHQ9dmFsdWU7fX0sc2hhZG93Q2FtZXJhVG9wOntzZXQ6ZnVuY3Rpb24odmFsdWUpe2NvbnNvbGUud2FybignVEhSRUUuTGlnaHQ6IC5zaGFkb3dDYW1lcmFUb3AgaXMgbm93IC5zaGFkb3cuY2FtZXJhLnRvcC4nKTt0aGlzLnNoYWRvdy5jYW1lcmEudG9wPXZhbHVlO319LHNoYWRvd0NhbWVyYUJvdHRvbTp7c2V0OmZ1bmN0aW9uKHZhbHVlKXtjb25zb2xlLndhcm4oJ1RIUkVFLkxpZ2h0OiAuc2hhZG93Q2FtZXJhQm90dG9tIGlzIG5vdyAuc2hhZG93LmNhbWVyYS5ib3R0b20uJyk7dGhpcy5zaGFkb3cuY2FtZXJhLmJvdHRvbT12YWx1ZTt9fSxzaGFkb3dDYW1lcmFOZWFyOntzZXQ6ZnVuY3Rpb24odmFsdWUpe2NvbnNvbGUud2FybignVEhSRUUuTGlnaHQ6IC5zaGFkb3dDYW1lcmFOZWFyIGlzIG5vdyAuc2hhZG93LmNhbWVyYS5uZWFyLicpO3RoaXMuc2hhZG93LmNhbWVyYS5uZWFyPXZhbHVlO319LHNoYWRvd0NhbWVyYUZhcjp7c2V0OmZ1bmN0aW9uKHZhbHVlKXtjb25zb2xlLndhcm4oJ1RIUkVFLkxpZ2h0OiAuc2hhZG93Q2FtZXJhRmFyIGlzIG5vdyAuc2hhZG93LmNhbWVyYS5mYXIuJyk7dGhpcy5zaGFkb3cuY2FtZXJhLmZhcj12YWx1ZTt9fSxzaGFkb3dDYW1lcmFWaXNpYmxlOntzZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oJ1RIUkVFLkxpZ2h0OiAuc2hhZG93Q2FtZXJhVmlzaWJsZSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgbmV3IFRIUkVFLkNhbWVyYUhlbHBlciggbGlnaHQuc2hhZG93LmNhbWVyYSApIGluc3RlYWQuJyk7fX0sc2hhZG93Qmlhczp7c2V0OmZ1bmN0aW9uKHZhbHVlKXtjb25zb2xlLndhcm4oJ1RIUkVFLkxpZ2h0OiAuc2hhZG93QmlhcyBpcyBub3cgLnNoYWRvdy5iaWFzLicpO3RoaXMuc2hhZG93LmJpYXM9dmFsdWU7fX0sc2hhZG93RGFya25lc3M6e3NldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybignVEhSRUUuTGlnaHQ6IC5zaGFkb3dEYXJrbmVzcyBoYXMgYmVlbiByZW1vdmVkLicpO319LHNoYWRvd01hcFdpZHRoOntzZXQ6ZnVuY3Rpb24odmFsdWUpe2NvbnNvbGUud2FybignVEhSRUUuTGlnaHQ6IC5zaGFkb3dNYXBXaWR0aCBpcyBub3cgLnNoYWRvdy5tYXBTaXplLndpZHRoLicpO3RoaXMuc2hhZG93Lm1hcFNpemUud2lkdGg9dmFsdWU7fX0sc2hhZG93TWFwSGVpZ2h0OntzZXQ6ZnVuY3Rpb24odmFsdWUpe2NvbnNvbGUud2FybignVEhSRUUuTGlnaHQ6IC5zaGFkb3dNYXBIZWlnaHQgaXMgbm93IC5zaGFkb3cubWFwU2l6ZS5oZWlnaHQuJyk7dGhpcy5zaGFkb3cubWFwU2l6ZS5oZWlnaHQ9dmFsdWU7fX19KTsvLwoJT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoQnVmZmVyQXR0cmlidXRlLnByb3RvdHlwZSx7bGVuZ3RoOntnZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oJ1RIUkVFLkJ1ZmZlckF0dHJpYnV0ZTogLmxlbmd0aCBoYXMgYmVlbiBkZXByZWNhdGVkLiBVc2UgLmNvdW50IGluc3RlYWQuJyk7cmV0dXJuIHRoaXMuYXJyYXkubGVuZ3RoO319LGR5bmFtaWM6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybignVEhSRUUuQnVmZmVyQXR0cmlidXRlOiAuZHluYW1pYyBoYXMgYmVlbiBkZXByZWNhdGVkLiBVc2UgLnVzYWdlIGluc3RlYWQuJyk7cmV0dXJuIHRoaXMudXNhZ2U9PT1EeW5hbWljRHJhd1VzYWdlO30sc2V0OmZ1bmN0aW9uLyogdmFsdWUgKi8oKXtjb25zb2xlLndhcm4oJ1RIUkVFLkJ1ZmZlckF0dHJpYnV0ZTogLmR5bmFtaWMgaGFzIGJlZW4gZGVwcmVjYXRlZC4gVXNlIC51c2FnZSBpbnN0ZWFkLicpO3RoaXMuc2V0VXNhZ2UoRHluYW1pY0RyYXdVc2FnZSk7fX19KTtCdWZmZXJBdHRyaWJ1dGUucHJvdG90eXBlLnNldER5bmFtaWM9ZnVuY3Rpb24odmFsdWUpe2NvbnNvbGUud2FybignVEhSRUUuQnVmZmVyQXR0cmlidXRlOiAuc2V0RHluYW1pYygpIGhhcyBiZWVuIGRlcHJlY2F0ZWQuIFVzZSAuc2V0VXNhZ2UoKSBpbnN0ZWFkLicpO3RoaXMuc2V0VXNhZ2UodmFsdWU9PT10cnVlP0R5bmFtaWNEcmF3VXNhZ2U6U3RhdGljRHJhd1VzYWdlKTtyZXR1cm4gdGhpczt9O0J1ZmZlckF0dHJpYnV0ZS5wcm90b3R5cGUuY29weUluZGljZXNBcnJheT1mdW5jdGlvbi8qIGluZGljZXMgKi8oKXtjb25zb2xlLmVycm9yKCdUSFJFRS5CdWZmZXJBdHRyaWJ1dGU6IC5jb3B5SW5kaWNlc0FycmF5KCkgaGFzIGJlZW4gcmVtb3ZlZC4nKTt9LEJ1ZmZlckF0dHJpYnV0ZS5wcm90b3R5cGUuc2V0QXJyYXk9ZnVuY3Rpb24vKiBhcnJheSAqLygpe2NvbnNvbGUuZXJyb3IoJ1RIUkVFLkJ1ZmZlckF0dHJpYnV0ZTogLnNldEFycmF5IGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBCdWZmZXJHZW9tZXRyeSAuc2V0QXR0cmlidXRlIHRvIHJlcGxhY2UvcmVzaXplIGF0dHJpYnV0ZSBidWZmZXJzJyk7fTsvLwoJQnVmZmVyR2VvbWV0cnkucHJvdG90eXBlLmFkZEluZGV4PWZ1bmN0aW9uKGluZGV4KXtjb25zb2xlLndhcm4oJ1RIUkVFLkJ1ZmZlckdlb21ldHJ5OiAuYWRkSW5kZXgoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5zZXRJbmRleCgpLicpO3RoaXMuc2V0SW5kZXgoaW5kZXgpO307QnVmZmVyR2VvbWV0cnkucHJvdG90eXBlLmFkZEF0dHJpYnV0ZT1mdW5jdGlvbihuYW1lLGF0dHJpYnV0ZSl7Y29uc29sZS53YXJuKCdUSFJFRS5CdWZmZXJHZW9tZXRyeTogLmFkZEF0dHJpYnV0ZSgpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLnNldEF0dHJpYnV0ZSgpLicpO2lmKCEoYXR0cmlidXRlJiZhdHRyaWJ1dGUuaXNCdWZmZXJBdHRyaWJ1dGUpJiYhKGF0dHJpYnV0ZSYmYXR0cmlidXRlLmlzSW50ZXJsZWF2ZWRCdWZmZXJBdHRyaWJ1dGUpKXtjb25zb2xlLndhcm4oJ1RIUkVFLkJ1ZmZlckdlb21ldHJ5OiAuYWRkQXR0cmlidXRlKCkgbm93IGV4cGVjdHMgKCBuYW1lLCBhdHRyaWJ1dGUgKS4nKTtyZXR1cm4gdGhpcy5zZXRBdHRyaWJ1dGUobmFtZSxuZXcgQnVmZmVyQXR0cmlidXRlKGFyZ3VtZW50c1sxXSxhcmd1bWVudHNbMl0pKTt9aWYobmFtZT09PSdpbmRleCcpe2NvbnNvbGUud2FybignVEhSRUUuQnVmZmVyR2VvbWV0cnkuYWRkQXR0cmlidXRlOiBVc2UgLnNldEluZGV4KCkgZm9yIGluZGV4IGF0dHJpYnV0ZS4nKTt0aGlzLnNldEluZGV4KGF0dHJpYnV0ZSk7cmV0dXJuIHRoaXM7fXJldHVybiB0aGlzLnNldEF0dHJpYnV0ZShuYW1lLGF0dHJpYnV0ZSk7fTtCdWZmZXJHZW9tZXRyeS5wcm90b3R5cGUuYWRkRHJhd0NhbGw9ZnVuY3Rpb24oc3RhcnQsY291bnQsaW5kZXhPZmZzZXQpe2lmKGluZGV4T2Zmc2V0IT09dW5kZWZpbmVkKXtjb25zb2xlLndhcm4oJ1RIUkVFLkJ1ZmZlckdlb21ldHJ5OiAuYWRkRHJhd0NhbGwoKSBubyBsb25nZXIgc3VwcG9ydHMgaW5kZXhPZmZzZXQuJyk7fWNvbnNvbGUud2FybignVEhSRUUuQnVmZmVyR2VvbWV0cnk6IC5hZGREcmF3Q2FsbCgpIGlzIG5vdyAuYWRkR3JvdXAoKS4nKTt0aGlzLmFkZEdyb3VwKHN0YXJ0LGNvdW50KTt9O0J1ZmZlckdlb21ldHJ5LnByb3RvdHlwZS5jbGVhckRyYXdDYWxscz1mdW5jdGlvbigpe2NvbnNvbGUud2FybignVEhSRUUuQnVmZmVyR2VvbWV0cnk6IC5jbGVhckRyYXdDYWxscygpIGlzIG5vdyAuY2xlYXJHcm91cHMoKS4nKTt0aGlzLmNsZWFyR3JvdXBzKCk7fTtCdWZmZXJHZW9tZXRyeS5wcm90b3R5cGUuY29tcHV0ZU9mZnNldHM9ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oJ1RIUkVFLkJ1ZmZlckdlb21ldHJ5OiAuY29tcHV0ZU9mZnNldHMoKSBoYXMgYmVlbiByZW1vdmVkLicpO307QnVmZmVyR2VvbWV0cnkucHJvdG90eXBlLnJlbW92ZUF0dHJpYnV0ZT1mdW5jdGlvbihuYW1lKXtjb25zb2xlLndhcm4oJ1RIUkVFLkJ1ZmZlckdlb21ldHJ5OiAucmVtb3ZlQXR0cmlidXRlKCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuZGVsZXRlQXR0cmlidXRlKCkuJyk7cmV0dXJuIHRoaXMuZGVsZXRlQXR0cmlidXRlKG5hbWUpO307QnVmZmVyR2VvbWV0cnkucHJvdG90eXBlLmFwcGx5TWF0cml4PWZ1bmN0aW9uKG1hdHJpeCl7Y29uc29sZS53YXJuKCdUSFJFRS5CdWZmZXJHZW9tZXRyeTogLmFwcGx5TWF0cml4KCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuYXBwbHlNYXRyaXg0KCkuJyk7cmV0dXJuIHRoaXMuYXBwbHlNYXRyaXg0KG1hdHJpeCk7fTtPYmplY3QuZGVmaW5lUHJvcGVydGllcyhCdWZmZXJHZW9tZXRyeS5wcm90b3R5cGUse2RyYXdjYWxsczp7Z2V0OmZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcignVEhSRUUuQnVmZmVyR2VvbWV0cnk6IC5kcmF3Y2FsbHMgaGFzIGJlZW4gcmVuYW1lZCB0byAuZ3JvdXBzLicpO3JldHVybiB0aGlzLmdyb3Vwczt9fSxvZmZzZXRzOntnZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oJ1RIUkVFLkJ1ZmZlckdlb21ldHJ5OiAub2Zmc2V0cyBoYXMgYmVlbiByZW5hbWVkIHRvIC5ncm91cHMuJyk7cmV0dXJuIHRoaXMuZ3JvdXBzO319fSk7SW50ZXJsZWF2ZWRCdWZmZXIucHJvdG90eXBlLnNldER5bmFtaWM9ZnVuY3Rpb24odmFsdWUpe2NvbnNvbGUud2FybignVEhSRUUuSW50ZXJsZWF2ZWRCdWZmZXI6IC5zZXREeW5hbWljKCkgaGFzIGJlZW4gZGVwcmVjYXRlZC4gVXNlIC5zZXRVc2FnZSgpIGluc3RlYWQuJyk7dGhpcy5zZXRVc2FnZSh2YWx1ZT09PXRydWU/RHluYW1pY0RyYXdVc2FnZTpTdGF0aWNEcmF3VXNhZ2UpO3JldHVybiB0aGlzO307SW50ZXJsZWF2ZWRCdWZmZXIucHJvdG90eXBlLnNldEFycmF5PWZ1bmN0aW9uLyogYXJyYXkgKi8oKXtjb25zb2xlLmVycm9yKCdUSFJFRS5JbnRlcmxlYXZlZEJ1ZmZlcjogLnNldEFycmF5IGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBCdWZmZXJHZW9tZXRyeSAuc2V0QXR0cmlidXRlIHRvIHJlcGxhY2UvcmVzaXplIGF0dHJpYnV0ZSBidWZmZXJzJyk7fTsvLwoJRXh0cnVkZUdlb21ldHJ5LnByb3RvdHlwZS5nZXRBcnJheXM9ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKCdUSFJFRS5FeHRydWRlR2VvbWV0cnk6IC5nZXRBcnJheXMoKSBoYXMgYmVlbiByZW1vdmVkLicpO307RXh0cnVkZUdlb21ldHJ5LnByb3RvdHlwZS5hZGRTaGFwZUxpc3Q9ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKCdUSFJFRS5FeHRydWRlR2VvbWV0cnk6IC5hZGRTaGFwZUxpc3QoKSBoYXMgYmVlbiByZW1vdmVkLicpO307RXh0cnVkZUdlb21ldHJ5LnByb3RvdHlwZS5hZGRTaGFwZT1mdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoJ1RIUkVFLkV4dHJ1ZGVHZW9tZXRyeTogLmFkZFNoYXBlKCkgaGFzIGJlZW4gcmVtb3ZlZC4nKTt9Oy8vCglTY2VuZS5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoJ1RIUkVFLlNjZW5lOiAuZGlzcG9zZSgpIGhhcyBiZWVuIHJlbW92ZWQuJyk7fTsvLwoJT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoTWF0ZXJpYWwucHJvdG90eXBlLHt3cmFwQXJvdW5kOntnZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oJ1RIUkVFLk1hdGVyaWFsOiAud3JhcEFyb3VuZCBoYXMgYmVlbiByZW1vdmVkLicpO30sc2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKCdUSFJFRS5NYXRlcmlhbDogLndyYXBBcm91bmQgaGFzIGJlZW4gcmVtb3ZlZC4nKTt9fSxvdmVyZHJhdzp7Z2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKCdUSFJFRS5NYXRlcmlhbDogLm92ZXJkcmF3IGhhcyBiZWVuIHJlbW92ZWQuJyk7fSxzZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oJ1RIUkVFLk1hdGVyaWFsOiAub3ZlcmRyYXcgaGFzIGJlZW4gcmVtb3ZlZC4nKTt9fSx3cmFwUkdCOntnZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oJ1RIUkVFLk1hdGVyaWFsOiAud3JhcFJHQiBoYXMgYmVlbiByZW1vdmVkLicpO3JldHVybiBuZXcgQ29sb3IoKTt9fSxzaGFkaW5nOntnZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKCdUSFJFRS4nK3RoaXMudHlwZSsnOiAuc2hhZGluZyBoYXMgYmVlbiByZW1vdmVkLiBVc2UgdGhlIGJvb2xlYW4gLmZsYXRTaGFkaW5nIGluc3RlYWQuJyk7fSxzZXQ6ZnVuY3Rpb24odmFsdWUpe2NvbnNvbGUud2FybignVEhSRUUuJyt0aGlzLnR5cGUrJzogLnNoYWRpbmcgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIHRoZSBib29sZWFuIC5mbGF0U2hhZGluZyBpbnN0ZWFkLicpO3RoaXMuZmxhdFNoYWRpbmc9dmFsdWU9PT1GbGF0U2hhZGluZzt9fSxzdGVuY2lsTWFzazp7Z2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKCdUSFJFRS4nK3RoaXMudHlwZSsnOiAuc3RlbmNpbE1hc2sgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIC5zdGVuY2lsRnVuY01hc2sgaW5zdGVhZC4nKTtyZXR1cm4gdGhpcy5zdGVuY2lsRnVuY01hc2s7fSxzZXQ6ZnVuY3Rpb24odmFsdWUpe2NvbnNvbGUud2FybignVEhSRUUuJyt0aGlzLnR5cGUrJzogLnN0ZW5jaWxNYXNrIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSAuc3RlbmNpbEZ1bmNNYXNrIGluc3RlYWQuJyk7dGhpcy5zdGVuY2lsRnVuY01hc2s9dmFsdWU7fX0sdmVydGV4VGFuZ2VudHM6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybignVEhSRUUuJyt0aGlzLnR5cGUrJzogLnZlcnRleFRhbmdlbnRzIGhhcyBiZWVuIHJlbW92ZWQuJyk7fSxzZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oJ1RIUkVFLicrdGhpcy50eXBlKyc6IC52ZXJ0ZXhUYW5nZW50cyBoYXMgYmVlbiByZW1vdmVkLicpO319fSk7T2JqZWN0LmRlZmluZVByb3BlcnRpZXMoU2hhZGVyTWF0ZXJpYWwucHJvdG90eXBlLHtkZXJpdmF0aXZlczp7Z2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKCdUSFJFRS5TaGFkZXJNYXRlcmlhbDogLmRlcml2YXRpdmVzIGhhcyBiZWVuIG1vdmVkIHRvIC5leHRlbnNpb25zLmRlcml2YXRpdmVzLicpO3JldHVybiB0aGlzLmV4dGVuc2lvbnMuZGVyaXZhdGl2ZXM7fSxzZXQ6ZnVuY3Rpb24odmFsdWUpe2NvbnNvbGUud2FybignVEhSRUUuIFNoYWRlck1hdGVyaWFsOiAuZGVyaXZhdGl2ZXMgaGFzIGJlZW4gbW92ZWQgdG8gLmV4dGVuc2lvbnMuZGVyaXZhdGl2ZXMuJyk7dGhpcy5leHRlbnNpb25zLmRlcml2YXRpdmVzPXZhbHVlO319fSk7Ly8KCVdlYkdMUmVuZGVyZXIucHJvdG90eXBlLmNsZWFyVGFyZ2V0PWZ1bmN0aW9uKHJlbmRlclRhcmdldCxjb2xvcixkZXB0aCxzdGVuY2lsKXtjb25zb2xlLndhcm4oJ1RIUkVFLldlYkdMUmVuZGVyZXI6IC5jbGVhclRhcmdldCgpIGhhcyBiZWVuIGRlcHJlY2F0ZWQuIFVzZSAuc2V0UmVuZGVyVGFyZ2V0KCkgYW5kIC5jbGVhcigpIGluc3RlYWQuJyk7dGhpcy5zZXRSZW5kZXJUYXJnZXQocmVuZGVyVGFyZ2V0KTt0aGlzLmNsZWFyKGNvbG9yLGRlcHRoLHN0ZW5jaWwpO307V2ViR0xSZW5kZXJlci5wcm90b3R5cGUuYW5pbWF0ZT1mdW5jdGlvbihjYWxsYmFjayl7Y29uc29sZS53YXJuKCdUSFJFRS5XZWJHTFJlbmRlcmVyOiAuYW5pbWF0ZSgpIGlzIG5vdyAuc2V0QW5pbWF0aW9uTG9vcCgpLicpO3RoaXMuc2V0QW5pbWF0aW9uTG9vcChjYWxsYmFjayk7fTtXZWJHTFJlbmRlcmVyLnByb3RvdHlwZS5nZXRDdXJyZW50UmVuZGVyVGFyZ2V0PWZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKCdUSFJFRS5XZWJHTFJlbmRlcmVyOiAuZ2V0Q3VycmVudFJlbmRlclRhcmdldCgpIGlzIG5vdyAuZ2V0UmVuZGVyVGFyZ2V0KCkuJyk7cmV0dXJuIHRoaXMuZ2V0UmVuZGVyVGFyZ2V0KCk7fTtXZWJHTFJlbmRlcmVyLnByb3RvdHlwZS5nZXRNYXhBbmlzb3Ryb3B5PWZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKCdUSFJFRS5XZWJHTFJlbmRlcmVyOiAuZ2V0TWF4QW5pc290cm9weSgpIGlzIG5vdyAuY2FwYWJpbGl0aWVzLmdldE1heEFuaXNvdHJvcHkoKS4nKTtyZXR1cm4gdGhpcy5jYXBhYmlsaXRpZXMuZ2V0TWF4QW5pc290cm9weSgpO307V2ViR0xSZW5kZXJlci5wcm90b3R5cGUuZ2V0UHJlY2lzaW9uPWZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKCdUSFJFRS5XZWJHTFJlbmRlcmVyOiAuZ2V0UHJlY2lzaW9uKCkgaXMgbm93IC5jYXBhYmlsaXRpZXMucHJlY2lzaW9uLicpO3JldHVybiB0aGlzLmNhcGFiaWxpdGllcy5wcmVjaXNpb247fTtXZWJHTFJlbmRlcmVyLnByb3RvdHlwZS5yZXNldEdMU3RhdGU9ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oJ1RIUkVFLldlYkdMUmVuZGVyZXI6IC5yZXNldEdMU3RhdGUoKSBpcyBub3cgLnN0YXRlLnJlc2V0KCkuJyk7cmV0dXJuIHRoaXMuc3RhdGUucmVzZXQoKTt9O1dlYkdMUmVuZGVyZXIucHJvdG90eXBlLnN1cHBvcnRzRmxvYXRUZXh0dXJlcz1mdW5jdGlvbigpe2NvbnNvbGUud2FybignVEhSRUUuV2ViR0xSZW5kZXJlcjogLnN1cHBvcnRzRmxvYXRUZXh0dXJlcygpIGlzIG5vdyAuZXh0ZW5zaW9ucy5nZXQoIFwnT0VTX3RleHR1cmVfZmxvYXRcJyApLicpO3JldHVybiB0aGlzLmV4dGVuc2lvbnMuZ2V0KCdPRVNfdGV4dHVyZV9mbG9hdCcpO307V2ViR0xSZW5kZXJlci5wcm90b3R5cGUuc3VwcG9ydHNIYWxmRmxvYXRUZXh0dXJlcz1mdW5jdGlvbigpe2NvbnNvbGUud2FybignVEhSRUUuV2ViR0xSZW5kZXJlcjogLnN1cHBvcnRzSGFsZkZsb2F0VGV4dHVyZXMoKSBpcyBub3cgLmV4dGVuc2lvbnMuZ2V0KCBcJ09FU190ZXh0dXJlX2hhbGZfZmxvYXRcJyApLicpO3JldHVybiB0aGlzLmV4dGVuc2lvbnMuZ2V0KCdPRVNfdGV4dHVyZV9oYWxmX2Zsb2F0Jyk7fTtXZWJHTFJlbmRlcmVyLnByb3RvdHlwZS5zdXBwb3J0c1N0YW5kYXJkRGVyaXZhdGl2ZXM9ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oJ1RIUkVFLldlYkdMUmVuZGVyZXI6IC5zdXBwb3J0c1N0YW5kYXJkRGVyaXZhdGl2ZXMoKSBpcyBub3cgLmV4dGVuc2lvbnMuZ2V0KCBcJ09FU19zdGFuZGFyZF9kZXJpdmF0aXZlc1wnICkuJyk7cmV0dXJuIHRoaXMuZXh0ZW5zaW9ucy5nZXQoJ09FU19zdGFuZGFyZF9kZXJpdmF0aXZlcycpO307V2ViR0xSZW5kZXJlci5wcm90b3R5cGUuc3VwcG9ydHNDb21wcmVzc2VkVGV4dHVyZVMzVEM9ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oJ1RIUkVFLldlYkdMUmVuZGVyZXI6IC5zdXBwb3J0c0NvbXByZXNzZWRUZXh0dXJlUzNUQygpIGlzIG5vdyAuZXh0ZW5zaW9ucy5nZXQoIFwnV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3MzdGNcJyApLicpO3JldHVybiB0aGlzLmV4dGVuc2lvbnMuZ2V0KCdXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfczN0YycpO307V2ViR0xSZW5kZXJlci5wcm90b3R5cGUuc3VwcG9ydHNDb21wcmVzc2VkVGV4dHVyZVBWUlRDPWZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKCdUSFJFRS5XZWJHTFJlbmRlcmVyOiAuc3VwcG9ydHNDb21wcmVzc2VkVGV4dHVyZVBWUlRDKCkgaXMgbm93IC5leHRlbnNpb25zLmdldCggXCdXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfcHZydGNcJyApLicpO3JldHVybiB0aGlzLmV4dGVuc2lvbnMuZ2V0KCdXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfcHZydGMnKTt9O1dlYkdMUmVuZGVyZXIucHJvdG90eXBlLnN1cHBvcnRzQmxlbmRNaW5NYXg9ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oJ1RIUkVFLldlYkdMUmVuZGVyZXI6IC5zdXBwb3J0c0JsZW5kTWluTWF4KCkgaXMgbm93IC5leHRlbnNpb25zLmdldCggXCdFWFRfYmxlbmRfbWlubWF4XCcgKS4nKTtyZXR1cm4gdGhpcy5leHRlbnNpb25zLmdldCgnRVhUX2JsZW5kX21pbm1heCcpO307V2ViR0xSZW5kZXJlci5wcm90b3R5cGUuc3VwcG9ydHNWZXJ0ZXhUZXh0dXJlcz1mdW5jdGlvbigpe2NvbnNvbGUud2FybignVEhSRUUuV2ViR0xSZW5kZXJlcjogLnN1cHBvcnRzVmVydGV4VGV4dHVyZXMoKSBpcyBub3cgLmNhcGFiaWxpdGllcy52ZXJ0ZXhUZXh0dXJlcy4nKTtyZXR1cm4gdGhpcy5jYXBhYmlsaXRpZXMudmVydGV4VGV4dHVyZXM7fTtXZWJHTFJlbmRlcmVyLnByb3RvdHlwZS5zdXBwb3J0c0luc3RhbmNlZEFycmF5cz1mdW5jdGlvbigpe2NvbnNvbGUud2FybignVEhSRUUuV2ViR0xSZW5kZXJlcjogLnN1cHBvcnRzSW5zdGFuY2VkQXJyYXlzKCkgaXMgbm93IC5leHRlbnNpb25zLmdldCggXCdBTkdMRV9pbnN0YW5jZWRfYXJyYXlzXCcgKS4nKTtyZXR1cm4gdGhpcy5leHRlbnNpb25zLmdldCgnQU5HTEVfaW5zdGFuY2VkX2FycmF5cycpO307V2ViR0xSZW5kZXJlci5wcm90b3R5cGUuZW5hYmxlU2Npc3NvclRlc3Q9ZnVuY3Rpb24oYm9vbGVhbil7Y29uc29sZS53YXJuKCdUSFJFRS5XZWJHTFJlbmRlcmVyOiAuZW5hYmxlU2Npc3NvclRlc3QoKSBpcyBub3cgLnNldFNjaXNzb3JUZXN0KCkuJyk7dGhpcy5zZXRTY2lzc29yVGVzdChib29sZWFuKTt9O1dlYkdMUmVuZGVyZXIucHJvdG90eXBlLmluaXRNYXRlcmlhbD1mdW5jdGlvbigpe2NvbnNvbGUud2FybignVEhSRUUuV2ViR0xSZW5kZXJlcjogLmluaXRNYXRlcmlhbCgpIGhhcyBiZWVuIHJlbW92ZWQuJyk7fTtXZWJHTFJlbmRlcmVyLnByb3RvdHlwZS5hZGRQcmVQbHVnaW49ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oJ1RIUkVFLldlYkdMUmVuZGVyZXI6IC5hZGRQcmVQbHVnaW4oKSBoYXMgYmVlbiByZW1vdmVkLicpO307V2ViR0xSZW5kZXJlci5wcm90b3R5cGUuYWRkUG9zdFBsdWdpbj1mdW5jdGlvbigpe2NvbnNvbGUud2FybignVEhSRUUuV2ViR0xSZW5kZXJlcjogLmFkZFBvc3RQbHVnaW4oKSBoYXMgYmVlbiByZW1vdmVkLicpO307V2ViR0xSZW5kZXJlci5wcm90b3R5cGUudXBkYXRlU2hhZG93TWFwPWZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKCdUSFJFRS5XZWJHTFJlbmRlcmVyOiAudXBkYXRlU2hhZG93TWFwKCkgaGFzIGJlZW4gcmVtb3ZlZC4nKTt9O1dlYkdMUmVuZGVyZXIucHJvdG90eXBlLnNldEZhY2VDdWxsaW5nPWZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKCdUSFJFRS5XZWJHTFJlbmRlcmVyOiAuc2V0RmFjZUN1bGxpbmcoKSBoYXMgYmVlbiByZW1vdmVkLicpO307V2ViR0xSZW5kZXJlci5wcm90b3R5cGUuYWxsb2NUZXh0dXJlVW5pdD1mdW5jdGlvbigpe2NvbnNvbGUud2FybignVEhSRUUuV2ViR0xSZW5kZXJlcjogLmFsbG9jVGV4dHVyZVVuaXQoKSBoYXMgYmVlbiByZW1vdmVkLicpO307V2ViR0xSZW5kZXJlci5wcm90b3R5cGUuc2V0VGV4dHVyZT1mdW5jdGlvbigpe2NvbnNvbGUud2FybignVEhSRUUuV2ViR0xSZW5kZXJlcjogLnNldFRleHR1cmUoKSBoYXMgYmVlbiByZW1vdmVkLicpO307V2ViR0xSZW5kZXJlci5wcm90b3R5cGUuc2V0VGV4dHVyZTJEPWZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKCdUSFJFRS5XZWJHTFJlbmRlcmVyOiAuc2V0VGV4dHVyZTJEKCkgaGFzIGJlZW4gcmVtb3ZlZC4nKTt9O1dlYkdMUmVuZGVyZXIucHJvdG90eXBlLnNldFRleHR1cmVDdWJlPWZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKCdUSFJFRS5XZWJHTFJlbmRlcmVyOiAuc2V0VGV4dHVyZUN1YmUoKSBoYXMgYmVlbiByZW1vdmVkLicpO307V2ViR0xSZW5kZXJlci5wcm90b3R5cGUuZ2V0QWN0aXZlTWlwTWFwTGV2ZWw9ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oJ1RIUkVFLldlYkdMUmVuZGVyZXI6IC5nZXRBY3RpdmVNaXBNYXBMZXZlbCgpIGlzIG5vdyAuZ2V0QWN0aXZlTWlwbWFwTGV2ZWwoKS4nKTtyZXR1cm4gdGhpcy5nZXRBY3RpdmVNaXBtYXBMZXZlbCgpO307T2JqZWN0LmRlZmluZVByb3BlcnRpZXMoV2ViR0xSZW5kZXJlci5wcm90b3R5cGUse3NoYWRvd01hcEVuYWJsZWQ6e2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNoYWRvd01hcC5lbmFibGVkO30sc2V0OmZ1bmN0aW9uKHZhbHVlKXtjb25zb2xlLndhcm4oJ1RIUkVFLldlYkdMUmVuZGVyZXI6IC5zaGFkb3dNYXBFbmFibGVkIGlzIG5vdyAuc2hhZG93TWFwLmVuYWJsZWQuJyk7dGhpcy5zaGFkb3dNYXAuZW5hYmxlZD12YWx1ZTt9fSxzaGFkb3dNYXBUeXBlOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zaGFkb3dNYXAudHlwZTt9LHNldDpmdW5jdGlvbih2YWx1ZSl7Y29uc29sZS53YXJuKCdUSFJFRS5XZWJHTFJlbmRlcmVyOiAuc2hhZG93TWFwVHlwZSBpcyBub3cgLnNoYWRvd01hcC50eXBlLicpO3RoaXMuc2hhZG93TWFwLnR5cGU9dmFsdWU7fX0sc2hhZG93TWFwQ3VsbEZhY2U6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybignVEhSRUUuV2ViR0xSZW5kZXJlcjogLnNoYWRvd01hcEN1bGxGYWNlIGhhcyBiZWVuIHJlbW92ZWQuIFNldCBNYXRlcmlhbC5zaGFkb3dTaWRlIGluc3RlYWQuJyk7cmV0dXJuIHVuZGVmaW5lZDt9LHNldDpmdW5jdGlvbi8qIHZhbHVlICovKCl7Y29uc29sZS53YXJuKCdUSFJFRS5XZWJHTFJlbmRlcmVyOiAuc2hhZG93TWFwQ3VsbEZhY2UgaGFzIGJlZW4gcmVtb3ZlZC4gU2V0IE1hdGVyaWFsLnNoYWRvd1NpZGUgaW5zdGVhZC4nKTt9fSxjb250ZXh0OntnZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oJ1RIUkVFLldlYkdMUmVuZGVyZXI6IC5jb250ZXh0IGhhcyBiZWVuIHJlbW92ZWQuIFVzZSAuZ2V0Q29udGV4dCgpIGluc3RlYWQuJyk7cmV0dXJuIHRoaXMuZ2V0Q29udGV4dCgpO319LHZyOntnZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oJ1RIUkVFLldlYkdMUmVuZGVyZXI6IC52ciBoYXMgYmVlbiByZW5hbWVkIHRvIC54cicpO3JldHVybiB0aGlzLnhyO319LGdhbW1hSW5wdXQ6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybignVEhSRUUuV2ViR0xSZW5kZXJlcjogLmdhbW1hSW5wdXQgaGFzIGJlZW4gcmVtb3ZlZC4gU2V0IHRoZSBlbmNvZGluZyBmb3IgdGV4dHVyZXMgdmlhIFRleHR1cmUuZW5jb2RpbmcgaW5zdGVhZC4nKTtyZXR1cm4gZmFsc2U7fSxzZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oJ1RIUkVFLldlYkdMUmVuZGVyZXI6IC5nYW1tYUlucHV0IGhhcyBiZWVuIHJlbW92ZWQuIFNldCB0aGUgZW5jb2RpbmcgZm9yIHRleHR1cmVzIHZpYSBUZXh0dXJlLmVuY29kaW5nIGluc3RlYWQuJyk7fX0sZ2FtbWFPdXRwdXQ6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybignVEhSRUUuV2ViR0xSZW5kZXJlcjogLmdhbW1hT3V0cHV0IGhhcyBiZWVuIHJlbW92ZWQuIFNldCBXZWJHTFJlbmRlcmVyLm91dHB1dEVuY29kaW5nIGluc3RlYWQuJyk7cmV0dXJuIGZhbHNlO30sc2V0OmZ1bmN0aW9uKHZhbHVlKXtjb25zb2xlLndhcm4oJ1RIUkVFLldlYkdMUmVuZGVyZXI6IC5nYW1tYU91dHB1dCBoYXMgYmVlbiByZW1vdmVkLiBTZXQgV2ViR0xSZW5kZXJlci5vdXRwdXRFbmNvZGluZyBpbnN0ZWFkLicpO3RoaXMub3V0cHV0RW5jb2Rpbmc9dmFsdWU9PT10cnVlP3NSR0JFbmNvZGluZzpMaW5lYXJFbmNvZGluZzt9fSx0b25lTWFwcGluZ1doaXRlUG9pbnQ6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybignVEhSRUUuV2ViR0xSZW5kZXJlcjogLnRvbmVNYXBwaW5nV2hpdGVQb2ludCBoYXMgYmVlbiByZW1vdmVkLicpO3JldHVybiAxLjA7fSxzZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oJ1RIUkVFLldlYkdMUmVuZGVyZXI6IC50b25lTWFwcGluZ1doaXRlUG9pbnQgaGFzIGJlZW4gcmVtb3ZlZC4nKTt9fX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFdlYkdMU2hhZG93TWFwLnByb3RvdHlwZSx7Y3VsbEZhY2U6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybignVEhSRUUuV2ViR0xSZW5kZXJlcjogLnNoYWRvd01hcC5jdWxsRmFjZSBoYXMgYmVlbiByZW1vdmVkLiBTZXQgTWF0ZXJpYWwuc2hhZG93U2lkZSBpbnN0ZWFkLicpO3JldHVybiB1bmRlZmluZWQ7fSxzZXQ6ZnVuY3Rpb24vKiBjdWxsRmFjZSAqLygpe2NvbnNvbGUud2FybignVEhSRUUuV2ViR0xSZW5kZXJlcjogLnNoYWRvd01hcC5jdWxsRmFjZSBoYXMgYmVlbiByZW1vdmVkLiBTZXQgTWF0ZXJpYWwuc2hhZG93U2lkZSBpbnN0ZWFkLicpO319LHJlbmRlclJldmVyc2VTaWRlZDp7Z2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKCdUSFJFRS5XZWJHTFJlbmRlcmVyOiAuc2hhZG93TWFwLnJlbmRlclJldmVyc2VTaWRlZCBoYXMgYmVlbiByZW1vdmVkLiBTZXQgTWF0ZXJpYWwuc2hhZG93U2lkZSBpbnN0ZWFkLicpO3JldHVybiB1bmRlZmluZWQ7fSxzZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oJ1RIUkVFLldlYkdMUmVuZGVyZXI6IC5zaGFkb3dNYXAucmVuZGVyUmV2ZXJzZVNpZGVkIGhhcyBiZWVuIHJlbW92ZWQuIFNldCBNYXRlcmlhbC5zaGFkb3dTaWRlIGluc3RlYWQuJyk7fX0scmVuZGVyU2luZ2xlU2lkZWQ6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybignVEhSRUUuV2ViR0xSZW5kZXJlcjogLnNoYWRvd01hcC5yZW5kZXJTaW5nbGVTaWRlZCBoYXMgYmVlbiByZW1vdmVkLiBTZXQgTWF0ZXJpYWwuc2hhZG93U2lkZSBpbnN0ZWFkLicpO3JldHVybiB1bmRlZmluZWQ7fSxzZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oJ1RIUkVFLldlYkdMUmVuZGVyZXI6IC5zaGFkb3dNYXAucmVuZGVyU2luZ2xlU2lkZWQgaGFzIGJlZW4gcmVtb3ZlZC4gU2V0IE1hdGVyaWFsLnNoYWRvd1NpZGUgaW5zdGVhZC4nKTt9fX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFdlYkdMUmVuZGVyVGFyZ2V0LnByb3RvdHlwZSx7d3JhcFM6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybignVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQ6IC53cmFwUyBpcyBub3cgLnRleHR1cmUud3JhcFMuJyk7cmV0dXJuIHRoaXMudGV4dHVyZS53cmFwUzt9LHNldDpmdW5jdGlvbih2YWx1ZSl7Y29uc29sZS53YXJuKCdUSFJFRS5XZWJHTFJlbmRlclRhcmdldDogLndyYXBTIGlzIG5vdyAudGV4dHVyZS53cmFwUy4nKTt0aGlzLnRleHR1cmUud3JhcFM9dmFsdWU7fX0sd3JhcFQ6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybignVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQ6IC53cmFwVCBpcyBub3cgLnRleHR1cmUud3JhcFQuJyk7cmV0dXJuIHRoaXMudGV4dHVyZS53cmFwVDt9LHNldDpmdW5jdGlvbih2YWx1ZSl7Y29uc29sZS53YXJuKCdUSFJFRS5XZWJHTFJlbmRlclRhcmdldDogLndyYXBUIGlzIG5vdyAudGV4dHVyZS53cmFwVC4nKTt0aGlzLnRleHR1cmUud3JhcFQ9dmFsdWU7fX0sbWFnRmlsdGVyOntnZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oJ1RIUkVFLldlYkdMUmVuZGVyVGFyZ2V0OiAubWFnRmlsdGVyIGlzIG5vdyAudGV4dHVyZS5tYWdGaWx0ZXIuJyk7cmV0dXJuIHRoaXMudGV4dHVyZS5tYWdGaWx0ZXI7fSxzZXQ6ZnVuY3Rpb24odmFsdWUpe2NvbnNvbGUud2FybignVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQ6IC5tYWdGaWx0ZXIgaXMgbm93IC50ZXh0dXJlLm1hZ0ZpbHRlci4nKTt0aGlzLnRleHR1cmUubWFnRmlsdGVyPXZhbHVlO319LG1pbkZpbHRlcjp7Z2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKCdUSFJFRS5XZWJHTFJlbmRlclRhcmdldDogLm1pbkZpbHRlciBpcyBub3cgLnRleHR1cmUubWluRmlsdGVyLicpO3JldHVybiB0aGlzLnRleHR1cmUubWluRmlsdGVyO30sc2V0OmZ1bmN0aW9uKHZhbHVlKXtjb25zb2xlLndhcm4oJ1RIUkVFLldlYkdMUmVuZGVyVGFyZ2V0OiAubWluRmlsdGVyIGlzIG5vdyAudGV4dHVyZS5taW5GaWx0ZXIuJyk7dGhpcy50ZXh0dXJlLm1pbkZpbHRlcj12YWx1ZTt9fSxhbmlzb3Ryb3B5OntnZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oJ1RIUkVFLldlYkdMUmVuZGVyVGFyZ2V0OiAuYW5pc290cm9weSBpcyBub3cgLnRleHR1cmUuYW5pc290cm9weS4nKTtyZXR1cm4gdGhpcy50ZXh0dXJlLmFuaXNvdHJvcHk7fSxzZXQ6ZnVuY3Rpb24odmFsdWUpe2NvbnNvbGUud2FybignVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQ6IC5hbmlzb3Ryb3B5IGlzIG5vdyAudGV4dHVyZS5hbmlzb3Ryb3B5LicpO3RoaXMudGV4dHVyZS5hbmlzb3Ryb3B5PXZhbHVlO319LG9mZnNldDp7Z2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKCdUSFJFRS5XZWJHTFJlbmRlclRhcmdldDogLm9mZnNldCBpcyBub3cgLnRleHR1cmUub2Zmc2V0LicpO3JldHVybiB0aGlzLnRleHR1cmUub2Zmc2V0O30sc2V0OmZ1bmN0aW9uKHZhbHVlKXtjb25zb2xlLndhcm4oJ1RIUkVFLldlYkdMUmVuZGVyVGFyZ2V0OiAub2Zmc2V0IGlzIG5vdyAudGV4dHVyZS5vZmZzZXQuJyk7dGhpcy50ZXh0dXJlLm9mZnNldD12YWx1ZTt9fSxyZXBlYXQ6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybignVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQ6IC5yZXBlYXQgaXMgbm93IC50ZXh0dXJlLnJlcGVhdC4nKTtyZXR1cm4gdGhpcy50ZXh0dXJlLnJlcGVhdDt9LHNldDpmdW5jdGlvbih2YWx1ZSl7Y29uc29sZS53YXJuKCdUSFJFRS5XZWJHTFJlbmRlclRhcmdldDogLnJlcGVhdCBpcyBub3cgLnRleHR1cmUucmVwZWF0LicpO3RoaXMudGV4dHVyZS5yZXBlYXQ9dmFsdWU7fX0sZm9ybWF0OntnZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oJ1RIUkVFLldlYkdMUmVuZGVyVGFyZ2V0OiAuZm9ybWF0IGlzIG5vdyAudGV4dHVyZS5mb3JtYXQuJyk7cmV0dXJuIHRoaXMudGV4dHVyZS5mb3JtYXQ7fSxzZXQ6ZnVuY3Rpb24odmFsdWUpe2NvbnNvbGUud2FybignVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQ6IC5mb3JtYXQgaXMgbm93IC50ZXh0dXJlLmZvcm1hdC4nKTt0aGlzLnRleHR1cmUuZm9ybWF0PXZhbHVlO319LHR5cGU6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybignVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQ6IC50eXBlIGlzIG5vdyAudGV4dHVyZS50eXBlLicpO3JldHVybiB0aGlzLnRleHR1cmUudHlwZTt9LHNldDpmdW5jdGlvbih2YWx1ZSl7Y29uc29sZS53YXJuKCdUSFJFRS5XZWJHTFJlbmRlclRhcmdldDogLnR5cGUgaXMgbm93IC50ZXh0dXJlLnR5cGUuJyk7dGhpcy50ZXh0dXJlLnR5cGU9dmFsdWU7fX0sZ2VuZXJhdGVNaXBtYXBzOntnZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oJ1RIUkVFLldlYkdMUmVuZGVyVGFyZ2V0OiAuZ2VuZXJhdGVNaXBtYXBzIGlzIG5vdyAudGV4dHVyZS5nZW5lcmF0ZU1pcG1hcHMuJyk7cmV0dXJuIHRoaXMudGV4dHVyZS5nZW5lcmF0ZU1pcG1hcHM7fSxzZXQ6ZnVuY3Rpb24odmFsdWUpe2NvbnNvbGUud2FybignVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQ6IC5nZW5lcmF0ZU1pcG1hcHMgaXMgbm93IC50ZXh0dXJlLmdlbmVyYXRlTWlwbWFwcy4nKTt0aGlzLnRleHR1cmUuZ2VuZXJhdGVNaXBtYXBzPXZhbHVlO319fSk7Ly8KCUF1ZGlvLnByb3RvdHlwZS5sb2FkPWZ1bmN0aW9uKGZpbGUpe2NvbnNvbGUud2FybignVEhSRUUuQXVkaW86IC5sb2FkIGhhcyBiZWVuIGRlcHJlY2F0ZWQuIFVzZSBUSFJFRS5BdWRpb0xvYWRlciBpbnN0ZWFkLicpO2NvbnN0IHNjb3BlPXRoaXM7Y29uc3QgYXVkaW9Mb2FkZXI9bmV3IEF1ZGlvTG9hZGVyKCk7YXVkaW9Mb2FkZXIubG9hZChmaWxlLGZ1bmN0aW9uKGJ1ZmZlcil7c2NvcGUuc2V0QnVmZmVyKGJ1ZmZlcik7fSk7cmV0dXJuIHRoaXM7fTtDdWJlQ2FtZXJhLnByb3RvdHlwZS51cGRhdGVDdWJlTWFwPWZ1bmN0aW9uKHJlbmRlcmVyLHNjZW5lKXtjb25zb2xlLndhcm4oJ1RIUkVFLkN1YmVDYW1lcmE6IC51cGRhdGVDdWJlTWFwKCkgaXMgbm93IC51cGRhdGUoKS4nKTtyZXR1cm4gdGhpcy51cGRhdGUocmVuZGVyZXIsc2NlbmUpO307Q3ViZUNhbWVyYS5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24ocmVuZGVyZXIsY29sb3IsZGVwdGgsc3RlbmNpbCl7Y29uc29sZS53YXJuKCdUSFJFRS5DdWJlQ2FtZXJhOiAuY2xlYXIoKSBpcyBub3cgLnJlbmRlclRhcmdldC5jbGVhcigpLicpO3JldHVybiB0aGlzLnJlbmRlclRhcmdldC5jbGVhcihyZW5kZXJlcixjb2xvcixkZXB0aCxzdGVuY2lsKTt9O0ltYWdlVXRpbHMuY3Jvc3NPcmlnaW49dW5kZWZpbmVkO0ltYWdlVXRpbHMubG9hZFRleHR1cmU9ZnVuY3Rpb24odXJsLG1hcHBpbmcsb25Mb2FkLG9uRXJyb3Ipe2NvbnNvbGUud2FybignVEhSRUUuSW1hZ2VVdGlscy5sb2FkVGV4dHVyZSBoYXMgYmVlbiBkZXByZWNhdGVkLiBVc2UgVEhSRUUuVGV4dHVyZUxvYWRlcigpIGluc3RlYWQuJyk7Y29uc3QgbG9hZGVyPW5ldyBUZXh0dXJlTG9hZGVyKCk7bG9hZGVyLnNldENyb3NzT3JpZ2luKHRoaXMuY3Jvc3NPcmlnaW4pO2NvbnN0IHRleHR1cmU9bG9hZGVyLmxvYWQodXJsLG9uTG9hZCx1bmRlZmluZWQsb25FcnJvcik7aWYobWFwcGluZyl0ZXh0dXJlLm1hcHBpbmc9bWFwcGluZztyZXR1cm4gdGV4dHVyZTt9O0ltYWdlVXRpbHMubG9hZFRleHR1cmVDdWJlPWZ1bmN0aW9uKHVybHMsbWFwcGluZyxvbkxvYWQsb25FcnJvcil7Y29uc29sZS53YXJuKCdUSFJFRS5JbWFnZVV0aWxzLmxvYWRUZXh0dXJlQ3ViZSBoYXMgYmVlbiBkZXByZWNhdGVkLiBVc2UgVEhSRUUuQ3ViZVRleHR1cmVMb2FkZXIoKSBpbnN0ZWFkLicpO2NvbnN0IGxvYWRlcj1uZXcgQ3ViZVRleHR1cmVMb2FkZXIoKTtsb2FkZXIuc2V0Q3Jvc3NPcmlnaW4odGhpcy5jcm9zc09yaWdpbik7Y29uc3QgdGV4dHVyZT1sb2FkZXIubG9hZCh1cmxzLG9uTG9hZCx1bmRlZmluZWQsb25FcnJvcik7aWYobWFwcGluZyl0ZXh0dXJlLm1hcHBpbmc9bWFwcGluZztyZXR1cm4gdGV4dHVyZTt9O0ltYWdlVXRpbHMubG9hZENvbXByZXNzZWRUZXh0dXJlPWZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcignVEhSRUUuSW1hZ2VVdGlscy5sb2FkQ29tcHJlc3NlZFRleHR1cmUgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIFRIUkVFLkREU0xvYWRlciBpbnN0ZWFkLicpO307SW1hZ2VVdGlscy5sb2FkQ29tcHJlc3NlZFRleHR1cmVDdWJlPWZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcignVEhSRUUuSW1hZ2VVdGlscy5sb2FkQ29tcHJlc3NlZFRleHR1cmVDdWJlIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBUSFJFRS5ERFNMb2FkZXIgaW5zdGVhZC4nKTt9Oy8vCglpZih0eXBlb2YgX19USFJFRV9ERVZUT09MU19fIT09J3VuZGVmaW5lZCcpey8qIGVzbGludC1kaXNhYmxlIG5vLXVuZGVmICovX19USFJFRV9ERVZUT09MU19fLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCdyZWdpc3Rlcicse2RldGFpbDp7cmV2aXNpb246UkVWSVNJT059fSkpOy8qIGVzbGludC1lbmFibGUgbm8tdW5kZWYgKi99aWYodHlwZW9mIHdpbmRvdyE9PSd1bmRlZmluZWQnKXtpZih3aW5kb3cuX19USFJFRV9fKXtjb25zb2xlLndhcm4oJ1dBUk5JTkc6IE11bHRpcGxlIGluc3RhbmNlcyBvZiBUaHJlZS5qcyBiZWluZyBpbXBvcnRlZC4nKTt9ZWxzZSB7d2luZG93Ll9fVEhSRUVfXz1SRVZJU0lPTjt9fQoKCS8vIFNwbGl0IHN0cmF0ZWd5IGNvbnN0YW50cwoJY29uc3QgQ0VOVEVSID0gMDsKCWNvbnN0IEFWRVJBR0UgPSAxOwoJY29uc3QgU0FIID0gMjsgLy8gVHJhdmVyc2FsIGNvbnN0YW50cwoJY29uc3QgQ09OVEFJTkVEID0gMjsgLy8gU0FIIGNvc3QgY29uc3RhbnRzCgkvLyBUT0RPOiBob25lIHRoZXNlIGNvc3RzIG1vcmUuIFRoZSByZWxhdGl2ZSBkaWZmZXJlbmNlIGJldHdlZW4gdGhlbSBzaG91bGQgYmUgdGhlCgkvLyBkaWZmZXJlbmNlIGluIG1lYXN1cmVkIHRpbWUgdG8gcGVyZm9ybSBhIHRyaWFuZ2xlIGludGVyc2VjdGlvbiB2cyB0cmF2ZXJzaW5nCgkvLyBib3VuZHMuCgoJY29uc3QgVFJJQU5HTEVfSU5URVJTRUNUX0NPU1QgPSAxLjI1OwoJY29uc3QgVFJBVkVSU0FMX0NPU1QgPSAxOyAvLyBCdWlsZCBjb25zdGFudHMKCgljb25zdCBCWVRFU19QRVJfTk9ERSA9IDYgKiA0ICsgNCArIDQ7Cgljb25zdCBJU19MRUFGTk9ERV9GTEFHID0gMHhGRkZGOyAvLyBFUFNJTE9OIGZvciBjb21wdXRpbmcgZmxvYXRpbmcgcG9pbnQgZXJyb3IgZHVyaW5nIGJ1aWxkCgkvLyBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9NYWNoaW5lX2Vwc2lsb24jVmFsdWVzX2Zvcl9zdGFuZGFyZF9oYXJkd2FyZV9mbG9hdGluZ19wb2ludF9hcml0aG1ldGljcwoKCWNvbnN0IEZMT0FUMzJfRVBTSUxPTiA9IE1hdGgucG93KDIsIC0yNCk7CgoJY2xhc3MgTWVzaEJWSE5vZGUgewoJICBjb25zdHJ1Y3RvcigpIHsvLyBpbnRlcm5hbCBub2RlcyBoYXZlIGJvdW5kaW5nRGF0YSwgbGVmdCwgcmlnaHQsIGFuZCBzcGxpdEF4aXMKCSAgICAvLyBsZWFmIG5vZGVzIGhhdmUgb2Zmc2V0IGFuZCBjb3VudCAocmVmZXJyaW5nIHRvIHByaW1pdGl2ZXMgaW4gdGhlIG1lc2ggZ2VvbWV0cnkpCgkgIH0KCgl9CgoJZnVuY3Rpb24gYXJyYXlUb0JveChub2RlSW5kZXgzMiwgYXJyYXksIHRhcmdldCkgewoJICB0YXJnZXQubWluLnggPSBhcnJheVtub2RlSW5kZXgzMl07CgkgIHRhcmdldC5taW4ueSA9IGFycmF5W25vZGVJbmRleDMyICsgMV07CgkgIHRhcmdldC5taW4ueiA9IGFycmF5W25vZGVJbmRleDMyICsgMl07CgkgIHRhcmdldC5tYXgueCA9IGFycmF5W25vZGVJbmRleDMyICsgM107CgkgIHRhcmdldC5tYXgueSA9IGFycmF5W25vZGVJbmRleDMyICsgNF07CgkgIHRhcmdldC5tYXgueiA9IGFycmF5W25vZGVJbmRleDMyICsgNV07CgkgIHJldHVybiB0YXJnZXQ7Cgl9CglmdW5jdGlvbiBnZXRMb25nZXN0RWRnZUluZGV4KGJvdW5kcykgewoJICBsZXQgc3BsaXREaW1JZHggPSAtMTsKCSAgbGV0IHNwbGl0RGlzdCA9IC1JbmZpbml0eTsKCgkgIGZvciAobGV0IGkgPSAwOyBpIDwgMzsgaSsrKSB7CgkgICAgY29uc3QgZGlzdCA9IGJvdW5kc1tpICsgM10gLSBib3VuZHNbaV07CgoJICAgIGlmIChkaXN0ID4gc3BsaXREaXN0KSB7CgkgICAgICBzcGxpdERpc3QgPSBkaXN0OwoJICAgICAgc3BsaXREaW1JZHggPSBpOwoJICAgIH0KCSAgfQoKCSAgcmV0dXJuIHNwbGl0RGltSWR4OwoJfSAvLyBjb3B5cyBib3VuZHMgYSBpbnRvIGJvdW5kcyBiCgoJZnVuY3Rpb24gY29weUJvdW5kcyhzb3VyY2UsIHRhcmdldCkgewoJICB0YXJnZXQuc2V0KHNvdXJjZSk7Cgl9IC8vIHNldHMgYm91bmRzIHRhcmdldCB0byB0aGUgdW5pb24gb2YgYm91bmRzIGEgYW5kIGIKCglmdW5jdGlvbiB1bmlvbkJvdW5kcyhhLCBiLCB0YXJnZXQpIHsKCSAgbGV0IGFWYWwsIGJWYWw7CgoJICBmb3IgKGxldCBkID0gMDsgZCA8IDM7IGQrKykgewoJICAgIGNvbnN0IGQzID0gZCArIDM7IC8vIHNldCB0aGUgbWluaW11bSB2YWx1ZXMKCgkgICAgYVZhbCA9IGFbZF07CgkgICAgYlZhbCA9IGJbZF07CgkgICAgdGFyZ2V0W2RdID0gYVZhbCA8IGJWYWwgPyBhVmFsIDogYlZhbDsgLy8gc2V0IHRoZSBtYXggdmFsdWVzCgoJICAgIGFWYWwgPSBhW2QzXTsKCSAgICBiVmFsID0gYltkM107CgkgICAgdGFyZ2V0W2QzXSA9IGFWYWwgPiBiVmFsID8gYVZhbCA6IGJWYWw7CgkgIH0KCX0gLy8gZXhwYW5kcyB0aGUgZ2l2ZW4gYm91bmRzIGJ5IHRoZSBwcm92aWRlZCB0cmlhbmdsZSBib3VuZHMKCglmdW5jdGlvbiBleHBhbmRCeVRyaWFuZ2xlQm91bmRzKHN0YXJ0SW5kZXgsIHRyaWFuZ2xlQm91bmRzLCBib3VuZHMpIHsKCSAgZm9yIChsZXQgZCA9IDA7IGQgPCAzOyBkKyspIHsKCSAgICBjb25zdCB0Q2VudGVyID0gdHJpYW5nbGVCb3VuZHNbc3RhcnRJbmRleCArIDIgKiBkXTsKCSAgICBjb25zdCB0SGFsZiA9IHRyaWFuZ2xlQm91bmRzW3N0YXJ0SW5kZXggKyAyICogZCArIDFdOwoJICAgIGNvbnN0IHRNaW4gPSB0Q2VudGVyIC0gdEhhbGY7CgkgICAgY29uc3QgdE1heCA9IHRDZW50ZXIgKyB0SGFsZjsKCgkgICAgaWYgKHRNaW4gPCBib3VuZHNbZF0pIHsKCSAgICAgIGJvdW5kc1tkXSA9IHRNaW47CgkgICAgfQoKCSAgICBpZiAodE1heCA+IGJvdW5kc1tkICsgM10pIHsKCSAgICAgIGJvdW5kc1tkICsgM10gPSB0TWF4OwoJICAgIH0KCSAgfQoJfSAvLyBjb21wdXRlIGJvdW5kcyBzdXJmYWNlIGFyZWEKCglmdW5jdGlvbiBjb21wdXRlU3VyZmFjZUFyZWEoYm91bmRzKSB7CgkgIGNvbnN0IGQwID0gYm91bmRzWzNdIC0gYm91bmRzWzBdOwoJICBjb25zdCBkMSA9IGJvdW5kc1s0XSAtIGJvdW5kc1sxXTsKCSAgY29uc3QgZDIgPSBib3VuZHNbNV0gLSBib3VuZHNbMl07CgkgIHJldHVybiAyICogKGQwICogZDEgKyBkMSAqIGQyICsgZDIgKiBkMCk7Cgl9CgoJZnVuY3Rpb24gZW5zdXJlSW5kZXgoZ2VvLCBvcHRpb25zKSB7CgkgIGlmICghZ2VvLmluZGV4KSB7CgkgICAgY29uc3QgdmVydGV4Q291bnQgPSBnZW8uYXR0cmlidXRlcy5wb3NpdGlvbi5jb3VudDsKCSAgICBjb25zdCBCdWZmZXJDb25zdHJ1Y3RvciA9IG9wdGlvbnMudXNlU2hhcmVkQXJyYXlCdWZmZXIgPyBTaGFyZWRBcnJheUJ1ZmZlciA6IEFycmF5QnVmZmVyOwoJICAgIGxldCBpbmRleDsKCgkgICAgaWYgKHZlcnRleENvdW50ID4gNjU1MzUpIHsKCSAgICAgIGluZGV4ID0gbmV3IFVpbnQzMkFycmF5KG5ldyBCdWZmZXJDb25zdHJ1Y3Rvcig0ICogdmVydGV4Q291bnQpKTsKCSAgICB9IGVsc2UgewoJICAgICAgaW5kZXggPSBuZXcgVWludDE2QXJyYXkobmV3IEJ1ZmZlckNvbnN0cnVjdG9yKDIgKiB2ZXJ0ZXhDb3VudCkpOwoJICAgIH0KCgkgICAgZ2VvLnNldEluZGV4KG5ldyBCdWZmZXJBdHRyaWJ1dGUoaW5kZXgsIDEpKTsKCgkgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2ZXJ0ZXhDb3VudDsgaSsrKSB7CgkgICAgICBpbmRleFtpXSA9IGk7CgkgICAgfQoJICB9Cgl9IC8vIENvbXB1dGVzIHRoZSBzZXQgb2YgeyBvZmZzZXQsIGNvdW50IH0gcmFuZ2VzIHdoaWNoIG5lZWQgaW5kZXBlbmRlbnQgQlZIIHJvb3RzLiBFYWNoCgkvLyByZWdpb24gaW4gdGhlIGdlb21ldHJ5IGluZGV4IHRoYXQgYmVsb25ncyB0byBhIGRpZmZlcmVudCBzZXQgb2YgbWF0ZXJpYWwgZ3JvdXBzIHJlcXVpcmVzCgkvLyBhIHNlcGFyYXRlIEJWSCByb290LCBzbyB0aGF0IHRyaWFuZ2xlcyBpbmRpY2VzIGJlbG9uZ2luZyB0byBvbmUgZ3JvdXAgbmV2ZXIgZ2V0IHN3YXBwZWQKCS8vIHdpdGggdHJpYW5nbGUgaW5kaWNlcyBiZWxvbmdzIHRvIGFub3RoZXIgZ3JvdXAuIEZvciBleGFtcGxlLCBpZiB0aGUgZ3JvdXBzIHdlcmUgbGlrZSB0aGlzOgoJLy8KCS8vIFstLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXQoJLy8gfF9fX19fX19fX19fX19fX19fX3wKCS8vICAgZzAgPSBbMCwgMjBdICB8X19fX19fX19fX19fX19fX19fX19fX3x8X19fX19fX19fX19fX19fX19fX19ffAoJLy8gICAgICAgICAgICAgICAgICAgICAgZzEgPSBbMTYsIDQwXSAgICAgICAgICAgZzIgPSBbNDEsIDYwXQoJLy8KCS8vIHdlIHdvdWxkIG5lZWQgZm91ciBCVkggcm9vdHM6IFswLCAxNV0sIFsxNiwgMjBdLCBbMjEsIDQwXSwgWzQxLCA2MF0uCgoKCWZ1bmN0aW9uIGdldFJvb3RJbmRleFJhbmdlcyhnZW8pIHsKCSAgaWYgKCFnZW8uZ3JvdXBzIHx8ICFnZW8uZ3JvdXBzLmxlbmd0aCkgewoJICAgIHJldHVybiBbewoJICAgICAgb2Zmc2V0OiAwLAoJICAgICAgY291bnQ6IGdlby5pbmRleC5jb3VudCAvIDMKCSAgICB9XTsKCSAgfQoKCSAgY29uc3QgcmFuZ2VzID0gW107CgkgIGNvbnN0IHJhbmdlQm91bmRhcmllcyA9IG5ldyBTZXQoKTsKCgkgIGZvciAoY29uc3QgZ3JvdXAgb2YgZ2VvLmdyb3VwcykgewoJICAgIHJhbmdlQm91bmRhcmllcy5hZGQoZ3JvdXAuc3RhcnQpOwoJICAgIHJhbmdlQm91bmRhcmllcy5hZGQoZ3JvdXAuc3RhcnQgKyBncm91cC5jb3VudCk7CgkgIH0gLy8gbm90ZSB0aGF0IGlmIHlvdSBkb24ndCBwYXNzIGluIGEgY29tcGFyYXRvciwgaXQgc29ydHMgdGhlbSBsZXhpY29ncmFwaGljYWxseSBhcyBzdHJpbmdzIDotKAoKCgkgIGNvbnN0IHNvcnRlZEJvdW5kYXJpZXMgPSBBcnJheS5mcm9tKHJhbmdlQm91bmRhcmllcy52YWx1ZXMoKSkuc29ydCgoYSwgYikgPT4gYSAtIGIpOwoKCSAgZm9yIChsZXQgaSA9IDA7IGkgPCBzb3J0ZWRCb3VuZGFyaWVzLmxlbmd0aCAtIDE7IGkrKykgewoJICAgIGNvbnN0IHN0YXJ0ID0gc29ydGVkQm91bmRhcmllc1tpXSwKCSAgICAgICAgICBlbmQgPSBzb3J0ZWRCb3VuZGFyaWVzW2kgKyAxXTsKCSAgICByYW5nZXMucHVzaCh7CgkgICAgICBvZmZzZXQ6IHN0YXJ0IC8gMywKCSAgICAgIGNvdW50OiAoZW5kIC0gc3RhcnQpIC8gMwoJICAgIH0pOwoJICB9CgoJICByZXR1cm4gcmFuZ2VzOwoJfSAvLyBjb21wdXRlcyB0aGUgdW5pb24gb2YgdGhlIGJvdW5kcyBvZiBhbGwgb2YgdGhlIGdpdmVuIHRyaWFuZ2xlcyBhbmQgcHV0cyB0aGUgcmVzdWx0aW5nIGJveCBpbiB0YXJnZXQuIElmCgkvLyBjZW50cm9pZFRhcmdldCBpcyBwcm92aWRlZCB0aGVuIGEgYm91bmRpbmcgYm94IGlzIGNvbXB1dGVkIGZvciB0aGUgY2VudHJvaWRzIG9mIHRoZSB0cmlhbmdsZXMsIGFzIHdlbGwuCgkvLyBUaGVzZSBhcmUgY29tcHV0ZWQgdG9nZXRoZXIgdG8gYXZvaWQgcmVkdW5kYW50IGFjY2Vzc2VzIHRvIGJvdW5kcyBhcnJheS4KCgoJZnVuY3Rpb24gZ2V0Qm91bmRzKHRyaWFuZ2xlQm91bmRzLCBvZmZzZXQsIGNvdW50LCB0YXJnZXQsIGNlbnRyb2lkVGFyZ2V0KSB7CgkgIGlmIChjZW50cm9pZFRhcmdldCA9PT0gdm9pZCAwKSB7CgkgICAgY2VudHJvaWRUYXJnZXQgPSBudWxsOwoJICB9CgoJICBsZXQgbWlueCA9IEluZmluaXR5OwoJICBsZXQgbWlueSA9IEluZmluaXR5OwoJICBsZXQgbWlueiA9IEluZmluaXR5OwoJICBsZXQgbWF4eCA9IC1JbmZpbml0eTsKCSAgbGV0IG1heHkgPSAtSW5maW5pdHk7CgkgIGxldCBtYXh6ID0gLUluZmluaXR5OwoJICBsZXQgY21pbnggPSBJbmZpbml0eTsKCSAgbGV0IGNtaW55ID0gSW5maW5pdHk7CgkgIGxldCBjbWlueiA9IEluZmluaXR5OwoJICBsZXQgY21heHggPSAtSW5maW5pdHk7CgkgIGxldCBjbWF4eSA9IC1JbmZpbml0eTsKCSAgbGV0IGNtYXh6ID0gLUluZmluaXR5OwoJICBjb25zdCBpbmNsdWRlQ2VudHJvaWQgPSBjZW50cm9pZFRhcmdldCAhPT0gbnVsbDsKCgkgIGZvciAobGV0IGkgPSBvZmZzZXQgKiA2LCBlbmQgPSAob2Zmc2V0ICsgY291bnQpICogNjsgaSA8IGVuZDsgaSArPSA2KSB7CgkgICAgY29uc3QgY3ggPSB0cmlhbmdsZUJvdW5kc1tpICsgMF07CgkgICAgY29uc3QgaHggPSB0cmlhbmdsZUJvdW5kc1tpICsgMV07CgkgICAgY29uc3QgbHggPSBjeCAtIGh4OwoJICAgIGNvbnN0IHJ4ID0gY3ggKyBoeDsKCSAgICBpZiAobHggPCBtaW54KSBtaW54ID0gbHg7CgkgICAgaWYgKHJ4ID4gbWF4eCkgbWF4eCA9IHJ4OwoJICAgIGlmIChpbmNsdWRlQ2VudHJvaWQgJiYgY3ggPCBjbWlueCkgY21pbnggPSBjeDsKCSAgICBpZiAoaW5jbHVkZUNlbnRyb2lkICYmIGN4ID4gY21heHgpIGNtYXh4ID0gY3g7CgkgICAgY29uc3QgY3kgPSB0cmlhbmdsZUJvdW5kc1tpICsgMl07CgkgICAgY29uc3QgaHkgPSB0cmlhbmdsZUJvdW5kc1tpICsgM107CgkgICAgY29uc3QgbHkgPSBjeSAtIGh5OwoJICAgIGNvbnN0IHJ5ID0gY3kgKyBoeTsKCSAgICBpZiAobHkgPCBtaW55KSBtaW55ID0gbHk7CgkgICAgaWYgKHJ5ID4gbWF4eSkgbWF4eSA9IHJ5OwoJICAgIGlmIChpbmNsdWRlQ2VudHJvaWQgJiYgY3kgPCBjbWlueSkgY21pbnkgPSBjeTsKCSAgICBpZiAoaW5jbHVkZUNlbnRyb2lkICYmIGN5ID4gY21heHkpIGNtYXh5ID0gY3k7CgkgICAgY29uc3QgY3ogPSB0cmlhbmdsZUJvdW5kc1tpICsgNF07CgkgICAgY29uc3QgaHogPSB0cmlhbmdsZUJvdW5kc1tpICsgNV07CgkgICAgY29uc3QgbHogPSBjeiAtIGh6OwoJICAgIGNvbnN0IHJ6ID0gY3ogKyBoejsKCSAgICBpZiAobHogPCBtaW56KSBtaW56ID0gbHo7CgkgICAgaWYgKHJ6ID4gbWF4eikgbWF4eiA9IHJ6OwoJICAgIGlmIChpbmNsdWRlQ2VudHJvaWQgJiYgY3ogPCBjbWlueikgY21pbnogPSBjejsKCSAgICBpZiAoaW5jbHVkZUNlbnRyb2lkICYmIGN6ID4gY21heHopIGNtYXh6ID0gY3o7CgkgIH0KCgkgIHRhcmdldFswXSA9IG1pbng7CgkgIHRhcmdldFsxXSA9IG1pbnk7CgkgIHRhcmdldFsyXSA9IG1pbno7CgkgIHRhcmdldFszXSA9IG1heHg7CgkgIHRhcmdldFs0XSA9IG1heHk7CgkgIHRhcmdldFs1XSA9IG1heHo7CgoJICBpZiAoaW5jbHVkZUNlbnRyb2lkKSB7CgkgICAgY2VudHJvaWRUYXJnZXRbMF0gPSBjbWlueDsKCSAgICBjZW50cm9pZFRhcmdldFsxXSA9IGNtaW55OwoJICAgIGNlbnRyb2lkVGFyZ2V0WzJdID0gY21pbno7CgkgICAgY2VudHJvaWRUYXJnZXRbM10gPSBjbWF4eDsKCSAgICBjZW50cm9pZFRhcmdldFs0XSA9IGNtYXh5OwoJICAgIGNlbnRyb2lkVGFyZ2V0WzVdID0gY21heHo7CgkgIH0KCX0gLy8gQSBzdGFuZCBhbG9uZSBmdW5jdGlvbiBmb3IgcmV0cmlldmluZyB0aGUgY2VudHJvaWQgYm91bmRzLgoKCglmdW5jdGlvbiBnZXRDZW50cm9pZEJvdW5kcyh0cmlhbmdsZUJvdW5kcywgb2Zmc2V0LCBjb3VudCwgY2VudHJvaWRUYXJnZXQpIHsKCSAgbGV0IGNtaW54ID0gSW5maW5pdHk7CgkgIGxldCBjbWlueSA9IEluZmluaXR5OwoJICBsZXQgY21pbnogPSBJbmZpbml0eTsKCSAgbGV0IGNtYXh4ID0gLUluZmluaXR5OwoJICBsZXQgY21heHkgPSAtSW5maW5pdHk7CgkgIGxldCBjbWF4eiA9IC1JbmZpbml0eTsKCgkgIGZvciAobGV0IGkgPSBvZmZzZXQgKiA2LCBlbmQgPSAob2Zmc2V0ICsgY291bnQpICogNjsgaSA8IGVuZDsgaSArPSA2KSB7CgkgICAgY29uc3QgY3ggPSB0cmlhbmdsZUJvdW5kc1tpICsgMF07CgkgICAgaWYgKGN4IDwgY21pbngpIGNtaW54ID0gY3g7CgkgICAgaWYgKGN4ID4gY21heHgpIGNtYXh4ID0gY3g7CgkgICAgY29uc3QgY3kgPSB0cmlhbmdsZUJvdW5kc1tpICsgMl07CgkgICAgaWYgKGN5IDwgY21pbnkpIGNtaW55ID0gY3k7CgkgICAgaWYgKGN5ID4gY21heHkpIGNtYXh5ID0gY3k7CgkgICAgY29uc3QgY3ogPSB0cmlhbmdsZUJvdW5kc1tpICsgNF07CgkgICAgaWYgKGN6IDwgY21pbnopIGNtaW56ID0gY3o7CgkgICAgaWYgKGN6ID4gY21heHopIGNtYXh6ID0gY3o7CgkgIH0KCgkgIGNlbnRyb2lkVGFyZ2V0WzBdID0gY21pbng7CgkgIGNlbnRyb2lkVGFyZ2V0WzFdID0gY21pbnk7CgkgIGNlbnRyb2lkVGFyZ2V0WzJdID0gY21pbno7CgkgIGNlbnRyb2lkVGFyZ2V0WzNdID0gY21heHg7CgkgIGNlbnRyb2lkVGFyZ2V0WzRdID0gY21heHk7CgkgIGNlbnRyb2lkVGFyZ2V0WzVdID0gY21heHo7Cgl9IC8vIHJlb3JkZXJzIGB0cmlzYCBzdWNoIHRoYXQgZm9yIGBjb3VudGAgZWxlbWVudHMgYWZ0ZXIgYG9mZnNldGAsIGVsZW1lbnRzIG9uIHRoZSBsZWZ0IHNpZGUgb2YgdGhlIHNwbGl0CgkvLyB3aWxsIGJlIG9uIHRoZSBsZWZ0IGFuZCBlbGVtZW50cyBvbiB0aGUgcmlnaHQgc2lkZSBvZiB0aGUgc3BsaXQgd2lsbCBiZSBvbiB0aGUgcmlnaHQuIHJldHVybnMgdGhlIGluZGV4CgkvLyBvZiB0aGUgZmlyc3QgZWxlbWVudCBvbiB0aGUgcmlnaHQgc2lkZSwgb3Igb2Zmc2V0ICsgY291bnQgaWYgdGhlcmUgYXJlIG5vIGVsZW1lbnRzIG9uIHRoZSByaWdodCBzaWRlLgoKCglmdW5jdGlvbiBwYXJ0aXRpb24oaW5kZXgsIHRyaWFuZ2xlQm91bmRzLCBvZmZzZXQsIGNvdW50LCBzcGxpdCkgewoJICBsZXQgbGVmdCA9IG9mZnNldDsKCSAgbGV0IHJpZ2h0ID0gb2Zmc2V0ICsgY291bnQgLSAxOwoJICBjb25zdCBwb3MgPSBzcGxpdC5wb3M7CgkgIGNvbnN0IGF4aXNPZmZzZXQgPSBzcGxpdC5heGlzICogMjsgLy8gaG9hcmUgcGFydGl0aW9uaW5nLCBzZWUgZS5nLiBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9RdWlja3NvcnQjSG9hcmVfcGFydGl0aW9uX3NjaGVtZQoKCSAgd2hpbGUgKHRydWUpIHsKCSAgICB3aGlsZSAobGVmdCA8PSByaWdodCAmJiB0cmlhbmdsZUJvdW5kc1tsZWZ0ICogNiArIGF4aXNPZmZzZXRdIDwgcG9zKSB7CgkgICAgICBsZWZ0Kys7CgkgICAgfSAvLyBpZiBhIHRyaWFuZ2xlIGNlbnRlciBsaWVzIG9uIHRoZSBwYXJ0aXRpb24gcGxhbmUgaXQgaXMgY29uc2lkZXJlZCB0byBiZSBvbiB0aGUgcmlnaHQgc2lkZQoKCgkgICAgd2hpbGUgKGxlZnQgPD0gcmlnaHQgJiYgdHJpYW5nbGVCb3VuZHNbcmlnaHQgKiA2ICsgYXhpc09mZnNldF0gPj0gcG9zKSB7CgkgICAgICByaWdodC0tOwoJICAgIH0KCgkgICAgaWYgKGxlZnQgPCByaWdodCkgewoJICAgICAgLy8gd2UgbmVlZCB0byBzd2FwIGFsbCBvZiB0aGUgaW5mb3JtYXRpb24gYXNzb2NpYXRlZCB3aXRoIHRoZSB0cmlhbmdsZXMgYXQgaW5kZXgKCSAgICAgIC8vIGxlZnQgYW5kIHJpZ2h0OyB0aGF0J3MgdGhlIHZlcnRzIGluIHRoZSBnZW9tZXRyeSBpbmRleCwgdGhlIGJvdW5kcywKCSAgICAgIC8vIGFuZCBwZXJoYXBzIHRoZSBTQUggcGxhbmVzCgkgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDM7IGkrKykgewoJICAgICAgICBsZXQgdDAgPSBpbmRleFtsZWZ0ICogMyArIGldOwoJICAgICAgICBpbmRleFtsZWZ0ICogMyArIGldID0gaW5kZXhbcmlnaHQgKiAzICsgaV07CgkgICAgICAgIGluZGV4W3JpZ2h0ICogMyArIGldID0gdDA7CgkgICAgICAgIGxldCB0MSA9IHRyaWFuZ2xlQm91bmRzW2xlZnQgKiA2ICsgaSAqIDIgKyAwXTsKCSAgICAgICAgdHJpYW5nbGVCb3VuZHNbbGVmdCAqIDYgKyBpICogMiArIDBdID0gdHJpYW5nbGVCb3VuZHNbcmlnaHQgKiA2ICsgaSAqIDIgKyAwXTsKCSAgICAgICAgdHJpYW5nbGVCb3VuZHNbcmlnaHQgKiA2ICsgaSAqIDIgKyAwXSA9IHQxOwoJICAgICAgICBsZXQgdDIgPSB0cmlhbmdsZUJvdW5kc1tsZWZ0ICogNiArIGkgKiAyICsgMV07CgkgICAgICAgIHRyaWFuZ2xlQm91bmRzW2xlZnQgKiA2ICsgaSAqIDIgKyAxXSA9IHRyaWFuZ2xlQm91bmRzW3JpZ2h0ICogNiArIGkgKiAyICsgMV07CgkgICAgICAgIHRyaWFuZ2xlQm91bmRzW3JpZ2h0ICogNiArIGkgKiAyICsgMV0gPSB0MjsKCSAgICAgIH0KCgkgICAgICBsZWZ0Kys7CgkgICAgICByaWdodC0tOwoJICAgIH0gZWxzZSB7CgkgICAgICByZXR1cm4gbGVmdDsKCSAgICB9CgkgIH0KCX0KCgljb25zdCBCSU5fQ09VTlQgPSAzMjsKCgljb25zdCBiaW5zU29ydCA9IChhLCBiKSA9PiBhLmNhbmRpZGF0ZSAtIGIuY2FuZGlkYXRlOwoKCWNvbnN0IHNhaEJpbnMgPSBuZXcgQXJyYXkoQklOX0NPVU5UKS5maWxsKCkubWFwKCgpID0+IHsKCSAgcmV0dXJuIHsKCSAgICBjb3VudDogMCwKCSAgICBib3VuZHM6IG5ldyBGbG9hdDMyQXJyYXkoNiksCgkgICAgcmlnaHRDYWNoZUJvdW5kczogbmV3IEZsb2F0MzJBcnJheSg2KSwKCSAgICBsZWZ0Q2FjaGVCb3VuZHM6IG5ldyBGbG9hdDMyQXJyYXkoNiksCgkgICAgY2FuZGlkYXRlOiAwCgkgIH07Cgl9KTsKCWNvbnN0IGxlZnRCb3VuZHMgPSBuZXcgRmxvYXQzMkFycmF5KDYpOwoKCWZ1bmN0aW9uIGdldE9wdGltYWxTcGxpdChub2RlQm91bmRpbmdEYXRhLCBjZW50cm9pZEJvdW5kaW5nRGF0YSwgdHJpYW5nbGVCb3VuZHMsIG9mZnNldCwgY291bnQsIHN0cmF0ZWd5KSB7CgkgIGxldCBheGlzID0gLTE7CgkgIGxldCBwb3MgPSAwOyAvLyBDZW50ZXIKCgkgIGlmIChzdHJhdGVneSA9PT0gQ0VOVEVSKSB7CgkgICAgYXhpcyA9IGdldExvbmdlc3RFZGdlSW5kZXgoY2VudHJvaWRCb3VuZGluZ0RhdGEpOwoKCSAgICBpZiAoYXhpcyAhPT0gLTEpIHsKCSAgICAgIHBvcyA9IChjZW50cm9pZEJvdW5kaW5nRGF0YVtheGlzXSArIGNlbnRyb2lkQm91bmRpbmdEYXRhW2F4aXMgKyAzXSkgLyAyOwoJICAgIH0KCSAgfSBlbHNlIGlmIChzdHJhdGVneSA9PT0gQVZFUkFHRSkgewoJICAgIGF4aXMgPSBnZXRMb25nZXN0RWRnZUluZGV4KG5vZGVCb3VuZGluZ0RhdGEpOwoKCSAgICBpZiAoYXhpcyAhPT0gLTEpIHsKCSAgICAgIHBvcyA9IGdldEF2ZXJhZ2UodHJpYW5nbGVCb3VuZHMsIG9mZnNldCwgY291bnQsIGF4aXMpOwoJICAgIH0KCSAgfSBlbHNlIGlmIChzdHJhdGVneSA9PT0gU0FIKSB7CgkgICAgY29uc3Qgcm9vdFN1cmZhY2VBcmVhID0gY29tcHV0ZVN1cmZhY2VBcmVhKG5vZGVCb3VuZGluZ0RhdGEpOwoJICAgIGxldCBiZXN0Q29zdCA9IFRSSUFOR0xFX0lOVEVSU0VDVF9DT1NUICogY291bnQ7IC8vIGl0ZXJhdGUgb3ZlciBhbGwgYXhlcwoKCSAgICBjb25zdCBjU3RhcnQgPSBvZmZzZXQgKiA2OwoJICAgIGNvbnN0IGNFbmQgPSAob2Zmc2V0ICsgY291bnQpICogNjsKCgkgICAgZm9yIChsZXQgYSA9IDA7IGEgPCAzOyBhKyspIHsKCSAgICAgIGNvbnN0IGF4aXNMZWZ0ID0gY2VudHJvaWRCb3VuZGluZ0RhdGFbYV07CgkgICAgICBjb25zdCBheGlzUmlnaHQgPSBjZW50cm9pZEJvdW5kaW5nRGF0YVthICsgM107CgkgICAgICBjb25zdCBheGlzTGVuZ3RoID0gYXhpc1JpZ2h0IC0gYXhpc0xlZnQ7CgkgICAgICBjb25zdCBiaW5XaWR0aCA9IGF4aXNMZW5ndGggLyBCSU5fQ09VTlQ7IC8vIElmIHdlIGhhdmUgZmV3ZXIgdHJpYW5nbGVzIHRoYW4gd2UncmUgcGxhbm5pbmcgdG8gc3BsaXQgdGhlbiBqdXN0IGNoZWNrIGFsbAoJICAgICAgLy8gdGhlIHRyaWFuZ2xlIHBvc2l0aW9ucyBiZWNhdXNlIGl0IHdpbGwgYmUgZmFzdGVyLgoKCSAgICAgIGlmIChjb3VudCA8IEJJTl9DT1VOVCAvIDQpIHsKCSAgICAgICAgLy8gaW5pdGlhbGl6ZSB0aGUgYmluIGNhbmRpZGF0ZXMKCSAgICAgICAgY29uc3QgdHJ1bmNhdGVkQmlucyA9IFsuLi5zYWhCaW5zXTsKCSAgICAgICAgdHJ1bmNhdGVkQmlucy5sZW5ndGggPSBjb3VudDsgLy8gc2V0IHRoZSBjYW5kaWRhdGVzCgoJICAgICAgICBsZXQgYiA9IDA7CgoJICAgICAgICBmb3IgKGxldCBjID0gY1N0YXJ0OyBjIDwgY0VuZDsgYyArPSA2LCBiKyspIHsKCSAgICAgICAgICBjb25zdCBiaW4gPSB0cnVuY2F0ZWRCaW5zW2JdOwoJICAgICAgICAgIGJpbi5jYW5kaWRhdGUgPSB0cmlhbmdsZUJvdW5kc1tjICsgMiAqIGFdOwoJICAgICAgICAgIGJpbi5jb3VudCA9IDA7CgkgICAgICAgICAgY29uc3QgewoJICAgICAgICAgICAgYm91bmRzLAoJICAgICAgICAgICAgbGVmdENhY2hlQm91bmRzLAoJICAgICAgICAgICAgcmlnaHRDYWNoZUJvdW5kcwoJICAgICAgICAgIH0gPSBiaW47CgoJICAgICAgICAgIGZvciAobGV0IGQgPSAwOyBkIDwgMzsgZCsrKSB7CgkgICAgICAgICAgICByaWdodENhY2hlQm91bmRzW2RdID0gSW5maW5pdHk7CgkgICAgICAgICAgICByaWdodENhY2hlQm91bmRzW2QgKyAzXSA9IC1JbmZpbml0eTsKCSAgICAgICAgICAgIGxlZnRDYWNoZUJvdW5kc1tkXSA9IEluZmluaXR5OwoJICAgICAgICAgICAgbGVmdENhY2hlQm91bmRzW2QgKyAzXSA9IC1JbmZpbml0eTsKCSAgICAgICAgICAgIGJvdW5kc1tkXSA9IEluZmluaXR5OwoJICAgICAgICAgICAgYm91bmRzW2QgKyAzXSA9IC1JbmZpbml0eTsKCSAgICAgICAgICB9CgoJICAgICAgICAgIGV4cGFuZEJ5VHJpYW5nbGVCb3VuZHMoYywgdHJpYW5nbGVCb3VuZHMsIGJvdW5kcyk7CgkgICAgICAgIH0KCgkgICAgICAgIHRydW5jYXRlZEJpbnMuc29ydChiaW5zU29ydCk7IC8vIHJlbW92ZSByZWR1bmRhbnQgc3BsaXRzCgoJICAgICAgICBsZXQgc3BsaXRDb3VudCA9IGNvdW50OwoKCSAgICAgICAgZm9yIChsZXQgYmkgPSAwOyBiaSA8IHNwbGl0Q291bnQ7IGJpKyspIHsKCSAgICAgICAgICBjb25zdCBiaW4gPSB0cnVuY2F0ZWRCaW5zW2JpXTsKCgkgICAgICAgICAgd2hpbGUgKGJpICsgMSA8IHNwbGl0Q291bnQgJiYgdHJ1bmNhdGVkQmluc1tiaSArIDFdLmNhbmRpZGF0ZSA9PT0gYmluLmNhbmRpZGF0ZSkgewoJICAgICAgICAgICAgdHJ1bmNhdGVkQmlucy5zcGxpY2UoYmkgKyAxLCAxKTsKCSAgICAgICAgICAgIHNwbGl0Q291bnQtLTsKCSAgICAgICAgICB9CgkgICAgICAgIH0gLy8gZmluZCB0aGUgYXBwcm9wcmlhdGUgYmluIGZvciBlYWNoIHRyaWFuZ2xlIGFuZCBleHBhbmQgdGhlIGJvdW5kcy4KCgoJICAgICAgICBmb3IgKGxldCBjID0gY1N0YXJ0OyBjIDwgY0VuZDsgYyArPSA2KSB7CgkgICAgICAgICAgY29uc3QgY2VudGVyID0gdHJpYW5nbGVCb3VuZHNbYyArIDIgKiBhXTsKCgkgICAgICAgICAgZm9yIChsZXQgYmkgPSAwOyBiaSA8IHNwbGl0Q291bnQ7IGJpKyspIHsKCSAgICAgICAgICAgIGNvbnN0IGJpbiA9IHRydW5jYXRlZEJpbnNbYmldOwoKCSAgICAgICAgICAgIGlmIChjZW50ZXIgPj0gYmluLmNhbmRpZGF0ZSkgewoJICAgICAgICAgICAgICBleHBhbmRCeVRyaWFuZ2xlQm91bmRzKGMsIHRyaWFuZ2xlQm91bmRzLCBiaW4ucmlnaHRDYWNoZUJvdW5kcyk7CgkgICAgICAgICAgICB9IGVsc2UgewoJICAgICAgICAgICAgICBleHBhbmRCeVRyaWFuZ2xlQm91bmRzKGMsIHRyaWFuZ2xlQm91bmRzLCBiaW4ubGVmdENhY2hlQm91bmRzKTsKCSAgICAgICAgICAgICAgYmluLmNvdW50Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgfQoJICAgICAgICB9IC8vIGV4cGFuZCBhbGwgdGhlIGJvdW5kcwoKCgkgICAgICAgIGZvciAobGV0IGJpID0gMDsgYmkgPCBzcGxpdENvdW50OyBiaSsrKSB7CgkgICAgICAgICAgY29uc3QgYmluID0gdHJ1bmNhdGVkQmluc1tiaV07CgkgICAgICAgICAgY29uc3QgbGVmdENvdW50ID0gYmluLmNvdW50OwoJICAgICAgICAgIGNvbnN0IHJpZ2h0Q291bnQgPSBjb3VudCAtIGJpbi5jb3VudDsgLy8gY2hlY2sgdGhlIGNvc3Qgb2YgdGhpcyBzcGxpdAoKCSAgICAgICAgICBjb25zdCBsZWZ0Qm91bmRzID0gYmluLmxlZnRDYWNoZUJvdW5kczsKCSAgICAgICAgICBjb25zdCByaWdodEJvdW5kcyA9IGJpbi5yaWdodENhY2hlQm91bmRzOwoJICAgICAgICAgIGxldCBsZWZ0UHJvYiA9IDA7CgoJICAgICAgICAgIGlmIChsZWZ0Q291bnQgIT09IDApIHsKCSAgICAgICAgICAgIGxlZnRQcm9iID0gY29tcHV0ZVN1cmZhY2VBcmVhKGxlZnRCb3VuZHMpIC8gcm9vdFN1cmZhY2VBcmVhOwoJICAgICAgICAgIH0KCgkgICAgICAgICAgbGV0IHJpZ2h0UHJvYiA9IDA7CgoJICAgICAgICAgIGlmIChyaWdodENvdW50ICE9PSAwKSB7CgkgICAgICAgICAgICByaWdodFByb2IgPSBjb21wdXRlU3VyZmFjZUFyZWEocmlnaHRCb3VuZHMpIC8gcm9vdFN1cmZhY2VBcmVhOwoJICAgICAgICAgIH0KCgkgICAgICAgICAgY29uc3QgY29zdCA9IFRSQVZFUlNBTF9DT1NUICsgVFJJQU5HTEVfSU5URVJTRUNUX0NPU1QgKiAobGVmdFByb2IgKiBsZWZ0Q291bnQgKyByaWdodFByb2IgKiByaWdodENvdW50KTsKCgkgICAgICAgICAgaWYgKGNvc3QgPCBiZXN0Q29zdCkgewoJICAgICAgICAgICAgYXhpcyA9IGE7CgkgICAgICAgICAgICBiZXN0Q29zdCA9IGNvc3Q7CgkgICAgICAgICAgICBwb3MgPSBiaW4uY2FuZGlkYXRlOwoJICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgfSBlbHNlIHsKCSAgICAgICAgLy8gcmVzZXQgdGhlIGJpbnMKCSAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBCSU5fQ09VTlQ7IGkrKykgewoJICAgICAgICAgIGNvbnN0IGJpbiA9IHNhaEJpbnNbaV07CgkgICAgICAgICAgYmluLmNvdW50ID0gMDsKCSAgICAgICAgICBiaW4uY2FuZGlkYXRlID0gYXhpc0xlZnQgKyBiaW5XaWR0aCArIGkgKiBiaW5XaWR0aDsKCSAgICAgICAgICBjb25zdCBib3VuZHMgPSBiaW4uYm91bmRzOwoKCSAgICAgICAgICBmb3IgKGxldCBkID0gMDsgZCA8IDM7IGQrKykgewoJICAgICAgICAgICAgYm91bmRzW2RdID0gSW5maW5pdHk7CgkgICAgICAgICAgICBib3VuZHNbZCArIDNdID0gLUluZmluaXR5OwoJICAgICAgICAgIH0KCSAgICAgICAgfSAvLyBpdGVyYXRlIG92ZXIgYWxsIGNlbnRlciBwb3NpdGlvbnMKCgoJICAgICAgICBmb3IgKGxldCBjID0gY1N0YXJ0OyBjIDwgY0VuZDsgYyArPSA2KSB7CgkgICAgICAgICAgY29uc3QgdHJpQ2VudGVyID0gdHJpYW5nbGVCb3VuZHNbYyArIDIgKiBhXTsKCSAgICAgICAgICBjb25zdCByZWxhdGl2ZUNlbnRlciA9IHRyaUNlbnRlciAtIGF4aXNMZWZ0OyAvLyBpbiB0aGUgcGFydGl0aW9uIGZ1bmN0aW9uIGlmIHRoZSBjZW50cm9pZCBsaWVzIG9uIHRoZSBzcGxpdCBwbGFuZSB0aGVuIGl0IGlzCgkgICAgICAgICAgLy8gY29uc2lkZXJlZCB0byBiZSBvbiB0aGUgcmlnaHQgc2lkZSBvZiB0aGUgc3BsaXQKCgkgICAgICAgICAgbGV0IGJpbkluZGV4ID0gfn4ocmVsYXRpdmVDZW50ZXIgLyBiaW5XaWR0aCk7CgkgICAgICAgICAgaWYgKGJpbkluZGV4ID49IEJJTl9DT1VOVCkgYmluSW5kZXggPSBCSU5fQ09VTlQgLSAxOwoJICAgICAgICAgIGNvbnN0IGJpbiA9IHNhaEJpbnNbYmluSW5kZXhdOwoJICAgICAgICAgIGJpbi5jb3VudCsrOwoJICAgICAgICAgIGV4cGFuZEJ5VHJpYW5nbGVCb3VuZHMoYywgdHJpYW5nbGVCb3VuZHMsIGJpbi5ib3VuZHMpOwoJICAgICAgICB9IC8vIGNhY2hlIHRoZSB1bmlvbmVkIGJvdW5kcyBmcm9tIHJpZ2h0IHRvIGxlZnQgc28gd2UgZG9uJ3QgaGF2ZSB0byByZWdlbmVyYXRlIHRoZW0gZWFjaCB0aW1lCgoKCSAgICAgICAgY29uc3QgbGFzdEJpbiA9IHNhaEJpbnNbQklOX0NPVU5UIC0gMV07CgkgICAgICAgIGNvcHlCb3VuZHMobGFzdEJpbi5ib3VuZHMsIGxhc3RCaW4ucmlnaHRDYWNoZUJvdW5kcyk7CgoJICAgICAgICBmb3IgKGxldCBpID0gQklOX0NPVU5UIC0gMjsgaSA+PSAwOyBpLS0pIHsKCSAgICAgICAgICBjb25zdCBiaW4gPSBzYWhCaW5zW2ldOwoJICAgICAgICAgIGNvbnN0IG5leHRCaW4gPSBzYWhCaW5zW2kgKyAxXTsKCSAgICAgICAgICB1bmlvbkJvdW5kcyhiaW4uYm91bmRzLCBuZXh0QmluLnJpZ2h0Q2FjaGVCb3VuZHMsIGJpbi5yaWdodENhY2hlQm91bmRzKTsKCSAgICAgICAgfQoKCSAgICAgICAgbGV0IGxlZnRDb3VudCA9IDA7CgoJICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IEJJTl9DT1VOVCAtIDE7IGkrKykgewoJICAgICAgICAgIGNvbnN0IGJpbiA9IHNhaEJpbnNbaV07CgkgICAgICAgICAgY29uc3QgYmluQ291bnQgPSBiaW4uY291bnQ7CgkgICAgICAgICAgY29uc3QgYm91bmRzID0gYmluLmJvdW5kczsKCSAgICAgICAgICBjb25zdCBuZXh0QmluID0gc2FoQmluc1tpICsgMV07CgkgICAgICAgICAgY29uc3QgcmlnaHRCb3VuZHMgPSBuZXh0QmluLnJpZ2h0Q2FjaGVCb3VuZHM7IC8vIGRvbnQgZG8gYW55dGhpbmcgd2l0aCB0aGUgYm91bmRzIGlmIHRoZSBuZXcgYm91bmRzIGhhdmUgbm8gdHJpYW5nbGVzCgoJICAgICAgICAgIGlmIChiaW5Db3VudCAhPT0gMCkgewoJICAgICAgICAgICAgaWYgKGxlZnRDb3VudCA9PT0gMCkgewoJICAgICAgICAgICAgICBjb3B5Qm91bmRzKGJvdW5kcywgbGVmdEJvdW5kcyk7CgkgICAgICAgICAgICB9IGVsc2UgewoJICAgICAgICAgICAgICB1bmlvbkJvdW5kcyhib3VuZHMsIGxlZnRCb3VuZHMsIGxlZnRCb3VuZHMpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgIH0KCgkgICAgICAgICAgbGVmdENvdW50ICs9IGJpbkNvdW50OyAvLyBjaGVjayB0aGUgY29zdCBvZiB0aGlzIHNwbGl0CgoJICAgICAgICAgIGxldCBsZWZ0UHJvYiA9IDA7CgkgICAgICAgICAgbGV0IHJpZ2h0UHJvYiA9IDA7CgoJICAgICAgICAgIGlmIChsZWZ0Q291bnQgIT09IDApIHsKCSAgICAgICAgICAgIGxlZnRQcm9iID0gY29tcHV0ZVN1cmZhY2VBcmVhKGxlZnRCb3VuZHMpIC8gcm9vdFN1cmZhY2VBcmVhOwoJICAgICAgICAgIH0KCgkgICAgICAgICAgY29uc3QgcmlnaHRDb3VudCA9IGNvdW50IC0gbGVmdENvdW50OwoKCSAgICAgICAgICBpZiAocmlnaHRDb3VudCAhPT0gMCkgewoJICAgICAgICAgICAgcmlnaHRQcm9iID0gY29tcHV0ZVN1cmZhY2VBcmVhKHJpZ2h0Qm91bmRzKSAvIHJvb3RTdXJmYWNlQXJlYTsKCSAgICAgICAgICB9CgoJICAgICAgICAgIGNvbnN0IGNvc3QgPSBUUkFWRVJTQUxfQ09TVCArIFRSSUFOR0xFX0lOVEVSU0VDVF9DT1NUICogKGxlZnRQcm9iICogbGVmdENvdW50ICsgcmlnaHRQcm9iICogcmlnaHRDb3VudCk7CgoJICAgICAgICAgIGlmIChjb3N0IDwgYmVzdENvc3QpIHsKCSAgICAgICAgICAgIGF4aXMgPSBhOwoJICAgICAgICAgICAgYmVzdENvc3QgPSBjb3N0OwoJICAgICAgICAgICAgcG9zID0gYmluLmNhbmRpZGF0ZTsKCSAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgIH0KCSAgICB9CgkgIH0gZWxzZSB7CgkgICAgY29uc29sZS53YXJuKGBNZXNoQlZIOiBJbnZhbGlkIGJ1aWxkIHN0cmF0ZWd5IHZhbHVlICR7c3RyYXRlZ3l9IHVzZWQuYCk7CgkgIH0KCgkgIHJldHVybiB7CgkgICAgYXhpcywKCSAgICBwb3MKCSAgfTsKCX0gLy8gcmV0dXJucyB0aGUgYXZlcmFnZSBjb29yZGluYXRlIG9uIHRoZSBzcGVjaWZpZWQgYXhpcyBvZiB0aGUgYWxsIHRoZSBwcm92aWRlZCB0cmlhbmdsZXMKCgoJZnVuY3Rpb24gZ2V0QXZlcmFnZSh0cmlhbmdsZUJvdW5kcywgb2Zmc2V0LCBjb3VudCwgYXhpcykgewoJICBsZXQgYXZnID0gMDsKCgkgIGZvciAobGV0IGkgPSBvZmZzZXQsIGVuZCA9IG9mZnNldCArIGNvdW50OyBpIDwgZW5kOyBpKyspIHsKCSAgICBhdmcgKz0gdHJpYW5nbGVCb3VuZHNbaSAqIDYgKyBheGlzICogMl07CgkgIH0KCgkgIHJldHVybiBhdmcgLyBjb3VudDsKCX0gLy8gcHJlY29tcHV0ZXMgdGhlIGJvdW5kaW5nIGJveCBmb3IgZWFjaCB0cmlhbmdsZTsgcmVxdWlyZWQgZm9yIHF1aWNrbHkgY2FsY3VsYXRpbmcgdHJlZSBzcGxpdHMuCgkvLyByZXN1bHQgaXMgYW4gYXJyYXkgb2Ygc2l6ZSB0cmlzLmxlbmd0aCAqIDYgd2hlcmUgdHJpYW5nbGUgaSBtYXBzIHRvIGEKCS8vIFt4X2NlbnRlciwgeF9kZWx0YSwgeV9jZW50ZXIsIHlfZGVsdGEsIHpfY2VudGVyLCB6X2RlbHRhXSB0dXBsZSBzdGFydGluZyBhdCBpbmRleCBpICogNiwKCS8vIHJlcHJlc2VudGluZyB0aGUgY2VudGVyIGFuZCBoYWxmLWV4dGVudCBpbiBlYWNoIGRpbWVuc2lvbiBvZiB0cmlhbmdsZSBpCgoKCWZ1bmN0aW9uIGNvbXB1dGVUcmlhbmdsZUJvdW5kcyhnZW8sIGZ1bGxCb3VuZHMpIHsKCSAgY29uc3QgcG9zQXR0ciA9IGdlby5hdHRyaWJ1dGVzLnBvc2l0aW9uOwoJICBjb25zdCBwb3NBcnIgPSBwb3NBdHRyLmFycmF5OwoJICBjb25zdCBpbmRleCA9IGdlby5pbmRleC5hcnJheTsKCSAgY29uc3QgdHJpQ291bnQgPSBpbmRleC5sZW5ndGggLyAzOwoJICBjb25zdCB0cmlhbmdsZUJvdW5kcyA9IG5ldyBGbG9hdDMyQXJyYXkodHJpQ291bnQgKiA2KTsgLy8gc3VwcG9ydCBmb3IgYW4gaW50ZXJsZWF2ZWQgcG9zaXRpb24gYnVmZmVyCgoJICBjb25zdCBidWZmZXJPZmZzZXQgPSBwb3NBdHRyLm9mZnNldCB8fCAwOwoJICBsZXQgc3RyaWRlID0gMzsKCgkgIGlmIChwb3NBdHRyLmlzSW50ZXJsZWF2ZWRCdWZmZXJBdHRyaWJ1dGUpIHsKCSAgICBzdHJpZGUgPSBwb3NBdHRyLmRhdGEuc3RyaWRlOwoJICB9CgoJICBmb3IgKGxldCB0cmkgPSAwOyB0cmkgPCB0cmlDb3VudDsgdHJpKyspIHsKCSAgICBjb25zdCB0cmkzID0gdHJpICogMzsKCSAgICBjb25zdCB0cmk2ID0gdHJpICogNjsKCSAgICBjb25zdCBhaSA9IGluZGV4W3RyaTMgKyAwXSAqIHN0cmlkZSArIGJ1ZmZlck9mZnNldDsKCSAgICBjb25zdCBiaSA9IGluZGV4W3RyaTMgKyAxXSAqIHN0cmlkZSArIGJ1ZmZlck9mZnNldDsKCSAgICBjb25zdCBjaSA9IGluZGV4W3RyaTMgKyAyXSAqIHN0cmlkZSArIGJ1ZmZlck9mZnNldDsKCgkgICAgZm9yIChsZXQgZWwgPSAwOyBlbCA8IDM7IGVsKyspIHsKCSAgICAgIGNvbnN0IGEgPSBwb3NBcnJbYWkgKyBlbF07CgkgICAgICBjb25zdCBiID0gcG9zQXJyW2JpICsgZWxdOwoJICAgICAgY29uc3QgYyA9IHBvc0FycltjaSArIGVsXTsKCSAgICAgIGxldCBtaW4gPSBhOwoJICAgICAgaWYgKGIgPCBtaW4pIG1pbiA9IGI7CgkgICAgICBpZiAoYyA8IG1pbikgbWluID0gYzsKCSAgICAgIGxldCBtYXggPSBhOwoJICAgICAgaWYgKGIgPiBtYXgpIG1heCA9IGI7CgkgICAgICBpZiAoYyA+IG1heCkgbWF4ID0gYzsgLy8gSW5jcmVhc2UgdGhlIGJvdW5kcyBzaXplIGJ5IGZsb2F0MzIgZXBzaWxvbiB0byBhdm9pZCBwcmVjaXNpb24gZXJyb3JzIHdoZW4KCSAgICAgIC8vIGNvbnZlcnRpbmcgdG8gMzIgYml0IGZsb2F0LiBTY2FsZSB0aGUgZXBzaWxvbiBieSB0aGUgc2l6ZSBvZiB0aGUgbnVtYmVycyBiZWluZwoJICAgICAgLy8gd29ya2VkIHdpdGguCgoJICAgICAgY29uc3QgaGFsZkV4dGVudHMgPSAobWF4IC0gbWluKSAvIDI7CgkgICAgICBjb25zdCBlbDIgPSBlbCAqIDI7CgkgICAgICB0cmlhbmdsZUJvdW5kc1t0cmk2ICsgZWwyICsgMF0gPSBtaW4gKyBoYWxmRXh0ZW50czsKCSAgICAgIHRyaWFuZ2xlQm91bmRzW3RyaTYgKyBlbDIgKyAxXSA9IGhhbGZFeHRlbnRzICsgKE1hdGguYWJzKG1pbikgKyBoYWxmRXh0ZW50cykgKiBGTE9BVDMyX0VQU0lMT047CgkgICAgICBpZiAobWluIDwgZnVsbEJvdW5kc1tlbF0pIGZ1bGxCb3VuZHNbZWxdID0gbWluOwoJICAgICAgaWYgKG1heCA+IGZ1bGxCb3VuZHNbZWwgKyAzXSkgZnVsbEJvdW5kc1tlbCArIDNdID0gbWF4OwoJICAgIH0KCSAgfQoKCSAgcmV0dXJuIHRyaWFuZ2xlQm91bmRzOwoJfQoKCWZ1bmN0aW9uIGJ1aWxkVHJlZShnZW8sIG9wdGlvbnMpIHsKCSAgZnVuY3Rpb24gdHJpZ2dlclByb2dyZXNzKHRyaWFuZ2xlc1Byb2Nlc3NlZCkgewoJICAgIGlmIChvblByb2dyZXNzKSB7CgkgICAgICBvblByb2dyZXNzKHRyaWFuZ2xlc1Byb2Nlc3NlZCAvIHRvdGFsVHJpYW5nbGVzKTsKCSAgICB9CgkgIH0gLy8gZWl0aGVyIHJlY3Vyc2l2ZWx5IHNwbGl0cyB0aGUgZ2l2ZW4gbm9kZSwgY3JlYXRpbmcgbGVmdCBhbmQgcmlnaHQgc3VidHJlZXMgZm9yIGl0LCBvciBtYWtlcyBpdCBhIGxlYWYgbm9kZSwKCSAgLy8gcmVjb3JkaW5nIHRoZSBvZmZzZXQgYW5kIGNvdW50IG9mIGl0cyB0cmlhbmdsZXMgYW5kIHdyaXRpbmcgdGhlbSBpbnRvIHRoZSByZW9yZGVyZWQgZ2VvbWV0cnkgaW5kZXguCgoKCSAgZnVuY3Rpb24gc3BsaXROb2RlKG5vZGUsIG9mZnNldCwgY291bnQsIGNlbnRyb2lkQm91bmRpbmdEYXRhLCBkZXB0aCkgewoJICAgIGlmIChjZW50cm9pZEJvdW5kaW5nRGF0YSA9PT0gdm9pZCAwKSB7CgkgICAgICBjZW50cm9pZEJvdW5kaW5nRGF0YSA9IG51bGw7CgkgICAgfQoKCSAgICBpZiAoZGVwdGggPT09IHZvaWQgMCkgewoJICAgICAgZGVwdGggPSAwOwoJICAgIH0KCgkgICAgaWYgKCFyZWFjaGVkTWF4RGVwdGggJiYgZGVwdGggPj0gbWF4RGVwdGgpIHsKCSAgICAgIHJlYWNoZWRNYXhEZXB0aCA9IHRydWU7CgoJICAgICAgaWYgKHZlcmJvc2UpIHsKCSAgICAgICAgY29uc29sZS53YXJuKGBNZXNoQlZIOiBNYXggZGVwdGggb2YgJHttYXhEZXB0aH0gcmVhY2hlZCB3aGVuIGdlbmVyYXRpbmcgQlZILiBDb25zaWRlciBpbmNyZWFzaW5nIG1heERlcHRoLmApOwoJICAgICAgICBjb25zb2xlLndhcm4oZ2VvKTsKCSAgICAgIH0KCSAgICB9IC8vIGVhcmx5IG91dCBpZiB3ZSd2ZSBtZXQgb3VyIGNhcGFjaXR5CgoKCSAgICBpZiAoY291bnQgPD0gbWF4TGVhZlRyaXMgfHwgZGVwdGggPj0gbWF4RGVwdGgpIHsKCSAgICAgIHRyaWdnZXJQcm9ncmVzcyhvZmZzZXQpOwoJICAgICAgbm9kZS5vZmZzZXQgPSBvZmZzZXQ7CgkgICAgICBub2RlLmNvdW50ID0gY291bnQ7CgkgICAgICByZXR1cm4gbm9kZTsKCSAgICB9IC8vIEZpbmQgd2hlcmUgdG8gc3BsaXQgdGhlIHZvbHVtZQoKCgkgICAgY29uc3Qgc3BsaXQgPSBnZXRPcHRpbWFsU3BsaXQobm9kZS5ib3VuZGluZ0RhdGEsIGNlbnRyb2lkQm91bmRpbmdEYXRhLCB0cmlhbmdsZUJvdW5kcywgb2Zmc2V0LCBjb3VudCwgc3RyYXRlZ3kpOwoKCSAgICBpZiAoc3BsaXQuYXhpcyA9PT0gLTEpIHsKCSAgICAgIHRyaWdnZXJQcm9ncmVzcyhvZmZzZXQpOwoJICAgICAgbm9kZS5vZmZzZXQgPSBvZmZzZXQ7CgkgICAgICBub2RlLmNvdW50ID0gY291bnQ7CgkgICAgICByZXR1cm4gbm9kZTsKCSAgICB9CgoJICAgIGNvbnN0IHNwbGl0T2Zmc2V0ID0gcGFydGl0aW9uKGluZGV4QXJyYXksIHRyaWFuZ2xlQm91bmRzLCBvZmZzZXQsIGNvdW50LCBzcGxpdCk7IC8vIGNyZWF0ZSB0aGUgdHdvIG5ldyBjaGlsZCBub2RlcwoKCSAgICBpZiAoc3BsaXRPZmZzZXQgPT09IG9mZnNldCB8fCBzcGxpdE9mZnNldCA9PT0gb2Zmc2V0ICsgY291bnQpIHsKCSAgICAgIHRyaWdnZXJQcm9ncmVzcyhvZmZzZXQpOwoJICAgICAgbm9kZS5vZmZzZXQgPSBvZmZzZXQ7CgkgICAgICBub2RlLmNvdW50ID0gY291bnQ7CgkgICAgfSBlbHNlIHsKCSAgICAgIG5vZGUuc3BsaXRBeGlzID0gc3BsaXQuYXhpczsgLy8gY3JlYXRlIHRoZSBsZWZ0IGNoaWxkIGFuZCBjb21wdXRlIGl0cyBib3VuZGluZyBib3gKCgkgICAgICBjb25zdCBsZWZ0ID0gbmV3IE1lc2hCVkhOb2RlKCk7CgkgICAgICBjb25zdCBsc3RhcnQgPSBvZmZzZXQ7CgkgICAgICBjb25zdCBsY291bnQgPSBzcGxpdE9mZnNldCAtIG9mZnNldDsKCSAgICAgIG5vZGUubGVmdCA9IGxlZnQ7CgkgICAgICBsZWZ0LmJvdW5kaW5nRGF0YSA9IG5ldyBGbG9hdDMyQXJyYXkoNik7CgkgICAgICBnZXRCb3VuZHModHJpYW5nbGVCb3VuZHMsIGxzdGFydCwgbGNvdW50LCBsZWZ0LmJvdW5kaW5nRGF0YSwgY2FjaGVDZW50cm9pZEJvdW5kaW5nRGF0YSk7CgkgICAgICBzcGxpdE5vZGUobGVmdCwgbHN0YXJ0LCBsY291bnQsIGNhY2hlQ2VudHJvaWRCb3VuZGluZ0RhdGEsIGRlcHRoICsgMSk7IC8vIHJlcGVhdCBmb3IgcmlnaHQKCgkgICAgICBjb25zdCByaWdodCA9IG5ldyBNZXNoQlZITm9kZSgpOwoJICAgICAgY29uc3QgcnN0YXJ0ID0gc3BsaXRPZmZzZXQ7CgkgICAgICBjb25zdCByY291bnQgPSBjb3VudCAtIGxjb3VudDsKCSAgICAgIG5vZGUucmlnaHQgPSByaWdodDsKCSAgICAgIHJpZ2h0LmJvdW5kaW5nRGF0YSA9IG5ldyBGbG9hdDMyQXJyYXkoNik7CgkgICAgICBnZXRCb3VuZHModHJpYW5nbGVCb3VuZHMsIHJzdGFydCwgcmNvdW50LCByaWdodC5ib3VuZGluZ0RhdGEsIGNhY2hlQ2VudHJvaWRCb3VuZGluZ0RhdGEpOwoJICAgICAgc3BsaXROb2RlKHJpZ2h0LCByc3RhcnQsIHJjb3VudCwgY2FjaGVDZW50cm9pZEJvdW5kaW5nRGF0YSwgZGVwdGggKyAxKTsKCSAgICB9CgoJICAgIHJldHVybiBub2RlOwoJICB9CgoJICBlbnN1cmVJbmRleChnZW8sIG9wdGlvbnMpOyAvLyBDb21wdXRlIHRoZSBmdWxsIGJvdW5kcyBvZiB0aGUgZ2VvbWV0cnkgYXQgdGhlIHNhbWUgdGltZSBhcyB0cmlhbmdsZSBib3VuZHMgYmVjYXVzZQoJICAvLyB3ZSdsbCBuZWVkIGl0IGZvciB0aGUgcm9vdCBib3VuZHMgaW4gdGhlIGNhc2Ugd2l0aCBubyBncm91cHMgYW5kIGl0IHNob3VsZCBiZSBmYXN0IGhlcmUuCgkgIC8vIFdlIGNhbid0IHVzZSB0aGUgZ2VvbWV0cnlpbmcgYm91bmRpbmcgYm94IGlmIGl0J3MgYXZhaWxhYmxlIGJlY2F1c2UgaXQgbWF5IGJlIG91dCBvZiBkYXRlLgoKCSAgY29uc3QgZnVsbEJvdW5kcyA9IG5ldyBGbG9hdDMyQXJyYXkoNik7CgkgIGNvbnN0IGNhY2hlQ2VudHJvaWRCb3VuZGluZ0RhdGEgPSBuZXcgRmxvYXQzMkFycmF5KDYpOwoJICBjb25zdCB0cmlhbmdsZUJvdW5kcyA9IGNvbXB1dGVUcmlhbmdsZUJvdW5kcyhnZW8sIGZ1bGxCb3VuZHMpOwoJICBjb25zdCBpbmRleEFycmF5ID0gZ2VvLmluZGV4LmFycmF5OwoJICBjb25zdCBtYXhEZXB0aCA9IG9wdGlvbnMubWF4RGVwdGg7CgkgIGNvbnN0IHZlcmJvc2UgPSBvcHRpb25zLnZlcmJvc2U7CgkgIGNvbnN0IG1heExlYWZUcmlzID0gb3B0aW9ucy5tYXhMZWFmVHJpczsKCSAgY29uc3Qgc3RyYXRlZ3kgPSBvcHRpb25zLnN0cmF0ZWd5OwoJICBjb25zdCBvblByb2dyZXNzID0gb3B0aW9ucy5vblByb2dyZXNzOwoJICBjb25zdCB0b3RhbFRyaWFuZ2xlcyA9IGdlby5pbmRleC5jb3VudCAvIDM7CgkgIGxldCByZWFjaGVkTWF4RGVwdGggPSBmYWxzZTsKCSAgY29uc3Qgcm9vdHMgPSBbXTsKCSAgY29uc3QgcmFuZ2VzID0gZ2V0Um9vdEluZGV4UmFuZ2VzKGdlbyk7CgoJICBpZiAocmFuZ2VzLmxlbmd0aCA9PT0gMSkgewoJICAgIGNvbnN0IHJhbmdlID0gcmFuZ2VzWzBdOwoJICAgIGNvbnN0IHJvb3QgPSBuZXcgTWVzaEJWSE5vZGUoKTsKCSAgICByb290LmJvdW5kaW5nRGF0YSA9IGZ1bGxCb3VuZHM7CgkgICAgZ2V0Q2VudHJvaWRCb3VuZHModHJpYW5nbGVCb3VuZHMsIHJhbmdlLm9mZnNldCwgcmFuZ2UuY291bnQsIGNhY2hlQ2VudHJvaWRCb3VuZGluZ0RhdGEpOwoJICAgIHNwbGl0Tm9kZShyb290LCByYW5nZS5vZmZzZXQsIHJhbmdlLmNvdW50LCBjYWNoZUNlbnRyb2lkQm91bmRpbmdEYXRhKTsKCSAgICByb290cy5wdXNoKHJvb3QpOwoJICB9IGVsc2UgewoJICAgIGZvciAobGV0IHJhbmdlIG9mIHJhbmdlcykgewoJICAgICAgY29uc3Qgcm9vdCA9IG5ldyBNZXNoQlZITm9kZSgpOwoJICAgICAgcm9vdC5ib3VuZGluZ0RhdGEgPSBuZXcgRmxvYXQzMkFycmF5KDYpOwoJICAgICAgZ2V0Qm91bmRzKHRyaWFuZ2xlQm91bmRzLCByYW5nZS5vZmZzZXQsIHJhbmdlLmNvdW50LCByb290LmJvdW5kaW5nRGF0YSwgY2FjaGVDZW50cm9pZEJvdW5kaW5nRGF0YSk7CgkgICAgICBzcGxpdE5vZGUocm9vdCwgcmFuZ2Uub2Zmc2V0LCByYW5nZS5jb3VudCwgY2FjaGVDZW50cm9pZEJvdW5kaW5nRGF0YSk7CgkgICAgICByb290cy5wdXNoKHJvb3QpOwoJICAgIH0KCSAgfQoKCSAgcmV0dXJuIHJvb3RzOwoJfQoJZnVuY3Rpb24gYnVpbGRQYWNrZWRUcmVlKGdlbywgb3B0aW9ucykgewoJICAvLyBib3VuZGluZ0RhdGEgIAkJCQk6IDYgZmxvYXQzMgoJICAvLyByaWdodCAvIG9mZnNldCAJCQkJOiAxIHVpbnQzMgoJICAvLyBzcGxpdEF4aXMgLyBpc0xlYWYgKyBjb3VudCAJOiAxIHVpbnQzMiAvIDIgdWludDE2CgkgIGNvbnN0IHJvb3RzID0gYnVpbGRUcmVlKGdlbywgb3B0aW9ucyk7CgkgIGxldCBmbG9hdDMyQXJyYXk7CgkgIGxldCB1aW50MzJBcnJheTsKCSAgbGV0IHVpbnQxNkFycmF5OwoJICBjb25zdCBwYWNrZWRSb290cyA9IFtdOwoJICBjb25zdCBCdWZmZXJDb25zdHJ1Y3RvciA9IG9wdGlvbnMudXNlU2hhcmVkQXJyYXlCdWZmZXIgPyBTaGFyZWRBcnJheUJ1ZmZlciA6IEFycmF5QnVmZmVyOwoKCSAgZm9yIChsZXQgaSA9IDA7IGkgPCByb290cy5sZW5ndGg7IGkrKykgewoJICAgIGNvbnN0IHJvb3QgPSByb290c1tpXTsKCSAgICBsZXQgbm9kZUNvdW50ID0gY291bnROb2Rlcyhyb290KTsKCSAgICBjb25zdCBidWZmZXIgPSBuZXcgQnVmZmVyQ29uc3RydWN0b3IoQllURVNfUEVSX05PREUgKiBub2RlQ291bnQpOwoJICAgIGZsb2F0MzJBcnJheSA9IG5ldyBGbG9hdDMyQXJyYXkoYnVmZmVyKTsKCSAgICB1aW50MzJBcnJheSA9IG5ldyBVaW50MzJBcnJheShidWZmZXIpOwoJICAgIHVpbnQxNkFycmF5ID0gbmV3IFVpbnQxNkFycmF5KGJ1ZmZlcik7CgkgICAgcG9wdWxhdGVCdWZmZXIoMCwgcm9vdCk7CgkgICAgcGFja2VkUm9vdHMucHVzaChidWZmZXIpOwoJICB9CgoJICByZXR1cm4gcGFja2VkUm9vdHM7CgoJICBmdW5jdGlvbiBjb3VudE5vZGVzKG5vZGUpIHsKCSAgICBpZiAobm9kZS5jb3VudCkgewoJICAgICAgcmV0dXJuIDE7CgkgICAgfSBlbHNlIHsKCSAgICAgIHJldHVybiAxICsgY291bnROb2Rlcyhub2RlLmxlZnQpICsgY291bnROb2Rlcyhub2RlLnJpZ2h0KTsKCSAgICB9CgkgIH0KCgkgIGZ1bmN0aW9uIHBvcHVsYXRlQnVmZmVyKGJ5dGVPZmZzZXQsIG5vZGUpIHsKCSAgICBjb25zdCBzdHJpZGU0T2Zmc2V0ID0gYnl0ZU9mZnNldCAvIDQ7CgkgICAgY29uc3Qgc3RyaWRlMk9mZnNldCA9IGJ5dGVPZmZzZXQgLyAyOwoJICAgIGNvbnN0IGlzTGVhZiA9ICEhbm9kZS5jb3VudDsKCSAgICBjb25zdCBib3VuZGluZ0RhdGEgPSBub2RlLmJvdW5kaW5nRGF0YTsKCgkgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA2OyBpKyspIHsKCSAgICAgIGZsb2F0MzJBcnJheVtzdHJpZGU0T2Zmc2V0ICsgaV0gPSBib3VuZGluZ0RhdGFbaV07CgkgICAgfQoKCSAgICBpZiAoaXNMZWFmKSB7CgkgICAgICBjb25zdCBvZmZzZXQgPSBub2RlLm9mZnNldDsKCSAgICAgIGNvbnN0IGNvdW50ID0gbm9kZS5jb3VudDsKCSAgICAgIHVpbnQzMkFycmF5W3N0cmlkZTRPZmZzZXQgKyA2XSA9IG9mZnNldDsKCSAgICAgIHVpbnQxNkFycmF5W3N0cmlkZTJPZmZzZXQgKyAxNF0gPSBjb3VudDsKCSAgICAgIHVpbnQxNkFycmF5W3N0cmlkZTJPZmZzZXQgKyAxNV0gPSBJU19MRUFGTk9ERV9GTEFHOwoJICAgICAgcmV0dXJuIGJ5dGVPZmZzZXQgKyBCWVRFU19QRVJfTk9ERTsKCSAgICB9IGVsc2UgewoJICAgICAgY29uc3QgbGVmdCA9IG5vZGUubGVmdDsKCSAgICAgIGNvbnN0IHJpZ2h0ID0gbm9kZS5yaWdodDsKCSAgICAgIGNvbnN0IHNwbGl0QXhpcyA9IG5vZGUuc3BsaXRBeGlzOwoJICAgICAgbGV0IG5leHRVbnVzZWRQb2ludGVyOwoJICAgICAgbmV4dFVudXNlZFBvaW50ZXIgPSBwb3B1bGF0ZUJ1ZmZlcihieXRlT2Zmc2V0ICsgQllURVNfUEVSX05PREUsIGxlZnQpOwoKCSAgICAgIGlmIChuZXh0VW51c2VkUG9pbnRlciAvIDQgPiBNYXRoLnBvdygyLCAzMikpIHsKCSAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNZXNoQlZIOiBDYW5ub3Qgc3RvcmUgY2hpbGQgcG9pbnRlciBncmVhdGVyIHRoYW4gMzIgYml0cy4nKTsKCSAgICAgIH0KCgkgICAgICB1aW50MzJBcnJheVtzdHJpZGU0T2Zmc2V0ICsgNl0gPSBuZXh0VW51c2VkUG9pbnRlciAvIDQ7CgkgICAgICBuZXh0VW51c2VkUG9pbnRlciA9IHBvcHVsYXRlQnVmZmVyKG5leHRVbnVzZWRQb2ludGVyLCByaWdodCk7CgkgICAgICB1aW50MzJBcnJheVtzdHJpZGU0T2Zmc2V0ICsgN10gPSBzcGxpdEF4aXM7CgkgICAgICByZXR1cm4gbmV4dFVudXNlZFBvaW50ZXI7CgkgICAgfQoJICB9Cgl9CgoJY2xhc3MgU2VwYXJhdGluZ0F4aXNCb3VuZHMgewoJICBjb25zdHJ1Y3RvcigpIHsKCSAgICB0aGlzLm1pbiA9IEluZmluaXR5OwoJICAgIHRoaXMubWF4ID0gLUluZmluaXR5OwoJICB9CgoJICBzZXRGcm9tUG9pbnRzRmllbGQocG9pbnRzLCBmaWVsZCkgewoJICAgIGxldCBtaW4gPSBJbmZpbml0eTsKCSAgICBsZXQgbWF4ID0gLUluZmluaXR5OwoKCSAgICBmb3IgKGxldCBpID0gMCwgbCA9IHBvaW50cy5sZW5ndGg7IGkgPCBsOyBpKyspIHsKCSAgICAgIGNvbnN0IHAgPSBwb2ludHNbaV07CgkgICAgICBjb25zdCB2YWwgPSBwW2ZpZWxkXTsKCSAgICAgIG1pbiA9IHZhbCA8IG1pbiA/IHZhbCA6IG1pbjsKCSAgICAgIG1heCA9IHZhbCA+IG1heCA/IHZhbCA6IG1heDsKCSAgICB9CgoJICAgIHRoaXMubWluID0gbWluOwoJICAgIHRoaXMubWF4ID0gbWF4OwoJICB9CgoJICBzZXRGcm9tUG9pbnRzKGF4aXMsIHBvaW50cykgewoJICAgIGxldCBtaW4gPSBJbmZpbml0eTsKCSAgICBsZXQgbWF4ID0gLUluZmluaXR5OwoKCSAgICBmb3IgKGxldCBpID0gMCwgbCA9IHBvaW50cy5sZW5ndGg7IGkgPCBsOyBpKyspIHsKCSAgICAgIGNvbnN0IHAgPSBwb2ludHNbaV07CgkgICAgICBjb25zdCB2YWwgPSBheGlzLmRvdChwKTsKCSAgICAgIG1pbiA9IHZhbCA8IG1pbiA/IHZhbCA6IG1pbjsKCSAgICAgIG1heCA9IHZhbCA+IG1heCA/IHZhbCA6IG1heDsKCSAgICB9CgoJICAgIHRoaXMubWluID0gbWluOwoJICAgIHRoaXMubWF4ID0gbWF4OwoJICB9CgoJICBpc1NlcGFyYXRlZChvdGhlcikgewoJICAgIHJldHVybiB0aGlzLm1pbiA+IG90aGVyLm1heCB8fCBvdGhlci5taW4gPiB0aGlzLm1heDsKCSAgfQoKCX0KCglTZXBhcmF0aW5nQXhpc0JvdW5kcy5wcm90b3R5cGUuc2V0RnJvbUJveCA9IGZ1bmN0aW9uICgpIHsKCSAgY29uc3QgcCA9IG5ldyBWZWN0b3IzKCk7CgkgIHJldHVybiBmdW5jdGlvbiBzZXRGcm9tQm94KGF4aXMsIGJveCkgewoJICAgIGNvbnN0IGJveE1pbiA9IGJveC5taW47CgkgICAgY29uc3QgYm94TWF4ID0gYm94Lm1heDsKCSAgICBsZXQgbWluID0gSW5maW5pdHk7CgkgICAgbGV0IG1heCA9IC1JbmZpbml0eTsKCgkgICAgZm9yIChsZXQgeCA9IDA7IHggPD0gMTsgeCsrKSB7CgkgICAgICBmb3IgKGxldCB5ID0gMDsgeSA8PSAxOyB5KyspIHsKCSAgICAgICAgZm9yIChsZXQgeiA9IDA7IHogPD0gMTsgeisrKSB7CgkgICAgICAgICAgcC54ID0gYm94TWluLnggKiB4ICsgYm94TWF4LnggKiAoMSAtIHgpOwoJICAgICAgICAgIHAueSA9IGJveE1pbi55ICogeSArIGJveE1heC55ICogKDEgLSB5KTsKCSAgICAgICAgICBwLnogPSBib3hNaW4ueiAqIHogKyBib3hNYXgueiAqICgxIC0geik7CgkgICAgICAgICAgY29uc3QgdmFsID0gYXhpcy5kb3QocCk7CgkgICAgICAgICAgbWluID0gTWF0aC5taW4odmFsLCBtaW4pOwoJICAgICAgICAgIG1heCA9IE1hdGgubWF4KHZhbCwgbWF4KTsKCSAgICAgICAgfQoJICAgICAgfQoJICAgIH0KCgkgICAgdGhpcy5taW4gPSBtaW47CgkgICAgdGhpcy5tYXggPSBtYXg7CgkgIH07Cgl9KCk7CgoJKGZ1bmN0aW9uICgpIHsKCSAgY29uc3QgY2FjaGVTYXRCb3VuZHMgPSBuZXcgU2VwYXJhdGluZ0F4aXNCb3VuZHMoKTsKCSAgcmV0dXJuIGZ1bmN0aW9uIGFyZUludGVyc2VjdGluZyhzaGFwZTEsIHNoYXBlMikgewoJICAgIGNvbnN0IHBvaW50czEgPSBzaGFwZTEucG9pbnRzOwoJICAgIGNvbnN0IHNhdEF4ZXMxID0gc2hhcGUxLnNhdEF4ZXM7CgkgICAgY29uc3Qgc2F0Qm91bmRzMSA9IHNoYXBlMS5zYXRCb3VuZHM7CgkgICAgY29uc3QgcG9pbnRzMiA9IHNoYXBlMi5wb2ludHM7CgkgICAgY29uc3Qgc2F0QXhlczIgPSBzaGFwZTIuc2F0QXhlczsKCSAgICBjb25zdCBzYXRCb3VuZHMyID0gc2hhcGUyLnNhdEJvdW5kczsgLy8gY2hlY2sgYXhlcyBvZiB0aGUgZmlyc3Qgc2hhcGUKCgkgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAzOyBpKyspIHsKCSAgICAgIGNvbnN0IHNiID0gc2F0Qm91bmRzMVtpXTsKCSAgICAgIGNvbnN0IHNhID0gc2F0QXhlczFbaV07CgkgICAgICBjYWNoZVNhdEJvdW5kcy5zZXRGcm9tUG9pbnRzKHNhLCBwb2ludHMyKTsKCSAgICAgIGlmIChzYi5pc1NlcGFyYXRlZChjYWNoZVNhdEJvdW5kcykpIHJldHVybiBmYWxzZTsKCSAgICB9IC8vIGNoZWNrIGF4ZXMgb2YgdGhlIHNlY29uZCBzaGFwZQoKCgkgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAzOyBpKyspIHsKCSAgICAgIGNvbnN0IHNiID0gc2F0Qm91bmRzMltpXTsKCSAgICAgIGNvbnN0IHNhID0gc2F0QXhlczJbaV07CgkgICAgICBjYWNoZVNhdEJvdW5kcy5zZXRGcm9tUG9pbnRzKHNhLCBwb2ludHMxKTsKCSAgICAgIGlmIChzYi5pc1NlcGFyYXRlZChjYWNoZVNhdEJvdW5kcykpIHJldHVybiBmYWxzZTsKCSAgICB9CgkgIH07Cgl9KSgpOwoKCWNvbnN0IGNsb3Nlc3RQb2ludExpbmVUb0xpbmUgPSBmdW5jdGlvbiAoKSB7CgkgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9qdWovTWF0aEdlb0xpYi9ibG9iL21hc3Rlci9zcmMvR2VvbWV0cnkvTGluZS5jcHAjTDU2CgkgIGNvbnN0IGRpcjEgPSBuZXcgVmVjdG9yMygpOwoJICBjb25zdCBkaXIyID0gbmV3IFZlY3RvcjMoKTsKCSAgY29uc3QgdjAyID0gbmV3IFZlY3RvcjMoKTsKCSAgcmV0dXJuIGZ1bmN0aW9uIGNsb3Nlc3RQb2ludExpbmVUb0xpbmUobDEsIGwyLCByZXN1bHQpIHsKCSAgICBjb25zdCB2MCA9IGwxLnN0YXJ0OwoJICAgIGNvbnN0IHYxMCA9IGRpcjE7CgkgICAgY29uc3QgdjIgPSBsMi5zdGFydDsKCSAgICBjb25zdCB2MzIgPSBkaXIyOwoJICAgIHYwMi5zdWJWZWN0b3JzKHYwLCB2Mik7CgkgICAgZGlyMS5zdWJWZWN0b3JzKGwxLmVuZCwgbDIuc3RhcnQpOwoJICAgIGRpcjIuc3ViVmVjdG9ycyhsMi5lbmQsIGwyLnN0YXJ0KTsgLy8gZmxvYXQgZDAyMzIgPSB2MDIuRG90KHYzMik7CgoJICAgIGNvbnN0IGQwMjMyID0gdjAyLmRvdCh2MzIpOyAvLyBmbG9hdCBkMzIxMCA9IHYzMi5Eb3QodjEwKTsKCgkgICAgY29uc3QgZDMyMTAgPSB2MzIuZG90KHYxMCk7IC8vIGZsb2F0IGQzMjMyID0gdjMyLkRvdCh2MzIpOwoKCSAgICBjb25zdCBkMzIzMiA9IHYzMi5kb3QodjMyKTsgLy8gZmxvYXQgZDAyMTAgPSB2MDIuRG90KHYxMCk7CgoJICAgIGNvbnN0IGQwMjEwID0gdjAyLmRvdCh2MTApOyAvLyBmbG9hdCBkMTAxMCA9IHYxMC5Eb3QodjEwKTsKCgkgICAgY29uc3QgZDEwMTAgPSB2MTAuZG90KHYxMCk7IC8vIGZsb2F0IGRlbm9tID0gZDEwMTAqZDMyMzIgLSBkMzIxMCpkMzIxMDsKCgkgICAgY29uc3QgZGVub20gPSBkMTAxMCAqIGQzMjMyIC0gZDMyMTAgKiBkMzIxMDsKCSAgICBsZXQgZCwgZDI7CgoJICAgIGlmIChkZW5vbSAhPT0gMCkgewoJICAgICAgZCA9IChkMDIzMiAqIGQzMjEwIC0gZDAyMTAgKiBkMzIzMikgLyBkZW5vbTsKCSAgICB9IGVsc2UgewoJICAgICAgZCA9IDA7CgkgICAgfQoKCSAgICBkMiA9IChkMDIzMiArIGQgKiBkMzIxMCkgLyBkMzIzMjsKCSAgICByZXN1bHQueCA9IGQ7CgkgICAgcmVzdWx0LnkgPSBkMjsKCSAgfTsKCX0oKTsKCWNvbnN0IGNsb3Nlc3RQb2ludHNTZWdtZW50VG9TZWdtZW50ID0gZnVuY3Rpb24gKCkgewoJICAvLyBodHRwczovL2dpdGh1Yi5jb20vanVqL01hdGhHZW9MaWIvYmxvYi9tYXN0ZXIvc3JjL0dlb21ldHJ5L0xpbmVTZWdtZW50LmNwcCNMMTg3CgkgIGNvbnN0IHBhcmFtUmVzdWx0ID0gbmV3IFZlY3RvcjIoKTsKCSAgY29uc3QgdGVtcDEgPSBuZXcgVmVjdG9yMygpOwoJICBjb25zdCB0ZW1wMiA9IG5ldyBWZWN0b3IzKCk7CgkgIHJldHVybiBmdW5jdGlvbiBjbG9zZXN0UG9pbnRzU2VnbWVudFRvU2VnbWVudChsMSwgbDIsIHRhcmdldDEsIHRhcmdldDIpIHsKCSAgICBjbG9zZXN0UG9pbnRMaW5lVG9MaW5lKGwxLCBsMiwgcGFyYW1SZXN1bHQpOwoJICAgIGxldCBkID0gcGFyYW1SZXN1bHQueDsKCSAgICBsZXQgZDIgPSBwYXJhbVJlc3VsdC55OwoKCSAgICBpZiAoZCA+PSAwICYmIGQgPD0gMSAmJiBkMiA+PSAwICYmIGQyIDw9IDEpIHsKCSAgICAgIGwxLmF0KGQsIHRhcmdldDEpOwoJICAgICAgbDIuYXQoZDIsIHRhcmdldDIpOwoJICAgICAgcmV0dXJuOwoJICAgIH0gZWxzZSBpZiAoZCA+PSAwICYmIGQgPD0gMSkgewoJICAgICAgLy8gT25seSBkMiBpcyBvdXQgb2YgYm91bmRzLgoJICAgICAgaWYgKGQyIDwgMCkgewoJICAgICAgICBsMi5hdCgwLCB0YXJnZXQyKTsKCSAgICAgIH0gZWxzZSB7CgkgICAgICAgIGwyLmF0KDEsIHRhcmdldDIpOwoJICAgICAgfQoKCSAgICAgIGwxLmNsb3Nlc3RQb2ludFRvUG9pbnQodGFyZ2V0MiwgdHJ1ZSwgdGFyZ2V0MSk7CgkgICAgICByZXR1cm47CgkgICAgfSBlbHNlIGlmIChkMiA+PSAwICYmIGQyIDw9IDEpIHsKCSAgICAgIC8vIE9ubHkgZCBpcyBvdXQgb2YgYm91bmRzLgoJICAgICAgaWYgKGQgPCAwKSB7CgkgICAgICAgIGwxLmF0KDAsIHRhcmdldDEpOwoJICAgICAgfSBlbHNlIHsKCSAgICAgICAgbDEuYXQoMSwgdGFyZ2V0MSk7CgkgICAgICB9CgoJICAgICAgbDIuY2xvc2VzdFBvaW50VG9Qb2ludCh0YXJnZXQxLCB0cnVlLCB0YXJnZXQyKTsKCSAgICAgIHJldHVybjsKCSAgICB9IGVsc2UgewoJICAgICAgLy8gQm90aCB1IGFuZCB1MiBhcmUgb3V0IG9mIGJvdW5kcy4KCSAgICAgIGxldCBwOwoKCSAgICAgIGlmIChkIDwgMCkgewoJICAgICAgICBwID0gbDEuc3RhcnQ7CgkgICAgICB9IGVsc2UgewoJICAgICAgICBwID0gbDEuZW5kOwoJICAgICAgfQoKCSAgICAgIGxldCBwMjsKCgkgICAgICBpZiAoZDIgPCAwKSB7CgkgICAgICAgIHAyID0gbDIuc3RhcnQ7CgkgICAgICB9IGVsc2UgewoJICAgICAgICBwMiA9IGwyLmVuZDsKCSAgICAgIH0KCgkgICAgICBjb25zdCBjbG9zZXN0UG9pbnQgPSB0ZW1wMTsKCSAgICAgIGNvbnN0IGNsb3Nlc3RQb2ludDIgPSB0ZW1wMjsKCSAgICAgIGwxLmNsb3Nlc3RQb2ludFRvUG9pbnQocDIsIHRydWUsIHRlbXAxKTsKCSAgICAgIGwyLmNsb3Nlc3RQb2ludFRvUG9pbnQocCwgdHJ1ZSwgdGVtcDIpOwoKCSAgICAgIGlmIChjbG9zZXN0UG9pbnQuZGlzdGFuY2VUb1NxdWFyZWQocDIpIDw9IGNsb3Nlc3RQb2ludDIuZGlzdGFuY2VUb1NxdWFyZWQocCkpIHsKCSAgICAgICAgdGFyZ2V0MS5jb3B5KGNsb3Nlc3RQb2ludCk7CgkgICAgICAgIHRhcmdldDIuY29weShwMik7CgkgICAgICAgIHJldHVybjsKCSAgICAgIH0gZWxzZSB7CgkgICAgICAgIHRhcmdldDEuY29weShwKTsKCSAgICAgICAgdGFyZ2V0Mi5jb3B5KGNsb3Nlc3RQb2ludDIpOwoJICAgICAgICByZXR1cm47CgkgICAgICB9CgkgICAgfQoJICB9OwoJfSgpOwoJY29uc3Qgc3BoZXJlSW50ZXJzZWN0VHJpYW5nbGUgPSBmdW5jdGlvbiAoKSB7CgkgIC8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzM0MDQzOTU1L2RldGVjdC1jb2xsaXNpb24tYmV0d2Vlbi1zcGhlcmUtYW5kLXRyaWFuZ2xlLWluLXRocmVlLWpzCgkgIGNvbnN0IGNsb3Nlc3RQb2ludFRlbXAgPSBuZXcgVmVjdG9yMygpOwoJICBjb25zdCBwcm9qZWN0ZWRQb2ludFRlbXAgPSBuZXcgVmVjdG9yMygpOwoJICBjb25zdCBwbGFuZVRlbXAgPSBuZXcgUGxhbmUoKTsKCSAgY29uc3QgbGluZVRlbXAgPSBuZXcgTGluZTMoKTsKCSAgcmV0dXJuIGZ1bmN0aW9uIHNwaGVyZUludGVyc2VjdFRyaWFuZ2xlKHNwaGVyZSwgdHJpYW5nbGUpIHsKCSAgICBjb25zdCB7CgkgICAgICByYWRpdXMsCgkgICAgICBjZW50ZXIKCSAgICB9ID0gc3BoZXJlOwoJICAgIGNvbnN0IHsKCSAgICAgIGEsCgkgICAgICBiLAoJICAgICAgYwoJICAgIH0gPSB0cmlhbmdsZTsgLy8gcGhhc2UgMQoKCSAgICBsaW5lVGVtcC5zdGFydCA9IGE7CgkgICAgbGluZVRlbXAuZW5kID0gYjsKCSAgICBjb25zdCBjbG9zZXN0UG9pbnQxID0gbGluZVRlbXAuY2xvc2VzdFBvaW50VG9Qb2ludChjZW50ZXIsIHRydWUsIGNsb3Nlc3RQb2ludFRlbXApOwoJICAgIGlmIChjbG9zZXN0UG9pbnQxLmRpc3RhbmNlVG8oY2VudGVyKSA8PSByYWRpdXMpIHJldHVybiB0cnVlOwoJICAgIGxpbmVUZW1wLnN0YXJ0ID0gYTsKCSAgICBsaW5lVGVtcC5lbmQgPSBjOwoJICAgIGNvbnN0IGNsb3Nlc3RQb2ludDIgPSBsaW5lVGVtcC5jbG9zZXN0UG9pbnRUb1BvaW50KGNlbnRlciwgdHJ1ZSwgY2xvc2VzdFBvaW50VGVtcCk7CgkgICAgaWYgKGNsb3Nlc3RQb2ludDIuZGlzdGFuY2VUbyhjZW50ZXIpIDw9IHJhZGl1cykgcmV0dXJuIHRydWU7CgkgICAgbGluZVRlbXAuc3RhcnQgPSBiOwoJICAgIGxpbmVUZW1wLmVuZCA9IGM7CgkgICAgY29uc3QgY2xvc2VzdFBvaW50MyA9IGxpbmVUZW1wLmNsb3Nlc3RQb2ludFRvUG9pbnQoY2VudGVyLCB0cnVlLCBjbG9zZXN0UG9pbnRUZW1wKTsKCSAgICBpZiAoY2xvc2VzdFBvaW50My5kaXN0YW5jZVRvKGNlbnRlcikgPD0gcmFkaXVzKSByZXR1cm4gdHJ1ZTsgLy8gcGhhc2UgMgoKCSAgICBjb25zdCBwbGFuZSA9IHRyaWFuZ2xlLmdldFBsYW5lKHBsYW5lVGVtcCk7CgkgICAgY29uc3QgZHAgPSBNYXRoLmFicyhwbGFuZS5kaXN0YW5jZVRvUG9pbnQoY2VudGVyKSk7CgoJICAgIGlmIChkcCA8PSByYWRpdXMpIHsKCSAgICAgIGNvbnN0IHBwID0gcGxhbmUucHJvamVjdFBvaW50KGNlbnRlciwgcHJvamVjdGVkUG9pbnRUZW1wKTsKCSAgICAgIGNvbnN0IGNwID0gdHJpYW5nbGUuY29udGFpbnNQb2ludChwcCk7CgkgICAgICBpZiAoY3ApIHJldHVybiB0cnVlOwoJICAgIH0KCgkgICAgcmV0dXJuIGZhbHNlOwoJICB9OwoJfSgpOwoKCWNsYXNzIFNlcGFyYXRpbmdBeGlzVHJpYW5nbGUgZXh0ZW5kcyBUcmlhbmdsZSB7CgkgIGNvbnN0cnVjdG9yKCkgewoJICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7CgkgICAgdGhpcy5pc1NlcGFyYXRpbmdBeGlzVHJpYW5nbGUgPSB0cnVlOwoJICAgIHRoaXMuc2F0QXhlcyA9IG5ldyBBcnJheSg0KS5maWxsKCkubWFwKCgpID0+IG5ldyBWZWN0b3IzKCkpOwoJICAgIHRoaXMuc2F0Qm91bmRzID0gbmV3IEFycmF5KDQpLmZpbGwoKS5tYXAoKCkgPT4gbmV3IFNlcGFyYXRpbmdBeGlzQm91bmRzKCkpOwoJICAgIHRoaXMucG9pbnRzID0gW3RoaXMuYSwgdGhpcy5iLCB0aGlzLmNdOwoJICAgIHRoaXMuc3BoZXJlID0gbmV3IFNwaGVyZSgpOwoJICAgIHRoaXMucGxhbmUgPSBuZXcgUGxhbmUoKTsKCSAgICB0aGlzLm5lZWRzVXBkYXRlID0gZmFsc2U7CgkgIH0KCgkgIGludGVyc2VjdHNTcGhlcmUoc3BoZXJlKSB7CgkgICAgcmV0dXJuIHNwaGVyZUludGVyc2VjdFRyaWFuZ2xlKHNwaGVyZSwgdGhpcyk7CgkgIH0KCgkgIHVwZGF0ZSgpIHsKCSAgICBjb25zdCBhID0gdGhpcy5hOwoJICAgIGNvbnN0IGIgPSB0aGlzLmI7CgkgICAgY29uc3QgYyA9IHRoaXMuYzsKCSAgICBjb25zdCBwb2ludHMgPSB0aGlzLnBvaW50czsKCSAgICBjb25zdCBzYXRBeGVzID0gdGhpcy5zYXRBeGVzOwoJICAgIGNvbnN0IHNhdEJvdW5kcyA9IHRoaXMuc2F0Qm91bmRzOwoJICAgIGNvbnN0IGF4aXMwID0gc2F0QXhlc1swXTsKCSAgICBjb25zdCBzYWIwID0gc2F0Qm91bmRzWzBdOwoJICAgIHRoaXMuZ2V0Tm9ybWFsKGF4aXMwKTsKCSAgICBzYWIwLnNldEZyb21Qb2ludHMoYXhpczAsIHBvaW50cyk7CgkgICAgY29uc3QgYXhpczEgPSBzYXRBeGVzWzFdOwoJICAgIGNvbnN0IHNhYjEgPSBzYXRCb3VuZHNbMV07CgkgICAgYXhpczEuc3ViVmVjdG9ycyhhLCBiKTsKCSAgICBzYWIxLnNldEZyb21Qb2ludHMoYXhpczEsIHBvaW50cyk7CgkgICAgY29uc3QgYXhpczIgPSBzYXRBeGVzWzJdOwoJICAgIGNvbnN0IHNhYjIgPSBzYXRCb3VuZHNbMl07CgkgICAgYXhpczIuc3ViVmVjdG9ycyhiLCBjKTsKCSAgICBzYWIyLnNldEZyb21Qb2ludHMoYXhpczIsIHBvaW50cyk7CgkgICAgY29uc3QgYXhpczMgPSBzYXRBeGVzWzNdOwoJICAgIGNvbnN0IHNhYjMgPSBzYXRCb3VuZHNbM107CgkgICAgYXhpczMuc3ViVmVjdG9ycyhjLCBhKTsKCSAgICBzYWIzLnNldEZyb21Qb2ludHMoYXhpczMsIHBvaW50cyk7CgkgICAgdGhpcy5zcGhlcmUuc2V0RnJvbVBvaW50cyh0aGlzLnBvaW50cyk7CgkgICAgdGhpcy5wbGFuZS5zZXRGcm9tTm9ybWFsQW5kQ29wbGFuYXJQb2ludChheGlzMCwgYSk7CgkgICAgdGhpcy5uZWVkc1VwZGF0ZSA9IGZhbHNlOwoJICB9CgoJfQoKCVNlcGFyYXRpbmdBeGlzVHJpYW5nbGUucHJvdG90eXBlLmNsb3Nlc3RQb2ludFRvU2VnbWVudCA9IGZ1bmN0aW9uICgpIHsKCSAgY29uc3QgcG9pbnQxID0gbmV3IFZlY3RvcjMoKTsKCSAgY29uc3QgcG9pbnQyID0gbmV3IFZlY3RvcjMoKTsKCSAgY29uc3QgZWRnZSA9IG5ldyBMaW5lMygpOwoJICByZXR1cm4gZnVuY3Rpb24gZGlzdGFuY2VUb1NlZ21lbnQoc2VnbWVudCwgdGFyZ2V0MSwgdGFyZ2V0MikgewoJICAgIGlmICh0YXJnZXQxID09PSB2b2lkIDApIHsKCSAgICAgIHRhcmdldDEgPSBudWxsOwoJICAgIH0KCgkgICAgaWYgKHRhcmdldDIgPT09IHZvaWQgMCkgewoJICAgICAgdGFyZ2V0MiA9IG51bGw7CgkgICAgfQoKCSAgICBjb25zdCB7CgkgICAgICBzdGFydCwKCSAgICAgIGVuZAoJICAgIH0gPSBzZWdtZW50OwoJICAgIGNvbnN0IHBvaW50cyA9IHRoaXMucG9pbnRzOwoJICAgIGxldCBkaXN0U3E7CgkgICAgbGV0IGNsb3Nlc3REaXN0YW5jZVNxID0gSW5maW5pdHk7IC8vIGNoZWNrIHRoZSB0cmlhbmdsZSBlZGdlcwoKCSAgICBmb3IgKGxldCBpID0gMDsgaSA8IDM7IGkrKykgewoJICAgICAgY29uc3QgbmV4dGkgPSAoaSArIDEpICUgMzsKCSAgICAgIGVkZ2Uuc3RhcnQuY29weShwb2ludHNbaV0pOwoJICAgICAgZWRnZS5lbmQuY29weShwb2ludHNbbmV4dGldKTsKCSAgICAgIGNsb3Nlc3RQb2ludHNTZWdtZW50VG9TZWdtZW50KGVkZ2UsIHNlZ21lbnQsIHBvaW50MSwgcG9pbnQyKTsKCSAgICAgIGRpc3RTcSA9IHBvaW50MS5kaXN0YW5jZVRvU3F1YXJlZChwb2ludDIpOwoKCSAgICAgIGlmIChkaXN0U3EgPCBjbG9zZXN0RGlzdGFuY2VTcSkgewoJICAgICAgICBjbG9zZXN0RGlzdGFuY2VTcSA9IGRpc3RTcTsKCSAgICAgICAgaWYgKHRhcmdldDEpIHRhcmdldDEuY29weShwb2ludDEpOwoJICAgICAgICBpZiAodGFyZ2V0MikgdGFyZ2V0Mi5jb3B5KHBvaW50Mik7CgkgICAgICB9CgkgICAgfSAvLyBjaGVjayBlbmQgcG9pbnRzCgoKCSAgICB0aGlzLmNsb3Nlc3RQb2ludFRvUG9pbnQoc3RhcnQsIHBvaW50MSk7CgkgICAgZGlzdFNxID0gc3RhcnQuZGlzdGFuY2VUb1NxdWFyZWQocG9pbnQxKTsKCgkgICAgaWYgKGRpc3RTcSA8IGNsb3Nlc3REaXN0YW5jZVNxKSB7CgkgICAgICBjbG9zZXN0RGlzdGFuY2VTcSA9IGRpc3RTcTsKCSAgICAgIGlmICh0YXJnZXQxKSB0YXJnZXQxLmNvcHkocG9pbnQxKTsKCSAgICAgIGlmICh0YXJnZXQyKSB0YXJnZXQyLmNvcHkoc3RhcnQpOwoJICAgIH0KCgkgICAgdGhpcy5jbG9zZXN0UG9pbnRUb1BvaW50KGVuZCwgcG9pbnQxKTsKCSAgICBkaXN0U3EgPSBlbmQuZGlzdGFuY2VUb1NxdWFyZWQocG9pbnQxKTsKCgkgICAgaWYgKGRpc3RTcSA8IGNsb3Nlc3REaXN0YW5jZVNxKSB7CgkgICAgICBjbG9zZXN0RGlzdGFuY2VTcSA9IGRpc3RTcTsKCSAgICAgIGlmICh0YXJnZXQxKSB0YXJnZXQxLmNvcHkocG9pbnQxKTsKCSAgICAgIGlmICh0YXJnZXQyKSB0YXJnZXQyLmNvcHkoZW5kKTsKCSAgICB9CgoJICAgIHJldHVybiBNYXRoLnNxcnQoY2xvc2VzdERpc3RhbmNlU3EpOwoJICB9OwoJfSgpOwoKCVNlcGFyYXRpbmdBeGlzVHJpYW5nbGUucHJvdG90eXBlLmludGVyc2VjdHNUcmlhbmdsZSA9IGZ1bmN0aW9uICgpIHsKCSAgY29uc3Qgc2FUcmkyID0gbmV3IFNlcGFyYXRpbmdBeGlzVHJpYW5nbGUoKTsKCSAgY29uc3QgYXJyMSA9IG5ldyBBcnJheSgzKTsKCSAgY29uc3QgYXJyMiA9IG5ldyBBcnJheSgzKTsKCSAgY29uc3QgY2FjaGVkU2F0Qm91bmRzID0gbmV3IFNlcGFyYXRpbmdBeGlzQm91bmRzKCk7CgkgIGNvbnN0IGNhY2hlZFNhdEJvdW5kczIgPSBuZXcgU2VwYXJhdGluZ0F4aXNCb3VuZHMoKTsKCSAgY29uc3QgY2FjaGVkQXhpcyA9IG5ldyBWZWN0b3IzKCk7CgkgIGNvbnN0IGRpcjEgPSBuZXcgVmVjdG9yMygpOwoJICBjb25zdCBkaXIyID0gbmV3IFZlY3RvcjMoKTsKCSAgY29uc3QgdGVtcERpciA9IG5ldyBWZWN0b3IzKCk7CgkgIGNvbnN0IGVkZ2UgPSBuZXcgTGluZTMoKTsKCSAgY29uc3QgZWRnZTEgPSBuZXcgTGluZTMoKTsKCSAgY29uc3QgZWRnZTIgPSBuZXcgTGluZTMoKTsgLy8gVE9ETzogSWYgdGhlIHRyaWFuZ2xlcyBhcmUgY29wbGFuYXIgYW5kIGludGVyc2VjdGluZyB0aGUgdGFyZ2V0IGlzIG5vbnNlbnNpY2FsLiBJdCBzaG91bGQgYXQgbGVhc3QKCSAgLy8gYmUgYSBsaW5lIGNvbnRhaW5lZCBieSBib3RoIHRyaWFuZ2xlcyBpZiBub3QgYSBkaWZmZXJlbnQgc3BlY2lhbCBjYXNlIHNvbWVob3cgcmVwcmVzZW50ZWQgaW4gdGhlIHJldHVybiByZXN1bHQuCgoJICByZXR1cm4gZnVuY3Rpb24gaW50ZXJzZWN0c1RyaWFuZ2xlKG90aGVyLCB0YXJnZXQpIHsKCSAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKCSAgICAgIHRhcmdldCA9IG51bGw7CgkgICAgfQoKCSAgICBpZiAodGhpcy5uZWVkc1VwZGF0ZSkgewoJICAgICAgdGhpcy51cGRhdGUoKTsKCSAgICB9CgoJICAgIGlmICghb3RoZXIuaXNTZXBhcmF0aW5nQXhpc1RyaWFuZ2xlKSB7CgkgICAgICBzYVRyaTIuY29weShvdGhlcik7CgkgICAgICBzYVRyaTIudXBkYXRlKCk7CgkgICAgICBvdGhlciA9IHNhVHJpMjsKCSAgICB9IGVsc2UgaWYgKG90aGVyLm5lZWRzVXBkYXRlKSB7CgkgICAgICBvdGhlci51cGRhdGUoKTsKCSAgICB9CgoJICAgIGNvbnN0IHNhdEJvdW5kczEgPSB0aGlzLnNhdEJvdW5kczsKCSAgICBjb25zdCBzYXRBeGVzMSA9IHRoaXMuc2F0QXhlczsKCSAgICBhcnIyWzBdID0gb3RoZXIuYTsKCSAgICBhcnIyWzFdID0gb3RoZXIuYjsKCSAgICBhcnIyWzJdID0gb3RoZXIuYzsKCgkgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA0OyBpKyspIHsKCSAgICAgIGNvbnN0IHNiID0gc2F0Qm91bmRzMVtpXTsKCSAgICAgIGNvbnN0IHNhID0gc2F0QXhlczFbaV07CgkgICAgICBjYWNoZWRTYXRCb3VuZHMuc2V0RnJvbVBvaW50cyhzYSwgYXJyMik7CgkgICAgICBpZiAoc2IuaXNTZXBhcmF0ZWQoY2FjaGVkU2F0Qm91bmRzKSkgcmV0dXJuIGZhbHNlOwoJICAgIH0KCgkgICAgY29uc3Qgc2F0Qm91bmRzMiA9IG90aGVyLnNhdEJvdW5kczsKCSAgICBjb25zdCBzYXRBeGVzMiA9IG90aGVyLnNhdEF4ZXM7CgkgICAgYXJyMVswXSA9IHRoaXMuYTsKCSAgICBhcnIxWzFdID0gdGhpcy5iOwoJICAgIGFycjFbMl0gPSB0aGlzLmM7CgoJICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNDsgaSsrKSB7CgkgICAgICBjb25zdCBzYiA9IHNhdEJvdW5kczJbaV07CgkgICAgICBjb25zdCBzYSA9IHNhdEF4ZXMyW2ldOwoJICAgICAgY2FjaGVkU2F0Qm91bmRzLnNldEZyb21Qb2ludHMoc2EsIGFycjEpOwoJICAgICAgaWYgKHNiLmlzU2VwYXJhdGVkKGNhY2hlZFNhdEJvdW5kcykpIHJldHVybiBmYWxzZTsKCSAgICB9IC8vIGNoZWNrIGNyb3NzZWQgYXhlcwoKCgkgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA0OyBpKyspIHsKCSAgICAgIGNvbnN0IHNhMSA9IHNhdEF4ZXMxW2ldOwoKCSAgICAgIGZvciAobGV0IGkyID0gMDsgaTIgPCA0OyBpMisrKSB7CgkgICAgICAgIGNvbnN0IHNhMiA9IHNhdEF4ZXMyW2kyXTsKCSAgICAgICAgY2FjaGVkQXhpcy5jcm9zc1ZlY3RvcnMoc2ExLCBzYTIpOwoJICAgICAgICBjYWNoZWRTYXRCb3VuZHMuc2V0RnJvbVBvaW50cyhjYWNoZWRBeGlzLCBhcnIxKTsKCSAgICAgICAgY2FjaGVkU2F0Qm91bmRzMi5zZXRGcm9tUG9pbnRzKGNhY2hlZEF4aXMsIGFycjIpOwoJICAgICAgICBpZiAoY2FjaGVkU2F0Qm91bmRzLmlzU2VwYXJhdGVkKGNhY2hlZFNhdEJvdW5kczIpKSByZXR1cm4gZmFsc2U7CgkgICAgICB9CgkgICAgfQoKCSAgICBpZiAodGFyZ2V0KSB7CgkgICAgICBjb25zdCBwbGFuZTEgPSB0aGlzLnBsYW5lOwoJICAgICAgY29uc3QgcGxhbmUyID0gb3RoZXIucGxhbmU7CgoJICAgICAgaWYgKE1hdGguYWJzKHBsYW5lMS5ub3JtYWwuZG90KHBsYW5lMi5ub3JtYWwpKSA+IDEuMCAtIDFlLTEwKSB7CgkgICAgICAgIC8vIFRPRE8gZmluZCB0d28gcG9pbnRzIHRoYXQgaW50ZXJzZWN0IG9uIHRoZSBlZGdlcyBhbmQgbWFrZSB0aGF0IHRoZSByZXN1bHQKCSAgICAgICAgY29uc29sZS53YXJuKCdTZXBhcmF0aW5nQXhpc1RyaWFuZ2xlLmludGVyc2VjdHNUcmlhbmdsZTogVHJpYW5nbGVzIGFyZSBjb3BsYW5hciB3aGljaCBkb2VzIG5vdCBzdXBwb3J0IGFuIG91dHB1dCBlZGdlLiBTZXR0aW5nIGVkZ2UgdG8gMCwgMCwgMC4nKTsKCSAgICAgICAgdGFyZ2V0LnN0YXJ0LnNldCgwLCAwLCAwKTsKCSAgICAgICAgdGFyZ2V0LmVuZC5zZXQoMCwgMCwgMCk7CgkgICAgICB9IGVsc2UgewoJICAgICAgICAvLyBmaW5kIHRoZSBlZGdlIHRoYXQgaW50ZXJzZWN0cyB0aGUgb3RoZXIgdHJpYW5nbGUgcGxhbmUKCSAgICAgICAgY29uc3QgcG9pbnRzMSA9IHRoaXMucG9pbnRzOwoJICAgICAgICBsZXQgZm91bmQxID0gZmFsc2U7CgoJICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDM7IGkrKykgewoJICAgICAgICAgIGNvbnN0IHAxID0gcG9pbnRzMVtpXTsKCSAgICAgICAgICBjb25zdCBwMiA9IHBvaW50czFbKGkgKyAxKSAlIDNdOwoJICAgICAgICAgIGVkZ2Uuc3RhcnQuY29weShwMSk7CgkgICAgICAgICAgZWRnZS5lbmQuY29weShwMik7CgoJICAgICAgICAgIGlmIChwbGFuZTIuaW50ZXJzZWN0TGluZShlZGdlLCBmb3VuZDEgPyBlZGdlMS5zdGFydCA6IGVkZ2UxLmVuZCkpIHsKCSAgICAgICAgICAgIGlmIChmb3VuZDEpIHsKCSAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICB9CgoJICAgICAgICAgICAgZm91bmQxID0gdHJ1ZTsKCSAgICAgICAgICB9CgkgICAgICAgIH0gLy8gZmluZCB0aGUgb3RoZXIgdHJpYW5nbGVzIGVkZ2UgdGhhdCBpbnRlcnNlY3RzIHRoaXMgcGxhbmUKCgoJICAgICAgICBjb25zdCBwb2ludHMyID0gb3RoZXIucG9pbnRzOwoJICAgICAgICBsZXQgZm91bmQyID0gZmFsc2U7CgoJICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDM7IGkrKykgewoJICAgICAgICAgIGNvbnN0IHAxID0gcG9pbnRzMltpXTsKCSAgICAgICAgICBjb25zdCBwMiA9IHBvaW50czJbKGkgKyAxKSAlIDNdOwoJICAgICAgICAgIGVkZ2Uuc3RhcnQuY29weShwMSk7CgkgICAgICAgICAgZWRnZS5lbmQuY29weShwMik7CgoJICAgICAgICAgIGlmIChwbGFuZTEuaW50ZXJzZWN0TGluZShlZGdlLCBmb3VuZDIgPyBlZGdlMi5zdGFydCA6IGVkZ2UyLmVuZCkpIHsKCSAgICAgICAgICAgIGlmIChmb3VuZDIpIHsKCSAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICB9CgoJICAgICAgICAgICAgZm91bmQyID0gdHJ1ZTsKCSAgICAgICAgICB9CgkgICAgICAgIH0gLy8gZmluZCBzd2FwIHRoZSBzZWNvbmQgZWRnZSBzbyBib3RoIGxpbmVzIGFyZSBydW5uaW5nIHRoZSBzYW1lIGRpcmVjdGlvbgoKCgkgICAgICAgIGVkZ2UxLmRlbHRhKGRpcjEpOwoJICAgICAgICBlZGdlMi5kZWx0YShkaXIyKTsKCgkgICAgICAgIGlmIChkaXIxLmRvdChkaXIyKSA8IDApIHsKCSAgICAgICAgICBsZXQgdG1wID0gZWRnZTIuc3RhcnQ7CgkgICAgICAgICAgZWRnZTIuc3RhcnQgPSBlZGdlMi5lbmQ7CgkgICAgICAgICAgZWRnZTIuZW5kID0gdG1wOwoJICAgICAgICB9CgoJICAgICAgICB0ZW1wRGlyLnN1YlZlY3RvcnMoZWRnZTEuc3RhcnQsIGVkZ2UyLnN0YXJ0KTsKCgkgICAgICAgIGlmICh0ZW1wRGlyLmRvdChkaXIxKSA+IDApIHsKCSAgICAgICAgICB0YXJnZXQuc3RhcnQuY29weShlZGdlMS5zdGFydCk7CgkgICAgICAgIH0gZWxzZSB7CgkgICAgICAgICAgdGFyZ2V0LnN0YXJ0LmNvcHkoZWRnZTIuc3RhcnQpOwoJICAgICAgICB9CgoJICAgICAgICB0ZW1wRGlyLnN1YlZlY3RvcnMoZWRnZTEuZW5kLCBlZGdlMi5lbmQpOwoKCSAgICAgICAgaWYgKHRlbXBEaXIuZG90KGRpcjEpIDwgMCkgewoJICAgICAgICAgIHRhcmdldC5lbmQuY29weShlZGdlMS5lbmQpOwoJICAgICAgICB9IGVsc2UgewoJICAgICAgICAgIHRhcmdldC5lbmQuY29weShlZGdlMi5lbmQpOwoJICAgICAgICB9CgkgICAgICB9CgkgICAgfQoKCSAgICByZXR1cm4gdHJ1ZTsKCSAgfTsKCX0oKTsKCglTZXBhcmF0aW5nQXhpc1RyaWFuZ2xlLnByb3RvdHlwZS5kaXN0YW5jZVRvUG9pbnQgPSBmdW5jdGlvbiAoKSB7CgkgIGNvbnN0IHRhcmdldCA9IG5ldyBWZWN0b3IzKCk7CgkgIHJldHVybiBmdW5jdGlvbiBkaXN0YW5jZVRvUG9pbnQocG9pbnQpIHsKCSAgICB0aGlzLmNsb3Nlc3RQb2ludFRvUG9pbnQocG9pbnQsIHRhcmdldCk7CgkgICAgcmV0dXJuIHBvaW50LmRpc3RhbmNlVG8odGFyZ2V0KTsKCSAgfTsKCX0oKTsKCglTZXBhcmF0aW5nQXhpc1RyaWFuZ2xlLnByb3RvdHlwZS5kaXN0YW5jZVRvVHJpYW5nbGUgPSBmdW5jdGlvbiAoKSB7CgkgIGNvbnN0IHBvaW50ID0gbmV3IFZlY3RvcjMoKTsKCSAgY29uc3QgcG9pbnQyID0gbmV3IFZlY3RvcjMoKTsKCSAgY29uc3QgY29ybmVyRmllbGRzID0gWydhJywgJ2InLCAnYyddOwoJICBjb25zdCBsaW5lMSA9IG5ldyBMaW5lMygpOwoJICBjb25zdCBsaW5lMiA9IG5ldyBMaW5lMygpOwoJICByZXR1cm4gZnVuY3Rpb24gZGlzdGFuY2VUb1RyaWFuZ2xlKG90aGVyLCB0YXJnZXQxLCB0YXJnZXQyKSB7CgkgICAgaWYgKHRhcmdldDEgPT09IHZvaWQgMCkgewoJICAgICAgdGFyZ2V0MSA9IG51bGw7CgkgICAgfQoKCSAgICBpZiAodGFyZ2V0MiA9PT0gdm9pZCAwKSB7CgkgICAgICB0YXJnZXQyID0gbnVsbDsKCSAgICB9CgoJICAgIGNvbnN0IGxpbmVUYXJnZXQgPSB0YXJnZXQxIHx8IHRhcmdldDIgPyBsaW5lMSA6IG51bGw7CgoJICAgIGlmICh0aGlzLmludGVyc2VjdHNUcmlhbmdsZShvdGhlciwgbGluZVRhcmdldCkpIHsKCSAgICAgIGlmICh0YXJnZXQxIHx8IHRhcmdldDIpIHsKCSAgICAgICAgaWYgKHRhcmdldDEpIGxpbmVUYXJnZXQuZ2V0Q2VudGVyKHRhcmdldDEpOwoJICAgICAgICBpZiAodGFyZ2V0MikgbGluZVRhcmdldC5nZXRDZW50ZXIodGFyZ2V0Mik7CgkgICAgICB9CgoJICAgICAgcmV0dXJuIDA7CgkgICAgfQoKCSAgICBsZXQgY2xvc2VzdERpc3RhbmNlU3EgPSBJbmZpbml0eTsgLy8gY2hlY2sgYWxsIHBvaW50IGRpc3RhbmNlcwoKCSAgICBmb3IgKGxldCBpID0gMDsgaSA8IDM7IGkrKykgewoJICAgICAgbGV0IGRpc3Q7CgkgICAgICBjb25zdCBmaWVsZCA9IGNvcm5lckZpZWxkc1tpXTsKCSAgICAgIGNvbnN0IG90aGVyVmVjID0gb3RoZXJbZmllbGRdOwoJICAgICAgdGhpcy5jbG9zZXN0UG9pbnRUb1BvaW50KG90aGVyVmVjLCBwb2ludCk7CgkgICAgICBkaXN0ID0gb3RoZXJWZWMuZGlzdGFuY2VUb1NxdWFyZWQocG9pbnQpOwoKCSAgICAgIGlmIChkaXN0IDwgY2xvc2VzdERpc3RhbmNlU3EpIHsKCSAgICAgICAgY2xvc2VzdERpc3RhbmNlU3EgPSBkaXN0OwoJICAgICAgICBpZiAodGFyZ2V0MSkgdGFyZ2V0MS5jb3B5KHBvaW50KTsKCSAgICAgICAgaWYgKHRhcmdldDIpIHRhcmdldDIuY29weShvdGhlclZlYyk7CgkgICAgICB9CgoJICAgICAgY29uc3QgdGhpc1ZlYyA9IHRoaXNbZmllbGRdOwoJICAgICAgb3RoZXIuY2xvc2VzdFBvaW50VG9Qb2ludCh0aGlzVmVjLCBwb2ludCk7CgkgICAgICBkaXN0ID0gdGhpc1ZlYy5kaXN0YW5jZVRvU3F1YXJlZChwb2ludCk7CgoJICAgICAgaWYgKGRpc3QgPCBjbG9zZXN0RGlzdGFuY2VTcSkgewoJICAgICAgICBjbG9zZXN0RGlzdGFuY2VTcSA9IGRpc3Q7CgkgICAgICAgIGlmICh0YXJnZXQxKSB0YXJnZXQxLmNvcHkodGhpc1ZlYyk7CgkgICAgICAgIGlmICh0YXJnZXQyKSB0YXJnZXQyLmNvcHkocG9pbnQpOwoJICAgICAgfQoJICAgIH0KCgkgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAzOyBpKyspIHsKCSAgICAgIGNvbnN0IGYxMSA9IGNvcm5lckZpZWxkc1tpXTsKCSAgICAgIGNvbnN0IGYxMiA9IGNvcm5lckZpZWxkc1soaSArIDEpICUgM107CgkgICAgICBsaW5lMS5zZXQodGhpc1tmMTFdLCB0aGlzW2YxMl0pOwoKCSAgICAgIGZvciAobGV0IGkyID0gMDsgaTIgPCAzOyBpMisrKSB7CgkgICAgICAgIGNvbnN0IGYyMSA9IGNvcm5lckZpZWxkc1tpMl07CgkgICAgICAgIGNvbnN0IGYyMiA9IGNvcm5lckZpZWxkc1soaTIgKyAxKSAlIDNdOwoJICAgICAgICBsaW5lMi5zZXQob3RoZXJbZjIxXSwgb3RoZXJbZjIyXSk7CgkgICAgICAgIGNsb3Nlc3RQb2ludHNTZWdtZW50VG9TZWdtZW50KGxpbmUxLCBsaW5lMiwgcG9pbnQsIHBvaW50Mik7CgkgICAgICAgIGNvbnN0IGRpc3QgPSBwb2ludC5kaXN0YW5jZVRvU3F1YXJlZChwb2ludDIpOwoKCSAgICAgICAgaWYgKGRpc3QgPCBjbG9zZXN0RGlzdGFuY2VTcSkgewoJICAgICAgICAgIGNsb3Nlc3REaXN0YW5jZVNxID0gZGlzdDsKCSAgICAgICAgICBpZiAodGFyZ2V0MSkgdGFyZ2V0MS5jb3B5KHBvaW50KTsKCSAgICAgICAgICBpZiAodGFyZ2V0MikgdGFyZ2V0Mi5jb3B5KHBvaW50Mik7CgkgICAgICAgIH0KCSAgICAgIH0KCSAgICB9CgoJICAgIHJldHVybiBNYXRoLnNxcnQoY2xvc2VzdERpc3RhbmNlU3EpOwoJICB9OwoJfSgpOwoKCWNsYXNzIE9yaWVudGVkQm94IGV4dGVuZHMgQm94MyB7CgkgIGNvbnN0cnVjdG9yKCkgewoJICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7CgkgICAgdGhpcy5pc09yaWVudGVkQm94ID0gdHJ1ZTsKCSAgICB0aGlzLm1hdHJpeCA9IG5ldyBNYXRyaXg0KCk7CgkgICAgdGhpcy5pbnZNYXRyaXggPSBuZXcgTWF0cml4NCgpOwoJICAgIHRoaXMucG9pbnRzID0gbmV3IEFycmF5KDgpLmZpbGwoKS5tYXAoKCkgPT4gbmV3IFZlY3RvcjMoKSk7CgkgICAgdGhpcy5zYXRBeGVzID0gbmV3IEFycmF5KDMpLmZpbGwoKS5tYXAoKCkgPT4gbmV3IFZlY3RvcjMoKSk7CgkgICAgdGhpcy5zYXRCb3VuZHMgPSBuZXcgQXJyYXkoMykuZmlsbCgpLm1hcCgoKSA9PiBuZXcgU2VwYXJhdGluZ0F4aXNCb3VuZHMoKSk7CgkgICAgdGhpcy5hbGlnbmVkU2F0Qm91bmRzID0gbmV3IEFycmF5KDMpLmZpbGwoKS5tYXAoKCkgPT4gbmV3IFNlcGFyYXRpbmdBeGlzQm91bmRzKCkpOwoJICAgIHRoaXMubmVlZHNVcGRhdGUgPSBmYWxzZTsKCSAgfQoKCSAgc2V0KG1pbiwgbWF4LCBtYXRyaXgpIHsKCSAgICBzdXBlci5zZXQobWluLCBtYXgpOwoJICAgIHRoaXMubWF0cml4ID0gbWF0cml4OwoJICAgIHRoaXMubmVlZHNVcGRhdGUgPSB0cnVlOwoJICB9CgoJICBjb3B5KG90aGVyKSB7CgkgICAgc3VwZXIuY29weShvdGhlcik7CgkgICAgdGhpcy5tYXRyaXguY29weShvdGhlci5tYXRyaXgpOwoJICAgIHRoaXMubmVlZHNVcGRhdGUgPSB0cnVlOwoJICB9CgoJfQoKCU9yaWVudGVkQm94LnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoKSB7CgkgIHJldHVybiBmdW5jdGlvbiB1cGRhdGUoKSB7CgkgICAgY29uc3QgbWF0cml4ID0gdGhpcy5tYXRyaXg7CgkgICAgY29uc3QgbWluID0gdGhpcy5taW47CgkgICAgY29uc3QgbWF4ID0gdGhpcy5tYXg7CgkgICAgY29uc3QgcG9pbnRzID0gdGhpcy5wb2ludHM7CgoJICAgIGZvciAobGV0IHggPSAwOyB4IDw9IDE7IHgrKykgewoJICAgICAgZm9yIChsZXQgeSA9IDA7IHkgPD0gMTsgeSsrKSB7CgkgICAgICAgIGZvciAobGV0IHogPSAwOyB6IDw9IDE7IHorKykgewoJICAgICAgICAgIGNvbnN0IGkgPSAoMSA8PCAwKSAqIHggfCAoMSA8PCAxKSAqIHkgfCAoMSA8PCAyKSAqIHo7CgkgICAgICAgICAgY29uc3QgdiA9IHBvaW50c1tpXTsKCSAgICAgICAgICB2LnggPSB4ID8gbWF4LnggOiBtaW4ueDsKCSAgICAgICAgICB2LnkgPSB5ID8gbWF4LnkgOiBtaW4ueTsKCSAgICAgICAgICB2LnogPSB6ID8gbWF4LnogOiBtaW4uejsKCSAgICAgICAgICB2LmFwcGx5TWF0cml4NChtYXRyaXgpOwoJICAgICAgICB9CgkgICAgICB9CgkgICAgfQoKCSAgICBjb25zdCBzYXRCb3VuZHMgPSB0aGlzLnNhdEJvdW5kczsKCSAgICBjb25zdCBzYXRBeGVzID0gdGhpcy5zYXRBeGVzOwoJICAgIGNvbnN0IG1pblZlYyA9IHBvaW50c1swXTsKCgkgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAzOyBpKyspIHsKCSAgICAgIGNvbnN0IGF4aXMgPSBzYXRBeGVzW2ldOwoJICAgICAgY29uc3Qgc2IgPSBzYXRCb3VuZHNbaV07CgkgICAgICBjb25zdCBpbmRleCA9IDEgPDwgaTsKCSAgICAgIGNvbnN0IHBpID0gcG9pbnRzW2luZGV4XTsKCSAgICAgIGF4aXMuc3ViVmVjdG9ycyhtaW5WZWMsIHBpKTsKCSAgICAgIHNiLnNldEZyb21Qb2ludHMoYXhpcywgcG9pbnRzKTsKCSAgICB9CgoJICAgIGNvbnN0IGFsaWduZWRTYXRCb3VuZHMgPSB0aGlzLmFsaWduZWRTYXRCb3VuZHM7CgkgICAgYWxpZ25lZFNhdEJvdW5kc1swXS5zZXRGcm9tUG9pbnRzRmllbGQocG9pbnRzLCAneCcpOwoJICAgIGFsaWduZWRTYXRCb3VuZHNbMV0uc2V0RnJvbVBvaW50c0ZpZWxkKHBvaW50cywgJ3knKTsKCSAgICBhbGlnbmVkU2F0Qm91bmRzWzJdLnNldEZyb21Qb2ludHNGaWVsZChwb2ludHMsICd6Jyk7CgkgICAgdGhpcy5pbnZNYXRyaXguY29weSh0aGlzLm1hdHJpeCkuaW52ZXJ0KCk7CgkgICAgdGhpcy5uZWVkc1VwZGF0ZSA9IGZhbHNlOwoJICB9OwoJfSgpOwoKCU9yaWVudGVkQm94LnByb3RvdHlwZS5pbnRlcnNlY3RzQm94ID0gZnVuY3Rpb24gKCkgewoJICBjb25zdCBhYWJiQm91bmRzID0gbmV3IFNlcGFyYXRpbmdBeGlzQm91bmRzKCk7CgkgIHJldHVybiBmdW5jdGlvbiBpbnRlcnNlY3RzQm94KGJveCkgewoJICAgIC8vIFRPRE86IHNob3VsZCB0aGlzIGJlIGRvaW5nIFNBVCBhZ2FpbnN0IHRoZSBBQUJCPwoJICAgIGlmICh0aGlzLm5lZWRzVXBkYXRlKSB7CgkgICAgICB0aGlzLnVwZGF0ZSgpOwoJICAgIH0KCgkgICAgY29uc3QgbWluID0gYm94Lm1pbjsKCSAgICBjb25zdCBtYXggPSBib3gubWF4OwoJICAgIGNvbnN0IHNhdEJvdW5kcyA9IHRoaXMuc2F0Qm91bmRzOwoJICAgIGNvbnN0IHNhdEF4ZXMgPSB0aGlzLnNhdEF4ZXM7CgkgICAgY29uc3QgYWxpZ25lZFNhdEJvdW5kcyA9IHRoaXMuYWxpZ25lZFNhdEJvdW5kczsKCSAgICBhYWJiQm91bmRzLm1pbiA9IG1pbi54OwoJICAgIGFhYmJCb3VuZHMubWF4ID0gbWF4Lng7CgkgICAgaWYgKGFsaWduZWRTYXRCb3VuZHNbMF0uaXNTZXBhcmF0ZWQoYWFiYkJvdW5kcykpIHJldHVybiBmYWxzZTsKCSAgICBhYWJiQm91bmRzLm1pbiA9IG1pbi55OwoJICAgIGFhYmJCb3VuZHMubWF4ID0gbWF4Lnk7CgkgICAgaWYgKGFsaWduZWRTYXRCb3VuZHNbMV0uaXNTZXBhcmF0ZWQoYWFiYkJvdW5kcykpIHJldHVybiBmYWxzZTsKCSAgICBhYWJiQm91bmRzLm1pbiA9IG1pbi56OwoJICAgIGFhYmJCb3VuZHMubWF4ID0gbWF4Lno7CgkgICAgaWYgKGFsaWduZWRTYXRCb3VuZHNbMl0uaXNTZXBhcmF0ZWQoYWFiYkJvdW5kcykpIHJldHVybiBmYWxzZTsKCgkgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAzOyBpKyspIHsKCSAgICAgIGNvbnN0IGF4aXMgPSBzYXRBeGVzW2ldOwoJICAgICAgY29uc3Qgc2IgPSBzYXRCb3VuZHNbaV07CgkgICAgICBhYWJiQm91bmRzLnNldEZyb21Cb3goYXhpcywgYm94KTsKCSAgICAgIGlmIChzYi5pc1NlcGFyYXRlZChhYWJiQm91bmRzKSkgcmV0dXJuIGZhbHNlOwoJICAgIH0KCgkgICAgcmV0dXJuIHRydWU7CgkgIH07Cgl9KCk7CgoJT3JpZW50ZWRCb3gucHJvdG90eXBlLmludGVyc2VjdHNUcmlhbmdsZSA9IGZ1bmN0aW9uICgpIHsKCSAgY29uc3Qgc2FUcmkgPSBuZXcgU2VwYXJhdGluZ0F4aXNUcmlhbmdsZSgpOwoJICBjb25zdCBwb2ludHNBcnIgPSBuZXcgQXJyYXkoMyk7CgkgIGNvbnN0IGNhY2hlZFNhdEJvdW5kcyA9IG5ldyBTZXBhcmF0aW5nQXhpc0JvdW5kcygpOwoJICBjb25zdCBjYWNoZWRTYXRCb3VuZHMyID0gbmV3IFNlcGFyYXRpbmdBeGlzQm91bmRzKCk7CgkgIGNvbnN0IGNhY2hlZEF4aXMgPSBuZXcgVmVjdG9yMygpOwoJICByZXR1cm4gZnVuY3Rpb24gaW50ZXJzZWN0c1RyaWFuZ2xlKHRyaWFuZ2xlKSB7CgkgICAgaWYgKHRoaXMubmVlZHNVcGRhdGUpIHsKCSAgICAgIHRoaXMudXBkYXRlKCk7CgkgICAgfQoKCSAgICBpZiAoIXRyaWFuZ2xlLmlzU2VwYXJhdGluZ0F4aXNUcmlhbmdsZSkgewoJICAgICAgc2FUcmkuY29weSh0cmlhbmdsZSk7CgkgICAgICBzYVRyaS51cGRhdGUoKTsKCSAgICAgIHRyaWFuZ2xlID0gc2FUcmk7CgkgICAgfSBlbHNlIGlmICh0cmlhbmdsZS5uZWVkc1VwZGF0ZSkgewoJICAgICAgdHJpYW5nbGUudXBkYXRlKCk7CgkgICAgfQoKCSAgICBjb25zdCBzYXRCb3VuZHMgPSB0aGlzLnNhdEJvdW5kczsKCSAgICBjb25zdCBzYXRBeGVzID0gdGhpcy5zYXRBeGVzOwoJICAgIHBvaW50c0FyclswXSA9IHRyaWFuZ2xlLmE7CgkgICAgcG9pbnRzQXJyWzFdID0gdHJpYW5nbGUuYjsKCSAgICBwb2ludHNBcnJbMl0gPSB0cmlhbmdsZS5jOwoKCSAgICBmb3IgKGxldCBpID0gMDsgaSA8IDM7IGkrKykgewoJICAgICAgY29uc3Qgc2IgPSBzYXRCb3VuZHNbaV07CgkgICAgICBjb25zdCBzYSA9IHNhdEF4ZXNbaV07CgkgICAgICBjYWNoZWRTYXRCb3VuZHMuc2V0RnJvbVBvaW50cyhzYSwgcG9pbnRzQXJyKTsKCSAgICAgIGlmIChzYi5pc1NlcGFyYXRlZChjYWNoZWRTYXRCb3VuZHMpKSByZXR1cm4gZmFsc2U7CgkgICAgfQoKCSAgICBjb25zdCB0cmlTYXRCb3VuZHMgPSB0cmlhbmdsZS5zYXRCb3VuZHM7CgkgICAgY29uc3QgdHJpU2F0QXhlcyA9IHRyaWFuZ2xlLnNhdEF4ZXM7CgkgICAgY29uc3QgcG9pbnRzID0gdGhpcy5wb2ludHM7CgoJICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMzsgaSsrKSB7CgkgICAgICBjb25zdCBzYiA9IHRyaVNhdEJvdW5kc1tpXTsKCSAgICAgIGNvbnN0IHNhID0gdHJpU2F0QXhlc1tpXTsKCSAgICAgIGNhY2hlZFNhdEJvdW5kcy5zZXRGcm9tUG9pbnRzKHNhLCBwb2ludHMpOwoJICAgICAgaWYgKHNiLmlzU2VwYXJhdGVkKGNhY2hlZFNhdEJvdW5kcykpIHJldHVybiBmYWxzZTsKCSAgICB9IC8vIGNoZWNrIGNyb3NzZWQgYXhlcwoKCgkgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAzOyBpKyspIHsKCSAgICAgIGNvbnN0IHNhMSA9IHNhdEF4ZXNbaV07CgoJICAgICAgZm9yIChsZXQgaTIgPSAwOyBpMiA8IDQ7IGkyKyspIHsKCSAgICAgICAgY29uc3Qgc2EyID0gdHJpU2F0QXhlc1tpMl07CgkgICAgICAgIGNhY2hlZEF4aXMuY3Jvc3NWZWN0b3JzKHNhMSwgc2EyKTsKCSAgICAgICAgY2FjaGVkU2F0Qm91bmRzLnNldEZyb21Qb2ludHMoY2FjaGVkQXhpcywgcG9pbnRzQXJyKTsKCSAgICAgICAgY2FjaGVkU2F0Qm91bmRzMi5zZXRGcm9tUG9pbnRzKGNhY2hlZEF4aXMsIHBvaW50cyk7CgkgICAgICAgIGlmIChjYWNoZWRTYXRCb3VuZHMuaXNTZXBhcmF0ZWQoY2FjaGVkU2F0Qm91bmRzMikpIHJldHVybiBmYWxzZTsKCSAgICAgIH0KCSAgICB9CgoJICAgIHJldHVybiB0cnVlOwoJICB9OwoJfSgpOwoKCU9yaWVudGVkQm94LnByb3RvdHlwZS5jbG9zZXN0UG9pbnRUb1BvaW50ID0gZnVuY3Rpb24gKCkgewoJICByZXR1cm4gZnVuY3Rpb24gY2xvc2VzdFBvaW50VG9Qb2ludChwb2ludCwgdGFyZ2V0MSkgewoJICAgIGlmICh0aGlzLm5lZWRzVXBkYXRlKSB7CgkgICAgICB0aGlzLnVwZGF0ZSgpOwoJICAgIH0KCgkgICAgdGFyZ2V0MS5jb3B5KHBvaW50KS5hcHBseU1hdHJpeDQodGhpcy5pbnZNYXRyaXgpLmNsYW1wKHRoaXMubWluLCB0aGlzLm1heCkuYXBwbHlNYXRyaXg0KHRoaXMubWF0cml4KTsKCSAgICByZXR1cm4gdGFyZ2V0MTsKCSAgfTsKCX0oKTsKCglPcmllbnRlZEJveC5wcm90b3R5cGUuZGlzdGFuY2VUb1BvaW50ID0gZnVuY3Rpb24gKCkgewoJICBjb25zdCB0YXJnZXQgPSBuZXcgVmVjdG9yMygpOwoJICByZXR1cm4gZnVuY3Rpb24gZGlzdGFuY2VUb1BvaW50KHBvaW50KSB7CgkgICAgdGhpcy5jbG9zZXN0UG9pbnRUb1BvaW50KHBvaW50LCB0YXJnZXQpOwoJICAgIHJldHVybiBwb2ludC5kaXN0YW5jZVRvKHRhcmdldCk7CgkgIH07Cgl9KCk7CgoJT3JpZW50ZWRCb3gucHJvdG90eXBlLmRpc3RhbmNlVG9Cb3ggPSBmdW5jdGlvbiAoKSB7CgkgIGNvbnN0IHh5ekZpZWxkcyA9IFsneCcsICd5JywgJ3onXTsKCSAgY29uc3Qgc2VnbWVudHMxID0gbmV3IEFycmF5KDEyKS5maWxsKCkubWFwKCgpID0+IG5ldyBMaW5lMygpKTsKCSAgY29uc3Qgc2VnbWVudHMyID0gbmV3IEFycmF5KDEyKS5maWxsKCkubWFwKCgpID0+IG5ldyBMaW5lMygpKTsKCSAgY29uc3QgcG9pbnQxID0gbmV3IFZlY3RvcjMoKTsKCSAgY29uc3QgcG9pbnQyID0gbmV3IFZlY3RvcjMoKTsgLy8gZWFybHkgb3V0IGlmIHdlIGZpbmQgYSB2YWx1ZSBiZWxvdyB0aHJlc2hvbGQKCgkgIHJldHVybiBmdW5jdGlvbiBkaXN0YW5jZVRvQm94KGJveCwgdGhyZXNob2xkLCB0YXJnZXQxLCB0YXJnZXQyKSB7CgkgICAgaWYgKHRocmVzaG9sZCA9PT0gdm9pZCAwKSB7CgkgICAgICB0aHJlc2hvbGQgPSAwOwoJICAgIH0KCgkgICAgaWYgKHRhcmdldDEgPT09IHZvaWQgMCkgewoJICAgICAgdGFyZ2V0MSA9IG51bGw7CgkgICAgfQoKCSAgICBpZiAodGFyZ2V0MiA9PT0gdm9pZCAwKSB7CgkgICAgICB0YXJnZXQyID0gbnVsbDsKCSAgICB9CgoJICAgIGlmICh0aGlzLm5lZWRzVXBkYXRlKSB7CgkgICAgICB0aGlzLnVwZGF0ZSgpOwoJICAgIH0KCgkgICAgaWYgKHRoaXMuaW50ZXJzZWN0c0JveChib3gpKSB7CgkgICAgICBpZiAodGFyZ2V0MSB8fCB0YXJnZXQyKSB7CgkgICAgICAgIGJveC5nZXRDZW50ZXIocG9pbnQyKTsKCSAgICAgICAgdGhpcy5jbG9zZXN0UG9pbnRUb1BvaW50KHBvaW50MiwgcG9pbnQxKTsKCSAgICAgICAgYm94LmNsb3Nlc3RQb2ludFRvUG9pbnQocG9pbnQxLCBwb2ludDIpOwoJICAgICAgICBpZiAodGFyZ2V0MSkgdGFyZ2V0MS5jb3B5KHBvaW50MSk7CgkgICAgICAgIGlmICh0YXJnZXQyKSB0YXJnZXQyLmNvcHkocG9pbnQyKTsKCSAgICAgIH0KCgkgICAgICByZXR1cm4gMDsKCSAgICB9CgoJICAgIGNvbnN0IHRocmVzaG9sZDIgPSB0aHJlc2hvbGQgKiB0aHJlc2hvbGQ7CgkgICAgY29uc3QgbWluID0gYm94Lm1pbjsKCSAgICBjb25zdCBtYXggPSBib3gubWF4OwoJICAgIGNvbnN0IHBvaW50cyA9IHRoaXMucG9pbnRzOyAvLyBpdGVyYXRlIG92ZXIgZXZlcnkgZWRnZSBhbmQgY29tcGFyZSBkaXN0YW5jZXMKCgkgICAgbGV0IGNsb3Nlc3REaXN0YW5jZVNxID0gSW5maW5pdHk7IC8vIGNoZWNrIG92ZXIgYWxsIHRoZXNlIHBvaW50cwoKCSAgICBmb3IgKGxldCBpID0gMDsgaSA8IDg7IGkrKykgewoJICAgICAgY29uc3QgcCA9IHBvaW50c1tpXTsKCSAgICAgIHBvaW50Mi5jb3B5KHApLmNsYW1wKG1pbiwgbWF4KTsKCSAgICAgIGNvbnN0IGRpc3QgPSBwLmRpc3RhbmNlVG9TcXVhcmVkKHBvaW50Mik7CgoJICAgICAgaWYgKGRpc3QgPCBjbG9zZXN0RGlzdGFuY2VTcSkgewoJICAgICAgICBjbG9zZXN0RGlzdGFuY2VTcSA9IGRpc3Q7CgkgICAgICAgIGlmICh0YXJnZXQxKSB0YXJnZXQxLmNvcHkocCk7CgkgICAgICAgIGlmICh0YXJnZXQyKSB0YXJnZXQyLmNvcHkocG9pbnQyKTsKCSAgICAgICAgaWYgKGRpc3QgPCB0aHJlc2hvbGQyKSByZXR1cm4gTWF0aC5zcXJ0KGRpc3QpOwoJICAgICAgfQoJICAgIH0gLy8gZ2VuZXJhdGUgYW5kIGNoZWNrIGFsbCBsaW5lIHNlZ21lbnQgZGlzdGFuY2VzCgoKCSAgICBsZXQgY291bnQgPSAwOwoKCSAgICBmb3IgKGxldCBpID0gMDsgaSA8IDM7IGkrKykgewoJICAgICAgZm9yIChsZXQgaTEgPSAwOyBpMSA8PSAxOyBpMSsrKSB7CgkgICAgICAgIGZvciAobGV0IGkyID0gMDsgaTIgPD0gMTsgaTIrKykgewoJICAgICAgICAgIGNvbnN0IG5leHRJbmRleCA9IChpICsgMSkgJSAzOwoJICAgICAgICAgIGNvbnN0IG5leHRJbmRleDIgPSAoaSArIDIpICUgMzsgLy8gZ2V0IG9iYiBsaW5lIHNlZ21lbnRzCgoJICAgICAgICAgIGNvbnN0IGluZGV4ID0gaTEgPDwgbmV4dEluZGV4IHwgaTIgPDwgbmV4dEluZGV4MjsKCSAgICAgICAgICBjb25zdCBpbmRleDIgPSAxIDw8IGkgfCBpMSA8PCBuZXh0SW5kZXggfCBpMiA8PCBuZXh0SW5kZXgyOwoJICAgICAgICAgIGNvbnN0IHAxID0gcG9pbnRzW2luZGV4XTsKCSAgICAgICAgICBjb25zdCBwMiA9IHBvaW50c1tpbmRleDJdOwoJICAgICAgICAgIGNvbnN0IGxpbmUxID0gc2VnbWVudHMxW2NvdW50XTsKCSAgICAgICAgICBsaW5lMS5zZXQocDEsIHAyKTsgLy8gZ2V0IGFhYmIgbGluZSBzZWdtZW50cwoKCSAgICAgICAgICBjb25zdCBmMSA9IHh5ekZpZWxkc1tpXTsKCSAgICAgICAgICBjb25zdCBmMiA9IHh5ekZpZWxkc1tuZXh0SW5kZXhdOwoJICAgICAgICAgIGNvbnN0IGYzID0geHl6RmllbGRzW25leHRJbmRleDJdOwoJICAgICAgICAgIGNvbnN0IGxpbmUyID0gc2VnbWVudHMyW2NvdW50XTsKCSAgICAgICAgICBjb25zdCBzdGFydCA9IGxpbmUyLnN0YXJ0OwoJICAgICAgICAgIGNvbnN0IGVuZCA9IGxpbmUyLmVuZDsKCSAgICAgICAgICBzdGFydFtmMV0gPSBtaW5bZjFdOwoJICAgICAgICAgIHN0YXJ0W2YyXSA9IGkxID8gbWluW2YyXSA6IG1heFtmMl07CgkgICAgICAgICAgc3RhcnRbZjNdID0gaTIgPyBtaW5bZjNdIDogbWF4W2YyXTsKCSAgICAgICAgICBlbmRbZjFdID0gbWF4W2YxXTsKCSAgICAgICAgICBlbmRbZjJdID0gaTEgPyBtaW5bZjJdIDogbWF4W2YyXTsKCSAgICAgICAgICBlbmRbZjNdID0gaTIgPyBtaW5bZjNdIDogbWF4W2YyXTsKCSAgICAgICAgICBjb3VudCsrOwoJICAgICAgICB9CgkgICAgICB9CgkgICAgfSAvLyBjaGVjayBhbGwgdGhlIG90aGVyIGJveGVzIHBvaW50CgoKCSAgICBmb3IgKGxldCB4ID0gMDsgeCA8PSAxOyB4KyspIHsKCSAgICAgIGZvciAobGV0IHkgPSAwOyB5IDw9IDE7IHkrKykgewoJICAgICAgICBmb3IgKGxldCB6ID0gMDsgeiA8PSAxOyB6KyspIHsKCSAgICAgICAgICBwb2ludDIueCA9IHggPyBtYXgueCA6IG1pbi54OwoJICAgICAgICAgIHBvaW50Mi55ID0geSA/IG1heC55IDogbWluLnk7CgkgICAgICAgICAgcG9pbnQyLnogPSB6ID8gbWF4LnogOiBtaW4uejsKCSAgICAgICAgICB0aGlzLmNsb3Nlc3RQb2ludFRvUG9pbnQocG9pbnQyLCBwb2ludDEpOwoJICAgICAgICAgIGNvbnN0IGRpc3QgPSBwb2ludDIuZGlzdGFuY2VUb1NxdWFyZWQocG9pbnQxKTsKCgkgICAgICAgICAgaWYgKGRpc3QgPCBjbG9zZXN0RGlzdGFuY2VTcSkgewoJICAgICAgICAgICAgY2xvc2VzdERpc3RhbmNlU3EgPSBkaXN0OwoJICAgICAgICAgICAgaWYgKHRhcmdldDEpIHRhcmdldDEuY29weShwb2ludDEpOwoJICAgICAgICAgICAgaWYgKHRhcmdldDIpIHRhcmdldDIuY29weShwb2ludDIpOwoJICAgICAgICAgICAgaWYgKGRpc3QgPCB0aHJlc2hvbGQyKSByZXR1cm4gTWF0aC5zcXJ0KGRpc3QpOwoJICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgfQoJICAgIH0KCgkgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMjsgaSsrKSB7CgkgICAgICBjb25zdCBsMSA9IHNlZ21lbnRzMVtpXTsKCgkgICAgICBmb3IgKGxldCBpMiA9IDA7IGkyIDwgMTI7IGkyKyspIHsKCSAgICAgICAgY29uc3QgbDIgPSBzZWdtZW50czJbaTJdOwoJICAgICAgICBjbG9zZXN0UG9pbnRzU2VnbWVudFRvU2VnbWVudChsMSwgbDIsIHBvaW50MSwgcG9pbnQyKTsKCSAgICAgICAgY29uc3QgZGlzdCA9IHBvaW50MS5kaXN0YW5jZVRvU3F1YXJlZChwb2ludDIpOwoKCSAgICAgICAgaWYgKGRpc3QgPCBjbG9zZXN0RGlzdGFuY2VTcSkgewoJICAgICAgICAgIGNsb3Nlc3REaXN0YW5jZVNxID0gZGlzdDsKCSAgICAgICAgICBpZiAodGFyZ2V0MSkgdGFyZ2V0MS5jb3B5KHBvaW50MSk7CgkgICAgICAgICAgaWYgKHRhcmdldDIpIHRhcmdldDIuY29weShwb2ludDIpOwoJICAgICAgICAgIGlmIChkaXN0IDwgdGhyZXNob2xkMikgcmV0dXJuIE1hdGguc3FydChkaXN0KTsKCSAgICAgICAgfQoJICAgICAgfQoJICAgIH0KCgkgICAgcmV0dXJuIE1hdGguc3FydChjbG9zZXN0RGlzdGFuY2VTcSk7CgkgIH07Cgl9KCk7CgoJLy8gaHR0cHM6Ly9naXRodWIuY29tL21yZG9vYi90aHJlZS5qcy9ibG9iLzBhYTg3Yzk5OWZlNjFlMjE2YzExMzNmYmE3YTk1NzcyYjUwM2VkZGYvc3JjL29iamVjdHMvTWVzaC5qcyNMMTE1CgoJY29uc3QgdkEgPSAvKiBAX19QVVJFX18gKi9uZXcgVmVjdG9yMygpOwoJY29uc3QgdkIgPSAvKiBAX19QVVJFX18gKi9uZXcgVmVjdG9yMygpOwoJY29uc3QgdkMgPSAvKiBAX19QVVJFX18gKi9uZXcgVmVjdG9yMygpOwoJY29uc3QgdXZBID0gLyogQF9fUFVSRV9fICovbmV3IFZlY3RvcjIoKTsKCWNvbnN0IHV2QiA9IC8qIEBfX1BVUkVfXyAqL25ldyBWZWN0b3IyKCk7Cgljb25zdCB1dkMgPSAvKiBAX19QVVJFX18gKi9uZXcgVmVjdG9yMigpOwoJY29uc3QgaW50ZXJzZWN0aW9uUG9pbnQgPSAvKiBAX19QVVJFX18gKi9uZXcgVmVjdG9yMygpOwoKCWZ1bmN0aW9uIGNoZWNrSW50ZXJzZWN0aW9uKHJheSwgcEEsIHBCLCBwQywgcG9pbnQsIHNpZGUpIHsKCSAgbGV0IGludGVyc2VjdDsKCgkgIGlmIChzaWRlID09PSBCYWNrU2lkZSkgewoJICAgIGludGVyc2VjdCA9IHJheS5pbnRlcnNlY3RUcmlhbmdsZShwQywgcEIsIHBBLCB0cnVlLCBwb2ludCk7CgkgIH0gZWxzZSB7CgkgICAgaW50ZXJzZWN0ID0gcmF5LmludGVyc2VjdFRyaWFuZ2xlKHBBLCBwQiwgcEMsIHNpZGUgIT09IERvdWJsZVNpZGUsIHBvaW50KTsKCSAgfQoKCSAgaWYgKGludGVyc2VjdCA9PT0gbnVsbCkgcmV0dXJuIG51bGw7CgkgIGNvbnN0IGRpc3RhbmNlID0gcmF5Lm9yaWdpbi5kaXN0YW5jZVRvKHBvaW50KTsKCSAgcmV0dXJuIHsKCSAgICBkaXN0YW5jZTogZGlzdGFuY2UsCgkgICAgcG9pbnQ6IHBvaW50LmNsb25lKCkKCSAgfTsKCX0KCglmdW5jdGlvbiBjaGVja0J1ZmZlckdlb21ldHJ5SW50ZXJzZWN0aW9uKHJheSwgcG9zaXRpb24sIHV2LCBhLCBiLCBjLCBzaWRlKSB7CgkgIHZBLmZyb21CdWZmZXJBdHRyaWJ1dGUocG9zaXRpb24sIGEpOwoJICB2Qi5mcm9tQnVmZmVyQXR0cmlidXRlKHBvc2l0aW9uLCBiKTsKCSAgdkMuZnJvbUJ1ZmZlckF0dHJpYnV0ZShwb3NpdGlvbiwgYyk7CgkgIGNvbnN0IGludGVyc2VjdGlvbiA9IGNoZWNrSW50ZXJzZWN0aW9uKHJheSwgdkEsIHZCLCB2QywgaW50ZXJzZWN0aW9uUG9pbnQsIHNpZGUpOwoKCSAgaWYgKGludGVyc2VjdGlvbikgewoJICAgIGlmICh1dikgewoJICAgICAgdXZBLmZyb21CdWZmZXJBdHRyaWJ1dGUodXYsIGEpOwoJICAgICAgdXZCLmZyb21CdWZmZXJBdHRyaWJ1dGUodXYsIGIpOwoJICAgICAgdXZDLmZyb21CdWZmZXJBdHRyaWJ1dGUodXYsIGMpOwoJICAgICAgaW50ZXJzZWN0aW9uLnV2ID0gVHJpYW5nbGUuZ2V0VVYoaW50ZXJzZWN0aW9uUG9pbnQsIHZBLCB2QiwgdkMsIHV2QSwgdXZCLCB1dkMsIG5ldyBWZWN0b3IyKCkpOwoJICAgIH0KCgkgICAgY29uc3QgZmFjZSA9IHsKCSAgICAgIGE6IGEsCgkgICAgICBiOiBiLAoJICAgICAgYzogYywKCSAgICAgIG5vcm1hbDogbmV3IFZlY3RvcjMoKSwKCSAgICAgIG1hdGVyaWFsSW5kZXg6IDAKCSAgICB9OwoJICAgIFRyaWFuZ2xlLmdldE5vcm1hbCh2QSwgdkIsIHZDLCBmYWNlLm5vcm1hbCk7CgkgICAgaW50ZXJzZWN0aW9uLmZhY2UgPSBmYWNlOwoJICAgIGludGVyc2VjdGlvbi5mYWNlSW5kZXggPSBhOwoJICB9CgoJICByZXR1cm4gaW50ZXJzZWN0aW9uOwoJfSAvLyBodHRwczovL2dpdGh1Yi5jb20vbXJkb29iL3RocmVlLmpzL2Jsb2IvMGFhODdjOTk5ZmU2MWUyMTZjMTEzM2ZiYTdhOTU3NzJiNTAzZWRkZi9zcmMvb2JqZWN0cy9NZXNoLmpzI0wyNTgKCgoJZnVuY3Rpb24gaW50ZXJzZWN0VHJpKGdlbywgc2lkZSwgcmF5LCB0cmksIGludGVyc2VjdGlvbnMpIHsKCSAgY29uc3QgdHJpT2Zmc2V0ID0gdHJpICogMzsKCSAgY29uc3QgYSA9IGdlby5pbmRleC5nZXRYKHRyaU9mZnNldCk7CgkgIGNvbnN0IGIgPSBnZW8uaW5kZXguZ2V0WCh0cmlPZmZzZXQgKyAxKTsKCSAgY29uc3QgYyA9IGdlby5pbmRleC5nZXRYKHRyaU9mZnNldCArIDIpOwoJICBjb25zdCBpbnRlcnNlY3Rpb24gPSBjaGVja0J1ZmZlckdlb21ldHJ5SW50ZXJzZWN0aW9uKHJheSwgZ2VvLmF0dHJpYnV0ZXMucG9zaXRpb24sIGdlby5hdHRyaWJ1dGVzLnV2LCBhLCBiLCBjLCBzaWRlKTsKCgkgIGlmIChpbnRlcnNlY3Rpb24pIHsKCSAgICBpbnRlcnNlY3Rpb24uZmFjZUluZGV4ID0gdHJpOwoJICAgIGlmIChpbnRlcnNlY3Rpb25zKSBpbnRlcnNlY3Rpb25zLnB1c2goaW50ZXJzZWN0aW9uKTsKCSAgICByZXR1cm4gaW50ZXJzZWN0aW9uOwoJICB9CgoJICByZXR1cm4gbnVsbDsKCX0KCglmdW5jdGlvbiBpbnRlcnNlY3RUcmlzKGdlbywgc2lkZSwgcmF5LCBvZmZzZXQsIGNvdW50LCBpbnRlcnNlY3Rpb25zKSB7CgkgIGZvciAobGV0IGkgPSBvZmZzZXQsIGVuZCA9IG9mZnNldCArIGNvdW50OyBpIDwgZW5kOyBpKyspIHsKCSAgICBpbnRlcnNlY3RUcmkoZ2VvLCBzaWRlLCByYXksIGksIGludGVyc2VjdGlvbnMpOwoJICB9Cgl9CglmdW5jdGlvbiBpbnRlcnNlY3RDbG9zZXN0VHJpKGdlbywgc2lkZSwgcmF5LCBvZmZzZXQsIGNvdW50KSB7CgkgIGxldCBkaXN0ID0gSW5maW5pdHk7CgkgIGxldCByZXMgPSBudWxsOwoKCSAgZm9yIChsZXQgaSA9IG9mZnNldCwgZW5kID0gb2Zmc2V0ICsgY291bnQ7IGkgPCBlbmQ7IGkrKykgewoJICAgIGNvbnN0IGludGVyc2VjdGlvbiA9IGludGVyc2VjdFRyaShnZW8sIHNpZGUsIHJheSwgaSk7CgoJICAgIGlmIChpbnRlcnNlY3Rpb24gJiYgaW50ZXJzZWN0aW9uLmRpc3RhbmNlIDwgZGlzdCkgewoJICAgICAgcmVzID0gaW50ZXJzZWN0aW9uOwoJICAgICAgZGlzdCA9IGludGVyc2VjdGlvbi5kaXN0YW5jZTsKCSAgICB9CgkgIH0KCgkgIHJldHVybiByZXM7Cgl9IC8vIGNvbnZlcnRzIHRoZSBnaXZlbiBCVkggcmF5Y2FzdCBpbnRlcnNlY3Rpb24gdG8gYWxpZ24gd2l0aCB0aGUgdGhyZWUuanMgcmF5Y2FzdAoJLy8gc3RydWN0dXJlIChpbmNsdWRlIG9iamVjdCwgd29ybGQgc3BhY2UgZGlzdGFuY2UgYW5kIHBvaW50KS4KCglmdW5jdGlvbiBjb252ZXJ0UmF5Y2FzdEludGVyc2VjdChoaXQsIG9iamVjdCwgcmF5Y2FzdGVyKSB7CgkgIGlmIChoaXQgPT09IG51bGwpIHsKCSAgICByZXR1cm4gbnVsbDsKCSAgfQoKCSAgaGl0LnBvaW50LmFwcGx5TWF0cml4NChvYmplY3QubWF0cml4V29ybGQpOwoJICBoaXQuZGlzdGFuY2UgPSBoaXQucG9pbnQuZGlzdGFuY2VUbyhyYXljYXN0ZXIucmF5Lm9yaWdpbik7CgkgIGhpdC5vYmplY3QgPSBvYmplY3Q7CgoJICBpZiAoaGl0LmRpc3RhbmNlIDwgcmF5Y2FzdGVyLm5lYXIgfHwgaGl0LmRpc3RhbmNlID4gcmF5Y2FzdGVyLmZhcikgewoJICAgIHJldHVybiBudWxsOwoJICB9IGVsc2UgewoJICAgIHJldHVybiBoaXQ7CgkgIH0KCX0KCglmdW5jdGlvbiBzZXRUcmlhbmdsZSh0cmksIGksIGluZGV4LCBwb3MpIHsKCSAgY29uc3QgdGEgPSB0cmkuYTsKCSAgY29uc3QgdGIgPSB0cmkuYjsKCSAgY29uc3QgdGMgPSB0cmkuYzsKCSAgbGV0IGkwID0gaTsKCSAgbGV0IGkxID0gaSArIDE7CgkgIGxldCBpMiA9IGkgKyAyOwoKCSAgaWYgKGluZGV4KSB7CgkgICAgaTAgPSBpbmRleC5nZXRYKGkpOwoJICAgIGkxID0gaW5kZXguZ2V0WChpICsgMSk7CgkgICAgaTIgPSBpbmRleC5nZXRYKGkgKyAyKTsKCSAgfQoKCSAgdGEueCA9IHBvcy5nZXRYKGkwKTsKCSAgdGEueSA9IHBvcy5nZXRZKGkwKTsKCSAgdGEueiA9IHBvcy5nZXRaKGkwKTsKCSAgdGIueCA9IHBvcy5nZXRYKGkxKTsKCSAgdGIueSA9IHBvcy5nZXRZKGkxKTsKCSAgdGIueiA9IHBvcy5nZXRaKGkxKTsKCSAgdGMueCA9IHBvcy5nZXRYKGkyKTsKCSAgdGMueSA9IHBvcy5nZXRZKGkyKTsKCSAgdGMueiA9IHBvcy5nZXRaKGkyKTsKCX0KCWZ1bmN0aW9uIGl0ZXJhdGVPdmVyVHJpYW5nbGVzKG9mZnNldCwgY291bnQsIGdlb21ldHJ5LCBpbnRlcnNlY3RzVHJpYW5nbGVGdW5jLCBjb250YWluZWQsIGRlcHRoLCB0cmlhbmdsZSkgewoJICBjb25zdCBpbmRleCA9IGdlb21ldHJ5LmluZGV4OwoJICBjb25zdCBwb3MgPSBnZW9tZXRyeS5hdHRyaWJ1dGVzLnBvc2l0aW9uOwoKCSAgZm9yIChsZXQgaSA9IG9mZnNldCwgbCA9IGNvdW50ICsgb2Zmc2V0OyBpIDwgbDsgaSsrKSB7CgkgICAgc2V0VHJpYW5nbGUodHJpYW5nbGUsIGkgKiAzLCBpbmRleCwgcG9zKTsKCSAgICB0cmlhbmdsZS5uZWVkc1VwZGF0ZSA9IHRydWU7CgoJICAgIGlmIChpbnRlcnNlY3RzVHJpYW5nbGVGdW5jKHRyaWFuZ2xlLCBpLCBjb250YWluZWQsIGRlcHRoKSkgewoJICAgICAgcmV0dXJuIHRydWU7CgkgICAgfQoJICB9CgoJICByZXR1cm4gZmFsc2U7Cgl9CgoJY2xhc3MgUHJpbWl0aXZlUG9vbCB7CgkgIGNvbnN0cnVjdG9yKGdldE5ld1ByaW1pdGl2ZSkgewoJICAgIHRoaXMuX2dldE5ld1ByaW1pdGl2ZSA9IGdldE5ld1ByaW1pdGl2ZTsKCSAgICB0aGlzLl9wcmltaXRpdmVzID0gW107CgkgIH0KCgkgIGdldFByaW1pdGl2ZSgpIHsKCSAgICBjb25zdCBwcmltaXRpdmVzID0gdGhpcy5fcHJpbWl0aXZlczsKCgkgICAgaWYgKHByaW1pdGl2ZXMubGVuZ3RoID09PSAwKSB7CgkgICAgICByZXR1cm4gdGhpcy5fZ2V0TmV3UHJpbWl0aXZlKCk7CgkgICAgfSBlbHNlIHsKCSAgICAgIHJldHVybiBwcmltaXRpdmVzLnBvcCgpOwoJICAgIH0KCSAgfQoKCSAgcmVsZWFzZVByaW1pdGl2ZShwcmltaXRpdmUpIHsKCSAgICB0aGlzLl9wcmltaXRpdmVzLnB1c2gocHJpbWl0aXZlKTsKCSAgfQoKCX0KCglmdW5jdGlvbiBJU19MRUFGKG4xNiwgdWludDE2QXJyYXkpIHsKCSAgcmV0dXJuIHVpbnQxNkFycmF5W24xNiArIDE1XSA9PT0gMHhGRkZGOwoJfQoJZnVuY3Rpb24gT0ZGU0VUKG4zMiwgdWludDMyQXJyYXkpIHsKCSAgcmV0dXJuIHVpbnQzMkFycmF5W24zMiArIDZdOwoJfQoJZnVuY3Rpb24gQ09VTlQobjE2LCB1aW50MTZBcnJheSkgewoJICByZXR1cm4gdWludDE2QXJyYXlbbjE2ICsgMTRdOwoJfQoJZnVuY3Rpb24gTEVGVF9OT0RFKG4zMikgewoJICByZXR1cm4gbjMyICsgODsKCX0KCWZ1bmN0aW9uIFJJR0hUX05PREUobjMyLCB1aW50MzJBcnJheSkgewoJICByZXR1cm4gdWludDMyQXJyYXlbbjMyICsgNl07Cgl9CglmdW5jdGlvbiBTUExJVF9BWElTKG4zMiwgdWludDMyQXJyYXkpIHsKCSAgcmV0dXJuIHVpbnQzMkFycmF5W24zMiArIDddOwoJfQoJZnVuY3Rpb24gQk9VTkRJTkdfREFUQV9JTkRFWChuMzIpIHsKCSAgcmV0dXJuIG4zMjsKCX0KCgljb25zdCBib3VuZGluZ0JveCA9IG5ldyBCb3gzKCk7Cgljb25zdCBib3hJbnRlcnNlY3Rpb24gPSBuZXcgVmVjdG9yMygpOwoJY29uc3QgeHl6RmllbGRzID0gWyd4JywgJ3knLCAneiddOwoJZnVuY3Rpb24gcmF5Y2FzdChub2RlSW5kZXgzMiwgZ2VvbWV0cnksIHNpZGUsIHJheSwgaW50ZXJzZWN0cykgewoJICBsZXQgbm9kZUluZGV4MTYgPSBub2RlSW5kZXgzMiAqIDIsCgkgICAgICBmbG9hdDMyQXJyYXkgPSBfZmxvYXQzMkFycmF5LAoJICAgICAgdWludDE2QXJyYXkgPSBfdWludDE2QXJyYXksCgkgICAgICB1aW50MzJBcnJheSA9IF91aW50MzJBcnJheTsKCSAgY29uc3QgaXNMZWFmID0gSVNfTEVBRihub2RlSW5kZXgxNiwgdWludDE2QXJyYXkpOwoKCSAgaWYgKGlzTGVhZikgewoJICAgIGNvbnN0IG9mZnNldCA9IE9GRlNFVChub2RlSW5kZXgzMiwgdWludDMyQXJyYXkpOwoJICAgIGNvbnN0IGNvdW50ID0gQ09VTlQobm9kZUluZGV4MTYsIHVpbnQxNkFycmF5KTsKCSAgICBpbnRlcnNlY3RUcmlzKGdlb21ldHJ5LCBzaWRlLCByYXksIG9mZnNldCwgY291bnQsIGludGVyc2VjdHMpOwoJICB9IGVsc2UgewoJICAgIGNvbnN0IGxlZnRJbmRleCA9IExFRlRfTk9ERShub2RlSW5kZXgzMik7CgoJICAgIGlmIChpbnRlcnNlY3RSYXkobGVmdEluZGV4LCBmbG9hdDMyQXJyYXksIHJheSwgYm94SW50ZXJzZWN0aW9uKSkgewoJICAgICAgcmF5Y2FzdChsZWZ0SW5kZXgsIGdlb21ldHJ5LCBzaWRlLCByYXksIGludGVyc2VjdHMpOwoJICAgIH0KCgkgICAgY29uc3QgcmlnaHRJbmRleCA9IFJJR0hUX05PREUobm9kZUluZGV4MzIsIHVpbnQzMkFycmF5KTsKCgkgICAgaWYgKGludGVyc2VjdFJheShyaWdodEluZGV4LCBmbG9hdDMyQXJyYXksIHJheSwgYm94SW50ZXJzZWN0aW9uKSkgewoJICAgICAgcmF5Y2FzdChyaWdodEluZGV4LCBnZW9tZXRyeSwgc2lkZSwgcmF5LCBpbnRlcnNlY3RzKTsKCSAgICB9CgkgIH0KCX0KCWZ1bmN0aW9uIHJheWNhc3RGaXJzdChub2RlSW5kZXgzMiwgZ2VvbWV0cnksIHNpZGUsIHJheSkgewoJICBsZXQgbm9kZUluZGV4MTYgPSBub2RlSW5kZXgzMiAqIDIsCgkgICAgICBmbG9hdDMyQXJyYXkgPSBfZmxvYXQzMkFycmF5LAoJICAgICAgdWludDE2QXJyYXkgPSBfdWludDE2QXJyYXksCgkgICAgICB1aW50MzJBcnJheSA9IF91aW50MzJBcnJheTsKCSAgY29uc3QgaXNMZWFmID0gSVNfTEVBRihub2RlSW5kZXgxNiwgdWludDE2QXJyYXkpOwoKCSAgaWYgKGlzTGVhZikgewoJICAgIGNvbnN0IG9mZnNldCA9IE9GRlNFVChub2RlSW5kZXgzMiwgdWludDMyQXJyYXkpOwoJICAgIGNvbnN0IGNvdW50ID0gQ09VTlQobm9kZUluZGV4MTYsIHVpbnQxNkFycmF5KTsKCSAgICByZXR1cm4gaW50ZXJzZWN0Q2xvc2VzdFRyaShnZW9tZXRyeSwgc2lkZSwgcmF5LCBvZmZzZXQsIGNvdW50KTsKCSAgfSBlbHNlIHsKCSAgICAvLyBjb25zaWRlciB0aGUgcG9zaXRpb24gb2YgdGhlIHNwbGl0IHBsYW5lIHdpdGggcmVzcGVjdCB0byB0aGUgb25jb21pbmcgcmF5OyB3aGljaGV2ZXIgZGlyZWN0aW9uCgkgICAgLy8gdGhlIHJheSBpcyBjb21pbmcgZnJvbSwgbG9vayBmb3IgYW4gaW50ZXJzZWN0aW9uIGFtb25nIHRoYXQgc2lkZSBvZiB0aGUgdHJlZSBmaXJzdAoJICAgIGNvbnN0IHNwbGl0QXhpcyA9IFNQTElUX0FYSVMobm9kZUluZGV4MzIsIHVpbnQzMkFycmF5KTsKCSAgICBjb25zdCB4eXpBeGlzID0geHl6RmllbGRzW3NwbGl0QXhpc107CgkgICAgY29uc3QgcmF5RGlyID0gcmF5LmRpcmVjdGlvblt4eXpBeGlzXTsKCSAgICBjb25zdCBsZWZ0VG9SaWdodCA9IHJheURpciA+PSAwOyAvLyBjMSBpcyB0aGUgY2hpbGQgdG8gY2hlY2sgZmlyc3QKCgkgICAgbGV0IGMxLCBjMjsKCgkgICAgaWYgKGxlZnRUb1JpZ2h0KSB7CgkgICAgICBjMSA9IExFRlRfTk9ERShub2RlSW5kZXgzMik7CgkgICAgICBjMiA9IFJJR0hUX05PREUobm9kZUluZGV4MzIsIHVpbnQzMkFycmF5KTsKCSAgICB9IGVsc2UgewoJICAgICAgYzEgPSBSSUdIVF9OT0RFKG5vZGVJbmRleDMyLCB1aW50MzJBcnJheSk7CgkgICAgICBjMiA9IExFRlRfTk9ERShub2RlSW5kZXgzMik7CgkgICAgfQoKCSAgICBjb25zdCBjMUludGVyc2VjdGlvbiA9IGludGVyc2VjdFJheShjMSwgZmxvYXQzMkFycmF5LCByYXksIGJveEludGVyc2VjdGlvbik7CgkgICAgY29uc3QgYzFSZXN1bHQgPSBjMUludGVyc2VjdGlvbiA/IHJheWNhc3RGaXJzdChjMSwgZ2VvbWV0cnksIHNpZGUsIHJheSkgOiBudWxsOyAvLyBpZiB3ZSBnb3QgYW4gaW50ZXJzZWN0aW9uIGluIHRoZSBmaXJzdCBub2RlIGFuZCBpdCdzIGNsb3NlciB0aGFuIHRoZSBzZWNvbmQgbm9kZSdzIGJvdW5kaW5nCgkgICAgLy8gYm94LCB3ZSBkb24ndCBuZWVkIHRvIGNvbnNpZGVyIHRoZSBzZWNvbmQgbm9kZSBiZWNhdXNlIGl0IGNvdWxkbid0IHBvc3NpYmx5IGJlIGEgYmV0dGVyIHJlc3VsdAoKCSAgICBpZiAoYzFSZXN1bHQpIHsKCSAgICAgIC8vIGNoZWNrIGlmIHRoZSBwb2ludCBpcyB3aXRoaW4gdGhlIHNlY29uZCBib3VuZHMKCSAgICAgIC8vICJwb2ludCIgaXMgaW4gdGhlIGxvY2FsIGZyYW1lIG9mIHRoZSBidmgKCSAgICAgIGNvbnN0IHBvaW50ID0gYzFSZXN1bHQucG9pbnRbeHl6QXhpc107CgkgICAgICBjb25zdCBpc091dHNpZGUgPSBsZWZ0VG9SaWdodCA/IHBvaW50IDw9IGZsb2F0MzJBcnJheVtjMiArIHNwbGl0QXhpc10gOiAvLyBtaW4gYm91bmRpbmcgZGF0YQoJICAgICAgcG9pbnQgPj0gZmxvYXQzMkFycmF5W2MyICsgc3BsaXRBeGlzICsgM107IC8vIG1heCBib3VuZGluZyBkYXRhCgoJICAgICAgaWYgKGlzT3V0c2lkZSkgewoJICAgICAgICByZXR1cm4gYzFSZXN1bHQ7CgkgICAgICB9CgkgICAgfSAvLyBlaXRoZXIgdGhlcmUgd2FzIG5vIGludGVyc2VjdGlvbiBpbiB0aGUgZmlyc3Qgbm9kZSwgb3IgdGhlcmUgY291bGQgc3RpbGwgYmUgYSBjbG9zZXIKCSAgICAvLyBpbnRlcnNlY3Rpb24gaW4gdGhlIHNlY29uZCwgc28gY2hlY2sgdGhlIHNlY29uZCBub2RlIGFuZCB0aGVuIHRha2UgdGhlIGJldHRlciBvZiB0aGUgdHdvCgoKCSAgICBjb25zdCBjMkludGVyc2VjdGlvbiA9IGludGVyc2VjdFJheShjMiwgZmxvYXQzMkFycmF5LCByYXksIGJveEludGVyc2VjdGlvbik7CgkgICAgY29uc3QgYzJSZXN1bHQgPSBjMkludGVyc2VjdGlvbiA/IHJheWNhc3RGaXJzdChjMiwgZ2VvbWV0cnksIHNpZGUsIHJheSkgOiBudWxsOwoKCSAgICBpZiAoYzFSZXN1bHQgJiYgYzJSZXN1bHQpIHsKCSAgICAgIHJldHVybiBjMVJlc3VsdC5kaXN0YW5jZSA8PSBjMlJlc3VsdC5kaXN0YW5jZSA/IGMxUmVzdWx0IDogYzJSZXN1bHQ7CgkgICAgfSBlbHNlIHsKCSAgICAgIHJldHVybiBjMVJlc3VsdCB8fCBjMlJlc3VsdCB8fCBudWxsOwoJICAgIH0KCSAgfQoJfQoJY29uc3Qgc2hhcGVjYXN0ID0gZnVuY3Rpb24gKCkgewoJICBsZXQgX2JveDEsIF9ib3gyOwoKCSAgY29uc3QgYm94U3RhY2sgPSBbXTsKCSAgY29uc3QgYm94UG9vbCA9IG5ldyBQcmltaXRpdmVQb29sKCgpID0+IG5ldyBCb3gzKCkpOwoJICByZXR1cm4gZnVuY3Rpb24gc2hhcGVjYXN0KCkgewoJICAgIF9ib3gxID0gYm94UG9vbC5nZXRQcmltaXRpdmUoKTsKCSAgICBfYm94MiA9IGJveFBvb2wuZ2V0UHJpbWl0aXZlKCk7CgkgICAgYm94U3RhY2sucHVzaChfYm94MSwgX2JveDIpOwoJICAgIGNvbnN0IHJlc3VsdCA9IHNoYXBlY2FzdFRyYXZlcnNlKC4uLmFyZ3VtZW50cyk7CgkgICAgYm94UG9vbC5yZWxlYXNlUHJpbWl0aXZlKF9ib3gxKTsKCSAgICBib3hQb29sLnJlbGVhc2VQcmltaXRpdmUoX2JveDIpOwoJICAgIGJveFN0YWNrLnBvcCgpOwoJICAgIGJveFN0YWNrLnBvcCgpOwoJICAgIGNvbnN0IGxlbmd0aCA9IGJveFN0YWNrLmxlbmd0aDsKCgkgICAgaWYgKGxlbmd0aCA+IDApIHsKCSAgICAgIF9ib3gyID0gYm94U3RhY2tbbGVuZ3RoIC0gMV07CgkgICAgICBfYm94MSA9IGJveFN0YWNrW2xlbmd0aCAtIDJdOwoJICAgIH0KCgkgICAgcmV0dXJuIHJlc3VsdDsKCSAgfTsKCgkgIGZ1bmN0aW9uIHNoYXBlY2FzdFRyYXZlcnNlKG5vZGVJbmRleDMyLCBnZW9tZXRyeSwgaW50ZXJzZWN0c0JvdW5kc0Z1bmMsIGludGVyc2VjdHNSYW5nZUZ1bmMsIG5vZGVTY29yZUZ1bmMsIG5vZGVJbmRleEJ5dGVPZmZzZXQsIC8vIG9mZnNldCBmb3IgdW5pcXVlIG5vZGUgaWRlbnRpZmllcgoJICBkZXB0aCkgewoJICAgIGlmIChub2RlU2NvcmVGdW5jID09PSB2b2lkIDApIHsKCSAgICAgIG5vZGVTY29yZUZ1bmMgPSBudWxsOwoJICAgIH0KCgkgICAgaWYgKG5vZGVJbmRleEJ5dGVPZmZzZXQgPT09IHZvaWQgMCkgewoJICAgICAgbm9kZUluZGV4Qnl0ZU9mZnNldCA9IDA7CgkgICAgfQoKCSAgICBpZiAoZGVwdGggPT09IHZvaWQgMCkgewoJICAgICAgZGVwdGggPSAwOwoJICAgIH0KCgkgICAgLy8gRGVmaW5lIHRoZXNlIGluc2lkZSB0aGUgZnVuY3Rpb24gc28gaXQgaGFzIGFjY2VzcyB0byB0aGUgbG9jYWwgdmFyaWFibGVzIG5lZWRlZAoJICAgIC8vIHdoZW4gY29udmVydGluZyB0byB0aGUgYnVmZmVyIGVxdWl2YWxlbnRzCgkgICAgZnVuY3Rpb24gZ2V0TGVmdE9mZnNldChub2RlSW5kZXgzMikgewoJICAgICAgbGV0IG5vZGVJbmRleDE2ID0gbm9kZUluZGV4MzIgKiAyLAoJICAgICAgICAgIHVpbnQxNkFycmF5ID0gX3VpbnQxNkFycmF5LAoJICAgICAgICAgIHVpbnQzMkFycmF5ID0gX3VpbnQzMkFycmF5OyAvLyB0cmF2ZXJzZSB1bnRpbCB3ZSBmaW5kIGEgbGVhZgoKCSAgICAgIHdoaWxlICghSVNfTEVBRihub2RlSW5kZXgxNiwgdWludDE2QXJyYXkpKSB7CgkgICAgICAgIG5vZGVJbmRleDMyID0gTEVGVF9OT0RFKG5vZGVJbmRleDMyKTsKCSAgICAgICAgbm9kZUluZGV4MTYgPSBub2RlSW5kZXgzMiAqIDI7CgkgICAgICB9CgoJICAgICAgcmV0dXJuIE9GRlNFVChub2RlSW5kZXgzMiwgdWludDMyQXJyYXkpOwoJICAgIH0KCgkgICAgZnVuY3Rpb24gZ2V0UmlnaHRFbmRPZmZzZXQobm9kZUluZGV4MzIpIHsKCSAgICAgIGxldCBub2RlSW5kZXgxNiA9IG5vZGVJbmRleDMyICogMiwKCSAgICAgICAgICB1aW50MTZBcnJheSA9IF91aW50MTZBcnJheSwKCSAgICAgICAgICB1aW50MzJBcnJheSA9IF91aW50MzJBcnJheTsgLy8gdHJhdmVyc2UgdW50aWwgd2UgZmluZCBhIGxlYWYKCgkgICAgICB3aGlsZSAoIUlTX0xFQUYobm9kZUluZGV4MTYsIHVpbnQxNkFycmF5KSkgewoJICAgICAgICAvLyBhZGp1c3Qgb2Zmc2V0IHRvIHBvaW50IHRvIHRoZSByaWdodCBub2RlCgkgICAgICAgIG5vZGVJbmRleDMyID0gUklHSFRfTk9ERShub2RlSW5kZXgzMiwgdWludDMyQXJyYXkpOwoJICAgICAgICBub2RlSW5kZXgxNiA9IG5vZGVJbmRleDMyICogMjsKCSAgICAgIH0gLy8gcmV0dXJuIHRoZSBlbmQgb2Zmc2V0IG9mIHRoZSB0cmlhbmdsZSByYW5nZQoKCgkgICAgICByZXR1cm4gT0ZGU0VUKG5vZGVJbmRleDMyLCB1aW50MzJBcnJheSkgKyBDT1VOVChub2RlSW5kZXgxNiwgdWludDE2QXJyYXkpOwoJICAgIH0KCgkgICAgbGV0IG5vZGVJbmRleDE2ID0gbm9kZUluZGV4MzIgKiAyLAoJICAgICAgICBmbG9hdDMyQXJyYXkgPSBfZmxvYXQzMkFycmF5LAoJICAgICAgICB1aW50MTZBcnJheSA9IF91aW50MTZBcnJheSwKCSAgICAgICAgdWludDMyQXJyYXkgPSBfdWludDMyQXJyYXk7CgkgICAgY29uc3QgaXNMZWFmID0gSVNfTEVBRihub2RlSW5kZXgxNiwgdWludDE2QXJyYXkpOwoKCSAgICBpZiAoaXNMZWFmKSB7CgkgICAgICBjb25zdCBvZmZzZXQgPSBPRkZTRVQobm9kZUluZGV4MzIsIHVpbnQzMkFycmF5KTsKCSAgICAgIGNvbnN0IGNvdW50ID0gQ09VTlQobm9kZUluZGV4MTYsIHVpbnQxNkFycmF5KTsKCSAgICAgIGFycmF5VG9Cb3goQk9VTkRJTkdfREFUQV9JTkRFWChub2RlSW5kZXgzMiksIGZsb2F0MzJBcnJheSwgX2JveDEpOwoJICAgICAgcmV0dXJuIGludGVyc2VjdHNSYW5nZUZ1bmMob2Zmc2V0LCBjb3VudCwgZmFsc2UsIGRlcHRoLCBub2RlSW5kZXhCeXRlT2Zmc2V0ICsgbm9kZUluZGV4MzIsIF9ib3gxKTsKCSAgICB9IGVsc2UgewoJICAgICAgY29uc3QgbGVmdCA9IExFRlRfTk9ERShub2RlSW5kZXgzMik7CgkgICAgICBjb25zdCByaWdodCA9IFJJR0hUX05PREUobm9kZUluZGV4MzIsIHVpbnQzMkFycmF5KTsKCSAgICAgIGxldCBjMSA9IGxlZnQ7CgkgICAgICBsZXQgYzIgPSByaWdodDsKCSAgICAgIGxldCBzY29yZTEsIHNjb3JlMjsKCSAgICAgIGxldCBib3gxLCBib3gyOwoKCSAgICAgIGlmIChub2RlU2NvcmVGdW5jKSB7CgkgICAgICAgIGJveDEgPSBfYm94MTsKCSAgICAgICAgYm94MiA9IF9ib3gyOyAvLyBib3VuZGluZyBkYXRhIGlzIG5vdCBvZmZzZXQKCgkgICAgICAgIGFycmF5VG9Cb3goQk9VTkRJTkdfREFUQV9JTkRFWChjMSksIGZsb2F0MzJBcnJheSwgYm94MSk7CgkgICAgICAgIGFycmF5VG9Cb3goQk9VTkRJTkdfREFUQV9JTkRFWChjMiksIGZsb2F0MzJBcnJheSwgYm94Mik7CgkgICAgICAgIHNjb3JlMSA9IG5vZGVTY29yZUZ1bmMoYm94MSk7CgkgICAgICAgIHNjb3JlMiA9IG5vZGVTY29yZUZ1bmMoYm94Mik7CgoJICAgICAgICBpZiAoc2NvcmUyIDwgc2NvcmUxKSB7CgkgICAgICAgICAgYzEgPSByaWdodDsKCSAgICAgICAgICBjMiA9IGxlZnQ7CgkgICAgICAgICAgY29uc3QgdGVtcCA9IHNjb3JlMTsKCSAgICAgICAgICBzY29yZTEgPSBzY29yZTI7CgkgICAgICAgICAgc2NvcmUyID0gdGVtcDsKCSAgICAgICAgICBib3gxID0gYm94MjsgLy8gYm94MiBpcyBhbHdheXMgc2V0IGJlZm9yZSB1c2UgYmVsb3cKCSAgICAgICAgfQoJICAgICAgfSAvLyBDaGVjayBib3ggMSBpbnRlcnNlY3Rpb24KCgoJICAgICAgaWYgKCFib3gxKSB7CgkgICAgICAgIGJveDEgPSBfYm94MTsKCSAgICAgICAgYXJyYXlUb0JveChCT1VORElOR19EQVRBX0lOREVYKGMxKSwgZmxvYXQzMkFycmF5LCBib3gxKTsKCSAgICAgIH0KCgkgICAgICBjb25zdCBpc0MxTGVhZiA9IElTX0xFQUYoYzEgKiAyLCB1aW50MTZBcnJheSk7CgkgICAgICBjb25zdCBjMUludGVyc2VjdGlvbiA9IGludGVyc2VjdHNCb3VuZHNGdW5jKGJveDEsIGlzQzFMZWFmLCBzY29yZTEsIGRlcHRoICsgMSwgbm9kZUluZGV4Qnl0ZU9mZnNldCArIGMxKTsKCSAgICAgIGxldCBjMVN0b3BUcmF2ZXJzYWw7CgoJICAgICAgaWYgKGMxSW50ZXJzZWN0aW9uID09PSBDT05UQUlORUQpIHsKCSAgICAgICAgY29uc3Qgb2Zmc2V0ID0gZ2V0TGVmdE9mZnNldChjMSk7CgkgICAgICAgIGNvbnN0IGVuZCA9IGdldFJpZ2h0RW5kT2Zmc2V0KGMxKTsKCSAgICAgICAgY29uc3QgY291bnQgPSBlbmQgLSBvZmZzZXQ7CgkgICAgICAgIGMxU3RvcFRyYXZlcnNhbCA9IGludGVyc2VjdHNSYW5nZUZ1bmMob2Zmc2V0LCBjb3VudCwgdHJ1ZSwgZGVwdGggKyAxLCBub2RlSW5kZXhCeXRlT2Zmc2V0ICsgYzEsIGJveDEpOwoJICAgICAgfSBlbHNlIHsKCSAgICAgICAgYzFTdG9wVHJhdmVyc2FsID0gYzFJbnRlcnNlY3Rpb24gJiYgc2hhcGVjYXN0VHJhdmVyc2UoYzEsIGdlb21ldHJ5LCBpbnRlcnNlY3RzQm91bmRzRnVuYywgaW50ZXJzZWN0c1JhbmdlRnVuYywgbm9kZVNjb3JlRnVuYywgbm9kZUluZGV4Qnl0ZU9mZnNldCwgZGVwdGggKyAxKTsKCSAgICAgIH0KCgkgICAgICBpZiAoYzFTdG9wVHJhdmVyc2FsKSByZXR1cm4gdHJ1ZTsgLy8gQ2hlY2sgYm94IDIgaW50ZXJzZWN0aW9uCgkgICAgICAvLyBjYWNoZWQgYm94MiB3aWxsIGhhdmUgYmVlbiBvdmVyd3JpdHRlbiBieSBwcmV2aW91cyB0cmF2ZXJzYWwKCgkgICAgICBib3gyID0gX2JveDI7CgkgICAgICBhcnJheVRvQm94KEJPVU5ESU5HX0RBVEFfSU5ERVgoYzIpLCBmbG9hdDMyQXJyYXksIGJveDIpOwoJICAgICAgY29uc3QgaXNDMkxlYWYgPSBJU19MRUFGKGMyICogMiwgdWludDE2QXJyYXkpOwoJICAgICAgY29uc3QgYzJJbnRlcnNlY3Rpb24gPSBpbnRlcnNlY3RzQm91bmRzRnVuYyhib3gyLCBpc0MyTGVhZiwgc2NvcmUyLCBkZXB0aCArIDEsIG5vZGVJbmRleEJ5dGVPZmZzZXQgKyBjMik7CgkgICAgICBsZXQgYzJTdG9wVHJhdmVyc2FsOwoKCSAgICAgIGlmIChjMkludGVyc2VjdGlvbiA9PT0gQ09OVEFJTkVEKSB7CgkgICAgICAgIGNvbnN0IG9mZnNldCA9IGdldExlZnRPZmZzZXQoYzIpOwoJICAgICAgICBjb25zdCBlbmQgPSBnZXRSaWdodEVuZE9mZnNldChjMik7CgkgICAgICAgIGNvbnN0IGNvdW50ID0gZW5kIC0gb2Zmc2V0OwoJICAgICAgICBjMlN0b3BUcmF2ZXJzYWwgPSBpbnRlcnNlY3RzUmFuZ2VGdW5jKG9mZnNldCwgY291bnQsIHRydWUsIGRlcHRoICsgMSwgbm9kZUluZGV4Qnl0ZU9mZnNldCArIGMyLCBib3gyKTsKCSAgICAgIH0gZWxzZSB7CgkgICAgICAgIGMyU3RvcFRyYXZlcnNhbCA9IGMySW50ZXJzZWN0aW9uICYmIHNoYXBlY2FzdFRyYXZlcnNlKGMyLCBnZW9tZXRyeSwgaW50ZXJzZWN0c0JvdW5kc0Z1bmMsIGludGVyc2VjdHNSYW5nZUZ1bmMsIG5vZGVTY29yZUZ1bmMsIG5vZGVJbmRleEJ5dGVPZmZzZXQsIGRlcHRoICsgMSk7CgkgICAgICB9CgoJICAgICAgaWYgKGMyU3RvcFRyYXZlcnNhbCkgcmV0dXJuIHRydWU7CgkgICAgICByZXR1cm4gZmFsc2U7CgkgICAgfQoJICB9Cgl9KCk7Cgljb25zdCBpbnRlcnNlY3RzR2VvbWV0cnkgPSBmdW5jdGlvbiAoKSB7CgkgIGNvbnN0IHRyaWFuZ2xlID0gbmV3IFNlcGFyYXRpbmdBeGlzVHJpYW5nbGUoKTsKCSAgY29uc3QgdHJpYW5nbGUyID0gbmV3IFNlcGFyYXRpbmdBeGlzVHJpYW5nbGUoKTsKCSAgY29uc3QgaW52ZXJ0ZWRNYXQgPSBuZXcgTWF0cml4NCgpOwoJICBjb25zdCBvYmIgPSBuZXcgT3JpZW50ZWRCb3goKTsKCSAgY29uc3Qgb2JiMiA9IG5ldyBPcmllbnRlZEJveCgpOwoJICByZXR1cm4gZnVuY3Rpb24gaW50ZXJzZWN0c0dlb21ldHJ5KG5vZGVJbmRleDMyLCBnZW9tZXRyeSwgb3RoZXJHZW9tZXRyeSwgZ2VvbWV0cnlUb0J2aCwgY2FjaGVkT2JiKSB7CgkgICAgaWYgKGNhY2hlZE9iYiA9PT0gdm9pZCAwKSB7CgkgICAgICBjYWNoZWRPYmIgPSBudWxsOwoJICAgIH0KCgkgICAgbGV0IG5vZGVJbmRleDE2ID0gbm9kZUluZGV4MzIgKiAyLAoJICAgICAgICBmbG9hdDMyQXJyYXkgPSBfZmxvYXQzMkFycmF5LAoJICAgICAgICB1aW50MTZBcnJheSA9IF91aW50MTZBcnJheSwKCSAgICAgICAgdWludDMyQXJyYXkgPSBfdWludDMyQXJyYXk7CgoJICAgIGlmIChjYWNoZWRPYmIgPT09IG51bGwpIHsKCSAgICAgIGlmICghb3RoZXJHZW9tZXRyeS5ib3VuZGluZ0JveCkgewoJICAgICAgICBvdGhlckdlb21ldHJ5LmNvbXB1dGVCb3VuZGluZ0JveCgpOwoJICAgICAgfQoKCSAgICAgIG9iYi5zZXQob3RoZXJHZW9tZXRyeS5ib3VuZGluZ0JveC5taW4sIG90aGVyR2VvbWV0cnkuYm91bmRpbmdCb3gubWF4LCBnZW9tZXRyeVRvQnZoKTsKCSAgICAgIGNhY2hlZE9iYiA9IG9iYjsKCSAgICB9CgoJICAgIGNvbnN0IGlzTGVhZiA9IElTX0xFQUYobm9kZUluZGV4MTYsIHVpbnQxNkFycmF5KTsKCgkgICAgaWYgKGlzTGVhZikgewoJICAgICAgY29uc3QgdGhpc0dlb21ldHJ5ID0gZ2VvbWV0cnk7CgkgICAgICBjb25zdCB0aGlzSW5kZXggPSB0aGlzR2VvbWV0cnkuaW5kZXg7CgkgICAgICBjb25zdCB0aGlzUG9zID0gdGhpc0dlb21ldHJ5LmF0dHJpYnV0ZXMucG9zaXRpb247CgkgICAgICBjb25zdCBpbmRleCA9IG90aGVyR2VvbWV0cnkuaW5kZXg7CgkgICAgICBjb25zdCBwb3MgPSBvdGhlckdlb21ldHJ5LmF0dHJpYnV0ZXMucG9zaXRpb247CgkgICAgICBjb25zdCBvZmZzZXQgPSBPRkZTRVQobm9kZUluZGV4MzIsIHVpbnQzMkFycmF5KTsKCSAgICAgIGNvbnN0IGNvdW50ID0gQ09VTlQobm9kZUluZGV4MTYsIHVpbnQxNkFycmF5KTsgLy8gZ2V0IHRoZSBpbnZlcnNlIG9mIHRoZSBnZW9tZXRyeSBtYXRyaXggc28gd2UgY2FuIHRyYW5zZm9ybSBvdXIgdHJpYW5nbGVzIGludG8gdGhlCgkgICAgICAvLyBnZW9tZXRyeSBzcGFjZSB3ZSdyZSB0cnlpbmcgdG8gdGVzdC4gV2UgYXNzdW1lIHRoZXJlIGFyZSBmZXdlciB0cmlhbmdsZXMgYmVpbmcgY2hlY2tlZAoJICAgICAgLy8gaGVyZS4KCgkgICAgICBpbnZlcnRlZE1hdC5jb3B5KGdlb21ldHJ5VG9CdmgpLmludmVydCgpOwoKCSAgICAgIGlmIChvdGhlckdlb21ldHJ5LmJvdW5kc1RyZWUpIHsKCSAgICAgICAgYXJyYXlUb0JveChCT1VORElOR19EQVRBX0lOREVYKG5vZGVJbmRleDMyKSwgZmxvYXQzMkFycmF5LCBvYmIyKTsKCSAgICAgICAgb2JiMi5tYXRyaXguY29weShpbnZlcnRlZE1hdCk7CgkgICAgICAgIG9iYjIubmVlZHNVcGRhdGUgPSB0cnVlOwoJICAgICAgICBjb25zdCByZXMgPSBvdGhlckdlb21ldHJ5LmJvdW5kc1RyZWUuc2hhcGVjYXN0KHsKCSAgICAgICAgICBpbnRlcnNlY3RzQm91bmRzOiBib3ggPT4gb2JiMi5pbnRlcnNlY3RzQm94KGJveCksCgkgICAgICAgICAgaW50ZXJzZWN0c1RyaWFuZ2xlOiB0cmkgPT4gewoJICAgICAgICAgICAgdHJpLmEuYXBwbHlNYXRyaXg0KGdlb21ldHJ5VG9CdmgpOwoJICAgICAgICAgICAgdHJpLmIuYXBwbHlNYXRyaXg0KGdlb21ldHJ5VG9CdmgpOwoJICAgICAgICAgICAgdHJpLmMuYXBwbHlNYXRyaXg0KGdlb21ldHJ5VG9CdmgpOwoJICAgICAgICAgICAgdHJpLm5lZWRzVXBkYXRlID0gdHJ1ZTsKCgkgICAgICAgICAgICBmb3IgKGxldCBpID0gb2Zmc2V0ICogMywgbCA9IChjb3VudCArIG9mZnNldCkgKiAzOyBpIDwgbDsgaSArPSAzKSB7CgkgICAgICAgICAgICAgIC8vIHRoaXMgdHJpYW5nbGUgbmVlZHMgdG8gYmUgdHJhbnNmb3JtZWQgaW50byB0aGUgY3VycmVudCBCVkggY29vcmRpbmF0ZSBmcmFtZQoJICAgICAgICAgICAgICBzZXRUcmlhbmdsZSh0cmlhbmdsZTIsIGksIHRoaXNJbmRleCwgdGhpc1Bvcyk7CgkgICAgICAgICAgICAgIHRyaWFuZ2xlMi5uZWVkc1VwZGF0ZSA9IHRydWU7CgoJICAgICAgICAgICAgICBpZiAodHJpLmludGVyc2VjdHNUcmlhbmdsZSh0cmlhbmdsZTIpKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgfQoJICAgICAgICB9KTsKCSAgICAgICAgcmV0dXJuIHJlczsKCSAgICAgIH0gZWxzZSB7CgkgICAgICAgIGZvciAobGV0IGkgPSBvZmZzZXQgKiAzLCBsID0gY291bnQgKyBvZmZzZXQgKiAzOyBpIDwgbDsgaSArPSAzKSB7CgkgICAgICAgICAgLy8gdGhpcyB0cmlhbmdsZSBuZWVkcyB0byBiZSB0cmFuc2Zvcm1lZCBpbnRvIHRoZSBjdXJyZW50IEJWSCBjb29yZGluYXRlIGZyYW1lCgkgICAgICAgICAgc2V0VHJpYW5nbGUodHJpYW5nbGUsIGksIHRoaXNJbmRleCwgdGhpc1Bvcyk7CgkgICAgICAgICAgdHJpYW5nbGUuYS5hcHBseU1hdHJpeDQoaW52ZXJ0ZWRNYXQpOwoJICAgICAgICAgIHRyaWFuZ2xlLmIuYXBwbHlNYXRyaXg0KGludmVydGVkTWF0KTsKCSAgICAgICAgICB0cmlhbmdsZS5jLmFwcGx5TWF0cml4NChpbnZlcnRlZE1hdCk7CgkgICAgICAgICAgdHJpYW5nbGUubmVlZHNVcGRhdGUgPSB0cnVlOwoKCSAgICAgICAgICBmb3IgKGxldCBpMiA9IDAsIGwyID0gaW5kZXguY291bnQ7IGkyIDwgbDI7IGkyICs9IDMpIHsKCSAgICAgICAgICAgIHNldFRyaWFuZ2xlKHRyaWFuZ2xlMiwgaTIsIGluZGV4LCBwb3MpOwoJICAgICAgICAgICAgdHJpYW5nbGUyLm5lZWRzVXBkYXRlID0gdHJ1ZTsKCgkgICAgICAgICAgICBpZiAodHJpYW5nbGUuaW50ZXJzZWN0c1RyaWFuZ2xlKHRyaWFuZ2xlMikpIHsKCSAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICB9CgkgICAgfSBlbHNlIHsKCSAgICAgIGNvbnN0IGxlZnQgPSBub2RlSW5kZXgzMiArIDg7CgkgICAgICBjb25zdCByaWdodCA9IHVpbnQzMkFycmF5W25vZGVJbmRleDMyICsgNl07CgkgICAgICBhcnJheVRvQm94KEJPVU5ESU5HX0RBVEFfSU5ERVgobGVmdCksIGZsb2F0MzJBcnJheSwgYm91bmRpbmdCb3gpOwoJICAgICAgY29uc3QgbGVmdEludGVyc2VjdGlvbiA9IGNhY2hlZE9iYi5pbnRlcnNlY3RzQm94KGJvdW5kaW5nQm94KSAmJiBpbnRlcnNlY3RzR2VvbWV0cnkobGVmdCwgZ2VvbWV0cnksIG90aGVyR2VvbWV0cnksIGdlb21ldHJ5VG9CdmgsIGNhY2hlZE9iYik7CgkgICAgICBpZiAobGVmdEludGVyc2VjdGlvbikgcmV0dXJuIHRydWU7CgkgICAgICBhcnJheVRvQm94KEJPVU5ESU5HX0RBVEFfSU5ERVgocmlnaHQpLCBmbG9hdDMyQXJyYXksIGJvdW5kaW5nQm94KTsKCSAgICAgIGNvbnN0IHJpZ2h0SW50ZXJzZWN0aW9uID0gY2FjaGVkT2JiLmludGVyc2VjdHNCb3goYm91bmRpbmdCb3gpICYmIGludGVyc2VjdHNHZW9tZXRyeShyaWdodCwgZ2VvbWV0cnksIG90aGVyR2VvbWV0cnksIGdlb21ldHJ5VG9CdmgsIGNhY2hlZE9iYik7CgkgICAgICBpZiAocmlnaHRJbnRlcnNlY3Rpb24pIHJldHVybiB0cnVlOwoJICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH0KCSAgfTsKCX0oKTsKCglmdW5jdGlvbiBpbnRlcnNlY3RSYXkobm9kZUluZGV4MzIsIGFycmF5LCByYXksIHRhcmdldCkgewoJICBhcnJheVRvQm94KG5vZGVJbmRleDMyLCBhcnJheSwgYm91bmRpbmdCb3gpOwoJICByZXR1cm4gcmF5LmludGVyc2VjdEJveChib3VuZGluZ0JveCwgdGFyZ2V0KTsKCX0KCgljb25zdCBidWZmZXJTdGFjayA9IFtdOwoKCWxldCBfcHJldkJ1ZmZlcjsKCglsZXQgX2Zsb2F0MzJBcnJheTsKCglsZXQgX3VpbnQxNkFycmF5OwoKCWxldCBfdWludDMyQXJyYXk7CgoJZnVuY3Rpb24gc2V0QnVmZmVyKGJ1ZmZlcikgewoJICBpZiAoX3ByZXZCdWZmZXIpIHsKCSAgICBidWZmZXJTdGFjay5wdXNoKF9wcmV2QnVmZmVyKTsKCSAgfQoKCSAgX3ByZXZCdWZmZXIgPSBidWZmZXI7CgkgIF9mbG9hdDMyQXJyYXkgPSBuZXcgRmxvYXQzMkFycmF5KGJ1ZmZlcik7CgkgIF91aW50MTZBcnJheSA9IG5ldyBVaW50MTZBcnJheShidWZmZXIpOwoJICBfdWludDMyQXJyYXkgPSBuZXcgVWludDMyQXJyYXkoYnVmZmVyKTsKCX0KCWZ1bmN0aW9uIGNsZWFyQnVmZmVyKCkgewoJICBfcHJldkJ1ZmZlciA9IG51bGw7CgkgIF9mbG9hdDMyQXJyYXkgPSBudWxsOwoJICBfdWludDE2QXJyYXkgPSBudWxsOwoJICBfdWludDMyQXJyYXkgPSBudWxsOwoKCSAgaWYgKGJ1ZmZlclN0YWNrLmxlbmd0aCkgewoJICAgIHNldEJ1ZmZlcihidWZmZXJTdGFjay5wb3AoKSk7CgkgIH0KCX0KCgljb25zdCBTS0lQX0dFTkVSQVRJT04gPSBTeW1ib2woJ3NraXAgdHJlZSBnZW5lcmF0aW9uJyk7Cgljb25zdCBhYWJiID0gLyogQF9fUFVSRV9fICovbmV3IEJveDMoKTsKCWNvbnN0IGFhYmIyID0gLyogQF9fUFVSRV9fICovbmV3IEJveDMoKTsKCWNvbnN0IHRlbXBNYXRyaXggPSAvKiBAX19QVVJFX18gKi9uZXcgTWF0cml4NCgpOwoJY29uc3Qgb2JiID0gLyogQF9fUFVSRV9fICovbmV3IE9yaWVudGVkQm94KCk7Cgljb25zdCBvYmIyID0gLyogQF9fUFVSRV9fICovbmV3IE9yaWVudGVkQm94KCk7Cgljb25zdCB0ZW1wID0gLyogQF9fUFVSRV9fICovbmV3IFZlY3RvcjMoKTsKCWNvbnN0IHRlbXAxID0gLyogQF9fUFVSRV9fICovbmV3IFZlY3RvcjMoKTsKCWNvbnN0IHRlbXAyID0gLyogQF9fUFVSRV9fICovbmV3IFZlY3RvcjMoKTsKCWNvbnN0IHRlbXAzID0gLyogQF9fUFVSRV9fICovbmV3IFZlY3RvcjMoKTsKCWNvbnN0IHRlbXA0ID0gLyogQF9fUFVSRV9fICovbmV3IFZlY3RvcjMoKTsKCWNvbnN0IHRlbXBCb3ggPSAvKiBAX19QVVJFX18gKi9uZXcgQm94MygpOwoJY29uc3QgdHJpYW5nbGVQb29sID0gLyogQF9fUFVSRV9fICovbmV3IFByaW1pdGl2ZVBvb2woKCkgPT4gbmV3IFNlcGFyYXRpbmdBeGlzVHJpYW5nbGUoKSk7CgljbGFzcyBNZXNoQlZIIHsKCSAgc3RhdGljIHNlcmlhbGl6ZShidmgsIG9wdGlvbnMpIHsKCSAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7CgkgICAgICBvcHRpb25zID0ge307CgkgICAgfQoKCSAgICBpZiAob3B0aW9ucy5pc0J1ZmZlckdlb21ldHJ5KSB7CgkgICAgICBjb25zb2xlLndhcm4oJ01lc2hCVkguc2VyaWFsaXplOiBUaGUgYXJndW1lbnRzIGZvciB0aGUgZnVuY3Rpb24gaGF2ZSBjaGFuZ2VkLiBTZWUgZG9jdW1lbnRhdGlvbiBmb3IgbmV3IHNpZ25hdHVyZS4nKTsKCSAgICAgIHJldHVybiBNZXNoQlZILnNlcmlhbGl6ZShhcmd1bWVudHNbMF0sIHsKCSAgICAgICAgY2xvbmVCdWZmZXJzOiBhcmd1bWVudHNbMl0gPT09IHVuZGVmaW5lZCA/IHRydWUgOiBhcmd1bWVudHNbMl0KCSAgICAgIH0pOwoJICAgIH0KCgkgICAgb3B0aW9ucyA9IHsKCSAgICAgIGNsb25lQnVmZmVyczogdHJ1ZSwKCSAgICAgIC4uLm9wdGlvbnMKCSAgICB9OwoJICAgIGNvbnN0IGdlb21ldHJ5ID0gYnZoLmdlb21ldHJ5OwoJICAgIGNvbnN0IHJvb3REYXRhID0gYnZoLl9yb290czsKCSAgICBjb25zdCBpbmRleEF0dHJpYnV0ZSA9IGdlb21ldHJ5LmdldEluZGV4KCk7CgkgICAgbGV0IHJlc3VsdDsKCgkgICAgaWYgKG9wdGlvbnMuY2xvbmVCdWZmZXJzKSB7CgkgICAgICByZXN1bHQgPSB7CgkgICAgICAgIHJvb3RzOiByb290RGF0YS5tYXAocm9vdCA9PiByb290LnNsaWNlKCkpLAoJICAgICAgICBpbmRleDogaW5kZXhBdHRyaWJ1dGUuYXJyYXkuc2xpY2UoKQoJICAgICAgfTsKCSAgICB9IGVsc2UgewoJICAgICAgcmVzdWx0ID0gewoJICAgICAgICByb290czogcm9vdERhdGEsCgkgICAgICAgIGluZGV4OiBpbmRleEF0dHJpYnV0ZS5hcnJheQoJICAgICAgfTsKCSAgICB9CgoJICAgIHJldHVybiByZXN1bHQ7CgkgIH0KCgkgIHN0YXRpYyBkZXNlcmlhbGl6ZShkYXRhLCBnZW9tZXRyeSwgb3B0aW9ucykgewoJICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsKCSAgICAgIG9wdGlvbnMgPSB7fTsKCSAgICB9CgoJICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gJ2Jvb2xlYW4nKSB7CgkgICAgICBjb25zb2xlLndhcm4oJ01lc2hCVkguZGVzZXJpYWxpemU6IFRoZSBhcmd1bWVudHMgZm9yIHRoZSBmdW5jdGlvbiBoYXZlIGNoYW5nZWQuIFNlZSBkb2N1bWVudGF0aW9uIGZvciBuZXcgc2lnbmF0dXJlLicpOwoJICAgICAgcmV0dXJuIE1lc2hCVkguZGVzZXJpYWxpemUoYXJndW1lbnRzWzBdLCBhcmd1bWVudHNbMV0sIHsKCSAgICAgICAgc2V0SW5kZXg6IGFyZ3VtZW50c1syXSA9PT0gdW5kZWZpbmVkID8gdHJ1ZSA6IGFyZ3VtZW50c1syXQoJICAgICAgfSk7CgkgICAgfQoKCSAgICBvcHRpb25zID0gewoJICAgICAgc2V0SW5kZXg6IHRydWUsCgkgICAgICAuLi5vcHRpb25zCgkgICAgfTsKCSAgICBjb25zdCB7CgkgICAgICBpbmRleCwKCSAgICAgIHJvb3RzCgkgICAgfSA9IGRhdGE7CgkgICAgY29uc3QgYnZoID0gbmV3IE1lc2hCVkgoZ2VvbWV0cnksIHsgLi4ub3B0aW9ucywKCSAgICAgIFtTS0lQX0dFTkVSQVRJT05dOiB0cnVlCgkgICAgfSk7CgkgICAgYnZoLl9yb290cyA9IHJvb3RzOwoKCSAgICBpZiAob3B0aW9ucy5zZXRJbmRleCkgewoJICAgICAgY29uc3QgaW5kZXhBdHRyaWJ1dGUgPSBnZW9tZXRyeS5nZXRJbmRleCgpOwoKCSAgICAgIGlmIChpbmRleEF0dHJpYnV0ZSA9PT0gbnVsbCkgewoJICAgICAgICBjb25zdCBuZXdJbmRleCA9IG5ldyBCdWZmZXJBdHRyaWJ1dGUoZGF0YS5pbmRleCwgMSwgZmFsc2UpOwoJICAgICAgICBnZW9tZXRyeS5zZXRJbmRleChuZXdJbmRleCk7CgkgICAgICB9IGVsc2UgaWYgKGluZGV4QXR0cmlidXRlLmFycmF5ICE9PSBpbmRleCkgewoJICAgICAgICBpbmRleEF0dHJpYnV0ZS5hcnJheS5zZXQoaW5kZXgpOwoJICAgICAgICBpbmRleEF0dHJpYnV0ZS5uZWVkc1VwZGF0ZSA9IHRydWU7CgkgICAgICB9CgkgICAgfQoKCSAgICByZXR1cm4gYnZoOwoJICB9CgoJICBjb25zdHJ1Y3RvcihnZW9tZXRyeSwgb3B0aW9ucykgewoJICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsKCSAgICAgIG9wdGlvbnMgPSB7fTsKCSAgICB9CgoJICAgIGlmICghZ2VvbWV0cnkuaXNCdWZmZXJHZW9tZXRyeSkgewoJICAgICAgdGhyb3cgbmV3IEVycm9yKCdNZXNoQlZIOiBPbmx5IEJ1ZmZlckdlb21ldHJpZXMgYXJlIHN1cHBvcnRlZC4nKTsKCSAgICB9IGVsc2UgaWYgKGdlb21ldHJ5LmluZGV4ICYmIGdlb21ldHJ5LmluZGV4LmlzSW50ZXJsZWF2ZWRCdWZmZXJBdHRyaWJ1dGUpIHsKCSAgICAgIHRocm93IG5ldyBFcnJvcignTWVzaEJWSDogSW50ZXJsZWF2ZWRCdWZmZXJBdHRyaWJ1dGUgaXMgbm90IHN1cHBvcnRlZCBmb3IgdGhlIGluZGV4IGF0dHJpYnV0ZS4nKTsKCSAgICB9IC8vIGRlZmF1bHQgb3B0aW9ucwoKCgkgICAgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oewoJICAgICAgc3RyYXRlZ3k6IENFTlRFUiwKCSAgICAgIG1heERlcHRoOiA0MCwKCSAgICAgIG1heExlYWZUcmlzOiAxMCwKCSAgICAgIHZlcmJvc2U6IHRydWUsCgkgICAgICB1c2VTaGFyZWRBcnJheUJ1ZmZlcjogZmFsc2UsCgkgICAgICBzZXRCb3VuZGluZ0JveDogdHJ1ZSwKCSAgICAgIG9uUHJvZ3Jlc3M6IG51bGwsCgkgICAgICAvLyB1bmRvY3VtZW50ZWQgb3B0aW9ucwoJICAgICAgLy8gV2hldGhlciB0byBza2lwIGdlbmVyYXRpbmcgdGhlIHRyZWUuIFVzZWQgZm9yIGRlc2VyaWFsaXphdGlvbi4KCSAgICAgIFtTS0lQX0dFTkVSQVRJT05dOiBmYWxzZQoJICAgIH0sIG9wdGlvbnMpOwoKCSAgICBpZiAob3B0aW9ucy51c2VTaGFyZWRBcnJheUJ1ZmZlciAmJiB0eXBlb2YgU2hhcmVkQXJyYXlCdWZmZXIgPT09ICd1bmRlZmluZWQnKSB7CgkgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01lc2hCVkg6IFNoYXJlZEFycmF5QnVmZmVyIGlzIG5vdCBhdmFpbGFibGUuJyk7CgkgICAgfQoKCSAgICB0aGlzLl9yb290cyA9IG51bGw7CgoJICAgIGlmICghb3B0aW9uc1tTS0lQX0dFTkVSQVRJT05dKSB7CgkgICAgICB0aGlzLl9yb290cyA9IGJ1aWxkUGFja2VkVHJlZShnZW9tZXRyeSwgb3B0aW9ucyk7CgoJICAgICAgaWYgKCFnZW9tZXRyeS5ib3VuZGluZ0JveCAmJiBvcHRpb25zLnNldEJvdW5kaW5nQm94KSB7CgkgICAgICAgIGdlb21ldHJ5LmJvdW5kaW5nQm94ID0gdGhpcy5nZXRCb3VuZGluZ0JveChuZXcgQm94MygpKTsKCSAgICAgIH0KCSAgICB9IC8vIHJldGFpbiByZWZlcmVuY2VzIHRvIHRoZSBnZW9tZXRyeSBzbyB3ZSBjYW4gdXNlIHRoZW0gaXQgd2l0aG91dCBoYXZpbmcgdG8KCSAgICAvLyB0YWtlIGEgZ2VvbWV0cnkgcmVmZXJlbmNlIGluIGV2ZXJ5IGZ1bmN0aW9uLgoKCgkgICAgdGhpcy5nZW9tZXRyeSA9IGdlb21ldHJ5OwoJICB9CgoJICByZWZpdChub2RlSW5kaWNlcykgewoJICAgIGlmIChub2RlSW5kaWNlcyA9PT0gdm9pZCAwKSB7CgkgICAgICBub2RlSW5kaWNlcyA9IG51bGw7CgkgICAgfQoKCSAgICBpZiAobm9kZUluZGljZXMgJiYgQXJyYXkuaXNBcnJheShub2RlSW5kaWNlcykpIHsKCSAgICAgIG5vZGVJbmRpY2VzID0gbmV3IFNldChub2RlSW5kaWNlcyk7CgkgICAgfQoKCSAgICBjb25zdCBnZW9tZXRyeSA9IHRoaXMuZ2VvbWV0cnk7CgkgICAgY29uc3QgaW5kZXhBcnIgPSBnZW9tZXRyeS5pbmRleC5hcnJheTsKCSAgICBjb25zdCBwb3NBdHRyID0gZ2VvbWV0cnkuYXR0cmlidXRlcy5wb3NpdGlvbjsKCSAgICBjb25zdCBwb3NBcnIgPSBwb3NBdHRyLmFycmF5OyAvLyBzdXBwb3J0IGZvciBhbiBpbnRlcmxlYXZlZCBwb3NpdGlvbiBidWZmZXIKCgkgICAgY29uc3QgYnVmZmVyT2Zmc2V0ID0gcG9zQXR0ci5vZmZzZXQgfHwgMDsKCSAgICBsZXQgc3RyaWRlID0gMzsKCgkgICAgaWYgKHBvc0F0dHIuaXNJbnRlcmxlYXZlZEJ1ZmZlckF0dHJpYnV0ZSkgewoJICAgICAgc3RyaWRlID0gcG9zQXR0ci5kYXRhLnN0cmlkZTsKCSAgICB9CgoJICAgIGxldCBidWZmZXIsIHVpbnQzMkFycmF5LCB1aW50MTZBcnJheSwgZmxvYXQzMkFycmF5OwoJICAgIGxldCBieXRlT2Zmc2V0ID0gMDsKCSAgICBjb25zdCByb290cyA9IHRoaXMuX3Jvb3RzOwoKCSAgICBmb3IgKGxldCBpID0gMCwgbCA9IHJvb3RzLmxlbmd0aDsgaSA8IGw7IGkrKykgewoJICAgICAgYnVmZmVyID0gcm9vdHNbaV07CgkgICAgICB1aW50MzJBcnJheSA9IG5ldyBVaW50MzJBcnJheShidWZmZXIpOwoJICAgICAgdWludDE2QXJyYXkgPSBuZXcgVWludDE2QXJyYXkoYnVmZmVyKTsKCSAgICAgIGZsb2F0MzJBcnJheSA9IG5ldyBGbG9hdDMyQXJyYXkoYnVmZmVyKTsKCgkgICAgICBfdHJhdmVyc2UoMCwgYnl0ZU9mZnNldCk7CgoJICAgICAgYnl0ZU9mZnNldCArPSBidWZmZXIuYnl0ZUxlbmd0aDsKCSAgICB9CgoJICAgIGZ1bmN0aW9uIF90cmF2ZXJzZShub2RlMzJJbmRleCwgYnl0ZU9mZnNldCwgZm9yY2UpIHsKCSAgICAgIGlmIChmb3JjZSA9PT0gdm9pZCAwKSB7CgkgICAgICAgIGZvcmNlID0gZmFsc2U7CgkgICAgICB9CgoJICAgICAgY29uc3Qgbm9kZTE2SW5kZXggPSBub2RlMzJJbmRleCAqIDI7CgkgICAgICBjb25zdCBpc0xlYWYgPSB1aW50MTZBcnJheVtub2RlMTZJbmRleCArIDE1XSA9PT0gSVNfTEVBRk5PREVfRkxBRzsKCgkgICAgICBpZiAoaXNMZWFmKSB7CgkgICAgICAgIGNvbnN0IG9mZnNldCA9IHVpbnQzMkFycmF5W25vZGUzMkluZGV4ICsgNl07CgkgICAgICAgIGNvbnN0IGNvdW50ID0gdWludDE2QXJyYXlbbm9kZTE2SW5kZXggKyAxNF07CgkgICAgICAgIGxldCBtaW54ID0gSW5maW5pdHk7CgkgICAgICAgIGxldCBtaW55ID0gSW5maW5pdHk7CgkgICAgICAgIGxldCBtaW56ID0gSW5maW5pdHk7CgkgICAgICAgIGxldCBtYXh4ID0gLUluZmluaXR5OwoJICAgICAgICBsZXQgbWF4eSA9IC1JbmZpbml0eTsKCSAgICAgICAgbGV0IG1heHogPSAtSW5maW5pdHk7CgoJICAgICAgICBmb3IgKGxldCBpID0gMyAqIG9mZnNldCwgbCA9IDMgKiAob2Zmc2V0ICsgY291bnQpOyBpIDwgbDsgaSsrKSB7CgkgICAgICAgICAgY29uc3QgaW5kZXggPSBpbmRleEFycltpXSAqIHN0cmlkZSArIGJ1ZmZlck9mZnNldDsKCSAgICAgICAgICBjb25zdCB4ID0gcG9zQXJyW2luZGV4ICsgMF07CgkgICAgICAgICAgY29uc3QgeSA9IHBvc0FycltpbmRleCArIDFdOwoJICAgICAgICAgIGNvbnN0IHogPSBwb3NBcnJbaW5kZXggKyAyXTsKCSAgICAgICAgICBpZiAoeCA8IG1pbngpIG1pbnggPSB4OwoJICAgICAgICAgIGlmICh4ID4gbWF4eCkgbWF4eCA9IHg7CgkgICAgICAgICAgaWYgKHkgPCBtaW55KSBtaW55ID0geTsKCSAgICAgICAgICBpZiAoeSA+IG1heHkpIG1heHkgPSB5OwoJICAgICAgICAgIGlmICh6IDwgbWlueikgbWlueiA9IHo7CgkgICAgICAgICAgaWYgKHogPiBtYXh6KSBtYXh6ID0gejsKCSAgICAgICAgfQoKCSAgICAgICAgaWYgKGZsb2F0MzJBcnJheVtub2RlMzJJbmRleCArIDBdICE9PSBtaW54IHx8IGZsb2F0MzJBcnJheVtub2RlMzJJbmRleCArIDFdICE9PSBtaW55IHx8IGZsb2F0MzJBcnJheVtub2RlMzJJbmRleCArIDJdICE9PSBtaW56IHx8IGZsb2F0MzJBcnJheVtub2RlMzJJbmRleCArIDNdICE9PSBtYXh4IHx8IGZsb2F0MzJBcnJheVtub2RlMzJJbmRleCArIDRdICE9PSBtYXh5IHx8IGZsb2F0MzJBcnJheVtub2RlMzJJbmRleCArIDVdICE9PSBtYXh6KSB7CgkgICAgICAgICAgZmxvYXQzMkFycmF5W25vZGUzMkluZGV4ICsgMF0gPSBtaW54OwoJICAgICAgICAgIGZsb2F0MzJBcnJheVtub2RlMzJJbmRleCArIDFdID0gbWlueTsKCSAgICAgICAgICBmbG9hdDMyQXJyYXlbbm9kZTMySW5kZXggKyAyXSA9IG1pbno7CgkgICAgICAgICAgZmxvYXQzMkFycmF5W25vZGUzMkluZGV4ICsgM10gPSBtYXh4OwoJICAgICAgICAgIGZsb2F0MzJBcnJheVtub2RlMzJJbmRleCArIDRdID0gbWF4eTsKCSAgICAgICAgICBmbG9hdDMyQXJyYXlbbm9kZTMySW5kZXggKyA1XSA9IG1heHo7CgkgICAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgICAgIH0gZWxzZSB7CgkgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICB9IGVsc2UgewoJICAgICAgICBjb25zdCBsZWZ0ID0gbm9kZTMySW5kZXggKyA4OwoJICAgICAgICBjb25zdCByaWdodCA9IHVpbnQzMkFycmF5W25vZGUzMkluZGV4ICsgNl07IC8vIHRoZSBpZGVudGlmeWluZyBub2RlIGluZGljZXMgcHJvdmlkZWQgYnkgdGhlIHNoYXBlY2FzdCBmdW5jdGlvbiBpbmNsdWRlIG9mZnNldHMgb2YgYWxsCgkgICAgICAgIC8vIHJvb3QgYnVmZmVycyB0byBndWFyYW50ZWUgdGhleSdyZSB1bmlxdWUgYmV0d2VlbiByb290cyBzbyBvZmZzZXQgbGVmdCBhbmQgcmlnaHQgaW5kaWNlcyBoZXJlLgoKCSAgICAgICAgY29uc3Qgb2Zmc2V0TGVmdCA9IGxlZnQgKyBieXRlT2Zmc2V0OwoJICAgICAgICBjb25zdCBvZmZzZXRSaWdodCA9IHJpZ2h0ICsgYnl0ZU9mZnNldDsKCSAgICAgICAgbGV0IGZvcmNlQ2hpbGRyZW4gPSBmb3JjZTsKCSAgICAgICAgbGV0IGluY2x1ZGVzTGVmdCA9IGZhbHNlOwoJICAgICAgICBsZXQgaW5jbHVkZXNSaWdodCA9IGZhbHNlOwoKCSAgICAgICAgaWYgKG5vZGVJbmRpY2VzKSB7CgkgICAgICAgICAgLy8gaWYgd2Ugc2VlIHRoYXQgbmVpdGhlciB0aGUgbGVmdCBvciByaWdodCBjaGlsZCBhcmUgaW5jbHVkZWQgaW4gdGhlIHNldCB0aGF0IG5lZWQgdG8gYmUgdXBkYXRlZAoJICAgICAgICAgIC8vIHRoZW4gd2UgYXNzdW1lIHRoYXQgYWxsIGNoaWxkcmVuIG5lZWQgdG8gYmUgdXBkYXRlZC4KCSAgICAgICAgICBpZiAoIWZvcmNlQ2hpbGRyZW4pIHsKCSAgICAgICAgICAgIGluY2x1ZGVzTGVmdCA9IG5vZGVJbmRpY2VzLmhhcyhvZmZzZXRMZWZ0KTsKCSAgICAgICAgICAgIGluY2x1ZGVzUmlnaHQgPSBub2RlSW5kaWNlcy5oYXMob2Zmc2V0UmlnaHQpOwoJICAgICAgICAgICAgZm9yY2VDaGlsZHJlbiA9ICFpbmNsdWRlc0xlZnQgJiYgIWluY2x1ZGVzUmlnaHQ7CgkgICAgICAgICAgfQoJICAgICAgICB9IGVsc2UgewoJICAgICAgICAgIGluY2x1ZGVzTGVmdCA9IHRydWU7CgkgICAgICAgICAgaW5jbHVkZXNSaWdodCA9IHRydWU7CgkgICAgICAgIH0KCgkgICAgICAgIGNvbnN0IHRyYXZlcnNlTGVmdCA9IGZvcmNlQ2hpbGRyZW4gfHwgaW5jbHVkZXNMZWZ0OwoJICAgICAgICBjb25zdCB0cmF2ZXJzZVJpZ2h0ID0gZm9yY2VDaGlsZHJlbiB8fCBpbmNsdWRlc1JpZ2h0OwoJICAgICAgICBsZXQgbGVmdENoYW5nZSA9IGZhbHNlOwoKCSAgICAgICAgaWYgKHRyYXZlcnNlTGVmdCkgewoJICAgICAgICAgIGxlZnRDaGFuZ2UgPSBfdHJhdmVyc2UobGVmdCwgYnl0ZU9mZnNldCwgZm9yY2VDaGlsZHJlbik7CgkgICAgICAgIH0KCgkgICAgICAgIGxldCByaWdodENoYW5nZSA9IGZhbHNlOwoKCSAgICAgICAgaWYgKHRyYXZlcnNlUmlnaHQpIHsKCSAgICAgICAgICByaWdodENoYW5nZSA9IF90cmF2ZXJzZShyaWdodCwgYnl0ZU9mZnNldCwgZm9yY2VDaGlsZHJlbik7CgkgICAgICAgIH0KCgkgICAgICAgIGNvbnN0IGRpZENoYW5nZSA9IGxlZnRDaGFuZ2UgfHwgcmlnaHRDaGFuZ2U7CgoJICAgICAgICBpZiAoZGlkQ2hhbmdlKSB7CgkgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAzOyBpKyspIHsKCSAgICAgICAgICAgIGNvbnN0IGxlZnRpID0gbGVmdCArIGk7CgkgICAgICAgICAgICBjb25zdCByaWdodGkgPSByaWdodCArIGk7CgkgICAgICAgICAgICBjb25zdCBtaW5MZWZ0VmFsdWUgPSBmbG9hdDMyQXJyYXlbbGVmdGldOwoJICAgICAgICAgICAgY29uc3QgbWF4TGVmdFZhbHVlID0gZmxvYXQzMkFycmF5W2xlZnRpICsgM107CgkgICAgICAgICAgICBjb25zdCBtaW5SaWdodFZhbHVlID0gZmxvYXQzMkFycmF5W3JpZ2h0aV07CgkgICAgICAgICAgICBjb25zdCBtYXhSaWdodFZhbHVlID0gZmxvYXQzMkFycmF5W3JpZ2h0aSArIDNdOwoJICAgICAgICAgICAgZmxvYXQzMkFycmF5W25vZGUzMkluZGV4ICsgaV0gPSBtaW5MZWZ0VmFsdWUgPCBtaW5SaWdodFZhbHVlID8gbWluTGVmdFZhbHVlIDogbWluUmlnaHRWYWx1ZTsKCSAgICAgICAgICAgIGZsb2F0MzJBcnJheVtub2RlMzJJbmRleCArIGkgKyAzXSA9IG1heExlZnRWYWx1ZSA+IG1heFJpZ2h0VmFsdWUgPyBtYXhMZWZ0VmFsdWUgOiBtYXhSaWdodFZhbHVlOwoJICAgICAgICAgIH0KCSAgICAgICAgfQoKCSAgICAgICAgcmV0dXJuIGRpZENoYW5nZTsKCSAgICAgIH0KCSAgICB9CgkgIH0KCgkgIHRyYXZlcnNlKGNhbGxiYWNrLCByb290SW5kZXgpIHsKCSAgICBpZiAocm9vdEluZGV4ID09PSB2b2lkIDApIHsKCSAgICAgIHJvb3RJbmRleCA9IDA7CgkgICAgfQoKCSAgICBjb25zdCBidWZmZXIgPSB0aGlzLl9yb290c1tyb290SW5kZXhdOwoJICAgIGNvbnN0IHVpbnQzMkFycmF5ID0gbmV3IFVpbnQzMkFycmF5KGJ1ZmZlcik7CgkgICAgY29uc3QgdWludDE2QXJyYXkgPSBuZXcgVWludDE2QXJyYXkoYnVmZmVyKTsKCgkgICAgX3RyYXZlcnNlKDApOwoKCSAgICBmdW5jdGlvbiBfdHJhdmVyc2Uobm9kZTMySW5kZXgsIGRlcHRoKSB7CgkgICAgICBpZiAoZGVwdGggPT09IHZvaWQgMCkgewoJICAgICAgICBkZXB0aCA9IDA7CgkgICAgICB9CgoJICAgICAgY29uc3Qgbm9kZTE2SW5kZXggPSBub2RlMzJJbmRleCAqIDI7CgkgICAgICBjb25zdCBpc0xlYWYgPSB1aW50MTZBcnJheVtub2RlMTZJbmRleCArIDE1XSA9PT0gSVNfTEVBRk5PREVfRkxBRzsKCgkgICAgICBpZiAoaXNMZWFmKSB7CgkgICAgICAgIGNvbnN0IG9mZnNldCA9IHVpbnQzMkFycmF5W25vZGUzMkluZGV4ICsgNl07CgkgICAgICAgIGNvbnN0IGNvdW50ID0gdWludDE2QXJyYXlbbm9kZTE2SW5kZXggKyAxNF07CgkgICAgICAgIGNhbGxiYWNrKGRlcHRoLCBpc0xlYWYsIG5ldyBGbG9hdDMyQXJyYXkoYnVmZmVyLCBub2RlMzJJbmRleCAqIDQsIDYpLCBvZmZzZXQsIGNvdW50KTsKCSAgICAgIH0gZWxzZSB7CgkgICAgICAgIC8vIFRPRE86IHVzZSBub2RlIGZ1bmN0aW9ucyBoZXJlCgkgICAgICAgIGNvbnN0IGxlZnQgPSBub2RlMzJJbmRleCArIEJZVEVTX1BFUl9OT0RFIC8gNDsKCSAgICAgICAgY29uc3QgcmlnaHQgPSB1aW50MzJBcnJheVtub2RlMzJJbmRleCArIDZdOwoJICAgICAgICBjb25zdCBzcGxpdEF4aXMgPSB1aW50MzJBcnJheVtub2RlMzJJbmRleCArIDddOwoJICAgICAgICBjb25zdCBzdG9wVHJhdmVyc2FsID0gY2FsbGJhY2soZGVwdGgsIGlzTGVhZiwgbmV3IEZsb2F0MzJBcnJheShidWZmZXIsIG5vZGUzMkluZGV4ICogNCwgNiksIHNwbGl0QXhpcyk7CgoJICAgICAgICBpZiAoIXN0b3BUcmF2ZXJzYWwpIHsKCSAgICAgICAgICBfdHJhdmVyc2UobGVmdCwgZGVwdGggKyAxKTsKCgkgICAgICAgICAgX3RyYXZlcnNlKHJpZ2h0LCBkZXB0aCArIDEpOwoJICAgICAgICB9CgkgICAgICB9CgkgICAgfQoJICB9CgkgIC8qIENvcmUgQ2FzdCBGdW5jdGlvbnMgKi8KCgoJICByYXljYXN0KHJheSwgbWF0ZXJpYWxPclNpZGUpIHsKCSAgICBpZiAobWF0ZXJpYWxPclNpZGUgPT09IHZvaWQgMCkgewoJICAgICAgbWF0ZXJpYWxPclNpZGUgPSBGcm9udFNpZGU7CgkgICAgfQoKCSAgICBjb25zdCByb290cyA9IHRoaXMuX3Jvb3RzOwoJICAgIGNvbnN0IGdlb21ldHJ5ID0gdGhpcy5nZW9tZXRyeTsKCSAgICBjb25zdCBpbnRlcnNlY3RzID0gW107CgkgICAgY29uc3QgaXNNYXRlcmlhbCA9IG1hdGVyaWFsT3JTaWRlLmlzTWF0ZXJpYWw7CgkgICAgY29uc3QgaXNBcnJheU1hdGVyaWFsID0gQXJyYXkuaXNBcnJheShtYXRlcmlhbE9yU2lkZSk7CgkgICAgY29uc3QgZ3JvdXBzID0gZ2VvbWV0cnkuZ3JvdXBzOwoJICAgIGNvbnN0IHNpZGUgPSBpc01hdGVyaWFsID8gbWF0ZXJpYWxPclNpZGUuc2lkZSA6IG1hdGVyaWFsT3JTaWRlOwoKCSAgICBmb3IgKGxldCBpID0gMCwgbCA9IHJvb3RzLmxlbmd0aDsgaSA8IGw7IGkrKykgewoJICAgICAgY29uc3QgbWF0ZXJpYWxTaWRlID0gaXNBcnJheU1hdGVyaWFsID8gbWF0ZXJpYWxPclNpZGVbZ3JvdXBzW2ldLm1hdGVyaWFsSW5kZXhdLnNpZGUgOiBzaWRlOwoJICAgICAgY29uc3Qgc3RhcnRDb3VudCA9IGludGVyc2VjdHMubGVuZ3RoOwoJICAgICAgc2V0QnVmZmVyKHJvb3RzW2ldKTsKCSAgICAgIHJheWNhc3QoMCwgZ2VvbWV0cnksIG1hdGVyaWFsU2lkZSwgcmF5LCBpbnRlcnNlY3RzKTsKCSAgICAgIGNsZWFyQnVmZmVyKCk7CgoJICAgICAgaWYgKGlzQXJyYXlNYXRlcmlhbCkgewoJICAgICAgICBjb25zdCBtYXRlcmlhbEluZGV4ID0gZ3JvdXBzW2ldLm1hdGVyaWFsSW5kZXg7CgoJICAgICAgICBmb3IgKGxldCBqID0gc3RhcnRDb3VudCwgamwgPSBpbnRlcnNlY3RzLmxlbmd0aDsgaiA8IGpsOyBqKyspIHsKCSAgICAgICAgICBpbnRlcnNlY3RzW2pdLmZhY2UubWF0ZXJpYWxJbmRleCA9IG1hdGVyaWFsSW5kZXg7CgkgICAgICAgIH0KCSAgICAgIH0KCSAgICB9CgoJICAgIHJldHVybiBpbnRlcnNlY3RzOwoJICB9CgoJICByYXljYXN0Rmlyc3QocmF5LCBtYXRlcmlhbE9yU2lkZSkgewoJICAgIGlmIChtYXRlcmlhbE9yU2lkZSA9PT0gdm9pZCAwKSB7CgkgICAgICBtYXRlcmlhbE9yU2lkZSA9IEZyb250U2lkZTsKCSAgICB9CgoJICAgIGNvbnN0IHJvb3RzID0gdGhpcy5fcm9vdHM7CgkgICAgY29uc3QgZ2VvbWV0cnkgPSB0aGlzLmdlb21ldHJ5OwoJICAgIGNvbnN0IGlzTWF0ZXJpYWwgPSBtYXRlcmlhbE9yU2lkZS5pc01hdGVyaWFsOwoJICAgIGNvbnN0IGlzQXJyYXlNYXRlcmlhbCA9IEFycmF5LmlzQXJyYXkobWF0ZXJpYWxPclNpZGUpOwoJICAgIGxldCBjbG9zZXN0UmVzdWx0ID0gbnVsbDsKCSAgICBjb25zdCBncm91cHMgPSBnZW9tZXRyeS5ncm91cHM7CgkgICAgY29uc3Qgc2lkZSA9IGlzTWF0ZXJpYWwgPyBtYXRlcmlhbE9yU2lkZS5zaWRlIDogbWF0ZXJpYWxPclNpZGU7CgoJICAgIGZvciAobGV0IGkgPSAwLCBsID0gcm9vdHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CgkgICAgICBjb25zdCBtYXRlcmlhbFNpZGUgPSBpc0FycmF5TWF0ZXJpYWwgPyBtYXRlcmlhbE9yU2lkZVtncm91cHNbaV0ubWF0ZXJpYWxJbmRleF0uc2lkZSA6IHNpZGU7CgkgICAgICBzZXRCdWZmZXIocm9vdHNbaV0pOwoJICAgICAgY29uc3QgcmVzdWx0ID0gcmF5Y2FzdEZpcnN0KDAsIGdlb21ldHJ5LCBtYXRlcmlhbFNpZGUsIHJheSk7CgkgICAgICBjbGVhckJ1ZmZlcigpOwoKCSAgICAgIGlmIChyZXN1bHQgIT0gbnVsbCAmJiAoY2xvc2VzdFJlc3VsdCA9PSBudWxsIHx8IHJlc3VsdC5kaXN0YW5jZSA8IGNsb3Nlc3RSZXN1bHQuZGlzdGFuY2UpKSB7CgkgICAgICAgIGNsb3Nlc3RSZXN1bHQgPSByZXN1bHQ7CgoJICAgICAgICBpZiAoaXNBcnJheU1hdGVyaWFsKSB7CgkgICAgICAgICAgcmVzdWx0LmZhY2UubWF0ZXJpYWxJbmRleCA9IGdyb3Vwc1tpXS5tYXRlcmlhbEluZGV4OwoJICAgICAgICB9CgkgICAgICB9CgkgICAgfQoKCSAgICByZXR1cm4gY2xvc2VzdFJlc3VsdDsKCSAgfQoKCSAgaW50ZXJzZWN0c0dlb21ldHJ5KG90aGVyR2VvbWV0cnksIGdlb21Ub01lc2gpIHsKCSAgICBjb25zdCBnZW9tZXRyeSA9IHRoaXMuZ2VvbWV0cnk7CgkgICAgbGV0IHJlc3VsdCA9IGZhbHNlOwoKCSAgICBmb3IgKGNvbnN0IHJvb3Qgb2YgdGhpcy5fcm9vdHMpIHsKCSAgICAgIHNldEJ1ZmZlcihyb290KTsKCSAgICAgIHJlc3VsdCA9IGludGVyc2VjdHNHZW9tZXRyeSgwLCBnZW9tZXRyeSwgb3RoZXJHZW9tZXRyeSwgZ2VvbVRvTWVzaCk7CgkgICAgICBjbGVhckJ1ZmZlcigpOwoKCSAgICAgIGlmIChyZXN1bHQpIHsKCSAgICAgICAgYnJlYWs7CgkgICAgICB9CgkgICAgfQoKCSAgICByZXR1cm4gcmVzdWx0OwoJICB9CgoJICBzaGFwZWNhc3QoY2FsbGJhY2tzLCBfaW50ZXJzZWN0c1RyaWFuZ2xlRnVuYywgX29yZGVyTm9kZXNGdW5jKSB7CgkgICAgY29uc3QgZ2VvbWV0cnkgPSB0aGlzLmdlb21ldHJ5OwoKCSAgICBpZiAoY2FsbGJhY2tzIGluc3RhbmNlb2YgRnVuY3Rpb24pIHsKCSAgICAgIGlmIChfaW50ZXJzZWN0c1RyaWFuZ2xlRnVuYykgewoJICAgICAgICAvLyBTdXBwb3J0IHRoZSBwcmV2aW91cyBmdW5jdGlvbiBzaWduYXR1cmUgdGhhdCBwcm92aWRlZCB0aHJlZSBzZXF1ZW50aWFsIGluZGV4IGJ1ZmZlcgoJICAgICAgICAvLyBpbmRpY2VzIGhlcmUuCgkgICAgICAgIGNvbnN0IG9yaWdpbmFsVHJpYW5nbGVGdW5jID0gX2ludGVyc2VjdHNUcmlhbmdsZUZ1bmM7CgoJICAgICAgICBfaW50ZXJzZWN0c1RyaWFuZ2xlRnVuYyA9ICh0cmksIGluZGV4LCBjb250YWluZWQsIGRlcHRoKSA9PiB7CgkgICAgICAgICAgY29uc3QgaTMgPSBpbmRleCAqIDM7CgkgICAgICAgICAgcmV0dXJuIG9yaWdpbmFsVHJpYW5nbGVGdW5jKHRyaSwgaTMsIGkzICsgMSwgaTMgKyAyLCBjb250YWluZWQsIGRlcHRoKTsKCSAgICAgICAgfTsKCSAgICAgIH0KCgkgICAgICBjYWxsYmFja3MgPSB7CgkgICAgICAgIGJvdW5kc1RyYXZlcnNlT3JkZXI6IF9vcmRlck5vZGVzRnVuYywKCSAgICAgICAgaW50ZXJzZWN0c0JvdW5kczogY2FsbGJhY2tzLAoJICAgICAgICBpbnRlcnNlY3RzVHJpYW5nbGU6IF9pbnRlcnNlY3RzVHJpYW5nbGVGdW5jLAoJICAgICAgICBpbnRlcnNlY3RzUmFuZ2U6IG51bGwKCSAgICAgIH07CgkgICAgICBjb25zb2xlLndhcm4oJ01lc2hCVkg6IFNoYXBlY2FzdCBmdW5jdGlvbiBzaWduYXR1cmUgaGFzIGNoYW5nZWQgYW5kIG5vdyB0YWtlcyBhbiBvYmplY3Qgb2YgY2FsbGJhY2tzIGFzIGEgc2Vjb25kIGFyZ3VtZW50LiBTZWUgZG9jcyBmb3IgbmV3IHNpZ25hdHVyZS4nKTsKCSAgICB9CgoJICAgIGNvbnN0IHRyaWFuZ2xlID0gdHJpYW5nbGVQb29sLmdldFByaW1pdGl2ZSgpOwoJICAgIGxldCB7CgkgICAgICBib3VuZHNUcmF2ZXJzZU9yZGVyLAoJICAgICAgaW50ZXJzZWN0c0JvdW5kcywKCSAgICAgIGludGVyc2VjdHNSYW5nZSwKCSAgICAgIGludGVyc2VjdHNUcmlhbmdsZQoJICAgIH0gPSBjYWxsYmFja3M7CgoJICAgIGlmIChpbnRlcnNlY3RzUmFuZ2UgJiYgaW50ZXJzZWN0c1RyaWFuZ2xlKSB7CgkgICAgICBjb25zdCBvcmlnaW5hbEludGVyc2VjdHNSYW5nZSA9IGludGVyc2VjdHNSYW5nZTsKCgkgICAgICBpbnRlcnNlY3RzUmFuZ2UgPSAob2Zmc2V0LCBjb3VudCwgY29udGFpbmVkLCBkZXB0aCwgbm9kZUluZGV4KSA9PiB7CgkgICAgICAgIGlmICghb3JpZ2luYWxJbnRlcnNlY3RzUmFuZ2Uob2Zmc2V0LCBjb3VudCwgY29udGFpbmVkLCBkZXB0aCwgbm9kZUluZGV4KSkgewoJICAgICAgICAgIHJldHVybiBpdGVyYXRlT3ZlclRyaWFuZ2xlcyhvZmZzZXQsIGNvdW50LCBnZW9tZXRyeSwgaW50ZXJzZWN0c1RyaWFuZ2xlLCBjb250YWluZWQsIGRlcHRoLCB0cmlhbmdsZSk7CgkgICAgICAgIH0KCgkgICAgICAgIHJldHVybiB0cnVlOwoJICAgICAgfTsKCSAgICB9IGVsc2UgaWYgKCFpbnRlcnNlY3RzUmFuZ2UpIHsKCSAgICAgIGlmIChpbnRlcnNlY3RzVHJpYW5nbGUpIHsKCSAgICAgICAgaW50ZXJzZWN0c1JhbmdlID0gKG9mZnNldCwgY291bnQsIGNvbnRhaW5lZCwgZGVwdGgpID0+IHsKCSAgICAgICAgICByZXR1cm4gaXRlcmF0ZU92ZXJUcmlhbmdsZXMob2Zmc2V0LCBjb3VudCwgZ2VvbWV0cnksIGludGVyc2VjdHNUcmlhbmdsZSwgY29udGFpbmVkLCBkZXB0aCwgdHJpYW5nbGUpOwoJICAgICAgICB9OwoJICAgICAgfSBlbHNlIHsKCSAgICAgICAgaW50ZXJzZWN0c1JhbmdlID0gKG9mZnNldCwgY291bnQsIGNvbnRhaW5lZCkgPT4gewoJICAgICAgICAgIHJldHVybiBjb250YWluZWQ7CgkgICAgICAgIH07CgkgICAgICB9CgkgICAgfQoKCSAgICBsZXQgcmVzdWx0ID0gZmFsc2U7CgkgICAgbGV0IGJ5dGVPZmZzZXQgPSAwOwoKCSAgICBmb3IgKGNvbnN0IHJvb3Qgb2YgdGhpcy5fcm9vdHMpIHsKCSAgICAgIHNldEJ1ZmZlcihyb290KTsKCSAgICAgIHJlc3VsdCA9IHNoYXBlY2FzdCgwLCBnZW9tZXRyeSwgaW50ZXJzZWN0c0JvdW5kcywgaW50ZXJzZWN0c1JhbmdlLCBib3VuZHNUcmF2ZXJzZU9yZGVyLCBieXRlT2Zmc2V0KTsKCSAgICAgIGNsZWFyQnVmZmVyKCk7CgoJICAgICAgaWYgKHJlc3VsdCkgewoJICAgICAgICBicmVhazsKCSAgICAgIH0KCgkgICAgICBieXRlT2Zmc2V0ICs9IHJvb3QuYnl0ZUxlbmd0aDsKCSAgICB9CgoJICAgIHRyaWFuZ2xlUG9vbC5yZWxlYXNlUHJpbWl0aXZlKHRyaWFuZ2xlKTsKCSAgICByZXR1cm4gcmVzdWx0OwoJICB9CgoJICBidmhjYXN0KG90aGVyQnZoLCBtYXRyaXhUb0xvY2FsLCBjYWxsYmFja3MpIHsKCSAgICAvLyBCVkhDYXN0IGZ1bmN0aW9uIGZvciBpbnRlcnNlY3RpbmcgdHdvIEJWSHMgYWdhaW5zdCBlYWNoIG90aGVyLiBVbHRpbWF0ZWx5IGp1c3QgdXNlcyB0d28gcmVjdXJzaXZlIHNoYXBlY2FzdCBjYWxscyByYXRoZXIKCSAgICAvLyB0aGFuIGFuIGFwcHJvYWNoIHRoYXQgd2Fsa3MgZG93biB0aGUgdHJlZSAoc2VlIGJ2aGNhc3QuanMgZmlsZSBmb3IgbW9yZSBpbmZvKS4KCSAgICBsZXQgewoJICAgICAgaW50ZXJzZWN0c1JhbmdlcywKCSAgICAgIGludGVyc2VjdHNUcmlhbmdsZXMKCSAgICB9ID0gY2FsbGJhY2tzOwoJICAgIGNvbnN0IGluZGV4QXR0ciA9IHRoaXMuZ2VvbWV0cnkuaW5kZXg7CgkgICAgY29uc3QgcG9zaXRpb25BdHRyID0gdGhpcy5nZW9tZXRyeS5hdHRyaWJ1dGVzLnBvc2l0aW9uOwoJICAgIGNvbnN0IG90aGVySW5kZXhBdHRyID0gb3RoZXJCdmguZ2VvbWV0cnkuaW5kZXg7CgkgICAgY29uc3Qgb3RoZXJQb3NpdGlvbkF0dHIgPSBvdGhlckJ2aC5nZW9tZXRyeS5hdHRyaWJ1dGVzLnBvc2l0aW9uOwoJICAgIHRlbXBNYXRyaXguY29weShtYXRyaXhUb0xvY2FsKS5pbnZlcnQoKTsKCSAgICBjb25zdCB0cmlhbmdsZSA9IHRyaWFuZ2xlUG9vbC5nZXRQcmltaXRpdmUoKTsKCSAgICBjb25zdCB0cmlhbmdsZTIgPSB0cmlhbmdsZVBvb2wuZ2V0UHJpbWl0aXZlKCk7CgoJICAgIGlmIChpbnRlcnNlY3RzVHJpYW5nbGVzKSB7CgkgICAgICBmdW5jdGlvbiBpdGVyYXRlT3ZlckRvdWJsZVRyaWFuZ2xlcyhvZmZzZXQxLCBjb3VudDEsIG9mZnNldDIsIGNvdW50MiwgZGVwdGgxLCBpbmRleDEsIGRlcHRoMiwgaW5kZXgyKSB7CgkgICAgICAgIGZvciAobGV0IGkyID0gb2Zmc2V0MiwgbDIgPSBvZmZzZXQyICsgY291bnQyOyBpMiA8IGwyOyBpMisrKSB7CgkgICAgICAgICAgc2V0VHJpYW5nbGUodHJpYW5nbGUyLCBpMiAqIDMsIG90aGVySW5kZXhBdHRyLCBvdGhlclBvc2l0aW9uQXR0cik7CgkgICAgICAgICAgdHJpYW5nbGUyLmEuYXBwbHlNYXRyaXg0KG1hdHJpeFRvTG9jYWwpOwoJICAgICAgICAgIHRyaWFuZ2xlMi5iLmFwcGx5TWF0cml4NChtYXRyaXhUb0xvY2FsKTsKCSAgICAgICAgICB0cmlhbmdsZTIuYy5hcHBseU1hdHJpeDQobWF0cml4VG9Mb2NhbCk7CgkgICAgICAgICAgdHJpYW5nbGUyLm5lZWRzVXBkYXRlID0gdHJ1ZTsKCgkgICAgICAgICAgZm9yIChsZXQgaTEgPSBvZmZzZXQxLCBsMSA9IG9mZnNldDEgKyBjb3VudDE7IGkxIDwgbDE7IGkxKyspIHsKCSAgICAgICAgICAgIHNldFRyaWFuZ2xlKHRyaWFuZ2xlLCBpMSAqIDMsIGluZGV4QXR0ciwgcG9zaXRpb25BdHRyKTsKCSAgICAgICAgICAgIHRyaWFuZ2xlLm5lZWRzVXBkYXRlID0gdHJ1ZTsKCgkgICAgICAgICAgICBpZiAoaW50ZXJzZWN0c1RyaWFuZ2xlcyh0cmlhbmdsZSwgdHJpYW5nbGUyLCBpMSwgaTIsIGRlcHRoMSwgaW5kZXgxLCBkZXB0aDIsIGluZGV4MikpIHsKCSAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgfQoJICAgICAgICB9CgoJICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICB9CgoJICAgICAgaWYgKGludGVyc2VjdHNSYW5nZXMpIHsKCSAgICAgICAgY29uc3Qgb3JpZ2luYWxJbnRlcnNlY3RzUmFuZ2VzID0gaW50ZXJzZWN0c1JhbmdlczsKCgkgICAgICAgIGludGVyc2VjdHNSYW5nZXMgPSBmdW5jdGlvbiAob2Zmc2V0MSwgY291bnQxLCBvZmZzZXQyLCBjb3VudDIsIGRlcHRoMSwgaW5kZXgxLCBkZXB0aDIsIGluZGV4MikgewoJICAgICAgICAgIGlmICghb3JpZ2luYWxJbnRlcnNlY3RzUmFuZ2VzKG9mZnNldDEsIGNvdW50MSwgb2Zmc2V0MiwgY291bnQyLCBkZXB0aDEsIGluZGV4MSwgZGVwdGgyLCBpbmRleDIpKSB7CgkgICAgICAgICAgICByZXR1cm4gaXRlcmF0ZU92ZXJEb3VibGVUcmlhbmdsZXMob2Zmc2V0MSwgY291bnQxLCBvZmZzZXQyLCBjb3VudDIsIGRlcHRoMSwgaW5kZXgxLCBkZXB0aDIsIGluZGV4Mik7CgkgICAgICAgICAgfQoKCSAgICAgICAgICByZXR1cm4gdHJ1ZTsKCSAgICAgICAgfTsKCSAgICAgIH0gZWxzZSB7CgkgICAgICAgIGludGVyc2VjdHNSYW5nZXMgPSBpdGVyYXRlT3ZlckRvdWJsZVRyaWFuZ2xlczsKCSAgICAgIH0KCSAgICB9CgoJICAgIHRoaXMuZ2V0Qm91bmRpbmdCb3goYWFiYjIpOwoJICAgIGFhYmIyLmFwcGx5TWF0cml4NChtYXRyaXhUb0xvY2FsKTsKCSAgICBjb25zdCByZXN1bHQgPSB0aGlzLnNoYXBlY2FzdCh7CgkgICAgICBpbnRlcnNlY3RzQm91bmRzOiBib3ggPT4gYWFiYjIuaW50ZXJzZWN0c0JveChib3gpLAoJICAgICAgaW50ZXJzZWN0c1JhbmdlOiAob2Zmc2V0MSwgY291bnQxLCBjb250YWluZWQsIGRlcHRoMSwgbm9kZUluZGV4MSwgYm94KSA9PiB7CgkgICAgICAgIGFhYmIuY29weShib3gpOwoJICAgICAgICBhYWJiLmFwcGx5TWF0cml4NCh0ZW1wTWF0cml4KTsKCSAgICAgICAgcmV0dXJuIG90aGVyQnZoLnNoYXBlY2FzdCh7CgkgICAgICAgICAgaW50ZXJzZWN0c0JvdW5kczogYm94ID0+IGFhYmIuaW50ZXJzZWN0c0JveChib3gpLAoJICAgICAgICAgIGludGVyc2VjdHNSYW5nZTogKG9mZnNldDIsIGNvdW50MiwgY29udGFpbmVkLCBkZXB0aDIsIG5vZGVJbmRleDIpID0+IHsKCSAgICAgICAgICAgIHJldHVybiBpbnRlcnNlY3RzUmFuZ2VzKG9mZnNldDEsIGNvdW50MSwgb2Zmc2V0MiwgY291bnQyLCBkZXB0aDEsIG5vZGVJbmRleDEsIGRlcHRoMiwgbm9kZUluZGV4Mik7CgkgICAgICAgICAgfQoJICAgICAgICB9KTsKCSAgICAgIH0KCSAgICB9KTsKCSAgICB0cmlhbmdsZVBvb2wucmVsZWFzZVByaW1pdGl2ZSh0cmlhbmdsZSk7CgkgICAgdHJpYW5nbGVQb29sLnJlbGVhc2VQcmltaXRpdmUodHJpYW5nbGUyKTsKCSAgICByZXR1cm4gcmVzdWx0OwoJICB9CgkgIC8qIERlcml2ZWQgQ2FzdCBGdW5jdGlvbnMgKi8KCgoJICBpbnRlcnNlY3RzQm94KGJveCwgYm94VG9NZXNoKSB7CgkgICAgb2JiLnNldChib3gubWluLCBib3gubWF4LCBib3hUb01lc2gpOwoJICAgIG9iYi5uZWVkc1VwZGF0ZSA9IHRydWU7CgkgICAgcmV0dXJuIHRoaXMuc2hhcGVjYXN0KHsKCSAgICAgIGludGVyc2VjdHNCb3VuZHM6IGJveCA9PiBvYmIuaW50ZXJzZWN0c0JveChib3gpLAoJICAgICAgaW50ZXJzZWN0c1RyaWFuZ2xlOiB0cmkgPT4gb2JiLmludGVyc2VjdHNUcmlhbmdsZSh0cmkpCgkgICAgfSk7CgkgIH0KCgkgIGludGVyc2VjdHNTcGhlcmUoc3BoZXJlKSB7CgkgICAgcmV0dXJuIHRoaXMuc2hhcGVjYXN0KHsKCSAgICAgIGludGVyc2VjdHNCb3VuZHM6IGJveCA9PiBzcGhlcmUuaW50ZXJzZWN0c0JveChib3gpLAoJICAgICAgaW50ZXJzZWN0c1RyaWFuZ2xlOiB0cmkgPT4gdHJpLmludGVyc2VjdHNTcGhlcmUoc3BoZXJlKQoJICAgIH0pOwoJICB9CgoJICBjbG9zZXN0UG9pbnRUb0dlb21ldHJ5KG90aGVyR2VvbWV0cnksIGdlb21ldHJ5VG9CdmgsIHRhcmdldDEsIHRhcmdldDIsIG1pblRocmVzaG9sZCwgbWF4VGhyZXNob2xkKSB7CgkgICAgaWYgKHRhcmdldDEgPT09IHZvaWQgMCkgewoJICAgICAgdGFyZ2V0MSA9IHt9OwoJICAgIH0KCgkgICAgaWYgKHRhcmdldDIgPT09IHZvaWQgMCkgewoJICAgICAgdGFyZ2V0MiA9IHt9OwoJICAgIH0KCgkgICAgaWYgKG1pblRocmVzaG9sZCA9PT0gdm9pZCAwKSB7CgkgICAgICBtaW5UaHJlc2hvbGQgPSAwOwoJICAgIH0KCgkgICAgaWYgKG1heFRocmVzaG9sZCA9PT0gdm9pZCAwKSB7CgkgICAgICBtYXhUaHJlc2hvbGQgPSBJbmZpbml0eTsKCSAgICB9CgoJICAgIGlmICghb3RoZXJHZW9tZXRyeS5ib3VuZGluZ0JveCkgewoJICAgICAgb3RoZXJHZW9tZXRyeS5jb21wdXRlQm91bmRpbmdCb3goKTsKCSAgICB9CgoJICAgIG9iYi5zZXQob3RoZXJHZW9tZXRyeS5ib3VuZGluZ0JveC5taW4sIG90aGVyR2VvbWV0cnkuYm91bmRpbmdCb3gubWF4LCBnZW9tZXRyeVRvQnZoKTsKCSAgICBvYmIubmVlZHNVcGRhdGUgPSB0cnVlOwoJICAgIGNvbnN0IGdlb21ldHJ5ID0gdGhpcy5nZW9tZXRyeTsKCSAgICBjb25zdCBwb3MgPSBnZW9tZXRyeS5hdHRyaWJ1dGVzLnBvc2l0aW9uOwoJICAgIGNvbnN0IGluZGV4ID0gZ2VvbWV0cnkuaW5kZXg7CgkgICAgY29uc3Qgb3RoZXJQb3MgPSBvdGhlckdlb21ldHJ5LmF0dHJpYnV0ZXMucG9zaXRpb247CgkgICAgY29uc3Qgb3RoZXJJbmRleCA9IG90aGVyR2VvbWV0cnkuaW5kZXg7CgkgICAgY29uc3QgdHJpYW5nbGUgPSB0cmlhbmdsZVBvb2wuZ2V0UHJpbWl0aXZlKCk7CgkgICAgY29uc3QgdHJpYW5nbGUyID0gdHJpYW5nbGVQb29sLmdldFByaW1pdGl2ZSgpOwoJICAgIGxldCB0ZW1wVGFyZ2V0MSA9IHRlbXAxOwoJICAgIGxldCB0ZW1wVGFyZ2V0RGVzdDEgPSB0ZW1wMjsKCSAgICBsZXQgdGVtcFRhcmdldDIgPSBudWxsOwoJICAgIGxldCB0ZW1wVGFyZ2V0RGVzdDIgPSBudWxsOwoKCSAgICBpZiAodGFyZ2V0MikgewoJICAgICAgdGVtcFRhcmdldDIgPSB0ZW1wMzsKCSAgICAgIHRlbXBUYXJnZXREZXN0MiA9IHRlbXA0OwoJICAgIH0KCgkgICAgbGV0IGNsb3Nlc3REaXN0YW5jZSA9IEluZmluaXR5OwoJICAgIGxldCBjbG9zZXN0RGlzdGFuY2VUcmlJbmRleCA9IG51bGw7CgkgICAgbGV0IGNsb3Nlc3REaXN0YW5jZU90aGVyVHJpSW5kZXggPSBudWxsOwoJICAgIHRlbXBNYXRyaXguY29weShnZW9tZXRyeVRvQnZoKS5pbnZlcnQoKTsKCSAgICBvYmIyLm1hdHJpeC5jb3B5KHRlbXBNYXRyaXgpOwoJICAgIHRoaXMuc2hhcGVjYXN0KHsKCSAgICAgIGJvdW5kc1RyYXZlcnNlT3JkZXI6IGJveCA9PiB7CgkgICAgICAgIHJldHVybiBvYmIuZGlzdGFuY2VUb0JveChib3gsIE1hdGgubWluKGNsb3Nlc3REaXN0YW5jZSwgbWF4VGhyZXNob2xkKSk7CgkgICAgICB9LAoJICAgICAgaW50ZXJzZWN0c0JvdW5kczogKGJveCwgaXNMZWFmLCBzY29yZSkgPT4gewoJICAgICAgICBpZiAoc2NvcmUgPCBjbG9zZXN0RGlzdGFuY2UgJiYgc2NvcmUgPCBtYXhUaHJlc2hvbGQpIHsKCSAgICAgICAgICAvLyBpZiB3ZSBrbm93IHRoZSB0cmlhbmdsZXMgb2YgdGhpcyBib3VuZHMgd2lsbCBiZSBpbnRlcnNlY3RlZCBuZXh0IHRoZW4KCSAgICAgICAgICAvLyBzYXZlIHRoZSBib3VuZHMgdG8gdXNlIGR1cmluZyB0cmlhbmdsZSBjaGVja3MuCgkgICAgICAgICAgaWYgKGlzTGVhZikgewoJICAgICAgICAgICAgb2JiMi5taW4uY29weShib3gubWluKTsKCSAgICAgICAgICAgIG9iYjIubWF4LmNvcHkoYm94Lm1heCk7CgkgICAgICAgICAgICBvYmIyLm5lZWRzVXBkYXRlID0gdHJ1ZTsKCSAgICAgICAgICB9CgoJICAgICAgICAgIHJldHVybiB0cnVlOwoJICAgICAgICB9CgoJICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICB9LAoJICAgICAgaW50ZXJzZWN0c1JhbmdlOiAob2Zmc2V0LCBjb3VudCkgPT4gewoJICAgICAgICBpZiAob3RoZXJHZW9tZXRyeS5ib3VuZHNUcmVlKSB7CgkgICAgICAgICAgLy8gaWYgdGhlIG90aGVyIGdlb21ldHJ5IGhhcyBhIGJ2aCB0aGVuIHVzZSB0aGUgYWNjZWxlcmF0ZWQgcGF0aCB3aGVyZSB3ZSB1c2Ugc2hhcGVjYXN0IHRvIGZpbmQKCSAgICAgICAgICAvLyB0aGUgY2xvc2VzdCBib3VuZHMgaW4gdGhlIG90aGVyIGdlb21ldHJ5IHRvIGNoZWNrLgoJICAgICAgICAgIHJldHVybiBvdGhlckdlb21ldHJ5LmJvdW5kc1RyZWUuc2hhcGVjYXN0KHsKCSAgICAgICAgICAgIGJvdW5kc1RyYXZlcnNlT3JkZXI6IGJveCA9PiB7CgkgICAgICAgICAgICAgIHJldHVybiBvYmIyLmRpc3RhbmNlVG9Cb3goYm94LCBNYXRoLm1pbihjbG9zZXN0RGlzdGFuY2UsIG1heFRocmVzaG9sZCkpOwoJICAgICAgICAgICAgfSwKCSAgICAgICAgICAgIGludGVyc2VjdHNCb3VuZHM6IChib3gsIGlzTGVhZiwgc2NvcmUpID0+IHsKCSAgICAgICAgICAgICAgcmV0dXJuIHNjb3JlIDwgY2xvc2VzdERpc3RhbmNlICYmIHNjb3JlIDwgbWF4VGhyZXNob2xkOwoJICAgICAgICAgICAgfSwKCSAgICAgICAgICAgIGludGVyc2VjdHNSYW5nZTogKG90aGVyT2Zmc2V0LCBvdGhlckNvdW50KSA9PiB7CgkgICAgICAgICAgICAgIGZvciAobGV0IGkyID0gb3RoZXJPZmZzZXQgKiAzLCBsMiA9IChvdGhlck9mZnNldCArIG90aGVyQ291bnQpICogMzsgaTIgPCBsMjsgaTIgKz0gMykgewoJICAgICAgICAgICAgICAgIHNldFRyaWFuZ2xlKHRyaWFuZ2xlMiwgaTIsIG90aGVySW5kZXgsIG90aGVyUG9zKTsKCSAgICAgICAgICAgICAgICB0cmlhbmdsZTIuYS5hcHBseU1hdHJpeDQoZ2VvbWV0cnlUb0J2aCk7CgkgICAgICAgICAgICAgICAgdHJpYW5nbGUyLmIuYXBwbHlNYXRyaXg0KGdlb21ldHJ5VG9CdmgpOwoJICAgICAgICAgICAgICAgIHRyaWFuZ2xlMi5jLmFwcGx5TWF0cml4NChnZW9tZXRyeVRvQnZoKTsKCSAgICAgICAgICAgICAgICB0cmlhbmdsZTIubmVlZHNVcGRhdGUgPSB0cnVlOwoKCSAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gb2Zmc2V0ICogMywgbCA9IChvZmZzZXQgKyBjb3VudCkgKiAzOyBpIDwgbDsgaSArPSAzKSB7CgkgICAgICAgICAgICAgICAgICBzZXRUcmlhbmdsZSh0cmlhbmdsZSwgaSwgaW5kZXgsIHBvcyk7CgkgICAgICAgICAgICAgICAgICB0cmlhbmdsZS5uZWVkc1VwZGF0ZSA9IHRydWU7CgkgICAgICAgICAgICAgICAgICBjb25zdCBkaXN0ID0gdHJpYW5nbGUuZGlzdGFuY2VUb1RyaWFuZ2xlKHRyaWFuZ2xlMiwgdGVtcFRhcmdldDEsIHRlbXBUYXJnZXQyKTsKCgkgICAgICAgICAgICAgICAgICBpZiAoZGlzdCA8IGNsb3Nlc3REaXN0YW5jZSkgewoJICAgICAgICAgICAgICAgICAgICB0ZW1wVGFyZ2V0RGVzdDEuY29weSh0ZW1wVGFyZ2V0MSk7CgoJICAgICAgICAgICAgICAgICAgICBpZiAodGVtcFRhcmdldERlc3QyKSB7CgkgICAgICAgICAgICAgICAgICAgICAgdGVtcFRhcmdldERlc3QyLmNvcHkodGVtcFRhcmdldDIpOwoJICAgICAgICAgICAgICAgICAgICB9CgoJICAgICAgICAgICAgICAgICAgICBjbG9zZXN0RGlzdGFuY2UgPSBkaXN0OwoJICAgICAgICAgICAgICAgICAgICBjbG9zZXN0RGlzdGFuY2VUcmlJbmRleCA9IGkgLyAzOwoJICAgICAgICAgICAgICAgICAgICBjbG9zZXN0RGlzdGFuY2VPdGhlclRyaUluZGV4ID0gaTIgLyAzOwoJICAgICAgICAgICAgICAgICAgfSAvLyBzdG9wIHRyYXZlcnNhbCBpZiB3ZSBmaW5kIGEgcG9pbnQgdGhhdCdzIHVuZGVyIHRoZSBnaXZlbiB0aHJlc2hvbGQKCgoJICAgICAgICAgICAgICAgICAgaWYgKGRpc3QgPCBtaW5UaHJlc2hvbGQpIHsKCSAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgfSk7CgkgICAgICAgIH0gZWxzZSB7CgkgICAgICAgICAgLy8gSWYgbm8gYm91bmRzIHRyZWUgdGhlbiB3ZSdsbCBqdXN0IGNoZWNrIGV2ZXJ5IHRyaWFuZ2xlLgoJICAgICAgICAgIGNvbnN0IHRyaUNvdW50ID0gb3RoZXJJbmRleCA/IG90aGVySW5kZXguY291bnQgOiBvdGhlclBvcy5jb3VudDsKCgkgICAgICAgICAgZm9yIChsZXQgaTIgPSAwLCBsMiA9IHRyaUNvdW50OyBpMiA8IGwyOyBpMiArPSAzKSB7CgkgICAgICAgICAgICBzZXRUcmlhbmdsZSh0cmlhbmdsZTIsIGkyLCBvdGhlckluZGV4LCBvdGhlclBvcyk7CgkgICAgICAgICAgICB0cmlhbmdsZTIuYS5hcHBseU1hdHJpeDQoZ2VvbWV0cnlUb0J2aCk7CgkgICAgICAgICAgICB0cmlhbmdsZTIuYi5hcHBseU1hdHJpeDQoZ2VvbWV0cnlUb0J2aCk7CgkgICAgICAgICAgICB0cmlhbmdsZTIuYy5hcHBseU1hdHJpeDQoZ2VvbWV0cnlUb0J2aCk7CgkgICAgICAgICAgICB0cmlhbmdsZTIubmVlZHNVcGRhdGUgPSB0cnVlOwoKCSAgICAgICAgICAgIGZvciAobGV0IGkgPSBvZmZzZXQgKiAzLCBsID0gKG9mZnNldCArIGNvdW50KSAqIDM7IGkgPCBsOyBpICs9IDMpIHsKCSAgICAgICAgICAgICAgc2V0VHJpYW5nbGUodHJpYW5nbGUsIGksIGluZGV4LCBwb3MpOwoJICAgICAgICAgICAgICB0cmlhbmdsZS5uZWVkc1VwZGF0ZSA9IHRydWU7CgkgICAgICAgICAgICAgIGNvbnN0IGRpc3QgPSB0cmlhbmdsZS5kaXN0YW5jZVRvVHJpYW5nbGUodHJpYW5nbGUyLCB0ZW1wVGFyZ2V0MSwgdGVtcFRhcmdldDIpOwoKCSAgICAgICAgICAgICAgaWYgKGRpc3QgPCBjbG9zZXN0RGlzdGFuY2UpIHsKCSAgICAgICAgICAgICAgICB0ZW1wVGFyZ2V0RGVzdDEuY29weSh0ZW1wVGFyZ2V0MSk7CgoJICAgICAgICAgICAgICAgIGlmICh0ZW1wVGFyZ2V0RGVzdDIpIHsKCSAgICAgICAgICAgICAgICAgIHRlbXBUYXJnZXREZXN0Mi5jb3B5KHRlbXBUYXJnZXQyKTsKCSAgICAgICAgICAgICAgICB9CgoJICAgICAgICAgICAgICAgIGNsb3Nlc3REaXN0YW5jZSA9IGRpc3Q7CgkgICAgICAgICAgICAgICAgY2xvc2VzdERpc3RhbmNlVHJpSW5kZXggPSBpIC8gMzsKCSAgICAgICAgICAgICAgICBjbG9zZXN0RGlzdGFuY2VPdGhlclRyaUluZGV4ID0gaTIgLyAzOwoJICAgICAgICAgICAgICB9IC8vIHN0b3AgdHJhdmVyc2FsIGlmIHdlIGZpbmQgYSBwb2ludCB0aGF0J3MgdW5kZXIgdGhlIGdpdmVuIHRocmVzaG9sZAoKCgkgICAgICAgICAgICAgIGlmIChkaXN0IDwgbWluVGhyZXNob2xkKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgIH0KCSAgICB9KTsKCSAgICB0cmlhbmdsZVBvb2wucmVsZWFzZVByaW1pdGl2ZSh0cmlhbmdsZSk7CgkgICAgdHJpYW5nbGVQb29sLnJlbGVhc2VQcmltaXRpdmUodHJpYW5nbGUyKTsKCSAgICBpZiAoY2xvc2VzdERpc3RhbmNlID09PSBJbmZpbml0eSkgcmV0dXJuIG51bGw7CgkgICAgaWYgKCF0YXJnZXQxLnBvaW50KSB0YXJnZXQxLnBvaW50ID0gdGVtcFRhcmdldERlc3QxLmNsb25lKCk7ZWxzZSB0YXJnZXQxLnBvaW50LmNvcHkodGVtcFRhcmdldERlc3QxKTsKCSAgICB0YXJnZXQxLmRpc3RhbmNlID0gY2xvc2VzdERpc3RhbmNlLCB0YXJnZXQxLmZhY2VJbmRleCA9IGNsb3Nlc3REaXN0YW5jZVRyaUluZGV4OwoKCSAgICBpZiAodGFyZ2V0MikgewoJICAgICAgaWYgKCF0YXJnZXQyLnBvaW50KSB0YXJnZXQyLnBvaW50ID0gdGVtcFRhcmdldERlc3QyLmNsb25lKCk7ZWxzZSB0YXJnZXQyLnBvaW50LmNvcHkodGVtcFRhcmdldERlc3QyKTsKCSAgICAgIHRhcmdldDIucG9pbnQuYXBwbHlNYXRyaXg0KHRlbXBNYXRyaXgpOwoJICAgICAgdGVtcFRhcmdldERlc3QxLmFwcGx5TWF0cml4NCh0ZW1wTWF0cml4KTsKCSAgICAgIHRhcmdldDIuZGlzdGFuY2UgPSB0ZW1wVGFyZ2V0RGVzdDEuc3ViKHRhcmdldDIucG9pbnQpLmxlbmd0aCgpOwoJICAgICAgdGFyZ2V0Mi5mYWNlSW5kZXggPSBjbG9zZXN0RGlzdGFuY2VPdGhlclRyaUluZGV4OwoJICAgIH0KCgkgICAgcmV0dXJuIHRhcmdldDE7CgkgIH0KCgkgIGNsb3Nlc3RQb2ludFRvUG9pbnQocG9pbnQsIHRhcmdldCwgbWluVGhyZXNob2xkLCBtYXhUaHJlc2hvbGQpIHsKCSAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKCSAgICAgIHRhcmdldCA9IHt9OwoJICAgIH0KCgkgICAgaWYgKG1pblRocmVzaG9sZCA9PT0gdm9pZCAwKSB7CgkgICAgICBtaW5UaHJlc2hvbGQgPSAwOwoJICAgIH0KCgkgICAgaWYgKG1heFRocmVzaG9sZCA9PT0gdm9pZCAwKSB7CgkgICAgICBtYXhUaHJlc2hvbGQgPSBJbmZpbml0eTsKCSAgICB9CgoJICAgIC8vIGVhcmx5IG91dCBpZiB1bmRlciBtaW5UaHJlc2hvbGQKCSAgICAvLyBza2lwIGNoZWNraW5nIGlmIG92ZXIgbWF4VGhyZXNob2xkCgkgICAgLy8gc2V0IG1pblRocmVzaG9sZCA9IG1heFRocmVzaG9sZCB0byBxdWlja2x5IGNoZWNrIGlmIGEgcG9pbnQgaXMgd2l0aGluIGEgdGhyZXNob2xkCgkgICAgLy8gcmV0dXJucyBJbmZpbml0eSBpZiBubyB2YWx1ZSBmb3VuZAoJICAgIGNvbnN0IG1pblRocmVzaG9sZFNxID0gbWluVGhyZXNob2xkICogbWluVGhyZXNob2xkOwoJICAgIGNvbnN0IG1heFRocmVzaG9sZFNxID0gbWF4VGhyZXNob2xkICogbWF4VGhyZXNob2xkOwoJICAgIGxldCBjbG9zZXN0RGlzdGFuY2VTcSA9IEluZmluaXR5OwoJICAgIGxldCBjbG9zZXN0RGlzdGFuY2VUcmlJbmRleCA9IG51bGw7CgkgICAgdGhpcy5zaGFwZWNhc3QoewoJICAgICAgYm91bmRzVHJhdmVyc2VPcmRlcjogYm94ID0+IHsKCSAgICAgICAgdGVtcC5jb3B5KHBvaW50KS5jbGFtcChib3gubWluLCBib3gubWF4KTsKCSAgICAgICAgcmV0dXJuIHRlbXAuZGlzdGFuY2VUb1NxdWFyZWQocG9pbnQpOwoJICAgICAgfSwKCSAgICAgIGludGVyc2VjdHNCb3VuZHM6IChib3gsIGlzTGVhZiwgc2NvcmUpID0+IHsKCSAgICAgICAgcmV0dXJuIHNjb3JlIDwgY2xvc2VzdERpc3RhbmNlU3EgJiYgc2NvcmUgPCBtYXhUaHJlc2hvbGRTcTsKCSAgICAgIH0sCgkgICAgICBpbnRlcnNlY3RzVHJpYW5nbGU6ICh0cmksIHRyaUluZGV4KSA9PiB7CgkgICAgICAgIHRyaS5jbG9zZXN0UG9pbnRUb1BvaW50KHBvaW50LCB0ZW1wKTsKCSAgICAgICAgY29uc3QgZGlzdFNxID0gcG9pbnQuZGlzdGFuY2VUb1NxdWFyZWQodGVtcCk7CgoJICAgICAgICBpZiAoZGlzdFNxIDwgY2xvc2VzdERpc3RhbmNlU3EpIHsKCSAgICAgICAgICB0ZW1wMS5jb3B5KHRlbXApOwoJICAgICAgICAgIGNsb3Nlc3REaXN0YW5jZVNxID0gZGlzdFNxOwoJICAgICAgICAgIGNsb3Nlc3REaXN0YW5jZVRyaUluZGV4ID0gdHJpSW5kZXg7CgkgICAgICAgIH0KCgkgICAgICAgIGlmIChkaXN0U3EgPCBtaW5UaHJlc2hvbGRTcSkgewoJICAgICAgICAgIHJldHVybiB0cnVlOwoJICAgICAgICB9IGVsc2UgewoJICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgfQoJICAgIH0pOwoJICAgIGlmIChjbG9zZXN0RGlzdGFuY2VTcSA9PT0gSW5maW5pdHkpIHJldHVybiBudWxsOwoJICAgIGNvbnN0IGNsb3Nlc3REaXN0YW5jZSA9IE1hdGguc3FydChjbG9zZXN0RGlzdGFuY2VTcSk7CgkgICAgaWYgKCF0YXJnZXQucG9pbnQpIHRhcmdldC5wb2ludCA9IHRlbXAxLmNsb25lKCk7ZWxzZSB0YXJnZXQucG9pbnQuY29weSh0ZW1wMSk7CgkgICAgdGFyZ2V0LmRpc3RhbmNlID0gY2xvc2VzdERpc3RhbmNlLCB0YXJnZXQuZmFjZUluZGV4ID0gY2xvc2VzdERpc3RhbmNlVHJpSW5kZXg7CgkgICAgcmV0dXJuIHRhcmdldDsKCSAgfQoKCSAgZ2V0Qm91bmRpbmdCb3godGFyZ2V0KSB7CgkgICAgdGFyZ2V0Lm1ha2VFbXB0eSgpOwoJICAgIGNvbnN0IHJvb3RzID0gdGhpcy5fcm9vdHM7CgkgICAgcm9vdHMuZm9yRWFjaChidWZmZXIgPT4gewoJICAgICAgYXJyYXlUb0JveCgwLCBuZXcgRmxvYXQzMkFycmF5KGJ1ZmZlciksIHRlbXBCb3gpOwoJICAgICAgdGFyZ2V0LnVuaW9uKHRlbXBCb3gpOwoJICAgIH0pOwoJICAgIHJldHVybiB0YXJnZXQ7CgkgIH0KCgl9IC8vIERlcHJlY2F0aW9uCgoJY29uc3Qgb3JpZ2luYWxSYXljYXN0ID0gTWVzaEJWSC5wcm90b3R5cGUucmF5Y2FzdDsKCglNZXNoQlZILnByb3RvdHlwZS5yYXljYXN0ID0gZnVuY3Rpb24gKCkgewoJICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHsKCSAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldOwoJICB9CgoJICBpZiAoYXJnc1swXS5pc01lc2gpIHsKCSAgICBjb25zb2xlLndhcm4oJ01lc2hCVkg6IFRoZSBmdW5jdGlvbiBzaWduYXR1cmUgYW5kIHJlc3VsdHMgZnJhbWUgZm9yICJyYXljYXN0IiBoYXMgY2hhbmdlZC4gU2VlIGRvY3MgZm9yIG5ldyBzaWduYXR1cmUuJyk7CgkgICAgY29uc3QgW21lc2gsIHJheWNhc3RlciwgcmF5LCBpbnRlcnNlY3RzXSA9IGFyZ3M7CgkgICAgY29uc3QgcmVzdWx0cyA9IG9yaWdpbmFsUmF5Y2FzdC5jYWxsKHRoaXMsIHJheSwgbWVzaC5tYXRlcmlhbCk7CgkgICAgcmVzdWx0cy5mb3JFYWNoKGhpdCA9PiB7CgkgICAgICBoaXQgPSBjb252ZXJ0UmF5Y2FzdEludGVyc2VjdChoaXQsIG1lc2gsIHJheWNhc3Rlcik7CgoJICAgICAgaWYgKGhpdCkgewoJICAgICAgICBpbnRlcnNlY3RzLnB1c2goaGl0KTsKCSAgICAgIH0KCSAgICB9KTsKCSAgICByZXR1cm4gaW50ZXJzZWN0czsKCSAgfSBlbHNlIHsKCSAgICByZXR1cm4gb3JpZ2luYWxSYXljYXN0LmFwcGx5KHRoaXMsIGFyZ3MpOwoJICB9Cgl9OwoKCWNvbnN0IG9yaWdpbmFsUmF5Y2FzdEZpcnN0ID0gTWVzaEJWSC5wcm90b3R5cGUucmF5Y2FzdEZpcnN0OwoKCU1lc2hCVkgucHJvdG90eXBlLnJheWNhc3RGaXJzdCA9IGZ1bmN0aW9uICgpIHsKCSAgZm9yICh2YXIgX2xlbjIgPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4yKSwgX2tleTIgPSAwOyBfa2V5MiA8IF9sZW4yOyBfa2V5MisrKSB7CgkgICAgYXJnc1tfa2V5Ml0gPSBhcmd1bWVudHNbX2tleTJdOwoJICB9CgoJICBpZiAoYXJnc1swXS5pc01lc2gpIHsKCSAgICBjb25zb2xlLndhcm4oJ01lc2hCVkg6IFRoZSBmdW5jdGlvbiBzaWduYXR1cmUgYW5kIHJlc3VsdHMgZnJhbWUgZm9yICJyYXljYXN0Rmlyc3QiIGhhcyBjaGFuZ2VkLiBTZWUgZG9jcyBmb3IgbmV3IHNpZ25hdHVyZS4nKTsKCSAgICBjb25zdCBbbWVzaCwgcmF5Y2FzdGVyLCByYXldID0gYXJnczsKCSAgICByZXR1cm4gY29udmVydFJheWNhc3RJbnRlcnNlY3Qob3JpZ2luYWxSYXljYXN0Rmlyc3QuY2FsbCh0aGlzLCByYXksIG1lc2gubWF0ZXJpYWwpLCBtZXNoLCByYXljYXN0ZXIpOwoJICB9IGVsc2UgewoJICAgIHJldHVybiBvcmlnaW5hbFJheWNhc3RGaXJzdC5hcHBseSh0aGlzLCBhcmdzKTsKCSAgfQoJfTsKCgljb25zdCBvcmlnaW5hbENsb3Nlc3RQb2ludFRvUG9pbnQgPSBNZXNoQlZILnByb3RvdHlwZS5jbG9zZXN0UG9pbnRUb1BvaW50OwoKCU1lc2hCVkgucHJvdG90eXBlLmNsb3Nlc3RQb2ludFRvUG9pbnQgPSBmdW5jdGlvbiAoKSB7CgkgIGZvciAodmFyIF9sZW4zID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuMyksIF9rZXkzID0gMDsgX2tleTMgPCBfbGVuMzsgX2tleTMrKykgewoJICAgIGFyZ3NbX2tleTNdID0gYXJndW1lbnRzW19rZXkzXTsKCSAgfQoKCSAgaWYgKGFyZ3NbMF0uaXNNZXNoKSB7CgkgICAgY29uc29sZS53YXJuKCdNZXNoQlZIOiBUaGUgZnVuY3Rpb24gc2lnbmF0dXJlIGFuZCByZXN1bHRzIGZyYW1lIGZvciAiY2xvc2VzdFBvaW50VG9Qb2ludCIgaGFzIGNoYW5nZWQuIFNlZSBkb2NzIGZvciBuZXcgc2lnbmF0dXJlLicpOwoJICAgIGFyZ3MudW5zaGlmdCgpOwoJICAgIGNvbnN0IHRhcmdldCA9IGFyZ3NbMV07CgkgICAgY29uc3QgcmVzdWx0ID0ge307CgkgICAgYXJnc1sxXSA9IHJlc3VsdDsKCSAgICBvcmlnaW5hbENsb3Nlc3RQb2ludFRvUG9pbnQuYXBwbHkodGhpcywgYXJncyk7CgoJICAgIGlmICh0YXJnZXQpIHsKCSAgICAgIHRhcmdldC5jb3B5KHJlc3VsdC5wb2ludCk7CgkgICAgfQoKCSAgICByZXR1cm4gcmVzdWx0LmRpc3RhbmNlOwoJICB9IGVsc2UgewoJICAgIHJldHVybiBvcmlnaW5hbENsb3Nlc3RQb2ludFRvUG9pbnQuYXBwbHkodGhpcywgYXJncyk7CgkgIH0KCX07CgoJY29uc3Qgb3JpZ2luYWxDbG9zZXN0UG9pbnRUb0dlb21ldHJ5ID0gTWVzaEJWSC5wcm90b3R5cGUuY2xvc2VzdFBvaW50VG9HZW9tZXRyeTsKCglNZXNoQlZILnByb3RvdHlwZS5jbG9zZXN0UG9pbnRUb0dlb21ldHJ5ID0gZnVuY3Rpb24gKCkgewoJICBmb3IgKHZhciBfbGVuNCA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbjQpLCBfa2V5NCA9IDA7IF9rZXk0IDwgX2xlbjQ7IF9rZXk0KyspIHsKCSAgICBhcmdzW19rZXk0XSA9IGFyZ3VtZW50c1tfa2V5NF07CgkgIH0KCgkgIGNvbnN0IHRhcmdldDEgPSBhcmdzWzJdOwoJICBjb25zdCB0YXJnZXQyID0gYXJnc1szXTsKCgkgIGlmICh0YXJnZXQxICYmIHRhcmdldDEuaXNWZWN0b3IzIHx8IHRhcmdldDIgJiYgdGFyZ2V0Mi5pc1ZlY3RvcjMpIHsKCSAgICBjb25zb2xlLndhcm4oJ01lc2hCVkg6IFRoZSBmdW5jdGlvbiBzaWduYXR1cmUgYW5kIHJlc3VsdHMgZnJhbWUgZm9yICJjbG9zZXN0UG9pbnRUb0dlb21ldHJ5IiBoYXMgY2hhbmdlZC4gU2VlIGRvY3MgZm9yIG5ldyBzaWduYXR1cmUuJyk7CgkgICAgY29uc3QgcmVzdWx0MSA9IHt9OwoJICAgIGNvbnN0IHJlc3VsdDIgPSB7fTsKCSAgICBjb25zdCBnZW9tZXRyeVRvQnZoID0gYXJnc1sxXTsKCSAgICBhcmdzWzJdID0gcmVzdWx0MTsKCSAgICBhcmdzWzNdID0gcmVzdWx0MjsKCSAgICBvcmlnaW5hbENsb3Nlc3RQb2ludFRvR2VvbWV0cnkuYXBwbHkodGhpcywgYXJncyk7CgoJICAgIGlmICh0YXJnZXQxKSB7CgkgICAgICB0YXJnZXQxLmNvcHkocmVzdWx0MS5wb2ludCk7CgkgICAgfQoKCSAgICBpZiAodGFyZ2V0MikgewoJICAgICAgdGFyZ2V0Mi5jb3B5KHJlc3VsdDIucG9pbnQpLmFwcGx5TWF0cml4NChnZW9tZXRyeVRvQnZoKTsKCSAgICB9CgoJICAgIHJldHVybiByZXN1bHQxLmRpc3RhbmNlOwoJICB9IGVsc2UgewoJICAgIHJldHVybiBvcmlnaW5hbENsb3Nlc3RQb2ludFRvR2VvbWV0cnkuYXBwbHkodGhpcywgYXJncyk7CgkgIH0KCX07CgoJY29uc3Qgb3JpZ2luYWxSZWZpdCA9IE1lc2hCVkgucHJvdG90eXBlLnJlZml0OwoKCU1lc2hCVkgucHJvdG90eXBlLnJlZml0ID0gZnVuY3Rpb24gKCkgewoJICBmb3IgKHZhciBfbGVuNSA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbjUpLCBfa2V5NSA9IDA7IF9rZXk1IDwgX2xlbjU7IF9rZXk1KyspIHsKCSAgICBhcmdzW19rZXk1XSA9IGFyZ3VtZW50c1tfa2V5NV07CgkgIH0KCgkgIGNvbnN0IG5vZGVJbmRpY2VzID0gYXJnc1swXTsKCSAgY29uc3QgdGVybWluYXRpb25JbmRpY2VzID0gYXJnc1sxXTsKCgkgIGlmICh0ZXJtaW5hdGlvbkluZGljZXMgJiYgKHRlcm1pbmF0aW9uSW5kaWNlcyBpbnN0YW5jZW9mIFNldCB8fCBBcnJheS5pc0FycmF5KHRlcm1pbmF0aW9uSW5kaWNlcykpKSB7CgkgICAgY29uc29sZS53YXJuKCdNZXNoQlZIOiBUaGUgZnVuY3Rpb24gc2lnbmF0dXJlIGZvciAicmVmaXQiIGhhcyBjaGFuZ2VkLiBTZWUgZG9jcyBmb3IgbmV3IHNpZ25hdHVyZS4nKTsKCSAgICBjb25zdCBuZXdOb2RlSW5kaWNlcyA9IG5ldyBTZXQoKTsKCSAgICB0ZXJtaW5hdGlvbkluZGljZXMuZm9yRWFjaCh2ID0+IG5ld05vZGVJbmRpY2VzLmFkZCh2KSk7CgoJICAgIGlmIChub2RlSW5kaWNlcykgewoJICAgICAgbm9kZUluZGljZXMuZm9yRWFjaCh2ID0+IG5ld05vZGVJbmRpY2VzLmFkZCh2KSk7CgkgICAgfQoKCSAgICBvcmlnaW5hbFJlZml0LmNhbGwodGhpcywgbmV3Tm9kZUluZGljZXMpOwoJICB9IGVsc2UgewoJICAgIG9yaWdpbmFsUmVmaXQuYXBwbHkodGhpcywgYXJncyk7CgkgIH0KCX07CgoJWydpbnRlcnNlY3RzR2VvbWV0cnknLCAnc2hhcGVjYXN0JywgJ2ludGVyc2VjdHNCb3gnLCAnaW50ZXJzZWN0c1NwaGVyZSddLmZvckVhY2gobmFtZSA9PiB7CgkgIGNvbnN0IG9yaWdpbmFsRnVuYyA9IE1lc2hCVkgucHJvdG90eXBlW25hbWVdOwoKCSAgTWVzaEJWSC5wcm90b3R5cGVbbmFtZV0gPSBmdW5jdGlvbiAoKSB7CgkgICAgZm9yICh2YXIgX2xlbjYgPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW42KSwgX2tleTYgPSAwOyBfa2V5NiA8IF9sZW42OyBfa2V5NisrKSB7CgkgICAgICBhcmdzW19rZXk2XSA9IGFyZ3VtZW50c1tfa2V5Nl07CgkgICAgfQoKCSAgICBpZiAoYXJnc1swXSA9PT0gbnVsbCB8fCBhcmdzWzBdLmlzTWVzaCkgewoJICAgICAgYXJncy5zaGlmdCgpOwoJICAgICAgY29uc29sZS53YXJuKGBNZXNoQlZIOiBUaGUgZnVuY3Rpb24gc2lnbmF0dXJlIGZvciAiJHtuYW1lfSIgaGFzIGNoYW5nZWQgYW5kIG5vIGxvbmdlciB0YWtlcyBNZXNoLiBTZWUgZG9jcyBmb3IgbmV3IHNpZ25hdHVyZS5gKTsKCSAgICB9CgoJICAgIHJldHVybiBvcmlnaW5hbEZ1bmMuYXBwbHkodGhpcywgYXJncyk7CgkgIH07Cgl9KTsKCglzZWxmLm9ubWVzc2FnZSA9IGZ1bmN0aW9uIChfcmVmKSB7CgkgIGxldCB7CgkgICAgZGF0YQoJICB9ID0gX3JlZjsKCSAgbGV0IHByZXZUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7CgoJICBmdW5jdGlvbiBvblByb2dyZXNzQ2FsbGJhY2socHJvZ3Jlc3MpIHsKCSAgICBjb25zdCBjdXJyVGltZSA9IHBlcmZvcm1hbmNlLm5vdygpOwoKCSAgICBpZiAoY3VyclRpbWUgLSBwcmV2VGltZSA+PSAxMCkgewoJICAgICAgc2VsZi5wb3N0TWVzc2FnZSh7CgkgICAgICAgIGVycm9yOiBudWxsLAoJICAgICAgICBzZXJpYWxpemVkOiBudWxsLAoJICAgICAgICBwb3NpdGlvbjogbnVsbCwKCSAgICAgICAgcHJvZ3Jlc3MKCSAgICAgIH0pOwoJICAgICAgcHJldlRpbWUgPSBjdXJyVGltZTsKCSAgICB9CgkgIH0KCgkgIGNvbnN0IHsKCSAgICBpbmRleCwKCSAgICBwb3NpdGlvbiwKCSAgICBvcHRpb25zCgkgIH0gPSBkYXRhOwoKCSAgdHJ5IHsKCSAgICBjb25zdCBnZW9tZXRyeSA9IG5ldyBCdWZmZXJHZW9tZXRyeSgpOwoJICAgIGdlb21ldHJ5LnNldEF0dHJpYnV0ZSgncG9zaXRpb24nLCBuZXcgQnVmZmVyQXR0cmlidXRlKHBvc2l0aW9uLCAzLCBmYWxzZSkpOwoKCSAgICBpZiAoaW5kZXgpIHsKCSAgICAgIGdlb21ldHJ5LnNldEluZGV4KG5ldyBCdWZmZXJBdHRyaWJ1dGUoaW5kZXgsIDEsIGZhbHNlKSk7CgkgICAgfQoKCSAgICBpZiAob3B0aW9ucy5pbmNsdWRlZFByb2dyZXNzQ2FsbGJhY2spIHsKCSAgICAgIG9wdGlvbnMub25Qcm9ncmVzcyA9IG9uUHJvZ3Jlc3NDYWxsYmFjazsKCSAgICB9CgoJICAgIGNvbnN0IGJ2aCA9IG5ldyBNZXNoQlZIKGdlb21ldHJ5LCBvcHRpb25zKTsKCSAgICBjb25zdCBzZXJpYWxpemVkID0gTWVzaEJWSC5zZXJpYWxpemUoYnZoLCB7CgkgICAgICBjb3B5SW5kZXhCdWZmZXI6IGZhbHNlCgkgICAgfSk7CgkgICAgc2VsZi5wb3N0TWVzc2FnZSh7CgkgICAgICBlcnJvcjogbnVsbCwKCSAgICAgIHNlcmlhbGl6ZWQsCgkgICAgICBwb3NpdGlvbiwKCSAgICAgIHByb2dyZXNzOiAxCgkgICAgfSwgW3NlcmlhbGl6ZWQuaW5kZXguYnVmZmVyLCBwb3NpdGlvbi5idWZmZXJdKTsKCSAgfSBjYXRjaCAoZXJyb3IpIHsKCSAgICBzZWxmLnBvc3RNZXNzYWdlKHsKCSAgICAgIGVycm9yLAoJICAgICAgc2VyaWFsaXplZDogbnVsbCwKCSAgICAgIHBvc2l0aW9uOiBudWxsLAoJICAgICAgcHJvZ3Jlc3M6IDEKCSAgICB9KTsKCSAgfQoJfTsKCn0pKCk7Cgo=',
  null,
  false
)
/* eslint-enable */

export class GenerateMeshBVHWorker {
  constructor() {
    this.running = false
    this.worker = new WorkerFactory()
  }

  generate(geometry, options = {}) {
    if (this.running) {
      throw new Error('GenerateMeshBVHWorker: Already running job.')
    }

    const { worker } = this
    this.running = true

    return new Promise((resolve, reject) => {
      worker.onmessage = (e) => {
        this.running = false
        const { data } = e

        if (data.error) {
          reject(new Error(data.error))
          worker.onmessage = null
        } else if (data.serialized) {
          const { serialized, position } = data
          const bvh = MeshBVH.deserialize(serialized, geometry, { setIndex: false })
          const boundsOptions = Object.assign(
            {
              setBoundingBox: true
            },
            options
          )

          // we need to replace the arrays because they're neutered entirely by the
          // webworker transfer.
          geometry.attributes.position.array = position
          if (geometry.index) {
            geometry.index.array = serialized.index
          } else {
            const newIndex = new BufferAttribute(serialized.index, 1, false)
            geometry.setIndex(newIndex)
          }

          if (boundsOptions.setBoundingBox) {
            geometry.boundingBox = bvh.getBoundingBox(new Box3())
          }

          resolve(bvh)
          worker.onmessage = null
        } else if (options.onProgress) {
          options.onProgress(data.progress)
        }
      }

      const index = geometry.index ? geometry.index.array : null
      const position = geometry.attributes.position.array

      if (position.isInterleavedBufferAttribute || (index && index.isInterleavedBufferAttribute)) {
        throw new Error('GenerateMeshBVHWorker: InterleavedBufferAttribute are not supported for the geometry attributes.')
      }

      const transferrables = [position]
      if (index) {
        transferrables.push(index)
      }

      worker.postMessage(
        {
          index,
          position,
          options: {
            ...options,
            onProgress: null,
            includedProgressCallback: Boolean(options.onProgress)
          }
        },
        transferrables.map((arr) => arr.buffer)
      )
    })
  }

  terminate() {
    this.worker.terminate()
  }
}
